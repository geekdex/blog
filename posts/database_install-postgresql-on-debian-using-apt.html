<!DOCTYPE html><html lang="zh-CN" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“" /><meta property="og:locale" content="zh_CN" /><meta name="description" content="åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ apt å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚" /><meta property="og:description" content="åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ apt å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚" /><link rel="canonical" href="https://blog.algs.tech/posts/database_install-postgresql-on-debian-using-apt.html" /><meta property="og:url" content="https://blog.algs.tech/posts/database_install-postgresql-on-debian-using-apt.html" /><meta property="og:site_name" content="æå®¢å¼€å‘è€…-åšå®¢" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2025-07-01T11:46:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-07-01T11:46:00+08:00","datePublished":"2025-07-01T11:46:00+08:00","description":"åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ apt å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚","headline":"åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.algs.tech/posts/database_install-postgresql-on-debian-using-apt.html"},"url":"https://blog.algs.tech/posts/database_install-postgresql-on-debian-using-apt.html"}</script><title>åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“ | æå®¢å¼€å‘è€…-åšå®¢</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="æå®¢å¼€å‘è€…-åšå®¢"><meta name="application-name" content="æå®¢å¼€å‘è€…-åšå®¢"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="stylesheet" href="/assets/dist/fonts/main.css"><link rel="stylesheet" href="/assets/dist/bootstrap.min.css"><link rel="stylesheet" href="/assets/dist/fontawesome.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="/assets/lib/tocbot/tocbot.min.css"><link rel="stylesheet" href="/assets/dist/magnific-popup.min.css"> <script src="/assets/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/img/about/avatar.jpeg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">æå®¢å¼€å‘è€…-åšå®¢</a></div><div class="site-subtitle font-italic">åœ¨æ¢ç´¢æœªçŸ¥ä¸æ¢¦æƒ³çš„é“è·¯ä¸Šï¼Œè®©æˆ‘ä»¬æ‹¥æœ‰å…±åŒçš„ç§°å‘¼ -- å¼€å‘è€…</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>é¦–é¡µ</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>åˆ†ç±»</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>æ ‡ç­¾</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>å½’æ¡£</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>å…³äº</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/geekdex" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['pan.hy','foxmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> é¦–é¡µ </a> </span> <span>åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> æ–‡ç« </div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="æœç´¢..."> </span> <span id="search-cancel" >å–æ¶ˆ</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“</h1><div class="post-meta text-muted"> <span> å‘è¡¨äº <em class="" data-ts="1751341560" data-df="YYYY/MM/DD" data-toggle="tooltip" data-placement="bottom"> 2025/07/01 </em> </span> <span style="float: right;"> <a href="https://lab.aoco.tech/convert?url=https://raw.githubusercontent.com/geekdex/blog/refs/heads/main/_posts/2025-07-01-database_install-postgresql-on-debian-using-apt.md" class="view-source" target="_blank" style="color: #2a5caa; text-decoration: none; font-weight: 500;"> æŸ¥çœ‹Codelabs </a> &nbsp;|&nbsp; <a href="https://github.com/geekdex/blog/blob/main/_posts/2025-07-01-database_install-postgresql-on-debian-using-apt.md" class="view-source" target="_blank" style="color: #2a5caa; text-decoration: none; font-weight: 500;"> æŸ¥çœ‹æºç  </a> </span><div class="d-flex justify-content-between"> <span> ä½œè€… <em> <a href="https://blog.algs.tech">blog.algs.tech</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1927 å­—"> <em>10 åˆ†é’Ÿ</em>é˜…è¯»</span></div></div></div><div class="post-content"><p>åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ <code class="language-plaintext highlighter-rouge">apt</code> å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚</p><h2 id="ä¸€å®‰è£…-postgresql"><span class="mr-2">ä¸€ã€å®‰è£… PostgreSQL</span><a href="#ä¸€å®‰è£…-postgresql" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="11-ä½¿ç”¨aptå®‰è£…"><span class="mr-2">1.1 ä½¿ç”¨aptå®‰è£…</span><a href="#11-ä½¿ç”¨aptå®‰è£…" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>postgresql
</pre></table></code></div></div><p>è¿™æ¡å‘½ä»¤ä¼šå®‰è£…å½“å‰ Debian 12 é»˜è®¤çš„è½¯ä»¶æºä¸­ PostgreSQL çš„ä¸»ç‰ˆæœ¬ï¼ˆé€šå¸¸æ˜¯ PostgreSQL 13ã€14 æˆ– 15ï¼Œè§†å½“å‰æºä¸ºå‡†ï¼‰ã€‚æˆ‘åœ¨ 2025.07.01 å®‰è£…çš„æ—¶å€™ï¼Œæ˜¯15ã€‚</p><h3 id="12-å®‰è£…éªŒè¯"><span class="mr-2">1.2 å®‰è£…éªŒè¯</span><a href="#12-å®‰è£…éªŒè¯" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>APT å®‰è£… PostgreSQL åä¼šè‡ªåŠ¨åšä»¥ä¸‹äº‹æƒ…ï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªç³»ç»Ÿç”¨æˆ· <code class="language-plaintext highlighter-rouge">postgres</code>ã€‚<li>åˆå§‹åŒ–æ•°æ®ç›®å½• <code class="language-plaintext highlighter-rouge">/var/lib/postgresql/15/main</code>ã€‚<li>å¯åŠ¨ PostgreSQL æœåŠ¡ã€‚<li>åˆ›å»ºé»˜è®¤æ•°æ®åº“ <code class="language-plaintext highlighter-rouge">postgres</code> å’Œé»˜è®¤ç”¨æˆ· <code class="language-plaintext highlighter-rouge">postgres</code>ï¼Œè¿™ä¸ªç”¨æˆ·æ˜¯ postgrs çš„è¶…çº§ç”¨æˆ·ã€‚</ol><p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸€äº›ä¸ postgres ç›¸å…³çš„åŸºæœ¬ä¿¡æ¯</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c"># æŸ¥çœ‹ PostgreSQL çš„ç‰ˆæœ¬</span>
psql <span class="nt">--version</span>

<span class="c"># æŸ¥çœ‹ PostgreSQL æœåŠ¡çŠ¶æ€</span>
<span class="nb">sudo </span>systemctl status postgresql

<span class="c"># åˆ—å‡ºå®‰è£…çš„ PostgreSQL ç‰ˆæœ¬åŠé…ç½®è·¯å¾„</span>
<span class="nb">ls</span> /etc/postgresql/
<span class="nb">ls</span> /etc/postgresql/15/main/

<span class="c"># æŸ¥çœ‹æ•°æ®ç›®å½•ä½ç½®ï¼ˆå¯ä»¥åœ¨ postgresql.conf ä¸­ç¡®è®¤ï¼‰</span>
<span class="nb">grep </span>data_directory /etc/postgresql/15/main/postgresql.conf
</pre></table></code></div></div><p>ä½ å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤ä»¥è¶…çº§ç”¨æˆ·èº«ä»½è®¿é—®æ•°æ®åº“ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo</span> <span class="nt">-u</span> postgres psql
</pre></table></code></div></div><h2 id="äºŒå®‰è£…å®Œæˆåæ–‡ä»¶çš„ç»“æ„"><span class="mr-2">äºŒã€å®‰è£…å®Œæˆåæ–‡ä»¶çš„ç»“æ„</span><a href="#äºŒå®‰è£…å®Œæˆåæ–‡ä»¶çš„ç»“æ„" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>æŒ‰ç±»å‹åˆ†ç±»è¯´æ˜ PostgreSQL å®‰è£…åï¼Œå¯ä»¥å…³æ³¨ä¸€ä¸‹æ¶‰åŠçš„éƒ¨åˆ†æ–‡ä»¶åŠå®ƒä»¬çš„è·¯å¾„ï¼š</p><h3 id="21--å¯æ‰§è¡Œæ–‡ä»¶å‘½ä»¤è¡Œå·¥å…·"><span class="mr-2">2.1 ğŸ›  å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰</span><a href="#21--å¯æ‰§è¡Œæ–‡ä»¶å‘½ä»¤è¡Œå·¥å…·" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è¿™äº›æ–‡ä»¶ç”¨äºç®¡ç†å’Œä½¿ç”¨ PostgreSQLï¼š</p><div class="table-wrapper"><table><thead><tr><th>å‘½ä»¤<th>è¯´æ˜<th>è·¯å¾„<tbody><tr><td><code class="language-plaintext highlighter-rouge">psql</code><td>PostgreSQL çš„äº¤äº’å¼ç»ˆç«¯<td><code class="language-plaintext highlighter-rouge">/usr/bin/psql</code><tr><td><code class="language-plaintext highlighter-rouge">createdb</code><td>åˆ›å»ºæ•°æ®åº“<td><code class="language-plaintext highlighter-rouge">/usr/bin/createdb</code><tr><td><code class="language-plaintext highlighter-rouge">createuser</code><td>åˆ›å»ºç”¨æˆ·<td><code class="language-plaintext highlighter-rouge">/usr/bin/createuser</code><tr><td><code class="language-plaintext highlighter-rouge">pg_ctl</code><td>æ§åˆ¶ PostgreSQL æœåŠ¡<td><code class="language-plaintext highlighter-rouge">/usr/lib/postgresql/15/bin/</code><tr><td><code class="language-plaintext highlighter-rouge">postgres</code><td>æ•°æ®åº“ä¸»æœåŠ¡è¿›ç¨‹<td><code class="language-plaintext highlighter-rouge">/usr/lib/postgresql/15/bin/</code></table></div><p>è¿™äº› <strong>å¯æ‰§è¡Œæ–‡ä»¶</strong> éƒ½æ˜¯åœ¨å®‰è£…æ—¶ç”± APT å®‰è£…äº§ç”Ÿçš„ã€‚</p><h3 id="22--ä¾èµ–æ–‡ä»¶å’Œåº“æ–‡ä»¶"><span class="mr-2">2.2 ğŸ“¦ ä¾èµ–æ–‡ä»¶å’Œåº“æ–‡ä»¶</span><a href="#22--ä¾èµ–æ–‡ä»¶å’Œåº“æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ç³»ç»Ÿè¿è¡Œ PostgreSQL æ‰€éœ€çš„ä¾èµ–å…±äº«åº“ï¼š</p><div class="table-wrapper"><table><thead><tr><th>ç±»å‹<th>è·¯å¾„ç¤ºä¾‹<tbody><tr><td>åŠ¨æ€åº“<td><code class="language-plaintext highlighter-rouge">/usr/lib/x86_64-linux-gnu/libpq.so.*</code><tr><td>æ”¯æŒè„šæœ¬ç­‰<td><code class="language-plaintext highlighter-rouge">/usr/share/postgresql/</code></table></div><p>è¿™äº›æ–‡ä»¶ä¹Ÿéƒ½åœ¨å®‰è£…è¿‡ç¨‹ä¸­ç”Ÿæˆï¼Œç”¨äºæ”¯æŒ PostgreSQL çš„è¿è¡Œç¯å¢ƒã€‚</p><h3 id="23-ï¸-é…ç½®æ–‡ä»¶"><span class="mr-2">2.3 âš™ï¸ é…ç½®æ–‡ä»¶</span><a href="#23-ï¸-é…ç½®æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é…ç½®æ–‡ä»¶ç”¨äºæ§åˆ¶æ•°æ®åº“çš„è¡Œä¸ºã€‚</p><div class="table-wrapper"><table><thead><tr><th>æ–‡ä»¶<th>è¯´æ˜<th>è·¯å¾„<tbody><tr><td><code class="language-plaintext highlighter-rouge">postgresql.conf</code><td>ä¸»é…ç½®æ–‡ä»¶<td><code class="language-plaintext highlighter-rouge">/etc/postgresql/15/main/postgresql.conf</code><tr><td><code class="language-plaintext highlighter-rouge">pg_hba.conf</code><td>è®¤è¯ä¸è®¿é—®æ§åˆ¶<td><code class="language-plaintext highlighter-rouge">/etc/postgresql/15/main/pg_hba.conf</code><tr><td><code class="language-plaintext highlighter-rouge">pg_ident.conf</code><td>èº«ä»½æ˜ å°„é…ç½®<td><code class="language-plaintext highlighter-rouge">/etc/postgresql/15/main/pg_ident.conf</code></table></div><p>è¿™äº›æ–‡ä»¶åœ¨å®‰è£…æ—¶ä¼šç”Ÿæˆåˆå§‹æ¨¡æ¿ï¼Œä½ å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æ¥è°ƒæ•´æ•°æ®åº“é…ç½®ã€‚</p><h3 id="24--æ•°æ®åº“æ•°æ®æ–‡ä»¶"><span class="mr-2">2.4 ğŸ“ æ•°æ®åº“æ•°æ®æ–‡ä»¶</span><a href="#24--æ•°æ®åº“æ•°æ®æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>è¿™æ˜¯ PostgreSQL å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼ˆå³ä½ åˆ›å»ºçš„æ•°æ®åº“ã€è¡¨ã€ç´¢å¼•ç­‰éƒ½åœ¨è¿™é‡Œï¼‰ï¼š</p><div class="table-wrapper"><table><thead><tr><th>å†…å®¹<th>è·¯å¾„<tbody><tr><td>æ•°æ®æ–‡ä»¶<td><code class="language-plaintext highlighter-rouge">/var/lib/postgresql/15/main/</code><tr><td>WAL æ—¥å¿—<td>åŒä¸Šç›®å½•å†…çš„ <code class="language-plaintext highlighter-rouge">pg_wal</code> å­ç›®å½•</table></div><p>âš ï¸ è¿™äº›æ˜¯ <strong>å®‰è£…ååˆå§‹åŒ–æ•°æ®åº“æ—¶ç”Ÿæˆçš„</strong>ï¼Œæ˜¯ <strong>è¿è¡Œæ—¶æŒç»­å†™å…¥å’Œæ›´æ–°çš„å†…å®¹</strong>ã€‚</p><h3 id="25--æ—¥å¿—æ–‡ä»¶"><span class="mr-2">2.5 ğŸªµ æ—¥å¿—æ–‡ä»¶</span><a href="#25--æ—¥å¿—æ–‡ä»¶" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é»˜è®¤ PostgreSQL çš„æ—¥å¿—å†™å…¥åˆ° systemd journalï¼Œä½†å¯ä»¥é…ç½®å•ç‹¬æ—¥å¿—æ–‡ä»¶ï¼š</p><div class="table-wrapper"><table><thead><tr><th>ç±»å‹<th>è·¯å¾„ï¼ˆé»˜è®¤ï¼‰<th>è¯´æ˜<tbody><tr><td>Systemd æ—¥å¿—<td>ä½¿ç”¨ <code class="language-plaintext highlighter-rouge">journalctl -u postgresql</code> æŸ¥çœ‹<td>é»˜è®¤æ—¥å¿—å­˜äº systemd<tr><td>æ–‡ä»¶æ—¥å¿—<td><code class="language-plaintext highlighter-rouge">/var/log/postgresql/postgresql-15-main.log</code><td>å¦‚æœé…ç½®äº† <code class="language-plaintext highlighter-rouge">logging_collector</code></table></div><p>å¦‚æœå¯ç”¨æ—¥å¿—æ–‡ä»¶åŠŸèƒ½ï¼Œæ—¥å¿—æ˜¯ <strong>è¿è¡Œæ—¶ç”Ÿæˆå’Œæ›´æ–°çš„</strong>ã€‚</p><h3 id="26--systemd-æœåŠ¡é…ç½®"><span class="mr-2">2.6 ğŸ§¾ Systemd æœåŠ¡é…ç½®</span><a href="#26--systemd-æœåŠ¡é…ç½®" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>ç”¨äºå¯åŠ¨ã€åœæ­¢ PostgreSQL çš„æœåŠ¡è„šæœ¬ï¼š</p><div class="table-wrapper"><table><thead><tr><th>å†…å®¹<th>è·¯å¾„<th>è¯´æ˜<tbody><tr><td>systemd unit<td><code class="language-plaintext highlighter-rouge">/lib/systemd/system/postgresql.service</code><td>ä¸»æœåŠ¡ç®¡ç†å•å…ƒæ–‡ä»¶<tr><td>å„å®ä¾‹é…ç½®æ–‡ä»¶<td><code class="language-plaintext highlighter-rouge">/etc/systemd/system/postgresql@.service.d/</code><td>å¯é€‰çš„ç”¨æˆ·å®šåˆ¶ service é…ç½®</table></div><p>è¿™äº› systemd é…ç½®æ–‡ä»¶æ˜¯ <strong>å®‰è£…æ—¶ç”Ÿæˆçš„</strong>ï¼Œä½ å¯ä»¥ç”¨ <code class="language-plaintext highlighter-rouge">systemctl</code> æ§åˆ¶æ•°æ®åº“ã€‚</p><h2 id="ä¸‰è´¦å·æˆæƒç¤ºä¾‹"><span class="mr-2">ä¸‰ã€è´¦å·æˆæƒç¤ºä¾‹</span><a href="#ä¸‰è´¦å·æˆæƒç¤ºä¾‹" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ä½¿ç”¨ PostgreSQL æä¾›çš„ <code class="language-plaintext highlighter-rouge">CREATE ROLE</code> å’Œæƒé™æ§åˆ¶ç³»ç»Ÿ + <code class="language-plaintext highlighter-rouge">pg_hba.conf</code> ä¸­çš„è®¿é—®æ§åˆ¶é…ç½®æ¥å®ç°è®¿é—®æƒé™çš„æ§åˆ¶ã€‚</p><h3 id="31-è¿›å…¥-postgresql-ç®¡ç†ç»ˆç«¯"><span class="mr-2">3.1 è¿›å…¥ PostgreSQL ç®¡ç†ç»ˆç«¯</span><a href="#31-è¿›å…¥-postgresql-ç®¡ç†ç»ˆç«¯" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>é¦–å…ˆä»¥è¶…çº§ç”¨æˆ·èº«ä»½è¿›å…¥ PostgreSQLï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo</span> <span class="nt">-u</span> postgres psql
</pre></table></code></div></div><hr /><h3 id="32-å¼€å‘ç¯å¢ƒ---åˆ›å»ºå¼€å‘è´¦å·å…è®¸ä»»æ„-ipæ‹¥æœ‰åˆ›å»ºæ•°æ®åº“å’Œæ‰€æœ‰æƒé™"><span class="mr-2">3.2 å¼€å‘ç¯å¢ƒ - åˆ›å»ºå¼€å‘è´¦å·ï¼ˆå…è®¸ä»»æ„ IPï¼Œæ‹¥æœ‰åˆ›å»ºæ•°æ®åº“å’Œæ‰€æœ‰æƒé™ï¼‰</span><a href="#32-å¼€å‘ç¯å¢ƒ---åˆ›å»ºå¼€å‘è´¦å·å…è®¸ä»»æ„-ipæ‹¥æœ‰åˆ›å»ºæ•°æ®åº“å’Œæ‰€æœ‰æƒé™" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="-321-ç›®æ ‡"><span class="mr-2">âœ… 3.2.1 ç›®æ ‡</span><a href="#-321-ç›®æ ‡" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ç”¨æˆ·åï¼š<code class="language-plaintext highlighter-rouge">develop</code><li>å¯†ç ï¼šå¦‚ <code class="language-plaintext highlighter-rouge">dev123</code><li>å…è®¸ä»ä»»æ„ IP ç™»å½•<li>å¯åˆ›å»ºæ•°æ®åº“ã€åˆ›å»ºè¡¨ã€è¯»å†™ä»»æ„æ•°æ®</ul><h4 id="-322-æ“ä½œ"><span class="mr-2">ğŸ”§ 3.2.2 æ“ä½œ</span><a href="#-322-æ“ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">-- åˆ›å»ºè´¦å·</span>
<span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">develop</span> <span class="k">WITH</span> <span class="n">LOGIN</span> <span class="n">PASSWORD</span> <span class="s1">'dev123'</span><span class="p">;</span>

<span class="c1">-- å…è®¸åˆ›å»ºæ•°æ®åº“ï¼ˆå¼€å‘ç”¨ï¼‰</span>
<span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">develop</span> <span class="k">CREATEDB</span><span class="p">;</span>

<span class="c1">-- ï¼ˆå¯é€‰ï¼‰ä¹Ÿå…è®¸åˆ›å»ºè§’è‰²ï¼ˆå¼€å‘æƒé™è¾ƒå¤§æ—¶ï¼‰</span>
<span class="c1">-- ALTER ROLE develop CREATEROLE;</span>

<span class="c1">-- æˆäºˆå¯¹å·²æœ‰æ•°æ®åº“çš„è¿æ¥æƒé™</span>
<span class="k">GRANT</span> <span class="k">CONNECT</span> <span class="k">ON</span> <span class="k">DATABASE</span> <span class="n">postgres</span> <span class="k">TO</span> <span class="n">develop</span><span class="p">;</span>
</pre></table></code></div></div><h4 id="-323-é…ç½®-pg_hbaconf-å…è®¸ä»»æ„-ip-ç™»å½•"><span class="mr-2">ğŸŒ 3.2.3 é…ç½® <code class="language-plaintext highlighter-rouge">pg_hba.conf</code> å…è®¸ä»»æ„ IP ç™»å½•</span><a href="#-323-é…ç½®-pg_hbaconf-å…è®¸ä»»æ„-ip-ç™»å½•" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>ç¼–è¾‘æ–‡ä»¶ï¼ˆè·¯å¾„ä¸€èˆ¬ä¸º <code class="language-plaintext highlighter-rouge">/etc/postgresql/15/main/pg_hba.conf</code>ï¼‰ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/postgresql/15/main/pg_hba.conf
</pre></table></code></div></div><p>æ·»åŠ ä¸€è¡Œï¼š</p><div class="language-conf highlighter-rouge"><div class="code-header"> <span data-label-text="Conf"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">host</span>    <span class="n">all</span>             <span class="n">develop</span>         <span class="m">0</span>.<span class="m">0</span>.<span class="m">0</span>.<span class="m">0</span>/<span class="m">0</span>               <span class="n">md5</span>
</pre></table></code></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">0.0.0.0/0</code> è¡¨ç¤ºä»»æ„ IPï¼Œè¿™åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥æ¥å—ï¼Œä½†ç”Ÿäº§ä¸­åº”é¿å…ã€‚</p></blockquote><h4 id="-324-é…ç½®-postgresql-ç›‘å¬åœ°å€"><span class="mr-2">ğŸŒ 3.2.4 é…ç½® PostgreSQL ç›‘å¬åœ°å€</span><a href="#-324-é…ç½®-postgresql-ç›‘å¬åœ°å€" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><p>PostgreSQL é»˜è®¤åªç›‘å¬ localhostï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å…è®¸å¤–éƒ¨è¿æ¥ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>vim /etc/postgresql/15/main/postgresql.conf
</pre></table></code></div></div><p>æ‰¾åˆ° listen_addresses è¡Œï¼Œä¿®æ”¹ä¸ºï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># åŸæ¥å¯èƒ½æ˜¯ï¼š</span>
<span class="c"># listen_addresses = 'localhost'</span>

<span class="c"># ä¿®æ”¹ä¸ºï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼š</span>
listen_addresses <span class="o">=</span> <span class="s1">'*'</span>
</pre></table></code></div></div><blockquote><p>âš ï¸ å®‰å…¨æé†’ï¼šlisten_addresses = â€˜*â€™ è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œè¿™åœ¨å¼€å‘ç¯å¢ƒå¯ä»¥æ¥å—ï¼Œä½†ç”Ÿäº§ç¯å¢ƒåº”è¯¥æŒ‡å®šå…·ä½“çš„ IP åœ°å€ã€‚</p></blockquote><p>å¦‚æœç³»ç»Ÿå¯ç”¨äº†é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾ PostgreSQL ç«¯å£ï¼ˆé»˜è®¤ 5432ï¼‰ã€‚</p><h3 id="33-å¼€å‘ç¯å¢ƒ---æ›´å®‰å…¨çš„è´¦å·é™åˆ¶ç‰¹å®šç½‘æ®µ"><span class="mr-2">3.3 <strong>å¼€å‘ç¯å¢ƒ - æ›´å®‰å…¨çš„è´¦å·ï¼ˆé™åˆ¶ç‰¹å®šç½‘æ®µï¼‰</strong></span><a href="#33-å¼€å‘ç¯å¢ƒ---æ›´å®‰å…¨çš„è´¦å·é™åˆ¶ç‰¹å®šç½‘æ®µ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="-331-ç›®æ ‡"><span class="mr-2">âœ… 3.3.1 ç›®æ ‡</span><a href="#-331-ç›®æ ‡" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ç”¨æˆ·åï¼š<code class="language-plaintext highlighter-rouge">devnet</code><li>é™åˆ¶åªèƒ½ä» <code class="language-plaintext highlighter-rouge">192.168.0.0/16</code> ç½‘æ®µè®¿é—®<li>å…¶ä»–æƒé™ä¸ä¸Šé¢ç±»ä¼¼</ul><h4 id="-332-æ“ä½œ"><span class="mr-2">ğŸ”§ 3.3.2 æ“ä½œ</span><a href="#-332-æ“ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">devnet</span> <span class="k">WITH</span> <span class="n">LOGIN</span> <span class="n">PASSWORD</span> <span class="s1">'devnet123'</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">ROLE</span> <span class="n">devnet</span> <span class="k">CREATEDB</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">CONNECT</span> <span class="k">ON</span> <span class="k">DATABASE</span> <span class="n">postgres</span> <span class="k">TO</span> <span class="n">devnet</span><span class="p">;</span>
</pre></table></code></div></div><p>ç¼–è¾‘ <code class="language-plaintext highlighter-rouge">pg_hba.conf</code>ï¼š</p><div class="language-conf highlighter-rouge"><div class="code-header"> <span data-label-text="Conf"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">host</span>    <span class="n">all</span>             <span class="n">devnet</span>         <span class="m">192</span>.<span class="m">168</span>.<span class="m">0</span>.<span class="m">0</span>/<span class="m">16</span>          <span class="n">md5</span>
</pre></table></code></div></div><p>è¿™ä¹ˆé…ç½®å¯å®ç°åªå…è®¸ <code class="language-plaintext highlighter-rouge">192.168.x.x</code> çš„æœºå™¨è®¿é—®ã€‚</p><h3 id="34-ç”Ÿäº§ç¯å¢ƒ---åˆ›å»ºåº”ç”¨è´¦å·æœ€å°æƒé™åŸåˆ™"><span class="mr-2">3.4 ç”Ÿäº§ç¯å¢ƒ - åˆ›å»ºåº”ç”¨è´¦å·ï¼ˆæœ€å°æƒé™åŸåˆ™ï¼‰</span><a href="#34-ç”Ÿäº§ç¯å¢ƒ---åˆ›å»ºåº”ç”¨è´¦å·æœ€å°æƒé™åŸåˆ™" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><h4 id="-341-ç›®æ ‡"><span class="mr-2">âœ… 3.4.1 ç›®æ ‡</span><a href="#-341-ç›®æ ‡" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>ç”¨æˆ·åï¼š<code class="language-plaintext highlighter-rouge">app_user</code><li>å¯†ç ï¼š<code class="language-plaintext highlighter-rouge">prodpass</code><li>ä»…èƒ½è®¿é—®æŸä¸€ä¸ªæ•°æ®åº“ï¼ˆæ¯”å¦‚ <code class="language-plaintext highlighter-rouge">app_db</code>ï¼‰<li>åœ¨è¯¥æ•°æ®åº“ä¸­æ‹¥æœ‰æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æƒé™ï¼ˆä¸èƒ½å»ºåº“ã€åˆ åº“ç­‰ï¼‰</ul><h4 id="-342-æ“ä½œ"><span class="mr-2">ğŸ”§ 3.4.2 æ“ä½œ</span><a href="#-342-æ“ä½œ" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">-- åˆ›å»ºæ•°æ®åº“</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">app_db</span><span class="p">;</span>

<span class="c1">-- åˆ›å»ºè´¦å·</span>
<span class="k">CREATE</span> <span class="k">ROLE</span> <span class="n">app_user</span> <span class="k">WITH</span> <span class="n">LOGIN</span> <span class="n">PASSWORD</span> <span class="s1">'prodpass'</span><span class="p">;</span>

<span class="c1">-- æˆäºˆè¿æ¥æƒé™</span>
<span class="k">GRANT</span> <span class="k">CONNECT</span> <span class="k">ON</span> <span class="k">DATABASE</span> <span class="n">app_db</span> <span class="k">TO</span> <span class="n">app_user</span><span class="p">;</span>

<span class="c1">-- åˆ‡æ¢åˆ°æ•°æ®åº“</span>
<span class="err">\</span><span class="k">c</span> <span class="n">app_db</span>

<span class="c1">-- æˆæƒä½¿ç”¨ public æ¨¡å¼ä¸‹çš„è¡¨</span>
<span class="k">GRANT</span> <span class="k">USAGE</span> <span class="k">ON</span> <span class="k">SCHEMA</span> <span class="k">public</span> <span class="k">TO</span> <span class="n">app_user</span><span class="p">;</span>

<span class="c1">-- æˆæƒ DML æƒé™</span>
<span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">INSERT</span><span class="p">,</span> <span class="k">UPDATE</span><span class="p">,</span> <span class="k">DELETE</span> <span class="k">ON</span> <span class="k">ALL</span> <span class="n">TABLES</span> <span class="k">IN</span> <span class="k">SCHEMA</span> <span class="k">public</span> <span class="k">TO</span> <span class="n">app_user</span><span class="p">;</span>

<span class="c1">-- å¦‚æœæœªæ¥æœ‰æ–°è¡¨ï¼Œç¡®ä¿æƒé™è‡ªåŠ¨ç»§æ‰¿ï¼ˆéå¸¸å…³é”®ï¼‰</span>
<span class="k">ALTER</span> <span class="k">DEFAULT</span> <span class="k">PRIVILEGES</span> <span class="k">IN</span> <span class="k">SCHEMA</span> <span class="k">public</span>
<span class="k">GRANT</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">INSERT</span><span class="p">,</span> <span class="k">UPDATE</span><span class="p">,</span> <span class="k">DELETE</span> <span class="k">ON</span> <span class="n">TABLES</span> <span class="k">TO</span> <span class="n">app_user</span><span class="p">;</span>
</pre></table></code></div></div><p>ç¼–è¾‘ <code class="language-plaintext highlighter-rouge">pg_hba.conf</code> é™åˆ¶è®¿é—®æ¥æºï¼š</p><div class="language-conf highlighter-rouge"><div class="code-header"> <span data-label-text="Conf"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">host</span>    <span class="n">app_db</span>          <span class="n">app_user</span>       <span class="m">10</span>.<span class="m">0</span>.<span class="m">0</span>.<span class="m">0</span>/<span class="m">24</span>             <span class="n">md5</span>
</pre></table></code></div></div><blockquote><p><code class="language-plaintext highlighter-rouge">10.0.0.0/24</code> æ˜¯ä½ ç”Ÿäº§ç½‘ç»œæ®µçš„ IPï¼Œä»…å…è®¸è¯¥ç½‘æ®µæœºå™¨è®¿é—®ã€‚</p></blockquote><h3 id="35-é‡å¯-postgresql"><span class="mr-2">3.5 é‡å¯ PostgreSQL</span><a href="#35-é‡å¯-postgresql" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl reload postgresql
</pre></table></code></div></div><p>æˆ–è€…é‡å¯æ•´ä¸ªæœåŠ¡ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nb">sudo </span>systemctl restart postgresql
</pre></table></code></div></div><p>å°ç»“ï¼ˆå¯¹ç…§è¡¨ï¼‰</p><div class="table-wrapper"><table><thead><tr><th>ç¯å¢ƒç±»å‹<th>ç”¨æˆ·å<th>æƒé™<th>è®¿é—®é™åˆ¶<tbody><tr><td>å¼€å‘ç¯å¢ƒ<td><code class="language-plaintext highlighter-rouge">develop</code><td>ä»»æ„æ•°æ®åº“ï¼Œåˆ›å»ºæƒé™<td>ä»»æ„ IP (<code class="language-plaintext highlighter-rouge">0.0.0.0/0</code>)<tr><td>å®‰å…¨å¼€å‘<td><code class="language-plaintext highlighter-rouge">devnet</code><td>åŒä¸Š<td>å†…ç½‘ IP æ®µ<tr><td>ç”Ÿäº§ç¯å¢ƒ<td><code class="language-plaintext highlighter-rouge">app_user</code><td>ä»…è®¿é—®ç‰¹å®šåº“çš„ç‰¹å®šè¡¨æƒé™<td>ç”Ÿäº§æœåŠ¡ç½‘æ®µ</table></div><h3 id="36-è¿æ¥æµ‹è¯•"><span class="mr-2">3.6 è¿æ¥æµ‹è¯•</span><a href="#36-è¿æ¥æµ‹è¯•" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><strong>é‡å¯æœåŠ¡å</strong>ï¼Œå¯ä»¥æµ‹è¯•è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="å·²å¤åˆ¶ï¼"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c"># ä»æœ¬åœ°æµ‹è¯•</span>
psql <span class="nt">-h</span> localhost <span class="nt">-U</span> develop <span class="nt">-d</span> postgres

<span class="c"># ä»è¿œç¨‹æµ‹è¯•ï¼ˆæ›¿æ¢ä¸ºå®é™…çš„æœåŠ¡å™¨ IPï¼‰</span>
psql <span class="nt">-h</span> 192.168.0.100 <span class="nt">-U</span> develop <span class="nt">-d</span> postgres
</pre></table></code></div></div><p>å¦‚æœè¿æ¥å¤±è´¥ï¼Œæ£€æŸ¥ï¼š</p><p>-PostgreSQL æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼šsudo systemctl status postgresql -postgresql.conf ä¸­çš„ listen_addresses æ˜¯å¦æ­£ç¡®é…ç½® -pg_hba.conf ä¸­çš„è®¿é—®è§„åˆ™æ˜¯å¦æ­£ç¡® -é˜²ç«å¢™æ˜¯å¦å¼€æ”¾äº† 5432 ç«¯å£ -ç½‘ç»œè¿é€šæ€§æ˜¯å¦æ­£å¸¸</p><blockquote><p>ğŸ’¡ æç¤ºï¼šé…ç½®ä¿®æ”¹åå¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚</p></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93/'>å…³ç³»å‹æ•°æ®åº“</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/postgresql/" class="post-tag no-text-decoration" >PostgreSQL</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> æœ¬æ–‡ç”±ä½œè€…æŒ‰ç…§ <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> è¿›è¡Œæˆæƒ</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">åˆ†äº«</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%E5%9C%A8Debian%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85PostgreSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20%E6%9E%81%E5%AE%A2%E5%BC%80%E5%8F%91%E8%80%85-%E5%8D%9A%E5%AE%A2&url=https%3A%2F%2Fblog.algs.tech%2Fposts%2Fdatabase_install-postgresql-on-debian-using-apt.html" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%E5%9C%A8Debian%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85PostgreSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20%E6%9E%81%E5%AE%A2%E5%BC%80%E5%8F%91%E8%80%85-%E5%8D%9A%E5%AE%A2&u=https%3A%2F%2Fblog.algs.tech%2Fposts%2Fdatabase_install-postgresql-on-debian-using-apt.html" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.algs.tech%2Fposts%2Fdatabase_install-postgresql-on-debian-using-apt.html&text=%E5%9C%A8Debian%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85PostgreSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20%E6%9E%81%E5%AE%A2%E5%BC%80%E5%8F%91%E8%80%85-%E5%8D%9A%E5%AE%A2" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://service.weibo.com/share/share.php?title=%E5%9C%A8Debian%E4%B8%8A%E4%BD%BF%E7%94%A8%E5%AE%89%E8%A3%85PostgreSQL%E6%95%B0%E6%8D%AE%E5%BA%93%20-%20%E6%9E%81%E5%AE%A2%E5%BC%80%E5%8F%91%E8%80%85-%E5%8D%9A%E5%AE%A2&url=https%3A%2F%2Fblog.algs.tech%2Fposts%2Fdatabase_install-postgresql-on-debian-using-apt.html" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="åˆ†äº«é“¾æ¥" data-title-succeed="é“¾æ¥å·²å¤åˆ¶ï¼"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/adb/">adb</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/pingora/">Pingora</a> <a class="post-tag" href="/tags/posix/">POSIX</a> <a class="post-tag" href="/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F/">åŒç³»ç»Ÿ</a> <a class="post-tag" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/">è™šæ‹Ÿæœº</a> <a class="post-tag" href="/tags/android%E6%9D%83%E9%99%90/">androidæƒé™</a> <a class="post-tag" href="/tags/aosp/">aosp</a> <a class="post-tag" href="/tags/archlinux/">archlinux</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">æ–‡ç« å†…å®¹</div><nav id="toc"></nav></div><script src="/assets/lib/tocbot/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>ç›¸å…³æ–‡ç« </h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/database_MySQL8.4.5-Installation-and-Configuration-Guide-on-Debian.html"><div class="card-body"> <em class="small" data-ts="1750238580" data-df="YYYY/MM/DD" > 2025/06/18 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MySQL 8.4.5 åœ¨ Debian ä¸Šçš„å®‰è£…é…ç½®æŒ‡å—</h3><div class="text-muted small"><p> 1. å‰ç½®å‡†å¤‡ å®‰è£…å¿…è¦çš„ä¾èµ–åŒ… sudo apt update # mysql æœåŠ¡è¿è¡Œä»¥åŠä¸‹è½½å®‰è£…åŒ…éœ€è¦ sudo apt install -y libaio1 libnuma1 libmecab2 libssl3 wget # mysql cliå·¥å…·è¿è¡Œéœ€è¦ sudo apt install -y libncurses5 libncurses5-dev libncursesw5 ...</p></div></div></a></div><div class="card"> <a href="/posts/database_base-key.html"><div class="card-body"> <em class="small" data-ts="1674889920" data-df="YYYY/MM/DD" > 2023/01/28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>è¶…ç ã€ä¸»ç ã€å€™é€‰ç çš„æ¦‚å¿µä¸åŒºåˆ†</h3><div class="text-muted small"><p> æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28 1ã€ä»€ä¹ˆæ˜¯ç ? ç æ˜¯æ•°æ®ç³»ç»Ÿä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚æ‰€è°“ç å°±æ˜¯èƒ½å”¯ä¸€æ ‡è¯†å®ä½“ï¼ˆæ•°æ®åº“ä¸­çš„å®ä½“ï¼šå¯¹åº”ç°å®ç”Ÿæ´»ä¸­æŸæ ·äº‹ç‰©æˆ–è€…äººç‰©ï¼‰çš„å±æ€§ï¼Œä»–æ˜¯æ•´ä¸ªå®ä½“é›†çš„æ€§è´¨ï¼Œè€Œä¸æ˜¯å•ä¸ªå®ä½“çš„æ€§è´¨ã€‚å®ƒåŒ…æ‹¬è¶…ç ã€å€™é€‰ç ã€ä¸»ç ã€‚ ä¸‹é¢æˆ‘ä»¥å­¦ç”Ÿè¡¨ä¸ºä¾‹ï¼Œç»™å¤§å®¶åˆ†äº«æˆ‘å¯¹ç çš„ç†è§£ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå­¦ç”Ÿè¡¨ï¼šstudent(id,student_number,nam...</p></div></div></a></div><div class="card"> <a href="/posts/database_sql-server-constraint.html"><div class="card-body"> <em class="small" data-ts="1674889980" data-df="YYYY/MM/DD" > 2023/01/28 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>SQL Srverä¸­å¸¸ç”¨çš„çº¦æŸè¯­å¥</h3><div class="text-muted small"><p> æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28 ä¸€ã€åŸºæœ¬æ¦‚å¿µ SQLä¸­æœ‰äº”ç±»å¸¸ç”¨çš„çº¦æŸï¼Œç”¨æ¥å¯¹æŸä¸ªå­—æ®µçš„æ•°æ®è¿›è¡Œçº¦æŸï¼š not nullï¼šéç©ºçº¦æŸï¼ŒæŒ‡å®šæŸåˆ—ä¸ä¸ºç©º uniqueï¼šå”¯ä¸€çº¦æŸï¼ŒæŒ‡å®šæŸåˆ—å’Œå‡ åˆ—ç»„åˆçš„æ•°æ®ä¸èƒ½é‡å¤ primary keyï¼šä¸»é”®çº¦æŸï¼Œå³éç©ºåŠ ä¸Šå”¯ä¸€ foreign keyï¼šå¤–é”®ï¼ŒæŒ‡å®šè¯¥åˆ—è®°å½•å±äºä¸»è¡¨ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå‚ç…§å¦ä¸€æ¡åœ¨ä¸»è¡¨ä¸­çš„æ•°æ® d...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/database_MySQL8.4.5-Installation-and-Configuration-Guide-on-Debian.html" class="btn btn-outline-primary" prompt="ä¸Šä¸€ç¯‡"><p>MySQL 8.4.5 åœ¨ Debian ä¸Šçš„å®‰è£…é…ç½®æŒ‡å—</p></a> <a href="/posts/tools_Fully-Manual-Installation-of-Kubernetes-v1.32.2-on-Debian-12.md-copy.html" class="btn btn-outline-primary" prompt="ä¸‹ä¸€ç¯‡"><p>åœ¨ Debian 12 ä¸Šå®Œå…¨æ‰‹åŠ¨å®‰è£… kubernetes v1.32.2</p></a></div><script type="text/javascript"> $(function () { const origin = "https://giscus.app"; const iframe = "iframe.giscus-frame"; const lightTheme = "light"; const darkTheme = "dark_dimmed"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "geekdex/blog", "data-repo-id": "R_kgDOIyxhcQ", "data-category": "General", "data-category-id": "DIC_kwDOIyxhcc4CUhya", "data-mapping": "pathname", "data-reactions-enabled": "anonymous", "data-emit-metadata": "0", "data-theme": initTheme, "data-input-position": "0", "data-lang": "zh-CN", "crossorigin": "anonymous", "async": "" }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("tail-wrapper").appendChild(giscusScript); addEventListener("message", (event) => { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; const theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); const message = { setConfig: { theme: theme } }; const giscus = document.querySelector(iframe).contentWindow; giscus.postMessage({ giscus: message }, origin); } }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">çƒ­é—¨æ ‡ç­¾</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/k8s/">k8s</a> <a class="post-tag" href="/tags/adb/">adb</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/pingora/">Pingora</a> <a class="post-tag" href="/tags/posix/">POSIX</a> <a class="post-tag" href="/tags/%E5%8F%8C%E7%B3%BB%E7%BB%9F/">åŒç³»ç»Ÿ</a> <a class="post-tag" href="/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/">è™šæ‹Ÿæœº</a> <a class="post-tag" href="/tags/android%E6%9D%83%E9%99%90/">androidæƒé™</a> <a class="post-tag" href="/tags/aosp/">aosp</a> <a class="post-tag" href="/tags/archlinux/">archlinux</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> Â© 2026 <a href="https://blog.algs.tech">blog.algs.tech</a>. <span data-toggle="tooltip" data-placement="top" title="é™¤éå¦æœ‰è¯´æ˜ï¼Œæœ¬ç½‘ç«™ä¸Šçš„åšå®¢æ–‡ç« å‡ç”±ä½œè€…æŒ‰ç…§çŸ¥è¯†å…±äº«ç½²å 4.0 å›½é™… (CC BY 4.0) è®¸å¯åè®®è¿›è¡Œæˆæƒã€‚">ä¿ç•™éƒ¨åˆ†æƒåˆ©ã€‚</span></p></div><div class="footer-right"><p class="mb-0">æœ¬ç«™ç”± <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> ç”Ÿæˆï¼Œé‡‡ç”¨ <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> ä¸»é¢˜ã€‚</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">å‘ç°æ–°ç‰ˆæœ¬çš„å†…å®¹ã€‚</p><button type="button" class="btn btn-primary" aria-label="Update"> æ›´æ–° </button></div></div><script src="/assets/dist/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">æœç´¢ç»“æœä¸ºç©º</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="/assets/dist/jquery.magnific-popup.min.js"></script> <script src="/assets/dist/lazysizes.min.js"></script> <script src="/assets/dist/clipboard.min.js"></script> <script src="/assets/dist/dayjs.min.js"></script> <script src="/assets/dist/locale/zh.min.js"></script> <script src="/assets/dist/relativeTime.min.js"></script> <script src="/assets/dist/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="/assets/dist/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
