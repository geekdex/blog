[ { "title": "æˆ‘åœ¨è´µå·æ·±å±±æ”¾äº†å°æœåŠ¡å™¨ï¼Œåœ¨æ²¿æµ·çš„å¤§åŸå¸‚é‡Œéšæ—¶è°ƒç”¨ç®—åŠ›", "url": "/posts/tools_i-placed-a-server-in-guizhou-deep-mountains-to-access-computing-power-from-coastal-big-cities-anytime.html", "categories": "å·¥å…·", "tags": "å¼‚åœ°ç»„ç½‘, å†…ç½‘ç©¿é€", "date": "2026-01-07 16:18:00 +0800", "snippet": "1. å‰è¨€ï¼šä¸€ä¸ªæå®¢çš„å¥‡æ€å¦™æƒ³ä½ æ˜¯å¦æ›¾é‡åˆ°è¿‡è¿™äº›ç—›ç‚¹ï¼š â˜• å’–å•¡å…åŠå…¬ï¼Œè½»è–„æœ¬è·‘ä¸ªä»£ç ç¼–è¯‘è¦åŠå°æ—¶ï¼Œå¦‚æœèƒ½è°ƒç”¨å®¶é‡Œå°å¼æœºçš„ 32 æ ¸ CPU è¯¥å¤šå¥½ï¼Ÿ ğŸ“± åœ°é“é€šå‹¤ï¼Œæƒ³ç”¨æ‰‹æœºçœ‹å®¶é‡Œ NAS çš„ 4K ç”µå½±ï¼Œä½†å…¬ç½‘ IP å¤ªè´µï¼Œå†…ç½‘ç©¿é€åˆä¸ç¨³å®šï¼Ÿ ğŸŒ å¼‚åœ°å·¥ä½œï¼Œåœ¨æ·±åœ³ç§Ÿæˆ¿ï¼Œè€å®¶æœ‰å°é—²ç½®çš„é«˜é…ä¸»æœºåƒç°ï¼Œèƒ½ä¸èƒ½è¿œç¨‹ç”¨èµ·æ¥ï¼Ÿæˆ‘ä»¬è¦è®¨è®ºçš„æ˜¯ï¼šå¦‚ä½•è®©åŸå¸‚é‡Œçš„ç¬”è®°æœ¬ï¼Œç›´æ¥è°ƒç”¨è€å®¶ä¸»æœºçš„è®¡ç®—èµ„æºå¦‚ä½•è®©...", "content": "1. å‰è¨€ï¼šä¸€ä¸ªæå®¢çš„å¥‡æ€å¦™æƒ³ä½ æ˜¯å¦æ›¾é‡åˆ°è¿‡è¿™äº›ç—›ç‚¹ï¼š â˜• å’–å•¡å…åŠå…¬ï¼Œè½»è–„æœ¬è·‘ä¸ªä»£ç ç¼–è¯‘è¦åŠå°æ—¶ï¼Œå¦‚æœèƒ½è°ƒç”¨å®¶é‡Œå°å¼æœºçš„ 32 æ ¸ CPU è¯¥å¤šå¥½ï¼Ÿ ğŸ“± åœ°é“é€šå‹¤ï¼Œæƒ³ç”¨æ‰‹æœºçœ‹å®¶é‡Œ NAS çš„ 4K ç”µå½±ï¼Œä½†å…¬ç½‘ IP å¤ªè´µï¼Œå†…ç½‘ç©¿é€åˆä¸ç¨³å®šï¼Ÿ ğŸŒ å¼‚åœ°å·¥ä½œï¼Œåœ¨æ·±åœ³ç§Ÿæˆ¿ï¼Œè€å®¶æœ‰å°é—²ç½®çš„é«˜é…ä¸»æœºåƒç°ï¼Œèƒ½ä¸èƒ½è¿œç¨‹ç”¨èµ·æ¥ï¼Ÿæˆ‘ä»¬è¦è®¨è®ºçš„æ˜¯ï¼šå¦‚ä½•è®©åŸå¸‚é‡Œçš„ç¬”è®°æœ¬ï¼Œç›´æ¥è°ƒç”¨è€å®¶ä¸»æœºçš„è®¡ç®—èµ„æºå¦‚ä½•è®©æ‰‹æœºï¼Œéšæ—¶è®¿é—®å®¶é‡Œçš„æ‰€æœ‰è®¾å¤‡å’Œæ–‡ä»¶å¦‚æœèƒ½è®©åŠå…¬å®¤å’Œå®¶é‡Œçš„ç”µè„‘ï¼Œåƒåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸€æ ·äº’è®¿ç­‰ç­‰ï¼Œè¿™äº›éœ€æ±‚çš„æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼šçªç ´ç‰©ç†è·ç¦»çš„é™åˆ¶ï¼Œè®©ä½ çš„è®¡ç®—èµ„æºæ— å¤„ä¸åœ¨ã€‚è€Œæˆ‘çš„æ–¹æ¡ˆæ›´åŠ æå®¢ï¼šæˆ‘åœ¨è´µå·æ·±å±±è€å®¶æ”¾äº†ä¸€å°é«˜æ€§èƒ½ä¸»æœºâ€”â€”é‚£é‡Œæµ·æ‹”é«˜ã€æ°”æ¸©ä½ï¼Œå¤å¤©ä¸ç”¨ç©ºè°ƒï¼Œç”µè´¹ä¾¿å®œã€‚çˆ¶æ¯å¸®å¿™ç…§çœ‹ï¼Œå¶å°”çœ‹çœ‹æŒ‡ç¤ºç¯å°±è¡Œã€‚è€Œæˆ‘åœ¨åŒ—ä¸Šå¹¿æ·±çš„ä»»ä½•åœ°æ–¹ï¼Œéƒ½èƒ½åƒç”¨æœ¬åœ°ç”µè„‘ä¸€æ ·ï¼Œéšæ—¶è°ƒç”¨è¿™å°ä¸»æœºçš„ç®—åŠ›ã€‚è®­ç»ƒ AI æ¨¡å‹ï¼Ÿä¸¢ç»™å®¶é‡Œçš„ GPU è·‘ã€‚æ¸²æŸ“è§†é¢‘ï¼Ÿè¿œç¨‹æäº¤ä»»åŠ¡ã€‚æ•°æ®å¤„ç†ï¼ŸSSH è¿ä¸Šå»ä¸€æ¡å‘½ä»¤æå®šã€‚è¿™ä¸æ˜¯ç§‘å¹»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å®ç°çš„â€”â€”ç”¨ ZeroTier æ‰“é€ ä¸€ä¸ªè·¨è¶Šåƒé‡Œçš„ç§æœ‰äº‘ç½‘ç»œã€‚2. ä»€ä¹ˆæ˜¯ ZeroTierï¼Ÿç®€å•æ¥è¯´ï¼ŒZeroTier æ˜¯ä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘å·¥å…·ã€‚å®ƒèƒ½è®©åˆ†æ•£åœ¨ä¸–ç•Œå„åœ°çš„è®¾å¤‡ï¼Œå°±åƒè¿æ¥åœ¨åŒä¸€ä¸ªè·¯ç”±å™¨ä¸‹ä¸€æ ·ç›¸äº’é€šä¿¡ã€‚ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹ï¼š âŒ åŠ¨æ€å…¬ç½‘IPï¼Ÿå¤ªè´µ âŒ å†…ç½‘ç©¿é€ï¼Ÿä¸ç¨³å®š âŒ VPNï¼Ÿé…ç½®å¤æ‚ZeroTier çš„ä¼˜åŠ¿ï¼š âœ… å…è´¹ï¼ˆä¸ªäººä½¿ç”¨ï¼‰ âœ… é…ç½®ç®€å•ï¼ˆ5åˆ†é’Ÿæå®šï¼‰ âœ… P2Pç›´è¿ï¼ˆä½å»¶è¿Ÿï¼‰ âœ… è·¨å¹³å°ï¼ˆWindows/Linux/macOS/Android/iOSï¼‰3. åŸºç¡€å®æˆ˜ - è¿æ¥è€å®¶å’ŒåŸå¸‚åœºæ™¯æè¿° è€å®¶ä¸»æœºï¼ˆDebianï¼‰ï¼šè´µå·æ·±å±±ï¼Œ24å°æ—¶è¿è¡Œï¼Œç”µè´¹ä¾¿å®œ è¿è¡Œäº†å¤šä¸ª KVM è™šæ‹Ÿæœºç”¨äºæµ‹è¯•å’ŒæœåŠ¡ åŸå¸‚ç¬”è®°æœ¬ï¼ˆDebianï¼‰ï¼šå·¥ä½œåœ°ï¼Œéœ€è¦è°ƒç”¨è€å®¶ä¸»æœºç®—åŠ›ç›®æ ‡è®©åŸå¸‚çš„ç¬”è®°æœ¬èƒ½å¤Ÿï¼š ç›´æ¥ SSH ç™»å½•è€å®¶ä¸»æœº è®¿é—®è€å®¶ä¸»æœºä¸Šçš„ KVM è™šæ‹Ÿæœº æŠŠå¤§å‹è®¡ç®—ä»»åŠ¡ä¸¢ç»™è€å®¶ä¸»æœºè·‘æ­¥éª¤ä¸€ï¼šæ³¨å†Œ ZeroTier è´¦å· è®¿é—® ZeroTier å®˜ç½‘ ç‚¹å‡»å³ä¸Šè§’ Sign Up æ³¨å†Œè´¦å· ç™»å½•åè¿›å…¥æ§åˆ¶å°æ­¥éª¤äºŒï¼šåˆ›å»ºç½‘ç»œ åœ¨æ§åˆ¶å°ç‚¹å‡» Create A Network ç³»ç»Ÿä¼šç”Ÿæˆä¸€ä¸ª 16 ä½çš„ Network IDï¼Œä¾‹å¦‚ï¼ša1b2c3d4e5f6g7h8 ç‚¹å‡»ç½‘ç»œ ID è¿›å…¥é…ç½®é¡µé¢ è®°å½•ä¸‹ä½ çš„ Network IDï¼ˆåé¢è¦ç”¨ï¼‰å…³é”®é…ç½®ï¼š Access Controlï¼šé€‰æ‹© Privateï¼ˆç§æœ‰ç½‘ç»œï¼Œéœ€è¦æ‰‹åŠ¨æˆæƒè®¾å¤‡ï¼‰ IPv4 Auto-Assignï¼šé€‰æ‹©ä¸€ä¸ªç½‘æ®µï¼Œæ¯”å¦‚ 10.144.0.0/16æ­¥éª¤ä¸‰ï¼šå®‰è£… ZeroTier å®¢æˆ·ç«¯è€å®¶ä¸»æœºï¼ˆDebianï¼‰# å®‰è£… ZeroTiercurl -s https://install.zerotier.com | sudo bash# åŠ å…¥ç½‘ç»œï¼ˆæ›¿æ¢ä¸ºä½ çš„ Network IDï¼‰sudo zerotier-cli join a1b2c3d4e5f6g7h8# æŸ¥çœ‹çŠ¶æ€sudo zerotier-cli listnetworksåŸå¸‚ç¬”è®°æœ¬ï¼ˆDebianï¼‰# åŒæ ·çš„å®‰è£…å‘½ä»¤curl -s https://install.zerotier.com | sudo bash# åŠ å…¥åŒä¸€ä¸ªç½‘ç»œsudo zerotier-cli join a1b2c3d4e5f6g7h8æ­¥éª¤å››ï¼šæˆæƒè®¾å¤‡å›åˆ° ZeroTier æ§åˆ¶å°ï¼š åˆ·æ–°é¡µé¢ï¼Œä½ ä¼šçœ‹åˆ°ä¸¤å°è®¾å¤‡å‡ºç°åœ¨ Members åˆ—è¡¨ å‹¾é€‰æ¯å°è®¾å¤‡å‰é¢çš„ Auth å¤é€‰æ¡†ï¼ˆæˆæƒåŠ å…¥ç½‘ç»œï¼‰ å¯ä»¥ç»™æ¯å°è®¾å¤‡åˆ†é…å›ºå®š IPï¼š è€å®¶ä¸»æœºï¼š10.144.0.100 åŸå¸‚ç¬”è®°æœ¬ï¼š10.144.1.100 æ­¥éª¤äº”ï¼šæµ‹è¯•è¿æ¥åœ¨åŸå¸‚ç¬”è®°æœ¬ä¸Šï¼š# æŸ¥çœ‹ ZeroTier ç½‘å¡ï¼ˆåå­—ç±»ä¼¼ ztxxxxxï¼‰ifconfig# Ping è€å®¶ä¸»æœºping 10.144.0.100# SSH ç™»å½•è€å®¶ä¸»æœºssh username@10.144.0.100è¿™æ—¶å€™ï¼Œå·²ç»æˆåŠŸå»ºç«‹äº†ä¸€ä¸ªè·¨è¶Šåƒé‡Œçš„ç§æœ‰ç½‘ç»œï¼4. è¿›é˜¶ç©æ³• - è®¿é—®è™šæ‹Ÿæœºåœºæ™¯å‡çº§è€å®¶ä¸»æœºä¸Šè¿è¡Œç€å¤šä¸ª KVM è™šæ‹Ÿæœºï¼š è™šæ‹Ÿæœº 1ï¼š192.168.122.10 - å¼€å‘æµ‹è¯•ç¯å¢ƒ è™šæ‹Ÿæœº 2ï¼š192.168.122.20 - æ•°æ®åº“æœåŠ¡ è™šæ‹Ÿæœº 3ï¼š192.168.122.30 - AI æ¨¡å‹è®­ç»ƒé—®é¢˜ï¼šè™šæ‹Ÿæœºçš„ IP æ˜¯å†…ç½‘åœ°å€ï¼ŒåŸå¸‚ç¬”è®°æœ¬æ— æ³•ç›´æ¥è®¿é—®ã€‚è§£å†³æ–¹æ¡ˆï¼šé…ç½®è·¯ç”±è½¬å‘ï¼Œè®©è€å®¶ä¸»æœºæˆä¸ºè™šæ‹Ÿæœºçš„â€ç½‘å…³â€ã€‚é…ç½®è€å®¶ä¸»æœºï¼ˆä½œä¸ºç½‘å…³ï¼‰(1) å¼€å¯ IP è½¬å‘# ä¸´æ—¶å¼€å¯sudo sysctl -w net.ipv4.ip_forward=1# æ°¸ä¹…å¼€å¯echo \"net.ipv4.ip_forward=1\" | sudo tee -a /etc/sysctl.confsudo sysctl -p(2) é…ç½®é˜²ç«å¢™è§„åˆ™# å…è®¸ ZeroTier å’Œè™šæ‹Ÿæœºç½‘æ¡¥ä¹‹é—´è½¬å‘sudo iptables -I FORWARD 1 -i ztxxxxxx -o virbr0 -j ACCEPTsudo iptables -I FORWARD 1 -i virbr0 -o ztxxxxxx -j ACCEPT æç¤ºï¼šztxxxxxx æ˜¯ä½ çš„ ZeroTier ç½‘å¡åï¼Œç”¨ ifconfig æŸ¥çœ‹ï¼›virbr0 æ˜¯ KVM é»˜è®¤ç½‘æ¡¥ã€‚ä¸ºäº†ä¿è¯å¼€æœºè‡ªå¯ç”Ÿæ•ˆï¼Œæˆ‘é—¨ä½¿ç”¨ systemd åˆ›å»ºæœåŠ¡ï¼šsudo vim /etc/systemd/system/zt-forward.serviceå†…å®¹ï¼š[Unit]Description=ZeroTier Forwarding RulesAfter=zerotier-one.service network-online.targetWants=network-online.targetRequires=sys-subsystem-net-devices-ztuku5clkz.device[Service]Type=oneshotRemainAfterExit=yesEnvironment=\"ZT_IFACE=ztuku5clkz\"Environment=\"BR_IFACE=virbr0\"# å¯åŠ¨æ—¶æ·»åŠ è§„åˆ™ExecStart=/usr/sbin/iptables -I FORWARD 1 -i ${ZT_IFACE} -o ${BR_IFACE} -j ACCEPTExecStart=/usr/sbin/iptables -I FORWARD 1 -i ${BR_IFACE} -o ${ZT_IFACE} -j ACCEPT# åœæ­¢æ—¶åˆ é™¤è§„åˆ™ExecStop=/bin/bash -c '/usr/sbin/iptables -D FORWARD -i ${ZT_IFACE} -o ${BR_IFACE} -j ACCEPT 2&gt;/dev/null || true'ExecStop=/bin/bash -c '/usr/sbin/iptables -D FORWARD -i ${BR_IFACE} -o ${ZT_IFACE} -j ACCEPT 2&gt;/dev/null || true'[Install]WantedBy=multi-user.targeté…ç½®åŸå¸‚ç¬”è®°æœ¬ï¼ˆæ·»åŠ è·¯ç”±ï¼‰æ–¹æ³•ä¸€ï¼šæ‰‹åŠ¨æ·»åŠ è·¯ç”±ï¼ˆä¸´æ—¶ï¼‰# æ·»åŠ åˆ°è™šæ‹Ÿæœºç½‘æ®µçš„è·¯ç”±sudo ip route add 192.168.122.0/24 via 10.144.0.100 dev ztxxxxxx# æµ‹è¯•ping 192.168.122.10ssh user@192.168.122.10æ–¹æ³•äºŒï¼šè‡ªåŠ¨æ·»åŠ è·¯ç”±ï¼ˆå¼€æœºå¯åŠ¨ï¼‰åˆ›å»º systemd æœåŠ¡ï¼šsudo nano /etc/systemd/system/zt-route.serviceç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š[Unit]Description=Add route to home VM network via ZeroTierAfter=zerotier-one.service network-online.targetWants=network-online.targetRequires=sys-subsystem-net-devices-ztuku5clkz.device[Service]Type=oneshotEnvironment=\"ZT_INTERFACE=ztuku5clkz\"ExecStart=/bin/sh -c '\\ for i in 1 2 3 4 5; do \\ ip addr show ${ZT_INTERFACE} | grep -q \"inet \" &amp;&amp; break; \\ sleep 2; \\ done; \\ ip route add 192.168.122.0/24 via 10.144.0.100 dev ${ZT_INTERFACE} 2&gt;/dev/null || true'ExecStop=/bin/sh -c '\\ ip route del 192.168.122.0/24 2&gt;/dev/null || true'RemainAfterExit=yes[Install]WantedBy=multi-user.targetå¯ç”¨æœåŠ¡ï¼šsudo systemctl daemon-reloadsudo systemctl enable zt-route.servicesudo systemctl start zt-route.serviceéªŒè¯æ•ˆæœç°åœ¨ä½ å¯ä»¥åœ¨åŸå¸‚ç¬”è®°æœ¬ä¸Šï¼š# ç›´æ¥è®¿é—®è€å®¶çš„è™šæ‹Ÿæœºssh user@192.168.122.10# è¿æ¥è™šæ‹Ÿæœºä¸Šçš„æ•°æ®åº“mysql -h 192.168.122.20 -u root -p# å‘è™šæ‹Ÿæœºæäº¤è®¡ç®—ä»»åŠ¡scp large_dataset.tar.gz user@192.168.122.30:/data/ç°åœ¨ï¼Œä½ çš„è€å®¶ä¸»æœºç°åœ¨å°±æ˜¯ä¸€å°â€é«˜æ€§èƒ½çš„ç§æœ‰äº‘æœåŠ¡å™¨â€ï¼5. æ‰©å±•åº”ç”¨ - æ— é™å¯èƒ½åœºæ™¯ 1ï¼šå¤šåœ°äº’è” - æ‰“é€ åˆ†å¸ƒå¼è®¡ç®—ç½‘ç»œå‡è®¾ä½ æœ‰ä¸‰å°ä¸»æœºï¼š è€å®¶ä¸»æœºï¼ˆè´µå·ï¼‰ï¼š10.144.1.100ï¼Œè™šæ‹Ÿæœºç½‘æ®µ 192.168.122.0/24 åŸå¸‚ä¸»æœºï¼ˆæ·±åœ³ï¼‰ï¼š10.144.2.100ï¼Œè™šæ‹Ÿæœºç½‘æ®µ 192.168.123.0/24 æœ‹å‹ä¸»æœºï¼ˆåŒ—äº¬ï¼‰ï¼š10.144.3.100ï¼Œè™šæ‹Ÿæœºç½‘æ®µ 192.168.124.0/24é…ç½®è¦ç‚¹ï¼šæ¯å°ä¸»æœºéƒ½ï¼š å¼€å¯ IP è½¬å‘ é…ç½® iptables è½¬å‘è§„åˆ™ æ·»åŠ åˆ°å…¶ä»–ä¸»æœºè™šæ‹Ÿæœºç½‘æ®µçš„è·¯ç”±ä¾‹å¦‚ï¼Œè€å®¶ä¸»æœºæ·»åŠ è·¯ç”±ï¼š# åˆ°æ·±åœ³è™šæ‹Ÿæœºçš„è·¯ç”±sudo ip route add 192.168.123.0/24 via 10.144.2.100 dev ztxxxxxx# åˆ°åŒ—äº¬è™šæ‹Ÿæœºçš„è·¯ç”±sudo ip route add 192.168.124.0/24 via 10.144.3.100 dev ztxxxxxxæœ€ç»ˆæ•ˆæœï¼šä¸‰åœ°çš„æ‰€æœ‰è™šæ‹Ÿæœºå¯ä»¥äº’ç›¸è®¿é—®ï¼Œå½¢æˆä¸€ä¸ªè·¨è¶Šåƒé‡Œçš„â€è¶…çº§å±€åŸŸç½‘â€ã€‚åœºæ™¯ 2ï¼šåŠå…¬å®¤ + å®¶åº­ç½‘ç»œ - æ— ç¼åŠå…¬ç—›ç‚¹ï¼šåŠå…¬å®¤ç”µè„‘ä¸Šçš„æ–‡ä»¶ã€å¼€å‘ç¯å¢ƒæ— æ³•åœ¨å®¶è®¿é—®ã€‚è§£å†³æ–¹æ¡ˆï¼š åŠå…¬å®¤å°å¼æœºï¼š10.144.10.100 å®¶é‡Œç¬”è®°æœ¬ï¼š10.144.11.100é€šè¿‡ ZeroTier è¿æ¥åï¼š åœ¨å®¶ SSH åˆ°åŠå…¬å®¤ç”µè„‘ç»§ç»­å†™ä»£ç  ç”¨ Samba/NFS å…±äº«åŠå…¬å®¤çš„æ–‡ä»¶ è¿œç¨‹ä½¿ç”¨åŠå…¬å®¤çš„é«˜æ€§èƒ½ GPUä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼šä½ è¦ç¡®ä¿ä½ å…¬å¸å…è®¸ä½ ä½¿ç”¨ ZeroTierã€‚åœºæ™¯ 3ï¼šäº‘æœåŠ¡å™¨ + æœ¬åœ°è®¾å¤‡ - æ··åˆäº‘æ¶æ„æ¶æ„è®¾è®¡ï¼š äº‘æœåŠ¡å™¨ï¼ˆè…¾è®¯äº‘/é˜¿é‡Œäº‘ï¼‰ï¼š10.144.20.100 å®¶é‡Œ NASï¼š10.144.21.100 ç¬”è®°æœ¬ï¼š10.144.21.101åº”ç”¨åœºæ™¯ï¼š äº‘æœåŠ¡å™¨ä½œä¸ºå…¬ç½‘å…¥å£ï¼ˆè·³æ¿æœºï¼‰ å®¶é‡Œ NAS å­˜å‚¨ç§å¯†æ•°æ®ï¼ˆä¸ä¸Šä¼ å…¬æœ‰äº‘ï¼‰ ç¬”è®°æœ¬éšæ—¶éšåœ°è®¿é—®å®¶é‡Œçš„æ–‡ä»¶å’ŒæœåŠ¡åœºæ™¯ 4ï¼šç§»åŠ¨åŠå…¬ - ç¬”è®°æœ¬æ¼«æ¸¸åœºæ™¯ï¼š å®¶é‡Œå°å¼æœºï¼š10.144.30.100ï¼ˆå›ºå®šè¿è¡Œï¼‰ ç¬”è®°æœ¬ï¼š10.144.30.101ï¼ˆéšèº«æºå¸¦ï¼‰æ— è®ºç¬”è®°æœ¬åœ¨å“ªé‡Œï¼ˆå’–å•¡å…ã€é«˜é“ã€é…’åº—ï¼‰ï¼Œéƒ½èƒ½é€šè¿‡ ZeroTier è®¿é—®å®¶é‡Œçš„å°å¼æœºï¼š è¿œç¨‹æ¡Œé¢ åŒæ­¥æ–‡ä»¶ è°ƒç”¨å®¶é‡Œçš„æ‰“å°æœºã€æ‰«æä»ª6. å®ç”¨æŠ€å·§ä¸ä¼˜åŒ–æŠ€å·§ 1ï¼šå›ºå®š IP åˆ†é…åœ¨ ZeroTier æ§åˆ¶å°ç»™æ¯å°è®¾å¤‡åˆ†é…å›ºå®š IPï¼Œé¿å…æ¯æ¬¡é‡å¯ IP å˜åŒ–ï¼šè€å®¶ä¸»æœºï¼š10.144.0.100åŸå¸‚ç¬”è®°æœ¬ï¼š10.144.1.100æ‰‹æœºï¼š10.144.1.101å¦å¤–ï¼Œæ¯ä¸ªå®é™…çš„ç‰©ç†å±€åŸŸç½‘ï¼Œåªéœ€è¦å°†ä¸€ä¸ªè®¾å¤‡åŠ å…¥ ZeroTierï¼Œå…¶ä»–è®¾å¤‡é€šè¿‡è¯¥è®¾å¤‡è®¿é—®å³å¯ï¼Œå‡å°‘ç®¡ç†å¤æ‚åº¦ã€‚æŠ€å·§ 2ï¼šç›‘æ§ç½‘ç»œçŠ¶æ€# æŸ¥çœ‹ ZeroTier çŠ¶æ€sudo zerotier-cli status# æŸ¥çœ‹è¿æ¥çš„å¯¹ç­‰èŠ‚ç‚¹sudo zerotier-cli listpeers# æŸ¥çœ‹ç½‘ç»œä¿¡æ¯sudo zerotier-cli listnetworks7. æ€»ç»“è§£å†³æ–¹æ¡ˆå›é¡¾é€šè¿‡ ZeroTierï¼Œæˆ‘ä»¬å®ç°äº†ï¼š ğŸ  è€å®¶çš„ä¸»æœºæˆä¸ºä½ çš„ç§æœ‰äº‘ ğŸ’» åŸå¸‚çš„ç¬”è®°æœ¬éšæ—¶è°ƒç”¨è¿œç«¯ç®—åŠ› ğŸŒ å¤šåœ°è®¾å¤‡ç»„æˆåˆ†å¸ƒå¼ç½‘ç»œä½ ä¸å†å—é™äºç‰©ç†ä½ç½®ï¼Œè®¡ç®—èµ„æºå¯ä»¥è·¨è¶Šå±±å·æ²³æµä¸ºä½ æœåŠ¡ã€‚è¿™ä¸€åˆ‡éƒ½æ˜¯å…è´¹çš„ï¼Œé…ç½®ç®€å•ï¼Œç»´æŠ¤æˆæœ¬å‡ ä¹ä¸ºé›¶ã€‚ZeroTier å¸¸ç”¨å‘½ä»¤# å®‰è£…curl -s https://install.zerotier.com | sudo bash# åŠ å…¥ç½‘ç»œsudo zerotier-cli join &lt;NETWORK_ID&gt;# ç¦»å¼€ç½‘ç»œsudo zerotier-cli leave &lt;NETWORK_ID&gt;# æŸ¥çœ‹çŠ¶æ€sudo zerotier-cli statussudo zerotier-cli listnetworkssudo zerotier-cli listpeers# å¯åŠ¨/åœæ­¢æœåŠ¡sudo systemctl start zerotier-onesudo systemctl stop zerotier-onesudo systemctl restart zerotier-oneç»“è¯­æ³¨ï¼šæœ¬æ–‡åŸºäºä½œè€…å®é™…ä½¿ç”¨éœ€æ±‚å’Œç»éªŒç¼–å†™ï¼Œæ‰€æœ‰é…ç½®å‡å·²éªŒè¯å¯ç”¨ã€‚å¦‚æœ‰ç–‘é—®æˆ–æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿äº¤æµè®¨è®ºï¼å…³é”®è¯ï¼šZeroTierã€å¼‚åœ°ç»„ç½‘ã€è™šæ‹Ÿå±€åŸŸç½‘ã€KVMè™šæ‹Ÿæœºã€ç§æœ‰äº‘ã€è¿œç¨‹è®¿é—®ã€å†…ç½‘ç©¿é€ã€åˆ†å¸ƒå¼ç½‘ç»œ æœ¬æ–‡åŸåˆ›é¦–å‘è‡ªå…¬ä¼—å·: ã€æå®¢å¼€å‘è€…ã€‘ï¼Œç¦æ­¢è½¬è½½ã€‚" }, { "title": "å¦‚ä½•å¿«é€Ÿæ­å»ºç§æœ‰çš„ GitLab ä»£ç ç®¡ç†å¹³å°", "url": "/posts/tools_how-to-quickly-setup-private-gitlab-repository-management-platform.html", "categories": "å·¥å…·", "tags": "GitLab, git", "date": "2025-07-24 17:38:00 +0800", "snippet": "ä»‹ç»åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Docker å’Œ Docker Compose æ¥æ­å»º GitLab ä»£ç ä»“åº“ç®¡ç†å¹³å°ï¼Œå¹¶é…ç½® SSL åŠ å¯†ä¸ LDAP è®¤è¯ã€‚GitLab æ˜¯ä¸€ä¸ªæµè¡Œçš„ Git ä»“åº“ç®¡ç†å·¥å…·ï¼Œå¹¿æ³›ç”¨äºæºä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©æ‚¨åœ¨Linuxç¯å¢ƒä¸­è½»æ¾æ­å»ºä¸€ä¸ªç§æœ‰ GitLab æœåŠ¡ï¼Œå¹¶é€šè¿‡ LDAP å®ç°é›†ä¸­çš„ç”¨æˆ·è®¤è¯ã€‚æœ¬æ•™ç¨‹çš„å†…å®¹ ç¯å¢ƒå‡†å¤‡ ...", "content": "ä»‹ç»åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ‚¨å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Docker å’Œ Docker Compose æ¥æ­å»º GitLab ä»£ç ä»“åº“ç®¡ç†å¹³å°ï¼Œå¹¶é…ç½® SSL åŠ å¯†ä¸ LDAP è®¤è¯ã€‚GitLab æ˜¯ä¸€ä¸ªæµè¡Œçš„ Git ä»“åº“ç®¡ç†å·¥å…·ï¼Œå¹¿æ³›ç”¨äºæºä»£ç ç®¡ç†ä¸å›¢é˜Ÿåä½œã€‚æœ¬æ•™ç¨‹å°†å¸®åŠ©æ‚¨åœ¨Linuxç¯å¢ƒä¸­è½»æ¾æ­å»ºä¸€ä¸ªç§æœ‰ GitLab æœåŠ¡ï¼Œå¹¶é€šè¿‡ LDAP å®ç°é›†ä¸­çš„ç”¨æˆ·è®¤è¯ã€‚æœ¬æ•™ç¨‹çš„å†…å®¹ ç¯å¢ƒå‡†å¤‡ å®‰è£… Docker å’Œ Docker Compose è®¾ç½® GitLab æ‰€éœ€çš„ç«¯å£ä¸æ–‡ä»¶è·¯å¾„ é…ç½® GitLab æœåŠ¡ ä½¿ç”¨ Docker Compose å®‰è£… GitLab é…ç½® SSL åŠ å¯† é…ç½® LDAP è®¤è¯ é…ç½® SMTP é‚®ä»¶å‘é€ å¯åŠ¨ GitLab æœåŠ¡å¹¶è®¿é—® å¯åŠ¨ GitLab å®¹å™¨ ç™»å½• GitLab å¹¶éªŒè¯é…ç½® ï¼ˆå¯é€‰ï¼‰é…ç½® GitLab çš„ Git SSH åŠŸèƒ½é¢„å¤‡çŸ¥è¯† åŸºç¡€çš„ Linux ç³»ç»Ÿæ“ä½œ Docker ä¸ Docker Compose çš„åŸºç¡€çŸ¥è¯† å¯¹ GitLabã€LDAP å’Œ SMTP æœ‰åŸºæœ¬äº†è§£ç¯å¢ƒå‡†å¤‡åœ¨å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦å‡†å¤‡ä¸€ä¸ª Linux æœåŠ¡å™¨å¹¶å®‰è£… Docker å’Œ Docker Composeã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š# å®‰è£… Dockercurl -fsSL https://get.docker.com -o get-docker.shsudo DOWNLOAD_URL=https://mirrors.ustc.edu.cn/docker-ce sh get-docker.sh# å®‰è£… Docker Composesudo curl -L \"https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composeé…ç½® GitLab æœåŠ¡æˆ‘ä»¬å°†ä½¿ç”¨ Docker Compose æ¥å¯åŠ¨ GitLab æœåŠ¡ï¼Œç¡®ä¿ Docker å®¹å™¨èƒ½å¤ŸæŒä¹…å­˜å‚¨æ•°æ®å’Œé…ç½®ã€‚1. åˆ›å»º docker-compose.yml é…ç½®æ–‡ä»¶åœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•ç”¨äºå­˜æ”¾ GitLab çš„é…ç½®å’Œæ•°æ®ã€‚è¿›å…¥è¯¥ç›®å½•å¹¶åˆ›å»º docker-compose.yml æ–‡ä»¶ã€‚mkdir ~/gitlabcd ~/gitlabnano docker-compose.ymlå°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ° docker-compose.yml æ–‡ä»¶ä¸­ï¼šversion: '3'services: gitlab: image: 'gitlab/gitlab-ce:latest' # æˆ–è€…æ˜¯ gitlab-ce ç‰ˆæœ¬ container_name: 'gitlab' restart: always hostname: 'gitlab.algs.tech' ports: - '80:80' - '443:443' - '22:22' environment: GITLAB_OMNIBUS_CONFIG: | external_url 'https://gitlab.algs.tech' nginx['ssl_certificate'] = \"/etc/gitlab/ssl/cert.pem\" nginx['ssl_certificate_key'] = \"/etc/gitlab/ssl/key.pem\" gitlab_rails['ldap_enabled'] = true gitlab_rails['ldap_servers'] = YAML.load &lt;&lt;-EOS main: label: 'LDAP' host: 'openldap.algs.tech' # æ›¿æ¢ä¸ºæ‚¨çš„ LDAP æœåŠ¡å™¨åœ°å€ port: 389 # LDAP ç«¯å£ uid: 'uid' # LDAP ç”¨æˆ·åå±æ€§ bind_dn: 'cn=admin,dc=webcoding,dc=tech' # LDAP ç®¡ç†å‘˜ DN password: 'abc2024XYZ' # LDAP ç®¡ç†å‘˜å¯†ç  encryption: 'plain' # å¦‚æœéœ€è¦åŠ å¯†ï¼Œæ”¹ä¸º 'start_tls' æˆ– 'simple_tls' verify_certificates: true # å¦‚æœä½¿ç”¨ TLS å¹¶éœ€è¦è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œè®¾ç½®ä¸º false active_directory: true # å¦‚æœä½¿ç”¨ Active Directoryï¼Œè®¾ç½®ä¸º true allow_username_or_email_login: false # æ˜¯å¦å…è®¸ä½¿ç”¨ç”¨æˆ·åæˆ–é‚®ä»¶ç™»å½• lowercase_usernames: false block_auto_created_users: false base: 'dc=webcoding,dc=tech' # LDAP åŸºç¡€ DN user_filter: '' # é¢å¤–çš„ç”¨æˆ·è¿‡æ»¤æ¡ä»¶ group_base: '' admin_group: '' # å¯ä»¥è®¾ç½®ç®¡ç†å‘˜ç»„ sync_ssh_keys: false EOS # SMTP é…ç½® gitlab_rails['smtp_enable'] = true gitlab_rails['smtp_address'] = \"smtphz.qiye.163.com\" # SMTP æœåŠ¡å™¨åœ°å€ gitlab_rails['smtp_port'] = 465 # SMTP ç«¯å£ gitlab_rails['smtp_user_name'] = \"noreply.gitlab@aiapp.pro\" # å‘ä»¶é‚®ç®± gitlab_rails['smtp_password'] = \"password\" # å‘ä»¶é‚®ç®±å¯†ç  gitlab_rails['smtp_domain'] = \"qiye.163.com\" # åŸŸå gitlab_rails['smtp_authentication'] = \"login\" # è®¤è¯æ–¹å¼ï¼Œå¯é€‰\"plain\", \"login\", \"cram_md5\" gitlab_rails['smtp_enable_starttls_auto'] = false # å¯ç”¨ STARTTLS gitlab_rails['smtp_tls'] = true gitlab_rails['smtp_openssl_verify_mode'] = 'peer' # SSL éªŒè¯æ¨¡å¼ï¼Œå¯é€‰\"none\", \"peer\", \"client_once\", \"fail_if_no_peer_cert\" gitlab_rails['gitlab_email_from'] = 'noreply.gitlab@aiapp.pro' user['git_user_email'] = 'noreply.gitlab@aiapp.pro' volumes: - '$GITLAB_HOME/config:/etc/gitlab' - '$GITLAB_HOME/logs:/var/log/gitlab' - '$GITLAB_HOME/data:/var/opt/gitlab' - '/etc/certs/ssl/algs.tech:/etc/gitlab/ssl' shm_size: '256m'2. é…ç½® SSL è¯ä¹¦ç¡®ä¿æ‚¨å·²ç»æ‹¥æœ‰æœ‰æ•ˆçš„ SSL è¯ä¹¦å’Œå¯†é’¥ï¼Œå°†å®ƒä»¬æ”¾ç½®åœ¨ /etc/certs/ssl/algs.tech/ ç›®å½•ä¸‹ï¼Œå¹¶ä¸”å®ƒä»¬çš„æƒé™è®¾ç½®æ­£ç¡®ã€‚3. å¯åŠ¨ GitLabåœ¨é…ç½®å¥½ Docker Compose æ–‡ä»¶åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ GitLab æœåŠ¡ï¼šdocker-compose up -dæ­¤å‘½ä»¤ä¼šå¯åŠ¨ GitLab å®¹å™¨å¹¶åœ¨åå°è¿è¡Œã€‚è®¿é—® GitLab æ‰“å¼€æµè§ˆå™¨å¹¶è®¿é—® https://gitlab.algs.techã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitLab ä¼šè¦æ±‚æ‚¨è®¾ç½®ç®¡ç†å‘˜å¯†ç ã€‚ ä½¿ç”¨æ‚¨çš„ç®¡ç†å‘˜è´¦å·ç™»å½•ã€‚éªŒè¯ LDAP é›†æˆåœ¨ GitLab ç™»å½•é¡µé¢ï¼Œå°è¯•ä½¿ç”¨ LDAP ç”¨æˆ·è¿›è¡Œç™»å½•ã€‚ç¡®ä¿æ‚¨æ­£ç¡®é…ç½®äº† LDAP åœ°å€ã€ç«¯å£ã€ç®¡ç†å‘˜ DN å’Œå¯†ç ã€‚é…ç½® GitLab çš„ Git SSH åŠŸèƒ½å¦‚æœéœ€è¦å¯ç”¨ Git é€šè¿‡ SSH çš„æ–¹å¼æ¨é€å’Œæ‹‰å–ä»£ç ï¼Œå¯ä»¥é…ç½® GitLab ä½¿ç”¨ SSHã€‚æ‚¨å¯ä»¥å‚è€ƒ GitLab å®˜æ–¹æ–‡æ¡£ äº†è§£æ›´å¤šé…ç½®å†…å®¹ã€‚ç»“è¯­æ­å–œï¼æ‚¨å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªå†…ç½‘ GitLab ä»£ç ä»“åº“ç®¡ç†å¹³å°ï¼Œå¹¶å®ç°äº† SSL åŠ å¯†å’Œ LDAP é›†æˆã€‚é€šè¿‡è¿™ä¸ªå¹³å°ï¼Œæ‚¨çš„å›¢é˜Ÿå¯ä»¥æ›´åŠ å®‰å…¨ã€é«˜æ•ˆåœ°è¿›è¡Œä»£ç ç®¡ç†ã€‚ä½ å¯ä»¥å°†è¿™ä¸ªè¿‡ç¨‹å½•åˆ¶æˆæ•™ç¨‹è§†é¢‘ï¼Œå¹¶å°†å…¶å‘å¸ƒåˆ° YouTube æˆ–æ¯”ä¾‹æ¯”ä¾‹å¹³å°ï¼Œå¸®åŠ©æ›´å¤šçš„å¼€å‘è€…å’Œ IT ç®¡ç†å‘˜æ­å»ºç±»ä¼¼çš„ç¯å¢ƒã€‚" }, { "title": "ä½¿ç”¨ Google Codelab æ ¼å¼ç¼–å†™æŠ€æœ¯æ•™ç¨‹", "url": "/posts/tools_publish-technical-tutorials-in-google-godelab-format.html", "categories": "å·¥å…·", "tags": "codelabs", "date": "2025-07-24 17:28:00 +0800", "snippet": "æ¦‚è¿°Duration: 1Google Developers Codelab æä¾›äº†ä¸€ç§å¼•å¯¼å¼ç¼–ç å®è·µæ•™ç¨‹ä½“éªŒã€‚å¤§éƒ¨åˆ† Codelab ä¼šé€æ­¥ä»‹ç»å¼€å‘å°åº”ç”¨æˆ–åœ¨ç°æœ‰åº”ç”¨ä¸­æ–°å¢åŠŸèƒ½çš„è¿‡ç¨‹ã€‚å…¶å‹å¥½çš„äº¤äº’ä½“éªŒï¼Œä»¥åŠä¸°å¯Œçš„èµ„æºï¼Œä½¿å¾— Codelab æˆä¸ºå­¦ä¹ æ–°æŠ€èƒ½çš„å¥½æ–¹æ³•ã€‚Google Codelabs ç½‘ç«™å¯ä»¥é€šè¿‡ https://codelabs.developers.google.cn/?hl...", "content": "æ¦‚è¿°Duration: 1Google Developers Codelab æä¾›äº†ä¸€ç§å¼•å¯¼å¼ç¼–ç å®è·µæ•™ç¨‹ä½“éªŒã€‚å¤§éƒ¨åˆ† Codelab ä¼šé€æ­¥ä»‹ç»å¼€å‘å°åº”ç”¨æˆ–åœ¨ç°æœ‰åº”ç”¨ä¸­æ–°å¢åŠŸèƒ½çš„è¿‡ç¨‹ã€‚å…¶å‹å¥½çš„äº¤äº’ä½“éªŒï¼Œä»¥åŠä¸°å¯Œçš„èµ„æºï¼Œä½¿å¾— Codelab æˆä¸ºå­¦ä¹ æ–°æŠ€èƒ½çš„å¥½æ–¹æ³•ã€‚Google Codelabs ç½‘ç«™å¯ä»¥é€šè¿‡ https://codelabs.developers.google.cn/?hl=zh-cn ç½‘å€è®¿é—®ã€‚å½“ç„¶ï¼Œå› ä¸º Google å¼€æºäº†è¿™ä¸ªç½‘ç«™æ„å»ºå·¥å…·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åŸºäºè¯¥å·¥å…·æ­å»ºæˆ‘ä»¬è‡ªå·±çš„ Codelabsã€‚æˆ‘ä»¬è¦æ­å»ºçš„ç½‘ç«™æ•ˆæœå¦‚ä¸‹æˆªå›¾ æœ¬æ–‡å‚è€ƒè‡ª: https://medium.com/@zarinlo/publish-technical-tutorials-in-google-codelab-format-b07ef76972cdï¼Œå¹¶ä½¿ç”¨è¯¥ä½œè€…çš„ç´ æï¼ŒåŠ ä»¥ä¼˜åŒ–ã€‚å®‰è£…åŸºç¡€ç¯å¢ƒDuration: 2éœ€è¦çš„ç¯å¢ƒå¦‚ä¸‹ Golang: https://golang.google.cn/ï¼Œéœ€è¦ä½¿ç”¨åˆ° Golang è¯­è¨€æ’ä»¶ï¼Œå› æ­¤éœ€è¦å®‰è£… Golang è¯­è¨€ç¯å¢ƒï¼› claat: https://github.com/googlecodelabs/tools/tree/main/claat#installï¼Œè¿™æ˜¯ç”± Google ç»´æŠ¤çš„å¼€æº Golang å‘½ä»¤è¡Œå·¥å…·ï¼› Nodejs: https://nodejs.orgï¼Œåœ¨ç¼–å†™æ–‡ç« çš„è¿™ä¸ªæ—¶é—´èŠ‚ç‚¹ï¼Œè™½ç„¶ nodejs æ›´æ–°åˆ°äº†20ï¼Œä½†æ¨èä½¿ç”¨12ï¼Œå¯ä»¥ä½¿ç”¨ nvm æˆ–è€… fnm æ¥ç®¡ç†ä½ çš„æœ¬åœ° nodejs ç‰ˆæœ¬ï¼› gulp-cli: ç”¨äºè¿è¡Œ codelabs é¡¹ç›®çš„ cli å·¥å…·ã€‚å°† Golang è¯­è¨€äºŒè¿›åˆ¶å®‰è£…åŒ…è§£å‹åˆ° /usr/local/go ç›®å½•ï¼Œå¹¶ä¸”åœ¨ç”¨æˆ·ç›®å½•ä¸‹çš„ .bash_profieï¼ˆæˆ–è€… .zsh_profileï¼‰ æ·»åŠ ä»¥ä¸‹å†…å®¹## æŒ‡å®šgoè¯­è¨€çš„å®‰è£…è·¯å¾„å’Œgoè¯­è¨€çš„é¡¹ç›®è·¯å¾„export GOROOT=/usr/local/goexport GOPATH=$HOME/go## å°†goè¯­è¨€äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶è®¾ç½®åˆ°PATHç¯å¢ƒå˜é‡export PATH=$PATH:$HOME/go/bin:$GOROOT/binå®‰è£…å¥½ Golang ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… Claatgo install github.com/googlecodelabs/tools/claat@latestå®‰è£…å®Œæˆ Nodejs ä¹‹åï¼Œç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…¨å±€å®‰è£… gulp-cli# è®¾ç½®é˜¿é‡Œäº‘é•œåƒnpm config set registry https://registry.npmmirror.com# å®‰è£…gulp-clinpm install -g gulp-cliè¿è¡ŒCodelabsç½‘ç«™Duration: 2Codelabs æ„å»ºå·¥å…·å·²ç»å¼€æºï¼Œæˆ‘ä»¬å¯ä»¥ä» Github ä¸‹è½½æºä»£ç ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ‹‰å–æœ€æƒ³é¡¹ç›®git clone https://github.com/googlecodelabs/toolsæ‹‰ä¸‹æ¥çš„æ˜¯æ•´ä¸ªé¡¹ç›®çš„æºä»£ç ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åˆ°ç½‘ç«™åŸºç¡€æ¡†æ¶ä»£ç å³å¯ï¼Œç½‘ç«™åŸºç¡€æ¡†æ¶åœ¨ site ç›®å½•ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è¿è¡Œç½‘ç«™# è¿›å…¥ç½‘ç«™ç›®å½•cd site# å®‰è£…ä¾èµ–npm install# è¿è¡Œç½‘ç«™gulp serveçœ‹åˆ°å¦‚ä¸‹ç»“æœè¡¨ç¤ºè¿è¡ŒæˆåŠŸç°åœ¨ç½‘ç«™å·²ç»è¿è¡Œèµ·æ¥äº†ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ http://127.0.0.1:8000ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢ç°åœ¨ç½‘ç«™è¿˜æ²¡æœ‰å†…å®¹ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­æ·»åŠ å†…å®¹ã€‚æ–°å¢Codelabå’Œåˆ†ç±»Duration: 3å…ˆåˆ›å»ºä¸€ä¸ª codelabs æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºèµ„æºç›®å½•# åˆ›å»ºcodelabsæ–‡ä»¶å¤¹mkdir codelabs# è¿›å…¥æ–‡ä»¶å¤¹cd codelabs/# åˆ›å»ºèµ„æºç›®å½•mkdir assetsæ­¤æ—¶ï¼Œæ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹tools|-- site|--|-- codelabs|--|--|-- assetsæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€å¼ å›¾ç‰‡å« puppy.jpg æ”¾åˆ° assets ç›®å½•ä¸­ã€‚ç„¶ååœ¨ codelabs ç›®å½•ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ª markdown æ–‡ä»¶ï¼Œå‘½åä¸º how-to-write-a-codelab.mdï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹summary: å¦‚ä½•ç¼–å†™ Codelabid: how-to-write-a-codelabcategories: codelabtags: codelabstatus: Publishedauthors: panhyFeedback Link: https://github.com/webtechwiki/codelabs/issues# å¦‚ä½•ç¼–å†™ Codelab## æ¦‚è¿° Duration: 1### ä½ å°†å­¦åˆ°ä»€ä¹ˆ - å¦‚ä½•è®¾ç½®æ¯ä¸ªå¹»ç¯ç‰‡æ‰€éœ€çš„æ—¶é—´ - å¦‚ä½•åŒ…å«ä»£ç ç‰‡æ®µ - å¦‚ä½•è¶…é“¾æ¥é¡¹ç›® - å¦‚ä½•æ’å…¥å›¾ç‰‡ - å…¶ä»–æŠ€å·§ ---## è®¾ç½®æ—¶é•¿ Duration: 2è¦æŒ‡ç¤ºæµè§ˆæ¯å¼ å¹»ç¯ç‰‡æ‰€éœ€çš„æ—¶é—´ï¼Œè¯·åœ¨æ¯ä¸ªäºŒçº§æ ‡é¢˜ï¼ˆå³ `##`ï¼‰ä¸‹è®¾ç½® `Duration` ä¸ºä¸€ä¸ªæ•´æ•°ã€‚ è¿™ä¸ªæ•´æ•°ä»£è¡¨åˆ†é’Ÿæ•°ã€‚ä¾‹å¦‚ï¼Œè®¾ç½® `Duration: 4` è¡¨ç¤ºå®Œæˆè¿™ä¸€å¼ å¹»ç¯ç‰‡éœ€è¦ 4 åˆ†é’Ÿã€‚ æ€»æ—¶é—´å°†ä¼šè‡ªåŠ¨è®¡ç®—ï¼Œå¹¶åœ¨ä½ åˆ›å»º Codelab åæ˜¾ç¤ºå‡ºæ¥ã€‚ ---## ä»£ç ç‰‡æ®µ Duration: 3è¦åŒ…å«ä»£ç ç‰‡æ®µï¼Œä½ å¯ä»¥é‡‡ç”¨ä»¥ä¸‹æ–¹æ³•ï¼š - **å†…è”é«˜äº®**ï¼šä½¿ç”¨é”®ç›˜ä¸Šçš„åå¼•å·ï¼ˆ`` ` ``ï¼‰æ¥å®ç°ã€‚ - **åµŒå…¥ä»£ç **ï¼šä½¿ç”¨ä»£ç å—æ˜¾ç¤ºå®Œæ•´ä»£ç ã€‚ ### JavaScript ç¤ºä¾‹ ```javascript{ key1: \"string\", key2: integer, key3: \"string\"}```### Java ç¤ºä¾‹ ```javafor (statement 1; statement 2; statement 3) { // è¦æ‰§è¡Œçš„ä»£ç å—}```---## è¶…é“¾æ¥å’ŒåµŒå…¥å›¾ç‰‡ Duration: 1### è¶…é“¾æ¥ [YouTube - Halsey æ’­æ”¾åˆ—è¡¨](https://www.youtube.com/user/iamhalsey/playlists) ### å›¾ç‰‡ ![å›¾ç‰‡æ›¿ä»£æ–‡æœ¬](assets/puppy.jpg) ---## å…¶ä»–æŠ€å·§ Duration: 1æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š[Codelab æ ¼å¼æŒ‡å—](https://github.com/googlecodelabs/tools/blob/master/FORMAT-GUIDE.md) å› ä¸ºæˆ‘ä»¬åœ¨åˆ›å»ºæ–‡ç« çš„æ—¶å€™ï¼ŒæŒ‡å®šäº†å…ƒä¿¡æ¯ä¸­çš„åˆ†ç±»ä¸º codelab ï¼Œå¹¶ä¸”æŒ‡å®šçš„ tag ä¸º codelabï¼Œæˆ‘ä»¬å¿…é¡»æ–°å»º codelabs åˆ†ç±»ã€‚åœ¨ site/app/views ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª codelabï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»º view.json æ–‡ä»¶ï¼Œç”¨äºå†™å…¥åˆ†ç±»çš„åŸºæœ¬ä¿¡æ¯{ \"title\": \"Codelab\", \"description\": \"ä¸Codelabç›¸å…³çš„ä»‹ç»ä¸å¸®åŠ©\", \"logoUrl\": \"/codelab/codelab-logo.png\", \"tags\": [\"codelab\"], \"exclude\": [ \".*-about$\", \"^lang-.*\" ]}å¦å¤–ï¼Œå¯ä»¥æˆ‘ä»¬æ–°è¿›åˆ†ç±»çš„ css æ ·å¼ï¼Œåœ¨ /site/app/styles ç›®å½•ä¸‹æœ‰ä¸€ä¸ªåä¸º _categories.scss çš„æ–‡ä»¶ã€‚æ‰“å¼€è¯¥æ–‡ä»¶å¹¶åœ¨åº•éƒ¨æ·»åŠ è‡ªå·±çš„æ¡ç›®ï¼Œå› ä¸ºæˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªç±»åˆ«å«codelabï¼Œæ‰€ä»¥æ·»åŠ äº†ä»¥ä¸‹å†…å®¹ï¼š@include codelab-card(['codelab'], #FC0023, 'codelab.svg');æœ€åå‡†å¤‡å¥½ä¸€ä¸ª codelab.svg å›¾æ ‡ï¼Œå¹¶æ”¾åœ¨ /site/app/images/icons ç›®å½•ä¸‹ï¼Œå®Œæˆè¿™äº›æ“ä½œåï¼Œè¯¥åˆ†ç±»ç³»çš„ codelab æ¡ç›®å°†æ˜¾ç¤º css ä¸­é…ç½®çš„å›¾æ ‡ï¼Œå¹¶ä¸”æŒ‰é’®ä¼šæŒ‰ç…§æˆ‘ä»¬é…ç½®çš„é¢œè‰²æ˜¾ç¤ºã€‚åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±æ–°å»ºå¥½äº†ä¸€ä¸ª codelab æ–‡ç« ä»¥åŠä¸€ä¸ªåˆ†ç±»ã€‚è¿è¡ŒCodelabsDuration: 1ä½¿ç”¨ claat å·¥å…·æ¥å°†æˆ‘ä»¬ç¼–å†™çš„ markdown å¯¼å‡º html ç½‘é¡µï¼Œå¦‚ä¸‹å‘½ä»¤## go into codelabs foldercd codelabs## export md to htmlclaat export how-to-write-a-codelab.mdç°åœ¨æˆ‘ä»¬å·²ç»ç¼–å†™äº†ç¬¬ä¸€ä¸ª codelab å¹¶æˆåŠŸå¯¼å‡ºäº† html æ–‡ä»¶ã€‚åœ¨ site ç›®å½•ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿è¡Œç½‘ç«™# æŒ‡å®šcodelabsç›®å½•ä¸ºcodelabsç½‘ç«™å†…å®¹ç›®å½•å¹¶è¿è¡Œç½‘ç«™gulp serve --codelabs-dir=codelabsæˆåŠŸæ‰§è¡Œä¹‹åï¼Œå†æ¬¡æ‰“å¼€æµè§ˆå™¨ï¼Œæˆ‘ä»¬æ–°å»ºçš„æ–‡ç« å°±æ˜¾ç¤ºåœ¨ Codelabs ä¸»é¡µé‡Œäº†ï¼Œå¹¶ä¸”ä¹Ÿåœ¨å¯¹åº”çš„ codelab åˆ†ç±»ä¸­ã€‚æ•ˆæœå¦‚ä¸‹å›¾ï¼šå‘å¸ƒåˆ°GithubPagesDuration: 3å®Œæˆå·²ç»æ­¥éª¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°† site ç›®å½•æ·»åŠ åˆ° github ä»“åº“ä¸­ï¼Œå¹¶è®¾ç½® GithubAction æ¥æ‰§è¡Œè‡ªåŠ¨éƒ¨ç½²ï¼Œæˆ‘é…ç½®å¥½çš„ Action å¦‚ä¸‹name: Deploy Websiteon: push: branches: - main # ç›‘å¬ main åˆ†æ”¯çš„ push äº‹ä»¶# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pagespermissions: contents: read pages: write id-token: write# Allow one concurrent deploymentconcurrency: group: \"pages\" cancel-in-progress: truejobs: # Build job build: runs-on: ubuntu-latest steps: # Step 1: Checkout the repository - name: Checkout repository uses: actions/checkout@v2 # Step 2: Set up Node.js 12 environment - name: Set up Node.js uses: actions/setup-node@v2 with: node-version: '12' # è®¾ç½® Node.js ç‰ˆæœ¬ä¸º 12 # Step 3: Install dependencies - name: Install dependencies run: | npm install &amp;&amp; npm install -g gulp-cli # Step 4: Build the project - name: Build project run: | gulp dist --codelabs-dir=codelabs # Step 5: Upload dist folder - name: Upload dist directory as artifact uses: actions/upload-pages-artifact@v3 with: path: ./dist # Deployment job deploy: environment: name: github-pages url: $ runs-on: ubuntu-latest needs: build steps: - name: Deploy to GitHub Pages id: deployment uses: actions/deploy-pages@v4" }, { "title": "Docker-Compose éƒ¨ç½² OpenLDAP ä¸å¯†ç è‡ªåŠ©æ‰¾å›æœåŠ¡æ•™ç¨‹", "url": "/posts/tools_docker-compose-deploy-openldap-and-password-self-service-guide.md.html", "categories": "å·¥å…·", "tags": "OpenLDAP, ldap", "date": "2025-07-24 17:25:00 +0800", "snippet": "æ¦‚è¿°æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä½¿ç”¨ Docker-Compose éƒ¨ç½² OpenLDAP å’Œ LTB Self-Service Password (SSP)ï¼Œä»¥å®ç° LDAP å¯†ç çš„è‡ªåŠ©æ‰¾å›åŠŸèƒ½ã€‚æˆ‘ä»¬è¿˜å°†æ·»åŠ è¯¦ç»†æ³¨é‡Šï¼Œå¸®åŠ©æ‚¨ç†è§£é…ç½®æ–‡ä»¶ä¸­çš„æ¯ä¸€é¡¹è®¾ç½®ã€‚å‰ææ¡ä»¶ å·²å®‰è£… Docker å’Œ Docker-Composeã€‚ åŸºç¡€çš„ Linux æ“ä½œç³»ç»Ÿä½¿ç”¨ç»éªŒã€‚æ­¥éª¤ 1ï¼šåˆ›å»º docker-compose...", "content": "æ¦‚è¿°æœ¬æ•™ç¨‹å°†æŒ‡å¯¼æ‚¨ä½¿ç”¨ Docker-Compose éƒ¨ç½² OpenLDAP å’Œ LTB Self-Service Password (SSP)ï¼Œä»¥å®ç° LDAP å¯†ç çš„è‡ªåŠ©æ‰¾å›åŠŸèƒ½ã€‚æˆ‘ä»¬è¿˜å°†æ·»åŠ è¯¦ç»†æ³¨é‡Šï¼Œå¸®åŠ©æ‚¨ç†è§£é…ç½®æ–‡ä»¶ä¸­çš„æ¯ä¸€é¡¹è®¾ç½®ã€‚å‰ææ¡ä»¶ å·²å®‰è£… Docker å’Œ Docker-Composeã€‚ åŸºç¡€çš„ Linux æ“ä½œç³»ç»Ÿä½¿ç”¨ç»éªŒã€‚æ­¥éª¤ 1ï¼šåˆ›å»º docker-compose.yml æ–‡ä»¶åœ¨ç›®æ ‡ç›®å½•ä¸‹åˆ›å»º docker-compose.yml æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹ï¼šdocker-compose.ymlservices: openldap: container_name: openldap hostname: openldap.algs.tech restart: always image: osixia/openldap:latest ports: - \"389:389\" # æš´éœ² LDAP æœåŠ¡çš„ 389 ç«¯å£ environment: - LDAP_ORGANISATION=\"algs.tech\" # è®¾ç½® LDAP ç»„ç»‡åç§° - LDAP_DOMAIN=algs.tech # è®¾ç½® LDAP æ ¹åŸŸå - LDAP_ADMIN_PASSWORD=abc2024XYZ # è®¾ç½® LDAP ç®¡ç†å‘˜å¯†ç  - LDAP_TLS=false # æ˜¯å¦å¯ç”¨ TLSï¼ˆfalse è¡¨ç¤ºä¸å¯ç”¨ï¼Œä¾¿äºæµ‹è¯•ï¼‰ volumes: - /opt/ldap/local:/usr/local/ldap # æœ¬åœ°æŒ‚è½½ç›®å½•ï¼Œä¾¿äºå­˜å‚¨è‡ªå®šä¹‰å†…å®¹ - /opt/ldap/data:/var/lib/ldap # å­˜å‚¨ LDAP æ•°æ®çš„ç›®å½• - /opt/ldap/slapd.d:/etc/ldap/slapd.d # å­˜å‚¨ OpenLDAP é…ç½®æ–‡ä»¶çš„ç›®å½• - /etc/certs/ssl/algs.tech:/container/service/slapd/assets/certs # SSL è¯ä¹¦æŒ‚è½½ç›®å½• command: [--copy-service, --loglevel, warning] # è®¾ç½®å¯åŠ¨å‘½ä»¤ï¼Œå‡å°‘æ—¥å¿—å†—ä½™ phpldapadmin: container_name: phpldapadmin hostname: phpldapadmin.algs.tech restart: always image: osixia/phpldapadmin:latest ports: - 8080:80 # æš´éœ² phpLDAPadmin çš„ HTTP æœåŠ¡ environment: - PHPLDAPADMIN_HTTPS=false # ç¦ç”¨ HTTPSï¼ˆä¾¿äºæµ‹è¯•ï¼‰ - PHPLDAPADMIN_LDAP_HOSTS=openldap # æŒ‡å®š OpenLDAP æœåŠ¡ä¸»æœºå links: - openldap # é“¾æ¥åˆ° OpenLDAP å®¹å™¨ depends_on: - openldap # ç¡®ä¿ OpenLDAP å®¹å™¨å…ˆå¯åŠ¨ ssp-app: image: ltbproject/self-service-password hostname: ssp.algs.tech container_name: ssp-app restart: always volumes: - ./custom/ssp.conf.php:/var/www/conf/config.inc.local.php:ro # æŒ‚è½½è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ - ./custom/images:/var/www/htdocs/images/custom:ro # æŒ‚è½½è‡ªå®šä¹‰å›¾ç‰‡ç›®å½• ports: - 80:80 # æš´éœ² SSP æœåŠ¡çš„ HTTP æœåŠ¡æ­¥éª¤ 2ï¼šåˆ›å»º SSP çš„è‡ªå®šä¹‰ PHP é…ç½®æ–‡ä»¶åœ¨åŒä¸€ç›®å½•ä¸‹åˆ›å»º custom/ssp.conf.php æ–‡ä»¶ï¼Œç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œå¹¶æ ¹æ®éœ€æ±‚è°ƒæ•´ï¼š&lt;?php// Override config.inc.php parameters below// LDAP ç›¸å…³é…ç½®$ldap_url = \"ldap://openldap\"; // OpenLDAP å®¹å™¨çš„åœ°å€$ldap_binddn = \"cn=admin,dc=algs,dc=tech\"; // LDAP ç®¡ç†å‘˜è´¦å·$ldap_bindpw = \"abc2025XYZ\"; // LDAP ç®¡ç†å‘˜å¯†ç $ldap_base = \"dc=algs,dc=tech\"; // LDAP åŸºå‡† DN// ç¦ç”¨çŸ­ä¿¡åŠŸèƒ½$use_sms = false; // ç¦ç”¨é€šè¿‡çŸ­ä¿¡ä¿®æ”¹å¯†ç çš„åŠŸèƒ½// å¯†ç è‡ªåŠ©æœåŠ¡é€‰é¡¹$use_questions = false; // ä¸ä½¿ç”¨å¯†ä¿é—®é¢˜$who_change_password = \"user\"; // å…è®¸ç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å¯†ç $mail_attribute = \"mail\"; // ä½¿ç”¨é‚®ç®±éªŒè¯ç”¨æˆ·èº«ä»½$audit_log_file = '/var/log/ssp_audit.log'; // å®šä¹‰å®¡è®¡æ—¥å¿—å­˜å‚¨è·¯å¾„// è°ƒè¯•é€‰é¡¹$debug = false; // ç¦ç”¨è°ƒè¯•æ¨¡å¼// å¯†ç ä¿®æ”¹æˆåŠŸæç¤º$keyphrase = \"scsdsicicsiccsd\"; // å¯†ç åŠ å¯†çš„å¯†é’¥çŸ­è¯­$messages['passwordchangedextramessage'] = \"æ‚¨çš„å¯†ç å·²æˆåŠŸæ›´æ”¹ï¼\"; // ç”¨æˆ·å¯†ç æ›´æ”¹æˆåŠŸçš„æç¤ºä¿¡æ¯$messages['changehelpextramessage'] = \"å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒï¼šsupport@algs.tech\"; // ä¿®æ”¹å¤±è´¥æ—¶çš„å¸®åŠ©ä¿¡æ¯$default_action = \"change\"; // é»˜è®¤æ“ä½œä¸ºä¿®æ”¹å¯†ç // è‡ªå®šä¹‰ç•Œé¢é…ç½®$background_image = \"images/unsplash-sky.jpeg\"; // è‡ªå®šä¹‰èƒŒæ™¯è·¯å¾„// $logo = \"images/custom/logo.png\"; // è‡ªå®šä¹‰ Logo è·¯å¾„ï¼ˆå¦‚æœéœ€è¦ï¼‰// é‚®ç®±é…ç½®$reset_url = \"http://ssp.algs.tech\"; // å¯†ç é‡ç½®æœåŠ¡çš„ URL$mail_address_use_ldap = true; // ä» LDAP ä¸­è·å–ç”¨æˆ·é‚®ç®±$use_tokens = true; // å¯ç”¨ä»¤ç‰ŒåŠŸèƒ½$token_lifetime = \"3600\"; // ä»¤ç‰Œæœ‰æ•ˆæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰$mail_smtp_secure = \"ssl\"; // ä½¿ç”¨ SSL åŠ å¯†$mail_from = \"noreply@algs.tech\"; // å‘ä»¶äººé‚®ç®±$mail_from_name = \"è‡ªåŠ©å¯†ç é‡ç½®å¹³å°\"; // å‘ä»¶äººåç§°$mail_signature = \"\"; // é‚®ä»¶ç­¾å$mail_sendmailpath = '/usr/sbin/sendmail';$mail_protocol = 'smtp';$mail_smtp_debug = false; // ç¦ç”¨ SMTP è°ƒè¯•$mail_debug_format = 'html'; // ä½¿ç”¨ HTML æ ¼å¼è°ƒè¯•ä¿¡æ¯$mail_smtp_host = 'smtphz.qiye.163.com'; // SMTP æœåŠ¡å™¨åœ°å€$mail_smtp_auth = true; // å¯ç”¨ SMTP èº«ä»½éªŒè¯$mail_smtp_user = 'noreply@algs.tech'; // å‘ä»¶é‚®ç®±è´¦å·$mail_smtp_pass = 'password'; // å‘ä»¶é‚®ç®±å¯†ç $mail_smtp_port = 465; // SMTP ç«¯å£ï¼ˆ465 è¡¨ç¤º SSLï¼‰$mail_smtp_timeout = 5; // è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰$mail_smtp_keepalive = false; // ç¦ç”¨ SMTP é•¿è¿æ¥$mail_smtp_autotls = true; // è‡ªåŠ¨å¯ç”¨ TLS$mail_smtp_options = array(); // é¢å¤–çš„ SMTP é€‰é¡¹$mail_contenttype = 'text/plain'; // é‚®ä»¶å†…å®¹ç±»å‹$mail_wordwrap = 0; // æ˜¯å¦æ¢è¡Œï¼ˆ0 è¡¨ç¤ºç¦ç”¨ï¼‰$mail_charset = 'utf-8'; // é‚®ä»¶å­—ç¬¦é›†$mail_priority = 3; // é‚®ä»¶ä¼˜å…ˆçº§ï¼ˆ3 ä¸ºæ­£å¸¸ï¼‰// ç•Œé¢æ˜¾ç¤ºé€‰é¡¹$show_menu = true; // æ˜¾ç¤ºèœå•$show_help = false; // ä¸æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯$display_footer = false; // ä¸æ˜¾ç¤ºé¡µè„šæ­¥éª¤ 3ï¼šå¯åŠ¨æœåŠ¡åœ¨ docker-compose.yml æ–‡ä»¶æ‰€åœ¨ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤docker-compose up -dä½¿ç”¨æµè§ˆå™¨è®¿é—®ä»¥ä¸‹åœ°å€: OpenLDAPï¼šhttp://&lt;æœåŠ¡å™¨IP&gt;:80 Self-Service Passwordï¼šhttp://&lt;æœåŠ¡å™¨IP&gt;:8080æ­¥éª¤ 4ï¼šæµ‹è¯•ä¸éªŒè¯ åœ¨ SSP ç™»å½•ç•Œé¢è¾“å…¥ LDAP ç”¨æˆ·çš„é‚®ç®±åœ°å€ï¼Œå¹¶å°è¯•æ‰¾å›å¯†ç ã€‚ æ£€æŸ¥é‚®ä»¶æ˜¯å¦æ­£ç¡®å‘é€ã€‚ ç¡®ä¿å¯†ç æ›´æ–°åœ¨ LDAP ä¸­æˆåŠŸç”Ÿæ•ˆã€‚å¸¸è§é—®é¢˜1. é‚®ä»¶æœªå‘é€ æ£€æŸ¥ SMTP é…ç½®æ˜¯å¦æ­£ç¡®ã€‚ ç¡®è®¤ç½‘ç»œæ˜¯å¦å…è®¸è®¿é—® SMTP æœåŠ¡å™¨ã€‚2. å¯†ç æ›´æ–°å¤±è´¥ ç¡®è®¤ LDAP ç®¡ç†å‘˜è´¦å·å’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚ æ£€æŸ¥ OpenLDAP æœåŠ¡æ—¥å¿—ã€‚3. å®¡è®¡æ—¥å¿—ä¸ºç©º æ£€æŸ¥ ssp.conf.php ä¸­çš„æ—¥å¿—è·¯å¾„æ˜¯å¦æ­£ç¡®ã€‚è‡³æ­¤ï¼Œæ‚¨å·²æˆåŠŸéƒ¨ç½²äº†åŸºäº Docker çš„ LDAP ä¸å¯†ç è‡ªåŠ©æ‰¾å›æœåŠ¡ï¼" }, { "title": "åœ¨ Debian 12 ä¸Šå®Œå…¨æ‰‹åŠ¨å®‰è£… kubernetes v1.32.2", "url": "/posts/tools_Fully-Manual-Installation-of-Kubernetes-v1.32.2-on-Debian-12.md-copy.html", "categories": "å·¥å…·", "tags": "kubernetes, k8s", "date": "2025-07-24 17:15:00 +0800", "snippet": "åŸºç¡€ç¯å¢ƒå‡†å¤‡1.1 kubernetesé›†ç¾¤ç»„ä»¶æ¦‚è¿°Kubernetes é›†ç¾¤ç”± Master èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰å’Œ Node èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰ç»„æˆï¼Œå„è‡ªåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š1.1.1 MasterèŠ‚ç‚¹ etcd åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼Œä¿å­˜é›†ç¾¤çš„æ‰€æœ‰çŠ¶æ€å’Œé…ç½®æ•°æ®ï¼ˆå¦‚ Podã€Serviceã€Namespace ç­‰ï¼‰ã€‚ æ˜¯ Kubernetes çš„â€œå”¯ä¸€çœŸå®æ•°æ®æºâ€...", "content": "åŸºç¡€ç¯å¢ƒå‡†å¤‡1.1 kubernetesé›†ç¾¤ç»„ä»¶æ¦‚è¿°Kubernetes é›†ç¾¤ç”± Master èŠ‚ç‚¹ï¼ˆæ§åˆ¶èŠ‚ç‚¹ï¼‰å’Œ Node èŠ‚ç‚¹ï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰ç»„æˆï¼Œå„è‡ªåŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š1.1.1 MasterèŠ‚ç‚¹ etcd åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨æ•°æ®åº“ï¼Œä¿å­˜é›†ç¾¤çš„æ‰€æœ‰çŠ¶æ€å’Œé…ç½®æ•°æ®ï¼ˆå¦‚ Podã€Serviceã€Namespace ç­‰ï¼‰ã€‚ æ˜¯ Kubernetes çš„â€œå”¯ä¸€çœŸå®æ•°æ®æºâ€ï¼ˆSingle Source of Truthï¼‰ã€‚ API Serverï¼ˆkube-apiserverï¼‰ é›†ç¾¤çš„å…¥å£ï¼Œæä¾› REST APIï¼Œå¤„ç†æ‰€æœ‰æ“ä½œè¯·æ±‚ï¼ˆå¦‚åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤èµ„æºï¼‰ã€‚ è´Ÿè´£ä¸å…¶ä»–ç»„ä»¶é€šä¿¡ï¼ˆå¦‚ kubeletã€kube-scheduler ç­‰ï¼‰ã€‚ Schedulerï¼ˆkube-schedulerï¼‰ ç›‘å¬æœªè°ƒåº¦çš„ Podï¼Œæ ¹æ®èµ„æºéœ€æ±‚ã€èŠ‚ç‚¹è´Ÿè½½ç­‰å› ç´ ï¼Œå°† Pod åˆ†é…åˆ°åˆé€‚çš„ Node ä¸Šè¿è¡Œã€‚ Controller Managerï¼ˆkube-controller-managerï¼‰ è¿è¡Œä¸€ç³»åˆ—æ§åˆ¶å™¨ï¼Œç¡®ä¿é›†ç¾¤çŠ¶æ€ä¸æœŸæœ›ä¸€è‡´ã€‚ æ ¸å¿ƒæ§åˆ¶å™¨åŒ…æ‹¬ï¼š Node Controllerï¼ˆç›‘æ§èŠ‚ç‚¹çŠ¶æ€ï¼‰ Deployment Controllerï¼ˆç®¡ç†å‰¯æœ¬æ•°ï¼‰ Service Controllerï¼ˆç®¡ç† Service ä¸ Endpointï¼‰ å…¶ä»–æ§åˆ¶å™¨ï¼ˆå¦‚ ReplicaSetã€Namespace æ§åˆ¶å™¨ç­‰ï¼‰ã€‚ ï¼ˆå¯é€‰ï¼‰Cloud Controller Manager å½“é›†ç¾¤è¿è¡Œåœ¨å…¬æœ‰äº‘ç¯å¢ƒæ—¶ï¼Œè´Ÿè´£ä¸äº‘å¹³å°äº¤äº’ï¼ˆå¦‚è´Ÿè½½å‡è¡¡ã€å­˜å‚¨å·ã€èŠ‚ç‚¹ç®¡ç†ï¼‰ã€‚ è§£è€¦ Kubernetes ä¸ç‰¹å®šäº‘å‚å•†çš„ä»£ç ã€‚ 1.1.2 Node èŠ‚ç‚¹ç»„ä»¶ kubelet è¿è¡Œåœ¨æ¯ä¸ª Node ä¸Šçš„â€œèŠ‚ç‚¹ä»£ç†â€ï¼Œè´Ÿè´£ï¼š ä¸ Master é€šä¿¡ï¼Œæ¥æ”¶ Pod å®šä¹‰ï¼ˆé€šè¿‡ API Serverï¼‰ã€‚ ç®¡ç† Pod ç”Ÿå‘½å‘¨æœŸï¼ˆå¯åŠ¨ã€åœæ­¢ã€ç›‘æ§å®¹å™¨ï¼‰ã€‚ ä¸ŠæŠ¥èŠ‚ç‚¹çŠ¶æ€ï¼ˆå¦‚èµ„æºä½¿ç”¨ã€Pod çŠ¶æ€ï¼‰åˆ° Masterã€‚ kube-proxy ç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ç½‘ç»œè§„åˆ™ï¼Œå®ç° Service çš„æŠ½è±¡ï¼ˆå¦‚è´Ÿè½½å‡è¡¡ã€æœåŠ¡å‘ç°ï¼‰ã€‚ é€šè¿‡ iptables/IPVS æˆ–ç”¨æˆ·ç©ºé—´ä»£ç†è½¬å‘æµé‡åˆ° Podã€‚ å®¹å™¨è¿è¡Œæ—¶ï¼ˆContainer Runtimeï¼‰ è´Ÿè´£è¿è¡Œå®¹å™¨çš„åº•å±‚è½¯ä»¶ï¼Œå¦‚ Dockerã€containerdã€CRI-Oã€‚ ä¸ Kubernetes é€šè¿‡ CRIï¼ˆContainer Runtime Interfaceï¼‰äº¤äº’ã€‚ 1.2 é›†ç¾¤ä¸»æœºè§„åˆ’å‡è®¾æˆ‘ä»¬åªæœ‰3å°ä¸»æœºï¼Œä¸ºäº†å…¼é¡¾ç¡¬ä»¶æ¡ä»¶é™åˆ¶è€Œæ­å»ºé«˜å¯ç”¨é›†ç¾¤ï¼Œä»¥ä¸‹æ˜¯è¾ƒä¸ºåˆç†çš„é›†ç¾¤è½¯ç¡¬ä»¶è§„åˆ’ï¼š èŠ‚ç‚¹åç§° IP æ“ä½œç³»ç»Ÿ é…ç½® k8s-101 192.168.122.101 Debian GNU/Linux 12 (bookworm) å†…å­˜:4G + SSDç¡¬ç›˜:30G + CPU:2æ ¸ k8s-102 192.168.122.102 Debian GNU/Linux 12 (bookworm) å†…å­˜:4G + SSDç¡¬ç›˜:30G + CPU:2æ ¸ k8s-103 192.168.122.103 Debian GNU/Linux 12 (bookworm) å†…å­˜:4G + SSDç¡¬ç›˜:30G + CPU:2æ ¸ è¿™ä¸‰å°ä¸»æœºåœ¨é›†ç¾¤ä¸­åˆ†åˆ«å……å½“çš„è§’è‰²å¦‚ä¸‹ï¼š èŠ‚ç‚¹åç§° etcdæœåŠ¡å™¨ æ§åˆ¶èŠ‚ç‚¹ å·¥ä½œèŠ‚ç‚¹ L4/L7ä»£ç† é¢å¤–è§’è‰² k8s-101 âœ“ âœ“ âœ• âœ“ ç­¾å‘è¯ä¹¦èŠ‚ç‚¹ã€ä¸»è¦æ§åˆ¶èŠ‚ç‚¹ k8s-102 âœ“ âœ“ âœ“ âœ“ Â  k8s-103 âœ“ âœ“ âœ“ âœ• Â  ä»¥ä¸Šæ˜¯åœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹åšçš„é«˜å¯ç”¨èµ„æºåˆ†é…ï¼Œæ­å»ºé›†ç¾¤çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æŠŠé›†ç¾¤çš„å„ä¸ªè½¯ä»¶ç»„ä»¶åˆç†å®‰è£…åˆ°ä¸åŒä¸»æœºä¸Šï¼Œå¹¶ä¸”ä¿è¯å„ä¸ªç»„ä»¶èƒ½æ­£å¸¸å·¥ä½œã€‚å¦‚æœä½ çš„æœåŠ¡å™¨èµ„æºå……è¶³ï¼Œåº”å½“å°†ç»„ä»¶ç‹¬ç«‹éƒ¨ç½²åˆ°æ›´å¤šä¸»æœºä¸Šï¼Œè¾¾åˆ°å¢å¼ºæ€§èƒ½ã€å¯ç”¨æ€§ã€å¯æ‰©å±•æ€§çš„ç›®æ ‡ï¼Œç®€åŒ–ç»´æŠ¤å¹¶å¢å¼ºå®‰å…¨æ€§ã€‚1.3 è®¾ç½®hostsnameåœ¨ 192.168.122.101 æ‰§è¡Œä»¥ä¸‹å‘½ä»¤hostnamectl set-hostname k8s-101cat &gt;&gt; /etc/hosts &lt;&lt;EOF192.168.122.101 k8s-101EOFåœ¨ 192.168.122.102 æ‰§è¡Œä»¥ä¸‹å‘½ä»¤hostnamectl set-hostname k8s-102cat &gt;&gt; /etc/hosts &lt;&lt;EOF192.168.122.102 k8s-102EOFåœ¨ 192.168.122.103 æ‰§è¡Œä»¥ä¸‹å‘½ä»¤hostnamectl set-hostname k8s-103cat &gt;&gt; /etc/hosts &lt;&lt;EOF192.168.122.103 k8s-103EOF1.4 å…³é—­äº¤æ¢åˆ†åŒºkubernetes é»˜è®¤ä¸æ”¯æŒåœ¨å¯ç”¨äº¤æ¢åˆ†åŒºçš„æƒ…å†µä¸‹è¿è¡Œï¼Œå¯ä»¥ç¼–è¾‘ /etc/fstab æ–‡ä»¶ï¼Œæ³¨é‡Šæ‰æˆ–åˆ é™¤ä¸äº¤æ¢åˆ†åŒºç›¸å…³çš„è¡Œã€‚ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®ä¿äº¤æ¢åˆ†åŒºè¢«ç¦ç”¨ï¼šswapoff -aå®‰è£…containerdcontainerd çš„ä¸‹è½½ç½‘å€ä¸ºhttps://containerd.io/downloads/ï¼Œåœ¨æ’°å†™æ–‡ç« æ—¶ï¼ˆ2025.02.15ï¼‰æœ€æ–°ç‰ˆæœ¬æ˜¯ v2.0.2ï¼Œæˆ‘ä»¬å°†å…¶å®‰è£…åˆ°æ‰€æœ‰ä¸»æœºä¸Šï¼Œå¹¶ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹2.1 å®‰è£… containerdä» https://github.com/containerd/containerd/releases ä¸‹è½½ containerd-&lt;ç‰ˆæœ¬&gt;-&lt;æ“ä½œç³»ç»Ÿ&gt;-&lt;æ¶æ„&gt;.tar.gz å­˜æ¡£ï¼ŒéªŒè¯å…¶ sha256sumï¼Œå¹¶å°†å…¶è§£å‹åˆ° /usr/local ç›®å½•ä¸‹# ä¸‹è½½å¹¶è§£å‹tar Cxzvf /usr/local containerd-2.0.2-linux-amd64.tar.gz# åˆ›å»ºå¹¶é…ç½® containerd.servicemkdir -p /usr/local/lib/systemd/system/cat &gt; /usr/local/lib/systemd/system/containerd.service &lt;&lt;EOF[Unit]Description=containerd container runtimeDocumentation=https://containerd.ioAfter=network.target local-fs.target dbus.service[Service]ExecStartPre=-/sbin/modprobe overlayExecStart=/usr/local/bin/containerdType=notifyDelegate=yesKillMode=processRestart=alwaysRestartSec=5# Having non-zero Limit*s causes performance problems due to accounting overhead# in the kernel. We recommend using cgroups to do container-local accounting.LimitNPROC=infinityLimitCORE=infinity# Comment TasksMax if your systemd version does not supports it.# Only systemd 226 and above support this version.TasksMax=infinityOOMScoreAdjust=-999[Install]WantedBy=multi-user.targetEOF# é‡æ–°åŠ è½½ systemdsystemctl daemon-reload# å¯åŠ¨å¹¶å¯ç”¨ containerd å¼€æœºå¯åŠ¨systemctl enable --now containerd2.2 å®‰è£… runcrunc æ˜¯ä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨è¿è¡Œæ—¶å·¥å…·ï¼Œè´Ÿè´£æ ¹æ® OCIï¼ˆOpen Container Initiativeï¼‰ è§„èŒƒåˆ›å»ºå’Œè¿è¡Œå®¹å™¨ã€‚containerd ä¾èµ– runc æ¥å®é™…å¯åŠ¨å’Œç®¡ç†å®¹å™¨ã€‚ä» https://github.com/opencontainers/runc/releases ä¸‹è½½ runc.&lt;æ¶æ„&gt; äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒéªŒè¯å…¶ sha256sumï¼Œå¹¶å°†å…¶å®‰è£…ä¸º /usr/local/sbin/runcã€‚# å®‰è£…install -m 755 runc.amd64 /usr/local/sbin/runcè¯¥äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯é™æ€æ„å»ºçš„ï¼Œåº”è¯¥é€‚ç”¨äºä»»ä½•å¯¹åº”æ¶æ„çš„ Linux å‘è¡Œç‰ˆã€‚2.3 å®‰è£… CNI æ’ä»¶CNIï¼ˆContainer Network Interfaceï¼‰ æ’ä»¶ç”¨äºé…ç½®å®¹å™¨çš„ç½‘ç»œï¼ŒåŒ…æ‹¬åˆ†é… IP åœ°å€ã€è®¾ç½®ç½‘ç»œæ¥å£ã€é…ç½®è·¯ç”±ç­‰ã€‚ä» https://github.com/containernetworking/plugins/releases ä¸‹è½½ cni-plugins-&lt;æ“ä½œç³»ç»Ÿ&gt;-&lt;æ¶æ„&gt;-&lt;ç‰ˆæœ¬&gt;.tgz å­˜æ¡£ï¼ŒéªŒè¯å…¶ sha256sumï¼Œå¹¶å°†å…¶è§£å‹åˆ° /opt/cni/bin ç›®å½•ä¸‹ï¼Œæ“ä½œè¿‡ç¨‹å¦‚ä¸‹mkdir -p /opt/cni/bintar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.6.2.tgzå°† /opt/cni/bin ç›®å½•æ·»åŠ åˆ° $PATH ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿½åŠ åˆ° /etc/profile æ–‡ä»¶ä¸­echo 'export PATH=$PATH:/opt/cni/bin' &gt;&gt; /etc/profilesource /etc/profileåˆ›å»º CNI é…ç½®æ–‡ä»¶ç›®å½•mkdir -p /etc/cni/net.dcat &gt; /etc/cni/net.d/10-mynet.conf &lt;&lt;EOF{ \"cniVersion\": \"0.4.0\", \"name\": \"mynet\", \"type\": \"bridge\", \"bridge\": \"cni0\", \"isGateway\": true, \"ipMasq\": true, \"ipam\": { \"type\": \"host-local\", \"subnet\": \"10.22.0.0/16\", \"routes\": [ { \"dst\": \"0.0.0.0/0\" } ] }}EOFé‡å¯ containerdsystemctl restart containerdè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯é™æ€æ„å»ºçš„ï¼Œåº”è¯¥é€‚ç”¨äºä»»ä½•å¯¹åº”æ¶æ„çš„ Linux å‘è¡Œç‰ˆã€‚2.4 ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·containerd æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å®¹å™¨è¿è¡Œæ—¶ï¼Œä½†å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œéœ€è¦é€šè¿‡å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰æ¥äº¤äº’ã€‚ä¸åŒçš„ CLI å·¥å…·ï¼ˆå¦‚ ctrã€nerdctlã€crictlï¼‰æ˜¯ä¸ºäº†æ»¡è¶³ä¸åŒç”¨æˆ·å’Œåœºæ™¯çš„éœ€æ±‚è€Œè®¾è®¡çš„ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„åŒºåˆ«å’Œé€‚ç”¨åœºæ™¯ï¼š å·¥å…· ç›®æ ‡ç”¨æˆ· åŠŸèƒ½ç‰¹ç‚¹ é€‚ç”¨åœºæ™¯ ctr containerd å¼€å‘è€…æˆ–é«˜çº§ç”¨æˆ· containerd è‡ªå¸¦çš„å®˜æ–¹å‘½ä»¤è¡Œå·¥å…·ï¼Œåº•å±‚ã€ç®€å•ã€ç›´æ¥ä¸ containerd äº¤äº’ å¼€å‘å’Œè°ƒè¯• containerd nerdctl æ™®é€šç”¨æˆ·å’Œè¿ç»´äººå‘˜ ç±»ä¼¼ Docker çš„ä½“éªŒï¼ŒåŠŸèƒ½ä¸°å¯Œ æ—¥å¸¸å®¹å™¨ç®¡ç†ã€ç”Ÿäº§ç¯å¢ƒ crictl Kubernetes ç®¡ç†å‘˜å’Œå¼€å‘è€… é’ˆå¯¹ CRI è®¾è®¡ï¼Œé€‚åˆ Kubernetes ç¯å¢ƒ è°ƒè¯• Kubernetes èŠ‚ç‚¹å’Œå®¹å™¨è¿è¡Œæ—¶ åœ¨è¿™é‡Œï¼Œnerdctl å·¥å…·æ›´é€‚åˆæˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯ï¼Œå› æ­¤é€‰æ‹© nerdctlã€‚åœ¨ https://github.com/containerd/nerdctl/releases ä¸‹è½½å¯¹åº”çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œåœ¨æ’°å†™è¿™æœ¬æ–‡æ—¶ nerdctl çš„ç‰ˆæœ¬æ˜¯ v2.0.3ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹wget https://github.com/containerd/nerdctl/releases/download/v2.0.3/nerdctl-2.0.3-linux-amd64.tar.gztar -zxvf nerdctl-2.0.3-linux-amd64.tar.gz -C /usr/bin/ nerdctlæœ€åï¼ŒåŠ è½½ nerdctl çš„ Bash è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œå¹¶è®¾ç½® containerd é»˜è®¤çš„åç§°ç©ºé—´ä¸º k8s.ioï¼Œå¦‚ä¸‹# è¿½åŠ é…ç½®cat &gt;&gt; /etc/profile &lt;&lt;EOFsource &lt;(nerdctl completion bash)export CONTAINERD_NAMESPACE=k8s.ioEOF# è®©é…ç½®ç«‹å³ç”Ÿæ•ˆsource /etc/profile2.5 é…ç½® containerdcontainerd é»˜è®¤é…ç½®æ–‡ä»¶åœ¨ /etc/containerd/config.tomlï¼Œé€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€ä¸ªé»˜è®¤é…ç½®æ–‡ä»¶ï¼šmkdir -p /etc/containerdcontainerd config default &gt; /etc/containerd/config.tomlé‡å¯ containerdsystemctl restart containerdç­¾å‘SSLè¯ä¹¦3.1 å®‰è£…è¯ä¹¦å·¥å…·cfssl ç³»åˆ—å·¥å…·æ˜¯ Cloudflare æä¾›çš„ PKI/TLS å·¥å…·ï¼Œç”¨äºè¯ä¹¦ç®¡ç†ã€‚å¯ä»¥åœ¨ https://github.com/cloudflare/cfssl æ‰¾åˆ°å¯¹åº”çš„ä¿¡æ¯ï¼Œåœ¨æ’°å†™æ–‡ç« æ—¶ç‰ˆæœ¬æ˜¯ 1.6.6ï¼Œæˆ‘ä»¬ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œå®‰è£…åˆ° k8s-101 è¿™å°ä¸»æœºï¼Œä»¥ linux amd64 ä¸ºä¾‹å®‰è£…å‘½ä»¤å¦‚ä¸‹wget https://github.com/cloudflare/cfssl/releases/download/v1.6.5/cfssl_1.6.5_linux_amd64 -o /usr/local/bin/cfsslwget https://github.com/cloudflare/cfssl/releases/download/v1.6.5/cfssljson_1.6.5_linux_amd64 -o /usr/local/bin/cfssljsonwget https://github.com/cloudflare/cfssl/releases/download/v1.6.5/cfssl-certinfo_1.6.5_linux_amd64 -o /usr/local/bin/cfssl-certinfochmod a+x /usr/local/bin/cfssl*ä»¥ä¸‹æ˜¯å®ƒä»¬çš„ç®€è¦åŠŸèƒ½ å·¥å…· åŠŸèƒ½ cfssl æ ¸å¿ƒå·¥å…·ï¼Œç”¨äºè¯ä¹¦ç”Ÿæˆå’Œç®¡ç† cfssl-json è¾…åŠ©å·¥å…·ï¼Œç”¨äºè§£æ JSON è¾“å‡º cfssl-certinfo ç”¨äºæŸ¥çœ‹è¯ä¹¦è¯¦ç»†ä¿¡æ¯ 3.2 k8sæ‰€éœ€è¯ä¹¦æ¦‚è¿°åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºé›†ç¾¤ä¸­çš„å„ä¸ªç»„ä»¶ç”Ÿæˆè¯ä¹¦ï¼Œä»¥å®ç°å®‰å…¨é€šä¿¡å’Œèº«ä»½éªŒè¯ã€‚ä¸‹å›¾å±•ç¤ºäº† Kubernetes æ‰€éœ€çš„ä¸»è¦è¯ä¹¦æˆ‘ä»¬å°†åœ¨ k8s-101 ç”Ÿæˆçš„å„ä¸ªè¯ä¹¦å­˜æ”¾åˆ° /etc/kubernetes/pki é‡Œï¼Œå¹¶åŒæ­¥åˆ°å…¶ä»–ä¸»æœºä¸Šã€‚3.3 æ­å»ºCACA æ˜¯è¯ä¹¦çš„ç­¾å‘æœºæ„çš„ç®€ç§°ï¼Œæ‰€æœ‰å­è¯ä¹¦çš„ç­¾å‘è¯ä¹¦çš„å‰ææ˜¯æœ‰ä¸€ä¸ªç­¾å‘æœºæ„ï¼Œä¸‹æ–‡æˆ‘ä»¬æ­å»ºè‡ªå·±çš„ç­¾å‘æœºæ„ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ CA é…ç½®mkdir -p /etc/kubernetes/pkicat &gt; /etc/kubernetes/pki/ca-config.json &lt;&lt;EOF{ \"signing\": { \"default\": { \"expiry\": \"175200h\" }, \"profiles\": { \"www\": { \"expiry\": \"175200h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\", \"client auth\" ] } } }}EOFä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆ CA è¯·æ±‚æ–‡ä»¶cat &gt; /etc/kubernetes/pki/ca-csr.json &lt;&lt;EOF{ \"CN\": \"kubernetes\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"L\": \"Guangzhou\", \"ST\": \"Guangdong\", \"O\": \"kubernetes\", \"OU\": \"system\" } ], \"ca\": { \"expiry\": \"175200h\" }}EOFè¯ä¹¦æ ¹å­—æ®µå¤‡æ³¨å¦‚ä¸‹ å­—æ®µ æè¿° ç¤ºä¾‹æˆ–è¯´æ˜ CN è¯ä¹¦åç§°ï¼ˆCommon Nameï¼‰ï¼Œä¸€èˆ¬ä½¿ç”¨åŸŸå example.com key å®šä¹‰è¯ä¹¦ç±»å‹ï¼Œalgo ä¸ºåŠ å¯†ç±»å‹ï¼Œsize ä¸ºåŠ å¯†é•¿åº¦ algo: RSA, size: 2048 names å®šä¹‰è¯ä¹¦çš„é€šç”¨åç§°ï¼Œå¯ä»¥æœ‰å¤šä¸ªæ¡ç›® Â  CN Common Nameï¼Œä¸€èˆ¬ä½¿ç”¨åŸŸå example.com C Country Codeï¼Œç”³è¯·å•ä½æ‰€å±å›½å®¶ï¼Œåªèƒ½æ˜¯ä¸¤ä¸ªå­—æ¯çš„å›½å®¶ç  CNï¼ˆä¸­å›½ï¼‰ ST State or Provinceï¼Œçœä»½åç§°æˆ–è‡ªæ²»åŒºåç§° Beijing L Localityï¼ŒåŸå¸‚æˆ–è‡ªæ²»å·å Beijing O Organization nameï¼Œç»„ç»‡åç§°ã€å…¬å¸åç§° Example Inc. OU Organization Unit Nameï¼Œç»„ç»‡å•ä½åç§°ã€å…¬å¸éƒ¨é—¨ IT Department ca.expiry ä»£è¡¨æœ‰æ•ˆæ—¶é—´ï¼Œ175200h å¯¹åº” 20 å¹´ 175200h æœ€åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”ŸæˆCAè‡ªç­¾åæ ¹è¯ä¹¦cfssl gencert -initca ca-csr.json | cfssljson -bare caæœ€åä¸€ä¸ªå‚æ•°æŒ‡å®šäº†è¯ä¹¦æ–‡ä»¶åï¼Œæœ€åç”Ÿæˆä»¥ä¸‹ä¸‰ä¸ªæ–‡ä»¶ ca.csr: è¯ä¹¦ç­¾åç”³è¯·ï¼ˆCertificate Signing Requestï¼‰æ–‡ä»¶ ca.pem: caå…¬é’¥è¯ä¹¦ ca-key.pem: caç§é’¥è¯ä¹¦ç”Ÿæˆçš„ä¸‰ä¸ªæ–‡ä»¶æ˜¯æ ¹è¯ä¹¦åŒ…å«çš„å†…å®¹ã€‚åç»­ï¼Œæˆ‘ä»¬ç»™å„ä¸ªæœåŠ¡é¢å‘è¯ä¹¦çš„æ—¶å€™ï¼Œéƒ½åŸºäº CA æ ¹è¯ä¹¦æ¥é¢å‘ã€‚3.4 ç­¾å‘è¯ä¹¦ etcdå®šä¹‰è¯ä¹¦ä¿¡æ¯å¦‚ä¸‹cat &gt; /etc/kubernetes/pki/etcd-csr.json &lt;&lt;EOF{ \"CN\": \"etcd\", \"hosts\": [ \"127.0.0.1\", \"192.168.122.101\", \"192.168.122.102\", \"192.168.122.103\" ], \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [{ \"C\": \"CN\", \"ST\": \"Guangdong\", \"L\": \"Guangzhou\", \"O\": \"kubernetes\", \"OU\": \"system\" }]}EOFæ”¯æŒçš„ä¸»æœºåˆ—è¡¨å¯¹åº”æœ¬æœºä»¥åŠæ‰€æœ‰ etcd èŠ‚ç‚¹ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www etcd-csr.json | cfssljson -bare etcd kube-apiserverk8s çš„å…¶ä»–ç»„ä»¶è·Ÿ apiserver è¦è¿›è¡ŒåŒå‘ TLSï¼ˆmTLSï¼‰ è®¤è¯ï¼Œæ‰€ä»¥ apiserver éœ€è¦æœ‰è‡ªå·±çš„è¯ä¹¦ï¼Œä»¥ä¸‹å®šä¹‰è¯ä¹¦ç”³è¯·æ–‡ä»¶cat &gt; /etc/kubernetes/pki/apiserver-csr.json &lt;&lt;EOF{ \"CN\": \"apiserver\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"hosts\": [ \"127.0.0.1\", \"10.96.0.1\", \"192.168.122.100\", \"192.168.122.101\", \"192.168.122.102\", \"192.168.122.103\", \"kubernetes\", \"kubernetes.default\", \"kubernetes.default.svc\", \"kubernetes.default.svc.cluster\", \"kubernetes.default.svc.cluster.local\" ], \"names\": [{ \"C\": \"CN\", \"ST\": \"Guangdong\", \"L\": \"Guangzhou\", \"O\": \"kubernetes\", \"OU\": \"system\" }]}EOFè¯¥è¯ä¹¦åç»­è¢« kubernetes master é›†ç¾¤ä½¿ç”¨ï¼Œéœ€è¦å°† master èŠ‚ç‚¹çš„ IP éƒ½å¡«ä¸Šï¼ŒåŒæ—¶è¿˜éœ€è¦å¡«å†™ service ç½‘ç»œçš„ç¬¬ä¸€ä¸ªIPï¼ˆåç»­è®¡åˆ’ä½¿ç”¨10.96.0.0 255.255.0.0 ç½‘æ®µä½œä¸º service ç½‘ç»œï¼Œå› æ­¤åŠ ä¸Š 10.96.0.1ï¼‰ï¼Œåç»­å¯èƒ½åŠ åˆ°é›†ç¾¤é‡Œçš„IPä¹Ÿéœ€è¦éƒ½å¡«å†™ä¸Šå»ã€‚æœ€åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www apiserver-csr.json | cfssljson -bare apiserverâ€“ kube-controller-managercontroller-manager éœ€è¦è·Ÿ apiserver è¿›è¡Œ mTLS è®¤è¯ï¼Œå®šä¹‰è¯ä¹¦ç”³è¯·æ–‡ä»¶å¦‚ä¸‹cat &gt; /etc/kubernetes/pki/controller-manager-csr.json &lt;&lt;EOF{ \"CN\": \"system:kube-controller-manager\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"hosts\": [ \"127.0.0.1\", \"192.168.122.100\", \"192.168.122.101\", \"192.168.122.102\", \"192.168.122.103\" ], \"names\": [ { \"C\": \"CN\", \"ST\": \"Guangdong\", \"L\": \"Guangzhou\", \"O\": \"system:kube-controller-manager\", \"OU\": \"system\" } ]}EOFhosts åˆ—è¡¨åŒ…å«æ‰€æœ‰ kube-controller-manager èŠ‚ç‚¹ IPï¼›CN ä¸º system:kube-controller-managerï¼ŒO ä¸º system:kube-controller-managerï¼Œk8sé‡Œå†…ç½®çš„ClusterRoleBindings system:kube-controller-manager æˆæƒ kube-controller-manager æ‰€éœ€çš„æƒé™ã€‚åé¢ç»„ä»¶è¯ä¹¦éƒ½åšç±»ä¼¼æ“ä½œã€‚ç”Ÿæˆè¯ä¹¦å‘½ä»¤å¦‚ä¸‹cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www controller-manager-csr.json | cfssljson -bare controller-manager kube-schedulerkube-scheduler éœ€è¦è·Ÿ apiserver è¿›è¡Œ mTLS è®¤è¯ï¼Œç”Ÿæˆè¯ä¹¦ç”³è¯·æ–‡ä»¶å¦‚ä¸‹cat &gt; /etc/kubernetes/pki/scheduler-csr.json &lt;&lt;EOF{ \"CN\": \"system:kube-scheduler\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"hosts\": [ \"127.0.0.1\", \"192.168.122.100\", \"192.168.122.101\", \"192.168.122.102\", \"192.168.122.101\" ], \"names\": [ { \"C\": \"CN\", \"ST\": \"Guangdong\", \"L\": \"Guangzhou\", \"O\": \"system:kube-scheduler\", \"OU\": \"system\" } ]}EOFkubernetes å†…ç½®çš„ ClusterRoleBindings system:kube-scheduler å°†æˆæƒ kube-scheduler æ‰€éœ€çš„æƒé™ã€‚ç”Ÿæˆè¯ä¹¦å‘½ä»¤å¦‚ä¸‹cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www scheduler-csr.json | cfssljson -bare scheduler kube-proxykube-proxy éœ€è¦è·Ÿ apiserver è¿›è¡Œ mTLS è®¤è¯ï¼Œç”Ÿæˆè¯ä¹¦ç”³è¯·è¯·æ±‚æ–‡ä»¶å¦‚ä¸‹cat &gt; /etc/kubernetes/pki/proxy-csr.json &lt;&lt;EOF{ \"CN\": \"system:kube-proxy\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"Guangdong\", \"L\": \"Guangzhou\", \"O\": \"kubernetes\", \"OU\": \"system\" } ]}EOFç”Ÿæˆè¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www proxy-csr.json | cfssljson -bare proxy ç®¡ç†å‘˜adminèƒ½ç”¨çš„è¯ä¹¦åˆ›å»ºè¯ä¹¦ä¿¡æ¯cat &gt; /etc/kubernetes/pki/admin-csr.json &lt;&lt; EOF{ \"CN\": \"admin\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"ST\": \"Guangzhou\", \"L\": \"Guangdong\", \"O\": \"system:masters\", \"OU\": \"system\" } ]}EOFç”Ÿæˆè¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www admin-csr.json | cfssljson -bare admin3.5 åŒæ­¥è¯ä¹¦ç”Ÿæˆè¯ä¹¦ä¹‹åï¼Œå°†è¯ä¹¦ç›®å½•/etc/kubernetes/pkiåŒæ­¥åˆ°å…¶ä»–ä¸»æœºã€‚å®‰è£…etcdæˆ‘ä»¬å°†ä½¿ç”¨ k8s-101ã€k8s-102ã€k8s-103 è¿™ä¸‰å°ä¸»æœºæ­å»ºectdé›†ç¾¤ã€‚åœ¨æ’°å†™æ­¤æ–‡æ¡£æ—¶ï¼ˆ2425.02.18ï¼‰ï¼Œetcdæœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯ 3.5.18ï¼Œå¯ä»¥ä» https://github.com/etcd-io/etcd/releases/ è¿™ä¸ªé“¾æ¥ä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ã€‚4.1 etcdå¯åŠ¨å‚æ•°å¸¸è§å‚æ•°è¯´æ˜è¯´ä¸‹ å‚æ•° å¯¹åº”ç¯å¢ƒå˜é‡ è¯´æ˜ â€“name ETCD_NAME å½“å‰etcdçš„å”¯ä¸€åç§°ï¼Œè¦ä¿è¯å’Œå…¶ä»–èŠ‚ç‚¹ä¸å†²çª â€“data-dir ETCD_DATA_DIR æŒ‡å®šetcdå­˜å‚¨æ•°æ®çš„å­˜å‚¨ä½ç½® â€“listen-peer-urls ETCD_LISTEN_PEER_URLS ç«¯å¯¹ç«¯çš„é€šä¿¡urlï¼ŒåŒ…å«ä¸»æœºåœ°å€å’Œç«¯å£å·ï¼ŒæŒ‡å®šå½“å‰etcdå’Œå…¶ä»–èŠ‚ç‚¹etcdé€šä¿¡æ—¶çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚ â€“listen-client-urls ETCD_LISTEN_CLIENT_URLS æŒ‡å®šå½“å‰etcdæ¥æ”¶å®¢æˆ·ç«¯æŒ‡ä»¤çš„åœ°å€å’Œç«¯å£ï¼Œåœ¨è¿™é‡Œçš„å®¢æˆ·ç«¯æˆ‘ä»¬æŒ‡çš„æ˜¯k8sé›†ç¾¤çš„masterèŠ‚ç‚¹ â€“initial-advertise-peer-urls ETCD_INITIAL_ADVERTISE_PEER_URLS æŒ‡å®šetcdå¹¿æ’­ç«¯å£ï¼Œå½“å‰etcdä¼šå°†æ•°æ®åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œé€šè¿‡2380ç«¯å£å‘é€ â€“advertise-client-urls ETCD_ADVERTISE_CLIENT_URLS ç»™å®¢æˆ·ç«¯é€šå‘Šçš„ç«¯å£ â€“initial-cluster ETCD_INITIAL_CLUSTER å®šä¹‰etcdé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åç§°å’ŒIPï¼Œä»¥åŠé€šä¿¡ç«¯å£ â€“initial-cluster-token ETCD_INITIAL_CLUSTER_TOKEN å®šä¹‰etcdä¸­çš„tokenï¼Œæ‰€æœ‰èŠ‚ç‚¹çš„tokenå¿…é¡»ä¿æŒä¸€è‡´ â€“initial-cluster-state ETCD_INITIAL_CLUSTER_STATE å®šä¹‰etcdé›†ç¾¤çš„çŠ¶æ€ï¼Œnewä»£è¡¨æ–°å»ºé›†ç¾¤ï¼Œexistingä»£è¡¨åŠ å…¥ç°æœ‰é›†ç¾¤ 4.2 åˆ›å»ºæ•°æ®ç›®å½•å…ˆåˆ›å»ºetcdé»˜è®¤çš„é…ç½®æ–‡ä»¶ç›®å½•å’Œæ•°æ®ç›®å½•mkdir -p /var/lib/etcd/å®‰è£…åˆ°/optç›®å½•ï¼Œåç»­çš„k8sé›†ç¾¤ç»„ä»¶æˆ‘ä»¬å°†éƒ½å®‰è£…åœ¨æ­¤# è§£å‹tar -zxvf etcd-v3.5.18-linux-amd64.tar.gz# å°†etcç§»åˆ°/optç›®å½•ï¼Œå¹¶ä¿®æ”¹etcdç›®å½•åmv etcd-v3.5.18-linux-amd64/ /opt/etcd-v3.5.18# åˆ›å»ºetcdè½¯é“¾æ¥ln -s /opt/etcd-v3.5.18 /opt/etcd4.3 åˆ›å»ºetcdå¯åŠ¨è„šæœ¬æˆ‘ä»¬å…ˆåœ¨etcdç›®å½•ç¼–å†™å¯åŠ¨è„šæœ¬/opt/etcd/startup.shï¼Œå¦‚ä¸‹#!/bin/bash./etcd \\ --name=\"etcd-server-101\" \\ --data-dir=\"/var/lib/etcd/\" \\ --listen-peer-urls=\"https://192.168.122.101:2380\" \\ --listen-client-urls=\"https://192.168.122.101:2379,http://127.0.0.1:2379\" \\ --initial-advertise-peer-urls=\"https://192.168.122.101:2380\" \\ --advertise-client-urls=\"https://192.168.122.101:2379\" \\ --initial-cluster=\"etcd-server-101=https://192.168.122.101:2380,etcd-server-102=https://192.168.122.102:2380,etcd-server-103=https://192.168.122.103:2380\" \\ --initial-cluster-token=\"etcd-cluster\" \\ --initial-cluster-state=\"new\" \\ --cert-file=\"/etc/kubernetes/pki/etcd.pem\" \\ --key-file=\"/etc/kubernetes/pki/etcd-key.pem\" \\ --trusted-ca-file=\"/etc/kubernetes/pki/ca.pem\" \\ --peer-cert-file=\"/etc/kubernetes/pki/etcd.pem\" \\ --peer-key-file=\"/etc/kubernetes/pki/etcd-key.pem\" \\ --peer-trusted-ca-file=\"/etc/kubernetes/pki/ca.pem\" \\ --peer-client-cert-auth \\ --client-cert-authç»™å¯åŠ¨è„šæœ¬æ·»åŠ æƒé™chmod +x /opt/etcd/startup.sh4.4 ä½¿ç”¨supervisoræ¥å¯åŠ¨etcdç°åœ¨æˆ‘ä»¬è¦å®‰è£…supervisorï¼Œç”¨äºç®¡ç†etcdæœåŠ¡ï¼Œåç»­çš„k8sç›¸å…³ç»„ä»¶ï¼Œæˆ‘ä»¬éƒ½ç”¨supervisoræ¥ç®¡ç†# å®‰è£…supervisorapt install supervisor -y# å¯åŠ¨supervisorsystemctl start supervisor# è®©superivisorå¼€æœºè‡ªå¯systemctl enable supervisoræ·»åŠ etcdçš„supervisorè¿›ç¨‹ç»´æŠ¤è„šæœ¬/etc/supervisor/conf.d/etcd-server.confï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹[program:etcd-server-101]directory=/opt/etcdcommand=/opt/etcd/startup.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/etcd.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=false æ³¨æ„ï¼šåœ¨ä¸åŒçš„ä¸»æœºä¸Šä½¿ç”¨ä¸åŒçš„æœåŠ¡åç§°ï¼Œè¿™æ ·å¥½è¾¨åˆ«ï¼Œå¦‚k8s-101ä½¿ç”¨etcd-server-101ï¼Œå¦‚k8s-102ä½¿ç”¨etcd-server-102supervisorç›¸å…³å‚æ•°ï¼š program: ç¨‹åºåç§° directory: è„šæœ¬ç›®å½• command: å¯åŠ¨çš„å‘½ä»¤ numprocs: å¯åŠ¨çš„è¿›ç¨‹æ•° autostart: æ˜¯å¦å¼€å¯è‡ªåŠ¨å¯åŠ¨ autorestart: æ˜¯å¦è‡ªåŠ¨é‡å¯ startsecs: å¯åŠ¨ä¹‹åå¤šå°‘æ—¶é—´ååˆ¤å®šä¸ºå·²èµ·æ¥ startretries: é‡å¯æ¬¡æ•° exitcodes: é€€å‡ºçš„code stopsignal: åœæ­¢ä¿¡å· stopwaitsecs: åœæ­¢ç­‰å¾…çš„æ—¶é—´ redirect_stderr: æ˜¯å¦é‡å®šå‘æ ‡å‡†è¾“å‡º stdout_logfile: è¿›ç¨‹æ ‡å‡†è¾“å‡ºå†…å®¹å†™å…¥æ–‡ä»¶ stdout_logfile_maxbytes: stdout_logfileæ–‡ä»¶åšlogæ»šåŠ¨æ—¶ï¼Œå•ä¸ªstdout_logfileæ–‡ä»¶çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œé»˜è®¤50Mï¼Œè®¾ç½®ä¸º0åˆ™è®¤ä¸ºä¸åšlogæ»šåŠ¨æ–¹å¼ stdout_logfile_backups: stdout_logfileå¤‡ä»½æ–‡ä»¶ä¸ªæ•°ï¼Œé»˜è®¤ä¸º10 stdout_capture_maxbytes: å½“è¿›ç¨‹å¤„äºstdout capture modeæ¨¡å¼çš„æ—¶å€™ï¼Œå†™å…¥capture FIFOçš„æœ€å¤§å­—èŠ‚æ•°é™åˆ¶ï¼Œé»˜è®¤ä¸º0ï¼Œæ­¤æ—¶è®¤ä¸ºstdout capture modeæ¨¡å¼å…³é—­ stdout_event_enabled: å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåœ¨è¿›ç¨‹å†™å…¥æ ‡å‡†æ–‡ä»¶æ˜¯ä¼šå‘èµ·PROCESS_LOG_STDOUTæ›´æ–°supervisodé…ç½®æ–‡ä»¶# åˆ›å»ºsupervisoræ—¥å¿—ç›®å½•mkdir -p /data/logs/supervisor/# æ›´æ–°supervisodé…ç½®supervisorctl updateé€šè¿‡supervisorctl statusæŸ¥è¯¢supervisordçŠ¶æ€ï¼Œçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼Œä»£è¡¨supervisoræ­£å¸¸è¿è¡Œroot@debian:/opt/etcd# supervisorctl statusetcd-server-101 RUNNING pid 85297, uptime 0:04:38æ­¤æ—¶ï¼Œæˆ‘ä»¬å†ä½¿ç”¨netstat -luntp | grep etcdæŸ¥çœ‹ç½‘ç»œæœåŠ¡ç«¯å£ï¼Œçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ä»£è¡¨etcdå·²ç»æ­£å¸¸å¯åŠ¨root@debian:/opt/etcd# netstat -luntp | grep etcdtcp 0 0 192.168.122.101:2379 0.0.0.0:* LISTEN 85298/./etcdtcp 0 0 127.0.0.1:2379 0.0.0.0:* LISTEN 85298/./etcdtcp 0 0 192.168.122.101:2380 0.0.0.0:* LISTEN 85298/./etcd4.5 é›†ç¾¤éªŒè¯ä¸ºäº†æ–¹ä¾¿ç›´æ¥è°ƒç”¨etcdctlå‘½ä»¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ›å»ºå…¶è½¯è¿æ¥ln -s /opt/etcd/etcdctl /usr/local/bin/etcdctlæˆ‘ä»¬åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨etcdctlå‘½ä»¤æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦ç¡®åˆ‡æŒ‡å®šè¯ä¹¦çš„ä½ç½®etcdctl --cacert=\"/etc/kubernetes/pki/ca.pem\" --cert=\"/etc/kubernetes/pki/etcd.pem\" --key=\"/etc/kubernetes/pki/etcd-key.pem\" --endpoints=\"https://192.168.122.101:2379,https://192.168.122.102:2379,https://192.168.122.103:2379\" endpoint status --write-out=tableå¦‚æœçœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼Œä»£è¡¨ ectd é›†ç¾¤æ­å»ºæˆåŠŸ+------------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+| ENDPOINT | ID | VERSION | DB SIZE | IS LEADER | IS LEARNER | RAFT TERM | RAFT INDEX | RAFT APPLIED INDEX | ERRORS |+------------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+| https://192.168.122.101:2379 | c8815bb4b21730b3 | 3.5.18 | 311 kB | true | false | 3 | 37628 | 37628 | || https://192.168.122.102:2379 | f30299e8a0b43b4d | 3.5.18 | 311 kB | false | false | 3 | 37628 | 37628 | || https://192.168.122.103:2379 | 61c90f737ccf2682 | 3.5.18 | 311 kB | false | false | 3 | 37628 | 37628 | |+------------------------------+------------------+---------+---------+-----------+------------+-----------+------------+--------------------+--------+ä¸ºäº†éªŒè¯etcdé›†ç¾¤æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç°åœ¨k8s-101è®¾ç½®ä¸€ä¸ªå€¼ï¼Œå¦‚ä¸‹etcdctl put name lixiaoming123å†é€šè¿‡k8s-102å’Œk8s-103å»è¯»å–å€¼ï¼Œå¦‚æœæ­£å¸¸å–åˆ°ï¼Œä»£è¡¨etcdé›†ç¾¤æ­£å¸¸å·¥ä½œï¼Œå¦‚ä¸‹å‘½ä»¤etcdctl get nameå¦‚æœéœ€è¦äº†è§£etcdctlè¿™ä¸ªæŒ‡ä»¤çš„æ›´å¤šç”¨æ³•ï¼Œä½¿ç”¨--helpå‚æ•°å³å¯æŸ¥çœ‹ã€‚å°†kubernetesäºŒè¿›åˆ¶å®‰è£…åŒ…è§£å‹åˆ°ç³»ç»Ÿä¸­åœ¨æ’°å†™è¿™ä¸ªæ–‡æ¡£æ—¶ï¼Œkubernetesæœ€æ–°ç¨³å®šç‰ˆæœ¬ä¸ºv1.32.2ï¼Œæ‰€ä»¥è¿™é‡Œä¹Ÿé‡‡ç”¨è¿™ä¸ªç‰ˆæœ¬ã€‚é€šè¿‡ https://kubernetes.io/zh-cn/releases/ ä¸‹è½½æœ€æ–°çš„å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç¨³å®šç‰ˆæœ¬ã€‚æˆ‘ä»¬ä¸‹è½½å¥½å¯¹åº”çš„ â€œServer Binarieâ€ ä¹‹åï¼Œåœ¨æ‰€æœ‰k8sä¸»æœºä¸Šæ‰§è¡Œå®‰è£…ï¼Œå¦‚ä¸‹æ­¥éª¤# è§£å‹å®‰è£…åŒ…tar -zxvf kubernetes-server-linux-amd64.tar.gz# å°†å®‰è£…åŒ…ç§»åˆ°/optç›®å½•ä¸‹å¹¶æ ¹æ®ç‰ˆæœ¬é‡å‘½åmv kubernetes /opt/kubernetes-v1.32.2# åˆ›å»ºè½¯è¿æ¥ln -s /opt/kubernetes-v1.32.2/ /opt/kubernetesåœ¨k8säºŒè¿›åˆ¶å®‰è£…ç›®å½•é‡ŒåŒ…å«äº†k8sæºç åŒ…ï¼Œè¿˜åŒ…å«k8sæ ¸å¿ƒç»„ä»¶çš„dockeré•œåƒï¼Œå› ä¸ºæˆ‘ä»¬çš„æ ¸å¿ƒæœåŠ¡ä¸è¿è¡Œåœ¨å®¹å™¨é‡Œï¼Œæ‰€ä»¥å¯ä»¥åˆ é™¤æ‰ï¼Œæ“ä½œè¿‡ç¨‹å¦‚ä¸‹# è¿›å…¥k8sç›®å½•cd /opt/kubernetes# åˆ é™¤æºä»£ç rm kubernetes-src.tar.gz# åˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•ä¸‹ä»¥tarä½œä¸ºåç§°åç¼€çš„dockeré•œåƒåŒ…rm -rf server/bin/*.tarå®‰è£…apiserveræ­å»ºå¥½etcdæ•°æ®åº“é›†ç¾¤ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å®‰è£…apiserverç»„ä»¶äº†ï¼Œåœ¨æ‰€æœ‰ä¸»æœºä¸Šå®‰è£…apiserverï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„å®‰è£…è¿‡ç¨‹ã€‚6.1 åˆ›å»ºkubeletæˆæƒç”¨æˆ·å› ä¸ºåé¢è¦é…ç½®kubeletçš„bootstrapè®¤è¯ï¼Œå³kubeletå¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºCSRè¯·æ±‚ï¼Œè¿™é‡Œéœ€è¦åœ¨apiserverä¸Šå¼€å¯tokençš„è®¤è¯ã€‚æ‰€ä»¥å…ˆåœ¨masterä¸Šç”Ÿæˆä¸€ä¸ªéšæœºå€¼ä½œä¸ºtokenã€‚ä¸‹é¢åœ¨ä¸€å°ä¸»æœºæ“ä½œå³å¯# åˆ›å»ºè¯ä¹¦ç›®å½•openssl rand -hex 10å‡è®¾ç”Ÿæˆçš„tokenä¸º88c916f382dc619a6bcaï¼ŒæŠŠè¿™ä¸ªtokenå†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™é‡Œå†™å…¥åˆ° /etc/kubernetes/bb.csvï¼Œå¦‚ä¸‹cat &gt; /etc/kubernetes/bb.csv &lt;&lt;EOF88c916f382dc619a6bca,kubelet-bootstrap,10001,\"system:node-bootstrapper\"EOFè¿™é‡Œç¬¬äºŒåˆ—å®šä¹‰äº†ä¸€ä¸ªç”¨æˆ·åkubelet-bootstrapï¼Œåé¢åœ¨é…ç½®kubeletæ—¶ä¼šä¸ºæ­¤ç”¨æˆ·æˆæƒã€‚åˆ›å»ºå¥½è¯¥æ–‡ä»¶åï¼ŒåŒæ­¥åˆ°å…¶ä»–ä¸»æœºã€‚6.2 å¯åŠ¨apiseræœåŠ¡6.2.1 åˆ›å»ºå¯åŠ¨è„šæœ¬åœ¨apiserveräºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•åˆ›å»º/opt/kubernetes/server/bin/kube-apiserver.shå¯åŠ¨è„šæœ¬æ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹#!/bin/bash./kube-apiserver \\ --v=2 \\ --logtostderr=true \\ --allow-privileged=true \\ --bind-address=\"192.168.122.101\" \\ --secure-port=\"6443\" \\ --token-auth-file=\"/etc/kubernetes/bb.csv\" \\ --advertise-address=\"192.168.122.101\" \\ --service-cluster-ip-range=\"10.96.0.0/16\" \\ --service-node-port-range=\"30000-60000\" \\ --etcd-servers=\"https://192.168.122.101:2379,https://192.168.122.102:2379,https://192.168.122.103:2379\" \\ --etcd-cafile=\"/etc/kubernetes/pki/ca.pem\" \\ --etcd-certfile=\"/etc/kubernetes/pki/etcd.pem\" \\ --etcd-keyfile=\"/etc/kubernetes/pki/etcd-key.pem\" \\ --client-ca-file=\"/etc/kubernetes/pki/ca.pem\" \\ --tls-cert-file=\"/etc/kubernetes/pki/apiserver.pem\" \\ --tls-private-key-file=\"/etc/kubernetes/pki/apiserver-key.pem\" \\ --kubelet-client-certificate=\"/etc/kubernetes/pki/apiserver.pem\" \\ --kubelet-client-key=\"/etc/kubernetes/pki/apiserver-key.pem\" \\ --service-account-key-file=\"/etc/kubernetes/pki/ca-key.pem\" \\ --service-account-signing-key-file=\"/etc/kubernetes/pki/ca-key.pem\" \\ --service-account-issuer=\"https://kubernetes.default.svc.cluster.local\" \\ --kubelet-preferred-address-types=\"InternalIP,ExternalIP,Hostname\" \\ --enable-admission-plugins=\"NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,ResourceQuota\" \\ --authorization-mode=\"Node,RBAC\" \\ --enable-bootstrap-token-auth=true #--requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.pem \\ #--proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.pem \\ #--proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client-key.pem \\ #--requestheader-allowed-names=aggregator \\ #--requestheader-group-headers=X-Remote-Group \\ #--requestheader-extra-headers-prefix=X-Remote-Extra- \\ #--requestheader-username-headers=X-Remote-Userèµ‹äºˆæ‰§è¡Œæƒé™chmod +x /opt/kubernetes/server/bin/kube-apiserver.shä¸Šé¢æ³¨é‡Šçš„éƒ¨åˆ†æ˜¯é…ç½®èšåˆå±‚çš„ï¼Œæœ¬ç¯å¢ƒé‡Œæ²¡æœ‰å¯ç”¨èšåˆå±‚æ‰€ä»¥è¿™äº›é€‰é¡¹è¢«æ³¨é‡Šäº†ï¼Œå¦‚æœé…ç½®äº†èšåˆå±‚çš„è¯ï¼Œåˆ™éœ€è¦æŠŠ#å–æ¶ˆã€‚ç›¸å…³å‚æ•°è¯´æ˜ --vï¼šæ—¥å¿—è¾“å‡ºçº§åˆ« --logtostderrï¼šå°†è¾“å‡ºè®°å½•åˆ°æ ‡å‡†æ—¥å¿—ï¼Œè€Œä¸æ˜¯æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯true --allow-privilegedï¼šæ˜¯å¦ä½¿ç”¨è¶…çº§ç®¡ç†å‘˜æƒé™åˆ›å»ºå®¹å™¨ï¼Œé»˜è®¤ä¸ºfalse --bind-addressï¼šç»‘å®šçš„IPåœ°å€ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåœ°å€ï¼ˆ0.0.0.0æˆ–è€…::ï¼‰ï¼Œé»˜è®¤æ˜¯ 0.0.0.0ï¼Œä»£è¡¨æ‰€æœ‰çš„ç½‘å¡éƒ½åœ¨ç›‘å¬æœåŠ¡ --secure-portï¼šå‚æ•°æŒ‡å®šçš„ç«¯å£å·å¯¹åº”ç›‘å¬çš„IPåœ°å€ --token-auth-fileï¼šè¯¥æ–‡ä»¶ç”¨äºæŒ‡å®šapi-serveré¢å‘è¯ä¹¦çš„tokenæˆæƒ --advertise-addressï¼šå‘é›†ç¾¤å¹¿æ’­çš„ipåœ°å€ï¼Œè¿™ä¸ªipåœ°å€å¿…é¡»èƒ½è¢«é›†ç¾¤çš„å…¶ä»–èŠ‚ç‚¹è®¿é—®ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œå°†ä½¿ç”¨â€“bind-addressï¼Œå¦‚æœä¸æŒ‡å®šâ€“bind-addresï¼Œå°†ä½¿ç”¨é»˜è®¤ç½‘å¡ --service-cluster-ip-rangeï¼šåˆ›å»ºserviceæ—¶ï¼Œä½¿ç”¨çš„è™šæ‹Ÿç½‘æ®µ --service-node-port-rangeï¼šåˆ›å»ºserviceæ—¶ï¼ŒæœåŠ¡ç«¯å£ä½¿ç”¨çš„ç«¯å£èŒƒå›´ï¼ˆé»˜è®¤ 30000-32767ï¼‰ --etcd-cafileï¼šè®¿é—®etcdæ—¶ä½¿ç”¨ï¼Œectdçš„caæ–‡ä»¶ --etcd-certfileï¼šè®¿é—®etcdæ—¶ä½¿ç”¨ï¼Œectdçš„è¯ä¹¦æ–‡ä»¶ --etcd-serversï¼šå„ä¸ªetcdèŠ‚ç‚¹çš„IPå’Œç«¯å£å· --etcd-keyfileï¼šè®¿é—®etcdæ—¶ä½¿ç”¨ï¼Œectdçš„è¯ä¹¦ç§é’¥æ–‡ä»¶ --client-ca-fileï¼šè®¿é—®apiserveræ—¶ä½¿ç”¨ï¼Œå®¢æˆ·ç«¯caæ–‡ä»¶ --tls-cert-fileï¼šè®¿é—®apiserveræ—¶ä½¿ç”¨ï¼Œtlsè¯ä¹¦æ–‡ä»¶ --tls-private-key-fileï¼šè®¿é—®apiserveræ—¶ä½¿ç”¨ï¼Œtlsè¯ä¹¦ç§é’¥æ–‡ä»¶ --kubelet-client-certificateï¼šè®¿é—®kubeletæ—¶ä½¿ç”¨ï¼Œå®¢æˆ·ç«¯è¯ä¹¦è·¯å¾„ --kubelet-client-keyï¼šè®¿é—®kubeletæ—¶ä½¿ç”¨ï¼Œå®¢æˆ·ç«¯è¯ä¹¦ç§é’¥ --service-account-key-fileï¼šåŒ…å« PEM ç¼–ç çš„ x509 RSA æˆ– ECDSA ç§é’¥æˆ–å…¬é’¥ï¼Œç”¨æ¥æ£€æŸ¥ ServiceAccount çš„ä»¤ç‰Œ --service-account-signing-key-fileï¼šæŒ‡å‘åŒ…å«å½“å‰æœåŠ¡è´¦å·ä»¤ç‰Œå‘æ”¾è€…çš„ç§é’¥çš„æ–‡ä»¶è·¯å¾„ã€‚ æ­¤å‘æ”¾è€…ä½¿ç”¨æ­¤ç§é’¥æ¥ç­¾ç½²æ‰€å‘æ”¾çš„ ID ä»¤ç‰Œ --service-account-issuerï¼šæœåŠ¡è´¦æˆ·ä»¤ç‰Œå‘æ”¾è€…çš„èº«ä»½æ ‡è¯† --enable-admission-pluginsï¼šå…è®¸ä½¿ç”¨çš„æ’ä»¶ --authorization-modeï¼šæˆæƒæ¨¡å¼ --enable-bootstrap-token-authï¼šæ˜¯å¦ä½¿ç”¨tokençš„æ–¹å¼æ¥è‡ªåŠ¨é¢å‘è¯ä¹¦ï¼Œå¦‚æœä¸»æœºèŠ‚ç‚¹æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæ‰‹åŠ¨é¢å‘è¯ä¹¦å¯èƒ½ä¸å¤ªç°å®ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºtokençš„æ–¹å¼è‡ªåŠ¨é¢å‘è¯ä¹¦ä»¥ä¸Šæ˜¯æˆ‘ä»¬åœ¨å¯åŠ¨apiserverçš„æ—¶å€™å¸¸ç”¨çš„å‚æ•°ï¼Œapiserverå…·æœ‰å¾ˆå¤šå‚æ•°ï¼Œå¾ˆå¤šå‚æ•°ä¹Ÿæœ‰é»˜è®¤å€¼ï¼Œå¯ä»¥./kube-apiserver --hepå‘½ä»¤æŸ¥çœ‹æ›´å¤šçš„å¸®åŠ©ã€‚6.2.2 ä½¿ç”¨supervisorè¿è¡Œåˆ›å»ºsupervisoré…ç½®æ–‡ä»¶/etc/supervisor/conf.d/kube-apiserver.conf[program:kube-apiserver-160]directory=/opt/kubernetes/server/bincommand=/opt/kubernetes/server/bin/kube-apiserver.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/apiserver.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=falseæ›´æ–°supervisoræœåŠ¡supervisorctl updateå†ä½¿ç”¨supervisorctl statuså‘½ä»¤æŸ¥çœ‹apiserverå¯åŠ¨çŠ¶æ€ï¼Œå¦‚æœæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼Œä»£è¡¨æ­£å¸¸æœåŠ¡æ­¤æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨netstat -luntp | grep kube-apiå‘½ä»¤æŸ¥çœ‹ç½‘ç»œæœåŠ¡çš„ç«¯å£æ˜¯å¦æ­£å¸¸ï¼Œå¦‚æœæ­£å¸¸ï¼Œå°†è¿”å›å¦‚ä¸‹å†…å®¹æ­å»ºL4å±‚è´Ÿè½½å‡è¡¡è´Ÿè½½å‡è¡¡æ˜¯ç½‘ç»œå±‚çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå°†è¯·æ±‚åˆ†å‘åˆ°åç«¯æœåŠ¡å™¨ï¼Œä»è€Œå®ç°é«˜å¯ç”¨å’Œé«˜æ€§èƒ½ã€‚è´Ÿè½½å‡è¡¡å™¨é€šå¸¸åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼Œæ¯ä¸ªè´Ÿè½½å‡è¡¡å™¨è´Ÿè´£å°†è¯·æ±‚åˆ†å‘åˆ°åç«¯æœåŠ¡å™¨ã€‚è´Ÿè½½å‡è¡¡å™¨é€šå¸¸ä½¿ç”¨TCPæˆ–UDPåè®®è¿›è¡Œé€šä¿¡ï¼Œå¹¶é€šè¿‡ç½‘ç»œå±‚ï¼ˆå¦‚TCPæˆ–UDPï¼‰å°†è¯·æ±‚åˆ†å‘åˆ°åç«¯æœåŠ¡å™¨ã€‚è´Ÿè½½å‡è¡¡å™¨é€šå¸¸ä½¿ç”¨è½®è¯¢ã€æƒé‡ã€ä¼šè¯ä¿æŒç­‰åŠŸèƒ½æ¥ä¼˜åŒ–è¯·æ±‚åˆ†å‘ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨k8s-101å’Œk8s-102ä¸Šå®‰è£…nginxä½œä¸ºåå‘ä»£ç†æœåŠ¡ä¸”ä¸¤ä¸ªæœåŠ¡å®ç°è´Ÿè½½å‡è¡¡ï¼Œå†ä½¿ç”¨keepalivedä¿è¯é«˜å¯ç”¨æ€§7.1 å®‰è£…nginxk8s-101åœ¨å®‰è£…harboræ—¶å·²ç»å®‰è£…è¿‡ï¼Œéœ€è¦ç»§ç»­åœ¨k8s-102ä¸Šå®‰è£…# å®‰è£…ä¾èµ–apt install -y gcc make libpcre3-dev libssl-dev zlib1g-dev# ä¸‹è½½ä»£ç wget https://nginx.org/download/nginx-1.26.3.tar.gz# è§£å‹æ–‡ä»¶tar -zxvf nginx-1.26.3.tar.gz# è¿›å…¥æºç ç›®å½•cd nginx-1.26.3# é…ç½®ç¼–è¯‘å‚æ•°ï¼Œ--prefixå‚æ•°æŒ‡å®šå®‰è£…ç›®å½•./configure \\--prefix=/usr/local/nginx-1.26.3 \\--with-stream \\--with-http_stub_status_module \\--with-http_ssl_module --with-http_v2_module \\--error-log-path=/data/logs/nginx/error.log \\--http-log-path=/data/logs/nginx/access.log# ç¼–è¯‘å¹¶å®‰è£…make &amp;&amp; make install# è®¾ç½®é“¾æ¥ln -s /usr/local/nginx-1.26.3 /usr/local/nginxln -s /usr/local/nginx/sbin/nginx /usr/local/bin/nginx7.2 é…ç½®nginxå®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¸¤å°æœºçš„nginxçš„é…ç½®æ–‡ä»¶/usr/local/nginx/conf/nginx.confçš„httpèŠ‚ç‚¹æ—è¾¹æ·»åŠ å››å±‚åå‘ä»£ç è§„åˆ™ï¼Œå°†7443ç«¯å£çš„æµé‡ä½¿ç”¨è´Ÿè½½å‡è¡¡çš„æ–¹å¼è½¬å‘åˆ°3å°ä¸»æœºçš„6443ç«¯å£ä¸Š# è®¾ç½®ä»£ç†è§„åˆ™stream { upstream kube-apiserver { server 192.168.122.101:6443 max_fails=3 fail_timeout=30s; server 192.168.122.102:6443 max_fails=3 fail_timeout=30s; server 192.168.122.103:6443 max_fails=3 fail_timeout=30s; } server { listen 7443; proxy_connect_timeout 2s; proxy_timeout 900s; proxy_pass kube-apiserver; }}åœ¨ä¸¤å°ä¸»æœºä¸Šé…ç½®å¥½è§„åˆ™ä¹‹åï¼Œé€šè¿‡nginx -tå‘½ä»¤æ£€æŸ¥é…ç½®ç»“æœï¼Œå¦‚æœè¾“å‡ºä»¥ä¸‹å†…å®¹ä»£è¡¨é…ç½®æ­£ç¡®nginx: the configuration file /etc/nginx/nginx.conf syntax is oknginx: configuration file /etc/nginx/nginx.conf test is successfulé…ç½®æˆåŠŸä¹‹åï¼Œå¯åŠ¨nginxï¼Œå¦‚ä¸‹æŒ‡ä»¤# å¯åŠ¨ginxï¼Œk8s-101ä¸»æœºä½¿ç”¨ nginx -s reloadé‡æ–°åŠ è½½é…ç½®å³å¯nginxè¦è®©ä½ æ‰‹åŠ¨ç¼–è¯‘å®‰è£…çš„ Nginx å®ç°å¼€æœºè‡ªå¯ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼æ¥å®Œæˆï¼ˆåŸºäºå¸¸è§çš„ Linux ç³»ç»Ÿï¼Œå¦‚ Ubuntuã€CentOS ç­‰ï¼‰ã€‚7.3 ä½¿ç”¨systemdè®¾ç½®nginxå¼€æœºè‡ªå¯ åˆ›å»º Nginx çš„ Systemd æœåŠ¡æ–‡ä»¶åœ¨ /etc/systemd/system/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª nginx.service æ–‡ä»¶ï¼švim /etc/systemd/system/nginx.service æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°æœåŠ¡æ–‡ä»¶ä¸­[Unit]Description=The NGINX HTTP and reverse proxy serverAfter=network.target[Service]ExecStart=/usr/local/nginx/sbin/nginxExecReload=/usr/local/nginx/sbin/nginx -s reloadExecStop=/usr/local/nginx/sbin/nginx -s quitPIDFile=/usr/local/nginx/logs/nginx.pidRestart=on-failureType=forking[Install]WantedBy=multi-user.target ä¿å­˜å¹¶åˆ·æ–° systemd é…ç½®systemctl daemon-reload è®¾ç½® Nginx å¼€æœºè‡ªå¯å¹¶ç«‹å³å¯åŠ¨systemctl enable nginx --now7.4 å®‰è£…keepalivedKeepalived çš„è™šæ‹Ÿ IP é€šè¿‡ VRRP åè®®åœ¨å¤šä¸ªæœåŠ¡å™¨é—´åˆ‡æ¢ï¼Œç¡®ä¿æœåŠ¡é«˜å¯ç”¨æ€§å’Œè´Ÿè½½å‡è¡¡ã€‚è¿™ä¸ªè™šæ‹Ÿ IP æ˜¯ Keepalived é…ç½®çš„ IP åœ°å€ï¼Œä¸å±äºä»»ä½•ç‰¹å®šæœåŠ¡å™¨ï¼Œè€Œæ˜¯ç”±ä¸»æœåŠ¡å™¨æŒæœ‰ï¼Œä¸»æœåŠ¡å™¨æ•…éšœæ—¶åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡å™¨ã€‚æˆ‘ä»¬å°†ä½¿ç”¨keepalivedå®ç°ä»£ç†æœåŠ¡å™¨çš„é«˜å¯ç”¨ï¼Œä»¥ä¸‹æ˜¯å®‰è£…è¿‡ç¨‹apt install keepalived -yåœ¨ä¸¤å°ä¸»æœºçš„åˆ›å»º/etc/keepalived/check_port.shè„šæœ¬æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹#!/bin/bashCHK_PORT=$1if [ -n \"$CHK_PORT\" ]; then PORT_PROCESS=`ss -lnt|grep $CHK_PORT|wc -l` if [ $PORT_PROCESS -eq 0 ]; then echo \"Port $CHK_PORT Is Not Used, End\" exit 1 fielse echo \"Check Port Cant Be Empty!\" exit 1fiæ·»åŠ æ‰§è¡Œæƒé™chmod +x /etc/keepalived/check_port.shä»¥ä¸Šçš„æ“ä½œå°±å‡†å¤‡å¥½keepalivedçš„åŸºç¡€ç¯å¢ƒäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨k8s-101è¿™å°ä¸»æœºä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œä½¿ç”¨k8s-102ä½œä¸ºé‡èŠ‚ç‚¹ï¼Œè¿›è¡Œä»¥ä¸‹é…ç½®k8s-101ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œä¿®æ”¹/etc/keepalived/keepalived.confé…ç½®æ–‡ä»¶å¦‚ä¸‹! Configuration File for keepalived# å…¨å±€é…ç½®global_defs { router_id 192.168.122.101 # å½“å‰æœåŠ¡å™¨çš„å”¯ä¸€æ ‡è¯†ï¼Œé€šå¸¸ç”¨ IP åœ°å€æˆ–ä¸»æœºå}# å®šä¹‰å¥åº·æ£€æŸ¥è„šæœ¬vrrp_script check_nginx { script \"/etc/keepalived/check_port.sh 7443\" # æ£€æŸ¥ç«¯å£ 7443 æ˜¯å¦åœ¨ç›‘å¬çš„è„šæœ¬ interval 2 # æ¯éš” 2 ç§’æ‰§è¡Œä¸€æ¬¡è„šæœ¬ weight -20 # å¦‚æœè„šæœ¬æ£€æŸ¥å¤±è´¥ï¼Œå½“å‰æœåŠ¡å™¨çš„ä¼˜å…ˆçº§é™ä½ 20}# å®šä¹‰ä¸€ä¸ª VRRP å®ä¾‹vrrp_instance VI_1 { state MASTER # å½“å‰æœåŠ¡å™¨çš„åˆå§‹çŠ¶æ€æ˜¯ MASTERï¼ˆä¸»æœåŠ¡å™¨ï¼‰ interface enp1s0 # ç»‘å®šè™šæ‹Ÿ IP çš„ç½‘ç»œæ¥å£ virtual_router_id 251 # VRRP å®ä¾‹çš„å”¯ä¸€ IDï¼ŒèŒƒå›´æ˜¯ 1-255 priority 100 # å½“å‰æœåŠ¡å™¨çš„ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ advert_int 1 # æ¯éš” 1 ç§’å‘é€ä¸€æ¬¡ VRRP é€šå‘Š mcast_src_ip 192.168.122.101 # å‘é€ VRRP é€šå‘Šçš„æº IP åœ°å€ nopreempt # å¦‚æœä¸»æœåŠ¡å™¨æŒ‚äº†åˆæ¢å¤ï¼Œä¸ä¼šæŠ¢å è™šæ‹Ÿ IP # è®¤è¯é…ç½® authentication { auth_type PASS # è®¤è¯ç±»å‹ä¸ºå¯†ç è®¤è¯ auth_pass 1111 # è®¤è¯å¯†ç  } # è™šæ‹Ÿ IP åœ°å€é…ç½® virtual_ipaddress { 192.168.122.100 # è™šæ‹Ÿ IP åœ°å€ï¼Œä¸»æœåŠ¡å™¨ä¼šæŒæœ‰è¿™ä¸ª IP }}k8s-102ä½œä¸ºä»èŠ‚ç‚¹ï¼Œä¿®æ”¹/etc/keepalived/keepalived.confé…ç½®æ–‡ä»¶å¦‚ä¸‹! Configuration File for keepalivedglobal_defs { router_id 192.168.122.102}vrrp_script check_nginx { script \"/etc/keepalived/check_port.sh 7443\" interval 2 weight -20}vrrp_instance VI_1 { state BACKUP interface enp1s0 virtual_router_id 251 priority 90 advert_int 1 mcast_src_ip 192.168.122.101 nopreempt authentication { auth_type PASS auth_pass 1111 } virtual_ipaddress { 192.168.122.100 }}å¯åŠ¨æœåŠ¡# é‡å¯æœåŠ¡systemctl restart keepalived# è®¾ç½®æœåŠ¡ä¸ºå¼€æœºè‡ªå¯systemctl enable keepalivedéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œinterfaceå‚æ•°å¯¹åº”çš„æ˜¯çœŸå®çš„ä¸»æœºç½‘å¡åç§°ï¼Œvirtual_router_idå‚æ•°éœ€è¦åœ¨åŒä¸€ä¸ªè™šæ‹ŸIPçš„å‰æä¸‹ï¼Œè®¾ç½®éœ€ä¸ä¸»æœºä¸€ä¸ªç½‘æ®µçš„IPã€‚7.5 éªŒè¯é€šè¿‡ping 192.168.122.100çš„æ–¹å¼è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœæœ‰æ­£å¸¸è¿”å›ï¼Œä»£è¡¨keepalivedè¿è¡Œæ­£å¸¸ã€‚ä¸ºäº†éªŒè¯ Keepalived çš„é«˜å¯ç”¨æ€§ï¼Œå¯ä»¥æ‰‹åŠ¨æ¨¡æ‹Ÿä¸»æœåŠ¡å™¨æ•…éšœï¼Œè§‚å¯Ÿè™šæ‹Ÿ IP æ˜¯å¦åˆ‡æ¢åˆ°å¤‡ç”¨æœåŠ¡å™¨ã€‚ ï¼ˆ1ï¼‰åœæ­¢ä¸»æœåŠ¡å™¨çš„ Keepalived æœåŠ¡åœ¨ä¸»æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼šsystemctl stop keepalived ï¼ˆ2ï¼‰æ£€æŸ¥å¤‡ç”¨æœåŠ¡å™¨çš„è™šæ‹Ÿ IPåœ¨å¤‡ç”¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼šip addr showæ£€æŸ¥è™šæ‹Ÿ IP æ˜¯å¦ç»‘å®šåˆ°å¤‡ç”¨æœåŠ¡å™¨çš„ç½‘å¡ã€‚ ï¼ˆ3ï¼‰æ¢å¤ä¸»æœåŠ¡å™¨çš„ Keepalived æœåŠ¡åœ¨ä¸»æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼šsystemctl start keepalivedå†æ¬¡æ£€æŸ¥è™šæ‹Ÿ IP æ˜¯å¦åˆ‡æ¢å›ä¸»æœåŠ¡å™¨ã€‚å¦‚æœä»¥ä¸Šæ“ä½œæ­£å¸¸ï¼Œåˆ™è¯´æ˜ Keepalived çš„é«˜å¯ç”¨æ€§å·²ç»å®ç°ï¼Œå¦åˆ™éœ€è¦æ£€æŸ¥å®‰è£…è¿‡ç¨‹ä»¥åŠ Keepalived çš„é…ç½®æ–‡ä»¶ï¼Œç¡®ä¿æ‰€æœ‰å‚æ•°è®¾ç½®æ­£ç¡®ã€‚å®‰è£…controller-manager8.1 åˆ›å»ºkubectlé“¾æ¥kubectl æ˜¯k8sçš„ç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ï¼Œå¦‚ä¸‹ln -s /opt/kubernetes/server/bin/kubectl /usr/local/bin/kubectl8.2 å®‰è£…controller-manager8.2.1 åˆ›å»ºé…ç½®controller-manager å’Œ apiserver ä¹‹é—´çš„è®¤è¯æ˜¯é€šè¿‡ kubeconfig çš„æ–¹å¼æ¥è®¤è¯çš„ï¼Œå³ controller-manager çš„ç§é’¥ã€å…¬é’¥åŠCAçš„è¯ä¹¦è¦æ”¾åœ¨ä¸€ä¸ª kubeconfig æ–‡ä»¶é‡Œã€‚ä¸‹é¢åˆ›å»ºcontroller-manageræ‰€ç”¨çš„kubeconfigæ–‡ä»¶kube-controller-manager.kubeconfigï¼Œç°åœ¨åœ¨/etc/kubernetes/pkié‡Œåˆ›å»ºï¼Œç„¶åç§»åŠ¨åˆ°/etc/kubernetesé‡Œã€‚# è¿›å…¥è¯ä¹¦ç›®å½•cd /etc/kubernetes/pki/# è®¾ç½®é›†ç¾¤ä¿¡æ¯kubectl config set-cluster kubernetes --certificate-authority=ca.pem --embed-certs=true --server=https://192.168.122.100:7443 --kubeconfig=kube-controller-manager.kubeconfig# è®¾ç½®ç”¨æˆ·ä¿¡æ¯ï¼Œè¿™é‡Œç”¨æˆ·åæ˜¯system:kube-controller-manager ï¼Œä¹Ÿå°±æ˜¯å‰é¢controller-manager-csr.jsoné‡ŒCNæŒ‡å®šçš„ã€‚kubectl config set-credentials system:kube-controller-manager --client-certificate=controller-manager.pem --client-key=controller-manager-key.pem --embed-certs=true --kubeconfig=kube-controller-manager.kubeconfig# è®¾ç½®ä¸Šä¸‹æ–‡ä¿¡æ¯kubectl config set-context system:kube-controller-manager --cluster=kubernetes --user=system:kube-controller-manager --kubeconfig=kube-controller-manager.kubeconfig# è®¾ç½®é»˜è®¤çš„ä¸Šä¸‹æ–‡kubectl config use-context system:kube-controller-manager --kubeconfig=kube-controller-manager.kubeconfig# å°†ç”Ÿæˆçš„è¯ä¹¦ç§»åˆ°/etc/kubernetes/mv kube-controller-manager.kubeconfig /etc/kubernetes//etc/kubernetes/kube-controller-manager.kubeconfigé…ç½®æ–‡ä»¶åªéœ€ç”Ÿæˆä¸€æ¬¡ï¼Œå†ä¼ åˆ°å…¶ä»–ä¸»æœºå³å¯ã€‚8.2.2 åˆ›å»ºå¯åŠ¨è„šæœ¬åˆ›å»ºæ–‡ä»¶/opt/kubernetes/server/bin/kube-controller-manager.shï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹#!/bin/bash./kube-controller-manager \\ --v=2 \\ --logtostderr=true \\ --bind-address=127.0.0.1 \\ --root-ca-file=/etc/kubernetes/pki/ca.pem \\ --cluster-signing-cert-file=/etc/kubernetes/pki/ca.pem \\ --cluster-signing-key-file=/etc/kubernetes/pki/ca-key.pem \\ --service-account-private-key-file=/etc/kubernetes/pki/ca-key.pem \\ --kubeconfig=/etc/kubernetes/kube-controller-manager.kubeconfig \\ --leader-elect=true \\ --use-service-account-credentials=true \\ --node-monitor-grace-period=40s \\ --node-monitor-period=5s \\ --controllers=*,bootstrapsigner,tokencleaner \\ --allocate-node-cidrs=true \\ --cluster-cidr=10.244.0.0/16 \\ --node-cidr-mask-size=24æ·»åŠ æ‰§è¡Œæƒé™ä¸åˆ›å»ºæ—¥å¿—ç›®å½•# æ·»åŠ å¯æ‰§è¡Œæƒé™chmod +x /opt/kubernetes/server/bin/kube-controller-manager.shåˆ›å»ºsupervisorè„šæœ¬å¯åŠ¨ç®¡ç†æ–‡ä»¶/etc/supervisor/conf.d/kube-controller-manager.confï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹[program:kube-controller-manager-101]directory=/opt/kubernetes/server/bincommand=/opt/kubernetes/server/bin/kube-controller-manager.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/controller.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=falseæ›´æ–°supervisorsupervisorctl updateå®‰è£…scheduler9.1 åˆ›å»ºé…ç½®scheduler å’Œ apiserver ä¹‹é—´çš„è®¤è¯ä¹Ÿæ˜¯é€šè¿‡ kubeconfig çš„æ–¹å¼æ¥è®¤è¯çš„ï¼Œä¸‹é¢åˆ›å»º scheduler æ‰€ç”¨çš„ kubeconfig æ–‡ä»¶ kube-scheduler.kubeconfigï¼Œç°åœ¨åœ¨/etc/kubernetes/pkié‡Œåˆ›å»ºï¼Œç„¶åå‰ªåˆ‡åˆ°/etc/kubernetesé‡Œã€‚# è¿›å…¥è¯ä¹¦ç›®å½•cd /etc/kubernetes/pki/# è®¾ç½®é›†ç¾¤ä¿¡æ¯kubectl config set-cluster kubernetes --certificate-authority=ca.pem --embed-certs=true --server=https://192.168.122.100:7443 --kubeconfig=kube-scheduler.kubeconfig# è®¾ç½®ç”¨æˆ·ä¿¡æ¯kubectl config set-credentials system:kube-scheduler --client-certificate=scheduler.pem --client-key=scheduler-key.pem --embed-certs=true --kubeconfig=kube-scheduler.kubeconfig# è®¾ç½®ä¸Šä¸‹æ–‡ä¿¡æ¯kubectl config set-context system:kube-scheduler --cluster=kubernetes --user=system:kube-scheduler --kubeconfig=kube-scheduler.kubeconfig# è®¾ç½®é»˜è®¤çš„ä¸Šä¸‹æ–‡kubectl config use-context system:kube-scheduler --kubeconfig=kube-scheduler.kubeconfig# å‰ªåˆ‡åˆ°/etc/kubernetesmv kube-scheduler.kubeconfig /etc/kubernetes//etc/kubernetes/kube-scheduler.kubeconfigé…ç½®æ–‡ä»¶ä¹Ÿåªéœ€ç”Ÿæˆä¸€æ¬¡ï¼Œå†ä¼ åˆ°å…¶ä»–ä¸»æœºå³å¯ã€‚9.2 åˆ›å»ºå¯åŠ¨è„šæœ¬åˆ›å»ºscheluderå¯åŠ¨è„šæœ¬æ–‡ä»¶/opt/kubernetes/server/bin/kube-scheduler.shæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹#!/bin/bash./kube-scheduler \\ --v=2 \\ --bind-address=127.0.0.1 \\ --leader-elect=true \\ --kubeconfig=/etc/kubernetes/kube-scheduler.kubeconfigæ·»åŠ è„šæœ¬æ‰§è¡Œæƒé™ä¸åˆ›å»ºæ—¥å¿—ç›®å½•# æ·»åŠ è„šæœ¬çš„å¯æ‰§è¡Œæƒé™chmod +x /opt/kubernetes/server/bin/kube-scheduler.shåˆ›å»ºè¿›ç¨‹ç®¡ç†é…ç½®æ–‡ä»¶/etc/supervisor/conf.d/kube-scheduler.confæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹[program:kube-scheduler-101]directory=/opt/kubernetes/server/bincommand=/opt/kubernetes/server/bin/kube-scheduler.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/scheduler.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=falseæ›´æ–°supervisorsupervisorctl updateé›†ç¾¤éªŒè¯10.1 åˆ›å»ºç®¡ç†å‘˜é…ç½®åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·ç”¨çš„kubeconfigï¼Œæœ€åæ‹·è´ä¸º ~/.kube/config ä½œä¸ºé»˜è®¤çš„kubeconfigæ–‡ä»¶ã€‚# è¿›å…¥è¯ä¹¦ç›®å½•cd /etc/kubernetes/pki/# è®¾ç½®ä¸€ä¸ªé›†ç¾¤ä¿¡æ¯kubectl config set-cluster kubernetes --certificate-authority=ca.pem --embed-certs=true --server=https://192.168.122.100:7443 --kubeconfig=admin.conf# è®¾ç½®ç”¨æˆ·ä¿¡æ¯kubectl config set-credentials admin --client-certificate=admin.pem --client-key=admin-key.pem --embed-certs=true --kubeconfig=admin.conf# è®¾ç½®ä¸Šä¸‹æ–‡kubectl config set-context kubernetes --cluster=kubernetes --user=admin --kubeconfig=admin.conf# è®¾ç½®é»˜è®¤ä¸Šä¸‹æ–‡å¢ƒkubectl config use-context kubernetes --kubeconfig=admin.conf# ç§»åŠ¨mv admin.conf /etc/kubernetes/åˆ›å»ºå¥½ä¹‹ååŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œå†æ‹·è´é…ç½®æ–‡ä»¶åˆ°ç”¨æˆ·ç›®å½•ã€‚10.2 ä½¿ç”¨ç®¡ç†å‘˜é…ç½®mkdir -p ~/.kubecp /etc/kubernetes/admin.conf ~/.kube/configä½¿ç”¨kubectl get csæ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œè¿™æ—¶å€™ä½ ä¼šå‘ç°ç±»ä¼¼å¦‚ä¸‹çš„é”™è¯¯Error from server (Forbidden): Forbidden (user=admin, verb=get, resource=nodes, subresource=proxy)è¿™ä»£è¡¨æˆ‘ä»¬åˆ›å»ºçš„adminç”¨æˆ·æ²¡æœ‰é›†ç¾¤ç®¡ç†æƒé™ï¼Œç»‘å®šä¸€ä¸ªcluster-adminè§’è‰²å³å¯ï¼Œå¦‚ä¸‹å‘½ä»¤kubectl create clusterrolebinding system:anonymous --clusterrole=cluster-admin --user=adminæœ€åå†ä½¿ç”¨kubectl get csæŸ¥çœ‹é›†ç¾¤ï¼Œå¦‚è¿”å›ä»¥ä¸‹ç±»ä¼¼å†…å®¹ï¼Œåˆ™ä»£è¡¨é›†ç¾¤æ§åˆ¶èŠ‚ç‚¹çš„æœåŠ¡æ­£å¸¸root@k8s-101:~# kubectl get csWarning: v1 ComponentStatus is deprecated in v1.19+NAME STATUS MESSAGE ERRORscheduler Healthy okcontroller-manager Healthy oketcd-0 Healthy okä¸è¿‡è¿™ä¸ªå‘½ä»¤å°†æ¥å¯èƒ½ä¼šè¢«åºŸå¼ƒï¼Œç›®å‰ä¹Ÿå¯ä»¥ä½¿ç”¨ kubectl cluster-info å‘½ä»¤æŸ¥çœ‹ Kubernetes é›†ç¾¤çš„åŸºæœ¬ä¿¡æ¯ã€‚å®‰è£…kubelet11.1 åˆ›å»ºæˆæƒé…ç½®æ–‡ä»¶ä¸ºç”¨æˆ· kubelet-bootstrap æˆæƒï¼Œå…è®¸ kubelet tls bootstrap åˆ›å»º CSR è¯·æ±‚ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤kubectl create clusterrolebinding kubelet-bootstrap1 --clusterrole=system:node-bootstrapper --user=kubelet-bootstrapæŠŠ system:certificates.k8s.io:certificatesigningrequests:nodeclient æˆæƒç»™ kubelet-bootstrapï¼Œç›®çš„æ˜¯å®ç°å¯¹ CSR çš„è‡ªåŠ¨å®¡æ‰¹ï¼Œå¦‚ä¸‹å‘½ä»¤kubectl create clusterrolebinding kubelet-bootstrap2 --clusterrole=system:certificates.k8s.io:certificatesigningrequests:nodeclient --user=kubelet-bootstrapè¿™ä¸ªç”¨æˆ·åæ˜¯åœ¨é…ç½® apiserver æ—¶ç”¨åˆ°çš„tokenæ–‡ä»¶/etc/kubernetes/bb.csvé‡ŒæŒ‡å®šçš„ã€‚æœ€åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºå¯¹åº”æˆæƒé…ç½®æ–‡ä»¶# è¿›å…¥è¯ä¹¦ç›®å½•cd /etc/kubernetes/pki/# åˆ›å»ºé›†ç¾¤ä¿¡æ¯kubectl config set-cluster kubernetes --certificate-authority=ca.pem --embed-certs=true --server=https://192.168.122.100:7443 --kubeconfig=kubelet-bootstrap.conf# åˆ›å»ºç”¨æˆ·ä¿¡æ¯ï¼Œæ³¨æ„tokenæ˜¯ä¸Šé¢åˆ›å»ºçš„`bb.csv`é‡ŒæŒ‡å®šçš„tokenkubectl config set-credentials kubelet-bootstrap --token=e83b6b5f1d1dba4cf38a --kubeconfig=kubelet-bootstrap.conf# è®¾ç½®ä¸Šä¸‹æ–‡kubectl config set-context kubernetes --cluster=kubernetes --user=kubelet-bootstrap --kubeconfig=kubelet-bootstrap.conf# å¯ç”¨ä¸Šä¸‹æ–‡kubectl config use-context kubernetes --kubeconfig=kubelet-bootstrap.conf# å‰ªåˆ‡é…ç½®æ–‡ä»¶åˆ°/etc/kubernetesmv kubelet-bootstrap.conf /etc/kubernetes/ç”Ÿæˆé…ç½®æ–‡ä»¶/etc/kubernetes/kubelet-bootstrap.confä¹‹åï¼Œä¼ åˆ°å·¥ä½œèŠ‚ç‚¹ä¸­ï¼Œåœ¨è¿™é‡Œæ˜¯k8s-102å’Œk8s-103ã€‚11.2 åˆ›å»ºkubeleté…ç½®æ–‡ä»¶åˆ›å»º kubelet ç”¨åˆ°çš„é…ç½®æ–‡ä»¶ /etc/kubernetes/kubelet-config.yamlï¼Œåç»­ kubelet é…ç½®å¯åŠ¨æ–‡ä»¶éœ€è¦ç”¨åˆ°ï¼Œå†…å®¹å¦‚ä¸‹apiVersion: kubelet.config.k8s.io/v1beta1address: 0.0.0.0port: 10250readOnlyPort: 10255authentication: anonymous: enabled: false webhook: cacheTTL: 0s enabled: true x509: clientCAFile: /etc/kubernetes/pki/ca.pemauthorization: mode: Webhook webhook: cacheAuthorizedTTL: 0s cacheUnauthorizedTTL: 0scgroupDriver: systemdclusterDNS:- 10.96.0.10clusterDomain: cluster.localcpuManagerReconcilePeriod: 0sevictionPressureTransitionPeriod: 0sfileCheckFrequency: 0shealthzBindAddress: 127.0.0.1httpCheckFrequency: 0simageMinimumGCAge: 0skind: KubeletConfigurationpodInfraContainerImage: \"registry.aliyuncs.com/google_containers/pause:3.10\"è¿™é‡Œæˆ‘ä»¬æŒ‡å®šclusterDNSçš„IPæ˜¯10.96.0.10ï¼Œåç»­æˆ‘ä»¬ä¼šåœ¨kube-dnsä¸­é…ç½®CoreDNSçš„IPä¸º10.96.0.10ã€‚11.3 é…ç½®kubeletå¯åŠ¨è„šæœ¬11.3.1 é…ç½®å¯åŠ¨è„šæœ¬æ¥ä¸‹æ¥åœ¨k8s-102å’Œk8s-103ä¸Šå¯åŠ¨kubeletï¼Œåœ¨è®©kubeletå¯åŠ¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªåŸºç¡€çš„pauseé•œåƒï¼Œä»¥ä¸‹æ˜¯æ‹‰å–å‘½ä»¤ï¼Œè¯¥é•œåƒè´Ÿè´£å…¶k8sé›†ç¾¤ä¸­podå¯åŠ¨ä¹‹å‰çš„åˆå§‹åŒ–æ“ä½œnerdctl pull registry.aliyuncs.com/google_containers/pause:3.10åˆ›å»ºkubeletçš„å¯åŠ¨è„šæœ¬æ–‡ä»¶/opt/kubernetes/server/bin/kubelet.shæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹#!/bin/bash./kubelet \\ --bootstrap-kubeconfig=/etc/kubernetes/kubelet-bootstrap.conf \\ --cert-dir=/var/lib/kubelet/pki \\ --hostname-override=k8s-102 \\ --kubeconfig=/etc/kubernetes/kubelet.kubeconfig \\ --config=/etc/kubernetes/kubelet-config.yaml \\ --v=2æ·»åŠ å¯æ‰§è¡Œæƒé™chmod +x /opt/kubernetes/server/bin/kubelet.shåˆ›å»ºæ•°æ®ç›®å½•å’Œæ—¥å¿—ç›®å½•# åˆ›å»ºkubeletæ‰€éœ€è¦çš„æ—¥å¿—ç›®å½•mkdir -p /var/log/kubernetes11.3.2 é…ç½®ç®¡ç†æœåŠ¡åˆ›å»ºsupervisorè¿›ç¨‹é…ç½®æ–‡ä»¶/etc/supervisor/conf.d/kube-kubelet.confæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹[program:kube-kubelet-102]directory=/opt/kubernetes/server/bincommand=/opt/kubernetes/server/bin/kubelet.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/kubelet.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=falseæ›´æ–°supervisordï¼Œå¦‚ä¸‹å‘½ä»¤supervisorctl update11.3.3 éªŒè¯é›†ç¾¤æ­¤æ—¶ï¼ŒæœåŠ¡å·²ç»æ­£å¸¸è¿è¡Œäº†ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹kubectlå‘½ä»¤åœ¨æŸ¥çœ‹èŠ‚ç‚¹ä¿¡æ¯kubectl get nodeså¦‚æœçœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼Œä»£è¡¨å®‰è£…æˆåŠŸNAME STATUS ROLES AGE VERSIONk8s-102 Ready &lt;none&gt; 19m v1.32.2k8s-103 Ready &lt;none&gt; 18m v1.32.2æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®é›†ç¾¤çš„æ ‡ç­¾# è®¾ç½®é›†ç¾¤ä¸ºnodeæ ‡ç­¾kubectl label node k8s-102 node-role.kubernetes.io/node=kubectl label node k8s-103 node-role.kubernetes.io/node=å®‰è£…proxy12.1 åˆ›å»ºkubeconfigé…ç½®æ–‡ä»¶åœ¨k8s-101æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œå¦‚ä¸‹å‘½ä»¤# è¿›å…¥è¯ä¹¦ç›®å½•cd /etc/kubernetes/pki/# åˆ›å»ºé›†ç¾¤ä¿¡æ¯kubectl config set-cluster kubernetes --certificate-authority=ca.pem --embed-certs=true --server=https://192.168.122.100:7443 --kubeconfig=kube-proxy.kubeconfig# åˆ›å»ºç”¨æˆ·ä¿¡æ¯kubectl config set-credentials kube-proxy --client-certificate=proxy.pem --client-key=proxy-key.pem --embed-certs=true --kubeconfig=kube-proxy.kubeconfig# åˆ›å»ºä¸Šä¸‹æ–‡kubectl config set-context default --cluster=kubernetes --user=kube-proxy --kubeconfig=kube-proxy.kubeconfig# åº”ç”¨ä¸Šä¸‹æ–‡kubectl config use-context default --kubeconfig=kube-proxy.kubeconfig# ç§»åŠ¨åˆ°/etc/kubernetes/mv kube-proxy.kubeconfig /etc/kubernetes/åˆ›å»ºå®Œæˆåï¼ŒåŒæ­¥åˆ°å·¥ä½œèŠ‚ç‚¹192-debianå’Œ160-debianã€‚12.2 åˆ›å»ºkube-proxyé…ç½®æ–‡ä»¶åœ¨å·¥ä½œèŠ‚ç‚¹åˆ›å»º/etc/kubernetes/kube-proxy.yamlï¼Œå†…å®¹å¦‚ä¸‹apiVersion: kubeproxy.config.k8s.io/v1alpha1bindAddress: 0.0.0.0clientConnection: kubeconfig: /etc/kubernetes/kube-proxy.kubeconfigclusterCIDR: 10.244.0.0/16kind: KubeProxyConfigurationmetricsBindAddress: 0.0.0.0:10249mode: \"ipvs\"12.3 åˆ›å»ºå¯åŠ¨è„šæœ¬åœ¨ä¸¤å°ä¸»æœºæ‰§è¡Œä»¥ä¸Šè„šæœ¬ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»ºkube-proxyçš„å¯åŠ¨è„šæœ¬æ–‡ä»¶/opt/kubernetes/server/bin/kube-proxy.sh#!/bin/bash./kube-proxy \\ --config=/etc/kubernetes/kube-proxy.yaml \\ --v=2æ·»åŠ å¯æ‰§è¡Œæƒé™chmod +x /opt/kubernetes/server/bin/kube-proxy.sh13.4 åˆ›å»ºæœåŠ¡é…ç½®åˆ›å»ºsupervisorçš„é…ç½®æ–‡ä»¶/etc/supervisor/conf.d/kube-proxy.confæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹[program:kube-proxy-102]directory=/opt/kubernetes/server/bincommand=/opt/kubernetes/server/bin/kube-proxy.shnumprocs=1autostart=trueautorestart=truestartsecs=30startretries=3exitcodes=0,2stopsignal=QUITstopwaitsecs=10user=rootredirect_stderr=truestdout_logfile=/data/logs/supervisor/kube-proxy.stdout.logstdout_logfile_maxbytes=64MBstdout_logfile_backups=4stdout_capture_maxbytes=1MBstdout_event_enabled=falseæ›´æ–°supervisorsupervisorctl update12.5 åˆ›å»ºæƒé™é…ç½®æ–‡ä»¶kube-proxy æ˜¯ Kubernetes é›†ç¾¤ä¸­çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šç»´æŠ¤ç½‘ç»œè§„åˆ™ï¼Œç¡®ä¿ Pod ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚ä¸ºäº†å®ç°è¿™ä¸€åŠŸèƒ½ï¼Œkube-proxy éœ€è¦ä¸ Kubernetes API Server è¿›è¡Œäº¤äº’ï¼Œè·å–é›†ç¾¤çš„ç½‘ç»œä¿¡æ¯ï¼ˆå¦‚ Serviceã€Endpoint ç­‰ï¼‰ï¼Œå¹¶æ ¹æ®è¿™äº›ä¿¡æ¯é…ç½®æœ¬åœ°çš„ç½‘ç»œè§„åˆ™ï¼ˆå¦‚ iptables æˆ– ipvsï¼‰ã€‚ä¸ºäº†ä¸ API Server äº¤äº’ï¼Œkube-proxy éœ€è¦ä¸€å®šçš„æƒé™ï¼Œç‰¹åˆ«æ˜¯è®¿é—®èŠ‚ç‚¹èµ„æºçš„æƒé™ã€‚RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ˜¯ Kubernetes ä¸­ç”¨äºç®¡ç†æƒé™çš„æœºåˆ¶ã€‚é€šè¿‡åˆ›å»º RBAC é…ç½®ï¼Œkube-proxy è¢«æˆäºˆäº†ä»¥ä¸‹æƒé™ï¼šè®¿é—® nodes/proxyã€nodes/statsã€nodes/log ç­‰èµ„æºï¼Œä»¥ä¾¿è·å–èŠ‚ç‚¹çš„ç½‘ç»œå’ŒçŠ¶æ€ä¿¡æ¯ã€‚æ‰§è¡Œç›¸å…³æ“ä½œï¼ˆå¦‚ getã€listã€watch ç­‰ï¼‰æ¥ç»´æŠ¤ç½‘ç»œè§„åˆ™ã€‚å¦‚æœæ²¡æœ‰è¿™äº›æƒé™ï¼Œkube-proxy å°†æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¯¼è‡´é›†ç¾¤ä¸­çš„ç½‘ç»œåŠŸèƒ½å¤±æ•ˆã€‚å› æ­¤ï¼Œå¯åŠ¨ kube-proxy ä¹‹ååˆ›å»º RBAC é…ç½®æ˜¯å¿…è¦çš„ã€‚åœ¨k8s-101ä¸Šåˆ›å»º/etc/kubernetes/rbac.yamlï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata: annotations: rbac.authorization.kubernetes.io/autoupdate: \"true\" labels: kubernetes.io/bootstrapping: rbac-defaults name: system:kubernetes-to-kubeletrules: - apiGroups: - \"\" resources: - nodes/proxy - nodes/stats - nodes/log - nodes/spec - nodes/metrics verbs: - \"*\"---apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: system:kubernetes namespace: \"\"roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: system:kubernetes-to-kubeletsubjects: - apiGroup: rbac.authorization.k8s.io kind: User name: kubernetes12.6 åˆ›å»ºè§’è‰²åŠæˆæƒkubectl apply -f /etc/kubernetes/rbac.yaml12.7 é›†ç¾¤çš„éªŒè¯åœ¨ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯åŠ¨å¥½kube-proxyæœåŠ¡ä¹‹åï¼Œè‡³æ­¤ï¼Œé›†ç¾¤çš„åŸºæœ¬ç»„ä»¶å·²ç»å®‰è£…å®Œæˆï¼Œä¸‹é¢æˆ‘ä»¬æ¥éªŒè¯é›†ç¾¤ã€‚åœ¨ä»»æ„ç®¡ç†èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªPodç±»å‹çš„èµ„æºï¼Œæ·»åŠ nginx-pod.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Podmetadata: name: pod1spec: containers: - name: nginx-pod image: nginx:alpine imagePullPolicy: IfNotPresent ports: - name: nginxport containerPort: 80æ‰§è¡Œèµ„æºåˆ›å»ºå‘½ä»¤kubectl create -f nginx-pod.ymlä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯podæ˜¯å¦æ­£å¸¸è¿è¡Œkubectl get pod -o wideå¦‚æœè¿”å›å¦‚ä¸‹å†…å®¹ï¼Œä»£è¡¨é›†ç¾¤æ­£å¸¸NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATESpod1 1/1 Running 0 94s 10.22.0.2 k8s-103 &lt;none&gt; &lt;none&gt;åˆ›å»ºçš„podè¿è¡Œåœ¨k8s-103è¿™å°ä¸»æœºä¸Šï¼Œåœ¨è¿™å°æœºä½¿ç”¨curl 10.22.0.2å‘½ä»¤èƒ½æ­£å¸¸è®¿é—®åˆ°nginxæœåŠ¡ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹k8s-102ä¸Šæ‰§è¡Œcurl 10.22.0.2ä¼šå‘ç°è®¿é—®ä¸åˆ°ã€‚åŸå› æ˜¯è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šçš„å®¹å™¨åœ¨å„è‡ªçš„è™šæ‹Ÿç½‘ç»œå†…ï¼Œæˆ‘ä»¬å°†åˆ°åç»­çš„ç« èŠ‚å®‰è£…é€šè¿‡å®‰è£… k8s ç½‘ç»œæ’ä»¶çš„æ–¹å¼ï¼Œå®ç°ä¸åŒå·¥ä½œèŠ‚ç‚¹çš„å®¹å™¨ç½‘ç»œäº’ç›¸è®¿é—®çš„åŠŸèƒ½ã€‚å®‰è£…ç½‘ç»œæ’ä»¶ä»¥ä¸‹çš„æ“ä½œï¼Œæˆ‘ä»¬åœ¨k8s-101èŠ‚ç‚¹å»å®Œæˆã€‚13.1 å®‰è£…calicoCalico æ˜¯ Kubernetes é›†ç¾¤çš„ç½‘ç»œåŸºç¡€è®¾æ–½ï¼Œè´Ÿè´£ Pod çš„ç½‘ç»œè¿æ¥ã€è·¨èŠ‚ç‚¹é€šä¿¡å’Œç½‘ç»œç­–ç•¥ç®¡ç†ã€‚æ ¹æ®ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå®‰è£…ã€‚cd /etc/kuberneteswget https://docs.projectcalico.org/manifests/calico.yamlä¿®æ”¹calico.yamlæ–‡ä»¶ï¼Œå°†CALICO_IPV4POOL_CIDRæ”¹ä¸ºå’Œkube-proxyçš„é…ç½®ä¸€æ ·ï¼Œå¦‚ä¸‹- name: CALICO_IPV4POOL_CIDR value: \"10.244.0.0/16\"åœ¨calicoé…ç½®æ–‡ä»¶ä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸‹å®¹å™¨é•œåƒï¼Œåœ¨è¿è¡Œcalicoçš„æ—¶å€™å°†ä¼šç”¨åˆ°ï¼Œå¯ä»¥ä½¿ç”¨ cat calico.yaml | grep image å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰éœ€è¦çš„é•œåƒåˆ—è¡¨ï¼Œå¦‚ä¸‹image: docker.io/calico/cni:v3.25.0imagePullPolicy: IfNotPresentimage: docker.io/calico/cni:v3.25.0imagePullPolicy: IfNotPresentimage: docker.io/calico/node:v3.25.0imagePullPolicy: IfNotPresentimage: docker.io/calico/node:v3.25.0imagePullPolicy: IfNotPresentimage: docker.io/calico/kube-controllers:v3.25.0imagePullPolicy: IfNotPresentæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè¿™äº›é•œåƒéƒ½æ¥è‡ªdocker.ioï¼Œä½†å› ä¸ºä¸€äº›åŸå› ï¼Œåœ¨æ’°å†™è¿™ç¯‡æ–‡æ¡£æ—¶ï¼Œå›½å†…è®¿é—® docker.io çš„ç½‘ç»œä¸å¤ªé¡ºç•…ã€‚å› æ­¤ä½ éœ€è¦æƒ³åŠæ³•è®©ä½ çš„å·¥ä½œèŠ‚ç‚¹å®¿ä¸»æœºèƒ½æ‹‰å–åˆ°è¿™äº›é•œåƒï¼Œæœ€åå†åˆ›å»ºcalicoæœåŠ¡ã€‚æˆ–è€…ä½ éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ”¹æˆè¿™äº›é•œåƒåœ¨å¯ä»¥æ‹‰å–åˆ°çš„å›½å†…é•œåƒç«™å¯¹åº”çš„é•œåƒåã€‚è§£å†³ä¾èµ–çš„é•œåƒçš„æ‹‰å–é—®é¢˜åï¼Œæœ€ååˆ›å»ºcalicoæœåŠ¡kubectl apply -fcalico.yamlæ‰§è¡Œå‘½ä»¤ä¹‹åï¼Œcalicoä¼šæ‹‰å»è¿œç«¯çš„é•œåƒå¹¶è¿è¡Œï¼Œæ‰§è¡Œ kubectl get pods -n kube-system ç­‰åˆ°æ‰€æœ‰podéƒ½å¤„äºRunningçŠ¶æ€ä»£è¡¨æœåŠ¡å¯åŠ¨å®Œæˆï¼Œå¦‚ä¸‹NAME READY STATUS RESTARTS AGEcalico-kube-controllers-6799f5f4b4-xqpf9 1/1 Running 0 3m34scalico-node-9bt29 1/1 Running 0 3m34scalico-node-djxvc 1/1 Running 0 3m34sæ­¤æ—¶calicoå·²ç»æ­£å¸¸è¿è¡Œäº†ï¼Œå¦‚æœä¸ŠèŠ‚åˆ›å»ºçš„nginxçš„podè¿˜æ²¡æœ‰åˆ é™¤çš„è¯ï¼Œå…ˆåˆ é™¤æ‰å†åˆ›å»ºï¼Œå¦‚ä¸‹å‘½ä»¤kubectl delete -f nginx-pod.yamlkubectl apply -f nginx-pod.yamlåˆ›å»ºæ–°çš„podä¹‹åï¼Œä½¿ç”¨kubectl get pod -o wideæŸ¥çœ‹podæ‰€å¤„çš„èŠ‚ç‚¹ï¼Œæ­¤æ—¶æˆ‘ä»¬åœ¨ä»»æ„å·¥ä½œèŠ‚ç‚¹è¯·æ±‚è¯¥IPï¼Œéƒ½èƒ½æˆåŠŸè¯·æ±‚ã€‚13.2 å®‰è£…corednsCoreDNS æ˜¯ Kubernetes é›†ç¾¤çš„ DNS æœåŠ¡ï¼Œè´Ÿè´£ä¸ºé›†ç¾¤å†…çš„æœåŠ¡æä¾›åŸŸåè§£æå’ŒæœåŠ¡å‘ç°åŠŸèƒ½ï¼Œä½¿å¾— Pod å¯ä»¥é€šè¿‡æœåŠ¡åç§°è®¿é—®å…¶ä»–æœåŠ¡ã€‚å®ƒå…è®¸ Pod é€šè¿‡æœåŠ¡åç§°ï¼ˆå¦‚ my-service.default.svc.cluster.localï¼‰æ¥è®¿é—®å…¶ä»–æœåŠ¡ï¼Œè€Œä¸éœ€è¦çŸ¥é“å…·ä½“çš„ IP åœ°å€ã€‚13.2.1 ä¸‹è½½åŸºç¡€èµ„æºé…ç½®æ–‡ä»¶ä¸‹è½½corndnsèµ„æºé…ç½®æ–‡ä»¶cd /etc/kuberneteswget https://github.com/kubernetes/kubernetes/blob/master/cluster/addons/dns/coredns/coredns.yaml.base -O coredns.yml13.2.2 ä¿®æ”¹é…ç½®åšå‡ºä»¥ä¸‹ä¿®æ”¹ï¼šæ‰¾åˆ°é…ç½®æ–‡ä»¶ä¸­çš„__DNS__DOMAIN__è¿™ä¸¤ä¸ªå˜é‡æ”¹ä¸ºé›†ç¾¤åŸŸåï¼Œå¦‚ä¸‹kubernetes cluster.local in-addr.arpa ip6.arpa { fallthrough in-addr.arpa ip6.arpa}å°† __DNS__MEMORY__LIMIT_ æ”¹ä¸º512Miï¼Œå¦‚ä¸‹å°†__DNS_SERVER__æ”¹ä¸ºkubeleté…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„é›†ç¾¤IPåœ°å€10.96.0.10ï¼Œå¦‚ä¸‹spec: selector: k8s-app: kube-dns clusterIP: 10.96.0.1013.2.3 å¯åŠ¨æœåŠ¡ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡kubectl apply -f coredns.ymlå®‰è£…traefik-ingress14.1 å¯åŠ¨traefikæœåŠ¡Traefik åœ¨ Kubernetes (k8s) ä¸­çš„ä½œç”¨ä¸»è¦æ˜¯ä½œä¸ºåå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ï¼Œè´Ÿè´£ç®¡ç†å¤–éƒ¨æµé‡åˆ°é›†ç¾¤å†…éƒ¨æœåŠ¡çš„è·¯ç”±ã€‚æˆ‘ä»¬å…ˆå®šä¹‰ traefik çš„èµ„æºï¼Œåœ¨/etc/kubernetesç›®å½•ä¸‹åˆ›å»ºtraefik.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: ServiceAccountmetadata: name: traefik-ingress-controller namespace: kube-system---# å®šä¹‰è§’è‰²apiVersion: rbac.authorization.k8s.io/v1kind: ClusterRolemetadata: name: traefik-ingress-controllerrules: - apiGroups: - \"\" resources: - services - endpoints - secrets verbs: - get - list - watch - apiGroups: - extensions - networking.k8s.io resources: - ingresses - ingressclasses verbs: - get - list - watch - apiGroups: - extensions - networking.k8s.io resources: - ingresses/status verbs: - update---# åˆ›å»ºè§’è‰²å’Œè´¦å·ç»‘å®šapiVersion: rbac.authorization.k8s.io/v1kind: ClusterRoleBindingmetadata: name: traefik-ingress-controllerroleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: traefik-ingress-controllersubjects: - kind: ServiceAccount name: traefik-ingress-controller namespace: kube-system---# åˆ›å»ºtraefikæœåŠ¡apiVersion: apps/v1kind: Deploymentmetadata: name: traefik namespace: kube-system labels: app: traefikspec: replicas: 1 selector: matchLabels: app: traefik template: metadata: labels: app: traefik spec: serviceAccountName: traefik-ingress-controller containers: - name: traefik image: traefik:v2.10 ports: - name: web containerPort: 80 - name: websecure containerPort: 443 - name: admin containerPort: 8080 args: - --api.insecure=true - --providers.kubernetesingress - --entrypoints.web.Address=:80 - --entrypoints.websecure.Address=:443---# åˆ›å»ºtraefikçš„serviceapiVersion: v1kind: Servicemetadata: name: traefik namespace: kube-systemspec: type: NodePort ports: - name: http port: 80 nodePort: 58180 - name: https port: 443 nodePort: 58181 - name: dashboard port: 8080 nodePort: 58182 selector: app: traefikåŸºäºtraefiké•œåƒå¯åŠ¨çš„podå°†åˆ›å»ºè¿è¡Œä¸‰ä¸ªç«¯å£æœåŠ¡ï¼Œ80å’Œ443å¯¹åº”ingressæœ¬èº«æ ¸å¿ƒæœåŠ¡ï¼Œæˆ‘ä»¬åç»­å¯ä»¥å°†æµé‡éƒ½è½¬å‘åˆ°ingressçš„80ç«¯å£ï¼Œè®©ingressåšæµé‡è°ƒåº¦ã€‚8080æ˜¯traefikçš„æ§åˆ¶é¢æ¿åå°æœåŠ¡ã€‚æˆ‘ä»¬å®šä¹‰äº†3ä¸ªnodePortç±»å‹çš„serviceï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šæä¾›ä¸€ä¸ªæœåŠ¡å…¥å£ã€‚åç»­å†å°†è¯·æ±‚è´Ÿè½½åˆ°å„ä¸ªèŠ‚ç‚¹ä¸Šã€‚åˆ›å»ºå¥½é…ç½®æ–‡ä»¶åï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨æœåŠ¡kubectl apply -f traefik.ymlæ­¤æ—¶æˆ‘ä»¬é€šè¿‡ kubectl get svc -A -o wide | grep traefik å‘½ä»¤å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœkube-system traefik NodePort 10.96.71.38 &lt;none&gt; 80:58180/TCP,443:58181/TCP,8080:58182/TCP 116sæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ipvsadm -LæŸ¥çœ‹æ‰€æœ‰ç«¯å£æ˜ å°„å…³ç³»ï¼Œç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨è®¿é—®ä¸åŒçš„å·¥ä½œèŠ‚ç‚¹ä¸ŠIPçš„58180ç«¯å£ï¼Œéƒ½ä¼šçœ‹åˆ°traefikçš„ç®¡ç†é¡µé¢ï¼Œä»£è¡¨å®‰è£…æˆåŠŸã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œé›†ç¾¤èŠ‚ç‚¹ç«¯å£ä¸trafikç«¯å£çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š é›†ç¾¤èŠ‚ç‚¹ç«¯å£ Traefikç«¯å£ 58180 80 58181 443 58182 8080 é›†ç¾¤èŠ‚ç‚¹çš„ç«¯å£ç”±æˆ‘ä»¬è‡ªå®šä¹‰ï¼Œè€Œtraefikçš„8080ç«¯å£æ˜¯æ§åˆ¶é¢æ¿ç«¯å£ï¼Œ80å’Œ443åˆ™æ˜¯å¸¸è§webæœåŠ¡çš„é»˜è®¤ç«¯å£ã€‚14.2 é…ç½®è´Ÿè½½å‡è¡¡æˆ‘ä»¬åœ¨k8s-101ã€k8s-102èŠ‚ç‚¹ä¸Šåˆ†åˆ«åˆ›å»ºäº†nginxæœåŠ¡ï¼Œç°åœ¨æˆ‘ä»¬å°†æµé‡è½¬å‘åˆ°è¿™2ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå‡è®¾æˆ‘ä»¬çš„ä¸šåŠ¡æœåŠ¡å™¨æ˜¯algs.techï¼Œåœ¨nginxæœåŠ¡å™¨æ·»åŠ ä»¥ä¸‹é…ç½®upstream traefik_dashboard { server 192.168.122.102:58182 max_fails=3 fail_timeout=10s; server 192.168.122.103:58182 max_fails=3 fail_timeout=10s;}server { server_name traefik.algs.tech; location / { proxy_pass http://traefik_dashboard; proxy_set_header Host $http_host; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; }}upstream traefik_http { server 192.168.122.102:58180 max_fails=3 fail_timeout=10s; server 192.168.122.103:58180 max_fails=3 fail_timeout=10s;}server { server_name *.algs.tech; listen 80; location / { proxy_pass http://traefik_http; proxy_set_header Host $http_host; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; }}upstream traefik_https { server 192.168.122.102:58181 max_fails=3 fail_timeout=10s; server 192.168.122.103:58181 max_fails=3 fail_timeout=10s;}server { server_name *.algs.tech; listen 443 ssl; # sslè¯ä¹¦ ssl_certificate /etc/certs/ssl/algs.tech/fullchain.pem; ssl_certificate_key /etc/certs/ssl/algs.tech/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers HIGH:!aNULL:!MD5; ssl_session_cache shared:SSL:10m; ssl_prefer_server_ciphers on; location / { proxy_pass http://traefik_https; proxy_set_header Host $http_host; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; }}åœ¨ä»¥ä¸Šé…ç½®ä¸­ï¼Œæˆ‘ä»¬æŠŠtraefik.algs.techçš„è¯·æ±‚è½¬å‘åˆ°traefikçš„æ§åˆ¶é¢æ¿ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æŠŠ*.algs.techçš„æ‰€æœ‰80ç«¯å£å’Œ443ç«¯å£çš„æµé‡è½¬å‘åˆ°é›†ç¾¤å¯¹åº”çš„traefikæœåŠ¡ï¼Œç”±traefikæ¥è°ƒåº¦ï¼Œåç»­å‘å¸ƒæœåŠ¡æˆ‘ä»¬åªéœ€è¦é…ç½®å¥½ ingress èµ„æºå³å¯ã€‚è‡³æ­¤ï¼Œé›†ç¾¤çš„æ ¸å¿ƒç»„ä»¶å’Œæ ¸å¿ƒæ’ä»¶å·²ç»å…¨éƒ¨å®‰è£…å®Œæ¯•ã€‚éƒ¨ç½²webæœåŠ¡åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªç®€å•çš„webæœåŠ¡ï¼Œå¹¶é€šè¿‡ingressèµ„æºæ¥å‘å¸ƒåˆ°é›†ç¾¤ä¸­ã€‚15.1 æ¦‚è¿°éƒ¨ç½²k8sé€šå¸¸åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ 1.å‡†å¤‡é¡¹ç›®é•œåƒï¼Œç”¨äºå¯åŠ¨åº”ç”¨å®¹å™¨ 2.é€šå¸¸åˆ›å»ºDeploymentèµ„æºçš„æ–¹å¼è¿è¡Œåº”ç”¨ 3.åˆ›å»ºåº”ç”¨çš„Serviceç½‘ç»œï¼Œç”¨äºå…³è”Deployment 4.åˆ›å»ºå¯¹åº”çš„Ingressèµ„æºï¼Œç”¨äºè°ƒåº¦7å±‚æµé‡åœ¨ä¸‹æ–‡ï¼Œæˆ‘ä»¬ä½¿ç”¨å£°æ˜å¼çš„ç®¡ç†æ–¹å¼ï¼ˆé€šå¸¸æŒ‡é€šè¿‡yamlé…ç½®æ–‡ä»¶æ¥ç®¡ç†é›†ç¾¤ï¼‰æ¥åˆ›å»ºå„ä¸ªé›†ç¾¤èµ„æºï¼Œå®Œæˆåº”ç”¨éƒ¨ç½²ã€‚15.2 å‡†å¤‡èµ„æºé…ç½®æ–‡ä»¶æˆ‘ä»¬é€šè¿‡éƒ¨ç½² nginx æ¥æ¼”ç¤ºä¸€ä¸ªåº”ç”¨åœ¨k8séƒ¨ç½²çš„æµç¨‹15.2.1 å£°æ˜deploymentåˆ›å»ºwhoami.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹kind: DeploymentapiVersion: apps/v1metadata: name: whoami labels: app: whoamispec: replicas: 1 selector: matchLabels: app: whoami template: metadata: labels: app: whoami spec: containers: - name: whoami image: nginx ports: - name: web containerPort: 8015.2.2 å£°æ˜serviceåˆ›å»ºwhoami-services.ymlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Servicemetadata: name: whoamispec: ports: - name: web port: 80 targetPort: web selector: app: whoami15.2.3 å£°æ˜ingressåˆ›å»ºwhoami-ingress.ymlï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: networking.k8s.io/v1kind: Ingressmetadata: name: whoami-ingressspec: rules: - host: nginx.algs.tech http: paths: - path: / pathType: Prefix backend: service: name: whoami port: name: web15.3 èµ„æºåˆ›å»ºä¸éªŒè¯åˆ›å»ºå„ä¸ªèµ„æºkubectl apply -f whoami.yml \\ -f whoami-services.yml \\ -f whoami-ingress.ymlæ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä¹‹åï¼Œk8så°†ä¼šæ‹‰å– nginx çš„é•œåƒï¼Œå¹¶æŒ‰æˆ‘ä»¬æŒ‡å®šçš„é…ç½®å»å¯åŠ¨æœåŠ¡ã€‚å¯åŠ¨å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨è‡ªå·±çš„æ¡Œé¢æ“ä½œç³»ç»Ÿçš„ç”µè„‘ä¸Šå°†nginx.algs.techåŸŸåè§£æåˆ°åœ¨å‰é¢é€šè¿‡ keepalived åˆ›å»ºçš„è™šæ‹ŸIP 192.168.122.100ï¼Œå†ä½¿ç”¨æµè§ˆå™¨è®¿é—®åŸŸåï¼Œå°±é¡ºåˆ©è®¿é—®åˆ°äº†nginxçš„é¦–é¡µäº†ã€‚" }, { "title": "åœ¨Debianä¸Šä½¿ç”¨å®‰è£…PostgreSQLæ•°æ®åº“", "url": "/posts/database_install-postgresql-on-debian-using-apt.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "PostgreSQL", "date": "2025-07-01 11:46:00 +0800", "snippet": "åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ apt å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚ä¸€ã€å®‰è£… PostgreSQL1.1 ä½¿ç”¨aptå®‰è£…sudo apt updatesudo apt install postgresqlè¿™æ¡å‘½ä»¤ä¼šå®‰è£…å½“å‰ Debian 12 é»˜è®¤çš„è½¯ä»¶æºä¸­ Postgr...", "content": "åœ¨ Debian 12 ä¸Šå®‰è£… PostgreSQL æ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡ apt å‘½ä»¤å®Œæˆã€‚ä¸‹é¢æ˜¯å®‰è£…æ–¹æ³•ï¼Œå¹¶è¯¦ç»†è§£é‡Šå®‰è£…åæ¶‰åŠçš„å„ç±»æ–‡ä»¶çš„ä½ç½®å’Œä½œç”¨ï¼Œå“ªäº›æ˜¯å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œå“ªäº›æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚ä¸€ã€å®‰è£… PostgreSQL1.1 ä½¿ç”¨aptå®‰è£…sudo apt updatesudo apt install postgresqlè¿™æ¡å‘½ä»¤ä¼šå®‰è£…å½“å‰ Debian 12 é»˜è®¤çš„è½¯ä»¶æºä¸­ PostgreSQL çš„ä¸»ç‰ˆæœ¬ï¼ˆé€šå¸¸æ˜¯ PostgreSQL 13ã€14 æˆ– 15ï¼Œè§†å½“å‰æºä¸ºå‡†ï¼‰ã€‚æˆ‘åœ¨ 2025.07.01 å®‰è£…çš„æ—¶å€™ï¼Œæ˜¯15ã€‚1.2 å®‰è£…éªŒè¯APT å®‰è£… PostgreSQL åä¼šè‡ªåŠ¨åšä»¥ä¸‹äº‹æƒ…ï¼š åˆ›å»ºä¸€ä¸ªç³»ç»Ÿç”¨æˆ· postgresã€‚ åˆå§‹åŒ–æ•°æ®ç›®å½• /var/lib/postgresql/15/mainã€‚ å¯åŠ¨ PostgreSQL æœåŠ¡ã€‚ åˆ›å»ºé»˜è®¤æ•°æ®åº“ postgres å’Œé»˜è®¤ç”¨æˆ· postgresï¼Œè¿™ä¸ªç”¨æˆ·æ˜¯ postgrs çš„è¶…çº§ç”¨æˆ·ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸€äº›ä¸ postgres ç›¸å…³çš„åŸºæœ¬ä¿¡æ¯# æŸ¥çœ‹ PostgreSQL çš„ç‰ˆæœ¬psql --version# æŸ¥çœ‹ PostgreSQL æœåŠ¡çŠ¶æ€sudo systemctl status postgresql# åˆ—å‡ºå®‰è£…çš„ PostgreSQL ç‰ˆæœ¬åŠé…ç½®è·¯å¾„ls /etc/postgresql/ls /etc/postgresql/15/main/# æŸ¥çœ‹æ•°æ®ç›®å½•ä½ç½®ï¼ˆå¯ä»¥åœ¨ postgresql.conf ä¸­ç¡®è®¤ï¼‰grep data_directory /etc/postgresql/15/main/postgresql.confä½ å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤ä»¥è¶…çº§ç”¨æˆ·èº«ä»½è®¿é—®æ•°æ®åº“ï¼šsudo -u postgres psqläºŒã€å®‰è£…å®Œæˆåæ–‡ä»¶çš„ç»“æ„æŒ‰ç±»å‹åˆ†ç±»è¯´æ˜ PostgreSQL å®‰è£…åï¼Œå¯ä»¥å…³æ³¨ä¸€ä¸‹æ¶‰åŠçš„éƒ¨åˆ†æ–‡ä»¶åŠå®ƒä»¬çš„è·¯å¾„ï¼š2.1 ğŸ›  å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå‘½ä»¤è¡Œå·¥å…·ï¼‰è¿™äº›æ–‡ä»¶ç”¨äºç®¡ç†å’Œä½¿ç”¨ PostgreSQLï¼š å‘½ä»¤ è¯´æ˜ è·¯å¾„ psql PostgreSQL çš„äº¤äº’å¼ç»ˆç«¯ /usr/bin/psql createdb åˆ›å»ºæ•°æ®åº“ /usr/bin/createdb createuser åˆ›å»ºç”¨æˆ· /usr/bin/createuser pg_ctl æ§åˆ¶ PostgreSQL æœåŠ¡ /usr/lib/postgresql/15/bin/ postgres æ•°æ®åº“ä¸»æœåŠ¡è¿›ç¨‹ /usr/lib/postgresql/15/bin/ è¿™äº› å¯æ‰§è¡Œæ–‡ä»¶ éƒ½æ˜¯åœ¨å®‰è£…æ—¶ç”± APT å®‰è£…äº§ç”Ÿçš„ã€‚2.2 ğŸ“¦ ä¾èµ–æ–‡ä»¶å’Œåº“æ–‡ä»¶ç³»ç»Ÿè¿è¡Œ PostgreSQL æ‰€éœ€çš„ä¾èµ–å…±äº«åº“ï¼š ç±»å‹ è·¯å¾„ç¤ºä¾‹ åŠ¨æ€åº“ /usr/lib/x86_64-linux-gnu/libpq.so.* æ”¯æŒè„šæœ¬ç­‰ /usr/share/postgresql/ è¿™äº›æ–‡ä»¶ä¹Ÿéƒ½åœ¨å®‰è£…è¿‡ç¨‹ä¸­ç”Ÿæˆï¼Œç”¨äºæ”¯æŒ PostgreSQL çš„è¿è¡Œç¯å¢ƒã€‚2.3 âš™ï¸ é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶ç”¨äºæ§åˆ¶æ•°æ®åº“çš„è¡Œä¸ºã€‚ æ–‡ä»¶ è¯´æ˜ è·¯å¾„ postgresql.conf ä¸»é…ç½®æ–‡ä»¶ /etc/postgresql/15/main/postgresql.conf pg_hba.conf è®¤è¯ä¸è®¿é—®æ§åˆ¶ /etc/postgresql/15/main/pg_hba.conf pg_ident.conf èº«ä»½æ˜ å°„é…ç½® /etc/postgresql/15/main/pg_ident.conf è¿™äº›æ–‡ä»¶åœ¨å®‰è£…æ—¶ä¼šç”Ÿæˆåˆå§‹æ¨¡æ¿ï¼Œä½ å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹æ¥è°ƒæ•´æ•°æ®åº“é…ç½®ã€‚2.4 ğŸ“ æ•°æ®åº“æ•°æ®æ–‡ä»¶è¿™æ˜¯ PostgreSQL å­˜å‚¨æ•°æ®çš„åœ°æ–¹ï¼ˆå³ä½ åˆ›å»ºçš„æ•°æ®åº“ã€è¡¨ã€ç´¢å¼•ç­‰éƒ½åœ¨è¿™é‡Œï¼‰ï¼š å†…å®¹ è·¯å¾„ æ•°æ®æ–‡ä»¶ /var/lib/postgresql/15/main/ WAL æ—¥å¿— åŒä¸Šç›®å½•å†…çš„ pg_wal å­ç›®å½• âš ï¸ è¿™äº›æ˜¯ å®‰è£…ååˆå§‹åŒ–æ•°æ®åº“æ—¶ç”Ÿæˆçš„ï¼Œæ˜¯ è¿è¡Œæ—¶æŒç»­å†™å…¥å’Œæ›´æ–°çš„å†…å®¹ã€‚2.5 ğŸªµ æ—¥å¿—æ–‡ä»¶é»˜è®¤ PostgreSQL çš„æ—¥å¿—å†™å…¥åˆ° systemd journalï¼Œä½†å¯ä»¥é…ç½®å•ç‹¬æ—¥å¿—æ–‡ä»¶ï¼š ç±»å‹ è·¯å¾„ï¼ˆé»˜è®¤ï¼‰ è¯´æ˜ Systemd æ—¥å¿— ä½¿ç”¨ journalctl -u postgresql æŸ¥çœ‹ é»˜è®¤æ—¥å¿—å­˜äº systemd æ–‡ä»¶æ—¥å¿— /var/log/postgresql/postgresql-15-main.log å¦‚æœé…ç½®äº† logging_collector å¦‚æœå¯ç”¨æ—¥å¿—æ–‡ä»¶åŠŸèƒ½ï¼Œæ—¥å¿—æ˜¯ è¿è¡Œæ—¶ç”Ÿæˆå’Œæ›´æ–°çš„ã€‚2.6 ğŸ§¾ Systemd æœåŠ¡é…ç½®ç”¨äºå¯åŠ¨ã€åœæ­¢ PostgreSQL çš„æœåŠ¡è„šæœ¬ï¼š å†…å®¹ è·¯å¾„ è¯´æ˜ systemd unit /lib/systemd/system/postgresql.service ä¸»æœåŠ¡ç®¡ç†å•å…ƒæ–‡ä»¶ å„å®ä¾‹é…ç½®æ–‡ä»¶ /etc/systemd/system/postgresql@.service.d/ å¯é€‰çš„ç”¨æˆ·å®šåˆ¶ service é…ç½® è¿™äº› systemd é…ç½®æ–‡ä»¶æ˜¯ å®‰è£…æ—¶ç”Ÿæˆçš„ï¼Œä½ å¯ä»¥ç”¨ systemctl æ§åˆ¶æ•°æ®åº“ã€‚ä¸‰ã€è´¦å·æˆæƒç¤ºä¾‹æˆ‘ä»¬å¯ä»¥åˆ†åˆ«ä½¿ç”¨ PostgreSQL æä¾›çš„ CREATE ROLE å’Œæƒé™æ§åˆ¶ç³»ç»Ÿ + pg_hba.conf ä¸­çš„è®¿é—®æ§åˆ¶é…ç½®æ¥å®ç°è®¿é—®æƒé™çš„æ§åˆ¶ã€‚3.1 è¿›å…¥ PostgreSQL ç®¡ç†ç»ˆç«¯é¦–å…ˆä»¥è¶…çº§ç”¨æˆ·èº«ä»½è¿›å…¥ PostgreSQLï¼šsudo -u postgres psql3.2 å¼€å‘ç¯å¢ƒ - åˆ›å»ºå¼€å‘è´¦å·ï¼ˆå…è®¸ä»»æ„ IPï¼Œæ‹¥æœ‰åˆ›å»ºæ•°æ®åº“å’Œæ‰€æœ‰æƒé™ï¼‰âœ… 3.2.1 ç›®æ ‡ ç”¨æˆ·åï¼šdevelop å¯†ç ï¼šå¦‚ dev123 å…è®¸ä»ä»»æ„ IP ç™»å½• å¯åˆ›å»ºæ•°æ®åº“ã€åˆ›å»ºè¡¨ã€è¯»å†™ä»»æ„æ•°æ®ğŸ”§ 3.2.2 æ“ä½œ-- åˆ›å»ºè´¦å·CREATE ROLE develop WITH LOGIN PASSWORD 'dev123';-- å…è®¸åˆ›å»ºæ•°æ®åº“ï¼ˆå¼€å‘ç”¨ï¼‰ALTER ROLE develop CREATEDB;-- ï¼ˆå¯é€‰ï¼‰ä¹Ÿå…è®¸åˆ›å»ºè§’è‰²ï¼ˆå¼€å‘æƒé™è¾ƒå¤§æ—¶ï¼‰-- ALTER ROLE develop CREATEROLE;-- æˆäºˆå¯¹å·²æœ‰æ•°æ®åº“çš„è¿æ¥æƒé™GRANT CONNECT ON DATABASE postgres TO develop;ğŸŒ 3.2.3 é…ç½® pg_hba.conf å…è®¸ä»»æ„ IP ç™»å½•ç¼–è¾‘æ–‡ä»¶ï¼ˆè·¯å¾„ä¸€èˆ¬ä¸º /etc/postgresql/15/main/pg_hba.confï¼‰ï¼šsudo vim /etc/postgresql/15/main/pg_hba.confæ·»åŠ ä¸€è¡Œï¼šhost all develop 0.0.0.0/0 md5 0.0.0.0/0 è¡¨ç¤ºä»»æ„ IPï¼Œè¿™åœ¨å¼€å‘ç¯å¢ƒä¸­å¯ä»¥æ¥å—ï¼Œä½†ç”Ÿäº§ä¸­åº”é¿å…ã€‚ğŸŒ 3.2.4 é…ç½® PostgreSQL ç›‘å¬åœ°å€PostgreSQL é»˜è®¤åªç›‘å¬ localhostï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶å…è®¸å¤–éƒ¨è¿æ¥ï¼šsudo vim /etc/postgresql/15/main/postgresql.confæ‰¾åˆ° listen_addresses è¡Œï¼Œä¿®æ”¹ä¸ºï¼š# åŸæ¥å¯èƒ½æ˜¯ï¼š# listen_addresses = 'localhost'# ä¿®æ”¹ä¸ºï¼ˆå¼€å‘ç¯å¢ƒï¼‰ï¼šlisten_addresses = '*' âš ï¸ å®‰å…¨æé†’ï¼šlisten_addresses = â€˜*â€™ è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œè¿™åœ¨å¼€å‘ç¯å¢ƒå¯ä»¥æ¥å—ï¼Œä½†ç”Ÿäº§ç¯å¢ƒåº”è¯¥æŒ‡å®šå…·ä½“çš„ IP åœ°å€ã€‚å¦‚æœç³»ç»Ÿå¯ç”¨äº†é˜²ç«å¢™ï¼Œéœ€è¦å¼€æ”¾ PostgreSQL ç«¯å£ï¼ˆé»˜è®¤ 5432ï¼‰ã€‚3.3 å¼€å‘ç¯å¢ƒ - æ›´å®‰å…¨çš„è´¦å·ï¼ˆé™åˆ¶ç‰¹å®šç½‘æ®µï¼‰âœ… 3.3.1 ç›®æ ‡ ç”¨æˆ·åï¼šdevnet é™åˆ¶åªèƒ½ä» 192.168.0.0/16 ç½‘æ®µè®¿é—® å…¶ä»–æƒé™ä¸ä¸Šé¢ç±»ä¼¼ğŸ”§ 3.3.2 æ“ä½œCREATE ROLE devnet WITH LOGIN PASSWORD 'devnet123';ALTER ROLE devnet CREATEDB;GRANT CONNECT ON DATABASE postgres TO devnet;ç¼–è¾‘ pg_hba.confï¼šhost all devnet 192.168.0.0/16 md5è¿™ä¹ˆé…ç½®å¯å®ç°åªå…è®¸ 192.168.x.x çš„æœºå™¨è®¿é—®ã€‚3.4 ç”Ÿäº§ç¯å¢ƒ - åˆ›å»ºåº”ç”¨è´¦å·ï¼ˆæœ€å°æƒé™åŸåˆ™ï¼‰âœ… 3.4.1 ç›®æ ‡ ç”¨æˆ·åï¼šapp_user å¯†ç ï¼šprodpass ä»…èƒ½è®¿é—®æŸä¸€ä¸ªæ•°æ®åº“ï¼ˆæ¯”å¦‚ app_dbï¼‰ åœ¨è¯¥æ•°æ®åº“ä¸­æ‹¥æœ‰æŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æƒé™ï¼ˆä¸èƒ½å»ºåº“ã€åˆ åº“ç­‰ï¼‰ğŸ”§ 3.4.2 æ“ä½œ-- åˆ›å»ºæ•°æ®åº“CREATE DATABASE app_db;-- åˆ›å»ºè´¦å·CREATE ROLE app_user WITH LOGIN PASSWORD 'prodpass';-- æˆäºˆè¿æ¥æƒé™GRANT CONNECT ON DATABASE app_db TO app_user;-- åˆ‡æ¢åˆ°æ•°æ®åº“\\c app_db-- æˆæƒä½¿ç”¨ public æ¨¡å¼ä¸‹çš„è¡¨GRANT USAGE ON SCHEMA public TO app_user;-- æˆæƒ DML æƒé™GRANT SELECT, INSERT, UPDATE, DELETE ON ALL TABLES IN SCHEMA public TO app_user;-- å¦‚æœæœªæ¥æœ‰æ–°è¡¨ï¼Œç¡®ä¿æƒé™è‡ªåŠ¨ç»§æ‰¿ï¼ˆéå¸¸å…³é”®ï¼‰ALTER DEFAULT PRIVILEGES IN SCHEMA publicGRANT SELECT, INSERT, UPDATE, DELETE ON TABLES TO app_user;ç¼–è¾‘ pg_hba.conf é™åˆ¶è®¿é—®æ¥æºï¼šhost app_db app_user 10.0.0.0/24 md5 10.0.0.0/24 æ˜¯ä½ ç”Ÿäº§ç½‘ç»œæ®µçš„ IPï¼Œä»…å…è®¸è¯¥ç½‘æ®µæœºå™¨è®¿é—®ã€‚3.5 é‡å¯ PostgreSQLsudo systemctl reload postgresqlæˆ–è€…é‡å¯æ•´ä¸ªæœåŠ¡ï¼ˆé€šå¸¸ä¸éœ€è¦ï¼‰ï¼šsudo systemctl restart postgresqlå°ç»“ï¼ˆå¯¹ç…§è¡¨ï¼‰ ç¯å¢ƒç±»å‹ ç”¨æˆ·å æƒé™ è®¿é—®é™åˆ¶ å¼€å‘ç¯å¢ƒ develop ä»»æ„æ•°æ®åº“ï¼Œåˆ›å»ºæƒé™ ä»»æ„ IP (0.0.0.0/0) å®‰å…¨å¼€å‘ devnet åŒä¸Š å†…ç½‘ IP æ®µ ç”Ÿäº§ç¯å¢ƒ app_user ä»…è®¿é—®ç‰¹å®šåº“çš„ç‰¹å®šè¡¨æƒé™ ç”Ÿäº§æœåŠ¡ç½‘æ®µ 3.6 è¿æ¥æµ‹è¯•é‡å¯æœåŠ¡åï¼Œå¯ä»¥æµ‹è¯•è¿æ¥æ˜¯å¦æ­£å¸¸ï¼š# ä»æœ¬åœ°æµ‹è¯•psql -h localhost -U develop -d postgres# ä»è¿œç¨‹æµ‹è¯•ï¼ˆæ›¿æ¢ä¸ºå®é™…çš„æœåŠ¡å™¨ IPï¼‰psql -h 192.168.0.100 -U develop -d postgreså¦‚æœè¿æ¥å¤±è´¥ï¼Œæ£€æŸ¥ï¼š-PostgreSQL æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼šsudo systemctl status postgresql-postgresql.conf ä¸­çš„ listen_addresses æ˜¯å¦æ­£ç¡®é…ç½®-pg_hba.conf ä¸­çš„è®¿é—®è§„åˆ™æ˜¯å¦æ­£ç¡®-é˜²ç«å¢™æ˜¯å¦å¼€æ”¾äº† 5432 ç«¯å£-ç½‘ç»œè¿é€šæ€§æ˜¯å¦æ­£å¸¸ ğŸ’¡ æç¤ºï¼šé…ç½®ä¿®æ”¹åå¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆã€‚" }, { "title": "MySQL 8.4.5 åœ¨ Debian ä¸Šçš„å®‰è£…é…ç½®æŒ‡å—", "url": "/posts/database_MySQL8.4.5-Installation-and-Configuration-Guide-on-Debian.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "mysql", "date": "2025-06-18 17:23:00 +0800", "snippet": "1. å‰ç½®å‡†å¤‡å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…sudo apt update# mysql æœåŠ¡è¿è¡Œä»¥åŠä¸‹è½½å®‰è£…åŒ…éœ€è¦sudo apt install -y libaio1 libnuma1 libmecab2 libssl3 wget# mysql cliå·¥å…·è¿è¡Œéœ€è¦sudo apt install -y libncurses5 libncurses5-dev libncursesw5åˆ›å»º MySQL ç”¨...", "content": "1. å‰ç½®å‡†å¤‡å®‰è£…å¿…è¦çš„ä¾èµ–åŒ…sudo apt update# mysql æœåŠ¡è¿è¡Œä»¥åŠä¸‹è½½å®‰è£…åŒ…éœ€è¦sudo apt install -y libaio1 libnuma1 libmecab2 libssl3 wget# mysql cliå·¥å…·è¿è¡Œéœ€è¦sudo apt install -y libncurses5 libncurses5-dev libncursesw5åˆ›å»º MySQL ç”¨æˆ·å’Œç»„sudo groupadd mysqlsudo useradd -r -g mysql -s /bin/false mysql2. ä¸‹è½½å’Œè§£å‹ä¸‹è½½ MySQL 8.4.5 minimal ç‰ˆæœ¬cd /tmpwget https://cdn.mysql.com//Downloads/MySQL-8.4/mysql-8.4.5-linux-glibc2.28-x86_64-minimal.tar.xzè§£å‹åˆ°å®‰è£…ç›®å½•sudo tar -xf mysql-8.4.5-linux-glibc2.28-x86_64-minimal.tar.xz -C /usr/local/sudo mv /usr/local/mysql-8.4.5-linux-glibc2.28-x86_64-minimal /usr/local/mysqlsudo chown -R mysql:mysql /usr/local/mysql3. åˆ›å»ºæ•°æ®ç›®å½•å’Œé…ç½®åˆ›å»ºæ•°æ®ç›®å½•sudo mkdir -p /var/lib/mysqlsudo chown mysql:mysql /var/lib/mysqlsudo chmod 750 /var/lib/mysqlåˆ›å»ºæ—¥å¿—ç›®å½•sudo mkdir -p /var/log/mysqlsudo chown mysql:mysql /var/log/mysqlåˆ›å»ºé…ç½®æ–‡ä»¶sudo tee /etc/my.cnf &gt; /dev/null &lt;&lt;EOF[mysqld]# åŸºæœ¬è®¾ç½®user = mysqlpid-file = /var/run/mysqld/mysqld.pidsocket = /var/run/mysqld/mysqld.sockport = 3306basedir = /usr/local/mysqldatadir = /var/lib/mysql# æ—¥å¿—è®¾ç½®log-error = /var/log/mysql/error.logslow_query_log = 1slow_query_log_file = /var/log/mysql/slow.loglong_query_time = 2# å­—ç¬¦é›†è®¾ç½®character-set-server = utf8mb4collation-server = utf8mb4_unicode_ci# InnoDB è®¾ç½®innodb_buffer_pool_size = 128Minnodb_redo_log_capacity = 100Minnodb_flush_log_at_trx_commit = 1innodb_lock_wait_timeout = 50# ç½‘ç»œè®¾ç½®max_connections = 200max_connect_errors = 10table_open_cache = 64max_allowed_packet = 4Mbinlog_cache_size = 1Mmax_heap_table_size = 8Mtmp_table_size = 16M# MySQL 8.0+ å·²ç§»é™¤æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½ï¼Œæ— éœ€é…ç½®[mysql]default-character-set = utf8mb4[client]port = 3306socket = /var/run/mysqld/mysqld.sockdefault-character-set = utf8mb4EOF4. åˆå§‹åŒ– MySQLåˆ›å»º PID æ–‡ä»¶ç›®å½•sudo mkdir -p /var/run/mysqldsudo chown mysql:mysql /var/run/mysqldåˆå§‹åŒ–æ•°æ®åº“sudo /usr/local/mysql/bin/mysqld --initialize --user=mysql --basedir=/usr/local/mysql --datadir=/var/lib/mysqlé‡è¦ï¼š åˆå§‹åŒ–åä¼šç”Ÿæˆä¸´æ—¶å¯†ç ï¼Œè¯·è®°å½•ä¸‹æ¥ï¼šsudo grep 'temporary password' /var/log/mysql/error.log5. åˆ›å»º systemd æœåŠ¡æ–‡ä»¶åˆ›å»º systemd æœåŠ¡å•å…ƒsudo tee /etc/systemd/system/mysql.service &gt; /dev/null &lt;&lt;EOF[Unit]Description=MySQL Community ServerDocumentation=man:mysqld(8)Documentation=http://dev.mysql.com/doc/refman/en/using-systemd.htmlAfter=network.targetAfter=syslog.target[Install]WantedBy=multi-user.target[Service]User=mysqlGroup=mysqlType=notifyTimeoutSec=0PermissionsStartOnly=trueExecStartPre=/bin/mkdir -p /var/run/mysqldExecStartPre=/bin/chown mysql:mysql /var/run/mysqldExecStart=/usr/local/mysql/bin/mysqld --defaults-file=/etc/my.cnfExecReload=/bin/kill -HUP $MAINPIDKillMode=processRestart=on-failureRestartPreventExitStatus=1PrivateTmp=falseEOF6. å¯åŠ¨å’Œé…ç½®æœåŠ¡é‡æ–°åŠ è½½ systemd é…ç½®sudo systemctl daemon-reloadå¯åŠ¨ MySQL æœåŠ¡sudo systemctl start mysqlsudo systemctl enable mysqlæ£€æŸ¥æœåŠ¡çŠ¶æ€sudo systemctl status mysql7. å®‰å…¨é…ç½®è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰echo 'export PATH=$PATH:/usr/local/mysql/bin' &gt;&gt; ~/.bashrcsource ~/.bashrcè¿è¡Œå®‰å…¨è„šæœ¬sudo /usr/local/mysql/bin/mysql_secure_installationæŒ‰æç¤ºæ“ä½œï¼š è¾“å…¥åˆå§‹åŒ–æ—¶ç”Ÿæˆçš„ä¸´æ—¶å¯†ç  è®¾ç½®æ–°çš„ root å¯†ç  ç§»é™¤åŒ¿åç”¨æˆ· ç¦ç”¨è¿œç¨‹ root ç™»å½• ç§»é™¤æµ‹è¯•æ•°æ®åº“ é‡æ–°åŠ è½½æƒé™è¡¨8. æµ‹è¯•è¿æ¥ä½¿ç”¨æ–°å¯†ç è¿æ¥/usr/local/mysql/bin/mysql -u root -pæµ‹è¯• SQL å‘½ä»¤é¦–æ¬¡ç™»å½•åï¼Œéœ€è¦å…ˆä¿®æ”¹å¯†ç -- é‡ç½® root å¯†ç ï¼ˆå°† 'your_new_password' æ›¿æ¢ä¸ºä½ æƒ³è¦çš„å¯†ç ï¼‰ALTER USER 'root'@'localhost' IDENTIFIED BY 'your_new_password';-- åˆ·æ–°æƒé™FLUSH PRIVILEGES;éªŒè¯å¯†ç é‡ç½®æˆåŠŸSELECT version();SHOW DATABASES;EXIT;9. è´¦å·æˆæƒå¼€å‘ç¯å¢ƒ-åˆ›å»ºå¼€å‘è´¦å·å¦‚æœæ˜¯å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå¼€å‘è´¦å·ï¼Œèµ‹äºˆå¯¹æ•°æ®åº“çš„åˆ›å»ºä¸å¢åˆ æ”¹æŸ¥æƒé™-- åˆ›å»º develop ç”¨æˆ·ï¼Œå…è®¸ä»ä»»æ„ IP è®¿é—®CREATE USER 'develop'@'%' IDENTIFIED BY 'develop_password';-- æˆäºˆ develop ç”¨æˆ·åˆ›å»ºæ•°æ®åº“å’Œå…¨å±€ DML æƒé™GRANT CREATE, DROP ON *.* TO 'develop'@'%';GRANT SELECT, INSERT, UPDATE, DELETE ON *.* TO 'develop'@'%';GRANT CREATE ROUTINE, ALTER ROUTINE ON *.* TO 'develop'@'%';GRANT INDEX, ALTER ON *.* TO 'develop'@'%';GRANT SELECT ON mysql.* TO 'develop'@'%';-- åˆ·æ–°æƒé™FLUSH PRIVILEGES;ç”Ÿäº§ç¯å¢ƒ-åˆ›å»ºåº”ç”¨è´¦å·å¦‚æœæ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒï¼Œä¸€ä¸ªæœåŠ¡é€šå¸¸æ‹¥æœ‰å¯¹åº”ç‹¬ç«‹çš„ mysql è´¦å·ï¼Œè¯¥è´¦å·åªå¯¹æ­¤é¡¹ç›®çš„æ•°æ®åº“æ‹¥æœ‰å¢åˆ æ”¹æŸ¥æƒé™-- åˆ›å»º app1 ç”¨æˆ·ï¼Œå…è®¸ä»ä»»æ„ IP è®¿é—® CREATE USER 'app1'@'%' IDENTIFIED BY 'app1_password';-- ç¡®ä¿ app1 æ•°æ®åº“å­˜åœ¨CREATE DATABASE IF NOT EXISTS app1 CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;-- æˆäºˆ app1 ç”¨æˆ·å¯¹ app1 æ•°æ®åº“çš„æƒé™GRANT SELECT, INSERT, UPDATE, DELETE ON app1.* TO 'app1'@'%';GRANT CREATE, DROP, INDEX, ALTER ON app1.* TO 'app1'@'%';-- åˆ·æ–°æƒé™FLUSH PRIVILEGES;åˆ›å»ºæ›´å®‰å…¨çš„è´¦å·ï¼ˆæ¨èï¼‰å¦‚æœä½ ä¸éœ€è¦çœŸæ­£çš„â€ä»»æ„ IPâ€è®¿é—®ï¼Œå»ºè®®é™åˆ¶åˆ°ç‰¹å®šç½‘æ®µ-- åˆ›å»ºé™åˆ¶ç½‘æ®µçš„ç”¨æˆ·ï¼ˆä¾‹å¦‚ï¼š192.168.1.0/24 ç½‘æ®µï¼‰CREATE USER 'app1'@'192.168.1.%' IDENTIFIED BY 'app1_password';-- æˆæƒGRANT SELECT, INSERT, UPDATE, DELETE ON app1.* TO 'app1'@'192.168.1.%';GRANT CREATE, DROP, INDEX, ALTER ON app1.* TO 'app1'@'192.168.1.%';-- åˆ·æ–°æƒé™FLUSH PRIVILEGES;10. å¸¸ç”¨ç®¡ç†å‘½ä»¤æœåŠ¡ç®¡ç†# å¯åŠ¨æœåŠ¡sudo systemctl start mysql# åœæ­¢æœåŠ¡sudo systemctl stop mysql# é‡å¯æœåŠ¡sudo systemctl restart mysql# æŸ¥çœ‹çŠ¶æ€sudo systemctl status mysql# æŸ¥çœ‹æ—¥å¿—sudo journalctl -u mysql -f# å¼€æœºè‡ªå¯sudo systemctl enable mysql# ç¦ç”¨å¼€æœºè‡ªå¯sudo systemctl disable mysqlæ—¥å¿—æŸ¥çœ‹# æŸ¥çœ‹é”™è¯¯æ—¥å¿—sudo tail -f /var/log/mysql/error.log# æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—sudo tail -f /var/log/mysql/slow.log11. æ•…éšœæ’é™¤å¸¸è§é—®é¢˜ æƒé™é—®é¢˜ï¼šç¡®ä¿æ‰€æœ‰ MySQL ç›¸å…³ç›®å½•çš„æ‰€æœ‰è€…æ˜¯ mysql ç”¨æˆ· ç«¯å£å ç”¨ï¼šæ£€æŸ¥ 3306 ç«¯å£æ˜¯å¦è¢«å ç”¨ é…ç½®æ–‡ä»¶é”™è¯¯ï¼šæ£€æŸ¥ /etc/my.cnf è¯­æ³•æ˜¯å¦æ­£ç¡® å†…å­˜ä¸è¶³ï¼šé€‚å½“è°ƒæ•´ innodb_buffer_pool_size ç­‰å‚æ•°æ£€æŸ¥ç«¯å£sudo netstat -tlnp | grep 3306æ£€æŸ¥è¿›ç¨‹ps aux | grep mysqlæ³¨æ„äº‹é¡¹ å¤‡ä»½é‡è¦ï¼šå®šæœŸå¤‡ä»½æ•°æ®åº“ é˜²ç«å¢™è®¾ç½®ï¼šå¦‚éœ€è¿œç¨‹è¿æ¥ï¼Œéœ€è¦å¼€æ”¾ 3306 ç«¯å£ å®šæœŸæ›´æ–°ï¼šå…³æ³¨ MySQL å®‰å…¨æ›´æ–° ç›‘æ§èµ„æºï¼šç›‘æ§ CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ æ—¥å¿—è½®è½¬ï¼šé…ç½®æ—¥å¿—è½®è½¬é˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§å®‰è£…å®Œæˆåï¼ŒMySQL å°±ä¼šä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œï¼Œå¯ä»¥é€šè¿‡ systemctl è¿›è¡Œç®¡ç†ã€‚" }, { "title": "æ€æ ·åœ¨Debiané‡Œä½¿ç”¨kvmè™šæ‹Ÿæœº", "url": "/posts/tools_how-to-use-kvm-on-debian.html", "categories": "å·¥å…·", "tags": "kvm", "date": "2025-06-14 17:09:00 +0800", "snippet": "ä¸€ã€å®‰è£…1.1.ç¡®è®¤kvmæ˜¯å¦å·²ç»å¯ç”¨é¦–å…ˆæŸ¥çœ‹kvmæ˜¯å¦æ­£å¸¸å¯ç”¨ï¼Œå¦‚ä¸‹å‘½ä»¤lsmod | grep kvmå¦‚æœæ˜¾ç¤ºä»¥ä¸‹ç±»ä¼¼çš„ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºkvmå·²ç»å¯ç”¨ï¼Œå¯ä»¥ç»§ç»­å®‰è£…kvm_intel 380928 0kvm 1146880 1 kvm_intelirqbypass 16384 1 kvmç°ä»£çš„æ“ä½œç³»ç»Ÿå·²...", "content": "ä¸€ã€å®‰è£…1.1.ç¡®è®¤kvmæ˜¯å¦å·²ç»å¯ç”¨é¦–å…ˆæŸ¥çœ‹kvmæ˜¯å¦æ­£å¸¸å¯ç”¨ï¼Œå¦‚ä¸‹å‘½ä»¤lsmod | grep kvmå¦‚æœæ˜¾ç¤ºä»¥ä¸‹ç±»ä¼¼çš„ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºkvmå·²ç»å¯ç”¨ï¼Œå¯ä»¥ç»§ç»­å®‰è£…kvm_intel 380928 0kvm 1146880 1 kvm_intelirqbypass 16384 1 kvmç°ä»£çš„æ“ä½œç³»ç»Ÿå·²ç»é»˜è®¤å¼€å¯äº†kvmåŠŸèƒ½ã€‚1.2.å®‰è£…å·¥å…·åŒ…apt install qemu-system libvirt-daemon-system virt-manager1.3.å¯ç”¨libvirtdsystemctl enable libvirtdsystemctl start libvirtdlibvirtdæ˜¯libvirtçš„å®ˆæŠ¤è¿›ç¨‹ï¼Œå®ƒè´Ÿè´£ç®¡ç†è™šæ‹Ÿæœºï¼Œå¯åŠ¨ã€åœæ­¢ã€é…ç½®ç­‰ï¼Œå³è™šæ‹ŸåŒ–å·¥å…·çš„ç»Ÿä¸€æ¥å£ã€‚1.4.å¯åŠ¨é»˜è®¤ç½‘è·¯åœ¨ libvirt ä¸­ï¼Œè™šæ‹Ÿæœºéœ€è¦è¿æ¥åˆ°è™šæ‹Ÿç½‘ç»œï¼Œè€Œé»˜è®¤ç½‘ç»œ (default) åœ¨å®‰è£…åæ²¡æœ‰è‡ªåŠ¨æ¿€æ´»ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥æ¿€æ´»é»˜è®¤ç½‘ç»œï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å¯åŠ¨å¹¶æ¿€æ´» default ç½‘ç»œvirsh net-start defaultä¸ºäº†é¿å…æ¯æ¬¡å¯åŠ¨è™šæ‹Ÿæœºæ—¶æ‰‹åŠ¨å¯åŠ¨ç½‘ç»œï¼Œå¯ä»¥è®¾ç½® default ç½‘ç»œä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨ï¼švirsh net-autostart defaultå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰ç½‘ç»œçš„çŠ¶æ€ï¼Œç¡®ä¿ default ç½‘ç»œå¤„äº â€œactiveâ€ çŠ¶æ€ï¼švirsh net-list --allè¾“å‡ºä¸­åº”è¯¥çœ‹åˆ°å¦‚ä¸‹ç±»ä¼¼çš„ç»“æœï¼Œä»£è¡¨é»˜è®¤ç½‘ç»œå·²å¯ç”¨ åç§° çŠ¶æ€ è‡ªåŠ¨å¯åŠ¨ æŒä¹…-------------------------------------- default active yes yesäºŒã€åˆ›å»ºè™šæ‹Ÿæœº2.1.åˆ›å»ºè™šæ‹Ÿæœºç©ºç›˜æ ¹æ®è‡ªå·±ç”µè„‘çš„æƒ…å†µï¼Œåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œæˆ‘è¿™é‡Œå­˜æ”¾åœ¨/opt/kvmä¹‹ä¸‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤# åˆ›å»ºç›®å½•mkdir -p /opt/kvm# åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœºç©ºç›˜qemu-img create -f qcow2 /opt/kvm/debian12-base.qcow2 30G2.2.é€šè¿‡isoé•œåƒæ–‡ä»¶åˆ›å»ºè™šæ‹Ÿæœºå…ˆåˆ›å»ºä¸€ä¸ªç›®å½• /var/libvirt/qemu/ï¼Œå› ä¸ºæ¥ä¸‹æ¥è™šæ‹Ÿæœºéœ€è¦ä½¿ç”¨åˆ°è¯¥ç›®å½•ã€‚virt-install \\ --name debian12-base \\ --ram 4096 \\ --vcpus 2 \\ --disk path=/opt/kvm/debian12-base.qcow2,size=30 \\ --os-variant debian11 \\ --network bridge=virbr0 \\ --graphics spice \\ --cdrom /opt/kvm/iso/debian-12.11.0-amd64-DVD-1.iso \\ --boot hd,cdrom --ram: å†…å­˜å¤§å°ï¼ˆMBï¼‰ã€‚ --disk: è™šæ‹Ÿç£ç›˜è·¯å¾„å’Œå¤§å°ï¼ˆGBï¼‰ã€‚ --os-variant: é€šè¿‡ osinfo-query os æŸ¥çœ‹æ”¯æŒçš„ç³»ç»Ÿå˜ä½“ï¼Œé€šè¿‡ apt install libosinfo-bin osinfo-db å®‰è£…ã€‚ --network: ä½¿ç”¨é»˜è®¤çš„ NAT ç½‘ç»œ virbr0ï¼Œæˆ–æ›¿æ¢ä¸ºå…¶ä»–æ¡¥æ¥ç½‘ç»œã€‚â€“os-variant æ˜¯æ¨èä½¿ç”¨çš„å‚æ•°ï¼Œç”¨äºä¸ºè™šæ‹Ÿæœºå¯ç”¨é’ˆå¯¹ç‰¹å®šæ“ä½œç³»ç»Ÿçš„ä¼˜åŒ–ï¼ˆå¦‚æ—¶é’Ÿè®¾ç½®ã€ç£ç›˜æ§åˆ¶å™¨ç­‰ï¼‰ã€‚" }, { "title": "Android Studio å›½å†…é…ç½®å®Œå…¨æ”»ç•¥ï¼šå‘Šåˆ«å¡é¡¿ï¼Œç§’é€Ÿå¼€å‘ï¼", "url": "/posts/android_android-gradle-china-setup.html", "categories": "Android", "tags": "gradle", "date": "2025-06-10 13:16:00 +0800", "snippet": "ä¸€ã€ğŸ”¥ ç—›ç‚¹åˆ†æï¼šä¸ºä»€ä¹ˆåœ¨å›½å†…ä½¿ç”¨ Android Studio è¿™ä¹ˆéš¾ï¼Ÿä½œä¸º Android å¼€å‘è€…ï¼Œç›¸ä¿¡ä½ ä¸€å®šé‡åˆ°è¿‡è¿™äº›ä»¤äººå´©æºƒçš„åœºæ™¯ï¼š ğŸŒ æ–°å»ºé¡¹ç›®åŒæ­¥æ—¶é—´è¶…é•¿ï¼šä¸€ä¸ªç®€å•çš„ Hello World é¡¹ç›®ï¼ŒåŒæ­¥è¦ç­‰åŠå°æ—¶ âŒ Gradle ä¸‹è½½é¢‘ç¹å¤±è´¥ï¼šConnection timed out é”™è¯¯æ»¡å±é£ ğŸ”„ ä¾èµ–åº“ä¸‹è½½è¶…æ…¢ï¼šæ·»åŠ ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œç­‰åˆ°å¤©è’åœ°è€ ğŸ˜¤ æ˜æ˜é…ç½®äº†é•œåƒï¼Œè¿˜...", "content": "ä¸€ã€ğŸ”¥ ç—›ç‚¹åˆ†æï¼šä¸ºä»€ä¹ˆåœ¨å›½å†…ä½¿ç”¨ Android Studio è¿™ä¹ˆéš¾ï¼Ÿä½œä¸º Android å¼€å‘è€…ï¼Œç›¸ä¿¡ä½ ä¸€å®šé‡åˆ°è¿‡è¿™äº›ä»¤äººå´©æºƒçš„åœºæ™¯ï¼š ğŸŒ æ–°å»ºé¡¹ç›®åŒæ­¥æ—¶é—´è¶…é•¿ï¼šä¸€ä¸ªç®€å•çš„ Hello World é¡¹ç›®ï¼ŒåŒæ­¥è¦ç­‰åŠå°æ—¶ âŒ Gradle ä¸‹è½½é¢‘ç¹å¤±è´¥ï¼šConnection timed out é”™è¯¯æ»¡å±é£ ğŸ”„ ä¾èµ–åº“ä¸‹è½½è¶…æ…¢ï¼šæ·»åŠ ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œç­‰åˆ°å¤©è’åœ°è€ ğŸ˜¤ æ˜æ˜é…ç½®äº†é•œåƒï¼Œè¿˜æ˜¯ä¼šå¡ï¼šä»¥ä¸ºè§£å†³äº†ï¼Œç»“æœè¿˜æ˜¯æ…¢å¾—è¦å‘½è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯ï¼šç½‘ç»œç¯å¢ƒé™åˆ¶å¯¼è‡´çš„èµ„æºä¸‹è½½å›°éš¾ã€‚æœ¬æ–‡å°†æä¾›ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼äºŒã€ğŸ¯ æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼šä¸¤æ­¥é…ç½®æ³•2.1 ç¬¬ä¸€æ­¥ï¼šé…ç½® Gradle é•œåƒï¼ˆå…³é”®ä¸­çš„å…³é”®ï¼‰å¤§å¤šæ•°æ•™ç¨‹åªå‘Šè¯‰ä½ ä¿®æ”¹ gradle-wrapper.properties æ–‡ä»¶ï¼Œä½†è¿™åªè§£å†³äº†ä¸€åŠé—®é¢˜ï¼å¸¸è§çš„é”™è¯¯é…ç½®ï¼š# âŒ è¿™æ ·é…ç½®ä¸å®Œæ•´ï¼distributionUrl=https://mirrors.cloud.tencent.com/gradle/gradle-8.11.1-bin.zipæ­£ç¡®çš„å®Œæ•´é…ç½®ï¼š# âœ… ä½¿ç”¨ all è€Œä¸æ˜¯ binï¼Œè¿™æ˜¯å…³é”®ï¼distributionUrl=https://mirrors.cloud.tencent.com/gradle/gradle-8.11.1-all.zipä¸ºä»€ä¹ˆè¦ç”¨ all è€Œä¸æ˜¯ binï¼ŸAndroid Studio å®é™…ä¸Šéœ€è¦ä¸‹è½½ä¸¤ä¸ªæ–‡ä»¶ï¼š gradle-x.x.x-bin.zipï¼šåŸºç¡€è¿è¡Œæ–‡ä»¶ gradle-x.x.x-src.zipï¼šæºç æ–‡ä»¶ï¼ˆç”¨äºä»£ç æç¤ºå’Œè°ƒè¯•ï¼‰å¦‚æœåªé…ç½® bin ç‰ˆæœ¬ï¼Œå½“ IDE éœ€è¦æºç æ—¶ï¼Œè¿˜æ˜¯ä¼šå»å®˜æ–¹åœ°å€ä¸‹è½½ src ç‰ˆæœ¬ï¼Œå¯¼è‡´å¡é¡¿ã€‚ä½¿ç”¨ all ç‰ˆæœ¬å¯ä»¥ä¸€æ¬¡æ€§è§£å†³ä¸¤ä¸ªé—®é¢˜ï¼2.2 ç¬¬äºŒæ­¥ï¼šé…ç½®ä»“åº“é•œåƒåœ¨é¡¹ç›®æ ¹ç›®å½•çš„ settings.gradle.kts æ–‡ä»¶ä¸­æ·»åŠ å›½å†…é•œåƒï¼špluginManagement { repositories { // é˜¿é‡Œäº‘é•œåƒ - ä¸“é—¨ä¼˜åŒ– Android ç›¸å…³ä¾èµ– maven(\"https://maven.aliyun.com/repository/google\") { content { includeGroupByRegex(\"com\\\\.android.*\") includeGroupByRegex(\"com\\\\.google.*\") includeGroupByRegex(\"androidx.*\") } } maven(\"https://maven.aliyun.com/repository/central\") maven(\"https://maven.aliyun.com/repository/gradle-plugin\") // ä¿ç•™å®˜æ–¹ä»“åº“ä½œä¸ºå¤‡é€‰ gradlePluginPortal() google() }}dependencyResolutionManagement { repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS) repositories { // åŒæ ·çš„é•œåƒé…ç½® maven(\"https://maven.aliyun.com/repository/google\") { content { includeGroupByRegex(\"com\\\\.android.*\") includeGroupByRegex(\"com\\\\.google.*\") includeGroupByRegex(\"androidx.*\") } } maven(\"https://maven.aliyun.com/repository/central\") maven(\"https://maven.aliyun.com/repository/public\") maven(\"https://maven.aliyun.com/repository/gradle-plugin\") gradlePluginPortal() google() }}2.3 ç¬¬ä¸‰æ­¥ï¼šéªŒè¯é…ç½®å¹¶æµ‹è¯•é…ç½®å®Œæˆåï¼Œå»ºè®®ï¼š æ¸…ç†å¹¶é‡æ–°åŒæ­¥é¡¹ç›® åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•é¡¹ç›®éªŒè¯é€Ÿåº¦ æ£€æŸ¥æ˜¯å¦è¿˜æœ‰ç½‘ç»œè¯·æ±‚æŒ‡å‘å®˜æ–¹æº âš ï¸ æ³¨æ„ï¼šä¸å»ºè®®ä½¿ç”¨å…¨å±€ Gradle é…ç½®è™½ç„¶ç½‘ä¸Šå¾ˆå¤šæ•™ç¨‹æ¨èåœ¨ ~/.gradle/init.gradle ä¸­é…ç½®å…¨å±€ä»“åº“ï¼Œä½† Google å®˜æ–¹ä¸æ¨èè¿™ç§åšæ³•ï¼Œå› ä¸ºï¼š å¯èƒ½å½±å“å…¶ä»–é¡¹ç›®çš„æ„å»º ä¸åˆ©äºé¡¹ç›®çš„å¯ç§»æ¤æ€§å’Œå›¢é˜Ÿåä½œ å¯èƒ½å¯¼è‡´æ„å»ºç»“æœä¸ä¸€è‡´æ­£ç¡®åšæ³•æ˜¯åœ¨æ¯ä¸ªé¡¹ç›®çš„ settings.gradle.kts ä¸­å•ç‹¬é…ç½®ã€‚ä¸‰ã€ğŸš€ è¿›é˜¶ä¼˜åŒ–æŠ€å·§3.1 è®¾ç½® Gradle å®ˆæŠ¤è¿›ç¨‹å‚æ•°åœ¨ gradle.properties æ–‡ä»¶ä¸­æ·»åŠ ï¼š# å¯ç”¨å®ˆæŠ¤è¿›ç¨‹org.gradle.daemon=true# å¢åŠ å †å†…å­˜org.gradle.jvmargs=-Xmx4g -XX:MaxMetaspaceSize=512m# å¯ç”¨å¹¶è¡Œæ„å»ºorg.gradle.parallel=true# æŒ‰éœ€é…ç½®org.gradle.configureondemand=true3.2 æ¸…ç†ç¼“å­˜é‡æ–°å¼€å§‹å¦‚æœä¹‹å‰é…ç½®æœ‰é—®é¢˜ï¼Œå»ºè®®æ¸…ç†ç¼“å­˜ï¼š# æ¸…ç†é¡¹ç›®ç¼“å­˜./gradlew clean# æ¸…ç† Gradle ç¼“å­˜ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰rm -rf ~/.gradle/caches/å››ã€âš¡ å¸¸è§é—®é¢˜ Q&amp;AQ: ä¸ºä»€ä¹ˆé…ç½®äº†é•œåƒè¿˜æ˜¯å¾ˆæ…¢ï¼ŸA: æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† all ç‰ˆæœ¬çš„ Gradleï¼Œè€Œä¸æ˜¯ bin ç‰ˆæœ¬ã€‚Q: é˜¿é‡Œäº‘é•œåƒå’Œè…¾è®¯äº‘é•œåƒå“ªä¸ªæ›´å¥½ï¼ŸA: éƒ½ä¸é”™ï¼Œé˜¿é‡Œäº‘å¯¹ Android ä¾èµ–ä¼˜åŒ–æ›´å¥½ï¼Œè…¾è®¯äº‘é€Ÿåº¦ç¨å¿«ï¼Œå¯ä»¥éƒ½é…ç½®ä½œä¸ºå¤‡é€‰ã€‚Q: é…ç½®åç¬¬ä¸€æ¬¡è¿˜æ˜¯å¾ˆæ…¢æ€ä¹ˆåŠï¼ŸA: ç¬¬ä¸€æ¬¡éœ€è¦ä¸‹è½½ç¼“å­˜ï¼Œä¹‹åå°±ä¼šå¾ˆå¿«ã€‚å¯ä»¥å…ˆåˆ›å»ºä¸€ä¸ªç®€å•é¡¹ç›®â€é¢„çƒ­â€ã€‚Q: å¯ä»¥é…ç½®å…¨å±€ Gradle è®¾ç½®å—ï¼ŸA: ä¸æ¨èã€‚Google å»ºè®®åœ¨æ¯ä¸ªé¡¹ç›®ä¸­å•ç‹¬é…ç½®ï¼Œè¿™æ ·æ›´åˆ©äºå›¢é˜Ÿåä½œå’Œé¡¹ç›®å¯ç§»æ¤æ€§ã€‚" }, { "title": "æ€æ ·è‡ªå®šä¹‰ä½ çš„cinnmonæ¡Œé¢åƒmacOSä¸€æ ·", "url": "/posts/tools_how_to_customize_your_cinnamon_desktop_look_like_macos.html", "categories": "å·¥å…·", "tags": "", "date": "2025-05-01 10:30:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°æœ¬æ•™ç¨‹ä¹Ÿé€‚ç”¨äºä½¿ç”¨Cinnamonæ¡Œé¢çš„Linuxå‘è¡Œç‰ˆï¼Œä¾‹å¦‚Linux Mintã€Feren OSã€å¸¦æœ‰Cinnamonçš„OpenSUSEã€Debian Cinnamonç‰ˆæœ¬ã€Fedora Cinnamonç‰ˆæœ¬ã€å¸¦æœ‰Cinnamonæ¡Œé¢çš„Archä»¥åŠManjaro Cinnamonç‰ˆã€‚äºŒã€å®ç°è¿‡ç¨‹2.1 ä¸‹è½½å£çº¸é€šè¿‡https://www.pling.com/p/1400125è¿™ä¸ª...", "content": "ä¸€ã€æ¦‚è¿°æœ¬æ•™ç¨‹ä¹Ÿé€‚ç”¨äºä½¿ç”¨Cinnamonæ¡Œé¢çš„Linuxå‘è¡Œç‰ˆï¼Œä¾‹å¦‚Linux Mintã€Feren OSã€å¸¦æœ‰Cinnamonçš„OpenSUSEã€Debian Cinnamonç‰ˆæœ¬ã€Fedora Cinnamonç‰ˆæœ¬ã€å¸¦æœ‰Cinnamonæ¡Œé¢çš„Archä»¥åŠManjaro Cinnamonç‰ˆã€‚äºŒã€å®ç°è¿‡ç¨‹2.1 ä¸‹è½½å£çº¸é€šè¿‡https://www.pling.com/p/1400125è¿™ä¸ªé“¾æ¥ä¸‹è½½å£çº¸ã€‚åç»­æˆ‘ä»¬å¯ä»¥å°†è¿™äº›macOSé‡Œçš„å£çº¸è®¾ç½®æˆæˆ‘ä»¬ç”µè„‘çš„å£çº¸ã€‚2.2 å®‰è£… Gtk ä¸»é¢˜ - Whitesur Gtk Theme Light/Darkå…ˆå®‰è£…åŸºç¡€å·¥å…·åŒ…sudo apt install sassc optipng inkscape libcanberra-gtk-module libglib2.0-dev libxml2-utils gitæ‹‰å–ä»£ç ï¼Œå®‰è£…ä¸»é¢˜åŒ…cd ~/Downloadsgit clone https://github.com/vinceliuice/WhiteSur-gtk-theme.gitcd WhiteSur-gtk-theme/./install.sh2.3 å®‰è£…å›¾æ ‡ä¸»é¢˜ - Whitesur Icon Theme Light/Darkcd ~/Downloadsgit clone https://github.com/vinceliuice/WhiteSur-icon-theme.gitcd WhiteSur-icon-theme/./install.sh2.4 å®‰è£…é¼ æ ‡ä¸»é¢˜ - McMojave Cursorscd ~/Downloadsgit clone https://github.com/vinceliuice/McMojave-cursors.git2.5 è®¾ç½®ä¸»é¢˜æ‰“å¼€åˆ°cinnamonçš„ä¸»é¢˜è®¾ç½®çª—å£ï¼šç³»ç»Ÿè®¾ç½®-&gt;ä¸»é¢˜ï¼Œé€‰æ‹©æˆ‘ä»¬ä¸Šè¿°æ­¥éª¤å®‰è£…å¥½çš„ä¸»é¢˜ï¼Œå¦‚ä¸‹æˆªå›¾2.6 é…ç½®é¢æ¿å’Œé¢æ¿å°å·¥å…·2.6.1 ç§»é™¤é»˜è®¤é¢æ¿å°å·¥å…· ç§»åŠ¨é¢æ¿ï¼šé¼ æ ‡æ‚¬æµ®åˆ°æ¡Œé¢åº•éƒ¨ç¨‹åºé¢æ¿ä¸Š -&gt; é€‰æ‹©å³é”®èœå• -&gt; é€‰æ‹©ç§»åŠ¨ -&gt; å°†é¢æ¿ç§»åŠ¨åˆ°é¡¶éƒ¨ ç§»é™¤åˆ†ç»„çª—å£åˆ—è¡¨å’Œèœå•ï¼šç‚¹å‡»å³é”® -&gt; æ‰“å¼€é¢æ¿ç¼–è¾‘æ¨¡å¼ ï¼ˆ1ï¼‰å°†é¼ æ ‡æ‚¬æµ®åœ¨æ­£åœ¨æ‰“å¼€çš„åº”ç”¨å›¾æ ‡ä¸Š -&gt; ç§»é™¤åˆ†ç»„çª—å£åˆ—è¡¨ï¼ˆ2ï¼‰å°†é¼ æ ‡æ‚¬æµ®åˆ°èœå•ä¸Š -&gt; ç§»é™¤èœå•ï¼ˆ3ï¼‰å°†é¼ æ ‡æ‚¬æµ®åˆ°åˆ†å‰²ç¬¦ä¸Š -&gt; ç§»é™¤åˆ†éš”ç¬¦2.6.2 é…ç½®å¯åŠ¨èœå• å°†é¼ æ ‡æ‚¬æµ®åˆ°é¢æ¿ä¸Šï¼Œå³é”®æ‰“å¼€é¢æ¿å°å·¥å…·ï¼šé€‰æ‹©åˆ°â€œä¸‹è½½â€é€‰é¡¹å¡ï¼Œä¸‹è½½â€œcinnamonmenuâ€å·¥å…·ï¼Œå®‰è£…æˆåŠŸåï¼Œæ·»åŠ åˆ°é¢æ¿ä¸Šï¼Œå¦‚ä¸‹å›¾ å°†é¼ æ ‡æ‚¬æµ®åˆ°åˆšæ‰å¢åŠ çš„èœå•ä¸Š -&gt; å³é”®æ‰“å¼€é…ç½®é¢æ¿ -&gt; åˆ‡æ¢åˆ°èœå•å¤–è§‚é€‰é¡¹å¡ -&gt; å‹¾é€‰â€œè‡ªå®šä¹‰å›¾æ ‡â€ï¼Œæ ¹æ®å¦‚ä¸‹å›¾æç¤ºï¼Œé€‰æ‹©å¯¹åº”çš„å¯åŠ¨å›¾æ ‡ æˆ‘ä»¬å°†èœå•çš„é¢æ¿æ–‡å­—â€œMenuâ€ä¿®æ”¹ä¸ºâ€œApplicationsâ€ å†åˆ‡æ¢åˆ°å¸ƒå±€ -&gt; ä¾§è¾¹æ ä½ç½® -&gt; å°†åº•éƒ¨ä¿®æ”¹ä¸ºé¡¶éƒ¨ -&gt; æœ€åå…³é—­é¢æ¿ç¼–è¾‘æ¨¡å¼ 2.6.3 é…ç½®å…¶ä»–é¢æ¿èœå• é€šè¿‡èœå•æ‰“å¼€é¢æ¿å°å·¥å…·åº”ç”¨ -&gt; åœ¨ç®¡ç†åˆ‡æ¢å¡æœç´¢â€œscaleâ€ -&gt; é€‰ä¸­â€œç¼©æ”¾â€ä¹‹åç‚¹å‡»æ·»åŠ  åœ¨ç®¡ç†åˆ‡æ¢å¡æœç´¢â€œuserâ€ -&gt; é€‰ä¸­â€œç”¨æˆ·é¢æ¿å°å·¥å…·â€ä¹‹åç‚¹å‡»æ·»åŠ  -&gt; å†å³é”®ç‚¹å‡»é¢æ¿ -&gt; å‹¾é€‰é¢æ¿ç¼–è¾‘æ¨¡å¼ -&gt; å°†â€œç”¨æˆ·é¢æ¿å°å·¥å…·â€æ¨åŠ¨åˆ°æœ€å³ä¾§ -&gt; æœ€åå…³é—­é¢æ¿ç¼–è¾‘æ¨¡å¼ ç°åœ¨æˆ‘ä»¬è¿˜å¯ä»¥é€‰æ‹©ç¼–è¾‘å°é¢æ¿ä¸­â€œæ—¥å†â€é¢æ¿çš„æ ¼å¼ï¼Œå¯ä»¥é€‰æ‹©è¿™æ ·çš„æ ¼å¼ %A, %Y-%m-%d, %H:%M 2.7 å®‰è£…å’Œé…ç½®Plank Dockæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…sudo apt install plankç°åœ¨é€šè¿‡èœå•æ‰“å¼€plankï¼Œå†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ä¸Šè¿°ä¸‹è½½çš„ä¸»é¢˜é™„å¸¦çš„plankçš„ä¸»é¢˜æ‹·è´åˆ°plankçš„ä¸»é¢˜é…ç½®æ–‡ä»¶å¤¹cp -r ~/Downloads/WhiteSur-gtk-theme/src/other/plank/* ~/.local/share/plank/themes/ç°åœ¨éœ€è¦å°†é¼ æ ‡æ‚¬æµ®åˆ°planké¢æ¿ä¹‹ä¸Šï¼Œä¿®æ”¹ä¸»é¢˜ä¸ºtheme-darkï¼Œå…¶ä»–é…ç½®å¯ä»¥æ ¹æ®ä¸ªäººå–œå¥½é€‰æ‹©ï¼Œå¦‚ä¸‹å›¾æœ€åï¼Œæ‰“å¼€â€œå¼€å¯è‡ªå¯ç¨‹åºâ€åº”ç”¨ï¼Œè®¾ç½®plankä¸ºå¼€æœºè‡ªå¯ã€‚ä¸‰ã€æ€»ç»“ç»è¿‡ä»¥ä¸Šæ“ä½œæ­¥éª¤ï¼Œå½“å‰æ¡Œé¢å·²ç»æœ‰macOSçš„åŸºç¡€å¤–è§‚äº†ï¼Œå¦‚æœè¿˜æƒ³è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå¯ä»¥å‚æ ¹æ®ä¸ªäººéœ€æ±‚è¿›è¡Œç»†å¾®è°ƒæ•´ã€‚" }, { "title": "åˆ©ç”¨ UNIX SIGTERM ä¿¡å·å®ç° CLI ç¨‹åºå¹³æ»‘é‡å¯", "url": "/posts/php_Utilize-UNIX-SIGTERM-signal-to-achieve-smooth-restart-of-CLI-program.html", "categories": "PHP", "tags": "", "date": "2025-02-07 09:54:00 +0800", "snippet": "ä¸€ã€å¼•è¨€å½“æˆ‘ä»¬å¼€å‘åå°ä»»åŠ¡æˆ–æœåŠ¡æ—¶ï¼Œå¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢ç¨‹åºæ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„è¯é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨é¢‘ç¹æ›´æ–°ä»£ç çš„åœºæ™¯ä¸‹ï¼Œç¨‹åºçªç„¶ä¸­æ–­å¯èƒ½å¯¼è‡´ä»»åŠ¡ä¸­æ–­æˆ–æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚æœ¬æ–‡ä»¥ç®€å•çš„ PHP CLI ä¸ºç¤ºä¾‹ï¼Œå°†ä» SIGTERM ä¿¡å· çš„åŸºæœ¬æ¦‚å¿µè®²èµ·ï¼Œé€æ­¥æ·±å…¥ï¼Œå¸¦ä½ æŒæ¡å¦‚ä½•åœ¨ PHP CLI ç¨‹åº ä¸­å®ç°ä¼˜é›…çš„å¹³æ»‘é‡å¯ã€‚äºŒã€SIGTERM ä¿¡å·çš„åŸºæœ¬æ¦‚å¿µ2.1 ä»€ä¹ˆæ˜¯ SIGTERM ä¿¡å·ï¼ŸSIGTERM æ˜¯...", "content": "ä¸€ã€å¼•è¨€å½“æˆ‘ä»¬å¼€å‘åå°ä»»åŠ¡æˆ–æœåŠ¡æ—¶ï¼Œå¦‚ä½•ä¼˜é›…åœ°ç»ˆæ­¢ç¨‹åºæ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„è¯é¢˜ã€‚ç‰¹åˆ«æ˜¯åœ¨é¢‘ç¹æ›´æ–°ä»£ç çš„åœºæ™¯ä¸‹ï¼Œç¨‹åºçªç„¶ä¸­æ–­å¯èƒ½å¯¼è‡´ä»»åŠ¡ä¸­æ–­æˆ–æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚æœ¬æ–‡ä»¥ç®€å•çš„ PHP CLI ä¸ºç¤ºä¾‹ï¼Œå°†ä» SIGTERM ä¿¡å· çš„åŸºæœ¬æ¦‚å¿µè®²èµ·ï¼Œé€æ­¥æ·±å…¥ï¼Œå¸¦ä½ æŒæ¡å¦‚ä½•åœ¨ PHP CLI ç¨‹åº ä¸­å®ç°ä¼˜é›…çš„å¹³æ»‘é‡å¯ã€‚äºŒã€SIGTERM ä¿¡å·çš„åŸºæœ¬æ¦‚å¿µ2.1 ä»€ä¹ˆæ˜¯ SIGTERM ä¿¡å·ï¼ŸSIGTERM æ˜¯ Unix å’Œç±» Unix ç³»ç»Ÿä¸­ç”¨äºç»ˆæ­¢è¿›ç¨‹çš„ä¿¡å·ä¹‹ä¸€ã€‚å®ƒçš„ç‰¹åˆ«ä¹‹å¤„åœ¨äºï¼Œè¿›ç¨‹åœ¨æ”¶åˆ°è¯¥ä¿¡å·æ—¶ï¼Œæœ‰æœºä¼šå†³å®šå¦‚ä½•åº”å¯¹ï¼š ç›´æ¥é€€å‡ºï¼šå¦‚æœç¨‹åºæ²¡æœ‰æ•è·æˆ–å¤„ç† SIGTERMï¼Œæ“ä½œç³»ç»Ÿä¼šæŒ‰ç…§é»˜è®¤è¡Œä¸ºï¼Œç›´æ¥ç»ˆæ­¢è¿›ç¨‹ã€‚ ä¼˜é›…é€€å‡ºï¼šç¨‹åºå¯ä»¥é€šè¿‡æ•è· SIGTERMï¼Œæ‰§è¡Œä¸€äº›å¿…è¦çš„æ¸…ç†é€»è¾‘ï¼Œä¾‹å¦‚ä¿å­˜çŠ¶æ€ã€é‡Šæ”¾èµ„æºç­‰ï¼Œç„¶åå†é€€å‡ºã€‚ä¸å…¶ä»–ä¿¡å·ç›¸æ¯”ï¼š SIGINTï¼ˆé€šå¸¸ç”±ç”¨æˆ·æŒ‰ä¸‹ Ctrl + C è§¦å‘ï¼‰ç”¨äºäº¤äº’å¼ä¸­æ–­ã€‚ SIGKILL åˆ™æ— æ³•è¢«æ•è·ï¼Œç›´æ¥å¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹ã€‚2.2 SIGTERM åœ¨åº”ç”¨ç¨‹åºä¸­çš„æ„ä¹‰åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œä¼˜é›…åœ°ç»ˆæ­¢è¿›ç¨‹éå¸¸é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼š åå°ä»»åŠ¡å¤„ç†ï¼šé˜²æ­¢ä»»åŠ¡ä¸­æ–­ï¼Œä¿è¯å…³é”®æ“ä½œçš„å®Œæ•´æ€§ã€‚ æœåŠ¡çƒ­æ›´æ–°ï¼šå½“éƒ¨ç½²æ–°ç‰ˆæœ¬æ—¶ï¼Œæ—§å®ä¾‹éœ€è¦å¹³ç¨³é€€å‡ºï¼Œé¿å…ä¸­é€”ç»ˆæ­¢æ­£åœ¨å¤„ç†çš„è¯·æ±‚ã€‚ èµ„æºé‡Šæ”¾ï¼šå¦‚å…³é—­æ•°æ®åº“è¿æ¥ã€æ–‡ä»¶å¥æŸ„ç­‰ï¼Œé˜²æ­¢èµ„æºæ³„æ¼ã€‚ç°ä»£å·¥å…·å¦‚ Kubernetes å’Œ supervisordï¼Œåœ¨åœæ­¢å®¹å™¨æˆ–é‡å¯æœåŠ¡æ—¶ï¼Œéƒ½ä¼šå‘é€ SIGTERM ä¿¡å·ã€‚è¿™ä½¿å¾—è¿›ç¨‹æœ‰æ—¶é—´å®Œæˆæœªå®Œæˆçš„ä»»åŠ¡ï¼Œå†ä¼˜é›…åœ°é€€å‡ºã€‚ä¸‰ã€å¦‚ä½•åœ¨ PHP CLI ç¨‹åºä¸­å®ç°ä¼˜é›…é‡å¯ï¼Ÿä¸ºäº†è®© PHP CLI ç¨‹åºèƒ½å¤Ÿæ•è· SIGTERM ä¿¡å·ï¼Œå¹¶åœ¨æ”¶åˆ°ä¿¡å·æ—¶ä¼˜é›…é€€å‡ºï¼Œå¯ä»¥ä½¿ç”¨ PHP æä¾›çš„ pcntl_signal å’Œ pcntl_async_signals å‡½æ•°ã€‚3.1 åŸºæœ¬å®ç°ï¼šæ•è· SIGTERM ä¿¡å·ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•æ•è· SIGTERM ä¿¡å·å¹¶è¿›è¡Œæ¸…ç†ï¼š&lt;?phpdeclare(ticks=1); // å¯ç”¨ä¿¡å·æ£€æµ‹// æ³¨å†Œä¿¡å·å¤„ç†å™¨pcntl_signal(SIGTERM, function () { echo \"Received SIGTERM, shutting down gracefully...\\n\"; // åœ¨è¿™é‡Œæ·»åŠ æ¸…ç†é€»è¾‘ï¼Œä¾‹å¦‚ä¿å­˜çŠ¶æ€ã€é‡Šæ”¾èµ„æºç­‰ exit(0); // ç¡®ä¿ç¨‹åºä¼˜é›…é€€å‡º});while (true) { echo \"Running a task...\\n\"; sleep(1); // æ¨¡æ‹Ÿä»»åŠ¡å¤„ç†}è¿è¡Œæ•ˆæœï¼š å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œå¦‚æœå‘é€ SIGTERM ä¿¡å·ï¼ˆä¾‹å¦‚ä½¿ç”¨ kill å‘½ä»¤ï¼‰ï¼Œç¨‹åºä¼šæ•è·ä¿¡å·å¹¶æ‰§è¡Œæ¸…ç†é€»è¾‘åé€€å‡ºã€‚3.2 å®ç°ä¼˜é›…é‡å¯é€»è¾‘å¦‚æœä½ çš„ç¨‹åºæ˜¯ä¸€ä¸ªåå°ä»»åŠ¡å¤„ç†å™¨ï¼Œéœ€è¦ç¡®ä¿å½“å‰ä»»åŠ¡åœ¨é€€å‡ºå‰æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š&lt;?phpdeclare(ticks=1);// æ³¨å†Œä¿¡å·å¤„ç†å™¨$shouldStop = false;pcntl_signal(SIGTERM, function () use (&amp;$shouldStop) { echo \"Received SIGTERM, waiting for the current task to complete...\\n\"; $shouldStop = true;});while (true) { // æ¨¡æ‹Ÿä»»åŠ¡å¤„ç† echo \"Processing a task...\\n\"; sleep(5); // æ¯ä¸ªä»»åŠ¡éœ€è¦ 5 ç§’å®Œæˆ // æ£€æŸ¥æ˜¯å¦æ”¶åˆ°åœæ­¢ä¿¡å· if ($shouldStop) { echo \"Task completed, shutting down gracefully...\\n\"; break; }}3.3 ä¼˜é›…é‡å¯é€»è¾‘ä¼˜åŒ–ä»¥ä¸‹æ˜¯ä¼˜åŒ–çš„ç¤ºä¾‹ä»£ç ï¼š&lt;?phppcntl_async_signals(true);$shouldStop = false;// æ³¨å†Œä¿¡å·å¤„ç†å™¨, å¤„ç† SIGTERM å’Œ SIGINT ä¿¡å·pcntl_signal(SIGTERM, function () use (&amp;$shouldStop) { echo \"Received SIGTERM, waiting for the current task to complete...\\n\"; $shouldStop = true;});pcntl_signal(SIGINT, function () use (&amp;$shouldStop) { echo \"Received SIGINT (Ctrl + C), waiting for the current task to complete...\\n\"; $shouldStop = true;});// å¤„ç†ä»»åŠ¡çš„æ–¹æ³•function processTask(){ // æ¨¡æ‹Ÿä»»åŠ¡å¤„ç† echo \"Processing a task...\\n\"; // æ¯éš”1ç§’ï¼Œè¾“å‡ºä¸€æ¬¡ä¿¡æ¯ï¼Œä¸€å…±è¾“å‡º5æ¬¡ for ($i = 1; $i &lt;= 5; $i++) { echo \"Task progress: $i/5\\n\"; sleep(1); } echo \"Task completed.\\n\";}while (true) { // æ¨¡æ‹Ÿä»»åŠ¡å¤„ç† processTask(); // æ£€æŸ¥æ˜¯å¦æ”¶åˆ°åœæ­¢ä¿¡å· if ($shouldStop) { echo \"Task completed, shutting down gracefully...\\n\"; break; }}pcntl_async_signals(true) æ˜¯ PHP 7.0 ä¹‹åå¼•å…¥çš„åŠŸèƒ½ï¼Œç”¨äºå¯ç”¨å¼‚æ­¥ä¿¡å·å¤„ç†ã€‚å®ƒä½¿å¾—ç¨‹åºèƒ½å¤Ÿåœ¨åå°è‡ªåŠ¨å“åº”ä¿¡å·ï¼Œè€Œä¸éœ€è¦ä¾èµ– declare(ticks=N)ï¼Œç¨‹åºä¸éœ€è¦æ˜¾å¼åœ°æ£€æŸ¥ä¿¡å·ï¼Œä¿¡å·ä¼šè‡ªåŠ¨å¤„ç†ï¼Œæé«˜æ€§èƒ½ã€‚å¦å¤–æˆ‘ä»¬å¢åŠ äº† SIGINT ä¿¡å·çš„å¤„ç†é€»è¾‘ï¼Œä»¥æ”¯æŒç”¨æˆ·æ‰‹åŠ¨ç»ˆæ­¢ï¼ˆç”¨æˆ·æŒ‰ Ctrl + Cï¼‰ç¨‹åºçš„åœºæ™¯ã€‚å››ã€SIGTERM å®é™…åº”ç”¨åœºæ™¯ç¨‹åºä¼šç­‰å¾…å½“å‰ä»»åŠ¡å¤„ç†å®Œæˆåå†é€€å‡ºï¼Œé¿å…ä¸­é€”ä¸­æ–­ä»»åŠ¡ã€‚4.1 Kubernetes ä¸­çš„ä¼˜é›…ç»ˆæ­¢åœ¨ Kubernetes ä¸­ï¼Œå½“ä¸€ä¸ª Pod è¢«åˆ é™¤æ—¶ï¼ŒKubernetes ä¼šå‘é€ SIGTERM ä¿¡å·ç»™å®¹å™¨çš„ä¸»è¿›ç¨‹ï¼ˆé€šå¸¸æ˜¯ä½ çš„åº”ç”¨ï¼‰ã€‚é€šè¿‡æ•è· SIGTERMï¼Œå¯ä»¥è®©æœåŠ¡å®Œæˆå½“å‰è¯·æ±‚åå†é€€å‡ºã€‚4.2 supervisord ä¸­çš„ä¼˜é›…é‡å¯åœ¨ä½¿ç”¨ supervisord ç®¡ç†è¿›ç¨‹æ—¶ï¼Œæ‰§è¡Œ supervisorctl restart æˆ– stop æ—¶ï¼Œä¼šå‘é€ SIGTERM ä¿¡å·ã€‚å¦‚æœæœªæ•è·è¯¥ä¿¡å·ï¼Œç¨‹åºä¼šè¢«ç«‹å³ç»ˆæ­¢ï¼Œå¯èƒ½å¯¼è‡´ä»»åŠ¡ä¸­æ–­ã€‚4.3 æœ€ä½³å®è·µå»ºè®® ä¿æŒæ¸…ç†é€»è¾‘è½»é‡åŒ–: æ•è· SIGTERM åçš„é€»è¾‘åº”å°½é‡ç®€å•ï¼Œæ¯”å¦‚æ ‡è®°çŠ¶æ€ã€ä¿å­˜æ•°æ®ï¼Œè€Œä¸æ˜¯æ‰§è¡Œå¤æ‚æ“ä½œ; é¿å…é•¿æ—¶é—´é˜»å¡: è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œç¡®ä¿ç¨‹åºä¸ä¼šå› ä¸ºæ¸…ç†é€»è¾‘è¿‡æ…¢è€Œæ— æ³•é€€å‡º; è€ƒè™‘ç”¨æˆ·æ‰‹åŠ¨åœæ­¢: åœ¨ç”¨æˆ·ä½¿ç”¨ Ctrl + C åœæ­¢ç¨‹åºæ—¶ï¼Œç¨‹åºä¼šæ”¶åˆ° SIGINT ä¿¡å·ï¼Œå¯ä»¥é€šè¿‡å¤„ç† SIGINT ä¿¡å·çš„æ–¹å¼ï¼Œæ‰§è¡Œä¸€äº›å¿…è¦çš„æ¸…ç†é€»è¾‘å†é€€å‡ºã€‚åœ¨å®é™…åœºæ™¯ä¸­ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µè¿›è¡Œé€‰æ‹©å¤„ç† SIGINT ä¿¡å·ã€‚äº”ã€æ€»ç»“æŒæ¡ SIGTERM ä¿¡å·çš„å¤„ç†ï¼Œä¸ä»…èƒ½å¸®åŠ©ä½ ç¼–å†™æ›´å¯é çš„ç¨‹åºï¼Œè¿˜èƒ½æå‡æœåŠ¡çš„ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚å¸Œæœ›è¿™ç¯‡æ•™ç¨‹èƒ½å¸®ä½ è½»æ¾æŒæ¡ç¨‹åºä¼˜é›…é‡å¯çš„æ–¹æ³•ï¼" }, { "title": "å¦‚ä½•åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…PVEï¼Œå®ç°ä¸Windowsçš„åŒç³»ç»Ÿå…±å­˜", "url": "/posts/system_pve-on-debian-and-window.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "", "date": "2024-10-20 00:26:00 +0800", "snippet": "ä¸€ã€éœ€æ±‚æ¦‚è¿°ä¸ç¡¬ä»¶é…ç½®1.1 éœ€æ±‚æ¦‚è¿°æˆ‘æœ‰ä¸€å°ç”µè„‘ï¼Œå®‰è£…äº† Windows å’Œ Debian åŒç³»ç»Ÿã€‚Windows ç³»ç»Ÿä¸»è¦ç”¨äºæ—¥å¸¸å¨±ä¹ï¼Œå¦‚æ‰“æ¸¸æˆã€å‰ªè¾‘è§†é¢‘ç­‰æ“ä½œï¼Œè€Œ Debian ç³»ç»Ÿåˆ™ä¸»è¦ç”¨äºå¼€å‘ã€å­¦ä¹ å’Œå·¥ä½œï¼Œæä¾›äº†ä¸€ä¸ªé«˜æ•ˆçš„å¼€æºç¯å¢ƒã€‚ç„¶è€Œï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡èµ„æºåˆ©ç”¨æ•ˆç‡ï¼Œå¹¶ä¸”æ–¹ä¾¿åŒæ—¶å¤„ç†æ›´å¤šä»»åŠ¡ï¼Œæˆ‘å¸Œæœ›åœ¨ Debian ç³»ç»Ÿä¸Šå®‰è£… Proxmox Virtual Environment ...", "content": "ä¸€ã€éœ€æ±‚æ¦‚è¿°ä¸ç¡¬ä»¶é…ç½®1.1 éœ€æ±‚æ¦‚è¿°æˆ‘æœ‰ä¸€å°ç”µè„‘ï¼Œå®‰è£…äº† Windows å’Œ Debian åŒç³»ç»Ÿã€‚Windows ç³»ç»Ÿä¸»è¦ç”¨äºæ—¥å¸¸å¨±ä¹ï¼Œå¦‚æ‰“æ¸¸æˆã€å‰ªè¾‘è§†é¢‘ç­‰æ“ä½œï¼Œè€Œ Debian ç³»ç»Ÿåˆ™ä¸»è¦ç”¨äºå¼€å‘ã€å­¦ä¹ å’Œå·¥ä½œï¼Œæä¾›äº†ä¸€ä¸ªé«˜æ•ˆçš„å¼€æºç¯å¢ƒã€‚ç„¶è€Œï¼Œä¸ºäº†è¿›ä¸€æ­¥æå‡èµ„æºåˆ©ç”¨æ•ˆç‡ï¼Œå¹¶ä¸”æ–¹ä¾¿åŒæ—¶å¤„ç†æ›´å¤šä»»åŠ¡ï¼Œæˆ‘å¸Œæœ›åœ¨ Debian ç³»ç»Ÿä¸Šå®‰è£… Proxmox Virtual Environment (PVE)ã€‚PVE ä½œä¸ºä¸€æ¬¾ä¼ä¸šçº§è™šæ‹ŸåŒ–å¹³å°ï¼Œä¸ä»…æ”¯æŒ KVM å’Œ LXC ä¸¤ç§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œè¿˜æä¾›äº†å¼ºå¤§çš„ Web ç•Œé¢ç®¡ç†ï¼Œèƒ½è®©æˆ‘è½»æ¾åœ¨åŒä¸€å°ä¸»æœºä¸Šåˆ›å»ºå’Œç®¡ç†å¤šä¸ªè™šæ‹Ÿæœºã€‚è¿™ä¸ä»…èƒ½åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ¨¡æ‹Ÿå¤šç§ç¯å¢ƒï¼Œè¿˜èƒ½å¤§å¹…ä¼˜åŒ–ç¡¬ä»¶èµ„æºçš„ä½¿ç”¨ã€‚ä¸å¸¸è§çš„è™šæ‹ŸåŒ–è½¯ä»¶å¦‚ VirtualBoxã€VMware Workstation æˆ– Multipass ä¹‹ç±»çš„è™šæ‹ŸåŒ–å·¥å…·ç›¸æ¯”ï¼ŒPVE åœ¨èµ„æºç®¡ç†ã€æ€§èƒ½å’Œçµæ´»æ€§æ–¹é¢æœ‰æ˜æ˜¾ä¼˜åŠ¿ã€‚VirtualBox å’Œ VMware ç­‰æ¡Œé¢è™šæ‹ŸåŒ–è½¯ä»¶æ›´é€‚åˆè½»é‡çº§çš„è™šæ‹ŸåŒ–åº”ç”¨ï¼Œä½†å½“éœ€è¦è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºå¹¶ç®¡ç†èµ„æºæ—¶ï¼Œå®ƒä»¬çš„æ€§èƒ½å¾€å¾€ä¼šå—åˆ°é™åˆ¶ã€‚è€Œ PVE ä½œä¸ºä¸“é—¨ç”¨äºæœåŠ¡å™¨è™šæ‹ŸåŒ–çš„å¹³å°ï¼Œå¯ä»¥ä½¿ç”¨Linux å†…æ ¸çº§åˆ«çš„è™šæ‹ŸåŒ–åŠŸèƒ½ï¼Œä¸ä»…æ›´é«˜æ•ˆï¼Œè¿˜èƒ½æ›´å¥½åœ°åˆ©ç”¨ Debian ç³»ç»Ÿçš„å¼ºå¤§åŠŸèƒ½ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•å°† PVE å®‰è£…åœ¨ Debian ç³»ç»Ÿä¸Šï¼Œä»¥å®ç°ä¸ Windows ä¸ Debian with PVE çš„åŒç³»ç»Ÿçš„å…±å­˜ã€‚2.1 ç¡¬ä»¶é…ç½® ç±»å‹ å‹å· å¤‡æ³¨ CPU Intel 12600k 12æ ¸16çº¿ç¨‹ Â  å†…å­˜ é‡‘ç™¾è¾¾é“¶çˆµ 16G DDR4 3200MHz * 4 æ€»64G Â  æ˜¾å¡ NVIDIA 4060 Â  ç¡¬ç›˜ è‡´é’› 7100pro 1T + æƒ æ™®æŸå‹å·å›ºæ€ 4T Â  ä»¥ä¸Šç¡¬ä»¶åªæ˜¯ä½œä¸ºå‚è€ƒï¼Œç¡¬ç›˜æœ€ç»ˆè¦åˆ†é…ç»™æ“ä½œç³»ç»Ÿä½¿ç”¨ï¼Œè¿™é‡Œç‰¹æŒ‡ç¡¬ç›˜ï¼Œç¡¬ç›˜å¦‚ä½•åˆ†é…è¦æ ¹æ®è‡ªå·±ç”µè„‘ä¸è‡ªèº«éœ€æ±‚çš„å®é™…æƒ…å†µã€‚äºŒã€Debianç³»ç»Ÿå®‰è£…2.1 å®‰è£…Debiané¦–å…ˆï¼Œæˆ‘çš„ç”µè„‘ç¡¬ç›˜ä½¿ç”¨äº† GPT åˆ†åŒºè¡¨æ ¼å¼ï¼Œè¿™æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿæ™®éæ¨èçš„æ ¼å¼åŒ–æ–¹å¼ã€‚ä¸ä¼ ç»Ÿçš„ MBR ä¸åŒï¼ŒGPT æ ¼å¼æ”¯æŒæ›´å¤§çš„ç¡¬ç›˜å’Œæ›´å¤šçš„åˆ†åŒºï¼Œå¹¶ä¸”éœ€è¦é€šè¿‡ UEFI å¼•å¯¼ç³»ç»Ÿã€‚åœ¨ Windows ç³»ç»Ÿä¸­ï¼Œé€šè¿‡å®˜æ–¹å®‰è£…ç¨‹åºåˆ›å»ºçš„å¯åŠ¨ç›˜ä¼šè‡ªåŠ¨è¿›è¡Œåˆ†åŒºï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ª EFI åˆ†åŒºï¼ˆå¯ä»¥åœ¨ç£ç›˜ç®¡ç†å·¥å…·ä¸­æŸ¥çœ‹ï¼‰ã€‚è¯¥åˆ†åŒºå­˜å‚¨äº† Windows çš„å¼•å¯¼ç¨‹åºï¼Œæ˜¯ç³»ç»Ÿå¯åŠ¨çš„å…³é”®ã€‚åœ¨å®‰è£… Debian ç³»ç»Ÿæ—¶ï¼ŒDebian çš„å¼•å¯¼ç¨‹åºä¹Ÿä¼šè¢«å†™å…¥åˆ°è¿™ä¸ª EFI åˆ†åŒºï¼Œä»è€Œå®ç°åŒç³»ç»Ÿå…±å­˜å’Œå¼•å¯¼ç®¡ç†ã€‚æˆ‘çš„ Windows å®‰è£…åœ¨ 1T çš„å›ºæ€ç¡¬ç›˜ä¸Šï¼Œå¦å¤– 4T ä½œä¸ºå¤‡ç”¨ç¡¬ç›˜ï¼Œæˆ–è€…è¯´æ•°æ®ç›˜ã€‚è¿™é‡Œå»ºè®®é€‰æ‹©æ€§èƒ½å¥½çš„ç¡¬ç›˜ç”¨æ¥å®‰è£…ç³»ç»Ÿï¼Œå‰©ä½™çš„ç¡¬ç›˜ç”¨æ¥å­˜å‚¨æ•°æ®ã€‚æˆ‘ä» Windows ä¸»åˆ†åŒºä¸­å‹ç¼©äº† 600G ç”¨äºå®‰è£… Debian ç³»ç»Ÿã€‚2.2 Debianç³»ç»Ÿå®‰è£…åŸºæœ¬è½¯ä»¶Debian çš„å®‰è£…è¿‡ç¨‹è¿™é‡Œä¸å†è¯´æ˜ï¼ŒDebian çš„å®‰è£…ç¨‹åºå¾ˆæ–¹ä¾¿ï¼Œç›´æ¥æŒ‰ç…§æç¤ºæ“ä½œå³å¯ã€‚æˆ‘ä»¬å¯ä»¥é€‰æ‹©å®‰è£…æ¡Œé¢ç¯å¢ƒï¼Œä¸è¿‡å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Nvidia çš„æ˜¾å¡ï¼Œå»ºè®®å…ˆå®‰è£…ç³»ç»ŸåŸºæœ¬ç»„ä»¶ï¼Œç­‰è¿›å…¥ç³»ç»Ÿåï¼Œå®‰è£…æ˜¾å¡é©±åŠ¨ä¹‹åå†å®‰è£…æ¡Œé¢ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„å®‰è£…è¿‡ç¨‹ï¼šé¦–å…ˆå®‰è£…å¥½ Debian ä¹‹åæ¨èæŠŠ apt æºæ¢ä¸ºå›½å†…çš„æºï¼Œè¿™æ ·é€Ÿåº¦ä¼šæ›´å¿«ã€‚å¹¶ä¸”å®‰è£…æ˜¯åŸºæœ¬çš„è½¯ä»¶ï¼Œå¦‚æœä½ çš„æ˜¾å¡æ˜¯ Nvidiaï¼Œé‚£ä¹ˆéœ€è¦é¢å¤–å®‰è£… Nvidia çš„é©±åŠ¨ã€‚å»ºè®®ä½¿ç”¨ non-free æºç›´æ¥å®‰è£…å³å¯ï¼Œæˆ‘çš„ Nvidia æ˜¾å¡ä¸»æœºå®‰è£…è¿‡ç¨‹å¦‚ä¸‹# è½¯ä»¶æºæ›¿æ¢ä¸ºä¸­ç§‘å¤§æºecho \"deb https://mirrors.ustc.edu.cn/debian/ bookworm main contrib non-free non-free-firmware\" &gt; /etc/apt/sources.list# æ›´æ–°æºapt update# å®‰è£…vimã€ç½‘ç»œå·¥å…·ã€æºä»£ç ç¼–è¯‘åŸºç¡€ä¾èµ–ï¼Œä»¥åŠnvidiaæ˜¾å¡é©±åŠ¨apt install -y vim net-tools build-essential nvidia-driver# å®‰è£…gnomeæ¡Œé¢ï¼Œä»¥ä¸‹ä¼šå®‰è£…æ¡Œé¢ç¯å¢ƒå’Œå¸¸ç”¨æ¡Œé¢è½¯ä»¶apt install -y task-gnome-desktopæ‰§è¡Œ apt install -y task-gnome-desktop è¿™æ¡å‘½ä»¤ Debian ä¼šå®‰è£…ä¸Šå¸¸ç”¨çš„æ¡Œé¢ç¯å¢ƒï¼ŒåŒ…æ‹¬ä¸€äº›å°æ¸¸æˆï¼Œå¦‚æœä¸æƒ³è¦å°æ¸¸æˆï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ é™¤æ‰apt purge gnome-gamesapt autoremoveå¦‚æœä½ æŒ‡å‘å®‰è£… Debian çš„æœ€åŸºæœ¬æ¡Œé¢ç¯å¢ƒï¼Œä¸éœ€è¦é¢å¤–çš„å·¥å…·ï¼Œå¯ä»¥å°†ä¸Šè¿°æœ€åä¸€è¡Œå®‰è£…å‘½ä»¤æ›¿æ¢å¦‚ä¸‹apt install -y gnome-coreæ‰§è¡Œå®Œä»¥ä¸Šæ­¥éª¤ï¼Œåˆ™å®ŒæˆåŸºæœ¬è½¯ä»¶ä»¥åŠ Debian æ¡Œé¢ç¯å¢ƒçš„å®‰è£…ï¼Œé‡å¯åå³å¯ç™»å½•æ¡Œé¢ç¯å¢ƒã€‚ä¸‰ã€PVEç¯å¢ƒå®‰è£…ä½ å¯ä»¥å‚è€ƒå®˜ç½‘æ•™ç¨‹https://pve.proxmox.com/wiki/Install_Proxmox_VE_on_Debian_12_Bookwormè¿™é‡Œæˆ‘æ ¹æ®å®˜ç½‘æ•™ç¨‹ä»¥åŠä¸ªäººéœ€æ±‚ï¼Œæˆ‘çš„å®‰è£…è¿‡ç¨‹è®°å½•å¦‚ä¸‹3.1 è®¾ç½®æœ¬æœºåŸŸåè§£æå°†æœ¬æœº IP åœ°å€è§£æä¸ºåŸŸåï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ï¼Œå¦‚ä¸‹echo \"127.0.0.1 pve.local\" &gt;&gt; /etc/hostsåŸŸåéœ€è¦æ ¹æ®ä½ å®é™…éœ€æ±‚æ¥è®¾ç½®ï¼Œè¿™é‡Œæˆ‘è®¾ç½®ä¸º pve.localã€‚3.2 å®‰è£…PVEæºé¦–å…ˆï¼Œæ–°å¢ PVE ä»“åº“ key åˆ°ç³»ç»Ÿä¸­ï¼Œå¦‚ä¸‹wget https://enterprise.proxmox.com/debian/proxmox-release-bookworm.gpg -O /etc/apt/trusted.gpg.d/proxmox-release-bookworm.gpg ç„¶åæ·»åŠ  PVE å®˜ç½‘æºåœ°å€åˆ° apt æºåˆ—è¡¨ä¸­ï¼Œå¦‚ä¸‹echo \"deb [arch=amd64] http://download.proxmox.com/debian/pve bookworm pve-no-subscription\" &gt; /etc/apt/sources.list.d/pve-install-repo.listå¦‚æœåœ¨å›½å†…ï¼Œæ›´æ¨èä½¿ç”¨é•œåƒï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ä¸­ç§‘å¤§æºçš„æºåœ°å€ï¼Œå¦‚ä¸‹echo \"deb https://mirrors.ustc.edu.cn/proxmox/debian/pve bookworm pve-no-subscription\" &gt; /etc/apt/sources.list.d/pve-no-subscription.list3.3 æ›´æ–°æºå¹¶å®‰è£…PVEæ›´æ–°æºå¹¶å®‰è£… PVEï¼Œå¦‚ä¸‹# æ›´æ–°è½¯ä»¶æºapt update &amp;&amp; apt full-upgrade# å®‰è£…PVEapt install proxmox-default-kernel proxmox-ve# åˆ é™¤å¤šä½™çš„å†…æ ¸apt purge linux-image-amd64apt autoremove# æ›´æ–°å¼•å¯¼ç¨‹åºupdate-grubos-prober ç”¨äºåŒ…æ‰«æä¸»æœºçš„æ‰€æœ‰åˆ†åŒºï¼Œä»¥åˆ›å»ºåŒå¼•å¯¼ GRUB æ¡ç›®ã€‚ä½†æ˜¯æ‰«æçš„åˆ†åŒºä¹Ÿå¯ä»¥åŒ…æ‹¬åˆ†é…ç»™è™šæ‹Ÿæœºçš„åˆ†åŒºï¼Œè¿™äº›åˆ†åŒºä¸æƒ³ä½œä¸ºå¼•å¯¼æ¡ç›®æ·»åŠ ï¼Œæ‰€ä»¥å®˜æ–¹æ¨èåˆ é™¤ os-prober åŒ…ï¼Œå¦‚ä¸‹å‘½ä»¤apt purge os-proberapt autoremoveæ­£å¸¸æƒ…å†µä¸‹ï¼Œå®Œæˆä»¥ä¸Šæ“ä½œè™šæ‹Ÿæœºå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ï¼Œé€šè¿‡è®¿é—® https://127.0.0.1:8006 åœ°å€å³å¯æ‰“å¼€ PVE ç®¡ç†åå°ã€‚å››ã€é…ç½®ç¡¬ä»¶ç›´é€š4.1 ä»€ä¹ˆæ˜¯ç¡¬ä»¶ç›´é€šï¼ŸPVEï¼ˆProxmox Virtual Environmentï¼‰ ä¸­çš„ç¡¬ä»¶ç›´é€š ï¼ˆPCI Passthroughï¼‰ æŒ‡çš„æ˜¯å°†ä¸»æœºçš„æŸä¸ªç¡¬ä»¶è®¾å¤‡ï¼ˆå¦‚æ˜¾å¡ã€ç½‘ç»œé€‚é…å™¨ç­‰ï¼‰ç›´æ¥åˆ†é…ç»™è™šæ‹Ÿæœºï¼Œä½¿è™šæ‹Ÿæœºèƒ½å¤Ÿç›´æ¥æ§åˆ¶è¯¥ç¡¬ä»¶ã€‚è¿™ç§æ–¹å¼èƒ½å¤Ÿæé«˜è™šæ‹Ÿæœºçš„æ€§èƒ½ï¼Œå› ä¸ºè™šæ‹Ÿæœºå¯ä»¥ç›´æ¥ä½¿ç”¨ç‰©ç†è®¾å¤‡çš„èƒ½åŠ›ï¼Œè€Œä¸éœ€è¦é€šè¿‡è™šæ‹ŸåŒ–å±‚è¿›è¡Œè®¿é—®ã€‚å¸¸ç”¨äºéœ€è¦é«˜æ€§èƒ½è®¡ç®—çš„åœºæ™¯ï¼Œå¦‚æ¸¸æˆã€å›¾å½¢å¤„ç†å’Œé«˜æ€§èƒ½è®¡ç®—ä»»åŠ¡ã€‚å®ç°ç¡¬ä»¶ç›´é€šé€šå¸¸éœ€è¦æ”¯æŒ VT-d æˆ– AMD-Vi çš„å¤„ç†å™¨å’Œä¸»æ¿ï¼Œå¹¶åœ¨ BIOS ä¸­å¯ç”¨ç›¸å…³è®¾ç½®ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­å¯ç”¨ IOMMUï¼ˆInput-Output Memory Management Unitï¼‰ï¼Œè¿™å¯¹äº PCI è®¾å¤‡ç›´é€šæ˜¯å¿…éœ€çš„ã€‚ä¸‹æ–‡æ˜¯ç¡¬ä»¶ç›´é€šé…ç½®çš„æ­¥éª¤ã€‚4.2 å¯ç”¨ BIOS ä¸­çš„ IOMMU é‡å¯è®¡ç®—æœºï¼Œè¿›å…¥ BIOS è®¾ç½®ã€‚ æŸ¥æ‰¾ä¸ IOMMU ç›¸å…³çš„é€‰é¡¹ï¼Œé€šå¸¸åœ¨ â€œAdvancedâ€ æˆ– â€œChipsetâ€ è®¾ç½®ä¸­ã€‚ å¯ç”¨ IOMMUï¼ˆå¯èƒ½æ ‡è®°ä¸º VT-d æˆ– AMD-Viï¼Œå…·ä½“å–å†³äºä½ çš„ CPUï¼‰ã€‚ ä¿å­˜å¹¶é€€å‡º BIOS è®¾ç½®ã€‚4.3 ä¿®æ”¹ GRUB é…ç½® åœ¨ Debian ç³»ç»Ÿä¸­ï¼Œæ‰“å¼€ç»ˆç«¯ã€‚ ç¼–è¾‘ GRUB é…ç½®æ–‡ä»¶ï¼šsudo vim /etc/default/grub æ‰¾åˆ° GRUB_CMDLINE_LINUX_DEFAULT è¡Œï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ ¹æ®ä½ çš„ CPU ç±»å‹é€‰æ‹©ï¼‰ï¼šå¯¹äº Intel CPUï¼šintel_iommu=onå¯¹äº AMD CPUï¼šamd_iommu=onä¿®æ”¹åçš„è¡Œå¯èƒ½ç±»ä¼¼äºGRUB_CMDLINE_LINUX_DEFAULT=\"quiet intel_iommu=on\"ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æ›´æ–° GRUB é…ç½®sudo update-grub4.4 é‡å¯ PVE ç³»ç»Ÿé‡å¯è®¡ç®—æœºï¼Œä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚å¯åŠ¨åï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ IOMMU æ˜¯å¦å·²å¯ç”¨dmesg | grep -e DMAR -e IOMMUå¦‚æœå¯ç”¨ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚å®Œæˆä¸Šè¿°æ­¥éª¤åï¼ŒIOMMU åº”è¯¥ä¼šæ­£å¸¸å¯ç”¨ï¼Œä½ å¯ä»¥å°è¯•æ·»åŠ  PCI ç›´é€šè®¾å¤‡ã€‚å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ BIOS è®¾ç½®æ˜¯å¦ä¿å­˜æˆåŠŸï¼Œå¹¶ç¡®ä¿ä½ çš„ç¡¬ä»¶æ”¯æŒ IOMMUã€‚äº”ã€é€šè¿‡æ— çº¿ç½‘å¡é…ç½®ç½‘ç»œ5.1 ç½‘æ®µåˆ†é…æˆ‘çš„ä¸»æœºä½¿ç”¨æ— çº¿ç½‘è¿æ¥çš„è·¯ç”±å™¨ï¼Œè€Œæ— çº¿ç½‘é€šå¸¸ä¸æ”¯æŒè™šæ‹Ÿç½‘æ¡¥ç»‘å®šã€‚ä¸ºäº†ä½¿å¾—å®¿ä¸»æœºèƒ½é€šè¿‡ç½‘ç»œæ­£å¸¸è®¿é—®è™šæ‹Ÿæœºï¼Œä¸”ä¿è¯è™šæ‹Ÿæœºèƒ½è®¿é—®å¤–ç½‘ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸ç»‘å®šç½‘å¡çš„è™šæ‹Ÿç½‘æ¡¥ï¼Œä½¿ç”¨ NAT çš„æ–¹å¼å®ç°ç½‘ç»œåœ°å€è½¬æ¢ï¼Œéœ€è¦åœ¨ Proxmox VE (PVE) å®¿ä¸»æœºä¸Šè®¾ç½®æ‰§è¡Œä¸‹æ–‡çš„æ­¥éª¤ã€‚æ ¹æ®æˆ‘çš„ç”µè„‘ç¡¬ä»¶ä»¥åŠå®¶åº­ç½‘ç»œç¯å¢ƒçš„æƒ…å†µï¼Œæˆ‘çš„å®¿ä¸»æœºå’Œè™šæ‹Ÿæœºçš„è®¡åˆ’IPæˆ–ç½‘æ®µåˆ†é…å¦‚ä¸‹ è®¾å¤‡ IPæˆ–ç½‘æ®µ å¤‡æ³¨ è·¯ç”±å™¨ 192.168.0.1 Â  å®¿ä¸»æœº 192.169.0.100 æ¨èè®¾ç½®å›ºå®šIPï¼Œä¸”å’Œè·¯ç”±å™¨IPåœ¨ä¸€ä¸ªç½‘æ®µå†… è™šæ‹Ÿæœºç½‘æ¡¥ 192.168.100.1 ç½‘æ®µä¸ä¸å®¿ä¸»æœºç½‘æ®µé‡å  è™šæ‹Ÿæœº 192.168.100.0/24 ä¸è™šæ‹Ÿç½‘æ¡¥åœ¨åŒä¸€ä¸ªç½‘æ®µå†… 5.2 åˆ›å»ºNATç½‘ç»œ ç™»å½•åˆ° Proxmox Web ç•Œé¢ã€‚ åœ¨å·¦ä¾§å¯¼èˆªæ ä¸­ï¼Œé€‰æ‹© â€œæ•°æ®ä¸­å¿ƒâ€ã€‚ é€‰æ‹© â€œç½‘ç»œâ€ æ ‡ç­¾ã€‚ ç‚¹å‡» â€œåˆ›å»ºâ€ æŒ‰é’®ï¼Œé€‰æ‹© â€œLinux Bridgeâ€ã€‚ ä¸ºç½‘æ¡¥å‘½åï¼ˆå¦‚ vmbr1ï¼‰ï¼Œç¡®ä¿ â€œæ¡¥æ¥ç«¯å£â€ ç•™ç©ºã€‚ ç‚¹å‡» â€œæ·»åŠ â€ã€‚5.3 é…ç½® NAT1.æ‰“å¼€ Proxmox çš„ç»ˆç«¯æˆ– SSH ç™»å½•åˆ°å®¿ä¸»æœºã€‚2.ç¼–è¾‘ /etc/network/interfaces æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼šauto vmbr1iface vmbr1 inet static address 192.168.100.1 netmask 255.255.255.0 bridge_ports none3.ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºã€‚5.4 å¯ç”¨ IP è½¬å‘1.è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ç”¨ IP è½¬å‘ï¼šecho \"net.ipv4.ip_forward=1\" &gt;&gt; /etc/sysctl.confsysctl -p5.5 é…ç½® iptables è§„åˆ™1.è®¾ç½® iptables è§„åˆ™ä»¥å…è®¸ NATï¼šiptables -t nat -A POSTROUTING -s 192.168.100.0/24 -o &lt;ä½ çš„å¤–ç½‘æ¥å£&gt; -j MASQUERADEå°† &lt;ä½ çš„å¤–ç½‘æ¥å£&gt; æ›¿æ¢ä¸ºå®¿ä¸»æœºçš„å®é™…å¤–ç½‘æ¥å£ï¼ˆæˆ‘çš„æ— çº¿ç½‘å£æ˜¯ wlo1ï¼‰ã€‚å®¿ä¸»æœºé‡å¯åï¼Œiptables è§„åˆ™è¢«é‡ç½®æ˜¯å› ä¸ºè¿™äº›è§„åˆ™å¹¶æ²¡æœ‰è¢«ä¿å­˜ã€‚è¦ç¡®ä¿åœ¨é‡å¯åä¿æŒ NAT è§„åˆ™ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†å½“å‰çš„ iptables è§„åˆ™ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼šiptables-save &gt; /etc/iptables/rules.v4å¦‚æœæ²¡æœ‰ /etc/iptables/rules.v4 æ–‡ä»¶ï¼Œç³»ç»Ÿå¯èƒ½éœ€è¦å®‰è£… iptables-persistent åŒ…ï¼Œè¯¥åŒ…å¯ä»¥åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½è¿™äº›è§„åˆ™ï¼šapt install iptables-persistentåœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šè¯¢é—®æ‚¨æ˜¯å¦è¦ä¿å­˜å½“å‰çš„è§„åˆ™ã€‚é€‰æ‹©â€œæ˜¯â€ä»¥ç¡®ä¿å½“å‰è§„åˆ™åœ¨é‡å¯åä»ç„¶ç”Ÿæ•ˆã€‚2.ä¸ºäº†ä½¿è§„åˆ™åœ¨é‡å¯åç”Ÿæ•ˆï¼Œå¯ä»¥å°†è¿™äº›è§„åˆ™å†™å…¥ /etc/rc.local æˆ–ä½¿ç”¨ iptables-persistentã€‚5.6 é…ç½®è™šæ‹Ÿæœº åœ¨ PVE ä¸­é€‰æ‹©ä½ çš„è™šæ‹Ÿæœºï¼Œè¿›å…¥ â€œç¡¬ä»¶â€ é€‰é¡¹ã€‚ ç‚¹å‡» â€œæ·»åŠ â€ &gt; â€œç½‘ç»œè®¾å¤‡â€ã€‚ å°†ç½‘ç»œè®¾å¤‡è¿æ¥åˆ°åˆšåˆ›å»ºçš„ vmbr1ã€‚ å¯åŠ¨è™šæ‹Ÿæœºã€‚5.7 åœ¨è™šæ‹Ÿæœºä¸­é…ç½®ç½‘ç»œ åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè®¾ç½®ä¸€ä¸ªé™æ€IPï¼ˆå¦‚ 192.168.100.2ï¼‰ï¼Œå­ç½‘æ©ç ä¸º 255.255.255.0ï¼Œç½‘å…³ä¸º 192.168.100.1ã€‚5.8 æµ‹è¯•è¿æ¥åœ¨è™šæ‹Ÿæœºä¸­ï¼Œå°è¯• ping å¤–éƒ¨åœ°å€ï¼Œå¦‚ ping 192.168.0.1ä»¥ç¡®è®¤èƒ½è®¿é—®å†…ç½‘è·¯ç”±å™¨ï¼Œping www.baidu.comä»¥ç¡®ä¿èƒ½è®¿é—®äº’è”ç½‘ã€‚å…­ã€é€šè¿‡æœ‰çº¿ç½‘å¡é…ç½®ç½‘ç»œ6.1 å®¿ä¸»æœºé…ç½®ç½‘ç»œç”±äºæ— çº¿ç½‘å¡çš„ç‰¹æ€§ï¼Œé€šå¸¸ä¸æ”¯æŒæ¡¥æ¥æ¨¡å¼ã€‚å› æ­¤ï¼Œè™šæ‹Ÿæœºæ— æ³•ç›´æ¥è¿æ¥åˆ°æ— çº¿ç½‘ç»œï¼Œè¿™æ—¶éœ€è¦ä½¿ç”¨ NATï¼ˆç½‘ç»œåœ°å€è½¬æ¢ï¼‰æ¥å®ç°ç½‘ç»œè®¿é—®ã€‚ä½¿ç”¨ NAT å¯ä»¥è®©è™šæ‹Ÿæœºé€šè¿‡å®¿ä¸»æœºçš„ IP åœ°å€è®¿é—®äº’è”ç½‘æˆ–å…¶ä»–å±€åŸŸç½‘è®¾å¤‡ã€‚è¿™æ„å‘³ç€è™šæ‹Ÿæœºä¼šä½¿ç”¨ä¸å†…ç½‘ä¸é‡å çš„ç½‘æ®µè¿›è¡Œé…ç½®ï¼Œä»¥é¿å… IP å†²çªï¼ŒåŒæ—¶å®¿ä¸»æœºè´Ÿè´£å°†è™šæ‹Ÿæœºçš„ç½‘ç»œè¯·æ±‚è½¬å‘åˆ°å¤–éƒ¨ç½‘ç»œã€‚åœ¨ PVE ä¸­ï¼ˆæˆ–è€…è¯´ Linux ä¸­ï¼‰ï¼Œæœ‰çº¿ç½‘å¡ï¼ˆä¾‹å¦‚é€šè¿‡ä»¥å¤ªç½‘è¿æ¥ï¼‰å¯ä»¥ç›´æ¥ä¸å±€åŸŸç½‘è¿›è¡Œæ¡¥æ¥ï¼Œå…è®¸è™šæ‹Ÿæœºè·å¾—ä¸ç‰©ç†ç½‘ç»œç›¸åŒçš„ IP ç½‘æ®µçš„åœ°å€ï¼Œè¿™æ ·å®ƒä»¬å¯ä»¥ç›´æ¥ä¸å±€åŸŸç½‘ä¸­çš„å…¶ä»–è®¾å¤‡é€šä¿¡ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å®¿ä¸»æœºä¸Šé…ç½®ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ï¼Œå¹¶å°†å…¶è¿æ¥åˆ°ç‰©ç†ç½‘å¡ä¸Šï¼Œè¿™æ ·è™šæ‹Ÿæœºå°±å¯ä»¥é€šè¿‡ç½‘æ¡¥è®¿é—®å±€åŸŸç½‘ã€‚ç¼–è¾‘ /etc/network/interfaces æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼šiface enp3s0 inet manualauto vmbr0iface vmbr0 inet static address 192.168.0.100/24 gateway 192.168.0.1 bridge-ports enp3s0 bridge-stp off bridge-fd 0ä»¥ä¸Šé…ç½®å°† enp3s0 æ¥å£è®¾ç½®ä¸ºä¸€ä¸ªæ¡¥æ¥æ¥å£ vmbr0ï¼Œå¹¶ä¸º vmbr0 åˆ†é…äº†ä¸€ä¸ªé™æ€ IP åœ°å€ï¼ŒåŒæ—¶é…ç½®äº†ç½‘å…³ã€‚è¿™ä¸ªæ¡¥æ¥ç”¨äºè™šæ‹ŸåŒ–ç¯å¢ƒï¼Œè®©è™šæ‹Ÿæœºèƒ½å¤Ÿé€šè¿‡å®¿ä¸»æœºçš„ç½‘ç»œè¿æ¥åˆ°å¤–éƒ¨ç½‘ç»œï¼ŒåŒæ—¶å®¿ä¸»æœºä¹Ÿå¯ä»¥é€šè¿‡ vmbr0 è®¿é—®è™šæ‹Ÿæœºã€‚6.2 è™šæ‹Ÿæœºç½‘ç»œé…ç½®åœ¨åˆ›å»ºè™šæ‹Ÿæœºä¹‹åï¼Œéœ€æ·»åŠ ä¸€ä¸ªç½‘ç»œè®¾å¤‡ï¼Œå°†ç½‘ç»œè®¾å¤‡è¿æ¥åˆ° vmbr0ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°±å¯ä»¥ä½¿ç”¨ç½‘ç»œäº†ï¼Œå»ºè®®è™šæ‹Ÿæœºåœ¨è®¾ç½® IP åœ°å€æ—¶ä½¿ç”¨å’Œå®¿ä¸»æœºç›¸åŒçš„ç½‘æ®µã€‚ä¸ƒã€ä¿®å¤Windowså¼•å¯¼7.1 ä¿®æ”¹grubé…ç½®åœ¨å®‰è£… pve ä¹‹åï¼Œgrub ä¸­çš„ window å¼•å¯¼æ¡ç›®å°†ä¸¢å¤±ã€‚å³ä½¿ç³»ç»Ÿå®‰è£…äº† os-prober ä¹Ÿæ²¡æœ‰æ‰«æå‡ºæ¥ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯æˆ‘ä¸»æœºçš„æœ¬èº«çš„åŸå› ï¼Œè¿˜æ˜¯æ˜¯å› ä¸ºæˆ‘æ‰€å®‰è£… pve ç‰ˆæœ¬çš„åŸå› ã€‚å®é™…ä¸Šæˆ‘ä»¬æœ‰åŠæ³•æ‰‹åŠ¨æ·»åŠ windowså¼•å¯¼ã€‚ä¸€èˆ¬ Windows çš„ EFI ç³»ç»Ÿåˆ†åŒºæ˜¯ç¬¬ä¸€ä¸ªç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªåˆ†åŒºã€‚ä½ å¯ä»¥åœ¨ /etc/grub.d/40_custom ä¸­ä½¿ç”¨ä»¥ä¸‹é…ç½®æ¥æ·»åŠ  Windows å¼•å¯¼ï¼šmenuentry 'Windows 10' { insmod part_gpt insmod fat set root='hd0,gpt1' # hd0 æŒ‡çš„æ˜¯ç¬¬ä¸€å—ç£ç›˜ï¼Œgpt1 è¡¨ç¤º GPT åˆ†åŒºè¡¨ä¸­çš„ç¬¬ä¸€ä¸ªåˆ†åŒº chainloader /EFI/Microsoft/Boot/bootmgfw.efi}ä¹‹åæ‰§è¡Œï¼šupdate-grubçœ‹çœ‹æ˜¯å¦èƒ½çœ‹åˆ° Windows çš„å¼•å¯¼é€‰é¡¹ã€‚å¦‚æœä»æœ‰é—®é¢˜ï¼Œä¸€èˆ¬æ˜¯ä½ æŒ‡å®šçš„ç¡¬ç›˜ä½ç½®ä¸æ­£ç¡®ï¼Œä»¥åœ¨ GRUB å‘½ä»¤è¡Œç•Œé¢æ‰‹åŠ¨æµ‹è¯•å¼•å¯¼ï¼Œ7.2 grubé¡µé¢æ‰‹åŠ¨æµ‹è¯•å¼•å¯¼åœ¨ GRUB å¯åŠ¨æ—¶ï¼ŒæŒ‰ä¸‹ c è¿›å…¥å‘½ä»¤è¡Œï¼Œæ‰‹åŠ¨å°è¯•å¼•å¯¼ Windowsï¼šset root=(hd0,gpt1)chainloader /EFI/Microsoft/Boot/bootmgfw.efibootå¦‚æœæŠ¥é”™ï¼Œå¯ä»¥å°è¯•ä¿®æ”¹ä¸€ä¸‹ root å‚æ•°ï¼Œå¦‚hd0 ä¿®æ”¹ hd1ï¼Œå†å°è¯•ã€‚" }, { "title": "ç”¨Rustå’ŒPingoraè½»æ¾æ„å»ºé«˜æ•ˆè´Ÿè½½å‡è¡¡å™¨", "url": "/posts/tools_build-an-efficient-load-balancer-using-pingora.html", "categories": "å·¥å…·", "tags": "Pingora", "date": "2024-06-18 15:30:00 +0800", "snippet": "ç›®å½• ä»€ä¹ˆæ˜¯Pingoraï¼Ÿ å®ç°è¿‡ç¨‹ åˆå§‹åŒ–é¡¹ç›® ç¼–å†™è´Ÿè½½å‡è¡¡å™¨ä»£ç  ä»£ç è§£æ éƒ¨ç½² æ€»ç»“1. ä»€ä¹ˆæ˜¯Pingoraï¼ŸPingora æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Rust åº“ï¼Œç”¨äºæ„å»ºå¯è´Ÿè½½å‡è¡¡å™¨çš„ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒçš„è¯ç”Ÿæ˜¯ä¸ºäº†å¼¥è¡¥ Nginx å­˜åœ¨çš„ç¼ºé™·ã€‚Pingora æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œé«˜åº¦çš„æ‰©å±•æ€§ï¼Œé€‚ç”¨äºå„ç§ç½‘ç»œåº”ç”¨åœºæ™¯ã€‚å…¶é«˜æ•ˆçš„æ€§èƒ½...", "content": "ç›®å½• ä»€ä¹ˆæ˜¯Pingoraï¼Ÿ å®ç°è¿‡ç¨‹ åˆå§‹åŒ–é¡¹ç›® ç¼–å†™è´Ÿè½½å‡è¡¡å™¨ä»£ç  ä»£ç è§£æ éƒ¨ç½² æ€»ç»“1. ä»€ä¹ˆæ˜¯Pingoraï¼ŸPingora æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ Rust åº“ï¼Œç”¨äºæ„å»ºå¯è´Ÿè½½å‡è¡¡å™¨çš„ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒçš„è¯ç”Ÿæ˜¯ä¸ºäº†å¼¥è¡¥ Nginx å­˜åœ¨çš„ç¼ºé™·ã€‚Pingora æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œé«˜åº¦çš„æ‰©å±•æ€§ï¼Œé€‚ç”¨äºå„ç§ç½‘ç»œåº”ç”¨åœºæ™¯ã€‚å…¶é«˜æ•ˆçš„æ€§èƒ½ã€æ˜“äºæ‰©å±•çš„è®¾è®¡ä»¥åŠ Rust è¯­è¨€æœ¬èº«çš„å®‰å…¨æ€§å’Œé€Ÿåº¦ã€‚ä½¿å¾— Pingora èƒ½å¤Ÿå¤„ç†å¤§é‡å¹¶å‘è¯·æ±‚ï¼Œç¡®ä¿é«˜å¯é æ€§å’Œç¨³å®šæ€§ã€‚æœ¬æ–‡å°†å¸¦æ‚¨ä¸€æ­¥æ­¥ä½¿ç”¨ Pingora æ„å»ºä¸€ä¸ªåŸºç¡€çš„è´Ÿè½½å‡è¡¡å™¨ã€‚å¦‚æœä½ è¿˜ä¸äº†è§£ Pingora çš„ç›¸å…³èƒŒæ™¯ï¼Œ å»ºè®®å…ˆé˜…è¯»ï¼šã€Šä¸€å¤©ä¸ºç”¨æˆ·èŠ‚çœ434å¹´æ¡æ‰‹æ—¶é—´ï¼Rustç¼–å†™çš„Pingoraå‡­ä»€ä¹ˆåŠ›å‹Nginxï¼Ÿã€‹2. å®ç°è¿‡ç¨‹2.1 åˆå§‹åŒ–é¡¹ç›®é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Rust é¡¹ç›®ï¼Œå¹¶æ·»åŠ å¿…è¦çš„ä¾èµ–é¡¹ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Cargo.toml æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š[package]name = \"load_balancer\"version = \"0.1.0\"edition = \"2021\"[dependencies]async-trait = \"0.1\"pingora = { version = \"0.1\", features = [\"lb\"] }2.2 ç¼–å†™è´Ÿè½½å‡è¡¡å™¨ä»£ç åœ¨ src/main.rs ä¸­ç¼–å†™è´Ÿè½½å‡è¡¡å™¨çš„å®ç°ä»£ç ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ä»£ç ç¤ºä¾‹ï¼šuse async_trait::async_trait;use pingora::{prelude::*, services::Service};use std::sync::Arc;fn main() { // åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œä¼ å…¥Some(Opt::default())ä»£è¡¨ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œç¨‹åºæ‰§è¡Œæ—¶æ”¯æŒæ¥æ”¶å‘½ä»¤è¡Œå‚æ•° let mut my_server = Server::new(Some(Opt::default())).unwrap(); // åˆå§‹åŒ–æœåŠ¡å™¨ my_server.bootstrap(); // åˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼ŒåŒ…å«å¤šä¸ªä¸Šæ¸¸æœåŠ¡å™¨ let mut upstreams = LoadBalancer::try_from_iter([\"10.0.0.1:8080\", \"10.0.0.2:8080\", \"10.0.0.3:8080\"]).unwrap(); // è¿›è¡Œå¥åº·æ£€æŸ¥ï¼Œæœ€ç»ˆè·å¾—åˆ°å¯ç”¨çš„ä¸Šæ¸¸æœåŠ¡å™¨ let hc = TcpHealthCheck::new(); upstreams.set_health_check(hc); upstreams.health_check_frequency = Some(std::time::Duration::from_secs(1)); let background = background_service(\"health check\", upstreams); let upstreams = background.task(); // åˆ›å»ºä¸€ä¸ªHTTPä»£ç†æœåŠ¡ï¼Œå¹¶ä¼ å…¥æœåŠ¡å™¨é…ç½®å’Œè´Ÿè½½å‡è¡¡å™¨ let mut lb_service: pingora::services::listening::Service&lt;pingora::proxy::HttpProxy&lt;LB&gt;&gt; = http_proxy_service(&amp;my_server.configuration, LB(upstreams)); // æ·»åŠ ä¸€ä¸ªTCPç›‘å¬åœ°å€ï¼Œç›‘å¬80ç«¯å£ lb_service.add_tcp(\"0.0.0.0:80\"); // æ·»åŠ ä¸€ä¸ªTLSç›‘å¬åœ°å€ï¼Œç›‘å¬443ç«¯å£ println!(\"The cargo manifest dir is: {}\", env!(\"CARGO_MANIFEST_DIR\")); // åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å¢ä¸€ä¸ª keys ç›®å½•ï¼Œå¯¹åº”è¯ä¹¦æ–‡ä»¶æ”¾åœ¨è¯¥ç›®å½•ä¸‹ let cert_path = format!(\"{}/keys/example.com.crt\", env!(\"CARGO_MANIFEST_DIR\")); let key_path = format!(\"{}/keys/example.com.key\", env!(\"CARGO_MANIFEST_DIR\")); let mut tls_settings = pingora::listeners::TlsSettings::intermediate(&amp;cert_path, &amp;key_path).unwrap(); tls_settings.enable_h2(); lb_service.add_tls_with_settings(\"0.0.0.0:443\", None, tls_settings); // å®šä¹‰æœåŠ¡åˆ—è¡¨ï¼Œè¿™ä¸ªç¤ºä¾‹åªæœ‰ä¸€ä¸ªè´Ÿè½½å‡è¡¡æœåŠ¡ï¼Œåç»­æœ‰éœ€è¦å¯ä»¥æ·»åŠ æ›´å¤šï¼Œå°†æœåŠ¡åˆ—è¡¨æ·»åŠ åˆ°æœåŠ¡å™¨ä¸­ let services: Vec&lt;Box&lt;dyn Service&gt;&gt; = vec![Box::new(lb_service)]; my_server.add_services(services); // è¿è¡ŒæœåŠ¡å™¨ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ my_server.run_forever();}// å®šä¹‰ä¸€ä¸ªåŒ…å«è´Ÿè½½å‡è¡¡å™¨çš„ç»“æ„ä½“LBï¼Œç”¨äºåŒ…è£…ArcæŒ‡é’ˆä»¥å®ç°å¤šçº¿ç¨‹å…±äº«pub struct LB(Arc&lt;LoadBalancer&lt;RoundRobin&gt;&gt;);// ä½¿ç”¨#[async_trait]å®ï¼Œå¼‚æ­¥å®ç°ProxyHttp traitã€‚#[async_trait]impl ProxyHttp for LB { /// å®šä¹‰ä¸Šä¸‹æ–‡ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨ç©ºå…ƒç»„ï¼Œå¯¹äºè¿™ä¸ªå°ä¾‹å­ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸Šä¸‹æ–‡å­˜å‚¨ type CTX = (); // åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡å®ä¾‹ï¼Œè¿™é‡Œè¿”å›ç©ºå…ƒç»„ fn new_ctx(&amp;self) -&gt; () { () } // é€‰æ‹©ä¸Šæ¸¸æœåŠ¡å™¨å¹¶åˆ›å»ºHTTPå¯¹ç­‰ä½“ async fn upstream_peer(&amp;self, _session: &amp;mut Session, _ctx: &amp;mut ()) -&gt; Result&lt;Box&lt;HttpPeer&gt;&gt; { // ä½¿ç”¨è½®è¯¢ç®—æ³•é€‰æ‹©ä¸Šæ¸¸æœåŠ¡å™¨ let upstream = self .0 .select(b\"\", 256) // å¯¹äºè½®è¯¢ï¼Œå“ˆå¸Œä¸é‡è¦ .unwrap(); println!(\"ä¸Šæ¸¸å¯¹ç­‰ä½“æ˜¯ï¼š{upstream:?}\"); // åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPå¯¹ç­‰ä½“ï¼Œè®¾ç½®SNIä¸ºexample.com let peer: Box&lt;HttpPeer&gt; = Box::new(HttpPeer::new(upstream, false, \"example.com\".to_string())); Ok(peer) } // åœ¨ä¸Šæ¸¸è¯·æ±‚å‘é€å‰ï¼Œæ‰§è¡Œä¸€äº›é¢å¤–æ“ä½œï¼Œä¾‹å¦‚å°†æŸäº›å‚æ•°æ’å…¥è¯·æ±‚å¤´ï¼Œè¿™é‡Œçš„ç¤ºä¾‹æ˜¯æ’å…¥Hostå¤´éƒ¨ async fn upstream_request_filter( &amp;self, _session: &amp;mut Session, upstream_request: &amp;mut RequestHeader, _ctx: &amp;mut Self::CTX, ) -&gt; Result&lt;()&gt; { // å°†Hostå¤´éƒ¨è®¾ç½®ä¸ºexample.comï¼Œå½“ç„¶ï¼Œåœ¨ç°å®éœ€æ±‚ä¸­ï¼Œè¿™ä¸€æ­¥å¯èƒ½æ˜¯å¤šä½™çš„ upstream_request .insert_header(\"Host\", \"example.com\") .unwrap(); Ok(()) }}3. ä»£ç è§£æ3.1 å¯¹ç­‰ä½“å¥åº·æ£€æŸ¥ä¸ºäº†ä½¿æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡å™¨æ›´å¯é ï¼Œæˆ‘ä»¬æ·»åŠ äº†å¥åº·æ£€æŸ¥åŠŸèƒ½åˆ°æˆ‘ä»¬çš„ä¸Šæ¸¸å¯¹ç­‰ä½“ã€‚è¿™æ ·ï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¯¹ç­‰ä½“å·²ç»å‡ºç°å¼‚å¸¸ï¼Œå°±å¯ä»¥å¿«é€Ÿåœæ­¢å°†æµé‡è·¯ç”±åˆ°è¯¥å¯¹ç­‰ä½“ã€‚å¦‚ä¸‹ä»£ç fn main() { // ... // ä»¥ä¸‹å¯¹ç­‰ä½“ä¸­åŒ…å«ä¸€ä¸ªå¼‚å¸¸çš„å¯¹ç­‰ä½“ let upstreams = LoadBalancer::try_from_iter([\"10.0.0.1:8080\", \"10.0.0.2:8080\", \"10.0.0.3:8080\"]).unwrap(); // ...}ç°åœ¨å¦‚æœæˆ‘ä»¬å†æ¬¡è¿è¡Œæˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡å™¨ cargo runï¼Œå¹¶ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•å®ƒï¼šcurl http://127.0.0.1 -svo /dev/nullå¦‚æœå»æ‰å¥åº·æ£€æŸ¥çš„ä»£ç ç‰‡æ®µï¼Œæˆ‘ä»¬å‘ç°ä¼šå‡ºç° 502: Bad Gateway çš„å¤±è´¥æƒ…å†µï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„å¯¹ç­‰ä½“é€‰æ‹©ä¸¥æ ¼éµå¾ªæˆ‘ä»¬ç»™å‡ºçš„ RoundRobin é€‰æ‹©æ¨¡å¼ï¼Œè€Œæ²¡æœ‰è€ƒè™‘è¯¥å¯¹ç­‰ä½“æ˜¯å¦å¥åº·ã€‚é€šè¿‡å¼•å…¥ä¸€ä¸ªå¥åº·æ£€æŸ¥çš„åŠŸèƒ½æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿›è€Œæ’é™¤æ‰ä¸å¥åº·å¯¹ç­‰ä½“ã€‚å…³é”®ä»£ç å¦‚ä¸‹fn main() { // ... // å¥åº·æ£€æŸ¥ let hc = TcpHealthCheck::new(); upstreams.set_health_check(hc); upstreams.health_check_frequency = Some(std::time::Duration::from_secs(1)); let background = background_service(\"health check\", upstreams); let upstreams = background.task(); // ...}3.2 æ¥æ”¶å‘½ä»¤è¡Œå‚æ•°åœ¨åˆ›å»º pingora æœåŠ¡æ—¶ï¼Œä¼ å…¥äº†ä¸€ä¸ª Some(Opt::default())å‚æ•°ï¼Œpingora å°†ä¼šæ•è·æˆ‘ä»¬è¿è¡Œçš„å‘½ä»¤è¡Œå‚æ•°ï¼Œå¹¶ä½¿ç”¨è¿™äº›å‚æ•°æ¥é…ç½® pingora æœåŠ¡ã€‚ä»£ç å˜æ›´å¦‚ä¸‹fn main() { // ... let mut my_server = Server::new(Some(Opt::default())).unwrap(); // ...}æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥çœ‹ pingora è´Ÿè½½å‡è¡¡å™¨çš„å‚æ•°è¯´æ˜cargo run -- -hè¿™æ—¶æˆ‘ä»¬å¯ä»¥äº†è§£åˆ° pingora ç›¸å…³å‚æ•°æä¾›çš„åŠŸèƒ½ï¼Œåç»­å¯ä»¥ä¸ºæˆ‘ä»¬çš„æœåŠ¡å™¨å®ç°æ›´å¤šçš„åŠŸèƒ½ã€‚4. éƒ¨ç½²4.1 åå°è¿è¡Œé€šè¿‡ä¼ é€’ -d æˆ–è€… --daemon å‚æ•°ï¼Œå¯ä»¥å°† pingora è¿è¡Œåœ¨åå°ã€‚å¦‚æœè¦ä¼˜é›…çš„åœæ­¢ pingoraï¼Œå¯ä»¥ä½¿ç”¨ pkill å‘½ä»¤å¹¶ä¸”ä¼ é€’ SIGTERM ä¿¡å·ï¼Œé‚£ä¹ˆåœ¨å…³é—­çš„è¿‡ç¨‹ä¸­ï¼ŒæœåŠ¡å°†åœæ­¢æ¥æ”¶æ–°çš„è¯·æ±‚ï¼Œä½†æ˜¯ä»ç„¶ä¼šå¤„ç†å®Œå½“å‰è¯·æ±‚å†é€€å‡ºã€‚å‘½ä»¤å¦‚ä¸‹# åå°è¿è¡Œï¼Œæˆ‘ä»¬ä½¿ç”¨releaseæ¨¡å¼ï¼Œå› ä¸ºdebugæ¨¡å¼ä¸‹ä¼šç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œä¼šå½±å“æ€§èƒ½cargo run --release -- -d# ä¼˜é›…çš„åœæ­¢pkill -SIGTERM load_balancer4.2 é…ç½®Pingora é…ç½®æ–‡ä»¶å¯ä»¥å®šä¹‰ Pingora å¦‚ä½•è¿è¡Œï¼Œä»¥ä¸‹å®šä¹‰äº† Pingora çš„ç‰ˆæœ¬ã€çº¿ç¨‹æ•°ã€pidæ–‡ä»¶ã€é”™è¯¯æ—¥å¿—æ–‡ä»¶ã€å‡çº§å¥—æ¥å­—æ–‡ä»¶çš„é…ç½®ï¼Œæ–‡ä»¶åç§°å‘½åä¸ºconf.yaml---version: 1threads: 2pid_file: /tmp/load_balancer.piderror_log: /tmp/load_balancer_err.logupgrade_sock: /tmp/load_balancer.sockåŠ è½½é…ç½®æ–‡ä»¶è¿è¡Œå¦‚ä¸‹ï¼š# è®¾ç½®æ—¥å¿—çº§åˆ«RUST_LOG=INFO# å¯ç”¨cargo run --release -- -c conf.yaml -d4.3 ä¼˜é›…åœ°å‡çº§å‡è®¾æˆ‘ä»¬æ›´æ”¹äº†è´Ÿè½½å‡è¡¡å™¨çš„ä»£ç å¹¶é‡æ–°ç¼–è¯‘äº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›å°†æ­£åœ¨åå°è¿è¡Œçš„æœåŠ¡å‡çº§åˆ°è¿™ä¸ªæ–°ç‰ˆæœ¬ã€‚å¦‚æœæˆ‘ä»¬ç®€å•åœ°åœæ­¢æ—§æœåŠ¡ï¼Œç„¶åå¯åŠ¨æ–°æœåŠ¡ï¼Œé‚£ä¹ˆåœ¨ä¸­é—´åˆ°è¾¾çš„ä¸€äº›è¯·æ±‚å¯èƒ½ä¼šä¸¢å¤±ã€‚å¹¸è¿çš„æ˜¯ï¼ŒPingora æä¾›äº†ä¸€ç§ä¼˜é›…çš„æ–¹å¼æ¥å‡çº§æœåŠ¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡SIGQUITåœæ­¢æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨-uæˆ–è€…--upgradeå‚æ•°æ¥å¯åŠ¨å…¨æ–°çš„ç¨‹åºï¼Œå¦‚ä¸‹å‘½ä»¤pkill -SIGQUIT load_balancer &amp;&amp; RUST_LOG=INFO cargo run --release -- -c conf.yaml -d -uåœ¨å‡çº§è¿‡ç¨‹ä¸­ï¼ŒPingora å°†ä¼šè‡ªåŠ¨å°†è¯·æ±‚è·¯ç”±åˆ°æ–°çš„æœåŠ¡ï¼Œè€Œä¸ä¼šä¸¢å¤±ä»»ä½•è¯·æ±‚ã€‚ä»å®¢æˆ·ç«¯çš„è§’åº¦æ¥çœ‹ï¼Œç”¨æˆ·æ„Ÿè§‰ä¸åˆ°ä»»ä½•å˜åŒ–ã€‚5. æ€»ç»“åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„è´Ÿè½½å‡è¡¡å™¨ã€‚é€šè¿‡è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹ Pingora æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„äº†è§£ã€‚ä¸è¿‡ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„è´Ÿè½½å‡è¡¡å™¨ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè´Ÿè½½å‡è¡¡å™¨çš„é…ç½®å’ŒåŠŸèƒ½å¯èƒ½ä¼šæ›´åŠ å¤æ‚ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®å®é™…éœ€æ±‚æ¥è¿›è¡Œæ‰©å±•å’Œä¼˜åŒ–ã€‚åœ¨åç»­ï¼Œæˆ‘ä¹Ÿä¼šåˆ†äº«ä¸€äº›å…³äº Pingora ä»¥åŠæ–°å…´çƒ­é—¨æŠ€æœ¯çš„æ›´å¤šå†…å®¹ï¼Œæ¬¢è¿ç»§ç»­å…³æ³¨ï¼ æœ¬æ–‡å®Œæ•´ç¤ºä¾‹ä»£ç ï¼šhttps://github.com/geekdex/simple-pingora-reverse-proxy" }, { "title": "ä¸€å¤©ä¸ºç”¨æˆ·èŠ‚çœ434å¹´æ¡æ‰‹æ—¶é—´ï¼Rustç¼–å†™çš„Pingoraå‡­ä»€ä¹ˆåŠ›å‹Nginxï¼Ÿ", "url": "/posts/tools_what-is-pingora.html", "categories": "å·¥å…·", "tags": "Pingora", "date": "2024-06-16 15:30:00 +0800", "snippet": "Pingoraç®€ä»‹ä½œä¸ºä¸€ä¸ªå¯¹ Rust è¯­è¨€å’Œæ–°å…´æŠ€æœ¯å……æ»¡å…´è¶£çš„å¼€å‘è€…ï¼Œæˆ‘æœ€è¿‘äº†è§£åˆ°ä¸€ä¸ªä»¤äººæŒ¯å¥‹çš„é¡¹ç›®â€”â€”Pingoraã€‚è¿™æ˜¯ Cloudflare ä½¿ç”¨ Rust æ„å»ºçš„å…¨æ–° HTTP ä»£ç†ï¼Œæ„åœ¨æ›¿ä»£Nginxã€‚Pingora æ¯å¤©å¤„ç†è¶…è¿‡1ä¸‡äº¿ä¸ªè¯·æ±‚ï¼Œä¸ä»…å¤§å¹…æå‡äº†æ€§èƒ½ï¼Œè¿˜ä¸ºå®¢æˆ·å¸¦æ¥äº†è®¸å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ—¶åªéœ€ä»¥å‰åŸºç¡€æ¶æ„çš„ä¸‰åˆ†ä¹‹ä¸€CPUå’Œå†…å­˜èµ„æºã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç» Pingora çš„è®¾è®¡ç†å¿µ...", "content": "Pingoraç®€ä»‹ä½œä¸ºä¸€ä¸ªå¯¹ Rust è¯­è¨€å’Œæ–°å…´æŠ€æœ¯å……æ»¡å…´è¶£çš„å¼€å‘è€…ï¼Œæˆ‘æœ€è¿‘äº†è§£åˆ°ä¸€ä¸ªä»¤äººæŒ¯å¥‹çš„é¡¹ç›®â€”â€”Pingoraã€‚è¿™æ˜¯ Cloudflare ä½¿ç”¨ Rust æ„å»ºçš„å…¨æ–° HTTP ä»£ç†ï¼Œæ„åœ¨æ›¿ä»£Nginxã€‚Pingora æ¯å¤©å¤„ç†è¶…è¿‡1ä¸‡äº¿ä¸ªè¯·æ±‚ï¼Œä¸ä»…å¤§å¹…æå‡äº†æ€§èƒ½ï¼Œè¿˜ä¸ºå®¢æˆ·å¸¦æ¥äº†è®¸å¤šæ–°åŠŸèƒ½ï¼ŒåŒæ—¶åªéœ€ä»¥å‰åŸºç¡€æ¶æ„çš„ä¸‰åˆ†ä¹‹ä¸€CPUå’Œå†…å­˜èµ„æºã€‚æœ¬æ–‡å°†ä¸ºå¤§å®¶ä»‹ç» Pingora çš„è®¾è®¡ç†å¿µä»¥åŠå®ƒæ‰€å¸¦æ¥çš„å·¨å¤§ä¼˜åŠ¿ã€‚ä¸ºä»€ä¹ˆCloudflareéœ€è¦ä¸€ä¸ªæ–°çš„ä»£ç†ï¼Ÿéšç€ Cloudflare çš„å¿«é€Ÿæ‰©å±•ï¼Œç°æœ‰çš„ Nginx ä»£ç†åœ¨å¤„ç†èƒ½åŠ›å’ŒåŠŸèƒ½æ–¹é¢å‡ºç°äº†å±€é™æ€§ã€‚è™½ç„¶ Nginx å¤šå¹´æ¥è¿ä½œè‰¯å¥½ï¼Œä½†åœ¨Cloudflare çš„å¤§è§„æ¨¡åº”ç”¨ä¸­ï¼Œä»å­˜åœ¨ä¸€äº›éš¾ä»¥è§£å†³çš„é—®é¢˜ï¼š æ¶æ„é™åˆ¶æŸå®³æ€§èƒ½ï¼šNginx çš„ worker æ¶æ„å¯¼è‡´ CPU è´Ÿè½½ä¸å¹³è¡¡ï¼Œè¿›è€Œå½±å“æ•´ä½“æ€§èƒ½ã€‚ ç³Ÿç³•çš„è¿æ¥é‡ç”¨ï¼šNginx çš„è¿æ¥æ± ä¸å•ä¸ª worker ç»‘å®šï¼Œå¯¼è‡´è¿æ¥é‡ç”¨ç‡ä½ï¼Œå½±å“è¯·æ±‚é¦–å­—èŠ‚æ—¶é—´ï¼ˆTTFBï¼‰ã€‚ åŠŸèƒ½æ‰©å±•å›°éš¾ï¼šNginx åœ¨æ·»åŠ å¤æ‚åŠŸèƒ½æ—¶å­˜åœ¨å±€é™æ€§ï¼Œä¸”å…¶ç”¨Cè¯­è¨€ç¼–å†™å­˜åœ¨å†…å­˜å®‰å…¨é—®é¢˜ã€‚ æ„å»ºè‡ªæœ‰ä»£ç†çš„å†³ç­–è¿‡ç¨‹é¢å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒCloudflare è¯„ä¼°äº†ä¸‰ç§è§£å†³æ–¹æ¡ˆï¼š ç»§ç»­æŠ•èµ„ Nginxï¼Œå¹¶è¿›è¡Œå®šåˆ¶åŒ–æ”¹é€ ã€‚ è¿ç§»åˆ°å…¶ä»–ç¬¬ä¸‰æ–¹ä»£ç†ä»£ç åº“ï¼Œå¦‚ Envoyã€‚ ä»å¤´å¼€å§‹æ„å»ºä¸€ä¸ªå†…éƒ¨å¹³å°å’Œæ¡†æ¶ã€‚ æœ€ç»ˆï¼ŒCloudflare å†³å®šä»å¤´å¼€å§‹æ„å»ºä¸€ä¸ªé€‚åˆå…¶éœ€æ±‚çš„æ–°ä»£ç†ç³»ç»Ÿâ€”â€”Pingoraã€‚Pingora çš„è®¾è®¡ä¸ä»…è§£å†³äº† Nginx çš„æ¶æ„ç¼ºé™·ï¼Œè¿˜å¤§å¤§æå‡äº†æ€§èƒ½å’Œæ•ˆç‡ã€‚Pingoraé¡¹ç›®çš„è®¾è®¡å†³ç­–ä¸ºäº†æ‰“é€ ä¸€ä¸ªé«˜æ•ˆã€å®‰å…¨ä¸”æ˜“äºæ‰©å±•çš„ä»£ç†ç³»ç»Ÿï¼ŒCloudflare åšå‡ºäº†ä¸€äº›å…³é”®è®¾è®¡å†³ç­–ï¼š é€‰æ‹©Rustè¯­è¨€ï¼šRust æä¾›å†…å­˜å®‰å…¨ç‰¹æ€§ï¼ŒåŒæ—¶å…·å¤‡ C è¯­è¨€çš„é«˜æ€§èƒ½ï¼Œæ˜¯æ„å»ºé«˜æ•ˆä»£ç†ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ã€‚ è‡ªå»ºHTTPåº“ï¼šä¸ºäº†æœ€å¤§åŒ–å¤„ç†HTTPæµé‡çš„çµæ´»æ€§ï¼Œ Cloudflare é€‰æ‹©æ„å»ºè‡ªå·±çš„ HTTP åº“ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç°æˆçš„ç¬¬ä¸‰æ–¹åº“ã€‚ å¤šçº¿ç¨‹æ¶æ„ï¼šé‡‡ç”¨å¤šçº¿ç¨‹è€Œéå¤šè¿›ç¨‹æ¶æ„ï¼Œä»¥ä¾¿æ›´å¥½åœ°å…±äº«èµ„æºï¼Œå°¤å…¶æ˜¯è¿æ¥æ± ã€‚ å¼€å‘è€…å‹å¥½çš„æ¥å£ï¼šè®¾è®¡ç±»ä¼¼ Nginx/OpenResty çš„åŸºäºâ€œè¯·æ±‚ç”Ÿå‘½å‘¨æœŸâ€äº‹ä»¶çš„å¯ç¼–ç¨‹æ¥å£ï¼Œä½¿å¼€å‘è€…å¯ä»¥è½»æ¾ä¸Šæ‰‹å¹¶å¿«é€Ÿå¼€å‘æ–°åŠŸèƒ½ã€‚ Pingoraåœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„è¡¨ç°è‡ª Pingora ä¸Šçº¿ä»¥æ¥ï¼Œå®ƒå¤„ç†äº†å‡ ä¹æ‰€æœ‰éœ€è¦ä¸æºæœåŠ¡å™¨äº¤äº’çš„ HTTP è¯·æ±‚ï¼Œæ€§èƒ½æ•°æ®æ˜¾è‘—æå‡ï¼š TTFBæ˜¾è‘—é™ä½ï¼šPingora ä¸Šæµé‡çš„TTFBä¸­ä½æ•°å‡å°‘äº†5æ¯«ç§’ï¼Œç¬¬95ç™¾åˆ†ä½æ•°å‡å°‘äº†80æ¯«ç§’ã€‚ è¿æ¥é‡ç”¨ç‡å¤§å¹…æå‡ï¼šPingora çš„è¿æ¥é‡ç”¨ç‡æé«˜ï¼Œä½¿æ¯ç§’æ–°è¿æ¥æ•°å‡å°‘äº†ä¸‰åˆ†ä¹‹äºŒã€‚ èµ„æºæ¶ˆè€—å¤§å¹…é™ä½ï¼šåœ¨ç›¸åŒæµé‡è´Ÿè½½ä¸‹ï¼ŒPingoraçš„ CPU å’Œå†…å­˜æ¶ˆè€—å‡å°‘äº†çº¦70%å’Œ67%ã€‚ è‡ª Cloudflare ä¸Šçº¿ Pingora ä»¥æ¥ï¼Œå®ƒå¤„ç†äº†å‡ ä¹æ‰€æœ‰éœ€è¦ä¸æºæœåŠ¡å™¨äº¤äº’çš„ HTTP è¯·æ±‚ï¼Œæ€§èƒ½æ•°æ®æ˜¾è‘—æå‡ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ Cloudflare ä½¿ç”¨ Pingora å¦‚ä½•åŠ å¿«å®¢æˆ·çš„æµé‡ã€‚Pingora çš„æ€»ä½“æµé‡æ•°æ®æ˜¾ç¤ºï¼ŒTTFB ä¸­ä½æ•°å‡å°‘äº†5æ¯«ç§’ï¼Œç¬¬95ä¸ªç™¾åˆ†ä½æ•°å‡å°‘äº†80æ¯«ç§’ã€‚ä¸»è¦æ˜¯å¾—ç›Šäºæ–°æ¶æ„å¯ä»¥è·¨æ‰€æœ‰çº¿ç¨‹å…±äº«è¿æ¥ï¼Œä»è€Œæé«˜äº†è¿æ¥é‡ç”¨ç‡ï¼Œå‡å°‘äº† TCP å’Œ TLS æ¡æ‰‹æ—¶é—´ã€‚ä¸æ—§æœåŠ¡ç›¸æ¯”ï¼ŒPingora æ¯ç§’çš„æ–°è¿æ¥æ•°å‡å°‘åˆ°åŸæ¥çš„ä¸‰åˆ†ä¹‹ä¸€ã€‚å¯¹äºæŸä¸ªä¸»è¦å®¢æˆ·ï¼Œè¿æ¥é‡ç”¨ç‡ä»87.1%æå‡åˆ°äº†99.92%ï¼Œè¿™å°†æ–°è¿æ¥å‡å°‘äº†160å€ã€‚æ›´ç›´è§‚åœ°è¯´ï¼Œé€šè¿‡åˆ‡æ¢åˆ° Pingoraï¼ŒCloudflare æ¯å¤©ä¸ºå®¢æˆ·å’Œç”¨æˆ·èŠ‚çœäº†434å¹´çš„æ¡æ‰‹æ—¶é—´ã€‚æ›´é«˜æ•ˆã€æ›´å®‰å…¨ã€æ›´å¼ºå¤§Pingoraä¸ä»…æ€§èƒ½å‡ºä¼—ï¼Œè¿˜åœ¨åŠŸèƒ½æ‰©å±•å’Œå®‰å…¨æ€§æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼š åŠŸèƒ½æ‰©å±•æ›´çµæ´»ï¼šä¾‹å¦‚ï¼ŒCloudflare èƒ½å¤Ÿè½»æ¾æ·»åŠ HTTP/2 ä¸Šæ¸¸æ”¯æŒï¼Œå¹¶å‘å®¢æˆ·æä¾› gRPC æœåŠ¡ã€‚ æ›´é«˜æ•ˆçš„èµ„æºä½¿ç”¨ï¼šRust ä»£ç å’Œå¤šçº¿ç¨‹æ¨¡å‹ä½¿å¾—èµ„æºä½¿ç”¨æ›´é«˜æ•ˆï¼Œå‡å°‘äº†è¿æ¥åˆ›å»ºå’Œæ•°æ®å…±äº«çš„æˆæœ¬ã€‚ å†…å­˜å®‰å…¨ï¼šRust çš„å†…å­˜å®‰å…¨è¯­ä¹‰å¤§å¤§å‡å°‘äº†å†…å­˜é”™è¯¯çš„å¯èƒ½æ€§ï¼Œç¡®ä¿æœåŠ¡ç¨³å®šè¿è¡Œã€‚ å•è´Ÿè½½å‡è¡¡å™¨çš„ç¤ºä¾‹ä»£ç ä¸ºäº†æ›´å¥½åœ°å±•ç¤º Pingora çš„å¼ºå¤§åŠŸèƒ½ï¼Œä¸‹é¢æä¾›ä¸€ä¸ªä½¿ç”¨Pingoraå®ç°ç®€å•è´Ÿè½½å‡è¡¡å™¨çš„ç¤ºä¾‹ä»£ç ï¼šuse async_trait::async_trait;use pingora::prelude::*;use std::sync::Arc;fn main() { // åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹ï¼Œå‚æ•°ä¸ºNoneè¡¨ç¤ºä½¿ç”¨é»˜è®¤é…ç½® let mut my_server = Server::new(None).unwrap(); // åˆå§‹åŒ–æœåŠ¡å™¨ my_server.bootstrap(); // åˆ›å»ºä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ï¼ŒåŒ…å«ä¸¤ä¸ªä¸Šæ¸¸æœåŠ¡å™¨ let upstreams = LoadBalancer::try_from_iter([\"192.168.9.34:80\", \"10.0.0.9:80\"]).unwrap(); // åˆ›å»ºä¸€ä¸ªHTTPä»£ç†æœåŠ¡ï¼Œå¹¶ä¼ å…¥æœåŠ¡å™¨é…ç½®å’Œè´Ÿè½½å‡è¡¡å™¨ let mut lb = http_proxy_service(&amp;my_server.configuration, LB(Arc::new(upstreams))); // æ·»åŠ ä¸€ä¸ªTCPç›‘å¬åœ°å€ lb.add_tcp(\"0.0.0.0:6188\"); // å°†æœåŠ¡æ·»åŠ åˆ°æœåŠ¡å™¨ä¸­ my_server.add_service(lb); // è¿è¡ŒæœåŠ¡å™¨ï¼Œè¿›å…¥äº‹ä»¶å¾ªç¯ my_server.run_forever();}// å®šä¹‰ä¸€ä¸ªåŒ…å«è´Ÿè½½å‡è¡¡å™¨çš„ç»“æ„ä½“LBï¼Œç”¨äºåŒ…è£…ArcæŒ‡é’ˆä»¥å®ç°å¤šçº¿ç¨‹å…±äº«ã€‚pub struct LB(Arc&lt;LoadBalancer&lt;RoundRobin&gt;&gt;);// ä½¿ç”¨#[async_trait]å®ï¼Œå¼‚æ­¥å®ç°ProxyHttp traitã€‚#[async_trait]impl ProxyHttp for LB { /// å®šä¹‰ä¸Šä¸‹æ–‡ç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨ç©ºå…ƒç»„ã€‚å¯¹äºè¿™ä¸ªå°ä¾‹å­ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸Šä¸‹æ–‡å­˜å‚¨ type CTX = (); // åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡å®ä¾‹ï¼Œè¿™é‡Œè¿”å›ç©ºå…ƒç»„ fn new_ctx(&amp;self) -&gt; () { () } // é€‰æ‹©ä¸Šæ¸¸æœåŠ¡å™¨å¹¶åˆ›å»ºHTTPå¯¹ç­‰ä½“ async fn upstream_peer(&amp;self, _session: &amp;mut Session, _ctx: &amp;mut ()) -&gt; Result&lt;Box&lt;HttpPeer&gt;&gt; { // ä½¿ç”¨è½®è¯¢ç®—æ³•é€‰æ‹©ä¸Šæ¸¸æœåŠ¡å™¨ let upstream = self .0 .select(b\"\", 256) // å¯¹äºè½®è¯¢ï¼Œå“ˆå¸Œä¸é‡è¦ .unwrap(); println!(\"ä¸Šæ¸¸å¯¹ç­‰ä½“æ˜¯ï¼š{upstream:?}\"); // åˆ›å»ºä¸€ä¸ªæ–°çš„HTTPå¯¹ç­‰ä½“ï¼Œè®¾ç½®SNIä¸ºexample.com let peer: Box&lt;HttpPeer&gt; = Box::new(HttpPeer::new(upstream, false, \"example.com\".to_string())); Ok(peer) } // åœ¨ä¸Šæ¸¸è¯·æ±‚å‘é€å‰ï¼Œæ’å…¥Hostå¤´éƒ¨ async fn upstream_request_filter( &amp;self, _session: &amp;mut Session, upstream_request: &amp;mut RequestHeader, _ctx: &amp;mut Self::CTX, ) -&gt; Result&lt;()&gt; { // å°†Hostå¤´éƒ¨è®¾ç½®ä¸ºexample.com upstream_request .insert_header(\"Host\", \"example.com\") .unwrap(); Ok(()) }}ç»“è¯­Pingoraçš„å‘å¸ƒæ ‡å¿—ç€ä»£ç†æŠ€æœ¯é¢†åŸŸçš„ä¸€æ¬¡é‡å¤§é£è·ƒã€‚æˆ‘ç›¸ä¿¡pingoraä¹Ÿå°†æˆä¸ºrustä¸€ä¸ªæœ‰æ„ä¹‰é¡¹ç›®ã€‚å¦‚æœä½ å¯¹äº’è”ç½‘æ–°å…´æŠ€æœ¯ã€rustè¯­è¨€ ç­‰æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„åç»­æ–‡ç« å’ŒæŠ€æœ¯åˆ†äº«ï¼ æœ¬æ–‡åŸåˆ›é¦–å‘è‡ªå…¬ä¼—å·ï¼šæå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½ï¼" }, { "title": "Linuxçš„æ–‡ä»¶IOæ“ä½œ", "url": "/posts/system_linux_io.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "POSIX", "date": "2024-06-10 17:30:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨è®¡ç®—æœºä¸­ï¼Œä¸€åˆ‡æ•°æ®ä»¥æ–‡ä»¶çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬å…ˆäº†è§£æ–‡ä»¶çš„æ¦‚å¿µã€‚æ–‡ä»¶æ˜¯å…·æœ‰åç§°çš„ä¸€ç»„ç›¸å…³æ•°æ®çš„æœ‰åºé›†åˆï¼ŒLinuxä¸­ä¸€åˆ‡çš†æ˜¯æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®æ ‡å’Œè®¾å¤‡ã€‚åœ¨Linuxä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œè®¾å¤‡ä¹Ÿçœ‹æˆæ–‡ä»¶ã€‚æ–‡ä»¶ç»“æ„æ˜¯æ–‡ä»¶å­˜æ”¾åœ¨ç£ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸Šçš„ç»„ç»‡æ–¹å¼ï¼Œä¸»è¦ä½“ç°åœ¨æ–‡ä»¶å’Œç›®å½•çš„ç»„ç»‡ä¸Šã€‚Linuxçš„æ–‡ä»¶ç»“æ„æ˜¯ä¸€æ£µå€’é•¿çš„æ ‘ç»“æ„ï¼Œæ ¹ç›®å½•ä¸‹åŒ…å«äº†å¤šä¸ªæ ¸å¿ƒçš„ç³»ç»Ÿç›®å½•ã€‚å¦‚ä¸‹å›¾æ™®é€šç”¨æˆ·ç™»å½•Linuxç³»ç»Ÿåï¼Œæ‰€è®¿é—®...", "content": "ä¸€ã€æ¦‚è¿°åœ¨è®¡ç®—æœºä¸­ï¼Œä¸€åˆ‡æ•°æ®ä»¥æ–‡ä»¶çš„å½¢å¼è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬å…ˆäº†è§£æ–‡ä»¶çš„æ¦‚å¿µã€‚æ–‡ä»¶æ˜¯å…·æœ‰åç§°çš„ä¸€ç»„ç›¸å…³æ•°æ®çš„æœ‰åºé›†åˆï¼ŒLinuxä¸­ä¸€åˆ‡çš†æ˜¯æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç›®æ ‡å’Œè®¾å¤‡ã€‚åœ¨Linuxä¸­ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œè®¾å¤‡ä¹Ÿçœ‹æˆæ–‡ä»¶ã€‚æ–‡ä»¶ç»“æ„æ˜¯æ–‡ä»¶å­˜æ”¾åœ¨ç£ç›˜ç­‰å­˜å‚¨è®¾å¤‡ä¸Šçš„ç»„ç»‡æ–¹å¼ï¼Œä¸»è¦ä½“ç°åœ¨æ–‡ä»¶å’Œç›®å½•çš„ç»„ç»‡ä¸Šã€‚Linuxçš„æ–‡ä»¶ç»“æ„æ˜¯ä¸€æ£µå€’é•¿çš„æ ‘ç»“æ„ï¼Œæ ¹ç›®å½•ä¸‹åŒ…å«äº†å¤šä¸ªæ ¸å¿ƒçš„ç³»ç»Ÿç›®å½•ã€‚å¦‚ä¸‹å›¾æ™®é€šç”¨æˆ·ç™»å½•Linuxç³»ç»Ÿåï¼Œæ‰€è®¿é—®çš„ç›®å½•å°±æ˜¯åœ¨ /home ç›®å½•ä¸­ï¼Œåœ¨Linuxä¸­ï¼Œç”¨æˆ·å¯¹ç£ç›˜æ–‡ä»¶çš„è®¿é—®æ˜¯é€šè¿‡ç”¨æˆ·ç¨‹åºæ¥å£å®ç°äº†ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä½¿ç”¨ç¨‹åºæ¥å£ç»è¿‡è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿè°ƒç”¨è®¾å¤‡é©±åŠ¨ç¨‹åºè®¿é—®ç£ç›˜æ–‡ä»¶ã€‚å°‘éƒ¨åˆ†æƒ…å†µï¼Œç”¨æˆ·ç¨‹åºå¯ä»¥ä½¿ç”¨è®¾å¤‡æ¥å£ç»•è¿‡æ–‡ä»¶ç³»ç»Ÿç›´æ¥è°ƒç”¨è®¾å¤‡é©±åŠ¨ç¨‹åºè®¿é—®ç£ç›˜æ–‡ä»¶ã€‚è¿™ç§æ–¹å¼ä¼šç»™Linuxå¸¦æ¥ä¸ç¨³å®šæ€§ï¼Œè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå°†ä¸åŒæ–‡ä»¶ç³»ç»Ÿæ•´åˆåœ¨ä¸€èµ·ï¼Œä¸ºç”¨æˆ·æä¾›ç»Ÿä¸€çš„æ¥å£å½¢å¼ï¼Œå¹¶åªå­˜åœ¨å†…å­˜ä¸­è€Œä¸æ˜¯ç£ç›˜ä¸­ï¼Œä»¥è™šçš„å½¢å¼ä½“ç°ã€‚Linuxä¸ºäº†å¯¹æ–‡ä»¶è¿›è¡Œç®¡ç†ï¼ŒåŒè¿›ç¨‹FCBä¸€æ ·ï¼Œå®ƒä¸ºæ¯ä¸ªæ–‡ä»¶è®¾è®¡äº†ä¸€ä¸ªå«FCBçš„æ•°æ®ç»“æ„ï¼ŒFCBç”¨äºæè¿°æ–‡ä»¶å½“å‰æƒ…å†µå’Œæ§åˆ¶æ–‡ä»¶çš„æ‰€éœ€ä¿¡æ¯ï¼Œä¾‹å¦‚åŸºæœ¬ä¿¡æ¯ã€å­˜å–æ§åˆ¶ä¿¡æ¯ç­‰ã€‚FCBç”±æ–‡ä»¶åå’Œç´¢å¼•ç»“ç‚¹ç¼–å·ç»„æˆã€‚ç´¢å¼•ç»“ç‚¹ï¼ˆinodeï¼‰ï¼šæ˜¯FCBçš„ç»„æˆéƒ¨åˆ†ï¼Œå­˜å‚¨é™¤æ–‡ä»¶åå¤–çš„æ–‡ä»¶æè¿°å’Œç®¡ç†ä¿¡æ¯ã€‚ç›®å½•ï¼šæ˜¯æ–‡ä»¶æ§åˆ¶å—ï¼ˆFile Control Blockï¼ŒFCBï¼‰çš„æœ‰åºé›†åˆï¼Œä»¥æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ã€‚å¯ä»¥ä½¿ç”¨ls / - ailæ¥æŸ¥çœ‹æ–‡ä»¶çš„ç´¢å¼•ç»“ç‚¹ç¼–å·ã€‚ 2:46" }, { "title": "åˆè¯†POSIXï¼šç†è§£å’Œä½¿ç”¨å¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£", "url": "/posts/system_getting_to_know_POSIX.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "POSIX", "date": "2024-05-28 09:30:00 +0800", "snippet": "ä¸€ã€POSIX ç®€ä»‹POSIXï¼ˆPortable Operating System Interfaceï¼‰æ˜¯ç”±IEEEåˆ¶å®šçš„ä¸€ç³»åˆ—ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„æ ‡å‡†ã€‚POSIXæ ‡å‡†å®šä¹‰äº†åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ï¼Œå‘½ä»¤è¡Œshellå’Œå·¥å…·çš„ç»Ÿä¸€æ¥å£ï¼Œä»¥ä¿è¯è½¯ä»¶çš„å¯ç§»æ¤æ€§ï¼Œä½¿ç¨‹åºèƒ½å¤Ÿåœ¨ä¸åŒçš„ç±»Unixæ“ä½œç³»ç»Ÿä¹‹é—´æ›´å®¹æ˜“åœ°ç§»æ¤å’Œè¿è¡Œã€‚POSIXæ ‡å‡†æ¶µç›–äº†è¿›ç¨‹ç®¡ç†ã€æ–‡ä»¶æ“ä½œã€è¾“å…¥è¾“å‡ºã€ä¿¡å·å¤„ç†ã€çº¿ç¨‹ç®¡ç†ç­‰å¤šä¸ªæ–¹é¢ã€‚PO...", "content": "ä¸€ã€POSIX ç®€ä»‹POSIXï¼ˆPortable Operating System Interfaceï¼‰æ˜¯ç”±IEEEåˆ¶å®šçš„ä¸€ç³»åˆ—ä¸æ“ä½œç³»ç»Ÿç›¸å…³çš„æ ‡å‡†ã€‚POSIXæ ‡å‡†å®šä¹‰äº†åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ï¼Œå‘½ä»¤è¡Œshellå’Œå·¥å…·çš„ç»Ÿä¸€æ¥å£ï¼Œä»¥ä¿è¯è½¯ä»¶çš„å¯ç§»æ¤æ€§ï¼Œä½¿ç¨‹åºèƒ½å¤Ÿåœ¨ä¸åŒçš„ç±»Unixæ“ä½œç³»ç»Ÿä¹‹é—´æ›´å®¹æ˜“åœ°ç§»æ¤å’Œè¿è¡Œã€‚POSIXæ ‡å‡†æ¶µç›–äº†è¿›ç¨‹ç®¡ç†ã€æ–‡ä»¶æ“ä½œã€è¾“å…¥è¾“å‡ºã€ä¿¡å·å¤„ç†ã€çº¿ç¨‹ç®¡ç†ç­‰å¤šä¸ªæ–¹é¢ã€‚POSIXæ ‡å‡†çš„ä¸»è¦ç›®æ ‡æ˜¯ä¸ºäº†å‡å°‘ä¸åŒæ“ä½œç³»ç»Ÿä¹‹é—´çš„å·®å¼‚ï¼Œä½¿å¾—å¼€å‘äººå‘˜å¯ä»¥ç¼–å†™å‡ºåœ¨å¤šç§Unixç³»ç»Ÿä¸Šéƒ½èƒ½æ­£å¸¸è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚POSIXæ ‡å‡†ä¸ä»…åœ¨Unixå’Œç±»Unixç³»ç»Ÿä¸­è¢«å¹¿æ³›é‡‡çº³ï¼Œä¹Ÿè¢«å…¶ä»–ä¸€äº›éUnixç³»ç»Ÿï¼ˆå¦‚Windowsï¼‰çš„å…¼å®¹å±‚æ‰€æ”¯æŒã€‚åœ¨æœ¬ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨POSIXæ ‡å‡†çš„APIæ¥è¯»å–å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚é€šè¿‡è¿™ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ‚¨å°†äº†è§£åˆ°POSIXæ¥å£åœ¨æ–‡ä»¶æ“ä½œæ–¹é¢çš„åº”ç”¨ã€‚äºŒã€ç¤ºä¾‹ä»£ç é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€æ®µç”¨Cè¯­è¨€ç¼–å†™çš„è¯»å–å½“å‰ç›®å½•æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç ï¼š#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;dirent.h&gt;int main(){ DIR *dir; struct dirent *ptr; if ((dir = opendir(\".\")) == NULL) { perror(\"open\"); exit(1); } while ((ptr = readdir(dir)) != NULL) { printf(\"%s\\n\", ptr-&gt;d_name); } closedir(dir); return 0;}ä¿å­˜ä¸Šè¿°ä»£ç ä¸º list_dir.cï¼Œåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘å’Œè¿è¡Œï¼šgcc -o list_dir list_dir.c./list_dirè¿è¡Œåï¼Œå°†çœ‹åˆ°å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œå­ç›®å½•çš„åç§°ã€‚ä¸‰ã€ä»£ç è§£æ3.1 å¤´æ–‡ä»¶å¼•å…¥ stdio.h: æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ stdlib.h: æ ‡å‡†åº“ dirent.h: å³ directory entryï¼Œç›®å½•æ“ä½œç›¸å…³çš„åº“3.2 æ‰“å¼€ç›®å½•ä½¿ç”¨ opendir å‡½æ•°æ‰“å¼€å½“å‰ç›®å½•ï¼ˆ.ï¼‰ã€‚å¦‚æœæ‰“å¼€å¤±è´¥ï¼Œä½¿ç”¨ perror è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶è°ƒç”¨ exit(1) é€€å‡ºç¨‹åºã€‚if ((dir = opendir(\".\")) == NULL){ perror(\"open\"); exit(1);}3.3 è¯»å–ç›®å½•å†…å®¹ä½¿ç”¨ readdir å‡½æ•°å¾ªç¯è¯»å–ç›®å½•ä¸­çš„æ¯ä¸€ä¸ªæ¡ç›®ï¼Œç›´åˆ°è¯»å–å®Œæ‰€æœ‰çš„æ¡ç›®ã€‚æ¯æ¬¡è¯»å–åˆ°çš„ç›®å½•æ¡ç›®å­˜å‚¨åœ¨ struct dirent ç±»å‹çš„æŒ‡é’ˆ ptr ä¸­ï¼Œå¹¶è¾“å‡ºå…¶åç§°ã€‚while ((ptr = readdir(dir)) != NULL){ printf(\"%s\\n\", ptr-&gt;d_name);}3.4 å…³é—­ç›®å½•è¯»å–å®Œç›®å½•å†…å®¹åï¼Œä½¿ç”¨ closedir å‡½æ•°å…³é—­ç›®å½•ä»¥é‡Šæ”¾èµ„æºã€‚closedir(dir);3.5 è¿”å›å€¼ç¨‹åºæ­£å¸¸ç»“æŸæ—¶è¿”å›0ã€‚return 0;å››ã€æ€»ç»“é€šè¿‡è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨POSIXæ ‡å‡†çš„APIæ¥æ“ä½œæ–‡ä»¶ç›®å½•ã€‚POSIXä¸ºæˆ‘ä»¬æä¾›äº†ç»Ÿä¸€ä¸”å¼ºå¤§çš„æ¥å£ï¼Œæ–¹ä¾¿è·¨å¹³å°å¼€å‘ã€‚åœ¨åç»­çš„åšå®¢ä¸­ï¼Œå¦‚æœ‰æ—¶é—´ï¼Œæˆ‘å°†ç»§ç»­æ¢è®¨POSIXåœ¨è¿›ç¨‹ç®¡ç†ã€çº¿ç¨‹ç®¡ç†å’Œç½‘ç»œç¼–ç¨‹ç­‰æ–¹é¢çš„åº”ç”¨ã€‚å¸Œæœ›è¿™ç¯‡åšå®¢å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢é˜…è¯»ï¼" }, { "title": "ä½¿ç”¨Android Studioå¼€å‘Androidç³»ç»Ÿåº”ç”¨", "url": "/posts/android_AOSP-develop-system-app-using-android-studio.html", "categories": "Android", "tags": "", "date": "2024-04-05 21:23:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µæ˜¯ä½¿ç”¨AndroidStudioæ¥å¼€å‘Androidç³»ç»Ÿåº”ç”¨ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨AndroidStudioå¼€å‘Androidç³»ç»Ÿåº”ç”¨ã€‚äºŒã€å¼€å‘æ­¥éª¤2.1 ç¼–è¯‘frameworkAndroidç³»ç»ŸAPPå¯ä»¥ä½¿ç”¨å¾ˆå¤šéšè—çš„APIï¼Œæ‰€ä»¥éœ€è¦ä»AOSPæºç ä¸­æŠŠåŒ…å«éšè—APIçš„jaråŒ…ç¼–è¯‘å‡ºæ¥ã€‚é¦–å…ˆè¿›å…¥æºç ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šsource build/envsetup....", "content": "ä¸€ã€æ¦‚è¿°åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µæ˜¯ä½¿ç”¨AndroidStudioæ¥å¼€å‘Androidç³»ç»Ÿåº”ç”¨ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨AndroidStudioå¼€å‘Androidç³»ç»Ÿåº”ç”¨ã€‚äºŒã€å¼€å‘æ­¥éª¤2.1 ç¼–è¯‘frameworkAndroidç³»ç»ŸAPPå¯ä»¥ä½¿ç”¨å¾ˆå¤šéšè—çš„APIï¼Œæ‰€ä»¥éœ€è¦ä»AOSPæºç ä¸­æŠŠåŒ…å«éšè—APIçš„jaråŒ…ç¼–è¯‘å‡ºæ¥ã€‚é¦–å…ˆè¿›å…¥æºç ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šsource build/envsetup.shlunch rice14-engmake frameworkæœ€ç»ˆç¼–è¯‘äº§ç‰©åœ¨out/target/common/obj/JAVA_LIBRARIES/framework_intermediates/ç›®å½•ä¸‹ï¼ŒåŒ…å«éšè—APIçš„jaråŒ…åç§°æ˜¯classes.jarã€‚2.2 åˆ›å»ºAPPé¡¹ç›®åšç³»ç»Ÿå¼€å‘é€‰æ‹©AndroidStudioç‰ˆæœ¬æ¯”è¾ƒé‡è¦ï¼Œæˆ‘ä»¬æ˜¯åŸºäºAndroid 10.0.0 r41çš„ï¼Œæ‰€ä»¥é€‰æ‹©çš„Android Studio 3.6.3ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬ä¸Android 10.0.0 r41å‘å¸ƒæ—¶é—´ç›¸æ¥è¿‘ã€‚åº”ç”¨åŸºæœ¬ä¿¡æ¯å¦‚ä¸‹ï¼šæ–°å»ºå¥½é¡¹ç›®ä¹‹åï¼Œåœ¨AndroidManifest.xmlæ–‡ä»¶çš„æ ¹èŠ‚ç‚¹æ·»åŠ ä»¥ä¸‹å±æ€§android:sharedUserId=\"android.uid.system\"è¿™ä¸ªä»£è¡¨æ˜¯ç³»ç»Ÿåº”ç”¨ã€‚ç°åœ¨æˆ‘ä»¬åœ¨APPé¡¹ç›®ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªframeworkç›®å½•ï¼Œå°†ç¼–è¯‘äº§ç‰©classes.jaræ‹·è´è¿›å»å¹¶é‡å‘½åä¸ºframework.jarï¼Œç„¶åä¿®æ”¹é¡¹ç›®çº§åˆ«çš„build.gradleæ–‡ä»¶ï¼Œåœ¨allprojectsæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼šgradle.projectsEvaluated { tasks.withType(JavaCompile) { Set&lt;File&gt; fileSet = options.bootstrapClasspath.getFiles() List&lt;File&gt; newFileList = new ArrayList&lt;&gt;(); newFileList.add(new File(\"./app/framework/framework.jar\")) newFileList.addAll(fileSet) options.bootstrapClasspath = files(newFileList.toArray()) }}æ¥ä¸‹æ¥åœ¨appçš„build.gradleä¸­çš„dependenciesä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼šdependencies { implementation fileTree(dir: 'libs', include: ['*.jar']) implementation 'androidx.appcompat:appcompat:1.3.0' implementation 'androidx.constraintlayout:constraintlayout:2.1.4' compileOnly files('framework/framework.jar') testImplementation 'junit:junit:4.12' androidTestImplementation 'androidx.test.ext:junit:1.1.5' androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'}æ¥ç€æˆ‘ä»¬éœ€è¦åˆ¶ä½œç³»ç»Ÿç­¾åï¼Œè¿™é‡Œä½¿ç”¨ keytool-importkeypair (ä¸‹è½½åœ°å€ https://github.com/getfatday/keytool-importkeypair)ç­¾åå·¥å…·ï¼Œåˆšè„šæœ¬æ”¾å…¥PATHç›®å½•ä¸‹ã€‚æ¥ç€è¿›å…¥ç³»ç»Ÿæºç ä¸‹çš„ build/target/product/security è·¯å¾„ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼škeytool-importkeypair -k ./platform.keystore -p android -pk8 platform.pk8 -cert platform.x509.pem -alias platformk è¡¨ç¤ºè¦ç”Ÿæˆçš„ç­¾åæ–‡ä»¶çš„åå­—ï¼Œè¿™é‡Œå‘½åä¸º platform.keystore -p è¡¨ç¤ºè¦ç”Ÿæˆçš„ keystore çš„å¯†ç ï¼Œè¿™é‡Œæ˜¯ android -pk8 è¡¨ç¤ºè¦å¯¼å…¥çš„ platform.pk8 æ–‡ä»¶ -cert è¡¨ç¤ºè¦å¯¼å…¥çš„platform.x509.pem -alias è¡¨ç¤ºç»™ç”Ÿæˆçš„ platform.keystore å–ä¸€ä¸ªåˆ«åï¼Œè¿™æ˜¯å‘½åä¸º platformã€‚æ¥ç€ï¼ŒæŠŠç”Ÿæˆçš„ç­¾åæ–‡ä»¶ platform.keystore æ‹·è´åˆ° Android Studio é¡¹ç›®çš„ app ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ app/build.gradle ä¸­çš„androidèŠ‚ç‚¹æ·»åŠ ç­¾åçš„é…ç½®ä¿¡æ¯ï¼šsigningConfigs { sign { storeFile file('platform.keystore') storePassword 'android' keyAlias = 'platform' keyPassword 'android' }}åŒæ—¶anroidèŠ‚ç‚¹ä¸‹çš„buildTypesèŠ‚ç‚¹é…ç½®å˜æ›´å¦‚ä¸‹ï¼šbuildTypes { release { minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' signingConfig signingConfigs.sign } debug { minifyEnabled false signingConfig signingConfigs.sign }}ä¸‰ã€ä¿®æ”¹æºä»£ç 3.1 è°ƒç”¨ç³»ç»ŸAPIæˆ‘ä»¬ä¿®æ”¹MainActivityçš„onCreateæ–¹æ³•ä»£ç ï¼Œç”¨äºè°ƒç”¨ç³»ç»Ÿçš„éšè—APIï¼Œå¦‚ä¸‹public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); // è°ƒç”¨ä¸€ä¸ªç³»ç»Ÿçº§åˆ«API SystemClock.setCurrentTimeMillis(0); // è®¿é—®ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„å˜é‡ Log.d(\"SecondSystemApp\", \"\" + AudioSystem.STREAM_ACCESSIBILITY); }}3.2 Serviceä¿æ´»åœ¨javaä»£ç ç›®å½•æ–°å¢ä¸€ä¸ªTestServiceç±»ï¼Œä»£ç å¦‚ä¸‹ï¼špackage tech.webcoding.secondsystemapp;import android.app.Service;import android.content.Intent;import android.os.IBinder;import android.util.Log;public class TestService extends Service { @Override public IBinder onBind(Intent intent) { return null; } @Override public void onCreate() { super.onCreate(); new Thread() { @Override public void run() { super.run(); while (true) { Log.d(\"TestService\", \"Test Service is running\"); try { Thread.sleep(1000); } catch (InterruptedException e) { e.printStackTrace(); } } } }.start(); }}ä¸ºäº†éªŒè¯ç³»ç»ŸAPPèƒ½å¤Ÿä¿æ´»ï¼Œæˆ‘ä»¬åœ¨AndroidManifest.xmlæ–‡ä»¶ä¸­çš„applicationèŠ‚ç‚¹æ·»åŠ ä¿æ´»å±æ€§ï¼Œå¹¶æ³¨å†ŒServiceï¼Œä»£ç å¦‚ä¸‹&lt;application android:allowBackup=\"true\" android:icon=\"@mipmap/ic_launcher\" android:label=\"@string/app_name\" &lt;!-- æ·»åŠ ä¿æ´»å±æ€§ --&gt; android:persistent=\"true\" android:roundIcon=\"@mipmap/ic_launcher_round\" android:supportsRtl=\"true\" android:theme=\"@style/AppTheme\"&gt; &lt;!-- æ³¨å†ŒService --&gt; &lt;service android:name=\".TestService\" android:enabled=\"true\" android:exported=\"true\"/&gt; &lt;activity android:name=\".MainActivity\"&gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.MAIN\" /&gt; &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt;&lt;/application&gt;åœ¨MainActivityå¯åŠ¨Serviceï¼Œä»£ç å¦‚ä¸‹ï¼špublic class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); // è°ƒç”¨ä¸€ä¸ªç³»ç»Ÿçº§åˆ«API SystemClock.setCurrentTimeMillis(0); // è®¿é—®ä¸€ä¸ªç³»ç»Ÿçº§åˆ«çš„å˜é‡ Log.d(\"SecondSystemApp\", \"\" + AudioSystem.STREAM_ACCESSIBILITY); // å¯åŠ¨Service Intent intent = new Intent(this, TestService.class); startService(intent); }}å››ã€è°ƒè¯•éªŒè¯Android Studio 3.6.3è¿™ä¸ªç‰ˆæœ¬å®ƒä¸ä¼šä¸»åŠ¨è¿æ¨¡æ‹Ÿå™¨ï¼Œè¿™æ˜¯ä¸€ä¸ªbugï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨IDEçš„ç»ˆç«¯ä¸Šæ‰§è¡Œadb connect 127.0.0.1ä¸»åŠ¨è¿æ¥æ¨¡æ‹Ÿå™¨ã€‚æ¥ä¸‹æ¥ç‚¹å‡»è¿è¡Œç¨‹åºçš„æŒ‰é’®ï¼ŒAPPæ‰“å¼€åº”ç”¨åï¼Œæ‰‹åŠ¨å…³æ‰åº”ç”¨åå¹¶è§‚å¯Ÿæ—¥å¿—ï¼ŒServiceçš„æ—¥å¿—æ­£å¸¸è¾“å‡ºï¼Œè¯´æ˜æˆ‘ä»¬çš„APPå·²ç»æˆåŠŸä¿æ´»äº†ã€‚å¦‚ä¸‹å›¾" }, { "title": "åœ¨AOSPä¸­æ·»åŠ ç³»ç»ŸAPP", "url": "/posts/android_AOSP-add-system-app-source.html", "categories": "Android", "tags": "", "date": "2024-04-05 01:23:00 +0800", "snippet": "ä¸€ã€æ–°å»ºAPPé¡¹ç›®æˆ‘ä»¬ä½¿ç”¨Android Studio 3.6.3ç‰ˆæœ¬æ–°å»ºä¸€ä¸ªç©ºçš„APPé¡¹ç›®ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ˜¯Android 10 r41å‘å¸ƒä¹‹åçš„ç‰ˆæœ¬ï¼Œé€‚åˆç”¨äºåŸºäºAndroid 10çš„APPå¼€å‘ï¼ŒAndroid Studio å†å²ç‰ˆæœ¬ä¸‹è½½åœ°å€ä¸ºï¼šhttps://developer.android.google.cn/studio/archiveæ–°å»ºçš„APPåŸºæœ¬ä¿¡æ¯å¦‚ä¸‹å¦‚æ‰€ç¤ºï¼šäºŒã€æ‹·è´APPé¡¹...", "content": "ä¸€ã€æ–°å»ºAPPé¡¹ç›®æˆ‘ä»¬ä½¿ç”¨Android Studio 3.6.3ç‰ˆæœ¬æ–°å»ºä¸€ä¸ªç©ºçš„APPé¡¹ç›®ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ˜¯Android 10 r41å‘å¸ƒä¹‹åçš„ç‰ˆæœ¬ï¼Œé€‚åˆç”¨äºåŸºäºAndroid 10çš„APPå¼€å‘ï¼ŒAndroid Studio å†å²ç‰ˆæœ¬ä¸‹è½½åœ°å€ä¸ºï¼šhttps://developer.android.google.cn/studio/archiveæ–°å»ºçš„APPåŸºæœ¬ä¿¡æ¯å¦‚ä¸‹å¦‚æ‰€ç¤ºï¼šäºŒã€æ‹·è´APPé¡¹ç›®åˆ°AOSPæ¥ä¸‹æ¥æˆ‘ä»¬åœ¨AOSPçš„productç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œåä¸ºFirstSystemAppï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ–°å¢srcå’Œresç›®å½•ï¼ŒæŠŠæ–°å»ºçš„APPé¡¹ç›®å¯¹åº”çš„èµ„æºå’Œä»£ç è¿™ä¸¤ä¸ªç›®å½•ä¹‹ä¸‹ï¼Œå†æŠŠAndroidManifest.xmlæ–‡ä»¶å¤åˆ¶è¿‡æ¥åˆ°FirstSystemAppç›®å½•ä¸‹ã€‚å¦å¤–éœ€è¦åœ¨FirstSystemAppç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªAndroid.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šandroid_app { name: \"FirstSystemApp\", srcs: [\"src/**/*.java\"], resource_dirs: [\"res\"], manifest: \"AndroidManifest.xml\", platform_apis: true, sdk_version: \"\", certificate: \"platform\", product_specific: true, static_libs: [ \"androidx.appcompat_appcompat\", \"com.google.android.material_material\", \"androidx-constraintlayout_constraintlayout\", ]}åœ¨rice14.mkæ–‡ä»¶ä¸­å˜æ›´PRODUCT_PACKAGESå˜é‡ä¸ºPRODUCT_PACKAGES += helloworld \\ busybox \\ hellojavajar \\ FirstSystemAppä¸‰ã€ç¼–è¯‘æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ï¼šsource build/envsetup.shlunch rice14-engmç¼–è¯‘å®Œæˆåå¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸­å¦‚æœåº”ç”¨åˆ—è¡¨å­˜åœ¨FirstSystemAppåº”ç”¨ï¼Œåˆ™è¡¨ç¤ºæ“ä½œæˆåŠŸã€‚å››ã€ç³»ç»ŸAPPæ·»åŠ è‡ªåŠ¨å®šä¹‰åº“å…¶å®ï¼Œæˆ‘ä»¬åœ¨å¼€å‘ç³»ç»ŸAPPéœ€è¦çš„å¤§å¤šä¾èµ–åº“åœ¨AOSPæºç ä¸­å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Android.bpæ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–å³å¯ã€‚ç›¸å…³ç›®å½•å¦‚ä¸‹ï¼š prebuilts/tools/common/m2 prebuilts/sdk/current/androidxä½†å¦‚æœç³»ç»Ÿä¸­ä¸å­˜åœ¨æˆ‘ä»¬éœ€è¦çš„ä¾èµ–åº“ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨æ·»åŠ ä¸‰æ–¹åº“ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ·»åŠ lottieåº“ï¼Œåœ¨FirstSystemAppç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªliblottieç›®å½•ï¼Œç„¶åæŠŠä¸‹è½½çš„lottieä¾èµ–åŒ…æ·»åŠ åˆ°ç›®å½•ä¸‹ï¼Œlottieçš„ä¸‹è½½åœ°å€ä¸ºhttps://repo1.maven.org/maven2/com/airbnb/android/lottie/5.2.0/lottie-5.2.0.aarã€‚å°†lottieæ·»åŠ åˆ°æœ¬åœ°åï¼Œåœ¨è¯¥ç›®å½•æ–°å»ºä¸€ä¸ªAndroid.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šandroid_library_import { name: \"lib-lottie\", aars: [\"lottie-5.2.0.aar\"], sdk_version: \"current\"}æœ€åï¼Œæˆ‘ä»¬åœ¨FistSystemAppç›®å½•ä¸‹Android.bpæ–‡ä»¶ä¸­æ·»åŠ lottieä¾èµ–ï¼Œå¦‚ä¸‹android_app { name: \"FirstSystemApp\", srcs: [\"src/**/*.java\"], resource_dirs: [\"res\"], manifest: \"AndroidManifest.xml\", platform_apis: true, sdk_version: \"\", certificate: \"platform\", product_specific: true, static_libs: [ \"androidx.appcompat_appcompat\", \"com.google.android.material_material\", \"androidx-constraintlayout_constraintlayout\", \"lib-lottie\" ]}å†è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘æˆåŠŸï¼Œä»£è¡¨è‡ªå®šä¹‰ç³»ç»ŸAPPæ·»åŠ ä¸‰æ–¹åº“æˆåŠŸã€‚" }, { "title": "åœ¨AOSPä¸­æ·»åŠ äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åº", "url": "/posts/android_AOSP-add-binary-file.html", "categories": "Android", "tags": "", "date": "2024-04-04 15:23:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°è¦åœ¨AOSPæºç ä¸­æ·»åŠ äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºï¼Œéœ€æˆ‘ä»¬éœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ä¸ªç›®å½•/system/vendor/odm/productåŒæ—¶éœ€è¦çŸ¥é“Androidç¡¬ä»¶äº§å“ï¼ˆç”µè§†ã€æ‰‹æœºã€å¹³æ¿ï¼‰å¼€å‘çš„å¸¸è§„æµç¨‹å¦‚ä¸‹ï¼š Google å¼€å‘å’Œè¿­ä»£ AOSP + Kernel èŠ¯ç‰‡å‚å•†ï¼Œé’ˆå¯¹è‡ªå·±çš„èŠ¯ç‰‡ç‰¹ç‚¹ï¼Œç§»æ¤ google å¼€æºçš„ AOSP + Kerne...", "content": "ä¸€ã€æ¦‚è¿°è¦åœ¨AOSPæºç ä¸­æ·»åŠ äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºï¼Œéœ€æˆ‘ä»¬éœ€è¦çŸ¥é“ä»¥ä¸‹å‡ ä¸ªç›®å½•/system/vendor/odm/productåŒæ—¶éœ€è¦çŸ¥é“Androidç¡¬ä»¶äº§å“ï¼ˆç”µè§†ã€æ‰‹æœºã€å¹³æ¿ï¼‰å¼€å‘çš„å¸¸è§„æµç¨‹å¦‚ä¸‹ï¼š Google å¼€å‘å’Œè¿­ä»£ AOSP + Kernel èŠ¯ç‰‡å‚å•†ï¼Œé’ˆå¯¹è‡ªå·±çš„èŠ¯ç‰‡ç‰¹ç‚¹ï¼Œç§»æ¤ google å¼€æºçš„ AOSP + Kernelï¼Œä½¿å…¶åœ¨è‡ªå·±çš„èŠ¯ç‰‡ä¸Šè·‘èµ·æ¥ æ–¹æ¡ˆå‚å•†ï¼ˆå¾ˆå¤šèŠ¯ç‰‡å‚å•†ä¹Ÿæ‰®æ¼”äº†æ–¹æ¡ˆå‚å•†çš„è§£å†³ï¼‰ï¼Œè®¾è®¡ç”µè·¯æ¿ï¼Œæ·»åŠ å¤–è®¾ã€‚è½¯ä»¶ä¸Šä¸»è¦æ˜¯å¼€å‘ç¡¬ä»¶é©±åŠ¨å’Œhalï¼Œå®åŠ›å¼ºçš„å‚å•†è¿˜ä¼šä¿®æ”¹éƒ¨åˆ†bugå’Œåšä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€‚ äº§å“å‚å•†ï¼Œé€šå¸¸å°±æ˜¯ odm oem å‚å•†ï¼Œä¸»è¦æ˜¯åšç³»ç»Ÿè½¯ä»¶å¼€å‘ã€‚å®åŠ›å¼ºçš„å‚å•†å¯èƒ½è¿˜ä¼šä¿®æ”¹ä¸»æ¿ï¼Œæ·»åŠ è‡ªå·±çš„å¤–è®¾å’ŒèŠ¯ç‰‡ï¼Œè½¯ä»¶ä¸Šå¼€å‘è‡ªå·±çš„é©±åŠ¨å’Œhalç¨‹åºã€‚å¦å¤–ï¼Œä¿®æ”¹bugå’Œæ€§èƒ½ä¼˜åŒ–æ˜¯äº§å“å‚å•†çš„æ°¸è¿œå¹²ä¸å®Œçš„å·¥ä½œã€‚ äº§å“å‚å•†æœ€ç»ˆå†™çš„ä»£ç ï¼Œå¤§å¤šä¼šå†™åˆ°/productå’Œ/odmåˆ†åŒºã€‚äºŒã€æ·»åŠ C++æºç 2.1 æ·»åŠ æºä»£ç æ–‡ä»¶é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨æˆ‘ä»¬å®šä¹‰çš„productç›®å½•ä¸‹æ–°å¢ä¸€ä¸ªhelloworldç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ªhelloworld.cppæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š#include &lt;iostream&gt;int main() { std::cout &lt;&lt; \"Hello, World! Android C/C++\" &lt;&lt; std::endl; return 0;}2.2 æ·»åŠ Android.bpæ–‡ä»¶è¯¥æ–‡ä»¶ç”¨äºæè¿°ç¼–è¯‘è§„åˆ™ï¼Œåœ¨helloworldç›®å½•ä¸‹æ–°å¢ä¸€ä¸ªhelloworld.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šcc_binary { name: \"helloworld\", srcs: [\"helloworld.cpp\"]}2.3 å•æ¨¡å—ç¼–è¯‘é¦–å…ˆæˆ‘ä»¬æ‰§è¡Œå•æ¨¡å—ç¼–è¯‘ï¼Œå‘½ä»¤å¦‚ä¸‹# æ‰§è¡Œåˆå§‹åŒ–source build/envsetup.sh# é€‰æ‹©ç¼–è¯‘ç›®æ ‡lunch rice14-eng# è¿›å…¥æºç ç›®å½•cd device/jelly/rice14/helloworld/# æ‰§è¡Œç¼–è¯‘mmç¼–è¯‘æˆåŠŸåï¼Œç»ˆç«¯å°†è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯15:47:32 Build configuration changed: \"aosp_x86_64-eng\" -&gt; \"rice14-eng\", forcing installclean[100% 23/23] Install: out/target/product/generic_x86_64/system/bin/helloworld#### build completed successfully (01:13 (mm:ss)) ####2.4 æ•´ä½“ç¼–è¯‘2.4.1 å°†å¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ åˆ°systemåˆ†åŒºé¦–å…ˆéœ€è¦åœ¨productç›®å½•çš„rice14.mkæ·»åŠ å¦‚ä¸‹ä¸€è¡Œä¸¤ä¸ªå…³é”®å˜é‡ï¼Œåˆ†åˆ«ç”¨äºæ‰“åŒ…å¯æ‰§è¡Œæ–‡ä»¶åˆ°ç³»ç»Ÿå’Œæ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶åˆ°systemåˆ†åŒºçš„ç™½åå•ã€‚# æ·»åŠ helloworldPRODUCT_PACKAGES += helloworld# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶åˆ°ç³»ç»Ÿç™½åå•PRODUCT_ARTIFACT_PATH_REQUIREMENT_WHITELIST += \\ system/bin/helloworld# åŸäº§å“åç§°å˜é‡PRODUCT_NAME := rice14PRODUCT_DEVICE := generic_x86_64PRODUCT_BRAND := AndroidPRODUCT_MODEL := AOSP on x86_64æ‰§è¡Œæ•´ä½“ä¾¿åˆ©ï¼Œå‘½ä»¤å¦‚ä¸‹# æ‰§è¡Œåˆå§‹åŒ–source build/envsetup.sh# é€‰æ‹©ç¼–è¯‘ç›®æ ‡lunch rice14-eng# ç¼–è¯‘m2.4.2 å°†å¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ åˆ°productåˆ†åŒºä¸è¿‡æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ç®¡æ˜¯åšèŠ¯ç‰‡ã€æ–¹æ¡ˆã€äº§å“å‚å•†ï¼Œéƒ½å°½é‡é¿å…æ·»åŠ åˆ°/systemç›®å½•ä¸‹ã€‚é€šå¸¸æ˜¯æ”¾åœ¨ product åˆ†åŒºï¼Œå› æ­¤éœ€è¦åœ¨Android.bpæ·»åŠ product_specific: trueï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹ï¼šcc_binary { name: \"helloworld\", srcs: [\"helloworld.cpp\"], product_specific: true}åŒæ—¶éœ€è¦æŠŠrice14.mkçš„å¦‚ä¸‹ä»£ç åˆ é™¤# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶åˆ°ç³»ç»Ÿç™½åå•PRODUCT_ARTIFACT_PATH_REQUIREMENT_WHITELIST += \\ system/bin/helloworldå†æ‰§è¡Œä¸€æ¬¡æ•´ä½“ç¼–è¯‘ï¼Œå‘½ä»¤å¦‚ä¸‹mæœ€ç»ˆç¼–è¯‘å®Œæˆåï¼Œç»ˆç«¯å°†è¾“å‡ºå¦‚ä¸‹ä¿¡æ¯The new table will be used at the next reboot.The operation has completed successfully.out/host/linux-x86/bin/sgdisk --clear out/target/product/generic_x86_64/system-qemu.img#### build completed successfully (01:47 (mm:ss)) ####2.5 éªŒè¯å¯æ‰§è¡Œç¨‹åºç¼–è¯‘å®Œæˆåï¼Œä½¿ç”¨emulatorå‘½ä»¤å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œå¹¶åœ¨ç»ˆç«¯ä½¿ç”¨adb shellå‘½ä»¤æ‰“å¼€å®‰è£…shellï¼ŒæŸ¥çœ‹/product/binç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨helloworldå¯æ‰§è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾å¦‚æœæ­£å¸¸æ‰§è¡Œï¼Œåˆ™ä»£è¡¨æ“ä½œæˆåŠŸã€‚2.6 æ€»ç»“ç³»ç»Ÿæºç ä¸­çš„äºŒè¿›åˆ¶ç¨‹åºä¸€èˆ¬é¢„åˆ¶åˆ°productåˆ†åŒºï¼Œéœ€è¦åœ¨Android.bpä¸­æ·»åŠ product_specific: trueã€‚å¦‚æœæˆ‘ä»¬ä¸€å®šè¦å°†äºŒè¿›åˆ¶ç¨‹åºæ·»åŠ åˆ°systemåˆ†åŒºï¼Œåˆ™éœ€è¦åœ¨Android.bpä¸­æ·»åŠ product_specific: falseï¼ŒåŒæ—¶éœ€è¦åœ¨rice14.mkä¸­é€šè¿‡PRODUCT_ARTIFACT_PATH_REQUIREMENT_WHITELISTå˜é‡è®¾ç½®ç™½åå•ã€‚ä¸‰ã€æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶3.1 å‡†å¤‡äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†å¯æ‰§è¡Œæ–‡ä»¶ç›´æ¥æ·»åŠ åˆ°ç³»ç»Ÿæºç ä¸­ï¼Œè€Œä¸æ˜¯é€šè¿‡æ·»åŠ æºä»£ç æœ€åç¼–è¯‘ç”Ÿæˆã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ busybox æ·»åŠ åˆ°ç³»ç»Ÿæºç ä¸­ã€‚æˆ‘ä»¬å…ˆåœ¨productç›®å½•æ–°å»ºä¸€ä¸ªprebuildç›®å½•ï¼Œä»£è¡¨ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•ã€‚å†åœ¨prebuildç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªbusyboxç›®å½•ï¼Œå°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶busyboxæ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ã€‚ä»¥ä¸Šè¿‡ç¨‹æ‰§è¡Œå‘½ä»¤å¦‚ä¸‹mkdir -p device/jelly/rice14/prebuild/busyboxcd device/jelly/rice14/prebuild/busyboxwget https://busybox.net/downloads/binaries/1.30.0-i686/busyboxåœ¨åŒçº§ç›®å½•æ·»åŠ Android.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šcc_prebuilt_binary { name: \"busybox\", srcs: [\"busybox\"], product_specific: true}æ¥ä¸‹æ¥åœ¨rice14.mkä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼šPRODUCT_PACKAGES += helloworld \\ busybox3.2 æ‰§è¡Œæ•´ä½“ç¼–è¯‘å‘½ä»¤å¦‚ä¸‹source build/envsetup.shlunch rice14-engmç¼–è¯‘å®Œæˆåï¼Œå…³é—­è™šæ‹Ÿæœºï¼Œå†é‡æ–°ä½¿ç”¨emulatorå¯åŠ¨è™šæ‹Ÿæœºï¼Œä½¿ç”¨adb shellå‘½ä»¤æŸ¥çœ‹/product/binç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨busyboxå¯æ‰§è¡Œç¨‹åºï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾`ç»“æœå¦‚å›¾æ‰€ç¤ºåˆ™ä»£è¡¨æ“ä½œæˆåŠŸã€‚å››ã€æ·»åŠ Javaæºç 4.1 å‡†å¤‡Javaæºç åœ¨productç›®å½•æ–°å¢ä¸€ä¸ªhellojavaç›®å½•ï¼Œé¦–å…ˆå»ºåŒ…çš„è·¯å¾„tech.webcoding.mainï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºç›®å½•mkdir -p device/jelly/rice14/hellojava/tech/webcoding/mainåœ¨tech.webcoding.mainç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªHelloJava.javaæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼špackage tech.webcoding.main;public class HelloJava { public static void main(String[] args) { System.out.println(\"Hello Java\"); }}å¦å¤–æ·»åŠ Android.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹java_library { name: \"hellojava\", installable: true, product_specific: true, srcs: [\"**/*.java\"], sdk_version: \"current\"}éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸æŒ‡å®šinstallable: trueï¼Œé‚£ä¹ˆç¼–è¯‘äº§ç‰©éƒ½æ˜¯.classæ–‡ä»¶ï¼Œè¿™ç§æ–‡ä»¶åœ¨Androidæ— æ³•ç›´æ¥è¿è¡Œã€‚æœ€åéœ€è¦åœ¨rice14.mkä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼šPRODUCT_PACKAGES += helloworld \\ busybox \\ hellojava4.2 æ‰§è¡Œç¼–è¯‘å¹¶éªŒè¯æ¥ç€æ‰§è¡Œç¼–è¯‘source build/envsetup.shlunch rice14-engmç¼–è¯‘å®Œæˆä¹‹åè¿è¡Œæ¨¡æ‹Ÿå™¨ï¼Œå¹¶ä½¿ç”¨adb shellæ‰“å¼€ç»ˆç«¯ï¼ŒæŸ¥çœ‹product/framework/ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨hellojava.jarï¼Œå¦‚æœå­˜åœ¨åˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤# é…ç½® classpathexport CLASSPATH=/product/framework/hellojava.jar# æ‰§è¡Œç¨‹åºapp_process /product/framework/ tech.webcoding.main.HelloJavaæ­£å¸¸è¾“å‡ºç»“æœä»£è¡¨æ“ä½œæˆåŠŸã€‚äº”ã€æ·»åŠ JaråŒ…åœ¨productç›®å½•æ–°å¢ä¸€ä¸ªhellojavajarç›®å½•ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠç¬¬å››æ­¥ç¼–è¯‘å‡ºçš„hellojava.jaræ‹·è´åˆ°hellojavajarç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å‘½ä»¤cp out/target/product/generic_x86_64/system/product/framework/hellojava.jar device/jelly/rice14/hellojavajar/ç„¶åæ·»åŠ Android.bpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šjava_import { name: \"hellojavajar\", installable: true, jars: [\"hellojava.jar\"], product_specific: true}ä¸ºäº†é¿å…å†²çªï¼Œæˆ‘ä»¬éœ€è¦æŠŠç¬¬å››æ­¥çš„hellojavaåˆ é™¤æ‰ã€‚å†åœ¨rice14.mkä¸­æ·»åŠ å¦‚ä¸‹ä»£ç å˜æ›´PRODUCT_PACKAGESå˜é‡å¦‚ä¸‹PRODUCT_PACKAGES += helloworld \\ busybox \\ hellojavajarå†æ‰§è¡Œç¼–è¯‘ï¼Œå‘½ä»¤å¦‚ä¸‹source build/envsetup.shlunch rice14-engmç¼–è¯‘å®Œæˆåï¼Œé‡æ–°å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼Œå†ä½¿ç”¨adb shellæ‰“å¼€ç»ˆç«¯ï¼ŒæŸ¥çœ‹product/framework/ç›®å½•ä¸‹æ˜¯å¦å­˜åœ¨hellojavajar.jarï¼Œå¦‚æœå­˜åœ¨åˆ™æ‰§è¡Œä»¥ä¸‹å‘½ä»¤# é…ç½® classpathexport CLASSPATH=/product/framework/hellojavajar.jar# æ‰§è¡Œç¨‹åºapp_process /product/framework/ tech.webcoding.main.HelloJavaæ­£å¸¸è¾“å‡ºç»“æœä»£è¡¨æ“ä½œæˆåŠŸã€‚" }, { "title": "åœ¨AOSPä¸­æ·»åŠ Product", "url": "/posts/android_AOSP-add-product.html", "categories": "Android", "tags": "", "date": "2024-04-04 11:48:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨ç¼–è¯‘ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ lunch å‘½ä»¤ï¼Œæ¥é€‰æ‹©ç¼–è¯‘çš„ productã€‚åœ¨APPå¼€å‘ä¸­ï¼Œä¸€ä»½æºç å¯ä»¥ç¼–è¯‘å‡ºå¤šä¸ªä¸åŒçš„æ¸ é“åŒ…ï¼Œè€Œåœ¨ç¼–è¯‘ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ lunch å‘½ä»¤æ¥é€‰æ‹©ç¼–è¯‘çš„ productã€‚productå­˜åœ¨çš„ä½œç”¨æ˜¯ä½¿ç”¨åŒä¸€ä»½æºç é€šè¿‡ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œæ¥ç¼–è¯‘æˆä¸åŒçš„é•œåƒï¼Œæœ€ç»ˆç”¨äºä¸åŒçš„ç¡¬ä»¶äº§å“ã€‚äºŒã€producté…ç½®æ–‡ä»¶2.1 product æ–‡ä»¶product é…ç½®æ–‡ä»¶...", "content": "ä¸€ã€æ¦‚è¿°åœ¨ç¼–è¯‘ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œ lunch å‘½ä»¤ï¼Œæ¥é€‰æ‹©ç¼–è¯‘çš„ productã€‚åœ¨APPå¼€å‘ä¸­ï¼Œä¸€ä»½æºç å¯ä»¥ç¼–è¯‘å‡ºå¤šä¸ªä¸åŒçš„æ¸ é“åŒ…ï¼Œè€Œåœ¨ç¼–è¯‘ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ lunch å‘½ä»¤æ¥é€‰æ‹©ç¼–è¯‘çš„ productã€‚productå­˜åœ¨çš„ä½œç”¨æ˜¯ä½¿ç”¨åŒä¸€ä»½æºç é€šè¿‡ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œæ¥ç¼–è¯‘æˆä¸åŒçš„é•œåƒï¼Œæœ€ç»ˆç”¨äºä¸åŒçš„ç¡¬ä»¶äº§å“ã€‚äºŒã€producté…ç½®æ–‡ä»¶2.1 product æ–‡ä»¶product é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•å¦‚ä¸‹ï¼š build/target: æ¨¡æ‹Ÿå™¨ç›¸å…³çš„ product æ–‡ä»¶ device: å®é™…ç¡¬ä»¶è®¾å¤‡ç›¸å…³çš„ product æ–‡ä»¶ï¼Œä¸»è¦æ˜¯ pixel æ‰‹æœºç›¸å…³çš„ product æ–‡ä»¶ä»¥ aosp_x86_64-eng è¿™ä¸ªæ¨¡æ‹Ÿå™¨ä¸ºä¾‹ï¼Œç›¸å…³productæ–‡ä»¶å¦‚ä¸‹ï¼š build/target/board/generic_x86_64/BoardConfig.mkï¼šç”¨äºå®šä¹‰å’Œç¡¬ä»¶ç›¸å…³çš„åº•å±‚ç‰¹æ€§å’Œå˜é‡ build/target/product/AndroidProducts.mk build/target/product/aosp_x86_64.mk2.2 AndroidProducts.mkåœ¨build/target/board/generic_x86_64/BoardConfig.mkæ–‡ä»¶ä¸­å­˜åœ¨ä»¥ä¸‹çš„ä»£ç ï¼šinclude build/make/target/board/BoardConfigGsiCommon.mkinclude build/make/target/board/BoardConfigEmuCommon.mkä»£è¡¨å¼•å…¥äº† BoardConfigGsiCommon.mk å’Œ BoardConfigEmuCommon.mk æ–‡ä»¶ï¼Œå¦‚æœè¿™ä¸¤ä¸ªæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç¼–è¯‘ä¼šæŠ¥é”™ã€‚å‡è®¾æˆ‘ä»¬å¸Œæœ›å¼•å…¥ä¸åˆ°æ–‡ä»¶æ—¶ä¸æŠ¥é”™ï¼Œå¯ä»¥ä½¿ç”¨ -include å‘½ä»¤ã€‚2.3 AndroidProducts.mkbuild/target/product/AndroidProducts.mkå®šä¹‰äº†å¾ˆå¤šçš„productã€‚æˆ‘ä»¬åœ¨æ‰§è¡Œç¼–è¯‘å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ lunch å‘½ä»¤æ¥é€‰æ‹©ç¼–è¯‘çš„productã€‚2.4 aosp_x86_64.mkbuild/target/product/aosp_x86_64.mk æ–‡ä»¶æ—¶å®šä¹‰äº§å“ä¿¡æ¯çš„ä¸»è¦é…ç½®æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ä¿®æ”¹æœ€å¤šçš„æ–‡ä»¶ã€‚å…¶ä¸­æœ‰å‡ ä¸ªå®šä¹‰äº§å“åç§°çš„å˜é‡å¦‚ä¸‹ï¼šPRODUCT_NAME := aosp_x86_64PRODUCT_DEVICE := generic_x86_64PRODUCT_BRAND := AndroidPRODUCT_MODEL := AOSP on x86_64å¦å¤–ï¼Œæœ‰ä¸€ä¸ªcall inherit-productå…³é”®è¯ï¼Œè¿™æ˜¯è‡ªå®šä¸€ä¸ªMakefileçš„ä¸€ä¸ªå‡½æ•°ï¼Œä½œç”¨ä¸includeæ¯”è¾ƒç±»ä¼¼ã€‚é…ç½®æ–‡ä»¶ä¸­å…³é”®éƒ¨åˆ†å¦‚ä¸‹ï¼š# GSI for system/product$(call inherit-product, $(SRC_TARGET_DIR)/product/core_64_bit.mk)$(call inherit-product, $(SRC_TARGET_DIR)/product/gsi_common.mk)# Emulator for vendor$(call inherit-product-if-exists, device/generic/goldfish/x86_64-vendor.mk)$(call inherit-product, $(SRC_TARGET_DIR)/product/emulator_vendor.mk)$(call inherit-product, $(SRC_TARGET_DIR)/board/generic_x86_64/device.mk)include å’Œinherit-product çš„åŒºåˆ«å¦‚ä¸‹ å‡è®¾ PRODUCT_VAR:=a åœ¨A.mkä¸­ï¼ŒPRODUCT_VAR:=båœ¨B.mk å¦‚æœä½ åœ¨ A.mk ä¸­include B.mkï¼Œä½ æœ€ç»ˆä¼šå¾—åˆ° PRODUCT_VAR;=bã€‚ ä½†æ˜¯å¦‚æœä½ åœ¨ A.mk inherit-product B.mkï¼Œä½ ä¼šå¾—åˆ° PRODUCT_VARï¼š=abã€‚inherit-productç¡®ä¿æ‚¨ä¸ä¼šä¸¤æ¬¡åŒ…å«åŒä¸€ä¸ªmakefileã€‚æœ‰å¦ä¸€ä¸ªæ“ä½œcall inherit-product-if-exists ä»£è¡¨å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œã€‚ä¸‰ã€æ·»åŠ ä¸€ä¸ªproduct3.1 æ·»åŠ productæ–‡ä»¶å‡è®¾æˆ‘ä»¬çš„å…¬å¸åå«åšjellyï¼Œè¦å¼€å‘çš„äº§å“åç§°æ˜¯rice14ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼Œå¦‚ä¸‹å‘½ä»¤mkdir -p device/jelly/rice14åŒæ—¶åœ¨ç›®å½•ä¸‹æ·»åŠ ä¸‰ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶åå¦‚ä¸‹ï¼šdevice/jelly/rice14/BoardConfig.mkdevice/jelly/rice14/AndroidProducts.mkdevice/jelly/rice14/rice14.mkå…¶ä¸­ï¼ŒBoardConfig.mkå’Œrice14.mkç›¸å…³é…ç½®å†…å®¹æˆ‘ä»¬ç›´æ¥å¤ç”¨ aosp_x86_64 çš„é…ç½®ã€‚3.2 ä¿®æ”¹rice14.mkåœ¨rice14.mké…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¿®æ”¹å…¶ä¸­çš„å‘¢ç»’ï¼Œç›´æ¥åŠ è½½PRODUCT_ENFORCE_ARTIFACT_PATH_REQUIREMENTS := relaxedï¼Œå»æ‰å…¶ifåˆ¤æ–­ã€‚æœ€ç»ˆä»£ç å¦‚ä¸‹ï¼šPRODUCT_ENFORCE_ARTIFACT_PATH_REQUIREMENTS := relaxedåŒæ—¶ä¿®æ”¹PRODUCT_NAMEå˜é‡ï¼Œæœ€ç»ˆå¦‚ä¸‹PRODUCT_NAME := rice14PRODUCT_DEVICE := generic_x86_64PRODUCT_BRAND := AndroidPRODUCT_MODEL := AOSP on x86_643.3 ä¿®æ”¹AndroidProducts.mkå¦å¤–éœ€è¦åœ¨AndroidProducts.mkæ–‡ä»¶ä¸­ï¼Œæ·»åŠ  product é€‰é¡¹ã€‚æ–°å¢å†…å®¹å¦‚ä¸‹ï¼šPRODUCT_MAKEFILES := \\ $(LOCAL_DIR)/rice14.mkCOMMON_LUNCH_CHOICES := \\ rice14-eng \\ rice14-userdebug \\ rice14-user3.4 è¿è¡Œæµ‹è¯•æœ€ååœ¨æºç ç›®å½•æ‰§è¡Œlunchï¼Œå¦‚æœå‡ºç°å¦‚ä¸‹producté€‰é¡¹ï¼Œåˆ™æˆåŠŸã€‚44. rice14-eng45. rice14-user46. rice14-userdebugæˆ‘ä»¬é€‰æ‹©44ï¼Œå¦‚æœå—æ²¡æœ‰å‡ºç°æŠ¥é”™ï¼Œä»£è¡¨productæ·»åŠ æˆåŠŸã€‚" }, { "title": "æ‰‹æŠŠæ‰‹æ•™ä½ ç¼–è¯‘å’Œè°ƒè¯•AOSPæºç ", "url": "/posts/android_A-Step-by-Step-Guide-to-Compiling-and-Debugging-AOSP-Source-Code.html", "categories": "Android", "tags": "", "date": "2024-03-31 04:12:00 +0800", "snippet": "ä¸€ã€ä¸‹è½½AOSPæºç åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå®‰è£…ç¼–è¯‘AOSPéœ€è¦çš„ä¸€äº›ç³»ç»ŸåŸºæœ¬ä¾èµ–ï¼Œå¦‚ä¸‹å‘½ä»¤sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11pro...", "content": "ä¸€ã€ä¸‹è½½AOSPæºç åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå®‰è£…ç¼–è¯‘AOSPéœ€è¦çš„ä¸€äº›ç³»ç»ŸåŸºæœ¬ä¾èµ–ï¼Œå¦‚ä¸‹å‘½ä»¤sudo apt-get install git-core gnupg flex bison gperf build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z-dev ccache libgl1-mesa-dev libxml2-utils xsltproc unzipåŸºäº AOSP çš„å¼€å‘æ¨èåœ¨ Ubuntu 20.04 LTS ä¸‹è¿›è¡Œï¼Œå› æ­¤ä½ ç”µè„‘æœ€ä¼˜é€‰æ‹©æ˜¯ Ubuntu ç³»ç»Ÿã€‚å¦‚æœä¸é€‰æ‹© Ubuntu ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Deepinã€Debian ç­‰ç¯å¢ƒç›¸ä¼¼çš„ç³»ç»Ÿã€‚å‡è®¾ä½ å¯¹AOSP æœ‰ä¸€å®šçš„äº†è§£ï¼Œä½†è¿˜æ²¡æœ‰çœŸæ­£å®è·µï¼Œè¿™ç¯‡æ–‡ç« å¾ˆé€‚åˆä½ ã€‚å¦‚æœä½ ç”µè„‘æ²¡æœ‰repoå·¥å…·éœ€è¦å…ˆå®‰è£… repo å·¥å…·ï¼Œå‘½ä»¤å¦‚ä¸‹mkdir ~/bin# ä½¿ç”¨tunaé•œåƒä¸‹è½½repocurl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo -o ~/bin/repochmod +x ~/bin/repo# ä»¥ä¸‹è¿™æ¡å‘½ä»¤å¯ä»¥æ·»åŠ åˆ° `~/.bashrc` æ–‡ä»¶ä¸­export PATH=~/bin:$PATHå‡è®¾ç”µè„‘å·²ç»åŒ…å«äº†gitå·¥å…·ï¼Œæ¥ä¸‹æ¥éœ€è¦åŒæ­¥æºä»£ç ï¼Œå‘½ä»¤å¦‚ä¸‹mkdir aosp cd asop# åˆå§‹åŒ–repoï¼ŒæŒ‡å®šæºç åˆ†æ”¯ä¸º `android-10.0.0_r41`repo init -u https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest -b android-10.0.0_r41# åŒæ­¥è¿œç¨‹ä»£ç repo syncåŒæ­¥æºç çš„è€—æ—¶è¾ƒé•¿ï¼Œè€å¿ƒç­‰å¾…å³å¯ã€‚æºç åŒæ­¥å®Œæˆåï¼Œå³å¯è¿›è¡Œç¬¬äºŒæ­¥ä»¥åçš„æ“ä½œã€‚äºŒã€ç¼–è¯‘SDKåˆå§‹åŒ– AOSP ç¼–è¯‘ç¯å¢ƒä¸é€‰æ‹© SDK ä½œä¸ºç¼–è¯‘ç›®æ ‡# åˆå§‹åŒ–ç¯å¢ƒsource build/envsetup.sh# é€‰æ‹©ç¼–è¯‘ç›®æ ‡lunch sdk-engç»ˆç«¯è¾“å‡ºä¿¡æ¯å¦‚ä¸‹pan@pan-PC:~/Android/aosp/android13$ lunch sdk-eng============================================PLATFORM_VERSION_CODENAME=VanillaIceCreamPLATFORM_VERSION=VanillaIceCreamTARGET_PRODUCT=sdkTARGET_BUILD_VARIANT=engTARGET_ARCH=x86TARGET_ARCH_VARIANT=x86HOST_OS=linuxHOST_OS_EXTRA=Linux-5.15.77-amd64-desktop-x86_64-Deepin-20.9HOST_CROSS_OS=windowsBUILD_ID=AOSP.MASTEROUT_DIR=out===========================================ç¼–è¯‘sdkmake sdkæœ€åç”Ÿæˆçš„sdkç›®å½•åœ¨ out/host/linux-x86/sdk/sdk/android-sdk_eng.{$USER}_linux-x86 ä¸‹ï¼Œç”¨äº AOSP çš„åç»­å¼€å‘å’Œè°ƒè¯•ã€‚ä¸‰ã€ç¼–è¯‘AOSPå¹¶å¯åŠ¨æ¨¡æ‹Ÿå™¨åˆå§‹åŒ– AOSP ç¼–è¯‘çš„ç›®æ ‡è¿è¡Œè®¾å¤‡ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© aosp_x86_64-englunch aosp_x86_64-engç¼–è¯‘# ä½¿ç”¨ make æ•°å€¼ çš„å‘½ä»¤è¿›è¡ŒæŒ‡å®šçº¿ç¨‹æ•°ç¼–è¯‘ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ m å‘½ä»¤è‡ªåŠ¨é€‰æ‹©æœ€å¤§çº¿ç¨‹æ•°make -j$(nproc)ç¼–è¯‘å®Œæˆä¹‹åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨æ¨¡æ‹Ÿå™¨emulatorå››ã€ä½¿ç”¨ASFPæ‰“å¼€AOSPçš„å­æ¨¡å—æˆ‘ä»¬å…ˆä»‹ç» ASFPï¼Œå®ƒæ˜¯ Android Studio for Platform çš„ç®€ç§°ï¼Œè°·æ­Œå®˜æ–¹æä¾›äº†è¯¥å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿çš„è¿›è¡ŒåŸºäº AOSP çš„å¼€å‘ã€‚å¦‚æœä½ ç”µè„‘ä¸Šè¿˜æ²¡æœ‰å®‰è£… ASFPï¼Œå¯ä»¥åˆ° https://developer.android.google.cn/studio/platform?hl=en ä¸‹è½½å®‰è£…ã€‚è¿™é‡Œæˆ‘ä»¬è¦æ‰“å¼€ Setting ï¼ˆç³»ç»Ÿè®¾ç½®APPï¼‰æºä»£ç å¹¶è¿›è¡Œè°ƒè¯•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š é¦–é¡µç‚¹å‡»ï¼šImport Asfp Project å¡«å†™é¡¹ç›®ä¿¡æ¯ é¡¹ç›®å…³é”®ä¿¡æ¯å¦‚ä¸‹å›¾çº¢æ ‡éƒ¨åˆ†é…ç½®å®Œæˆä¹‹åï¼Œç‚¹å‡» Finish æ‰“å¼€åˆ°ä»£ç ç¼–è¾‘å™¨çª—å£ã€‚ é…ç½®SDKï¼ˆ1ï¼‰æ‰“å¼€ Project Struct -&gt; Platform Settings -&gt; SDKs -&gt; + -&gt; Add Android SDKï¼šæ·»åŠ  Android SDKï¼Œé€‰æ‹© out/host/linux-x86/sdk/sdk/android-sdk_eng.{$USER}_linux-x86ï¼Œæ·»åŠ åå¯é‡å‘½åä¸º aosp10-sdkï¼Œç‚¹å‡» Applyã€‚ï¼ˆ2ï¼‰æ‰“å¼€å·¦ä¾§çš„Projectï¼Œé…ç½®SDKï¼Œé€‰æ‹©åˆšæ‰æ·»åŠ çš„SDKã€‚ï¼ˆ3ï¼‰Project Settings -&gt; Modulesï¼Œç¡®ä¿ Settings æ¨¡å—å·²ç»ä½¿ç”¨äº†ä¸Šè¿°é…ç½®çš„SDKã€‚è¿™ä¸ªæ—¶å€™é¡¹ç›®å°±é…ç½®å¥½äº†ã€‚äº”ã€è°ƒè¯•ä»£ç å›åˆ°ä»£ç ä¸»ç¼–è¾‘å™¨çª—å£åï¼Œé¦–å…ˆæ‰¾åˆ°å…³é”®çš„ä»£ç æ‰“æ–­ç‚¹ï¼Œç„¶åç‚¹å‡» Attach Debugger to Android Process æŒ‰é’®è¿æ¥åˆ°æ¨¡æ‹Ÿå™¨ï¼Œå°±å¯ä»¥çœ‹åˆ°ä»£ç çš„è°ƒè¯•æ•ˆæœäº†ã€‚å¦‚ä¸‹å›¾ï¼šåœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘æ‰“æ–­ç‚¹çš„ä½ç½®æ˜¯Settings æ¨¡å—çš„ SettingsHomepageActivity ç±»çš„ onCreate æ–¹æ³•ã€‚è¯¥æ–¹æ³•åœ¨å¯åŠ¨ç³»ç»Ÿè®¾ç½®æ—¶è¢«è°ƒç”¨ï¼Œç”¨æ¥åˆå§‹åŒ–ç•Œé¢ã€‚ç‚¹å‡» OK åï¼Œæˆ‘ä»¬éœ€è¦åœ¨è™šæ‹Ÿæœºä¸Šæ‰‹åŠ¨æ‰“å¼€ç³»ç»Ÿè®¾ç½®ï¼Œç„¶åå°±å¯ä»¥è¿›è¡Œè°ƒè¯•äº†ã€‚æ•ˆæœå¦‚ä¸‹å›¾ï¼š" }, { "title": "å¦‚ä½•ä¸ºå®‰å“è®¾å¤‡ç¼–è¯‘ LineageOS æ“ä½œç³»ç»Ÿ", "url": "/posts/android_How-to-compile-the-LineageOS-for-a-android-device.html", "categories": "Android", "tags": "", "date": "2024-03-29 22:59:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°LineageOS æ˜¯ä¸€ä¸ªåŸºäº Android çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œæ”¯æŒå„ç§è®¾å¤‡ã€‚æœ¬æ–‡æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ‰‹æœºå‹å·ä¸º Nubia Play 5G ã€‚å¯ä»¥é€šè¿‡ LineageOS å®˜ç½‘æŸ¥çœ‹ LineageOS å®˜æ–¹æ”¯æŒçš„æ‰‹æœºå‹å·ã€‚åŒæ—¶ LineageOS å®˜ç½‘ä¹Ÿæä¾›äº†ç¼–è¯‘æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬å¯ä»¥æ‰“å¼€ LineageOS å®˜ç½‘æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹å¤§æ¦‚åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š å‡†å¤‡ç¼–è¯‘ç¯å¢ƒ ...", "content": "ä¸€ã€æ¦‚è¿°LineageOS æ˜¯ä¸€ä¸ªåŸºäº Android çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œæ”¯æŒå„ç§è®¾å¤‡ã€‚æœ¬æ–‡æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ‰‹æœºå‹å·ä¸º Nubia Play 5G ã€‚å¯ä»¥é€šè¿‡ LineageOS å®˜ç½‘æŸ¥çœ‹ LineageOS å®˜æ–¹æ”¯æŒçš„æ‰‹æœºå‹å·ã€‚åŒæ—¶ LineageOS å®˜ç½‘ä¹Ÿæä¾›äº†ç¼–è¯‘æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚æˆ‘ä»¬å¯ä»¥æ‰“å¼€ LineageOS å®˜ç½‘æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹å¤§æ¦‚åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š å‡†å¤‡ç¼–è¯‘ç¯å¢ƒ æ‹‰å–æºç  é…ç½®ç¼–è¯‘ç¯å¢ƒ æ‰§è¡Œç¼–è¯‘ åˆ·æœºåœ¨æ’°å†™æ–‡ç« æ—¶ï¼ŒLineageOS æä¾›äº† LineageOS 20 å’Œ LineageOS 21ä¸¤ä¸ªç¨³å®šç‰ˆæœ¬ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹© LineageOS 20 ã€‚ä¸‹æ–‡è¯¦ç»†ä»‹ç» LineageOS 20 çš„ç¼–è¯‘è¿‡ç¨‹ã€‚äºŒã€å‡†å¤‡ç¯å¢ƒ1.1 ç”µè„‘ç¡¬ä»¶ä¸æ“ä½œç³»ç»Ÿç¯å¢ƒæˆ‘çš„ç”µè„‘ç¡¬ä»¶é…ç½®å¦‚ä¸‹ï¼š ç¡¬ä»¶ é…ç½® å¤‡æ³¨ CPU intel 12600K ç†è®ºä¸ŠCPUè¶Šå¥½ï¼Œç¼–è¯‘æ•ˆç‡è¶Šé«˜ã€‚ å†…å­˜ é‡‘ç™¾è¾¾ 3200 16GB * 2 å»ºè®®32GBä»¥ä¸Šå†…å­˜ ç¡¬ç›˜ å›ºæ€ç¡¬ç›˜ 4TB å»ºè®®1TBä»¥ä¸Šç¡¬ç›˜ï¼Œç¼–è¯‘è¿‡ç¨‹ä¼šäº§ç”ŸæŒºå¤šæ–‡ä»¶ï¼Œéœ€è¦ç¡¬ç›˜ç©ºé—´ æ“ä½œç³»ç»Ÿï¼šDeepin 20.9ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ Ubuntu 20.04 ï¼Œä½¿ç”¨ç›¸è¿‘çš„ Linux ç‰ˆæœ¬å¹¶ä¸”èƒ½è§£å†³ä¾èµ–é—®é¢˜å°±å¯ä»¥ã€‚1.2 å®‰è£…platform-toolsé¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… platform-toolsï¼Œå®ƒåŒ…å«äº†æˆ‘ä»¬åˆ·æœºçš„ä½¿ç”¨åˆ°çš„åŸºæœ¬å·¥å…·ï¼Œä¾‹å¦‚ adbã€fastboot ã€‚åç»­åœ¨åˆ·æœºè¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨åˆ° adbã€fastboot ã€‚ä¸‹è½½åœ°å€ï¼šplatform-tools1.3 å®‰è£…ä¾èµ–åœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ä½¿ç”¨åˆ°åŸºç¡€çš„ç¯å¢ƒä¾èµ–ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼šsudo apt install bc bison build-essential ccache curl flex g++-multilib gcc-multilib git git-lfs gnupg gperf imagemagick lib32readline-dev lib32z1-dev libelf-dev liblz4-tool libsdl1.2-dev libssl-dev libxml2 libxml2-utils lzop pngcrush rsync schedtool squashfs-tools xsltproc zip zlib1g-dev1.4 å®‰è£…gitå¦‚æœä½ ç”µè„‘è¿˜æ²¡æœ‰gitï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å®‰è£…sudo apt install gitå¹¶ä¸”æ‰§è¡Œgitåˆå§‹åŒ–git config --global user.name \"ä½ çš„åå­—\"git config --global user.email \"ä½ çš„é‚®ç®±\"1.5 å®‰è£…reporepo æ˜¯ Android æºç çš„ç‰ˆæœ¬æ§åˆ¶å·¥å…·ï¼Œå®ƒç±»ä¼¼äº Git ï¼Œä½†æ˜¯æ›´é€‚åˆ Android æºç ã€‚æˆ‘ä»¬é€šè¿‡å›½å†…çš„ tuna é•œåƒæºä¸‹è½½ï¼Œé€Ÿåº¦æ¯”è¾ƒå¿«ã€‚curl https://mirrors.tuna.tsinghua.edu.cn/git/git-repo -o repochmod +x repoä¸ºäº†æ–¹ä¾¿å¯ä»¥å°†å…¶æ‹·è´åˆ°PATHçš„ä»»æ„ç›®å½•é‡Œã€‚repo çš„è¿è¡Œè¿‡ç¨‹ä¸­ä¼šå°è¯•è®¿é—®å®˜æ–¹çš„ git æºï¼Œå¦‚æœæƒ³ä½¿ç”¨ tuna çš„é•œåƒæºï¼Œå¯ä»¥å°†å¦‚ä¸‹å†…å®¹å¤åˆ¶åˆ°ä½ çš„ ~/.bashrc é‡Œå¹¶é‡å¯ç»ˆç«¯ã€‚export REPO_URL='https://mirrors.tuna.tsinghua.edu.cn/git/git-repo'ä¸‰ã€ä¸‹è½½æºä»£ç åœ¨ä¸€ä¸ªç©ºçš„ç›®å½•ä¸‹æ‰§è¡Œ repo åˆå§‹åŒ–repo init -u https://github.com/LineageOS/android.git -b lineage-20.0 --git-lfsä¸ºäº†æé«˜æ‹‰å–æºä»£ç çš„é€Ÿåº¦ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼šæ‰“å¼€.repo/manifests/default.xmlï¼Œå°† &lt;remote name=\"github\" fetch=\"..\" review=\"review.lineageos.org\" /&gt;æ”¹æˆ &lt;remote name=\"github\" fetch=\"https://github.com/\" /&gt; &lt;remote name=\"lineage\" fetch=\"https://mirrors.tuna.tsinghua.edu.cn/git/lineageOS/\" review=\"review.lineageos.org\" /&gt;å°† &lt;remote name=\"aosp\" fetch=\"https://android.googlesource.com\"æ”¹æˆ &lt;remote name=\"aosp\" fetch=\"https://mirrors.tuna.tsinghua.edu.cn/git/AOSP\"å°† &lt;default revision=\"...\" remote=\"github\"æ”¹æˆ &lt;default revision=\"...\" remote=\"lineage\"åŒæ­¥æºç æ ‘ï¼ˆä»¥ååªéœ€æ‰§è¡Œè¿™æ¡å‘½ä»¤æ¥åŒæ­¥ï¼‰ï¼šrepo syncæ‹‰å–å‚å•†ä¾èµ–ä»£ç # åˆ›å»ºå‚å•†ç›®å½•mkdir -p vendor/nubia/ &amp;&amp; cd vendor/nubia# æ‹‰å–å‚å•†ä»£ç git clone -b lineage-20 https://github.com/nubia-development/proprietary_vendor_nubia_sm7250-common.git sm7250-common# å›åˆ°æºç ç›®å½•cd -å››ã€ç¼–è¯‘åˆå§‹åŒ–ç¯å¢ƒ# åˆå§‹åŒ–ç¯å¢ƒsource build/envsetup.sh# è¿›è¡Œè®¾å¤‡åˆå§‹åŒ–ï¼Œè¦è”ç½‘ï¼Œå¦åˆ™æŠ¥é”™breakfast nx651jæ‰§è¡Œè®¾å¤‡åˆå§‹åŒ–å‘½ä»¤è¿‡ç¨‹è¾“å‡ºå¦‚ä¸‹pan@pan-PC:~/Android/aosp/lineage$ breakfast nx651jIn file included from build/make/core/config.mk:353:In file included from build/make/core/envsetup.mk:352:build/make/core/product_config.mk:228: error: Can not locate config makefile for product \"lineage_nx651j\".23:19:48 dumpvars failed with: exit status 1Device nx651j not found. Attempting to retrieve device repository from LineageOS Github (http://github.com/LineageOS).Found repository: android_device_nubia_nx651jDefault revision: lineage-20.0Checking branch infoUsing fallback branch: lineage-20Checking if device/nubia/nx651j is fetched from android_device_nubia_nx651jAdding dependency: LineageOS/android_device_nubia_nx651j -&gt; device/nubia/nx651jSyncing repository to retrieve project.Fetching: 100% (1/1), done in 1.687srepo sync has finished successfully.Repository synced!Looking for dependencies in device/nubia/nx651jDefault revision: lineage-20.0Checking branch infoUsing fallback branch: lineage-20Adding dependencies to manifestChecking if device/nubia/sm7250-common is fetched from android_device_nubia_sm7250-commonAdding dependency: LineageOS/android_device_nubia_sm7250-common -&gt; device/nubia/sm7250-commonSyncing dependenciesFetching: 100% (2/2), done in 5.317srepo sync has finished successfully.Looking for dependencies in device/nubia/sm7250-commonDefault revision: lineage-20.0Checking branch infoUsing fallback branch: lineage-20Default revision: lineage-20.0Checking branch infoUsing fallback branch: lineage-20Adding dependencies to manifestChecking if hardware/nubia is fetched from android_hardware_nubiaAdding dependency: LineageOS/android_hardware_nubia -&gt; hardware/nubiaChecking if kernel/nubia/sm7250 is fetched from android_kernel_nubia_sm7250Adding dependency: LineageOS/android_kernel_nubia_sm7250 -&gt; kernel/nubia/sm7250Syncing dependenciesFetching: 100% (4/4), done in 4m14.499sæ­£åœ¨æ£€å‡ºæ–‡ä»¶: 100% (71804/71804), å®Œæˆ.Checking out: 100% (4/4), done in 5.215srepo sync has finished successfully.Looking for dependencies in hardware/nubiahardware/nubia has no additional dependencies.Looking for dependencies in kernel/nubia/sm7250kernel/nubia/sm7250 has no additional dependencies.Looking for dependencies in hardware/samsung/nfchardware/samsung/nfc has no additional dependencies.Done============================================PLATFORM_VERSION_CODENAME=RELPLATFORM_VERSION=13LINEAGE_VERSION=20.0-20240227-UNOFFICIAL-nx651jTARGET_PRODUCT=lineage_nx651jTARGET_BUILD_VARIANT=userdebugTARGET_BUILD_TYPE=releaseTARGET_ARCH=arm64TARGET_ARCH_VARIANT=armv8-2aTARGET_CPU_VARIANT=genericTARGET_2ND_ARCH=armTARGET_2ND_ARCH_VARIANT=armv8-aTARGET_2ND_CPU_VARIANT=genericHOST_ARCH=x86_64HOST_2ND_ARCH=x86HOST_OS=linuxHOST_OS_EXTRA=Linux-5.15.77-amd64-desktop-x86_64-Deepin-20.9HOST_CROSS_OS=windowsHOST_CROSS_ARCH=x86HOST_CROSS_2ND_ARCH=x86_64HOST_BUILD_TYPE=releaseBUILD_ID=TQ3A.230901.001OUT_DIR=outPRODUCT_SOONG_NAMESPACES=vendor/nubia/sm7250-common device/nubia/sm7250-common hardware/nubia vendor/qcom/opensource/usb/etc hardware/qcom-caf/sm8250 vendor/qcom/opensource/commonsys/display vendor/qcom/opensource/commonsys-intf/display vendor/qcom/opensource/display vendor/qcom/opensource/data-ipa-cfg-mgr-legacy-um vendor/qcom/opensource/dataservices============================================è®¾ç½®ç¼–è¯‘ç¼“å­˜export USE_CCACHE=1export CCACHE_EXEC=/usr/bin/ccacheccache -M 50Gccache -o compression=trueæœ€åæ‰§è¡Œå‘½ä»¤ç¼–è¯‘# å›åˆ°æºç æ ¹ç›®å½•croot# ç¼–è¯‘brunch nx651jäº”ã€æ€»ç»“ä»¥ä¸Šæ˜¯æºç ç¼–è¯‘çš„æ­¥éª¤ï¼Œç¼–è¯‘æˆåŠŸåï¼Œåœ¨out/target/product/nx651j/ç›®å½•ä¸‹å°±å¯ä»¥çœ‹åˆ°ç¼–è¯‘å¥½çš„ç³»ç»Ÿé•œåƒï¼Œå¦‚æœç¼–è¯‘å¤±è´¥ï¼Œè¯·æ ¹æ®æç¤ºè¿›è¡Œä¿®æ”¹ã€‚ç¼–è¯‘å®Œæˆåï¼Œå¯ä»¥ä½¿ç”¨fastbootã€adb ç­‰å·¥å…·å°†é•œåƒçƒ§å½•åˆ°æ‰‹æœºä¸­ã€‚è¿™é‡Œä»…ä»‹ç»ç¼–è¯‘æ­¥éª¤ï¼Œæ›´å¤šç¼–è¯‘ç›¸å…³çŸ¥è¯†ï¼Œè¯·è‡ªè¡Œæœç´¢ã€‚" }, { "title": "æ€æ ·ä½¿ç”¨adbå®ç°ä¸æ–­ç‚¹å‡»Androidæ‰‹æœºå±å¹•çš„åŠŸèƒ½ï¼Ÿ", "url": "/posts/android_how-to-use-ADB-to-achieve-the-function-of-continuous-screen-tapping.html", "categories": "Android", "tags": "", "date": "2024-02-26 17:42:00 +0800", "snippet": "ä¸€ã€å‡†å¤‡ADBé¦–å…ˆéœ€è¦ adb (Android Debug Bridge) å·¥å…·åŒ…ï¼Œå¦‚æœç”µè„‘æœ‰å®‰è£… Android SDKï¼Œadb å·¥å…·åœ¨ platform-tools ç›®å½•ä¸‹ï¼Œéœ€è¦å°† platform-tools ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­å³å¯ã€‚å¦‚æœç”µè„‘ä¸Šæ²¡æœ‰å®‰è£…è¿‡ Android SDKï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‹¬ç«‹ platform-tools å·¥å…·åŒ…ï¼Œä¸‹è½½åˆ°æœ¬æœºä¹‹åè§£å‹åˆ°...", "content": "ä¸€ã€å‡†å¤‡ADBé¦–å…ˆéœ€è¦ adb (Android Debug Bridge) å·¥å…·åŒ…ï¼Œå¦‚æœç”µè„‘æœ‰å®‰è£… Android SDKï¼Œadb å·¥å…·åœ¨ platform-tools ç›®å½•ä¸‹ï¼Œéœ€è¦å°† platform-tools ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­å³å¯ã€‚å¦‚æœç”µè„‘ä¸Šæ²¡æœ‰å®‰è£…è¿‡ Android SDKï¼Œå¯ä»¥åˆ°å®˜ç½‘ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿçš„ç‹¬ç«‹ platform-tools å·¥å…·åŒ…ï¼Œä¸‹è½½åˆ°æœ¬æœºä¹‹åè§£å‹åˆ°æœ¬æœºä»»æ„ç›®å½•ä¸‹ï¼ŒåŒæ—¶å°†å¯¹åº”ç›®å½•æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ã€‚ platform-tools å·¥å…·åŒ…ä¸‹è½½ç½‘é¡µåœ°å€: https://developer.android.google.cn/tools/releases/platform-tools?hl=zh-cn#downloadsäºŒã€å‡†å¤‡æ‰‹æœºå‡†å¤‡ä¸€å°Androidæ‰‹æœºï¼Œè¿›å…¥æ‰‹æœºï¼Œè¿›å…¥ è®¾ç½® -&gt; å…³äºæ‰‹æœº -&gt; ä¸æ–­ç‚¹å‡»ç‰ˆæœ¬å·ï¼Œç›´åˆ°æç¤ºâ€œæˆåŠŸæ‰“å¼€å¼€å‘è€…æ¨¡å¼â€ï¼Œå¦‚ä¸‹å›¾æ­¤æ—¶ç³»ç»Ÿä¸­æ­£å¸¸æ˜¾ç¤ºå‡ºå¼€å‘è€…èœå•ï¼Œå¦‚ä¸‹å›¾å†è¿›å…¥å¼€å‘è€…é€‰é¡¹ï¼Œæ‰“å¼€ USB debugging é€‰é¡¹ï¼Œå¦‚ä¸‹å›¾æœ€åï¼Œç”¨æ•°æ®çº¿å°†æ‰‹æœºé“¾æ¥åˆ°ç”µè„‘ä¸Šï¼Œä½¿ç”¨ adb shell å‘½ä»¤è¿›å…¥ Android Shell ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰æ­£å¸¸è¿›å…¥ Shell ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ adb devices å‘½ä»¤æŸ¥çœ‹æ˜¯å¦è¿æ¥æˆåŠŸã€‚åœ¨ä»¥ä¸Šæ“ä½œè¿‡ç¨‹ä¸­ï¼Œå¦‚æœç”µè„‘æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ adb è¿æ¥æ‰‹æœºï¼Œç”µè„‘ä¸Šä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œé€‰æ‹© å…è®¸ï¼Œå³å¯å®Œæˆè®¾ç½®ï¼Œå¦‚ä¸‹å›¾ï¼šä¸‰ã€ä½¿ç”¨ADBå®ç°ç‚¹å‡»å±å¹•åŠŸèƒ½æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ adb shell input tap X Y å‘½ä»¤å®ç°ç‚¹å‡»å±å¹•çš„åŠŸèƒ½ï¼Œå…¶ä¸­ X å’Œ Y åˆ†åˆ«ä¸ºç‚¹å‡»å±å¹•çš„åæ ‡ã€‚æˆ‘ä»¬éœ€è¦æå‰é¢„åˆ¤å‡ºç‚¹å‡»å±å¹•çš„åæ ‡ï¼Œä¾‹å¦‚åœ¨åˆ†è¾¨ç‡ä¸º 1080x1920 çš„æ‰‹æœºä¸Šï¼Œç‚¹å‡»å±å¹•çš„ä¸­å¿ƒç‚¹ï¼Œåæ ‡ä¸º 540 960ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ adb shell input tap 540 960 å‘½ä»¤å®ç°ç‚¹å‡»å±å¹•çš„åŠŸèƒ½ã€‚å‡è®¾æˆ‘ä»¬è¦ç‚¹è¿ç»­ç‚¹å‡»å±å¹•çš„ä¸­å¿ƒç‚¹ï¼Œå¯ä»¥æŠŠç‚¹å‡»å‘½ä»¤å°è£…æˆè„šæœ¬ï¼Œå¦‚ä¸‹ï¼š#!/bin/bashwhile true; do count=$((count+1)) echo \"ç¬¬ $count æ¬¡ç‚¹å‡»\" adb shell input tap 540 960 sleep 3doneä»¥ä¸Šè„šæœ¬ä¸­ï¼Œwhile true è¡¨ç¤ºä¸€ç›´å¾ªç¯ï¼Œcount=$((count+1)) è¡¨ç¤ºæ¯æ¬¡å¾ªç¯æ—¶ï¼Œcount å€¼åŠ  1ï¼Œecho \"ç¬¬ $count æ¬¡ç‚¹å‡»\" è¡¨ç¤ºæ¯æ¬¡ç‚¹å‡»å±å¹•æ—¶ï¼Œæ‰“å°å‡ºç‚¹å‡»æ¬¡æ•°ï¼Œadb shell input tap 540 960 è¡¨ç¤ºç‚¹å‡»å±å¹•çš„ä¸­å¿ƒç‚¹ï¼Œsleep 3 è¡¨ç¤ºæ¯æ¬¡ç‚¹å‡»åï¼Œç­‰å¾… 3 ç§’ï¼Œç„¶åç»§ç»­ç‚¹å‡»å±å¹•çš„ä¸­å¿ƒç‚¹ã€‚ æ³¨æ„ï¼šä»¥ä¸Šè„šæœ¬é€‚ç”¨äºLinuxå’ŒMacOSçš„Shellç¯å¢ƒã€‚" }, { "title": "APIå®‰å…¨å®è·µæ¢ç´¢", "url": "/posts/server_exploring_web_api_security_best_practices.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2024-01-12 17:10:00 +0800", "snippet": "åœ¨åŸç”ŸAPPï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸æœåŠ¡å™¨æ•°æ®äº¤äº’è¿‡ç¨‹æ€æ ·å®ç°ä¸€å¥—å®‰å…¨çš„æœºåˆ¶ï¼Ÿæœ¬æ–‡æ¢ç´¢ Web API åœ¨è®¾è®¡ä¸Šå¯ä»¥é€‰æ‹©çš„ä¸€äº›å¸¸è§å®‰å…¨æªæ–½ï¼1. é˜²æ­¢éæ³•è¯·æ±‚: ä½¿ç”¨tokené‰´æƒé‰´æƒæŒ‡åªæœ‰ç»è¿‡åˆæ³•æˆæƒçš„ç”¨æˆ·æ‰èƒ½è°ƒç”¨æˆ‘ä»¬çš„æ¥å£ï¼Œå¸¸è§„çš„é‰´æƒæµç¨‹é€šå¸¸åŒ…å«ä¸€äº›æ­¥éª¤ï¼š ç”¨æˆ·é¦–å…ˆéœ€è¦é€šè¿‡ OAuthå¹³å°ã€æ‰‹æœºçŸ­ä¿¡éªŒè¯ã€è´¦å·å¯†ç  ç­‰æ–¹å¼è¿›è¡Œç™»å½•; æœåŠ¡ç«¯æ ¡éªŒè´¦å·ï¼Œæ ¡éªŒæˆåŠŸè¿”å›ä¸€ä¸ªå”¯ä¸€tokenä½œä¸ºç”¨æˆ·èº«ä»½å‡­è¯ï¼Œ...", "content": "åœ¨åŸç”ŸAPPï¼ˆå®¢æˆ·ç«¯ï¼‰ä¸æœåŠ¡å™¨æ•°æ®äº¤äº’è¿‡ç¨‹æ€æ ·å®ç°ä¸€å¥—å®‰å…¨çš„æœºåˆ¶ï¼Ÿæœ¬æ–‡æ¢ç´¢ Web API åœ¨è®¾è®¡ä¸Šå¯ä»¥é€‰æ‹©çš„ä¸€äº›å¸¸è§å®‰å…¨æªæ–½ï¼1. é˜²æ­¢éæ³•è¯·æ±‚: ä½¿ç”¨tokené‰´æƒé‰´æƒæŒ‡åªæœ‰ç»è¿‡åˆæ³•æˆæƒçš„ç”¨æˆ·æ‰èƒ½è°ƒç”¨æˆ‘ä»¬çš„æ¥å£ï¼Œå¸¸è§„çš„é‰´æƒæµç¨‹é€šå¸¸åŒ…å«ä¸€äº›æ­¥éª¤ï¼š ç”¨æˆ·é¦–å…ˆéœ€è¦é€šè¿‡ OAuthå¹³å°ã€æ‰‹æœºçŸ­ä¿¡éªŒè¯ã€è´¦å·å¯†ç  ç­‰æ–¹å¼è¿›è¡Œç™»å½•; æœåŠ¡ç«¯æ ¡éªŒè´¦å·ï¼Œæ ¡éªŒæˆåŠŸè¿”å›ä¸€ä¸ªå”¯ä¸€tokenä½œä¸ºç”¨æˆ·èº«ä»½å‡­è¯ï¼Œè¯¥ token åŒ…å«ç”¨æˆ·çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯; APPå°†tokenç¼“å­˜ï¼ŒåŒæ—¶ç™»å½•æˆåŠŸ; ç”¨æˆ·ä½¿ç”¨APPæµè§ˆæ•°æ®ï¼ŒAPPæ¯æ¬¡å‘æœåŠ¡ç«¯è¯·æ±‚æ•°æ®æ—¶é¡»åŒæ—¶å¸¦ä¸Šç¼“å­˜çš„tokenï¼Œæ ¹æ®JWTè§„èŒƒï¼Œå°†tokenæ”¾åœ¨httpæŠ¥æ–‡å¤´éƒ¨çš„Authorizationå­—æ®µ; æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œé¦–å…ˆä¼šæ ¡éªŒtokençš„åˆæ³•æ€§ï¼Œæ ¡éªŒæˆåŠŸæ­£å¸¸è¿”å›æ•°æ®ï¼Œæ ¡éªŒå¤±è´¥ç›´æ¥è¿”å›é”™è¯¯ã€‚åŸºäºtokenæœºåˆ¶ï¼ŒæœåŠ¡ç«¯å¯ä»¥å®ç°åŸºæœ¬çš„é‰´æƒé€»è¾‘ã€‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨çš„æ˜¯JWT å³ Json Web Tokenï¼ˆhttps://jwt.ioï¼‰éªŒè¯æœºåˆ¶æ¥å®ç°ä»¥ä¸Šè¿‡ç¨‹ã€‚2. é˜²æŠ“åŒ…å–æ•æ„Ÿä¿¡æ¯: åŠ å¯†ä¼ è¾“2.1 ä¸ºä»€ä¹ˆéœ€è¦åŠ å¯†ä¼ è¾“ï¼ŸtokenéªŒè¯æœºåˆ¶å¹¶ä¸èƒ½é˜²æ­¢APPè¢«æŠ“åŒ…ï¼Œæ¶æ„è°ƒç”¨è€…åªéœ€è¦å¸¦ä¸Štokenå†è¯·æ±‚æˆ‘ä»¬çš„APIæ¥å£åŒæ ·è¿˜æ˜¯èƒ½è·å–åˆ°æ•°æ®ã€‚å› ä¸ºAPPä¸æœåŠ¡ç«¯éƒ½æ˜¯æ˜æ–‡é€šä¿¡ï¼Œä¸€æŠ“åŒ…å°±èƒ½çœ‹åˆ°è¯·æ±‚å‚æ•°ï¼Œæˆ‘ä»¬å¿…é¡»è¦å¯¹ æ•æ„Ÿæ•°æ®è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚é€šå¸¸ï¼Œæ‰‹æœºå·ã€å§“åã€åœ°å€ç­‰å¯ä»¥è¢«è®¤å®šä¸ºæ•æ„Ÿæ•°æ®ï¼Œè€Œä¸€äº›ä¸æŸ¥è¯¢æ•°æ®ç›¸å…³çš„å‚æ•°å¯ä»¥ä¸è®¤å®šä¸ºæ•æ„Ÿæ•°æ®ï¼Œä¾‹å¦‚ ç¤¾åŒºå¸–å­IDã€æ—¥æœŸ ç­‰ï¼ä½†ä¹Ÿä¸ç»å¯¹ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå“ªäº›æ˜¯æ•æ„Ÿæ•°æ®éœ€è¦æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µè¿›è¡Œåˆ¤å®š!2.1 åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹å‡è®¾æˆ‘ä»¬è®¤ä¸ºè®¾å¤‡ä¿¡æ¯æ˜¯æ•æ„Ÿæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯ã€‚å°†ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯ï¼Œä½¿ç”¨JSONæ•°æ®æ ¼å¼è¿›è¡Œæ‹¼è£…ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µ{ \"openid\": \"è®¾å¤‡å”¯ä¸€æ ‡è¯†(è®¾å¤‡å·)\", \"channel\": \"æ¸ é“å·\", \"version\": \"åº”ç”¨ç‰ˆæœ¬(versionName)\", \"source\": \"æ¥æº\", \"model\": \"å‹å·\", \"os_version\": \"ç³»ç»Ÿç‰ˆæœ¬\"}å°†ä»¥ä¸Šæ•°æ®ä½¿ç”¨çº¦å®šçš„åŠ å¯†ç®—æ³•å¾—åˆ°çš„åŠ å¯†å­—ç¬¦ä¸²ä½œä¸ºqueryå‚æ•°çš„paramså­—æ®µä¸­ï¼Œè¯·æ±‚æ¥å£æ—¶æºå¸¦è¯¥queryå‚æ•°ï¼Œå¦‚ä¸‹https://demo.com/user?params=hAWDCJ3LhVi3Ik2kY1Q/VA==æœåŠ¡ç«¯å¾—åˆ°åŠ å¯†ä¸²è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°ç”¨æˆ·çš„è®¾å¤‡ä¿¡æ¯3.1 åŠ å¯†æ–¹å¼ä»¥ä¸Šçš„åŠ åŠ å¯†è¿‡ç¨‹ï¼Œæ¨èä½¿ç”¨éå¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯†ä¸è§£å¯†è¿‡ç¨‹ä¸ºï¼šç”Ÿæˆä¸€å¯¹å¯†é’¥ï¼ŒåŒ…æ‹¬å…¬é’¥å’Œç§é’¥ã€‚å…¬é’¥å¯ä»¥ç»™APPå®¢æˆ·ç«¯ï¼Œè€Œç§é’¥å¿…é¡»ä¿å¯†ï¼ˆå­˜æ”¾åœ¨æœåŠ¡å™¨ï¼‰ã€‚ä½¿ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®åªèƒ½ä½¿ç”¨ç›¸åº”çš„ç§é’¥è¿›è¡Œè§£å¯†ã€‚è¿™ç§åŠ å¯†æ–¹å¼æä¾›äº†å®‰å…¨æ€§å’Œèº«ä»½éªŒè¯çš„åŠŸèƒ½ï¼Œå› ä¸ºåªæœ‰æŒæœ‰ç§é’¥çš„äººæ‰èƒ½è§£å¯†æ•°æ®ã€‚3 é˜²é‡æ”¾æ”»å‡»: ç­¾åéªŒè¯3.1 ä¸ºä»€ä¹ˆéœ€è¦ç­¾åéªŒè¯ï¼Ÿæ•°æ®åŠ å¯†ä¹‹åè™½ç„¶æŠ“åŒ…ä¹‹åçœ‹ä¸åˆ°æ˜æ–‡æ•°æ®äº†ï¼Œä½†æ˜¯è¿™å¹¶ä¸èƒ½é˜»æ­¢ä¸æ€€å¥½æ„ä¹‹äººå‘èµ·é‡æ”¾æ”»å‡»ã€‚æ‹¦æˆªåˆ°è¯·æ±‚ä¹‹ååªéœ€å†åŸæ ·å‘é€è¯¥è¯·æ±‚åˆ°æœåŠ¡ç«¯å°±å¯ä»¥å‘èµ·é‡æ”¾æ”»å‡»ï¼Œå¦‚æœæ¥å£å­˜åœ¨æ¯”è¾ƒè€—æ€§èƒ½çš„é€»è¾‘ï¼Œé‚£ä¹ˆåœ¨çŸ­æ—¶é—´å†…å‘èµ·å¤§é‡é‡æ”¾æ”»å‡»çš„å¯èƒ½å¯¼è‡´æœåŠ¡ç«¯ç˜«ç—ªã€‚å› æ­¤æ¨èå®ç°â€œç­¾åéªŒè¯â€æœºåˆ¶ï¼ŒåŒæ—¶æ•´ä¸ªè¿‡ç¨‹æ¨èä½¿ç”¨ â€œéå¯¹ç§°åŠ å¯†â€ã€‚3.2 å®¢æˆ·ç«¯åŠ å¯†ç”Ÿæˆç­¾å å–æ‰€æœ‰è¯·æ±‚å‚æ•°ï¼ˆåŒ…æ‹¬queryå‚æ•°ã€bodyçš„è¡¨å•å‚æ•°ã€bodyçš„jsonå‚æ•°ï¼‰ æ ¹æ®å‚æ•°é”®åé¦–å­—æ¯ï¼Œä½¿ç”¨å¯¹åº” ASCIIç å€¼ çš„å¤§å°è¿›è¡Œå‡åºæ’åˆ—ï¼Œå¦‚æœé¦–å­—æ¯ä¸€æ ·æ¯”ç¬¬2ä¸ªå­—æ¯ï¼Œä»¥æ­¤ç±»æ¨ï¼Œå¿…ä¼ å‚æ•°å¦‚ä¸‹ æ’åºåçš„å‚æ•°ä½¿ç”¨&amp;ç¬¦å·æ‹¼æ¥ï¼Œå†åŠ ä¸Šappsecretï¼Œå¦‚a=1&amp;b=2&amp;appsecret=secretï¼Œå¾—åˆ°æ‹¼æ¥ä¹‹åçš„å‚æ•° æŠŠæ‹¼æ¥ä¹‹åçš„å‚æ•°è¿›è¡ŒMD5åŠ å¯†ï¼Œå°†MD5åŠ å¯†å¾—åˆ°çš„ç»“æœè½¬æ¢ä¸ºå¤§å†™ï¼Œæœ€ç»ˆå¾—åˆ°ç­¾åå­—ç¬¦ä¸²signï¼Œæœ€ç»ˆè¯·æ±‚ä»»æ„æ¥å£æ—¶å¿…å¸¦çš„queryå‚æ•°å¦‚ä¸‹ å‚æ•° æè¿° appkey åç«¯åˆ†é…çš„app_key t è¿›è¡Œæ¥å£è°ƒç”¨æ—¶çš„æ—¶é—´æˆ³ï¼Œå³ç§’çº§æ—¶é—´æˆ³ sign è¾“å…¥å‚æ•°è®¡ç®—åçš„ç­¾åç»“æœ params åŠ å¯†ä¹‹åçš„è®¾å¤‡ä¿¡æ¯å‚æ•° 3.3 æœåŠ¡ç«¯éªŒè¯ç­¾åæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åè¿›è¡Œç­¾åéªŒè¯ï¼Œå¦‚æœç­¾åæ ¡éªŒæˆåŠŸï¼Œå¹¶ä¸”åœ¨è¯¥è¯·æ±‚çš„æ˜¯åœ¨è§„å®šæ—¶é—´å‘èµ·çš„è¯·æ±‚ï¼ˆä¾‹å¦‚ç­¾åä¹‹åçš„5åˆ†é’Ÿä¹‹å†…ï¼‰ï¼Œåˆ™è¿›è¡Œæ•°æ®å¤„ç†ï¼Œå¦åˆ™æ‹¦æˆªè¯¥è¯·æ±‚ã€‚" }, { "title": "æ€æ ·åœ¨centos6ä¸Šå®‰è£…PHP 8.0", "url": "/posts/how_to_install_php8.0_on_centos6.html", "categories": "PHP", "tags": "php8.0", "date": "2023-10-12 13:10:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°æˆ‘éœ€è¦åœ¨å…¬å¸çš„æµ‹è¯•ç¯å¢ƒçš„ä¸€å°æœºå™¨éœ€è¦å®‰è£…ä¸€ä¸ª php 8.0 ç‰ˆæœ¬ï¼Œç„¶è€Œå…¬å¸æµ‹è¯•ç¯å¢ƒæ˜¯ centos 6 ç³»ç»Ÿï¼Œç”±äºç³»ç»Ÿæ¯”è¾ƒè€æ—§ï¼Œå¾ˆå¤šä¾èµ–éš¾ä»¥è§£å†³ã€‚ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œä»¥ä¸‹æ˜¯é¡ºåˆ©åœ¨ centos 6 ä¸Šå®‰è£…å¥½ php 8.0.30 çš„å®é™…æ­¥éª¤ã€‚ ä½†å¦‚æœä¸æ˜¯è¿«ä¸å¾—å·²ï¼Œä¸å»ºè®®åœ¨æ—§ç³»ç»Ÿä¸Šä½¿ç”¨æ–°è½¯ä»¶ï¼Œå¦‚æœæœ‰éœ€æ±‚ï¼Œæ›´å»ºè®®åœ¨æ–°çš„ç¨³å®šæ“ä½œç³»ç»Ÿä¸Šå®ç°ã€‚äºŒã€å‡†å¤‡ä¾èµ–2.1 æ›´æ–°yumæˆ‘ä»¬é¦–å…ˆæ›´æ–°yumè½¯ä»¶...", "content": "ä¸€ã€æ¦‚è¿°æˆ‘éœ€è¦åœ¨å…¬å¸çš„æµ‹è¯•ç¯å¢ƒçš„ä¸€å°æœºå™¨éœ€è¦å®‰è£…ä¸€ä¸ª php 8.0 ç‰ˆæœ¬ï¼Œç„¶è€Œå…¬å¸æµ‹è¯•ç¯å¢ƒæ˜¯ centos 6 ç³»ç»Ÿï¼Œç”±äºç³»ç»Ÿæ¯”è¾ƒè€æ—§ï¼Œå¾ˆå¤šä¾èµ–éš¾ä»¥è§£å†³ã€‚ç»è¿‡ä¸€ç•ªæŠ˜è…¾ï¼Œä»¥ä¸‹æ˜¯é¡ºåˆ©åœ¨ centos 6 ä¸Šå®‰è£…å¥½ php 8.0.30 çš„å®é™…æ­¥éª¤ã€‚ ä½†å¦‚æœä¸æ˜¯è¿«ä¸å¾—å·²ï¼Œä¸å»ºè®®åœ¨æ—§ç³»ç»Ÿä¸Šä½¿ç”¨æ–°è½¯ä»¶ï¼Œå¦‚æœæœ‰éœ€æ±‚ï¼Œæ›´å»ºè®®åœ¨æ–°çš„ç¨³å®šæ“ä½œç³»ç»Ÿä¸Šå®ç°ã€‚äºŒã€å‡†å¤‡ä¾èµ–2.1 æ›´æ–°yumæˆ‘ä»¬é¦–å…ˆæ›´æ–°yumè½¯ä»¶æºï¼Œä»¥ä¾¿åç»­æœ‰éœ€è¦æ—¶ä½¿ç”¨ã€‚# yumwget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.cloud.tencent.com/repo/centos6_base.repo# epelï¼ˆRHEL6ç³»åˆ—ï¼‰wget -O /etc/yum.repos.d/epel.repo http://mirrors.cloud.tencent.com/repo/epel-6.repo# æ›´æ–°ç¼“å­˜yum clean allyum makecache2.2 libicovä¸‹è½½ç½‘å€ï¼š&lt;libiconv:https://ftp.gnu.org/gnu/libiconv/&gt;è¿™é‡Œä¸‹è½½1.16ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/libiconv-1.16make &amp;&amp; make install2.3 libxml2ä¸‹è½½ç½‘å€ï¼šhttps://download.gnome.org/sources/libxml2/2.9/è¿™é‡Œä¸‹è½½2.9ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/libxml2-2.9.14 --with-history --with-python=/usr/bin --docdir=/usr/local/libxml2-2.9.14/docmake &amp;&amp; make install2.4 opensslä¸‹è½½ç½‘å€ï¼šhttps://www.openssl.org/source/openssl-1.1.1w.tar.gzè¿™é‡Œä¸‹è½½1.1.1wç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…./Configure no-shared linux-x86_64 no-md2 no-mdc2 no-rc5 no-rc4 enable-ssl2 enable-ssl3 --prefix=/usr/local/openssl-1.1.1wmake &amp;&amp; make install2.5 sqliteä¸‹è½½ç½‘å€ï¼šhttps://github.com/sqlite/tags?after=version-3.40.0è¿™é‡Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯3.40.1ï¼Œç¼–è¯‘ä¸å®‰è£…çš„å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/sqlite3-3.40.1make &amp;&amp; make install2.6 curlä¸‹è½½ç½‘å€ï¼šhttps://curl.se/download/curl-7.83.0.tar.gzè¿™é‡Œä¸‹è½½çš„æ˜¯7.83.0ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…çš„å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/curl-7.83.0 --with-ssl=/usr/local/openssl-1.1.1wmake &amp;&amp; make install2.7 onigurumaä¸‹è½½ç½‘å€ï¼šhttps://github.com/kkos/oniguruma/releases/tag/v6.9.8è¿™é‡Œä¸‹è½½çš„6.9.8ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…çš„å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/onig-6.9.8make &amp;&amp; make install2.8 libpng16ä¸‹è½½ç½‘å€ï¼šhttps://udomain.dl.sourceforge.net/project/libpng/libpng16/1.6.37/libpng-1.6.37.tar.gzè¿™é‡Œä¸‹è½½çš„æ˜¯1.6.37ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/libpng-1.6.37make &amp;&amp; make install2.9 gdä¸‹è½½ç½‘å€ï¼šhttps://github.com/libgd/libgd/releasesè¿™é‡Œä¸‹è½½çš„æ˜¯2.3.3ç‰ˆæœ¬ï¼Œç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹./configure --prefix=/usr/local/libgd-2.3.3 --with-png=/usr/local/libpng-1.6.37make &amp;&amp; make install2.10 cmakeä¸‹è½½ç½‘å€ï¼šhttps://cmake.org/files/v3.23/cmake-3.23.2-linux-x86_64.tar.gzè¿™é‡Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯3.23.2ï¼Œä¸‹è½½åç›´æ¥å®‰è£…mv cmake-3.23.2-linux-x86_64 /usr/local/cmake-3.23.22.11 libzipä¸‹è½½ç½‘å€ï¼šhttps://libzip.org/download/libzip-1.10.1.tar.gzè¿™é‡Œä¸‹è½½çš„ç‰ˆæœ¬æ˜¯1.10.1ï¼Œç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼Œä¸‹é¢ä½¿ç”¨cmakeæ¥ç¼–è¯‘/usr/local/cmake-3.23.2/bin/cmake -DCMAKE_INSTALL_PREFIX=/usr/local/libzip-1.8.0makemake installä¸‰ã€å®‰è£…phpåœ¨æ’°å†™æ­¤æ–‡ç« çš„æ—¶å€™ï¼Œphp 8.0 çš„æœ€æ–°ç‰ˆæœ¬æ˜¯8.0.30ï¼Œæˆ‘ä»¬å…ˆä¸‹è½½ php 8.0.30 çš„æºä»£ç ï¼Œç¼–è¯‘ä¸å®‰è£…è¿‡ç¨‹å¦‚ä¸‹# é…ç½®ç¼–è¯‘å‚æ•°./configure \\--prefix=/usr/local/php-8.0.30 \\--with-config-file-path=/usr/local/php-8.0.30/etc \\--with-zlib-dir \\--enable-mbstring \\--with-curl \\--with-zlib \\--with-freetype=/usr/local/freetype-2.9/ \\--disable-rpath \\--enable-sockets \\--enable-sysvsem \\--enable-sysvshm \\--enable-pcntl \\--enable-mbregex \\--with-mhash \\--with-pdo-mysql \\--with-mysqli \\--with-openssl \\--enable-fpm \\--with-pdo-mysql \\--enable-ftp \\--enable-gd \\--without-iconv \\LIBXML_CFLAGS=-I/usr/local/libxml2-2.9.14/include/libxml2 \\LIBXML_LIBS=\"-L/usr/local/libxml2-2.9.14/lib -lxml2\" \\OPENSSL_CFLAGS=-I/usr/local/openssl-1.1.1w/include \\OPENSSL_LIBS=\"-L/usr/local/openssl-1.1.1w/lib -lcrypto -lssl\" \\SQLITE_CFLAGS=-I/usr/local/sqlite3-3.40.1/include \\SQLITE_LIBS=\"-L/usr/local/sqlite3-3.40.1/lib -lsqlite3\" \\CURL_CFLAGS=-I/usr/local/curl-7.83.0/include \\CURL_LIBS=\"-L/usr/local/curl-7.83.0/lib -lcurl\" \\ONIG_CFLAGS=-I/usr/local/onig-6.9.8/include \\ONIG_LIBS=\"-L/usr/local/onig-6.9.8/lib -lonig\" \\GD_CFLAGS=-I/usr/local/libgd-2.3.3/include \\GD_LIBS=-L/usr/local/libgd-2.3.3/lib \\PNG_CFLAGS=-I/usr/local/libpng-1.6.37/include \\PNG_LIBS=\"-L/usr/local/libpng-1.6.37/lib -lpng\" \\LIBZIP_CFLAGS=-I/usr/local/libzip-1.8.0/include \\LIBZIP_LIBS=-L/usr/local/libzip-1.8.0/lib64# ç¼–è¯‘,-jæ ¹æ®ä½ CPUçš„çº¿ç¨‹æ•°ï¼Œè®¾ç½®åˆç†çš„å€¼make -j14# å®‰è£…make install" }, { "title": "åœ¨Ubuntä¸Šå¿«é€Ÿæ­å»ºk8sé›†ç¾¤", "url": "/posts/container_install-k8s-on-deepin-using-docker.html", "categories": "å®¹å™¨ä¸è™šæ‹ŸåŒ–", "tags": "k8s", "date": "2023-08-28 13:10:00 +0800", "snippet": "ä¸€ã€å‡†å¤‡ç¯å¢ƒ æ’°å†™æ—¶é—´ï¼š2023-08-28æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ªå·¥å…·å«åšminicukeï¼Œç½‘å€ï¼šhttps://minikube.sigs.k8s.io/ï¼Œå®‰è£…å¥½minicubeä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…å•æœºçš„k8sç¯å¢ƒï¼Œå¦‚ä¸‹æ­¥éª¤æˆ‘çš„ç¯å¢ƒæ˜¯ï¼š Deepin 20.9 (åŸºäºdebian 10)äºŒã€å®‰è£…è¿‡ç¨‹2.1 åˆ é™¤æ—§ç¯å¢ƒå¦‚æœä¹‹å‰å®‰è£…è¿‡ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤-- åˆ é™¤ingress-nginxæ’ä»¶mini...", "content": "ä¸€ã€å‡†å¤‡ç¯å¢ƒ æ’°å†™æ—¶é—´ï¼š2023-08-28æˆ‘ä»¬éœ€è¦å€ŸåŠ©ä¸€ä¸ªå·¥å…·å«åšminicukeï¼Œç½‘å€ï¼šhttps://minikube.sigs.k8s.io/ï¼Œå®‰è£…å¥½minicubeä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…å•æœºçš„k8sç¯å¢ƒï¼Œå¦‚ä¸‹æ­¥éª¤æˆ‘çš„ç¯å¢ƒæ˜¯ï¼š Deepin 20.9 (åŸºäºdebian 10)äºŒã€å®‰è£…è¿‡ç¨‹2.1 åˆ é™¤æ—§ç¯å¢ƒå¦‚æœä¹‹å‰å®‰è£…è¿‡ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤-- åˆ é™¤ingress-nginxæ’ä»¶minikube kubectl -- delete all --all -n ingress-nginx-- åˆ é™¤æœ¬åœ°é›†ç¾¤minikube delete --all2.2. å¯åŠ¨æ–°é›†ç¾¤minikube start --kubernetes-version=v1.24.1 --driver=docker --container-runtime=containerd --image-mirror-country=cn --cpus=4 --memory=8g2.3. æ–°å¢ingress-nginxæ’ä»¶minikube addons enable ingress å¦‚æœç½‘ç»œä¸é¡ºç•…ï¼Œå¯ä»¥é¢å¤–æŒ‡å®šâ€“imageså‚æ•°ä½¿ç”¨è‡ªå®šä¹‰é•œåƒï¼Œè‡ªå®šä¹‰é•œåƒä½¿ç”¨æ•™ç¨‹ï¼šhttps://minikube.sigs.k8s.io/docs/handbook/addons/custom-images/ä½¿ç”¨è‡ªå®šä¹‰é•œåƒå®‰è£…æ’ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼šminikube addons enable ingress --images=\"IngressController=jikerdev/ingress-nginx-controller:v1.7.0,KubeWebhookCertgenCreate=jikerdev/kube-webhook-certgen:v20230312-helm-chart-4.5.2-28-g66a760794,KubeWebhookCertgenPatch=jikerdev/kube-webhook-certgen:v20230312-helm-chart-4.5.2-28-g66a760794\" --registries=\"IngressController=docker.io,KubeWebhookCertgenCreate=docker.io,KubeWebhookCertgenPatch=docker.io\"2.4. æ–°å¢ingress-dnsminikube addons enable ingress-dns2.5. æ–°å¢æœ¬åœ°ä»“åº“æœåŠ¡minikube addons enable registryä½¿ç”¨ä»“åº“æœåŠ¡æ—¶éœ€è¦æ˜ å°„ç«¯å£ï¼Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°†å®¿ä¸»æœº 5000 æ˜ å°„åˆ°å®¹å™¨ 80kubectl port-forward --namespace kube-system service/registry 5000:80ä¸‰ã€é›†ç¾¤éªŒè¯ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è¿›è¡ŒéªŒè¯ï¼Œå¦‚æ‰€æœ‰podæ­£å¸¸ï¼Œä»£è¡¨å®‰è£…æˆåŠŸminikube kubectl -- get pod -Aæœªèƒ½èƒ½å¿«é€Ÿè°ƒç”¨kubectlå‘½ä»¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®å‘½ä»¤åˆ«åï¼Œå¦‚ä¸‹å‘½ä»¤alias kubectl='minikube kubectl --'" }, { "title": "å…¨çƒå®•æœºäº‹ä»¶ä¸­çš„æ•™è®­ï¼šä¸ºä½•Rustè¯­è¨€æ˜¯æœªæ¥çš„é€‰æ‹©ï¼Ÿ", "url": "/posts/rust_Why-is-Rust-the-choice-of-the-future.html", "categories": "rust", "tags": "", "date": "2023-07-21 22:41:00 +0800", "snippet": "å¼•è¨€7æœˆ19æ—¥ï¼Œå¾®è½¯åŠå…¶å…³è”å…¬å¸çš„å…¨çƒå¤§èŒƒå›´å®•æœºäº‹ä»¶éœ‡æƒŠäº†æ•´ä¸ªæŠ€æœ¯ç•Œã€‚ä»ç¾æ´²åˆ°æ¬§æ´²ã€äºšæ´²ï¼Œå‡ ä¹æ‰€æœ‰è¡Œä¸šçš„ä¼ä¸šå’Œç”¨æˆ·éƒ½å—åˆ°äº†å½±å“ã€‚è¿™æ¬¡äº‹ä»¶å¯¼è‡´äº†èˆªç©ºé“è·¯åœè¿ã€åª’ä½“ç›´æ’­ä¸­æ–­ã€é“¶è¡Œç³»ç»Ÿå¼‚å¸¸ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚æ•…éšœçš„æ ¹æºè¢«è¿½æº¯åˆ°CrowdStrikeçš„ä¸€æ¬¡æ›´æ–°ï¼Œå¯¼è‡´äº†Windowsç³»ç»Ÿçš„å¤§é‡è“å±æ­»æœºã€‚äº‹ä»¶å›é¡¾æ®æŠ¥é“ï¼Œé—®é¢˜çš„æºå¤´æ˜¯ä¸€å®¶å…¨çƒç½‘ç»œå®‰å…¨å…¬å¸CrowdStrikeçš„ä¸€æ¬¡é”™è¯¯çš„æ›´æ–°ã€‚è¿™æ¬¡æ›´æ–°å¯¼è‡´å®‰è£…äº†...", "content": "å¼•è¨€7æœˆ19æ—¥ï¼Œå¾®è½¯åŠå…¶å…³è”å…¬å¸çš„å…¨çƒå¤§èŒƒå›´å®•æœºäº‹ä»¶éœ‡æƒŠäº†æ•´ä¸ªæŠ€æœ¯ç•Œã€‚ä»ç¾æ´²åˆ°æ¬§æ´²ã€äºšæ´²ï¼Œå‡ ä¹æ‰€æœ‰è¡Œä¸šçš„ä¼ä¸šå’Œç”¨æˆ·éƒ½å—åˆ°äº†å½±å“ã€‚è¿™æ¬¡äº‹ä»¶å¯¼è‡´äº†èˆªç©ºé“è·¯åœè¿ã€åª’ä½“ç›´æ’­ä¸­æ–­ã€é“¶è¡Œç³»ç»Ÿå¼‚å¸¸ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚æ•…éšœçš„æ ¹æºè¢«è¿½æº¯åˆ°CrowdStrikeçš„ä¸€æ¬¡æ›´æ–°ï¼Œå¯¼è‡´äº†Windowsç³»ç»Ÿçš„å¤§é‡è“å±æ­»æœºã€‚äº‹ä»¶å›é¡¾æ®æŠ¥é“ï¼Œé—®é¢˜çš„æºå¤´æ˜¯ä¸€å®¶å…¨çƒç½‘ç»œå®‰å…¨å…¬å¸CrowdStrikeçš„ä¸€æ¬¡é”™è¯¯çš„æ›´æ–°ã€‚è¿™æ¬¡æ›´æ–°å¯¼è‡´å®‰è£…äº†CrowdStrikeå®‰å…¨è½¯ä»¶â€œFalconâ€çš„ç”µè„‘å‡ºç°è“å±ï¼Œæ— æ³•æ­£å¸¸è¿è¡Œã€‚å¤šå›½å—åˆ°å½±å“ï¼ŒåŒ…æ‹¬ç¾å›½ã€è‹±å›½ã€æ¾³å¤§åˆ©äºšã€æ—¥æœ¬ç­‰å›½å®¶çš„èˆªç©ºã€é“è·¯ã€é‡‘èã€åŒ»ç–—ã€åª’ä½“ç­‰å¤šä¸ªè¡Œä¸šéƒ½å› æ­¤é™·å…¥æ··ä¹±ã€‚å³ä¾¿å¾®è½¯å’ŒCrowdStrikeè¿…é€Ÿé‡‡å–æªæ–½ï¼Œå…¨çƒèŒƒå›´å†…çš„å½±å“ä¾ç„¶éš¾ä»¥åœ¨çŸ­æ—¶é—´å†…å®Œå…¨æ¶ˆé™¤ã€‚ä¸ºä»€ä¹ˆRustè¯­è¨€å¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼ŸRustè¯­è¨€ä»¥å…¶å†…å­˜å®‰å…¨æ€§å’Œå¹¶å‘æ€§è€Œé—»åï¼Œèƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶é¿å…è®¸å¤šå¸¸è§çš„ç¼–ç¨‹é”™è¯¯ï¼Œå¦‚ç©ºæŒ‡é’ˆå¼•ç”¨å’Œè¶Šç•Œè®¿é—®ã€‚è¿™äº›é—®é¢˜æ­£æ˜¯æ­¤æ¬¡å…¨çƒå®•æœºäº‹ä»¶çš„ä¸»è¦åŸå› ã€‚ å†…å­˜å®‰å…¨æ€§ï¼šRustçš„æ‰€æœ‰æƒç³»ç»Ÿå’Œå€Ÿç”¨æ£€æŸ¥å™¨ç¡®ä¿äº†åœ¨ç¼–è¯‘æ—¶æ•è·å†…å­˜ç®¡ç†é”™è¯¯ã€‚åƒç©ºæŒ‡é’ˆå¼•ç”¨å’Œç¼“å†²åŒºæº¢å‡ºç­‰é—®é¢˜åœ¨Rustä¸­å‡ ä¹ä¸å¯èƒ½å‘ç”Ÿã€‚ å¹¶å‘æ€§ï¼šRustä¸ºå¹¶å‘ç¼–ç¨‹æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼Œèƒ½å¤Ÿç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å®‰å…¨åœ°å…±äº«æ•°æ®ã€‚è¿™åœ¨å¤„ç†å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶å°¤ä¸ºé‡è¦ã€‚ é«˜æ€§èƒ½ï¼šRustçš„æ€§èƒ½ä¸Cå’ŒC++ç›¸å½“ï¼Œä½†æ²¡æœ‰å®ƒä»¬çš„å†…å­˜ç®¡ç†é—®é¢˜ã€‚è¿™ä½¿å¾—Rustæˆä¸ºå¼€å‘é«˜æ€§èƒ½ç³»ç»Ÿçš„ç†æƒ³é€‰æ‹©ã€‚ å“ªäº›å¤§é¡¹ç›®åœ¨ä½¿ç”¨Rustï¼Ÿè¶Šæ¥è¶Šå¤šçš„çŸ¥åé¡¹ç›®å¼€å§‹é‡‡ç”¨Rustè¯­è¨€è¿›è¡Œå¼€å‘ï¼Œè¿™è¿›ä¸€æ­¥è¯æ˜äº†Ruståœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­çš„é‡è¦æ€§ï¼Œä¸‹é¢ä¸¾ä¾‹ä¸€äº›æ­£åœ¨ä½¿ç”¨å¹¶æŠ•å…¥ç”Ÿäº§çš„ç›¸å…³é¡¹ç›®ã€‚ Mozilla Firefoxï¼šRustçš„å¼€å‘è€…Mozillaåœ¨Firefoxæµè§ˆå™¨ä¸­ä½¿ç”¨Rustæ¥é‡å†™å…¶æ ¸å¿ƒç»„ä»¶ï¼Œæé«˜äº†å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚ Dropboxï¼šè¿™å®¶çŸ¥åçš„äº‘å­˜å‚¨æœåŠ¡å…¬å¸åœ¨å…¶åç«¯ç³»ç»Ÿä¸­ä½¿ç”¨äº†Rustï¼Œç¡®ä¿äº†æ•°æ®çš„å®‰å…¨å’Œç³»ç»Ÿçš„é«˜æ•ˆè¿è¡Œã€‚ **Amazon Web Services (AWS) **ï¼šAWSä½¿ç”¨Rustæ¥æ„å»ºå…³é”®çš„äº‘æœåŠ¡ç»„ä»¶ï¼Œæå‡äº†æœåŠ¡çš„å¯é æ€§å’Œæ€§èƒ½ã€‚åœ¨å›½å†…ï¼š OpenHarmonyï¼ˆå¼€æºé¸¿è’™ï¼‰ï¼šç”±åä¸ºä¸»å¯¼çš„å¼€æºé¸¿è’™ä¸­ï¼Œæˆªæ­¢æœ¬æ–‡æ’°å†™æ—¶é—´ï¼ŒRustä»£ç å·²å 15%çš„æ¯”ä¾‹ï¼Œå¹¶ä¸”Rustä»£ç åœ¨ä¸æ–­å¢åŠ ï¼Œä¹Ÿå°†åœ¨é¸¿è’™æ“ä½œç³»ç»Ÿæ‰®æ¼”é‡è¦ä½œç”¨ã€‚ BlusOSï¼ˆè“æ²³æ“ä½œç³»ç»Ÿï¼‰ï¼šè“æ²³æ“ä½œç³»ç»Ÿæ˜¯Vivoé¢å‘é€šç”¨äººå·¥æ™ºèƒ½æ—¶ä»£è‡ªä¸»ç ”å‘çš„æ™ºæ…§æ“ä½œç³»ç»Ÿã€‚åŸºäºé«˜å®‰å…¨ã€é«˜æ€§èƒ½çš„ Rust è¯­è¨€å¼€å‘ç³»ç»Ÿæ¡†æ¶ï¼ŒRust ä¸€ç³»åˆ—çš„å®‰å…¨æŠ€æœ¯ç‰¹æ€§ï¼Œä¿éšœäº†å†…å­˜å®‰å…¨å’Œå¹¶å‘å®‰å…¨ã€‚ç»“è¯­æ­¤æ¬¡å¾®è½¯å…¨çƒå®•æœºäº‹ä»¶ç»™æˆ‘ä»¬æ•²å“äº†è­¦é’Ÿï¼Œæé†’æˆ‘ä»¬åœ¨è½¯ä»¶å¼€å‘ä¸­å®‰å…¨æœºåˆ¶çš„è‡³å…³é‡è¦ã€‚ä»æˆ‘å¼€å‘ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä¹Ÿå§‹ç»ˆè®°ä½ä¸€å¥è¯ï¼šä¸€ä¸ªåˆæ ¼çš„ç¨‹åºå¼€å‘è¿‡ç¨‹ï¼Œé¦–å…ˆè¦è€ƒè™‘çš„æ˜¯å®‰å…¨ï¼Œå…¶æ¬¡æ˜¯ç¨³å¥ï¼Œæœ€åæ‰æ˜¯åŠŸèƒ½ã€‚è€ŒRustå‡­å€Ÿå…¶å†…å­˜å®‰å…¨æ€§å’Œé«˜æ€§èƒ½ï¼Œèƒ½å¤Ÿæœ‰æ•ˆé¿å…è®¸å¤šå¸¸è§çš„ç¼–ç¨‹é”™è¯¯ï¼Œåœ¨æœªæ¥ï¼ŒRustæœ‰æœ›æˆä¸ºæ›´å¤šå¤§å‹é¡¹ç›®çš„é¦–é€‰ç¼–ç¨‹è¯­è¨€ï¼ŒåŠ©åŠ›å¼€å‘è€…æ„å»ºæ›´åŠ å¯é å’Œé«˜æ•ˆçš„ç³»ç»Ÿã€‚æ¬¢è¿å…³æ³¨ï¼Œåç»­å¸¦æ¥æ›´å¤šäº’è”ç½‘ä¸å‰æ²¿æŠ€æœ¯ç›¸å…³çš„åˆ†äº«ï¼å¦‚æœä½ å¯¹Rustè¯­è¨€çš„å…¥é—¨å­¦ä¹ æ„Ÿå…´è¶£ï¼Œè¿˜å¯ä»¥å‚è€ƒæˆ‘èŠ±åŠå¹´ä»¥ä¸Šæ—¶é—´æ•´ç†çš„å­¦ä¹ ç¬”è®°ï¼šã€Šrustä¸­æ–‡wikiã€‹&lt;github.com/webtechwiki/rust&gt;" }, { "title": "æ€æ ·ä½¿ç”¨yapiæ­å»ºè‡ªå·±çš„æ¥å£æ–‡æ¡£å¹³å°", "url": "/posts/tools_how-to-deploy-yapi-serve.html", "categories": "å·¥å…·", "tags": "yapi", "date": "2023-05-03 12:13:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°yapiæ˜¯ä¸€ä¸ªå¼€æºçš„æ¥å£æ–‡æ¡£å¹³å°ï¼Œå¯ä»¥ç”¨äºç®¡ç†æ¥å£æ–‡æ¡£ï¼ŒåŒæ—¶å¯ä»¥è¿›è¡Œæ¥å£æµ‹è¯•ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨yapiæ­å»ºè‡ªå·±çš„æ¥å£æ–‡æ¡£å¹³å°ã€‚å…¶å¼€æºåœ°å€ä¸ºï¼šhttps://github.com/YMFE/yapiã€‚ä»¥ä¸‹æ˜¯æˆ‘æœ¬æ¬¡çš„è¿è¡Œç¯å¢ƒï¼š ç¯å¢ƒï¼šäº‘è½»é‡æœåŠ¡å™¨ æ“ä½œç³»ç»Ÿï¼š Debian 11äºŒã€å‡†å¤‡dockerç¯å¢ƒ1.1 å®‰è£…dockeræˆ‘ä»¬å°†åœ¨dockerä¸­è¿è¡Œyapiï¼Œæ‰€ä»¥éœ€è¦å®‰è£…docke...", "content": "ä¸€ã€æ¦‚è¿°yapiæ˜¯ä¸€ä¸ªå¼€æºçš„æ¥å£æ–‡æ¡£å¹³å°ï¼Œå¯ä»¥ç”¨äºç®¡ç†æ¥å£æ–‡æ¡£ï¼ŒåŒæ—¶å¯ä»¥è¿›è¡Œæ¥å£æµ‹è¯•ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨yapiæ­å»ºè‡ªå·±çš„æ¥å£æ–‡æ¡£å¹³å°ã€‚å…¶å¼€æºåœ°å€ä¸ºï¼šhttps://github.com/YMFE/yapiã€‚ä»¥ä¸‹æ˜¯æˆ‘æœ¬æ¬¡çš„è¿è¡Œç¯å¢ƒï¼š ç¯å¢ƒï¼šäº‘è½»é‡æœåŠ¡å™¨ æ“ä½œç³»ç»Ÿï¼š Debian 11äºŒã€å‡†å¤‡dockerç¯å¢ƒ1.1 å®‰è£…dockeræˆ‘ä»¬å°†åœ¨dockerä¸­è¿è¡Œyapiï¼Œæ‰€ä»¥éœ€è¦å®‰è£…dockerï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼šcurl -fsSL https://get.docker.com | bash -s docker --mirror Aliyunä»¥ä¸Šå‘½ä»¤æ˜¯ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒæºå®‰è£…dockerï¼Œå› ä¸ºåœ¨å›½å†…ï¼Œä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒæºä¼šå¿«å¾ˆå¤šã€‚å¦‚æœä¸æƒ³ä½¿ç”¨é˜¿é‡Œäº‘çš„é•œåƒæºï¼Œç›´æ¥å»æ‰--mirror Aliyunå³å¯ã€‚1.2 å®‰è£…docker-composedocker-composeæ˜¯dockerçš„ä¸€ä¸ªå•æœºç¼–æ’å·¥å…·ï¼Œç”¨äºç®¡ç†å¤šä¸ªå®¹å™¨ã€‚è¿™æ˜¯docker-composeçš„å®˜ç½‘æ–‡æ¡£é“¾æ¥ï¼šhttps://docs.docker.com/compose/ã€‚æœ¬æ¬¡æˆ‘ä»¬ä½¿ç”¨ç‹¬ç«‹å®‰è£…çš„æ–¹å¼å®‰è£…dcoker-composeï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š# ä¸‹è½½docker-composeäºŒè¿›åˆ¶å®‰è£…æ–‡ä»¶curl -SL https://github.com/docker/compose/releases/download/v2.18.1/docker-compose-linux-x86_64 -o /usr/local/bin/docker-composeèµ‹äºˆdocker-composeå¯æ‰§è¡Œæƒé™chmod +x /usr/local/bin/docker-composeä¸ºäº†æ£€æµ‹docker-composeæ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šdocker-composeå¦‚æœå®‰è£…ä¹‹åæ‰§è¡Œdocker-composeå‘½ä»¤æ²¡æœ‰æŠ¥é”™ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚å¦åˆ™è¯·æ£€æŸ¥å®‰è£…è¿‡ç¨‹æ˜¯å¦æœ‰é—®é¢˜ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨/usr/binç›®å½•åˆ›å»ºè½¯é“¾æ¥ã€‚ln -s /usr/local/bin/docker-compose /usr/bin/docker-composeæˆ‘ä»¬å®‰è£…å¥½ä¹‹åï¼Œdocker-composeå‘½ä»¤ç­‰åŒäºdocker composeå‘½ä»¤ã€‚å…¶åŒºåˆ«åœ¨äºï¼Œdocker-composeå‘½ä»¤ä»£è¡¨å®ƒæ˜¯ç‹¬ç«‹å®‰è£…çš„ï¼Œè€Œdocker composeå‘½ä»¤æ˜¯dockerçš„å­å‘½ä»¤ã€‚ä¸‰ã€å®‰è£…yapiæˆ‘ä»¬é€‰æ‹©æœåŠ¡å™¨çš„ä¸€ä¸ªç©ºç›®å½•ï¼Œç”¨äºå­˜æ”¾yapiçš„é…ç½®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘é€‰æ‹©çš„ç›®å½•æ˜¯/data/yapiï¼Œåœ¨ä¸‹æ–‡æˆ‘æŠŠè¿™ä¸ªç›®å½•å«åšâ€œå·¥ä½œç›®å½•â€ã€‚3.1 å®šä¹‰yapiçš„Dockerfileæ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸‹åˆ›å»ºDockerfileæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šFROM node:12-alpineRUN npm install -g yapi-cli --registry https://registry.npmmirror.comEXPOSE 3000 9090ä»¥ä¸Šæ–‡ä»¶æ˜¯ç”¨äºæ„å»ºyapiçš„dockeré•œåƒï¼Œå…¶ä¸­node:12-alpineæ˜¯yapiçš„è¿è¡Œç¯å¢ƒï¼Œyapi-cliæ˜¯yapiçš„å‘½ä»¤è¡Œå·¥å…·ï¼ŒEXPOSEæ˜¯yapiçš„ç«¯å£ã€‚å…¶ä¸­9090ç«¯å£æ˜¯yapiçš„å®‰è£…ç¨‹åºçš„æœåŠ¡ç«¯å£ï¼Œ3000ç«¯å£æ˜¯yapiçš„æœåŠ¡ç«¯å£ã€‚3.2 å®šä¹‰yapiçš„docker-compose.ymlæ–‡ä»¶åœ¨å·¥ä½œç›®å½•ä¸‹åˆ›å»ºdocker-compose.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šversion: '3.1'services: mongo: image: mongo restart: always volumes: - ./mongo/data/db:/data/db ports: - 27017:27017 container_name: mongo healthcheck: test: [\"CMD\", \"netstat -anp | grep 27017\"] interval: 2m timeout: 10s retries: 3 yapi: build: context: ./ dockerfile: Dockerfile image: yapi # first run command: \"yapi server\" # after first run # command: \"node /my-yapi/vendors/server/app.js\" volumes: - ./my-yapi:/my-yapi ports: - 9090:9090 - 3000:3000 container_name: yapi depends_on: - mongoåœ¨ä»¥ä¸Šé…ç½®æ–‡ä»¶ä¸­ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤ï¼Œæ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬ä½¿ç”¨äº†volumesé…ç½®é¡¹ã€‚å¦‚ä¸‹ï¼š mongoæœåŠ¡çš„volumesé…ç½®é¡¹ï¼Œæ˜¯ç”¨äºæŒä¹…åŒ–mongoçš„æ•°æ® yapiæœåŠ¡çš„volumesé…ç½®é¡¹ï¼Œæ˜¯ç”¨äºæŒä¹…åŒ–yapiçš„æ•°æ®3.3 å¯åŠ¨yapiå®‰è£…æœåŠ¡åœ¨å·¥ä½œç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼šdocker-compose up -dè¿™ä¸ªå‘½ä»¤ä¼šå¯åŠ¨mongoå’Œyapiä¸¤ä¸ªå®¹å™¨ï¼Œå…¶ä¸­mongoå®¹å™¨æ˜¯ç”¨äºå­˜å‚¨yapiçš„æ•°æ®ï¼Œyapiå®¹å™¨æ˜¯ç”¨äºå®‰è£…yapiçš„ã€‚æœåŠ¡æ­£å¸¸å¯åŠ¨ä¹‹åï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è®¿é—®http://&lt;æœåŠ¡å™¨IP&gt;:9090ï¼Œå³å¯çœ‹åˆ°yapiçš„å®‰è£…ç•Œé¢ã€‚è¿›å…¥å®‰è£…ç•Œé¢ä¹‹åï¼Œæˆ‘é€‰æ‹©æœ€æ–°çš„ç‰ˆæœ¬è¿›è¡Œå®‰è£…ï¼Œå¡«å†™é…ç½®å¦‚ä¸‹å›¾å¡«å¥½é…ç½®ä¹‹åï¼Œç‚¹å‡»å¼€å§‹éƒ¨ç½²æŒ‰é’®ï¼Œå³å¯å¼€å§‹å®‰è£…ã€‚å®‰è£…å®Œæˆä¹‹åï¼Œä¼šæç¤ºæˆåŠŸå®‰è£…çš„ç®¡ç†å‘˜ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›ä¿¡æ¯ä¿å­˜ä¸‹æ¥ï¼Œä»¥ä¾¿åç»­ç™»å½•ä½¿ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡ç†å‘˜çš„è´¦å·æ˜¯æˆ‘ä»¬é…ç½®çš„é‚®ç®±ï¼Œå¯†ç æ˜¯ymfe.orgã€‚å¦‚æœåœ¨å®‰è£…è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡docker-compose logså‘½ä»¤æŸ¥çœ‹æ—¥å¿—ã€‚3.4 å¯åŠ¨yapiæœåŠ¡å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å¯åŠ¨yapiæœåŠ¡ï¼Œæˆ‘ä»¬å…ˆé”€æ¯ç°æœ‰çš„å®¹å™¨ï¼Œå¦‚ä¸‹å‘½ä»¤docker-compose downä¿®æ”¹docker-compose.ymlæ–‡ä»¶ï¼Œå°†yapiæœåŠ¡çš„commandé…ç½®é¡¹ä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼šcommand: \"node /my-yapi/vendors/server/app.js\"ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨yapiæœåŠ¡docker-compose up -då››ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹4.1 æµè§ˆå™¨è·¨åŸŸè¯·æ±‚æ’ä»¶åœ¨æµè§ˆå™¨ä¸­è®¿é—®http://&lt;æœåŠ¡å™¨IP&gt;:3000ï¼Œå³å¯çœ‹åˆ°yapiçš„ç™»å½•ç•Œé¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨æµè§ˆå™¨ä½¿ç”¨yapiè¯·æ±‚æ¥å£ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æµè§ˆå™¨ä¸­å®‰è£…yapiçš„è·¨åŸŸè¯·æ±‚æ’ä»¶ï¼Œåœ°å€å¦‚ä¸‹ï¼š Chrome: https://chrome.google.com/webstore/detail/yapi-x/ebiododddhjccikhminneafpoppneknc Edge: https://microsoftedge.microsoft.com/addons/detail/crossrequest/bephiepmhphdlafkfonngafenjhfehlbå¦‚æœä½ åœ¨å®‰è£…çš„æ—¶å€™ï¼Œå‘ç°è¿™ä¸¤ä¸ªé“¾æ¥å¤±æ•ˆäº†ï¼Œå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨çš„æ’ä»¶å•†åº—ä¸­æœç´¢yapiï¼Œå³å¯æ‰¾åˆ°å¯¹åº”çš„æ’ä»¶ã€‚æˆ–è€…é€šè¿‡æºç çš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚æºç åœ°å€ä¸º: https://github.com/YMFE/cross-request4.2 å¼€å¯é‚®ä»¶æœåŠ¡å’Œå…³é—­æ³¨å†ŒåŠŸèƒ½æˆ‘ä»¬å¯ä»¥é€šè¿‡yapiçš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯é‚®ä»¶æœåŠ¡å’Œå…³é—­æ³¨å†ŒåŠŸèƒ½ã€‚æˆ‘ä»¬éœ€è¦åœ¨å·¥ä½œç›®å½•ä¸‹çš„my-yapiç›®å½•ä¿®æ”¹config.jsonæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š{ \"port\": \"3000\", \"adminAccount\": \"phy.xyz@foxmail.com\", \"closeRegister\": true, \"db\": { \"servername\": \"mongo\", \"DATABASE\": \"yapi\", \"port\": \"27017\" }, \"mail\": { \"enable\": true, \"host\": \"smtp.qq.com\", \"port\": 465, \"from\": \"QQé‚®ç®±åœ°å€\", \"auth\": { \"user\": \"QQé‚®ç®±åœ°å€\", \"pass\": \"QQé‚®ç®±å¯†ç \" } }}å…¶ä¸­ï¼ŒcloseRegisteré…ç½®é¡¹æ˜¯ç”¨äºå…³é—­æ³¨å†ŒåŠŸèƒ½ï¼Œmailé…ç½®é¡¹æ˜¯ç”¨äºé‚®ä»¶æœåŠ¡ã€‚4.3 ä½¿ç”¨nginxåå‘ä»£ç†æ¨èä½¿ç”¨Nginxåå‘ä»£ç†ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­ç›´æ¥è®¿é—®http://åŸŸåï¼Œè€Œä¸æ˜¯http://&lt;æœåŠ¡å™¨IP&gt;:3000ã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªnginxçš„é…ç½®æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šserver { listen 80; server_name yapi.jkdev.cn; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Server $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Real-IP $remote_addr; location / { proxy_pass http://127.0.0.1:3000/; }}ä»¥ä¸Šé…ç½®æ–‡ä»¶æ˜¯ç”¨äºå°†http://yapi.jkdev.cnåå‘ä»£ç†åˆ°æœåŠ¡å™¨çš„3000ç«¯å£ã€‚æˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªé…ç½®æ–‡ä»¶æ”¾åˆ°nginxçš„vhosté…ç½®æ–‡ä»¶ç›®å½•ï¼Œä¸€èˆ¬åœ¨/etc/nginx/conf.dç›®å½•ä¸‹ï¼Œç„¶åæ‰§è¡Œnginx -s reloadå‘½ä»¤ï¼Œå³å¯ç”Ÿæ•ˆã€‚" }, { "title": "AOSPç¼–è¯‘æµç¨‹", "url": "/posts/android_build-aosp.html", "categories": "Android", "tags": "aosp", "date": "2023-05-03 12:13:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨æ’°å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒAOSPçš„æœ€æ–°ç‰ˆæœ¬æ˜¯Android 13ï¼Œæœ¬æ–‡å°†ä»¥Android 13ä¸ºä¾‹ï¼Œä»‹ç»AOSPçš„ç¼–è¯‘æµç¨‹ã€‚ç†è®ºä¸Šï¼Œç”µè„‘é…ç½®è¶Šé«˜ï¼Œç¼–è¯‘é€Ÿåº¦è¶Šå¿«ï¼ŒåŒæ—¶éœ€è¦è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ã€‚è¿™é‡Œå»ºè®®ç©ºä½™ç©ºé—´è‡³å°‘300Gï¼Œå¦åˆ™ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç£ç›˜ç©ºé—´ä¸è¶³çš„æƒ…å†µã€‚æ“ä½œç³»ç»Ÿå»ºè®®ä½¿ç”¨Ubuntuæˆ–è€…å›½å†…çš„Deepinï¼Œä»¥ä¸‹æ˜¯æˆ‘ç”µè„‘çš„é…ç½®ï¼š CPUï¼š12th Gen Intel(R) Core(...", "content": "ä¸€ã€æ¦‚è¿°åœ¨æ’°å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼ŒAOSPçš„æœ€æ–°ç‰ˆæœ¬æ˜¯Android 13ï¼Œæœ¬æ–‡å°†ä»¥Android 13ä¸ºä¾‹ï¼Œä»‹ç»AOSPçš„ç¼–è¯‘æµç¨‹ã€‚ç†è®ºä¸Šï¼Œç”µè„‘é…ç½®è¶Šé«˜ï¼Œç¼–è¯‘é€Ÿåº¦è¶Šå¿«ï¼ŒåŒæ—¶éœ€è¦è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ã€‚è¿™é‡Œå»ºè®®ç©ºä½™ç©ºé—´è‡³å°‘300Gï¼Œå¦åˆ™ç¼–è¯‘è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå‡ºç°ç£ç›˜ç©ºé—´ä¸è¶³çš„æƒ…å†µã€‚æ“ä½œç³»ç»Ÿå»ºè®®ä½¿ç”¨Ubuntuæˆ–è€…å›½å†…çš„Deepinï¼Œä»¥ä¸‹æ˜¯æˆ‘ç”µè„‘çš„é…ç½®ï¼š CPUï¼š12th Gen Intel(R) Core(TM) i5-12600K å†…å­˜: é‡‘ç™¾è¾¾é“¶çˆµ3200 16G * 2 æ“ä½œç³»ç»Ÿï¼šDeepin 20.9äºŒã€ä¸‹è½½AOSPæºä»£ç 1.1 å®‰è£…gitgitä¸»è¦ç”¨äºä¸‹è½½AOSPæºç ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼šsudo apt install gitgit config --global user.email i@phy.xyzgit config --global user.name phy1.2 å®‰è£…reporepo æ˜¯ Google å¼€å‘çš„ä¸€ä¸ªç”¨äºç®¡ç† Git ä»“åº“çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒä½¿ç”¨å¤šä¸ª Git ä»“åº“æ¥ç®¡ç†å¤§å‹é¡¹ç›®çš„æºä»£ç ï¼Œä¾‹å¦‚ Android Open Source Project (AOSP)ã€‚repo å·¥å…·ä¸ä»…å¯ä»¥ç”¨äºåŒæ­¥æœ¬åœ°ä»£ç åˆ°ä»“åº“æœåŠ¡å™¨ï¼Œè¿˜å¯ä»¥å°†å¤šä¸ªä»“åº“ä»£ç åˆå¹¶æˆä¸€ä¸ªä»£ç åº“ï¼Œå¹¶è¿›è¡Œä»£ç æ§åˆ¶å’ŒåŒæ­¥ã€‚ä»¥ä¸‹æ˜¯å®‰è£…è¿‡ç¨‹curl https://storage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repochmod a+x ~/bin/repoexport PATH=~/bin:$PATHREPO_URL ç¯å¢ƒå˜é‡æ˜¯ç”¨äºæŒ‡å®š repo å·¥å…·é»˜è®¤ä½¿ç”¨çš„ AOSP ä»£ç åº“çš„ URL åœ°å€ã€‚å¦‚æœä¸è®¾ç½®è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œrepo å·¥å…·é»˜è®¤ä¼šä» Google çš„æºä»£ç ä»“åº“ä¸­ä¸‹è½½ä»£ç ã€‚è€Œè®¾ç½®äº†è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œrepo å·¥å…·ä¼šä»æŒ‡å®šçš„ URL åœ°å€ä¸­ä¸‹è½½ä»£ç ã€‚å¦‚è®¾ç½®æ¸…åçš„AOSPé•œåƒåœ°å€ï¼Œå¦‚ä¸‹export REPO_URL='https://mirrors.tuna.tsinghua.edu.cn/git/git-repo'1.3 ä¸‹è½½æºä»£ç 1.3.1 ä¸‹è½½ AOSP çš„æœˆåº¦ç‰ˆæœ¬ç”±äºåœ¨å›½å†…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¸…åå¤§å­¦AOSPé•œåƒç«™ä¸‹è½½ï¼Œæˆ‘ä»¬ç›´æ¥ä¸‹è½½AOSPæœ€æ–°å¤‡ä»½çš„æºä»£ç ï¼Œä¸‹è½½è¿‡ç¨‹å¦‚ä¸‹curl -OC - https://mirrors.tuna.tsinghua.edu.cn/aosp-monthly/aosp-latest.tar # ä¸‹è½½åˆå§‹åŒ–åŒ…tar xf aosp-latest.tarcd AOSP # è§£å‹å¾—åˆ°çš„ AOSP å·¥ç¨‹ç›®å½•ï¼Œè¿™æ—¶ç›®å½•é‡Œ ls çš„è¯ä»€ä¹ˆä¹Ÿçœ‹ä¸åˆ°ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªéšè—çš„ .repo ç›®å½•repo sync # æ­£å¸¸åŒæ­¥ä¸€éå³å¯å¾—åˆ°å®Œæ•´ç›®å½•ï¼Œæˆ–ä½¿ç”¨ repo sync -l ä»…checkoutä»£ç è¿™ä¸€æ®µä»£ç æ˜¯ AOSP çš„ä¸‹è½½å’ŒåŒæ­¥æ­¥éª¤ã€‚è§£é‡Šå¦‚ä¸‹ï¼š curl -OC - https://mirrors.tuna.tsinghua.edu.cn/aosp-monthly/aosp-latest.tarï¼šä½¿ç”¨ curl å‘½ä»¤ä»æ¸…åé•œåƒç«™ä¸‹è½½ AOSP çš„æœˆåº¦ç‰ˆæœ¬ï¼Œå¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿã€‚ tar xf aosp-latest.tarï¼šä½¿ç”¨ tar å‘½ä»¤è§£å‹ AOSP çš„å‹ç¼©æ–‡ä»¶ï¼Œè§£å‹åä¼šç”Ÿæˆä¸€ä¸ªåä¸º AOSP çš„ç›®å½•ã€‚ cd AOSPï¼šè¿›å…¥ AOSP ç›®å½•ã€‚ repo syncï¼šä½¿ç”¨ repo å·¥å…·åŒæ­¥ AOSP æºä»£ç ã€‚repo sync å‘½ä»¤ä¼šä» AOSP ä»£ç åº“ä¸­ä¸‹è½½æ‰€æœ‰éœ€è¦åŒæ­¥çš„ä»£ç ï¼Œå¹¶è‡ªåŠ¨è¿›è¡Œåˆå¹¶å’Œå†²çªè§£å†³ã€‚è¿™æ˜¯åŒæ­¥ AOSP ä»£ç çš„æ¨èæ–¹å¼ã€‚å¦‚æœæœ€åä¸€æ­¥æ‰§è¡Œçš„æ˜¯ repo sync -lï¼Œåˆ™ä¼šåªè¿›è¡Œæœ¬åœ°åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯åªä¸‹è½½ä»“åº“ä¸­å·²ç»å­˜åœ¨çš„ä»£ç ï¼Œå¹¶ä¸ä¼šä»æœåŠ¡å™¨ä¸Šä¸‹è½½æ–°å¢æˆ–è€…æ›´æ”¹çš„ä»£ç ã€‚è€Œå¦‚æœæ‰§è¡Œçš„æ˜¯ repo syncï¼Œåˆ™ä¼šä»æœåŠ¡å™¨ä¸Šä¸‹è½½æ‰€æœ‰æ–°å¢å’Œæ›´æ”¹çš„ä»£ç ï¼Œå¹¶å°†å…¶ä¸æœ¬åœ°ä»“åº“è¿›è¡Œåˆå¹¶ã€‚è¿™æ˜¯åŒæ­¥æœ€æ–°çš„ AOSP ä»£ç çš„å¸¸ç”¨æ–¹å¼ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œå¦‚æœæœ¬åœ°ä»£ç åº“å·²ç»å¾ˆä¹…æ²¡æœ‰åŒæ­¥è¿‡å¹¶ä¸”éœ€è¦åŒæ­¥çš„ä»£ç æ¯”è¾ƒå¤šæ—¶ï¼Œè¿™ä¸ªå‘½ä»¤å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ¥å®ŒæˆåŒæ­¥æ“ä½œã€‚1.3.2 ä¸‹è½½AOSPçš„æŒ‡å®šç‰ˆæœ¬AOSPçš„ç‰ˆæœ¬åˆ—è¡¨ï¼šhttps://source.android.com/setup/start/build-numbers#source-code-tags-and-buildsã€‚ä¸‹è½½æŸä¸ªç‰¹å®šçš„ Android ç‰ˆæœ¬ï¼Œå¦‚ä¸‹repo init -u https://mirrors.tuna.tsinghua.edu.cn/git/AOSP/platform/manifest -b android-13.0.0_r31åŒæ­¥æºç æ ‘repo syncä¸‰ã€ç¼–è¯‘AOSP3.1 å®‰è£…ç¼–è¯‘ä¾èµ–AOSPçš„android 13ç‰ˆæœ¬éœ€è¦ä½¿ç”¨python3ï¼Œæ‰€ä»¥éœ€è¦å®‰è£…python3ï¼Œå¦‚ä¸‹å‘½ä»¤sudo rm /usr/bin/python /usr/bin/python2sudo ln -s /usr/bin/python3.7 /usr/bin/pythonsudo ln -s /usr/bin/python2.7 /usr/bin/python2åŒæ—¶éœ€è¦å®‰è£…ä¸€äº›ç¼–è¯‘ä¾èµ–ï¼Œå¦‚ä¸‹sudo apt-get install git-core gnupg flex bison build-essential zip curl zlib1g-dev gcc-multilib g++-multilib libc6-dev-i386 lib32ncurses5-dev x11proto-core-dev libx11-dev lib32z1-dev libgl1-mesa-dev libxml2-utils xsltproc unzip fontconfig libncurses5æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ªJDKï¼Œåç»­å¯èƒ½éœ€è¦ä½¿ç”¨åˆ°JDKå·¥å…·ï¼Œå¦‚ä¸‹å‘½ä»¤sudo apt install openjdk-8-jdk3.2 ç¼–è¯‘source build/envsetup.shlunch sdk_phone_x86_64-userdebugmake -j14export DISABLE_ARTIFACT_PATH_REQUIREMENTS=\"true\"emulatorè¿™æ˜¯ä¸€ç»„ç”¨äºç¼–è¯‘å’Œå¯åŠ¨ AOSP SDK Phone x86_64 ç”¨æˆ·è°ƒè¯•ç‰ˆæœ¬çš„ä»£ç å’Œå‘½ä»¤ã€‚æŒ‰ç…§é¡ºåºæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š è¿è¡Œ source build/envsetup.sh å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šå°†å¿…è¦çš„ç¯å¢ƒå˜é‡å’Œå‡½æ•°æ·»åŠ åˆ°å½“å‰ shell ä¸­ï¼Œä½¿å¾—åç»­çš„ AOSP ç¼–è¯‘å‘½ä»¤å¯ä»¥æ­£å¸¸è¿è¡Œã€‚ è¿è¡Œ lunch sdk_phone_x86_64-userdebug å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šè®¾ç½®ç¼–è¯‘ç›®æ ‡ä¸º SDK Phone x86_64 ç”¨æˆ·è°ƒè¯•ç‰ˆæœ¬ï¼Œå¹¶ä¸”ä¼šè¯»å– build ç›®å½•ä¸‹çš„ product ç›¸å…³é…ç½®æ–‡ä»¶ï¼Œä»¥ä¾¿åç»­çš„ make å‘½ä»¤å¯ä»¥æ­£ç¡®ç¼–è¯‘ AOSP ç³»ç»Ÿã€‚ è¿è¡Œ make -j14 å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šå¯åŠ¨ AOSP ç¼–è¯‘è¿‡ç¨‹ï¼Œä½¿ç”¨ 14 ä¸ªçº¿ç¨‹è¿›è¡Œç¼–è¯‘åŠ é€Ÿã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œå…·ä½“æ—¶é—´å–å†³äºè®¡ç®—æœºçš„é…ç½®å’Œç¼–è¯‘é€‰é¡¹ã€‚ è¿è¡Œ export DISABLE_ARTIFACT_PATH_REQUIREMENTS=\"true\" å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šç¦ç”¨ AOSP ç¼–è¯‘ç³»ç»Ÿçš„ä¸€äº›è·¯å¾„è¦æ±‚æ£€æŸ¥ï¼Œä»¥ä¾¿åœ¨åç»­å¯åŠ¨æ¨¡æ‹Ÿå™¨æ—¶å¯ä»¥è·³è¿‡ä¸€äº›é™åˆ¶ã€‚ è¿è¡Œ emulator å‘½ä»¤ï¼Œè¯¥å‘½ä»¤ä¼šå¯åŠ¨ AOSP æ¨¡æ‹Ÿå™¨ï¼Œå¹¶åŠ è½½ç¼–è¯‘ç”Ÿæˆçš„ç³»ç»Ÿé•œåƒã€‚åœ¨æ¨¡æ‹Ÿå™¨ä¸­å¯ä»¥è¿›è¡Œç³»ç»Ÿæµ‹è¯•ã€åº”ç”¨å¼€å‘å’Œè°ƒè¯•ç­‰æ“ä½œã€‚ å››ã€ä½¿ç”¨IDEå¯¼å…¥æºä»£ç 4.1 æ¦‚è¿°mmm development/tools/idegen å‘½ä»¤å’Œ development/tools/idegen/idegen.sh å‘½ä»¤éƒ½æ˜¯ç”¨äºç”Ÿæˆ IDE é…ç½®æ–‡ä»¶çš„ AOSP å¼€å‘å·¥å…·å‘½ä»¤ï¼Œä½†å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯å’Œç”Ÿæˆçš„é…ç½®æ–‡ä»¶ç±»å‹ç•¥æœ‰ä¸åŒã€‚å…·ä½“æ¥è¯´ï¼Œmmm development/tools/idegen å‘½ä»¤ç”¨äºç¼–è¯‘å¹¶ç”Ÿæˆ idegen å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆ Eclipse å’Œ Android Studio é…ç½®æ–‡ä»¶çš„å·¥å…·ã€‚mmm å‘½ä»¤æ˜¯æŒ‡ä»¤ AOSP ç¼–è¯‘ç³»ç»Ÿç¼–è¯‘ç‰¹å®šçš„æ¨¡å—ï¼Œè€Œ development/tools/idegen ç›®å½•ä¸‹çš„æ¨¡å—å°±æ˜¯æˆ‘ä»¬éœ€è¦ç”Ÿæˆçš„ idegen å·¥å…·ã€‚è¯¥å‘½ä»¤ç”Ÿæˆçš„æ˜¯ idegen.jar å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé€šè¿‡æ‰§è¡Œ java -jar idegen.jar å‘½ä»¤ä½¿ç”¨å®ƒã€‚è€Œ development/tools/idegen/idegen.sh å‘½ä»¤åˆ™æ˜¯ idegen å·¥å…·çš„ä¸€ä¸ªå°è£…è„šæœ¬ï¼Œç”¨äºç”Ÿæˆç‰¹å®š IDE çš„é…ç½®æ–‡ä»¶ã€‚é€šè¿‡æ‰§è¡Œ development/tools/idegen/idegen.sh å‘½ä»¤ï¼Œå¯ä»¥ä¼ é€’ä¸åŒçš„å‚æ•°æ¥æŒ‡å®šç”Ÿæˆ Eclipse æˆ– Android Studio çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šdevelopment/tools/idegen/idegen.shdevelopment/tools/idegen/idegen.sh --ide=eclipsedevelopment/tools/idegen/idegen.sh --android-studiodevelopment/tools/idegen/idegen.sh --gradleå…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‘½ä»¤ä¼šé»˜è®¤ç”Ÿæˆé€‚ç”¨äºå½“å‰ç¯å¢ƒçš„ IDE é…ç½®æ–‡ä»¶ï¼Œç¬¬äºŒä¸ªå‘½ä»¤ä¼šç”Ÿæˆ Eclipse çš„é…ç½®æ–‡ä»¶ï¼Œç¬¬ä¸‰ä¸ªå‘½ä»¤ä¼šç”Ÿæˆé€‚ç”¨äº Android Studio çš„é…ç½®æ–‡ä»¶ï¼Œç¬¬å››ä¸ªå‘½ä»¤åˆ™ä¼šç”Ÿæˆé€‚ç”¨äºä½¿ç”¨ Gradle è¿›è¡Œç¼–è¯‘çš„å·¥ç¨‹çš„é…ç½®æ–‡ä»¶ã€‚å› æ­¤ï¼Œmmm development/tools/idegen å‘½ä»¤é€‚ç”¨äºç¼–è¯‘å¹¶ç”Ÿæˆ idegen å·¥å…·ï¼Œè€Œ development/tools/idegen/idegen.sh å‘½ä»¤åˆ™é€‚ç”¨äºç”Ÿæˆç‰¹å®š IDE çš„é…ç½®æ–‡ä»¶ã€‚4.2 ç”ŸæˆIDEé¡¹ç›®æ–‡ä»¶mmm development/tools/idegenä¼šç”Ÿæˆæ–‡ä»¶: out/host/linux-x86/framework/idegen.jar4.3 ç”ŸæˆIDEAé…ç½®æ–‡ä»¶development/tools/idegen/idegen.shdevelopment/tools/idegen/idegen.sh æ˜¯çœŸæ­£çš„ç”Ÿæˆ IDE é¡¹ç›®æ–‡ä»¶çš„è„šæœ¬ï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆandroid.imlå’Œandroid.ipræ–‡ä»¶ã€‚4.4 åœ¨AndroidStudioä¸­æ‰“å¼€åœ¨AndroidStudioçš„openèœå•æ‰“å¼€åˆ°æºç ç›®å½•çš„android.ipræ–‡ä»¶ï¼Œç³»ç»Ÿå°†æŠŠé¡¹ç›®åŠ è½½åˆ°ASä¸­ã€‚å…¶å®æˆ‘ä»¬ä¸è¿›è¡Œæºç ç¼–è¯‘ï¼Œä¹Ÿèƒ½å°†æºç å¯¼å…¥ASä¸­ã€‚å¯¼å…¥åASå°†ä¼šç´¢å¼•æºä»£ç ï¼Œéœ€è¦èŠ±è´¹ä¸€æ®µæ¯”è¾ƒé•¿çš„æ—¶é—´ã€‚" }, { "title": "æ€æ ·åˆ›å»ºAndroidçš„å¯†é’¥åº“", "url": "/posts/android_create-android-keystore.html", "categories": "Android", "tags": "keystore", "date": "2023-04-28 01:45:00 +0800", "snippet": "ä¸€ã€å‰ææˆ‘ä»¬éœ€è¦å®‰è£…Javaï¼ŒJavaå°†è‡ªå¸¦keytoolå·¥å…·ï¼Œä½¿ç”¨keytoolå·¥å…·åˆ›å»ºå¯†é’¥åº“ã€‚äºŒã€Linux/Unixåœ¨ Linux/Unix ä¸­åˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼škeytool -genkey -v -keystore ~/.android/jkdev.keystore -alias jkdev -keyalg RSA -keysize 2048 -validity 10000æŸ¥çœ‹å‘½ä»¤å¦‚ä¸‹...", "content": "ä¸€ã€å‰ææˆ‘ä»¬éœ€è¦å®‰è£…Javaï¼ŒJavaå°†è‡ªå¸¦keytoolå·¥å…·ï¼Œä½¿ç”¨keytoolå·¥å…·åˆ›å»ºå¯†é’¥åº“ã€‚äºŒã€Linux/Unixåœ¨ Linux/Unix ä¸­åˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼škeytool -genkey -v -keystore ~/.android/jkdev.keystore -alias jkdev -keyalg RSA -keysize 2048 -validity 10000æŸ¥çœ‹å‘½ä»¤å¦‚ä¸‹ï¼škeytool -list -v -keystore ~/.android/jkdev.keystoreä¸‰ã€windowsåœ¨ windows ä¸­åˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼škeytool -genkey -v -keystore %UserProfile%\\.android\\jkdev.keystore -alias jkdev -keyalg RSA -keysize 2048 -validity 10000æŸ¥çœ‹å‘½ä»¤å¦‚ä¸‹ï¼škeytool -list -v -keystore %UserProfile%\\.android\\jkdev.keystore" }, { "title": "k8sé›†ç¾¤IPç½‘æ®µè§„åˆ’å»ºè®®", "url": "/posts/kubernetes_basic_ip-sugesstion.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:13:00 +0800", "snippet": "ä¸€ã€IPv4çš„ä¸“ç”¨ç½‘ç»œåœ°å€IPv4çš„åœ°å€èŒƒå›´æ˜¯1.0.0.1â€”â€”255.255.255.254ï¼Œç»å¤§å¤šæ•°çš„IPåœ°å€éƒ½æ˜¯å…¬æœ‰åœ°å€ï¼Œéœ€è¦å‘å›½é™…äº’è”ç½‘ä¿¡æ¯ä¸­å¿ƒç”³è¯·æ³¨å†Œã€‚ä½†æ˜¯åœ¨IPv4åœ°å€åè®®ä¸­é¢„ç•™äº†3ä¸ªIPåœ°å€æ®µï¼Œä½œä¸ºä¸“ç”¨ç½‘ç»œåœ°å€ï¼Œä¸“é—¨ä¾›ç»„ç»‡æœºæ„å†…éƒ¨ä½¿ç”¨ã€‚è¿™ä¸‰ä¸ªåœ°å€æ®µåˆ†åˆ«ä½äºAã€Bã€Cä¸‰ç±»åœ°å€å†…ï¼šè¿™ä¸‰ä¸ªåœ°å€æ®µåˆ†åˆ«ä½äºAã€Bã€Cä¸‰ç±»åœ°å€å†…ï¼šAç±»åœ°å€ï¼Œä¿ç•™çš„IPèŒƒå›´æ˜¯10.0.0.0 -- 10.25...", "content": "ä¸€ã€IPv4çš„ä¸“ç”¨ç½‘ç»œåœ°å€IPv4çš„åœ°å€èŒƒå›´æ˜¯1.0.0.1â€”â€”255.255.255.254ï¼Œç»å¤§å¤šæ•°çš„IPåœ°å€éƒ½æ˜¯å…¬æœ‰åœ°å€ï¼Œéœ€è¦å‘å›½é™…äº’è”ç½‘ä¿¡æ¯ä¸­å¿ƒç”³è¯·æ³¨å†Œã€‚ä½†æ˜¯åœ¨IPv4åœ°å€åè®®ä¸­é¢„ç•™äº†3ä¸ªIPåœ°å€æ®µï¼Œä½œä¸ºä¸“ç”¨ç½‘ç»œåœ°å€ï¼Œä¸“é—¨ä¾›ç»„ç»‡æœºæ„å†…éƒ¨ä½¿ç”¨ã€‚è¿™ä¸‰ä¸ªåœ°å€æ®µåˆ†åˆ«ä½äºAã€Bã€Cä¸‰ç±»åœ°å€å†…ï¼šè¿™ä¸‰ä¸ªåœ°å€æ®µåˆ†åˆ«ä½äºAã€Bã€Cä¸‰ç±»åœ°å€å†…ï¼šAç±»åœ°å€ï¼Œä¿ç•™çš„IPèŒƒå›´æ˜¯10.0.0.0 -- 10.255.255.255Bç±»åœ°å€ï¼Œä¿ç•™çš„IPèŒƒå›´æ˜¯172.16.0.0 -- 172.31.255.255Cç±»åœ°å€ï¼Œä¿ç•™çš„IPèŒƒå›´æ˜¯192.168.0.0 -- 192.168.255.255å½“ç„¶ï¼ŒIPv4è¿˜æœ‰å…¶ä»–çš„ä¿ç•™åœ°å€ï¼Œæ¯”å¦‚ 127.0.0.0 â€“ 127.255.255.255 è¿™ä¸ªIPèŒƒå›´ä¹Ÿæ˜¯ä¿ç•™åœ°å€ï¼Œç”¨äºåˆ°æœ¬åœ°ä¸»æœºçš„ç¯å›åœ°å€ã€‚äºŒã€é›†ç¾¤IPçš„è§„åˆ’å»ºè®®æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢è¿™å¼ å›¾äº†è§£åˆ°k8sé›†ç¾¤çš„ç½‘ç»œçš„æ¶æ„è§„åˆ’é›†ç¾¤çš„IPåœ°å€ï¼Œåº”å½“è¦æ»¡è¶³å°½é‡æ»¡è¶³ä¸¤ä¸ªè¦æ±‚ï¼Œä¸€æ˜¯åœ°å€æœ‰æ„ä¹‰ï¼ŒäºŒæ˜¯è¦è®©äººå®¹æ˜“ç†è§£ã€‚æ ¹æ®IPv4çš„ç›¸å…³è§„åˆ™ä»¥åŠå®é™…çš„éœ€æ±‚ï¼Œæˆ‘ä»¬æ­å»ºk8sé›†ç¾¤å¯ä»¥éµå¾ªä»¥ä¸‹çš„IPåœ°å€åˆ†é…è§„åˆ™ èŠ‚ç‚¹ç½‘ç»œ: èŠ‚ç‚¹ç½‘ç»œæ˜¯å®¿ä¸»æœºçš„ç½‘ç»œï¼Œä¹Ÿå°±æ˜¯æœºæˆ¿é‡Œå•ä¸ªä¸»æœºçš„å†…ç½‘ï¼Œå¯ä»¥ä½¿ç”¨ 10.0.0.0/8 (255.0.0.0)ç½‘ç»œæ®µ Podç½‘ç»œ: æ¯ä¸ªèŠ‚ç‚¹å¯ä»¥è¿è¡Œå¤šä¸ªPodï¼Œå¯ä»¥ä½¿ç”¨172.16.0.0/12 (255.240.0.0)ç½‘ç»œæ®µï¼Œ172ä¹Ÿæ˜¯dockerå®¹å™¨çš„é»˜è®¤ç½‘æ®µ Serviceç½‘ç»œ: Podç½‘ç»œå’ŒServiceç½‘ç»œé€šè¿‡kube-proxyç›¸è¿ï¼ŒServiceç½‘ç»œæ˜¯è™šæ‹Ÿçš„ï¼Œå¯ä»¥ä½¿ç”¨ 192.168.0.0/16 (255.255.0.0) ç½‘ç»œæ®µåœ¨èŠ‚ç‚¹ç½‘ç»œä¸­ï¼Œç¬¬ä¸€ä½æ•°å­—ï¼š10ï¼Œé€šå¸¸æ ‡è¯†IDC(Internet Data Centerï¼Œäº’è”ç½‘æ•°æ®ä¸­å¿ƒ) æœºæˆ¿ï¼›ç¬¬äºŒä½é€šå¸¸ä»£è¡¨æœºæˆ¿åºå·ï¼›ç¬¬ä¸‰ä½ä»£è¡¨ä¸åŒçš„é¡¹ç›®æˆ–è€…ç¯å¢ƒï¼Œå¯ä»¥åšç‰©ç†éš”ç¦»ï¼›ç¬¬å››ä½ä»£è¡¨å…·ä½“çš„é¡¹ç›®ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†ä»¥ä¸Šé¢çš„è§„åˆ™ï¼Œé€šè¿‡IPæ®µè®©æˆ‘ä»¬èƒ½å¿«é€Ÿåœ°è¾¨è¯†æ‰€å±ç½‘ç»œç±»å‹ï¼ˆèŠ‚ç‚¹ç½‘ç»œã€Podç½‘ç»œã€Serviceç½‘ç»œï¼‰ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºç†è§£ã€‚" }, { "title": "k8sä¸­çš„å­˜å‚¨", "url": "/posts/kubernetes_basic_storage.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:12:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½å¾ˆçŸ­ï¼Œä¼šè¢«é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯ã€‚é‚£ä¹ˆå®¹å™¨é”€æ¯æ—¶ï¼Œä¿å­˜åœ¨å®¹å™¨ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤ã€‚è¿™ç§ç»“æœå¯¹ç”¨æˆ·æ¥è¯´ï¼Œåœ¨æŸç§æƒ…å†µä¸‹æ˜¯ä¸ä¹æ„çš„ï¼Œä¸ºäº†æŒä¹…åŒ–ä¿å­˜å®¹å™¨çš„æ•°æ®ï¼Œkubernateså¼•å…¥Volumeçš„æ¦‚å¿µã€‚Volumeæ˜¯Podä¸­èƒ½å¤Ÿè¢«å¤šä¸ªå®¹å™¨è®¿é—®çš„å…±äº«ç›®å½•ï¼Œå®ƒè¢«å®šä¹‰åœ¨Podä¸Šï¼Œç„¶åè¢«ä¸€ä¸ªPodé‡Œçš„å¤šä¸ªå®¹å™¨æŒ‚è½½åˆ°å…·ä½“çš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œkubernatesé€šè¿‡Volumeå®ç°åŒä¸€ä¸ªPodä¸­ä¸...", "content": "ä¸€ã€æ¦‚è¿°å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸå¯èƒ½å¾ˆçŸ­ï¼Œä¼šè¢«é¢‘ç¹åœ°åˆ›å»ºå’Œé”€æ¯ã€‚é‚£ä¹ˆå®¹å™¨é”€æ¯æ—¶ï¼Œä¿å­˜åœ¨å®¹å™¨ä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ¸…é™¤ã€‚è¿™ç§ç»“æœå¯¹ç”¨æˆ·æ¥è¯´ï¼Œåœ¨æŸç§æƒ…å†µä¸‹æ˜¯ä¸ä¹æ„çš„ï¼Œä¸ºäº†æŒä¹…åŒ–ä¿å­˜å®¹å™¨çš„æ•°æ®ï¼Œkubernateså¼•å…¥Volumeçš„æ¦‚å¿µã€‚Volumeæ˜¯Podä¸­èƒ½å¤Ÿè¢«å¤šä¸ªå®¹å™¨è®¿é—®çš„å…±äº«ç›®å½•ï¼Œå®ƒè¢«å®šä¹‰åœ¨Podä¸Šï¼Œç„¶åè¢«ä¸€ä¸ªPodé‡Œçš„å¤šä¸ªå®¹å™¨æŒ‚è½½åˆ°å…·ä½“çš„æ–‡ä»¶ç›®å½•ä¸‹ï¼Œkubernatesé€šè¿‡Volumeå®ç°åŒä¸€ä¸ªPodä¸­ä¸åŒå®¹å™¨ä¹‹é—´çš„æ•°æ®å…±äº«ä»¥åŠæ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚Volumeçš„ç”Ÿå‘½å‘¨æœŸä¸ä¸å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸç›¸å…³ï¼Œå½“å®¹å™¨ç»ˆæ­¢æˆ–è€…é‡å¯æ—¶ï¼ŒVolumeä¸­çš„æ•°æ®ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚kubernatesçš„Volumeæ”¯æŒå¤šç§ç±»å‹ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š ç®€å•å­˜å‚¨ï¼šEmptyDirã€HostPathã€NFS é«˜çº§å­˜å‚¨ï¼šPVã€PVC é…ç½®å­˜å‚¨ï¼šConfigMapã€Secretåœ¨ä¸‹æ–‡ä¸­æˆ‘ä»¬å°†ä»‹ç»k8sä¸­çš„ç®€å•å­˜å‚¨åŠŸèƒ½äºŒã€EmptyDirEmptyDiræ˜¯åœ¨Podè¢«åˆ†é…åˆ°Nodeæ—¶åˆ›å»ºçš„ï¼Œå®ƒçš„åˆå§‹åŒ–å†…å®¹ä¸ºç©ºï¼Œå¹¶ä¸”æ— éœ€æŒ‡å®šå®¿ä¸»æœºä¸Šå¯¹åº”çš„ç›®å½•æ–‡ä»¶ï¼Œå› ä¸ºkubernetesä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç›®å½•ï¼Œåˆ°Podé”€æ¯æ—¶ï¼ŒEmptyDirä¸­çš„æ•°æ®ä¹Ÿä¼šè¢«æ°¸ä¹…åˆ é™¤ã€‚Emptyç”¨é€”å¦‚ä¸‹ ä¸´æ—¶ç©ºé—´ï¼Œä¾‹å¦‚ç”¨äºæŸäº›åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ‰€éœ€çš„ä¸´æ—¶ç›®å½•ï¼Œä¸”æ— éœ€æ°¸ä¹…ä¿ç•™ ä¸€ä¸ªå®¹å™¨éœ€è¦ä»å¦ä¸€ä¸ªå®¹å™¨ä¸­è·å–æ•°æ®çš„ç›®å½•ï¼ˆå¤šå®¹å™¨å…±äº«ï¼‰æ¥ä¸‹æ¥ï¼Œé€šè¿‡ä¸€ä¸ªå®¹å™¨ä¹‹é—´æ–‡ä»¶å…±äº«çš„æ¡ˆä¾‹æ¥ä½¿ç”¨ä¸€ä¸‹EmptyDirã€‚åœ¨ä¸€ä¸ªPodä¸­å‡†å¤‡ä¸¤ä¸ªå®¹å™¨ï¼Œnginxå’Œbusyboxï¼Œç„¶åå£°æ˜ä¸€ä¸ªVolumeåˆ†åˆ«æŒ‚è½½åˆ°ä¸¤ä¸ªå®¹å™¨çš„ç›®å½•ä¸­ï¼Œå†è®©nginxå®¹å™¨è´Ÿè´£å‘Volumeä¸­å†™å…¥æ—¥å¿—ï¼Œbusyboxä¸­é€šè¿‡å‘½ä»¤å°†æ—¥å¿—å†…å®¹è¯»å–åˆ°æ§åˆ¶å°ã€‚åˆ›å»ºä¸€ä¸ªvolume-empty.yamlèµ„æºæ¸…å•æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Podmetadata: name: volume-emptydir namespace: devspec: containers: - name: nginx image: nginx:1.17.1 ports: - containerPort: 80 volumeMounts: - name: logs-volume mountPath: /var/log/nginx - name: busybox image: busybox:1.30 command: [\"/bin/sh\",\"-c\",\"tail -f /logs/access.log\"] # åˆå§‹å‘½ä»¤ï¼ŒåŠ¨æ€è¯»å–æ–‡ä»¶ä¸­å†…å®¹ volumeMounts: # å°†logs-volumeæŒ‚è½½åˆ°busyboxå®¹å™¨ä¸­ï¼Œå¯¹åº”ç›®å½•ä¸ºlogs - name: logs-volume mountPath: /logs volumes: # å£°æ˜volumeï¼Œnameä¸ºlogs-volumeï¼Œç±»å‹ä¸ºemptyDir - name: logs-volume emptyDir: {}åˆ›å»ºæˆåŠŸä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ—¥å¿—kubectl logs -f volume-emptydir -n dev -c busyboxå½“è®¿é—®nginxæ—¶ï¼Œå°†çœ‹åˆ°ç›¸åº” çš„è¾“å‡ºæ•°æ®ä¸‰ã€HostPathEmptyDirä¸­æ•°æ®ä¸ä¼šè¢«æŒä¹…åŒ–ï¼Œå®ƒä¼šéšç€Podçš„ç»“æŸè€Œé”€æ¯ï¼Œå¦‚æœæƒ³ç®€å•çš„å°†æ•°æ®æŒä¹…åŒ–åˆ°ä¸»æœºä¸­ï¼Œå¯ä»¥é€‰æ‹©HostPathã€‚HostPathå°±æ˜¯å°†Nodeä¸»æœºä¸­ä¸€ä¸ªå®é™…ç›®å½•æŒ‚è½½åœ¨Podä¸­ï¼Œä»¥æä¾›å®¹å™¨ä½¿ç”¨ï¼Œè¿™æ ·çš„è®¾è®¡å°±å¯ä»¥ä¿è¯Podé”€æ¯äº†ï¼Œä½†æ˜¯æ•°æ®ä¾æ—§å¯ä»¥å­˜åœ¨Nodeä¸»æœºä¸Šã€‚åˆ›å»ºä¸€ä¸ªvolume-hostpath.yamlèµ„æºæ¸…å•æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Podmetadata: name: volume-hostpath namespace: devspec: containers: - name: nginx image: nginx:1.17.1 ports: - containerPort: 80 volumeMounts: - name: logs-volume mountPath: /var/log/nginx - name: busybox image: busybox:1.30 command: [\"/bin/sh\",\"-c\",\"tail -f /logs/access.log\"] volumeMounts: - name: logs-volume mountPath: /logs volumes: - name: logs-volume hostPath: path: /root/logs type: DirectoryOrCreate # ç›®å½•å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å…ˆåˆ›å»ºåä½¿ç”¨hostPathç±»å‹typeç±»å‹ DirectoryOrCreateï¼šç›®å½•å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±å…ˆåˆ›å»ºï¼Œåä½¿ç”¨ Directoryï¼šç›®å½•å¿…é¡»å­˜åœ¨ FileOrCreateï¼šæ–‡ä»¶å­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±å…ˆåˆ›å»ºåä½¿ç”¨ Fileï¼šæ–‡ä»¶å¿…é¡»å­˜åœ¨ Socketï¼šunixå¥—æ¥å­—å¿…é¡»å­˜åœ¨ CharDeviceï¼šå­—ç¬¦è®¾å¤‡å¿…é¡»å­˜åœ¨ BlockDeviceï¼šå—è®¾å¤‡å¿…é¡»å­˜åœ¨ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºkubectl create -f volume-hostpath.yamlå››ã€NFSHostPathå¯ä»¥è§£å†³æ•°æ®æŒä¹…åŒ–çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦NodeèŠ‚ç‚¹æ•…éšœäº†ï¼ŒPodå¦‚æœè½¬åˆ°äº†åˆ«çš„èŠ‚ç‚¹ï¼Œåˆä¼šå‡ºé—®é¢˜äº†ï¼Œæ­¤æ—¶éœ€è¦å‡†å¤‡å•ç‹¬çš„ç½‘ç»œå­˜å‚¨ç³»ç»Ÿï¼Œæ¯”å¦‚å¸¸è§çš„NFSã€CIFSã€‚NFSæ˜¯ä¸€ä¸ªç½‘ç»œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼Œå¯ä»¥æ­å»ºä¸€å°NFSæœåŠ¡å™¨ï¼Œç„¶åå°†Podä¸­çš„å­˜å‚¨ç›´æ¥è¿æ¥åˆ°NFSç³»ç»Ÿä¸Šï¼Œè¿™æ ·çš„è¯ï¼Œæ— è®ºPodåœ¨èŠ‚ç‚¹ä¸Šæ€ä¹ˆè½¬ç§»ï¼Œåªè¦Nodeè·ŸNFSå¯¹æ¥æ²¡é—®é¢˜ï¼Œæ•°æ®å°±å¯ä»¥æˆåŠŸè®¿é—®ã€‚ï¼ˆ1ï¼‰é¦–å…ˆå‡†å¤‡NFSçš„æœåŠ¡å™¨ï¼Œè¿™é‡Œä¸ºäº†ç®€å•ï¼Œç›´æ¥åœ¨masterèŠ‚ç‚¹ä½œNFSæœåŠ¡å™¨# å®‰è£…nfsæœåŠ¡apt install nfs-kernel-server# å‡†å¤‡ä¸€ä¸ªå…±äº«ç›®å½•mkdir /var/data/nfs -pv# å°†å…±äº«ç›®å½•è¯»å†™æƒé™æš´éœ²ç»™é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»æœºvim /etc/exportsåœ¨multipassè™šæ‹Ÿç¯å¢ƒä¸­ï¼Œé›†ç¾¤éƒ½åœ¨ä¸€ä¸ªç½‘æ®µå†…ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹# ä»¥è¯»å†™å’Œérootæƒé™æš´éœ²/var/data/nfs 192.168.64.0/24(rw,no_root_squash)é‡å¯nfsæœåŠ¡# å¯åŠ¨systemctl start nfs-kernel-serverï¼ˆ2ï¼‰åœ¨nodeèŠ‚ç‚¹å®‰è£…nfså®¢æˆ·ç«¯apt install nfs-commonåˆ›å»ºNFSå­˜å‚¨å·ï¼Œåˆ›å»ºvolume-nfs.yamlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Podmetadata: name: volume-hostpath namespace: devspec: containers: - name: nginx image: nginx:1.17.1 ports: - containerPort: 80 volumeMounts: - name: logs-volume mountPath: /var/log/nginx - name: busybox image: busybox:1.30 command: [\"/bin/sh\",\"-c\",\"tail -f /logs/access.log\"] volumeMounts: - name: logs-volume mountPath: /logs volumes: - name: logs-volume nfs: server: 192.168.64.8 # nfsæœåŠ¡å™¨ path: /var/data/nfs # å…±äº«æ–‡ä»¶è·¯å¾„å½“æˆ‘ä»¬è®¿é—®podä¸­çš„nginxä¹‹åï¼Œå°†çœ‹åˆ°masterèŠ‚ç‚¹çš„/var/data/nfsç›®å½•ä¸‹äº§ç”Ÿäº†ç›¸å…³æ—¥å¿—æ–‡ä»¶" }, { "title": "k8sä¸­çš„Service", "url": "/posts/kubernetes_basic_service.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:10:00 +0800", "snippet": "ä¸€ã€ æ¦‚è¿°æˆ‘ä»¬å¯ä»¥é€šè¿‡Controlleråˆ›å»ºåº”ç”¨ï¼Œå¯æ˜¯å½“æˆ‘ä»¬è®¿é—®åº”ç”¨æ—¶ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼ŒPodçš„çŠ¶æ€ä¸æ˜¯è®¤ä¸ºæ§åˆ¶çš„ï¼ŒPod IPæ˜¯åœ¨åˆ›å»ºçš„æ—¶å€™åˆ†é…çš„ã€‚å‡è®¾Podè¢«è¯¯åˆ é™¤ï¼Œè¢«Controlleré‡æ–°æ‹‰èµ·ä¸€ä¸ªæ–°çš„Podæ—¶ï¼Œæˆ‘ä»¬å‘ç°Pod IPæ˜¯å˜åŒ–çš„ã€‚å¦‚æœè®¿é—®å¿…é¡»æ›´æ¢IPåœ°å€ï¼Œè¿™æ ·å¯¹äºå¤§é‡Podè¿è¡Œåº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹Podå®Œå…¨æ— æ³•æ§åˆ¶ï¼Œå› æ­¤åœ¨k8sé›†ç¾¤ä¸­æˆ‘ä»¬å¼•å…¥å¦ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šServiceæœ¬æœŸç›®...", "content": "ä¸€ã€ æ¦‚è¿°æˆ‘ä»¬å¯ä»¥é€šè¿‡Controlleråˆ›å»ºåº”ç”¨ï¼Œå¯æ˜¯å½“æˆ‘ä»¬è®¿é—®åº”ç”¨æ—¶ï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼ŒPodçš„çŠ¶æ€ä¸æ˜¯è®¤ä¸ºæ§åˆ¶çš„ï¼ŒPod IPæ˜¯åœ¨åˆ›å»ºçš„æ—¶å€™åˆ†é…çš„ã€‚å‡è®¾Podè¢«è¯¯åˆ é™¤ï¼Œè¢«Controlleré‡æ–°æ‹‰èµ·ä¸€ä¸ªæ–°çš„Podæ—¶ï¼Œæˆ‘ä»¬å‘ç°Pod IPæ˜¯å˜åŒ–çš„ã€‚å¦‚æœè®¿é—®å¿…é¡»æ›´æ¢IPåœ°å€ï¼Œè¿™æ ·å¯¹äºå¤§é‡Podè¿è¡Œåº”ç”¨æ¥è¯´ï¼Œæˆ‘ä»¬å¯¹Podå®Œå…¨æ— æ³•æ§åˆ¶ï¼Œå› æ­¤åœ¨k8sé›†ç¾¤ä¸­æˆ‘ä»¬å¼•å…¥å¦ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šServiceæœ¬æœŸç›®æ ‡ äº†è§£Serviceçš„ä½œç”¨ äº†è§£Serivceçš„ç±»å‹ Serivceå‚æ•° Serviceåˆ›å»ºæ–¹æ³• Serviceåˆ é™¤æ–¹æ³•äºŒã€ç›¸å…³æ¦‚å¿µ2.1 Serviceæ¦‚å¿µ Seriviceä¸æ˜¯ä¸€ä¸ªå®ä½“æœåŠ¡ï¼ŒServiceæ˜¯ä¸€æ¡iptablesæˆ–ipvsçš„è½¬å‘è§„åˆ™ é€šè¿‡Serviceä¸ºPodå®¢æˆ·ç«¯æä¾›è®¿é—®Podæ–¹æ³•ï¼ˆå³å®¢æˆ·ç«¯è®¿é—®Podå…¥å£ï¼‰ï¼ŒServiceé€šè¿‡Podæ ‡ç­¾ä¸Podè¿›è¡Œå…³è”2.2 Serviceç±»å‹ClusterIP: é»˜è®¤ï¼Œåˆ†é…ä¸€ä¸ªé›†ç¾¤å†…éƒ¨å¯ä»¥è®¿é—®çš„è™šæ‹ŸIPNodePort: åœ¨æ¯ä¸ªNodeä¸Šåˆ†é…ä¸€ä¸ªç«¯å£ä½œä¸ºå¤–éƒ¨è®¿é—®å…¥å£LoadBalancer: å·¥ä½œåœ¨å¾…å®šçš„Cloud Providerä¸Šï¼Œä¾‹å¦‚ Google Cloudï¼ŒAWSï¼ŒOpenStackExternalName: è¡¨ç¤ºæŠŠé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡å¼•å…¥åˆ°é›†ç¾¤å†…éƒ¨ä¸­æ¥ï¼Œå³å®ç°é›†ç¾¤å†…éƒ¨Podå’Œé›†ç¾¤å¤–éƒ¨çš„æœåŠ¡è¿›è¡Œé€šä¿¡2.3 Serviceå‚æ•°å¸¸ç”¨ç«¯å£å‚æ•° port: è®¿é—®Serviceä½¿ç”¨çš„ç«¯å£ targetPort: Podä¸­å®¹å™¨ç«¯å£ NodePort: é€šè¿‡Nodeå®ç°å¤–ç½‘ç”¨æˆ·è®¿é—®k8sé›†ç¾¤å†…éƒ¨Serviceï¼ˆ30000-32767ï¼‰ä¸‰ã€Serviceçš„åˆ›å»º3.1 é€šè¿‡å‘½ä»¤åˆ›å»ºServiceå…ˆåˆ›å»ºdeploymentåº”ç”¨ï¼Œç„¶ååˆ›å»ºServiceä¸Deploymentåº”ç”¨å…³è”ï¼ŒæŸ¥çœ‹deploymentåº”ç”¨ï¼škubectl get deployment.appsï¼Œè¿”å›ä»¥ä¸‹å†…å®¹NAME READY UP-TO-DATE AVAILABLE AGEnginx-app2 1/1 1 1 7m43såˆ›å»ºServicekubectl expose deployment.apps nginx-app2 --type=ClusterIP --target-port=80 --port=80æŸ¥çœ‹åˆ›å»ºçš„Servicekubectl get service# æˆ–kubectl get svcè¿”å›ä»¥ä¸‹å†…å®¹NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEkubernetes ClusterIP 10.96.0.1 &lt;none&gt; 443/TCP 24hnginx-app2 ClusterIP 10.104.130.50 &lt;none&gt; 80/TCP 6m58sæŸ¥çœ‹Serviceä¸Podçš„ç«¯ç‚¹å…³ç³»ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤kubectl get endpointsè¿”å›ä»¥ä¸‹å†…å®¹NAME ENDPOINTS AGEkubernetes 192.168.64.4:6443 24hnginx-app2 10.244.1.5:80 7m10s3.2 é€šè¿‡èµ„æºæ¸…å•åˆ›å»ºServiceæˆ‘ä»¬å…ˆåœ¨èµ„æºæ¸…å•é‡Œå®šä¹‰Deploymentåº”ç”¨ï¼Œå†å®šä¹‰Serviceï¼Œåˆ›å»ºcreate-deployment-nginx-app-service.yamlèµ„æºæ¸…å•æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹---apiVersion: apps/v1kind: Deploymentmetadata: name: nginx-appspec: replicas: 2 selector: matchLabels: apps: nginx template: metadata: labels: apps: nginx spec: containers: - name: nginxapp image: nginx:latest imagePullPolicy: IfNotPresent ports: - containerPort: 80---apiVersion: v1kind: Servicemetadata: name: nginx-app2-svcspec: type: ClusterIP ports: - protocol: TCP port: 80 selector: apps: nginxé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºkubectl apply -f create-deployment-nginx-app-service.yaml3.3 é€šè¿‡èµ„æºæ¸…å•åˆ›å»ºNodePortç±»å‹çš„Serviceåˆ›å»ºcreate-deployment-nginx-app3-service.yamlï¼Œå®šä¹‰å†…å®¹å¦‚ä¸‹---apiVersion: apps/v1kind: Deploymentmetadata: name: nginx-app3spec: replicas: 2 selector: matchLabels: apps: nginx-app3 template: metadata: labels: apps: nginx-app3 spec: containers: - name: nginxapp3 image: nginx:latest imagePullPolicy: IfNotPresent ports: - containerPort: 80---apiVersion: v1kind: Servicemetadata: name: nginx-app3-svcspec: type: NodePort ports: - protocol: TCP port: 80 targetPort: 80 nodePort: 30001 selector: apps: nginx-app3é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºkubectl apply -f create-deployment-nginx-app3-service.yaml3.4 åˆ é™¤Serviceé€šè¿‡å‘½ä»¤è¡Œåˆ é™¤kubectl delete service nginx-app2é€šè¿‡èµ„æºæ¸…å•æ–‡ä»¶åˆ›å»ºçš„å¯ä»¥é€šè¿‡èµ„æºæ¸…å•æ–‡ä»¶åˆ é™¤ï¼Œå¦‚ä¸‹kubectl delete -f create-deployment-nginx-app-service.yaml" }, { "title": "k8sä¸­çš„Ingress", "url": "/posts/kubernetes_basic_ingress.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:10:00 +0800", "snippet": "ä¸€ã€ç›¸å…³æ¦‚å¿µServiceå¯¹é›†ç¾¤ä¹‹å¤–æš´éœ²ç«¯å£ä¸»è¦æ–¹å¼æœ‰ä¸¤ç§ï¼šNodePortå’ŒLoadBalancerï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼ï¼Œéƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ NodePortæ–¹å¼çš„ç¼ºç‚¹æ˜¯ä¼šå ç”¨å¾ˆå¤šé›†ç¾¤çš„ç«¯å£ï¼Œé›†ç¾¤æœåŠ¡å™¨å˜å¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªç¼ºç‚¹æ„ˆå‘æ˜æ˜¾ LoadBalancerçš„ç¼ºç‚¹æ˜¯æ¯ä¸ªServiceéœ€è¦ä¸€ä¸ªLoadBalancerï¼Œæµªè´¹ã€éº»çƒ¦ï¼Œå¹¶ä¸”éœ€è¦k8sä¹‹å¤–çš„è®¾å¤‡æ”¯æŒåŸºäºè¿™ä¸¤ç§ç°çŠ¶ï¼Œk8sæä¾›äº†Ingress...", "content": "ä¸€ã€ç›¸å…³æ¦‚å¿µServiceå¯¹é›†ç¾¤ä¹‹å¤–æš´éœ²ç«¯å£ä¸»è¦æ–¹å¼æœ‰ä¸¤ç§ï¼šNodePortå’ŒLoadBalancerï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼ï¼Œéƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ NodePortæ–¹å¼çš„ç¼ºç‚¹æ˜¯ä¼šå ç”¨å¾ˆå¤šé›†ç¾¤çš„ç«¯å£ï¼Œé›†ç¾¤æœåŠ¡å™¨å˜å¤šçš„æ—¶å€™ï¼Œè¿™ä¸ªç¼ºç‚¹æ„ˆå‘æ˜æ˜¾ LoadBalancerçš„ç¼ºç‚¹æ˜¯æ¯ä¸ªServiceéœ€è¦ä¸€ä¸ªLoadBalancerï¼Œæµªè´¹ã€éº»çƒ¦ï¼Œå¹¶ä¸”éœ€è¦k8sä¹‹å¤–çš„è®¾å¤‡æ”¯æŒåŸºäºè¿™ä¸¤ç§ç°çŠ¶ï¼Œk8sæä¾›äº†Ingressèµ„æºå¯¹è±¡ï¼ŒIngresså€¼éœ€è¦ä¸€ä¸ªNodePortæˆ–è€…ä¸€ä¸ªLoadBalancerå°±å¯ä»¥æ»¡è¶³æš´éœ²å¤šä¸ªServiceçš„éœ€æ±‚ã€‚å·¥ä½œæœºåˆ¶å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºå®é™…ä¸Šï¼ŒIngressç›¸å½“äºæ˜¯ä¸€ä¸ª7å±‚çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œæ˜¯k8så¯¹åå‘ä»£ç†çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œå®ƒçš„å·¥ä½œåŸç†ç±»ä¼¼äºNginxï¼Œå¯ä»¥ç†è§£æˆåœ¨Ingressé‡Œå»ºç«‹è¯¸å¤šåå°„è§„åˆ™ï¼ŒIngress Controlleré€šè¿‡ç›‘å¬è¿™äº›é…ç½®è§„åˆ™è½¬åŒ–æˆNginxçš„åå‘ä»£ç†é…ç½®ï¼Œç„¶åå¯¹å¤–éƒ¨æä¾›æœåŠ¡ã€‚åœ¨è¿™é‡Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µ Ingress: k8sä¸­çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œä½œç”¨æ˜¯å®šä¹‰è¯·æ±‚è½¬å‘åˆ°Serviceçš„è§„åˆ™ Ingress controller: å…·ä½“å®ç°åå‘ä»£ç†åŠè´Ÿè½½å‡è¡¡çš„ç¨‹åºï¼Œå¯¹Ingresså®šä¹‰çš„è§„åˆ™è¿›è¡Œè§£æï¼Œæ ¹æ®é…ç½®è§„åˆ™æ¥å®ç°è½¬å‘ï¼Œå®ç°æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚Nginxã€Controllerã€Haproxyç­‰ç­‰ã€‚Ingressï¼ˆä»¥Nginxä¸ºä¾‹ï¼‰çš„å·¥ä½œåŸç†å¦‚ä¸‹ ç”¨æˆ·ç¼–å†™Ingressè§„åˆ™ï¼Œè¯´æ˜å“ªä¸ªåŸŸåå¯¹åº”k8sé›†ç¾¤çš„å“ªä¸ªSeivice Ingressæ§åˆ¶å™¨åŠ¨æ€æ„ŸçŸ¥IngressæœåŠ¡è§„åˆ™çš„å˜åŒ–ï¼Œç„¶åç”Ÿæˆä¸€æ®µå¯¹åº”çš„Nginxåå‘ä»£ç†é…ç½® Ingressæ§åˆ¶å™¨å°†ä¼šç”Ÿæˆçš„Nginxé…ç½®å†™å…¥åˆ°ä¸€ä¸ªè¿è¡Œç€çš„NginxæœåŠ¡ä¸­ï¼Œå¹¶ä¸”åŠ¨æ€æ›´æ–° å…¶å®çœŸæ­£åœ¨å·¥ä½œçš„å°±æ˜¯ä¸€ä¸ªNginxäº†ï¼Œå†…éƒ¨é…ç½®äº†ç”¨æˆ·çš„è¯·æ±‚è½¬å‘è§„åˆ™ äºŒã€åˆ›å»ºIngress2.1 åˆ›å»ºIngress Controllerå°†ä»¥ä¸‹ä¸¤ä¸ªèµ„æºæ¸…å•æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨# åˆ›å»ºç›®å½•mkdir ingress-controller# è¿›å…¥èµ„æºç›®å½•cd ingress-controller# mandatorywget https://github.com/kubernetes/ingress-nginx/blob/nginx-0.30.0/deploy/static/mandatory.yaml# service-nodeportæ–‡ä»¶wget https://raw.githubusercontent.com/kubernetes/ingress-nginx/nginx-0.30.0/deploy/static/provider/baremetal/service-nodeport.yamlæ‰§è¡Œkubectlåˆ›å»ºèµ„æºå‘½ä»¤kubectl apply -f ./2.2 æŸ¥çœ‹Ingress ControlleræŸ¥çœ‹Podï¼škubectl get pods -n ingress-nginxï¼Œè¿”å›ä»¥ä¸‹å†…å®¹NAME READY STATUS RESTARTS AGEnginx-ingress-controller-5bb8fb4bb6-qnbdv 1/1 Running 0 3m23sæŸ¥çœ‹Serviceï¼škubectl get svc -n ingress-nginxï¼Œè¿”å›ä»¥ä¸‹å†…å®¹NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGEingress-nginx NodePort 10.99.166.208 &lt;none&gt; 80:30796/TCP,443:31737/TCP 5m22s2.3 åˆ›å»ºDeploymentå’ŒServiceåˆ›å»º3ä¸ªNginxå’Œ3ä¸ªtomcatåº”ç”¨å’Œå¯¹åº”çš„ä¸¤ä¸ªServiceï¼Œåˆ›å»ºtomcat-nginx.yamlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼šapiVersion: apps/v1kind: Deploymentmetadata: name: nginx-deployment namespace: devspec: replicas: 3 selector: matchLabels: app: nginx-pod template: metadata: labels: app: nginx-pod spec: containers: - name: nginx image: nginx:1.17.1 ports: - containerPort: 80---apiVersion: apps/v1kind: Deploymentmetadata: name: tomcat-deployment namespace: devspec: replicas: 3 selector: matchLabels: app: tomcat-pod template: metadata: labels: app: tomcat-pod spec: containers: - name: tomcat image: tomcat:8.5-jre10-slim ports: - containerPort: 8080---apiVersion: v1kind: Servicemetadata: name: nginx-service namespace: devspec: selector: app: nginx-pod clusterIP: None type: ClusterIP ports: - port: 80 targetPort: 80 ---apiVersion: v1kind: Servicemetadata: name: tomcat-service namespace: devspec: selector: app: tomcat-pod clusterIP: None type: ClusterIP ports: - port: 8080 targetPort: 80803.4 åˆ›å»ºingress-httpåˆ›å»ºingress-http.yamlï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: extensions/v1beta1kind: Ingressmetadata: name: ingress-http namespace: devspec: rules: - host: nginx.jkdev.cn http: paths: - path: / backend: serviceName: nginx-service servicePort: 80 - host: tomcat.jkdev.cn http: paths: - path: / backend: serviceName: tomcat-service servicePort: 8080ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œåˆ›å»ºkubectl create -f ingress-http.yamlåˆ›å»ºä¹‹åä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹kubectl get ingress -n dev# æˆ–kubectl get ing -n devæˆ–ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŒ‡å®šingressåç§°æŸ¥çœ‹kubectl get ingress ingress-http -n dev# æˆ–kubectl get ing ingress-http -n devæˆ–ä½¿ç”¨kubectl describe ingress -n devæŒ‡ä»¤æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œè¿”å›ä»¥ä¸‹è¯¦ç»†å†…å®¹Name: ingress-httpNamespace: devAddress: 10.99.166.208Default backend: default-http-backend:80 (&lt;error: endpoints \"default-http-backend\" not found&gt;)Rules: Host Path Backends ---- ---- -------- nginx.jkdev.cn / nginx-service:80 (10.244.1.20:80,10.244.1.21:80,10.244.1.24:80) tomcat.jkdev.cn / tomcat-service:8080 (10.244.1.22:8080,10.244.1.23:8080,10.244.1.25:8080)Annotations: &lt;none&gt;Events: Type Reason Age From Message ---- ------ ---- ---- ------- Normal CREATE 21m nginx-ingress-controller Ingress dev/ingress-http Normal UPDATE 21m nginx-ingress-controller Ingress dev/ingress-http3.5 åˆ›å»ºingress-httpsç”Ÿæˆsslè¯ä¹¦ä»¥åŠå¯†é’¥# ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶tls.crtå’Œç§é’¥tls.keyopenssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -keyout tls.key -out tls.crt -subj \"/C=CN/ST=GZ/O=nginx/CN=jkdev.cn\"# é€šè¿‡è¯ä¹¦è¯·æ±‚æ–‡ä»¶tls.crtå’Œç§é’¥tls.keyç”Ÿæˆk8sè¯ä¹¦tls-secretkubectl create secret tls tls-secret --key tls.key --cert tls.crtæ·»åŠ ingress-https.yamlï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹apiVersion: extensions/v1beta1kind: Ingressmetadata: name: ingress-https namespace: devspec: tls: - hosts: - nginx.jkdev.cn - tomcat.jkdev.cn secretName: tls-secret # æŒ‡å®šå¯†é’¥ï¼Œå¿…é¡»å’Œåˆ›å»ºçš„å¯†é’¥åç§°ä¸€è‡´ rules: - host: nginx.jkdev.cn http: paths: - path: / backend: serviceName: nginx-service servicePort: 80 - host: tomcat.jkdev.cn http: paths: - path: / backend: serviceName: tomcat-service servicePort: 8080ä¸‰ã€Nginxè½¬å‘åˆ°k8sä½¿ç”¨Nginxå°†æ¥è‡ªå¤–ç½‘çš„è¯·æ±‚è½¬å‘ç»™k8sé›†ç¾¤upstream default_backend_traefix { server 10.99.166.208:80 max_fails=3 fail_timeout=10s;}server{ listen 80; server_name *.jkdev.cn; location / { proxy_pass http://default_backend_traefix; proxy_set_header Host $http_host; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; }}" }, { "title": "k8sä¸­çš„Controller", "url": "/posts/kubernetes_basic_controller.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:09:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°Podæ˜¯å¯ä»¥ç›´æ¥åˆ é™¤çš„ï¼Œå¦‚æœç”Ÿäº§è¿‡ç¨‹ä¸­è¯¯æ“ä½œï¼ŒPodåŒæ ·ä¹Ÿä¼šè¢«è½»æ˜“åˆ é™¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨k8sé›†ç¾¤ä¸­å¼•å…¥å¦ä¸€ç§æ¦‚å¿µï¼šæ§åˆ¶å™¨ï¼Œç”¨äºåœ¨k8sé›†ç¾¤ä¸­ä»¥loopæ–¹å¼ç›‘è§†PodçŠ¶æ€ï¼Œå¦‚æœå‘ç°Podè¢«åˆ é™¤ï¼Œå°†é‡æ–°æ‹‰èµ·ä¸€ä¸ªPodï¼Œä»¥è®©Podä¸€ç›´ä¿æŒåœ¨ç”¨æˆ·æœŸæœ›çŠ¶æ€ã€‚æœ¬æ–‡ç›®æ ‡ äº†è§£Controller äº†è§£Controlleråˆ†ç±» äº†è§£Deploymentæ§åˆ¶å™¨ä½œç”¨ æŒæ¡åˆ›å»ºDeloypment...", "content": "ä¸€ã€æ¦‚è¿°Podæ˜¯å¯ä»¥ç›´æ¥åˆ é™¤çš„ï¼Œå¦‚æœç”Ÿäº§è¿‡ç¨‹ä¸­è¯¯æ“ä½œï¼ŒPodåŒæ ·ä¹Ÿä¼šè¢«è½»æ˜“åˆ é™¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨k8sé›†ç¾¤ä¸­å¼•å…¥å¦ä¸€ç§æ¦‚å¿µï¼šæ§åˆ¶å™¨ï¼Œç”¨äºåœ¨k8sé›†ç¾¤ä¸­ä»¥loopæ–¹å¼ç›‘è§†PodçŠ¶æ€ï¼Œå¦‚æœå‘ç°Podè¢«åˆ é™¤ï¼Œå°†é‡æ–°æ‹‰èµ·ä¸€ä¸ªPodï¼Œä»¥è®©Podä¸€ç›´ä¿æŒåœ¨ç”¨æˆ·æœŸæœ›çŠ¶æ€ã€‚æœ¬æ–‡ç›®æ ‡ äº†è§£Controller äº†è§£Controlleråˆ†ç±» äº†è§£Deploymentæ§åˆ¶å™¨ä½œç”¨ æŒæ¡åˆ›å»ºDeloypmentæ§åˆ¶å™¨å‹åº”ç”¨æ–¹æ³• æŒæ¡åˆ é™¤Deploymentæ§åˆ¶å™¨å‹åº”ç”¨æ–¹æ³•äºŒã€ç›¸å…³æ¦‚å¿µ2.1 ä»‹ç» Controlleræ˜¯k8sé›†ç¾¤ä¸­çš„æ§åˆ¶å™¨ç»„ä»¶ ç”¨äºå¯¹åº”ç”¨è¿è¡Œçš„èµ„æºå¯¹è±¡è¿›è¡Œç›‘æ§ å½“Podå‡ºç°é—®é¢˜æ—¶ï¼Œä¼šæŠŠPodé‡æ–°æ‹‰èµ·ï¼Œä»¥è¾¾åˆ°ç”¨æˆ·æœŸæœ›çš„çŠ¶æ€2.2 åˆ†ç±»å¸¸è§çš„Podæ§åˆ¶å™¨åˆ†ç±» Deploymentï¼šå£°æ˜å¼æ›´æ–°æ§åˆ¶å™¨ï¼Œç”¨äºå‘å¸ƒæ— çŠ¶æ€åº”ç”¨ ReplicaSetï¼šå‰¯æœ¬é›†æ§åˆ¶å™¨ï¼Œç”¨äºå¯¹Podè¿›è¡Œå‰¯æœ¬è§„æ¨¡æ‰©å¤§æˆ–å‰ªè£ StatefulSetï¼šæœ‰çŠ¶æ€å‰¯æœ¬é›†ï¼Œç”¨äºå‘å¸ƒæœ‰çŠ¶æ€åº”ç”¨ DaemonSetï¼šåœ¨k8sé›†ç¾¤æ¯ä¸€ä¸ªNodeä¸Šè¿è¡Œä¸€ä¸ªå‰¯æœ¬ï¼Œç”¨äºå‘å¸ƒç›‘æ§æˆ–æ—¥å¿—æ”¶é›†ç±»ç­‰åº”ç”¨ Jobï¼šè¿è¡Œä¸€æ¬¡æ€§ä½œä¸šä»»åŠ¡ CronJobï¼šè¿è¡Œå‘¨æœŸæ€§ä½œä¸šä»»åŠ¡ ä¸‰ã€ç›¸å…³æ“ä½œ3.1 åˆ›å»ºæ–°ç‰ˆæœ¬k8så·²ç»å¯ç”¨å‘½ä»¤åˆ›å»ºï¼Œæˆ‘ä»¬ä½¿ç”¨èµ„æºæ–‡ä»¶åˆ›å»ºï¼Œæ–°å»ºcreate-deployment-nginx-app2.yamlæ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼šapiVersion: apps/v1kind: Deploymentmetadata: name: nginx-app2 labels: app: nginxspec: replicas: 1 selector: matchLabels: app: nginx template: metadata: labels: app: nginx spec: containers: - name: nginxapp image: nginx:latest imagePullPolicy: IfNotPresent ports: - containerPort: 80ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œåˆ›å»ºkubectl apply -f create-deployment-nginx-app2.yaml3.2 æŸ¥çœ‹æŸ¥çœ‹åˆ›å»ºçš„deploymentkubectl get deployment.appsæˆ–è€…æŸ¥çœ‹replicaskubectl get rsæˆ–é€šè¿‡æŸ¥çœ‹podè¯¦æƒ…kubectl get pods -o wide3.3 åˆ é™¤é€šè¿‡å‘½ä»¤åˆ é™¤deploymentæ§åˆ¶å™¨ç±»å‹çš„åº”ç”¨kubectl delete deployment.apps nginx-app2é€šè¿‡èµ„æºæ¸…å•åˆ é™¤ï¼Œåœ¨â€œ3.1â€ä¸­åˆ›å»ºçš„åº”ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤kubectl delete -f create-deployment-nginx-app2.yaml" }, { "title": "k8sé›†ç¾¤ä¸­podçš„ç›¸å…³æ“ä½œ", "url": "/posts/kubernetes_basic_pod.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:08:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°k8sæ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œç¨‹åºçš„ï¼Œk8sé›†ç¾¤ä¸­æœ€å°çš„è°ƒåº¦å•å…ƒä¸ºpodï¼ŒPodæ˜¯å®¹å™¨çš„å°è£…ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨Podæ¥è¿è¡Œåº”ç”¨ç¨‹åºæœ¬æœŸç›®æ ‡ æŸ¥çœ‹Pod åˆ›å»ºPod Podè®¿é—® åˆ é™¤PodäºŒã€æŸ¥çœ‹Podé»˜è®¤æŸ¥è¯¢defaultå‘½åç©ºé—´ä¸­çš„Podkubectl get pod# æˆ–kubectl get podsæŸ¥çœ‹æŒ‡å®šå‘½åç©ºé—´çš„Podkubectl get pods --namespace...", "content": "ä¸€ã€æ¦‚è¿°k8sæ˜¯ä¸èƒ½ç›´æ¥è¿è¡Œç¨‹åºçš„ï¼Œk8sé›†ç¾¤ä¸­æœ€å°çš„è°ƒåº¦å•å…ƒä¸ºpodï¼ŒPodæ˜¯å®¹å™¨çš„å°è£…ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨Podæ¥è¿è¡Œåº”ç”¨ç¨‹åºæœ¬æœŸç›®æ ‡ æŸ¥çœ‹Pod åˆ›å»ºPod Podè®¿é—® åˆ é™¤PodäºŒã€æŸ¥çœ‹Podé»˜è®¤æŸ¥è¯¢defaultå‘½åç©ºé—´ä¸­çš„Podkubectl get pod# æˆ–kubectl get podsæŸ¥çœ‹æŒ‡å®šå‘½åç©ºé—´çš„Podkubectl get pods --namespace default# æˆ–kubectl get pods -n defaultæŸ¥çœ‹æ‰€æœ‰å‘½åç©ºé—´çš„Podkubectl get pods --all-namespacesä¸‰ã€åˆ›å»ºPodç¼–å†™ç”¨äºåˆ›å»ºPodçš„èµ„æºæ¸…å•æ–‡ä»¶create-pod.yamlï¼Œå®šä¹‰å¦‚ä¸‹å†…å®¹apiVersion: v1kind: Podmetadata: name: pod1spec: containers: - name: nginx-pod image: nginx:latest imagePullPolicy: IfNotPresent ports: - name: nginxport containerPort: 80æ‰§è¡ŒapplyæŒ‡ä»¤ï¼Œå°†ä¼šåœ¨é»˜è®¤å‘½åç©ºé—´åˆ›å»ºPodkubectl apply -f create-pod.yamlè¦æŸ¥çœ‹Podåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤kubectl get pods -o wideæœ¬æ¬¡åˆ›å»ºäº†nginxï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨è®¿é—®Podçš„IPè¿›è¡ŒéªŒè¯ã€‚curl http://10.244.1.2å››ã€è®¿é—®Podæ ¹æ®Podåç§°è¿›å…¥åˆ°å¯¹åº”Podä¸­ï¼Œå¦‚ä¸‹å‘½ä»¤# è¿›å…¥bashkubectl exec -it pod1 -- bash# é€€å‡º bashexitäº”ã€åˆ é™¤Podä½¿ç”¨å‘½ä»¤åˆ é™¤Pod# é»˜è®¤åˆ é™¤defaultå‘½åç©ºé—´ä¸‹çš„pod1kubectl delete pods pod1# æˆ–æŒ‡å®šå‘½åç©ºé—´åˆ é™¤kubectl delete pods pod1 -n defaultä½¿ç”¨èµ„æºæ¸…å•æ‰§è¡Œåˆ é™¤kubectl delete -f create-pod.yaml" }, { "title": "k8såç§°ç©ºé—´", "url": "/posts/kubernetes_basic_namespace.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:07:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°æœ¬æ–‡ç›®æ ‡å¦‚ä¸‹ äº†è§£namespaceçš„ä½œç”¨ æŒæ¡namespaceæŸ¥çœ‹æ–¹æ³• æŒæ¡namespaceåˆ›å»ºæ–¹æ³• æŒæ¡namespaceåˆ é™¤æ–¹æ³•å‡è®¾éœ€è¦å‡†å¤‡ä¸¤å¥—k8sé›†ç¾¤ç”¨äºå¼€å‘æµ‹è¯•å’Œé¢„å‘å¸ƒç¯å¢ƒï¼Œä½†æ˜¯ç”±äºé¡¹ç›®ç»„å¯ç”¨ä¸»æœºèµ„æºæœ‰é™ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šä¸»æœºå¯ç”¨ï¼Œä¸èƒ½æ»¡è¶³k8sé›†ç¾¤çš„è¦æ±‚ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨k8sé›†ç¾¤ä¸­çš„namespaceï¼ˆåç§°ç©ºé—´ï¼‰å³å¯å®ç°å¼€å‘æµ‹è¯•å’Œé¢„å‘å¸ƒç¯å¢ƒçš„éš”ç¦»ã€‚äºŒã€æŸ¥çœ‹åç§°ç©ºé—´k...", "content": "ä¸€ã€æ¦‚è¿°æœ¬æ–‡ç›®æ ‡å¦‚ä¸‹ äº†è§£namespaceçš„ä½œç”¨ æŒæ¡namespaceæŸ¥çœ‹æ–¹æ³• æŒæ¡namespaceåˆ›å»ºæ–¹æ³• æŒæ¡namespaceåˆ é™¤æ–¹æ³•å‡è®¾éœ€è¦å‡†å¤‡ä¸¤å¥—k8sé›†ç¾¤ç”¨äºå¼€å‘æµ‹è¯•å’Œé¢„å‘å¸ƒç¯å¢ƒï¼Œä½†æ˜¯ç”±äºé¡¹ç›®ç»„å¯ç”¨ä¸»æœºèµ„æºæœ‰é™ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šä¸»æœºå¯ç”¨ï¼Œä¸èƒ½æ»¡è¶³k8sé›†ç¾¤çš„è¦æ±‚ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨k8sé›†ç¾¤ä¸­çš„namespaceï¼ˆåç§°ç©ºé—´ï¼‰å³å¯å®ç°å¼€å‘æµ‹è¯•å’Œé¢„å‘å¸ƒç¯å¢ƒçš„éš”ç¦»ã€‚äºŒã€æŸ¥çœ‹åç§°ç©ºé—´kubectl get namespace# æˆ–è€…kubectl get nsè¿”å›å†…å®¹å¦‚ä¸‹NAME STATUS AGEdefault Active 14hkube-node-lease Active 14hkube-public Active 14hkube-system Active 14hç³»ç»Ÿé»˜è®¤åç§°ç©ºé—´å¦‚ä¸‹ default: ç”¨æˆ·åˆ›å»ºçš„podé»˜è®¤åœ¨æ­¤åç§°ç©ºé—´ kube-public: æ‰€æœ‰ç”¨æˆ·å‡å¯è®¿é—®ï¼ŒåŒ…æ‹¬æœªè®¤è¯ç”¨æˆ· kube-node-lease: kubernetesé›†ç¾¤èŠ‚ç‚¹ç§Ÿçº¦çŠ¶æ€åœ¨æ­¤ä½¿ç”¨ï¼Œv1.13åŠ å…¥ kube-system: kubernetesé›†ç¾¤æ‰€æœ‰ç»„ä»¶åœ¨æ­¤è¿è¡Œæ ¹æ®åç§°ç©ºé—´æŸ¥çœ‹podkubectl get pods --namespace kube-systemä¸‰ã€åˆ›å»ºåç§°ç©ºé—´é€šè¿‡å‘½ä»¤åˆ›å»ºåç§°ç©ºé—´kubectl create namespace testé€šè¿‡èµ„æºæ¸…å•æ–‡ä»¶åˆ›å»ºåç§°ç©ºé—´touch 01-create-ns.yamlåœ¨æ–‡ä»¶ä¸­å®šä¹‰ä»¥ä¸‹å†…å®¹apiVersion: v1kind: Namespacemetadata: name: test2åº”ç”¨èµ„æºkubectl apply -f 01-create-ns.yamlå››ã€åˆ é™¤åç§°ç©ºé—´é€šè¿‡åç§°åˆ é™¤åç§°ç©ºé—´# åˆ é™¤test1åç§°ç©ºé—´kubectl delete namespace test1é€šè¿‡èµ„æºæ¸…å•æ–‡ä»¶åˆ é™¤ï¼Œå®šä¹‰å†…å®¹å’Œåˆ›å»ºå†…å®¹ä¸€è‡´ï¼Œå¦‚â€œä¸‰â€ä¸­å®šä¹‰äº†åä¸ºtest2çš„namespaceï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œåˆ é™¤kubectl delete -f 01-create-ns.yaml" }, { "title": "k8sèµ„æºæ¸…å•æ–‡ä»¶", "url": "/posts/kubernetes_basic_yaml.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:06:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨k8sä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨yamlæ ¼å¼çš„æ–‡ä»¶æ¥å®šä¹‰ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„Podï¼Œè¿™æ ·çš„yamlæ–‡ä»¶è¢«ç§°ä¸ºèµ„æºæ¸…å•æ–‡ä»¶äºŒã€å¸¸ç”¨å­—æ®µ å­—æ®µå ç±»å‹ è¯´æ˜ version String k8sçš„apiçš„ç‰ˆæœ¬ï¼Œç›®å‰åŸºæœ¬ä¸Šæ˜¯v1ï¼Œå¯ä»¥ä½¿ç”¨kubectl api-versionså‘½ä»¤æŸ¥çœ‹ ...", "content": "ä¸€ã€æ¦‚è¿°åœ¨k8sä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨yamlæ ¼å¼çš„æ–‡ä»¶æ¥å®šä¹‰ç¬¦åˆæˆ‘ä»¬é¢„æœŸçš„Podï¼Œè¿™æ ·çš„yamlæ–‡ä»¶è¢«ç§°ä¸ºèµ„æºæ¸…å•æ–‡ä»¶äºŒã€å¸¸ç”¨å­—æ®µ å­—æ®µå ç±»å‹ è¯´æ˜ version String k8sçš„apiçš„ç‰ˆæœ¬ï¼Œç›®å‰åŸºæœ¬ä¸Šæ˜¯v1ï¼Œå¯ä»¥ä½¿ç”¨kubectl api-versionså‘½ä»¤æŸ¥çœ‹ kind String æŒ‡å®šæ–‡ä»¶å®šä¹‰çš„èµ„æºç±»å‹å’Œè§’è‰²ï¼Œæ¯”å¦‚ï¼špod metadata Object å…ƒæ•°æ®å¯¹è±¡ metadata.name String å…ƒæ•°æ®å¯¹è±¡åç§°ï¼Œç”±æˆ‘ä»¬è‡ªå®šä¹‰ã€‚æ¯”å¦‚æ˜¯èµ„æºç±»å‹æ˜¯podï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥å®šä¹‰podçš„åç§° metadata.namespace String å…ƒæ•°æ®å¯¹è±¡å‘½åç©ºé—´ï¼Œç”±æˆ‘ä»¬è‡ªå®šä¹‰ Spec Object è¯¦ç»†å®šä¹‰å¯¹è±¡ spec.containers[] List Specå¯¹è±¡çš„å®¹å™¨åˆ—è¡¨ spec.containers[$index].name String å®šä¹‰å®¹å™¨çš„åç§° spec.containers[$index].image String å®šä¹‰å®¹å™¨çš„é•œåƒåç§° spec.containers[$index].imagePullPolicy String å®šä¹‰é•œåƒæ‹‰å–ç­–ç•¥ï¼Œæœ‰Alwaysï¼ˆæ¯æ¬¡éƒ½å°è¯•æ‹‰å–æ–°é•œåƒï¼‰ã€Neverï¼ˆä»…ä½¿ç”¨æœ¬åœ°é•œåƒï¼‰ã€Ifnotpresentï¼ˆæœ¬åœ°æœ‰é•œåƒåˆ™ä¸æ‹‰å–æ–°é•œåƒï¼‰ä¸‰ä¸ªå€¼å¯é€‰ spec.containers[$index].command[] List æŒ‡å®šå®¹å™¨å¯åŠ¨å‘½ä»¤ï¼Œå› ä¸ºæ˜¯æ•°ç»„å¯ä»¥æŒ‡å®šå¤šä¸ªï¼Œä¸æŒ‡å®šåˆ™ä½¿ç”¨é•œåƒæ‰“åŒ…æ—¶çš„å¯åŠ¨å‘½ä»¤ spec.containers[$index].args List æŒ‡å®šå®¹å™¨å¯åŠ¨å‘½ä»¤å‚æ•°ï¼Œå› ä¸ºæ˜¯æ•°ç»„å¯ä»¥æŒ‡å®šå¤šä¸ª spec.containers[$index].workDir String æŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½• spec.containers[$index].volumeMounts[] List æŒ‡å®šå®¹å™¨å†…éƒ¨çš„å­˜å‚¨å·é…ç½® spec.containers[$index].volumeMounts[$subIndex].name String æŒ‡å®šå®¹å™¨åŠ è½½çš„å­˜å‚¨å·çš„åç§° spec.containers[$index].volumeMounts[$subIndex].mountPath String æŒ‡å®šå®¹å™¨åŠ è½½çš„å­˜å‚¨å·çš„è·¯å¾„ spec.containers[$index].volumeMounts[$subIndex].readOnly String è®¾ç½®å­˜å‚¨å·çš„è¯»å†™æ¨¡å¼ï¼Œtrueæˆ–è€…falseï¼Œé»˜è®¤ä¸ºè¯»å†™æ¨¡å¼ï¼Œå¯ä»¥ä½¿ç”¨trueä»£è¡¨åªè¯»æ¨¡å¼ spec.containers[$index].ports[] String æŒ‡å®šå®¹å™¨éœ€è¦ç”¨åˆ°çš„ç«¯å£åˆ—è¡¨ spec.containers[$index].ports[$subIndex].name String æŒ‡å®šçš„ç«¯å£åç§° spec.containers[$index].ports[$subIndex].containerPort String æŒ‡å®šå®¹å™¨éœ€è¦ç›‘å¬çš„ç«¯å£å· spec.containers[$index].ports[$subIndex].hostPort String æŒ‡å®šå®¹å™¨æ‰€åœ¨ä¸»æœºéœ€è¦ç›‘å¬çš„ç«¯å£å·ï¼Œé»˜è®¤è·ŸcontainerPortç›¸åŒï¼Œæ³¨æ„ï¼šè®¾ç½®äº†hostPortåŒä¸€å°ä¸»æœºæ— æ³•å¯åŠ¨è¯¥å®¹å™¨çš„ç›¸åŒå‰¯æœ¬ï¼Œå› ä¸ºä¸»æœºçš„ç«¯å£ä¸èƒ½ç›¸åŒï¼Œè¿™æ ·ä¼šå†²çª spec.containers[$index].ports[$subIndex].protocol String æŒ‡å®šç«¯å£åè®®ï¼Œæ”¯æŒTCPå’ŒUDPï¼Œé»˜è®¤å€¼ä¸ºTCP spec.containers[$index].ports[$subIndex].env[] List æŒ‡å®šå®¹å™¨è¿è¡Œå‰éœ€è®¾çš„ç¯å¢ƒå˜é‡åˆ—è¡¨ spec.containers[$index].ports[$subIndex].env[$secSubIndex].name List æŒ‡å®šç¯å¢ƒå˜é‡åç§° spec.containers[$index].ports[$subIndex].env[$secSubIndex].value List æŒ‡å®šç¯å¢ƒå˜é‡å€¼ spec.containers[$index].ports[$subIndex].resources Object æŒ‡å®šèµ„æºé™åˆ¶å’Œèµ„æºè¯·æ±‚çš„å€¼ï¼ˆè¿™é‡Œå¼€å§‹å°±æ˜¯è®¾ç½®èµ„æºçš„ä¸Šé™ï¼‰ spec.containers[$index].ports[$subIndex].resources.limits Object æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶èµ„æºçš„è¿è¡Œä¸Šé™ spec.containers[$index].ports[$subIndex].resources.limits.cpu String æŒ‡å®šCPUé™åˆ¶ï¼Œå•ä½ä¸ºcoreæ•°ï¼Œå°†ç”¨äºdocker run --cpu-shareså‚æ•° spec.containers[$index].ports[$subIndex].resources.limits.memory String æŒ‡å®šMEMå†…å­˜é™åˆ¶ï¼Œå•ä½ä¸ºMiBã€GiB spec.containers[$index].ports[$subIndex].resources.requests Objects æŒ‡å®šå®¹å™¨å¯åŠ¨å’Œè°ƒåº¦æ—¶èµ„æºéœ€æ±‚è®¾ç½® spec.containers[$index].ports[$subIndex].resources.requests.cpu String CPUéœ€æ±‚ä¸ªæ•°ï¼Œå•ä½ä¸ºcore æ•°ï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–æ•°é‡ spec.containers[$index].ports[$subIndex].resources.requests.memory String å†…å­˜éœ€æ±‚ï¼Œå•ä½ä¸ºMiBã€GiBï¼Œå®¹å™¨å¯åŠ¨æ—¶åˆå§‹åŒ–é‡ spec.restartPolicy String å®šä¹‰Podçš„é‡å¯ç­–ç•¥ï¼ŒAlwaysï¼ˆé»˜è®¤ï¼Œä¸€æ—¦ç»ˆæ­¢è¿è¡Œï¼Œåˆ™æ— è®ºå®¹å™¨ä½•æ—¶ç»ˆæ­¢çš„ï¼ŒkubeletæœåŠ¡å°†é‡å¯å®ƒï¼‰ã€OnFailureï¼ˆåªæœ‰Podä»¥éé›¶é€€å‡ºç ç»ˆæ­¢æ—¶ï¼Œkubeletæ‰ä¼šé‡å¯è¯¥å®¹å™¨ï¼Œå¦‚æœå®¹å™¨æ­£å¸¸ç»“æŸé€€å‡ºç ä¸º0ï¼‰ã€Neverï¼šPodç»ˆæ­¢åï¼Œkubeletå°†é€€å‡ºç æŠ¥å‘Šç»™Masterï¼Œä¸ä¼šé‡å¯æœåŠ¡è¯¥Pod spec.imagePullSecrets Object å®šä¹‰Pullé•œåƒæ—¶ä½¿ç”¨secretåç§°ï¼Œä»¥name: secretKeyæ ¼å¼æŒ‡å®š spec.hostNetwork Boolean å®šä¹‰æ˜¯å¦ä½¿ç”¨ä¸»æœºç½‘ç»œæ¨¡å¼ï¼Œé»˜è®¤ä¸º falseã€‚è®¾ç½®trueè¡¨ç¤ºä½¿ç”¨å®¿ä¸»æœºç½‘ç»œï¼Œä¸æ˜¯ç”¨dockerç½‘æ¡¥ï¼ŒåŒæ—¶è®¾ç½®äº†trueå°†æ— æ³•åœ¨åŒä¸€å°å®¿ä¸»æœºä¸Šå¯åŠ¨ç¬¬äºŒä¸ªå‰¯æœ¬ ä¸‰ã€ç¤ºä¾‹3.1 å®šä¹‰ä¸€ä¸ªnamespaceapiVersion: v1kind: Namespacemetadata: name: test3.2 å®šä¹‰ä¸€ä¸ªpodapiVersion: v1kind: Podmetadata: name: pod1spec: containers: - name: nginx-containers image: nginx:latest" }, { "title": "k8sä¸­çš„æ ¸å¿ƒç»„ä»¶", "url": "/posts/kubernetes_basic_compoents.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:05:00 +0800", "snippet": "ä¸€ã€ä¸»æ§åˆ¶èŠ‚ç‚¹(master node)1.1 apiserverç”¨äºæ¥æ”¶å®¢æˆ·ç«¯æ“ä½œk8sçš„æŒ‡ä»¤ã€‚æä¾›äº†REST APIæ¥å£ï¼ŒåŒ…æ‹¬é‰´æƒã€æ•°æ®æ ¡éªŒã€é›†ç¾¤çŠ¶æ€å˜æ›´ç­‰ã€‚è´Ÿè´£å„ä¸ªæ¨¡å—ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œæ‰¿æ‹…é€šä¿¡æ¢çº½åŠŸèƒ½ã€‚ä½œä¸ºèµ„æºé…é¢æ§åˆ¶çš„å…¥å£ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„é›†ç¾¤å®‰å…¨æœºåˆ¶ã€‚1.2 schdulerä¸»è¦æ˜¯è°ƒåº¦podåˆ°é€‚åˆçš„è¿ç®—èŠ‚ç‚¹ä¸Šï¼Œé€šè¿‡é¢„ç®—ç­–ç•¥ï¼ˆpredictï¼‰å’Œä¼˜é€‰ç­–ç•¥ï¼ˆprioritiesï¼‰ç­‰è°ƒåº¦æœ€...", "content": "ä¸€ã€ä¸»æ§åˆ¶èŠ‚ç‚¹(master node)1.1 apiserverç”¨äºæ¥æ”¶å®¢æˆ·ç«¯æ“ä½œk8sçš„æŒ‡ä»¤ã€‚æä¾›äº†REST APIæ¥å£ï¼ŒåŒ…æ‹¬é‰´æƒã€æ•°æ®æ ¡éªŒã€é›†ç¾¤çŠ¶æ€å˜æ›´ç­‰ã€‚è´Ÿè´£å„ä¸ªæ¨¡å—ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œæ‰¿æ‹…é€šä¿¡æ¢çº½åŠŸèƒ½ã€‚ä½œä¸ºèµ„æºé…é¢æ§åˆ¶çš„å…¥å£ï¼ŒåŒæ—¶æä¾›äº†å®Œæ•´çš„é›†ç¾¤å®‰å…¨æœºåˆ¶ã€‚1.2 schdulerä¸»è¦æ˜¯è°ƒåº¦podåˆ°é€‚åˆçš„è¿ç®—èŠ‚ç‚¹ä¸Šï¼Œé€šè¿‡é¢„ç®—ç­–ç•¥ï¼ˆpredictï¼‰å’Œä¼˜é€‰ç­–ç•¥ï¼ˆprioritiesï¼‰ç­‰è°ƒåº¦æœ€åˆé€‚çš„èŠ‚ç‚¹å»è¿è¡Œpodã€‚1.3 controller mangerå‘workerèŠ‚ç‚¹çš„kubeletç»„ä»¶å‘é€æŒ‡ä»¤ã€‚ç”±ä¸€ç»„æ§åˆ¶å™¨ç»„æˆï¼Œé€šè¿‡apiserverç›‘æ§æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼Œå¹¶ç¡®ä¿é›†ç¾¤å¤„äºé¢„æœŸçš„å·¥ä½œçŠ¶æ€ï¼Œå¸¸è§çš„æ§åˆ¶å™¨å¦‚ä¸‹ Node Controller Deployment Controller Service Controller Volume Controller Endpoint Controller Barbage Controller Namespace Controller Job Controller Resurce quta ControlleräºŒã€å·¥ä½œèŠ‚ç‚¹(worker node)2.1 kubenet è´Ÿè´£å‘å®¹å™¨å¼•æ“ï¼ˆæœ¬ç³»åˆ—æ–‡ç« ç‰¹æŒ‡dockerï¼‰å‘é€æŒ‡ä»¤è¿›è¡Œå®¹å™¨è°ƒåº¦ï¼škubeletçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯å®šæ—¶ä»æŸä¸ªåœ°æ–¹è·å–èŠ‚ç‚¹ä¸ŠPodçš„æœŸæœ›çŠ¶æ€ï¼ˆè¿è¡Œçš„å®¹å™¨ã€è¿è¡Œçš„å‰¯æœ¬æ•°ã€ç½‘ç»œé…ç½®ã€å­˜å‚¨é…ç½®ç­‰ï¼‰ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„å®¹å™¨å¼•æ“æ¥å£è¾¾åˆ°è¿™ä¸ªçŠ¶æ€ã€‚ è´Ÿè´£å®šæ—¶æ±‡æŠ¥å½“å‰èŠ‚ç‚¹çš„çŠ¶æ€ç»™ apiserver ï¼Œä»¥ä¾›è°ƒåº¦çš„æ—¶å€™ä½¿ç”¨ã€‚ è´Ÿè´£é•œåƒå’Œå®¹å™¨çš„æ¸…ç†å·¥ä½œï¼Œä¿è¯èŠ‚ç‚¹ä¸Šçš„é•œåƒä¸ä¼šå æ»¡ç£ç›˜ç©ºé—´ï¼Œé€€å‡ºçš„å®¹å™¨ä¸ä¼šå ç”¨å¤ªå¤šèµ„æºã€‚ 2.2 kube-proxyä½œä¸ºserviceèµ„æºçš„è½½ä½“ï¼Œè°ƒåº¦å®¹å™¨çš„ç½‘ç»œï¼Œå»ºç«‹äº†Podç½‘ç»œå’Œé›†ç¾¤ç½‘ç»œçš„å…³ç³»ï¼ˆclusterip -&gt; podipï¼‰ã€‚å¸¸ç”¨çš„ä¸‰ç§æµé‡è°ƒåº¦æ¨¡å¼ï¼šUserspaceï¼ˆå·²åºŸå¼ƒï¼‰ã€Iptablesï¼ˆæ¿’ä¸´åºŸå¼ƒï¼‰ã€Ipvsï¼ˆæ¨èï¼‰ã€‚è´Ÿè´£å»ºç«‹ã€åˆ é™¤ã€æ›´æ–°è°ƒåº¦è§„åˆ™ï¼Œé€šçŸ¥apiserverè‡ªå·±çš„æ›´æ–°ï¼Œæˆ–è€…ä»apiserverè·å–å…¶ä»–kube-proxyçš„è°ƒåº¦è§„åˆ™å˜åŒ–æ¥æ›´æ–°è‡ªå·±çš„è§„åˆ™ã€‚ä¸‰ã€CLIå®¢æˆ·ç«¯3.1 kubectlkubectlæ˜¯ä¸€ä¸ªç”¨äºæ“ä½œkubernetesé›†ç¾¤çš„å‘½ä»¤è¡Œæ¥å£ï¼Œé€šè¿‡åˆ©ç”¨kubectlçš„å„ç§å‘½ä»¤å¯ä»¥å®ç°å„ç§åŠŸèƒ½ã€‚å››ã€æ ¸å¿ƒé™„ä»¶ CNIç½‘ç»œæ’ä»¶: flannel/calico æœåŠ¡å‘ç°æ’ä»¶: coredns æœåŠ¡æš´éœ²æ’ä»¶: traefik GUIç®¡ç†æ’ä»¶: Dashboard" }, { "title": "k8sä¸­çš„æ ¸å¿ƒæ¦‚å¿µ", "url": "/posts/kubernetes_basic_conception.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 20:00:00 +0800", "snippet": " æœ¬æ–‡å°†ä»‹ç»k8sçŸ¥è¯†ä½“ç³»ä¸­ï¼Œæœ€å¸¸è§çš„ä¸“ä¸šåè¯ä»¥åŠç›¸å…³æ¦‚å¿µä¸€ã€PodPodæ˜¯k8sä¸­æœ€å°çš„é€»è¾‘å•å…ƒï¼Œä¹Ÿå«åšk8sçš„åŸå­å•å…ƒã€‚ä¸€ä¸ªPodé‡Œå¯ä»¥è¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œä»–ä»¬å…±äº«UTSå‘½åç©ºé—´ï¼ˆéš”ç¦»Hostnameå’ŒNISåŸŸåï¼‰ã€å…±äº«NETå‘½åç©ºé—´ï¼ˆéš”ç¦»ç½‘ç»œè®¾å¤‡ã€åè®®æ ˆã€ç«¯å£ç­‰ï¼‰ã€å…±äº«IPCå‘½åç©ºé—´ï¼ˆéš”ç¦»è¿›ç¨‹é—´é€šä¿¡ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥æŠŠPodç†è§£æˆè±Œè±†èšï¼Œè€ŒåŒä¸€ä¸ªPodå†…çš„æ¯ä¸ªå®¹å™¨æ˜¯ä¸€é¢—é¢—è±Œè±†ã€‚ä¸€ä¸ªPodå†…è¿è¡Œå¤š...", "content": " æœ¬æ–‡å°†ä»‹ç»k8sçŸ¥è¯†ä½“ç³»ä¸­ï¼Œæœ€å¸¸è§çš„ä¸“ä¸šåè¯ä»¥åŠç›¸å…³æ¦‚å¿µä¸€ã€PodPodæ˜¯k8sä¸­æœ€å°çš„é€»è¾‘å•å…ƒï¼Œä¹Ÿå«åšk8sçš„åŸå­å•å…ƒã€‚ä¸€ä¸ªPodé‡Œå¯ä»¥è¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œä»–ä»¬å…±äº«UTSå‘½åç©ºé—´ï¼ˆéš”ç¦»Hostnameå’ŒNISåŸŸåï¼‰ã€å…±äº«NETå‘½åç©ºé—´ï¼ˆéš”ç¦»ç½‘ç»œè®¾å¤‡ã€åè®®æ ˆã€ç«¯å£ç­‰ï¼‰ã€å…±äº«IPCå‘½åç©ºé—´ï¼ˆéš”ç¦»è¿›ç¨‹é—´é€šä¿¡ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥æŠŠPodç†è§£æˆè±Œè±†èšï¼Œè€ŒåŒä¸€ä¸ªPodå†…çš„æ¯ä¸ªå®¹å™¨æ˜¯ä¸€é¢—é¢—è±Œè±†ã€‚ä¸€ä¸ªPodå†…è¿è¡Œå¤šä¸ªå®¹å™¨ï¼Œåˆå«è¾¹è½¦ï¼ˆSideCarï¼‰æ¨¡å¼ã€‚äºŒã€Podæ§åˆ¶å™¨Podæ§åˆ¶å™¨æ˜¯Podå¯åŠ¨çš„ä¸€ç§æ¨¡æ¿ï¼Œç”¨æ¥ä¿è¯åœ¨k8sé‡Œå¯åŠ¨çš„Podå§‹ç»ˆæŒ‰ç…§äººä»¬çš„é¢„æœŸè¿è¡Œï¼ˆå¦‚å‰¯æœ¬æ•°ã€ç”Ÿå‘½å‘¨æœŸã€å¥åº·çŠ¶æ€æ£€æŸ¥ç­‰ï¼‰ã€‚k8sæä¾›äº†ä¼—å¤šçš„Podæ§åˆ¶å™¨ï¼Œå¸¸ç”¨çš„æ§åˆ¶å™¨æœ‰ä»¥ä¸‹å‡ ç§ï¼š Deployment DaemonSet ReplicaSet StatefulSet Job Cronjobä¸‰ã€Nameâ€“åç§°ç”±äºk8så†…éƒ¨ä½¿ç”¨â€œèµ„æºâ€æ¥å®šä¹‰æ¯ä¸€ç§é€»è¾‘æ¦‚å¿µï¼ˆæˆ–è€…åŠŸèƒ½ï¼‰ï¼Œæ•…æ¯ä¸€ç§â€œèµ„æºâ€éƒ½åº”è¯¥æœ‰è‡ªå·±çš„åç§°ï¼Œâ€œèµ„æºâ€æœ‰apiç‰ˆæœ¬ï¼ˆapiVersionï¼‰ã€ç±»åˆ«ï¼ˆkindï¼‰ã€å…ƒæ•°æ®ï¼ˆmetadataï¼‰ã€å®šä¹‰æ¸…å•ï¼ˆspecï¼‰ã€çŠ¶æ€ï¼ˆstatusï¼‰ç­‰é…ç½®ä¿¡æ¯ï¼Œè€Œâ€œèµ„æºâ€çš„åç§°é€šå¸¸å®šä¹‰åœ¨â€œèµ„æºâ€çš„å…ƒä¿¡æ¯é‡Œã€‚å››ã€Namespaceâ€“åç§°ç©ºé—´éšç€é¡¹ç›®å¢å¤šã€äººå‘˜å¢åŠ ã€é›†ç¾¤è§„æ¨¡æ‰©å¤§ç­‰ï¼Œéœ€è¦ä¸€ç§èƒ½éš”ç¦»å¼€k8så†…éƒ¨å„ç§â€œèµ„æºâ€çš„æ–¹æ³•ï¼Œè¿™å°±æ˜¯åç§°ç©ºé—´ã€‚åç§°ç©ºé—´å¯ä»¥ç†è§£ä¸ºk8så†…éƒ¨çš„è™šæ‹Ÿé›†ç¾¤ç»„ã€‚ä¸åŒçš„åç§°ç©ºé—´å†…çš„â€œèµ„æºâ€ï¼Œåç§°å¯ä»¥ç›¸åŒï¼Œç›¸åŒåç§°ç©ºé—´å†…çš„åŒç§â€œèµ„æºâ€ï¼Œåç§°ä¸èƒ½ç›¸åŒã€‚åˆç†çš„ä½¿ç”¨k8sçš„åç§°ç©ºé—´ï¼Œä½¿å¾—é›†ç¾¤ç®¡ç†å‘˜èƒ½å¤Ÿæ›´å¥½åœ°å¯¹äº¤ä»˜åˆ°k8sé‡Œçš„æœåŠ¡è¿›è¡Œåˆ†ç±»ç®¡ç†å’Œæµè§ˆã€‚æŸ¥è¯¢k8sé‡Œç‰¹å®šâ€œèµ„æºâ€è¦å¸¦ä¸Šç›¸åº”çš„åç§°ç©ºé—´ï¼Œk8sé‡Œé»˜è®¤å­˜åœ¨çš„åç§°ç©ºé—´æœ‰ï¼šdefaultã€kube-systemã€kube-publicã€kube-node-leaseï¼ˆ1.13ç‰ˆæœ¬åŠ å…¥ï¼‰ã€‚äº”ã€Serviceâ€“æœåŠ¡åœ¨k8sé‡Œï¼Œè™½ç„¶æ¯ä¸ªPodéƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ªå•ç‹¬çš„IPåœ°å€ï¼Œä½†è¿™ä¸ªIPåœ°å€ä¼šéšç€Podçš„é”€æ¯è€Œæ¶ˆå¤±ï¼ŒServiceå°±æ˜¯ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸€ä¸ªServiceå¯ä»¥çœ‹ä½œä¸€ç»„æä¾›ç›¸åŒæœåŠ¡çš„Podçš„å¯¹å¤–è®¿é—®æ¥å£ï¼ŒServiceä½œç”¨äºå“ªäº›Podæ˜¯å¯ä»¥é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨æ¥å®šä¹‰ã€‚å…­ã€IngressIngressæ˜¯k8sé›†ç¾¤é‡Œå·¥ä½œåœ¨OSIç½‘ç»œå‚è€ƒæ¨¡å‹ä¸‹ï¼Œç¬¬7å±‚çš„åº”ç”¨å¯¹å¤–æš´éœ²çš„æ¥å£ã€‚Serviceåªèƒ½è¿›è¡ŒL4æµé‡è°ƒåº¦ï¼Œè¡¨ç°å½¢å¼æ˜¯ip+Portã€‚Ingressåˆ™å¯ä»¥è°ƒåº¦ä¸åŒçš„ä¸šåŠ¡åŸŸã€ä¸åŒURLè®¿é—®è·¯å¾„çš„ä¸šåŠ¡æµé‡ã€‚" }, { "title": "ä½¿ç”¨kubeadmå¿«é€Ÿæ­å»ºk8sé›†ç¾¤", "url": "/posts/kubernetes_basic_build-on-virtual-machine.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 19:59:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°1.1 ä½¿ç”¨multipassæ­å»ºè™šæ‹Ÿç¯å¢ƒæˆ‘ä»¬å¯ä»¥ä½¿ç”¨multipassæ¥åˆ›å»ºå¤šå°Ubuntu Serverè™šæ‹Ÿç¯å¢ƒï¼Œä½œä¸ºLinuxé›†ç¾¤çš„ç¯å¢ƒã€‚å¦‚æœä½ ä¸çŸ¥é“multipassè¿™ä¸ªè™šæ‹ŸåŒ–å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« ï¼šhttps://blog.jkdev.cn/index.php/archives/326/ã€‚1.2 ä½¿ç”¨vagtrantæ­å»ºè™šæ‹Ÿç¯å¢ƒé™¤äº†multipassï¼Œæˆ‘ä»¬è¿˜å¯ä»¥...", "content": "ä¸€ã€æ¦‚è¿°1.1 ä½¿ç”¨multipassæ­å»ºè™šæ‹Ÿç¯å¢ƒæˆ‘ä»¬å¯ä»¥ä½¿ç”¨multipassæ¥åˆ›å»ºå¤šå°Ubuntu Serverè™šæ‹Ÿç¯å¢ƒï¼Œä½œä¸ºLinuxé›†ç¾¤çš„ç¯å¢ƒã€‚å¦‚æœä½ ä¸çŸ¥é“multipassè¿™ä¸ªè™šæ‹ŸåŒ–å·¥å…·çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒå¦ä¸€ç¯‡æ–‡ç« ï¼šhttps://blog.jkdev.cn/index.php/archives/326/ã€‚1.2 ä½¿ç”¨vagtrantæ­å»ºè™šæ‹Ÿç¯å¢ƒé™¤äº†multipassï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨vagtrantæ¥åˆ›å»ºLinuxè™šæ‹Ÿç¯å¢ƒï¼Œvagrantçš„åŸºæœ¬æ“ä½œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://blog.jkdev.cn/index.php/archives/335/ã€‚1.3 ä½¿ç”¨VirtualBoxæ­å»ºè™šæ‹Ÿç¯å¢ƒå¦‚æœä½ ä¸æƒ³ç”¨ä»¥ä¸Šçš„ä¸¤æ¬¾å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨VirtualBoxæ¥åˆ›å»ºä½ çš„è™šæ‹Ÿç¯å¢ƒï¼Œä½†ç›´æ¥ä½¿ç”¨VirtualBoxæ“ä½œä¼šæ›´åŠ ç¹æ‚ï¼Œæ‰€ä»¥æ›´æ¨èä½¿ç”¨multipassæˆ–è€…vagrantã€‚1.4 ç›®æ ‡æœ¬æ¬¡æˆ‘ä»¬å°†éƒ¨ç½²ä¸€ä¸ªä¸»ï¼ˆmasterã€ç®¡ç†ã€æ§åˆ¶ï¼‰èŠ‚ç‚¹master1å’Œä¸¤ä¸ªå·¥ä½œï¼ˆworkerï¼‰èŠ‚ç‚¹worker1ã€worker2çš„é›†ç¾¤ã€‚master1ã€worker1ã€worker2æ¯ä¸ªèŠ‚ç‚¹åˆ†é…2ä¸ªcpuã€2Gå†…å­˜ã€10Gç¡¬ç›˜ã€‚è¿™æ˜¯k8sè¦æ±‚çš„æœ€ä½é…ç½®ï¼Œä½†è¿™äº›é…ç½®å®Œå…¨è¶³å¤Ÿæˆ‘ä»¬ç”¨ä»¥å­¦ä¹ ã€‚æˆ‘ä»¬å°†ä½¿ç”¨multipassæ¥æ­å»ºé›†ç¾¤ç¯å¢ƒï¼Œä¸‹æ–‡æ˜¯åœ¨è™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨kubeadmæ­å»ºk8sé›†ç¾¤æ­å»ºè¿‡ç¨‹ï¼Œåœ¨åç»­çš„æ–‡ç« ä¸­ä¹Ÿä¼šå¾ªåºæ¸è¿›åœ°ä»‹ç»k8sã€‚äºŒã€å‡†å¤‡ç¯å¢ƒ2.1 åˆ›å»ºUbuntu18.04è™šæ‹Ÿæœºåœ¨æ’°å†™æ­¤æ–‡çš„æ—¶å€™ï¼Œubuntu18.04æ­£å¤„äºå…¶ç¨³å®šçš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œæœ¬æ¬¡æˆ‘ä»¬é€‰æ‹©ubuntu18.04ä½œä¸ºç¤ºä¾‹ã€‚åˆ†åˆ«åˆ›å»º2æ ¸cpuã€10Gç¡¬ç›˜ã€2Gå†…å­˜ï¼Œåä¸ºmaster1ã€worker1ã€worker2ä¸‰å°è™šæ‹Ÿæœºï¼Œå¦‚ä¸‹å‘½ä»¤multipass launch -c 2 -d 10G -m 2G -n master1 18.04multipass launch -c 2 -d 10G -m 2G -n worker1 18.04multipass launch -c 2 -d 10G -m 2G -n worker2 18.04ä½¿ç”¨multipass liståˆ—å‡ºå·²åˆ›å»ºçš„è™šæ‹Ÿæœºåˆ—è¡¨ï¼Œå¦‚ä¸‹pan@pandeMacBook-Pro ~ % multipass listName State IPv4 Imagemaster1 Running 192.168.64.4 Ubuntu 18.04 LTSworker1 Running 192.168.64.5 Ubuntu 18.04 LTSworker2 Running 192.168.64.6 Ubuntu 18.04 LTSåˆ›å»ºè™šæ‹Ÿæœºä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è®°ä½IPä¸è™šæ‹Ÿæœºçš„å¯¹åº”å…³ç³»ï¼Œå†å¯¹è™šæ‹Ÿæœºè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä»¥ä¸‹2.2ã€2.3çš„æ“ä½œè¿‡ç¨‹éœ€è¦åœ¨æ‰€æœ‰ä¸»æœºä¸Šè¿›è¡Œã€‚2.2 ä¿®æ”¹rootç”¨æˆ·å¯†ç å› ä¸ºåé¢çš„æ“ä½œéƒ½æ˜¯ä½¿ç”¨rootç”¨æˆ·è¿›è¡Œï¼Œä¸‹é¢æˆ‘ä»¬å…ˆä¿®æ”¹æ¯ä¸€å°ä¸»æœºçš„rootç”¨æˆ·å¯†ç ï¼Œä»¥master1ä¸ºä¾‹ï¼Œå¦‚ä¸‹æ“ä½œå‘½ä»¤# è¿›å…¥è™šæ‹Ÿæœºmultipass bash master1# ä¿®æ”¹rootå¯†ç sudo passwd root# ä¿®æ”¹å¯†ç ä¹‹åï¼Œä½¿ç”¨suå‘½ä»¤åˆ‡æ¢rootç”¨æˆ·su2.3 å…³é—­é˜²ç«å¢™å’Œiptablesæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œé˜²ç«å¢™å’Œiptableså¯èƒ½ä¼šå½±å“åˆ°k8sé›†ç¾¤ï¼Œæ‰€ä»¥æˆ‘ä»¬éƒ½è¦å…³é—­æ‰ï¼Œå¦‚ä¸‹å‘½ä»¤# å…³é—­é˜²ç«å¢™ufw disable# å…³é—­iptablesiptables -P INPUT ACCEPTiptables -P FORWARD ACCEPTiptables -P OUTPUT ACCEPTiptables -FäºŒã€å®‰è£…dockerä¸kubeadmä»¥ä¸‹3.1ã€3.2ã€3.3çš„æ“ä½œè¿‡ç¨‹éœ€è¦åœ¨æ‰€æœ‰ä¸»æœºä¸Šè¿›è¡Œã€‚3.1 å®‰è£…ä¸é…ç½®dockerå®‰è£…docker# å®‰è£…é˜¿é‡Œäº‘dockeré•œåƒæœåŠ¡çš„GPGè¯ä¹¦curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add -# å†™å…¥é˜¿é‡Œäº‘dockeré•œåƒæœåŠ¡è½¯ä»¶æºadd-apt-repository \"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs) stable\"# æ›´æ–°è½¯ä»¶åº“apt-get update# æŸ¥çœ‹å¯ä»¥å®‰è£…çš„docke-ceç‰ˆæœ¬apt-cache madison docker-ce# å®‰è£…dockerapt-get -y install docker-ce=5:20.10.17~3-0~debian-bullseye# å›ºå®šdocker-ceç‰ˆæœ¬apt-mark hold docker-ceæ¯ä¸ªäººéƒ½å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘åˆ›å»ºè‡ªå·±çš„é•œåƒåŠ é€Ÿä»“åº“ï¼Œæ¯”å¦‚https://g6ogy192.mirror.aliyuncs.comå°±æ˜¯æˆ‘çš„ä¸ªäººé•œåƒåŠ é€Ÿåœ°å€ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼Œè®¾ç½®é•œåƒä»“åº“åœ°å€å¦‚ä¸‹å‘½ä»¤# åˆ›å»ºé…ç½®ç›®å½•mkdir -p /etc/docker# å†™å…¥é…ç½®æ–‡ä»¶tee /etc/docker/daemon.json &lt;&lt;-'EOF'{ \"registry-mirrors\": [\"https://g6ogy192.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"] }EOF# é‡æ–°åŠ è½½æœåŠ¡çš„é…ç½®æ–‡ä»¶systemctl daemon-reload# é‡å¯dockeræœåŠ¡systemctl restart docker3.2 å®‰è£…kubeadmã€kubeletã€kubectl# å®‰è£…é˜¿é‡Œäº‘k8sé•œåƒæœåŠ¡çš„GPGè¯ä¹¦curl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add -# æ·»åŠ é˜¿é‡Œäº‘k8sé•œåƒæºcat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/kubernetes.listdeb https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial mainEOF# æ›´æ–°è½¯ä»¶åº“apt-get update# å®‰è£…ç¨‹åºapt-get install -y kubelet=1.18.0-00 kubeadm=1.18.0-00 kubectl=1.18.0-00# å›ºå®šç‰ˆæœ¬apt-mark hold kubelet kubeadm kubectl éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå®‰è£…çš„dockerç‰ˆæœ¬è¦å’Œk8sç‰ˆæœ¬åŒ¹é…ï¼Œå¦åˆ™k8så¯èƒ½å‡ºç°æ— æ³•é©±åŠ¨dockerçš„æƒ…å†µï¼Œä»¥ä¸Šå®‰è£…çš„docker19.03å’Œk8s1.18.0æ˜¯å­˜åœ¨å¯¹åº”å…³ç³»çš„ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥é˜…k8så®˜æ–¹æ–‡æ¡£çš„æ–¹å¼æŸ¥çœ‹æ›´å¤šçš„å¯¹åº”å…³ç³»ã€‚3.3 é›†ç¾¤é•œåƒå‡†å¤‡ä½¿ç”¨kubeadm config images listå‘½ä»¤æŸ¥çœ‹å½“å‰é›†ç¾¤åŸºç¡€æœåŠ¡æ‰€éœ€è¦çš„é•œåƒï¼Œé•œåƒç‰ˆæœ¬ä¼šæ ¹æ®å½“å‰çš„ç³»ç»Ÿç¯å¢ƒï¼ˆå½“å‰å®‰è£…kubeadmçš„ç‰ˆæœ¬ï¼‰è€Œå®šï¼Œè¿”å›å¦‚ä¸‹å†…å®¹k8s.gcr.io/kube-apiserver:v1.18.20k8s.gcr.io/kube-controller-manager:v1.18.20k8s.gcr.io/kube-scheduler:v1.18.20k8s.gcr.io/kube-proxy:v1.18.20k8s.gcr.io/pause:3.2k8s.gcr.io/etcd:3.4.3-0k8s.gcr.io/coredns:1.6.7ä½†æ˜¯ç”±äºå›½å†…æ­£å¸¸è®¿é—®ä¸åˆ°k8s.cgr.ioï¼Œå¯ä»¥æ›¿æ¢é˜¿é‡Œäº‘é•œåƒåœ°å€ï¼šregistry.aliyuncs.com/google_containersï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤docker pull registry.aliyuncs.com/google_containers/kube-apiserver:v1.18.20docker pull registry.aliyuncs.com/google_containers/kube-controller-manager:v1.18.20docker pull registry.aliyuncs.com/google_containers/kube-scheduler:v1.18.20docker pull registry.aliyuncs.com/google_containers/kube-proxy:v1.18.20docker pull registry.aliyuncs.com/google_containers/pause:3.2docker pull registry.aliyuncs.com/google_containers/etcd:3.4.3-0docker pull registry.aliyuncs.com/google_containers/coredns:1.6.7æ¥ä¸‹æ¥ç»™é•œåƒæ‰“æ ‡ç­¾ï¼Œå¾—åˆ°kubeadméœ€è¦çš„é•œåƒdocker tag registry.aliyuncs.com/google_containers/kube-apiserver:v1.18.20 k8s.gcr.io/kube-apiserver:v1.18.20docker tag registry.aliyuncs.com/google_containers/kube-controller-manager:v1.18.20 k8s.gcr.io/kube-controller-manager:v1.18.20docker tag registry.aliyuncs.com/google_containers/kube-scheduler:v1.18.20 k8s.gcr.io/kube-scheduler:v1.18.20docker tag registry.aliyuncs.com/google_containers/kube-proxy:v1.18.20 k8s.gcr.io/kube-proxy:v1.18.20docker tag registry.aliyuncs.com/google_containers/pause:3.2 k8s.gcr.io/pause:3.2docker tag registry.aliyuncs.com/google_containers/etcd:3.4.3-0 k8s.gcr.io/etcd:3.4.3-0docker tag registry.aliyuncs.com/google_containers/coredns:1.6.7 k8s.gcr.io/coredns:1.6.7å†åˆ é™¤æ‰ä»é˜¿é‡Œäº‘ä¸‹è½½çš„é•œåƒdocker rmi registry.aliyuncs.com/google_containers/kube-apiserver:v1.18.20docker rmi registry.aliyuncs.com/google_containers/kube-controller-manager:v1.18.20docker rmi registry.aliyuncs.com/google_containers/kube-scheduler:v1.18.20docker rmi registry.aliyuncs.com/google_containers/kube-proxy:v1.18.20docker rmi registry.aliyuncs.com/google_containers/pause:3.2docker rmi registry.aliyuncs.com/google_containers/etcd:3.4.3-0docker rmi registry.aliyuncs.com/google_containers/coredns:1.6.7ä¸‰ã€k8sé›†ç¾¤åˆå§‹åŒ–3.1 åˆå§‹åŒ–masterèŠ‚ç‚¹åœ¨master1èŠ‚ç‚¹ä¸Šæ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤kubeadm init --apiserver-advertise-address=192.168.64.4 --service-cidr=10.96.0.0/12 --pod-network-cidr=10.244.0.0/16 --ignore-preflight-errors=Swapå‚æ•°è¯´æ˜ --apiserver-advertise-addressï¼šæŒ‡å®šapiserverçš„æœåŠ¡IPï¼Œæ­¤å¤„å¡«å†™master1çš„IPåœ°å€ï¼Œå¦‚æœç³»ç»ŸåŒ…å«å¤šä¸ªIPï¼Œå¿…é¡»é€‰æ‹©å¤–ç½‘IPï¼ˆèƒ½ä¸å…¶ä»–èŠ‚ç‚¹è¿›è¡Œç½‘ç»œé€šä¿¡çš„IPï¼‰ --service-cidrï¼šk8sä¸­serviceç½‘ç»œä½¿ç”¨çš„ç½‘æ®µ --pod-network-cidrï¼šk8sä¸­podç½‘ç»œä½¿ç”¨çš„ç½‘æ®µ --ignore-preflight-errorsï¼šå¿½ç•¥swapæŠ¥é”™åˆå§‹åŒ–ç»“æœå¦‚ä¸‹Your Kubernetes control-plane has initialized successfully!To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/configYou should now deploy a pod network to the cluster.Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/Then you can join any number of worker nodes by running the following on each as root:kubeadm join 192.168.64.4:6443 --token wkgukj.up6d3a8rng4ytyl0 \\ --discovery-token-ca-cert-hash sha256:d36346a3820781efd88ae3796a58e2fa139f411f9ddc9c1dc7c9c2add8da5cfbå¦‚æœå‡ºç°ç±»ä¼¼ä»¥ä¸Šçš„æç¤ºä¿¡æ¯ï¼Œä»£è¡¨masterèŠ‚ç‚¹åˆå§‹åŒ–æˆåŠŸã€‚ä»¥ä¸Šä¿¡æ¯æç¤ºæˆ‘ä»¬è¦å®Œæˆä¸‰ä¸ªæ“ä½œï¼Œå¹¶ç»™å‡ºäº†ç›¸å…³æç¤ºï¼šä¸€æ˜¯æ‹·è´é…ç½®æ–‡ä»¶ã€äºŒæ˜¯éƒ¨ç½²podçš„ç½‘ç»œæ’ä»¶ã€ä¸‰æ˜¯å°†å·¥ä½œèŠ‚ç‚¹åŠ å…¥åˆ°é›†ç¾¤ä¸­ã€‚3.2 æ‹·è´é…ç½®æ–‡ä»¶æ ¹æ®åˆå§‹åŒ–ç»“æœæç¤ºï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ‹·è´k8sçš„ç›¸å…³é…ç½®æ–‡ä»¶åˆ°ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œæ‰èƒ½ä½¿master1ä¸Šå½“å‰ç™»å½•çš„ç”¨æˆ·æ­£å¸¸æ“ä½œé›†ç¾¤# åˆ›å»ºé…ç½®ç”¨æˆ·çš„k8sæ–‡ä»¶ç›®å½•mkdir -p $HOME/.kube# æ‹·è´é…ç½®å’Œä¿®æ”¹æ‰€æœ‰è€…ï¼Œæˆ‘ä»¬æœ¬èº«ä½¿ç”¨rootç”¨æˆ·æ“ä½œï¼Œä¸éœ€è¦åŠ sudoå‰ç¼€cp -i /etc/kubernetes/admin.conf $HOME/.kube/configchown $(id -u):$(id -g) $HOME/.kube/config3.3 é…ç½®é›†ç¾¤ç½‘ç»œåœ¨æ‹·è´å¥½k8sçš„é…ç½®æ–‡ä»¶åˆ°ç”¨æˆ·å®¶ç›®å½•ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ç½‘ç»œæ’ä»¶ã€‚æœ¬æ¬¡æˆ‘ä»¬ä½¿ç”¨flannelä½œä¸ºé›†ç¾¤çš„ç½‘ç»œæ’ä»¶ï¼Œå°†flannelé…ç½®æ–‡ä»¶ä»githubä¸‹è½½ä¿å­˜åˆ°master1ï¼Œæ–‡ä»¶åœ°å€ä¸ºï¼šhttps://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.ymlï¼Œåœ¨master1ä¸Šå°†æ–‡ä»¶å‘½åä¸ºkube-flannel.ymlã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ï¼ˆè™šæ‹Ÿï¼‰ä¸»æœºé‡Œå­˜åœ¨å¤šä¸ªIPï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šæœ‰æ•ˆIPçš„ç½‘å¡ï¼ˆå¦‚æˆ‘ä»¬åœ¨vagranté‡Œåˆ›å»ºçš„è™šæ‹Ÿæœºï¼Œç¬¬äºŒä¸ªç½‘å¡æ‰æ˜¯æœ‰æ•ˆIPï¼Œéœ€è¦æŒ‡å®šæœ‰æ•ˆIPçš„ç½‘å¡ï¼‰ã€‚ä¿®æ”¹flannelèµ„æºæ¸…å•æ–‡ä»¶ï¼Œåœ¨- --kube-subnet-mgråé¢åŠ ä¸€æ¡å‚æ•°é…ç½®ï¼š- --iface=ç½‘å¡åï¼Œå¦‚ä¸‹# ...containers: - name: kube-flannel #image: flannelcni/flannel:v0.16.3 for ppc64le and mips64le (dockerhub limitations may apply) image: rancher/mirrored-flannelcni-flannel:v0.16.3 command: - /opt/bin/flanneld args: - --ip-masq - --kube-subnet-mgr - --iface=enp0s8# ...åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºk8sç½‘ç»œæ’ä»¶kubectl apply -f kube-flannel.ymlå¦‚çœ‹åˆ°åŒ…å«createdçš„å¦‚ä¸‹ç±»ä¼¼ä¿¡æ¯ï¼Œè¯æ˜ç½‘ç»œæ’ä»¶å®‰è£…æˆåŠŸnamespace/kube-flannel createdclusterrole.rbac.authorization.k8s.io/flannel createdclusterrolebinding.rbac.authorization.k8s.io/flannel createdserviceaccount/flannel createdconfigmap/kube-flannel-cfg createddaemonset.apps/kube-flannel-ds created3.4 åˆå§‹åŒ–é›†ç¾¤å·¥ä½œèŠ‚ç‚¹åˆå§‹åŒ–é›†ç¾¤ç®¡ç†èŠ‚ç‚¹master1ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°†å·¥ä½œèŠ‚ç‚¹worker1å’Œwroker2åŠ å…¥åˆ°é›†ç¾¤ä¸­ã€‚å°†å·¥ä½œèŠ‚ç‚¹çš„åˆå§‹åŒ–å‘½ä»¤æ‹·è´åˆ°worker1å’Œworker2å»æ‰§è¡Œï¼Œä½¿é›†ç¾¤çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆworker1ã€worker2ï¼‰å’Œç®¡ç†èŠ‚ç‚¹ï¼ˆmaster1ï¼‰å…³è”èµ·æ¥ï¼Œå¦‚ä¸‹å‘½ä»¤kubeadm join 192.168.64.4:6443 --token wkgukj.up6d3a8rng4ytyl0 \\ --discovery-token-ca-cert-hash sha256:d36346a3820781efd88ae3796a58e2fa139f411f9ddc9c1dc7c9c2add8da5cfbåœ¨å·¥ä½œèŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬åœ¨ç®¡ç†èŠ‚ç‚¹master1ä½¿ç”¨kubectl get pods --all-namespacesæŸ¥çœ‹ç»“æœï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼å¦‚ä¸‹ä¿¡æ¯root@master1:/home/ubuntu# kubectl get pods --all-namespacesNAMESPACE NAME READY STATUS RESTARTS AGEkube-system coredns-66bff467f8-pw9br 1/1 Running 0 13mkube-system coredns-66bff467f8-wsj45 1/1 Running 0 13mkube-system etcd-master1 1/1 Running 0 14mkube-system kube-apiserver-master1 1/1 Running 0 14mkube-system kube-controller-manager-master1 1/1 Running 0 14mkube-system kube-flannel-ds-c4jnh 1/1 Running 0 3m39skube-system kube-flannel-ds-rg58c 1/1 Running 0 3m14skube-system kube-flannel-ds-sw85v 1/1 Running 0 3m15skube-system kube-proxy-ddk88 1/1 Running 0 3m15skube-system kube-proxy-dt825 1/1 Running 0 13mkube-system kube-proxy-jgm4h 1/1 Running 0 3m14skube-system kube-scheduler-master1 1/1 Running 0 14må¦‚æœéœ€è¦æŸ¥çœ‹æ›´å¤šçš„ä¿¡æ¯ï¼ˆå¦‚æ‰€è¿è¡Œçš„å®¿ä¸»æœºï¼‰ï¼Œåªéœ€åœ¨åŸå‘½ä»¤ä¸­è¿½åŠ -o wideå‚æ•°å³å¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ çš„åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„æ‰€æœ‰podå¹¶ä¸æ˜¯å¤„äºRunningçŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯æ­£åœ¨ä»ç½‘ç»œä¸Šä¸‹è½½èµ„æºï¼Œè¿˜æ²¡æœ‰å®Œå…¨å¯åŠ¨æœåŠ¡ï¼Œä½ éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ä½ åœ¨å®‰è£…é›†ç¾¤çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¥½å¤„äºä¸€ä¸ªä¼˜è´¨çš„ç½‘ç»œç¯å¢ƒã€‚å¦‚æœä½ ç”µè„‘é…ç½®å…è®¸ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸Šæ–‡è¯´æ˜çš„æ“ä½œæ­¥éª¤ï¼Œæ·»åŠ æ›´å¤šçš„å·¥ä½œèŠ‚ç‚¹ã€‚3.5 é‡ç½®k8sé›†ç¾¤å¦‚æœä½ åœ¨æ­å»ºè¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œå¦‚å› ä¸ºç½‘ç»œåŸå› å®‰è£…å¤±è´¥ç­‰ï¼Œæˆ–è€…å› ä¸ºå…¶ä»–åŸå› æƒ³é‡ç½®k8sé›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹çš„æ“ä½œæ­¥éª¤# é©±ç¦»å·¥ä½œèŠ‚ç‚¹çš„podkubectl drain worker1 --delete-local-data --force --ignore-daemonsetskubectl drain worker2 --delete-local-data --force --ignore-daemonsets# åˆ é™¤å·¥ä½œèŠ‚ç‚¹kubectl delete node worker1kubectl delete node worker2# é‡ç½®é›†ç¾¤kubeadm resetå››ã€æ€»ç»“ä»¥ä¸Šæ˜¯ä½¿ç”¨kubeadmå¿«é€Ÿæ­å»ºk8sé›†ç¾¤çš„å®Œæ•´è¯´æ˜ï¼Œæˆ–è®¸ä½ çš„å®‰è£…ä¼šå¤±è´¥ã€‚åŸå› å¯èƒ½æ˜¯ä½ çš„è™šæ‹Ÿç¯å¢ƒé—®é¢˜ã€ä¹Ÿå¯èƒ½å› ä¸ºç½‘ç»œåŸå› ï¼Œæˆ–è€…æ˜¯ä½ æ“ä½œé”™è¯¯ã€‚å¦‚æœå‡ºç°å¤±è´¥ï¼Œä½ éœ€è¦æ ¹æ®ä½ çš„æ“ä½œæ­¥éª¤è®¤çœŸåˆ†æå¹¶é‡è¯•ã€‚ ä½œè€…wxè®¢é˜…å·ï¼šæå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½" }, { "title": "kubernetesçŸ¥è¯†æ¦‚è¿°", "url": "/posts/kubernetes_declaration.html", "categories": "kubernetes", "tags": "", "date": "2023-02-01 19:58:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿° åšå®¢ï¼šhttps://jiker.dev å…¬ä¼—å·ï¼šæå®¢å¼€å‘è€…é˜…è¯»å¯¹è±¡ï¼šåç«¯å·¥ç¨‹å¸ˆã€è¿ç»´å·¥ç¨‹å¸ˆã€Linuxçˆ±å¥½è€…ã€k8sçˆ±å¥½è€…äºŒã€ä»€ä¹ˆæ˜¯k8sï¼Ÿk8sæœ¬èº«æ¶‰åŠåˆ°å¤§é‡çš„æŠ€æœ¯çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€ç½‘ç»œã€å­˜å‚¨ã€è°ƒåº¦ã€åˆ†å¸ƒå¼ç­‰æ–¹é¢çš„çŸ¥è¯†ï¼Œè¿™ä¹Ÿæ­£æ˜¯æŠ€æœ¯äººå‘˜å­¦ä¹ ä¸åŠªåŠ›çš„æ–¹å‘ã€‚åœ¨è¿™ç³»åˆ—çš„æ–‡ç« ï¼Œæˆ‘ä»¬ä»äº†è§£Kubernetesçš„æœ€åŸºæœ¬çš„æ¦‚å¿µå¼€å§‹ï¼Œå…ˆä½¿ç”¨å®˜æ–¹çš„kubeadmå·¥å…·æ­å»ºä¸€ä¸ªç®€å•çš„Kuber...", "content": "ä¸€ã€æ¦‚è¿° åšå®¢ï¼šhttps://jiker.dev å…¬ä¼—å·ï¼šæå®¢å¼€å‘è€…é˜…è¯»å¯¹è±¡ï¼šåç«¯å·¥ç¨‹å¸ˆã€è¿ç»´å·¥ç¨‹å¸ˆã€Linuxçˆ±å¥½è€…ã€k8sçˆ±å¥½è€…äºŒã€ä»€ä¹ˆæ˜¯k8sï¼Ÿk8sæœ¬èº«æ¶‰åŠåˆ°å¤§é‡çš„æŠ€æœ¯çŸ¥è¯†ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿã€ç½‘ç»œã€å­˜å‚¨ã€è°ƒåº¦ã€åˆ†å¸ƒå¼ç­‰æ–¹é¢çš„çŸ¥è¯†ï¼Œè¿™ä¹Ÿæ­£æ˜¯æŠ€æœ¯äººå‘˜å­¦ä¹ ä¸åŠªåŠ›çš„æ–¹å‘ã€‚åœ¨è¿™ç³»åˆ—çš„æ–‡ç« ï¼Œæˆ‘ä»¬ä»äº†è§£Kubernetesçš„æœ€åŸºæœ¬çš„æ¦‚å¿µå¼€å§‹ï¼Œå…ˆä½¿ç”¨å®˜æ–¹çš„kubeadmå·¥å…·æ­å»ºä¸€ä¸ªç®€å•çš„Kubernetesé›†ç¾¤ï¼Œå†å¾ªåºæ¸è¿›åœ°è¿›å…¥k8sçš„ç³»ç»Ÿå­¦ä¹ ã€‚k8sæ˜¯Kubernetesçš„ç®€ç§°ï¼Œæ¥è‡ªGoogleï¼Œæ˜¯ç”¨äºè‡ªåŠ¨éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†â€œå®¹å™¨åŒ–åº”ç”¨ç¨‹åºâ€çš„å¼€æºç³»ç»Ÿã€‚ç®€å•åœ°è¯´å°±æ˜¯ï¼šk8sæ˜¯ä¸€å¥—æœåŠ¡å™¨é›†ç¾¤ç®¡ç†ç»„ä»¶ï¼Œk8sç°åœ¨æ™®éç”¨äºç®¡ç†é›†ç¾¤èŠ‚ç‚¹ä¸Šçš„å®¹å™¨ã€‚åœ¨å­¦ä¹ k8sä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å…·å¤‡ä¸€å®šçš„å®¹å™¨çŸ¥è¯†åŸºç¡€ï¼Œåœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ç‰¹æŒ‡dockerã€‚ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†ä¸€ä¸ªKubernetesçš„ä¸€ä¸ªå…¸å‹çš„æ¶æ„ï¼Œä½ å¯èƒ½çœ‹ä¸æ‡‚ï¼Œä½†å®Œå…¨æ²¡å…³ç³»ï¼Œæˆ‘ä»¬è¿™é‡Œåªæ˜¯ä¸ªäº†è§£ï¼Œåé¢å†ä»‹ç»å…¶ä¸­åŒ…å«çš„æŠ€æœ¯ç‚¹ã€‚ä¸‰ã€k8sæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ è‡ªæˆ‘ä¿®å¤ å¼¹æ€§ä¼¸ç¼©ï¼šå®æ—¶æ ¹æ®æœåŠ¡å™¨å¹¶å‘æƒ…å†µï¼Œå®ç°è‡ªåŠ¨å¢åŠ æˆ–ç¼©å‡å®¹å™¨æ•°é‡ è‡ªåŠ¨éƒ¨ç½² å›æ»š æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ æ–‡ä»¶å…±äº« â€¦â€¦ä¸‰ã€ç« èŠ‚3.1 ç¬¬ä¸€ç« ï¼šk8såŸºç¡€æ¦‚å¿µä¸å­¦ä¹ ç¯å¢ƒå¿«é€Ÿæ­å»º 01.åœ¨è™šæ‹Ÿæœºä¸­ä½¿ç”¨kubeadmå¿«é€Ÿæ­å»ºk8sé›†ç¾¤ 02.k8sä¸­çš„æ ¸å¿ƒæ¦‚å¿µ 03.k8sä¸­çš„æ ¸å¿ƒç»„ä»¶ 04.k8sèµ„æºæ¸…å•æ–‡ä»¶ 05.k8såç§°ç©ºé—´ 06.podçš„ç›¸å…³æ“ä½œ 07.Controller 08.Service 09.Ingress 10.å­˜å‚¨ 11.IPç½‘æ®µè§„åˆ’å»ºè®®3.2 ç¬¬äºŒç« ï¼šåœ¨centos7ä¸­ä½¿ç”¨äºŒè¿›åˆ¶åŒ…æ­å»ºk8s 1.15.2 01.k8sè¿›é˜¶çŸ¥è¯†æ¦‚è¿° 02.k8säºŒè¿›åˆ¶å®‰è£…ç¯å¢ƒå‡†å¤‡ 03.è¯ä¹¦ç­¾å‘ç¯å¢ƒå‡†å¤‡ 04.é€šè¿‡äºŒè¿›åˆ¶å®‰è£…åŒ…å®‰è£…docker 05.å®‰è£…harhoræœåŠ¡ 06.å®‰è£…etcdæœåŠ¡ 07.å®‰è£…apiserver 08.å®‰è£…L4åå‘ä»£ç†æœåŠ¡ 09.å®‰è£…æ§åˆ¶èŠ‚ç‚¹çš„å…¶ä»–ç»„ä»¶ 10.å®‰è£…kubectl 11.å®‰è£…kube-proxy 12.å›é¡¾cfsslè¯ä¹¦å·¥å…· 13.å£°æ˜å¼èµ„æºç®¡ç†æ–¹æ³• 14.é™ˆè¿°å¼èµ„æºç®¡ç†æ–¹æ³• 15.flannelç½‘ç»œæ’ä»¶ 16.flannelæ¨¡å‹ä»‹ç» 17.flannelä¼˜åŒ– 18.ä½¿ç”¨corednså®ç°æœåŠ¡å‘ç° 19.æœåŠ¡æš´éœ²ä¹‹nodePortå‹service 20.æœåŠ¡æš´éœ²ä¹‹Ingress3.3 ç¬¬ä¸‰ç« ï¼šåœ¨debian 11ä¸­ä½¿ç”¨äºŒè¿›åˆ¶åŒ…å®‰è£…k8s 1.24.1åºè¨€-æ­å»ºk8sâ€œå¾®å‹é›†ç¾¤â€çš„å®ç°æ–¹æ¡ˆ 01.k8säºŒè¿›åˆ¶å®‰è£…ç¯å¢ƒå‡†å¤‡ 02.å®‰è£…containerdä½œä¸ºruntime 03.ç­¾å‘SSLè¯ä¹¦ 04.å®‰è£…etcdæœåŠ¡ 05.å®‰è£…apiserver 06.æ­å»ºL4åå‘ä»£ç†æœåŠ¡ 07.å®‰è£…controller-managerå’Œscheduler 08.å®‰è£…kubectl 09.å®‰è£…proxy 10.å®‰è£…calicoå’ŒcoreDNS 11.å®‰è£…traefik-ingress 12.åœ¨k8sç¯å¢ƒéƒ¨ç½²åº”ç”¨ 13.æ‰©å±•:ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…åŒ…å®‰è£…docker 14.æ‰©å±•:å®‰è£…harbor3.4 ç¬¬å››ç« ï¼šk8sçš„èµ„æº 01.åºè¨€" }, { "title": "gitç‰ˆæœ¬åº“çš„ä»£ç å›é€€æŠ€å·§", "url": "/posts/git_rollback.html", "categories": "git", "tags": "", "date": "2023-01-31 21:58:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬å››ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»ä¹‹å‰çš„å†…å®¹gitçš„ç®€ä»‹ä¸åŸºæœ¬æ“ä½œæ–¹æ³•é€šä¿—æ˜“æ‡‚åœ°å­¦ä¹ gitä¸­æœ€å¸¸ç”¨çš„æŒ‡ä»¤æ€æ ·ä½¿ç”¨gitè¿›è¡ŒååŒå¼€å‘ï¼Ÿgitèƒ½å¸®åŠ©æˆ‘ä»¬é«˜æ•ˆåœ°è¿›è¡Œä»£ç æ‰˜ç®¡ï¼Œåœ¨ä½¿ç”¨gitè¿›è¡Œä»£ç æ‰˜ç®¡çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å›é€€ç‰ˆæœ¬ã€‚æœ¬æ–‡æˆ‘ä»¬å°†ä¸€èµ·æ¥ç ”ç©¶ä»£ç å›é€€çš„æ–¹æ³•ã€‚åœ¨gitä¸­ï¼ŒHEADæŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬å½“å‰åˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤ã€‚æ¯”å¦‚æˆ‘ä»¬æäº¤è¿‡ä¸‰ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ­¤æ—¶HEADæŒ‡é’ˆä½ç½®å¦‚ä¸‹å›¾g...", "content": "ä¸€ã€æ¦‚è¿°æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬å››ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»ä¹‹å‰çš„å†…å®¹gitçš„ç®€ä»‹ä¸åŸºæœ¬æ“ä½œæ–¹æ³•é€šä¿—æ˜“æ‡‚åœ°å­¦ä¹ gitä¸­æœ€å¸¸ç”¨çš„æŒ‡ä»¤æ€æ ·ä½¿ç”¨gitè¿›è¡ŒååŒå¼€å‘ï¼Ÿgitèƒ½å¸®åŠ©æˆ‘ä»¬é«˜æ•ˆåœ°è¿›è¡Œä»£ç æ‰˜ç®¡ï¼Œåœ¨ä½¿ç”¨gitè¿›è¡Œä»£ç æ‰˜ç®¡çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å›é€€ç‰ˆæœ¬ã€‚æœ¬æ–‡æˆ‘ä»¬å°†ä¸€èµ·æ¥ç ”ç©¶ä»£ç å›é€€çš„æ–¹æ³•ã€‚åœ¨gitä¸­ï¼ŒHEADæŒ‡é’ˆæŒ‡å‘æˆ‘ä»¬å½“å‰åˆ†æ”¯çš„æœ€åä¸€æ¬¡æäº¤ã€‚æ¯”å¦‚æˆ‘ä»¬æäº¤è¿‡ä¸‰ä¸ªç‰ˆæœ¬ï¼Œé‚£ä¹ˆæ­¤æ—¶HEADæŒ‡é’ˆä½ç½®å¦‚ä¸‹å›¾gitç‰ˆæœ¬å›é€€ä¼šå˜æ›´HEADæŒ‡é’ˆçš„ä½ç½®ï¼Œæœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸¤ç§ä»£ç å›é€€çš„æ–¹å¼ã€‚äºŒã€git revert æŒ‡ä»¤git revert æŒ‡ä»¤ä¼šæ’¤å›æŸæ¬¡æäº¤ï¼ˆcommitï¼‰ã€‚è¿™ä¸ªæŒ‡ä»¤è§¦å‘çš„ä»£ç å›é€€å¹¶ä¸ä¼šçœŸæ­£åœ°åˆ é™¤æ‰ä»£ç æäº¤å†å²ï¼Œè€Œæ˜¯å°†æ’¤å›æ“ä½œä½œä¸ºæ–°çš„ä¸€æ¬¡æäº¤è®°å½•ã€‚å¦‚ä¸‹å›¾ç›¸å…³æŒ‡ä»¤å¦‚ä¸‹å¦‚æœè¦æ’¤å›ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æäº¤git revert HEAD^å›é€€åˆ°ä¸Šä¸Šä¸ªç‰ˆæœ¬git revert HEAD^^æˆ–è€…å†™æˆä»¥ä¸‹è¿™ä¸ªæ ¼å¼git revert HEAD^2ä»¥æ­¤ç±»æ¨â€¦å¯ä»¥æ’¤å›åˆ°å¾ˆå¤šç‰ˆæœ¬ä¹‹å‰å¦‚æœè¦æ’¤å›å…·ä½“æŸä¸ªç‰ˆæœ¬çš„æäº¤ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ ¼å¼git revert ç‰ˆæœ¬IDä¸‰ã€git reset æŒ‡ä»¤git resetæŒ‡ä»¤çš„ä½œç”¨æ˜¯é‡ç½®HEADçš„ä½ç½®ï¼Œå°†ä»£ç é‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ã€‚å³å°†HEADæŒ‡å‘çš„ä½ç½®æ”¹å˜ä¸ºä¹‹å‰å­˜åœ¨çš„æŸä¸ªç‰ˆæœ¬ï¼Œè€Œåé¢çš„æäº¤è®°å½•ä¼šè¢«åˆ é™¤ã€‚å¦‚ä¸‹å›¾å‘½ä»¤è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼šgit reset [--soft | --mixed | --hard] [HEAD]å…¶ä¸­ï¼ŒHEADå¯¹åº”çš„å€¼å’Œgit revertæŒ‡ä»¤ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª^ç¬¦å·ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨^+æ•°å­—çš„å½¢å¼ã€‚è¯¥æŒ‡ä»¤æœ‰å‡ ä¸ªæ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯mixedã€softã€hardã€‚--mixed ä¸ºé»˜è®¤ï¼Œå¯ä»¥ä¸ç”¨å¸¦è¯¥å‚æ•°ï¼Œç”¨äºé‡ç½®ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶ä¸æŸä¸€æ¬¡çš„æäº¤(commit)ä¿æŒä¸€è‡´ï¼Œå·¥ä½œåŒºæ–‡ä»¶å†…å®¹ä¿æŒä¸å˜ã€‚å¦‚ä¸‹ç¤ºä¾‹git reset HEAD # é‡ç½®å½“å‰ç‰ˆæœ¬ï¼Œå³æ’¤å›git add æ“ä½œgit reset HEAD^ # é‡ç½®æ‰€æœ‰å†…å®¹åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset HEAD^ hello.php # é‡ç½® hello.php æ–‡ä»¶çš„ç‰ˆæœ¬åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset 052e # é‡ç½®åˆ°æŒ‡å®šç‰ˆæœ¬--soft å‚æ•°ç”¨äºé‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ã€‚å¦‚ä¸‹ç¤ºä¾‹git reset --soft HEAD^2 # é‡ç½®ä¸Šä¸Šä¸ªç‰ˆæœ¬--hard å‚æ•°æ’¤é”€å·¥ä½œåŒºä¸­æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹å†…å®¹ï¼Œå°†æš‚å­˜åŒºä¸å·¥ä½œåŒºéƒ½å›åˆ°ä¸Šä¸€æ¬¡ç‰ˆæœ¬ï¼Œå¹¶åˆ é™¤ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯æäº¤ã€‚å¦‚ä¸‹ç¤ºä¾‹git reset â€“hard HEAD^3 # é‡ç½®ä¸Šä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬ git reset â€“hard bae128 # é‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ã€‚ git reset --hard origin/master # å°†æœ¬åœ°ç‰ˆæœ¬çš„çŠ¶æ€é‡ç½®åˆ°å’Œè¿œç¨‹çš„ä¸€æ · æ³¨æ„ï¼šè°¨æ…ä½¿ç”¨ â€“hard å‚æ•°ï¼Œå®ƒä¼šåˆ é™¤é‡ç½®ç‚¹ä¹‹å‰çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä¸Šé¢å‡ ä¸ªå‚æ•°å¯ä»¥å­˜åœ¨ä»¥ä¸‹åŒºåˆ«â€“mixed(é»˜è®¤)ï¼šå°†ç‰ˆæœ¬åº“çš„ä»£ç é‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œå°†é‡ç½®çš„æ›´æ”¹ç•™åœ¨å·¥ä½œåŒºä¸­ã€‚è¿™ä¸ªæ¨¡å¼åªæ˜¯é‡ç½®gitç‰ˆæœ¬åº“ä¸­çš„ç‰ˆæœ¬ï¼Œå·¥ä½œåŒºä¸­çš„ä»£ç ä¸å˜ã€‚â€“softï¼šå°†ç‰ˆæœ¬åº“çš„ä»£ç é‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œå°†é‡ç½®çš„æ›´æ”¹ä¿å­˜åœ¨æš‚å­˜åŒºã€‚è¿™ä¸ªæ¨¡å¼åœ¨é‡ç½®gitç‰ˆæœ¬çš„åŒæ—¶ï¼Œä¼šæ”¹å˜å·¥ä½œåŒºä¸­ä»£ç ï¼Œå°†å˜æ›´çš„å†…å®¹æ”¾åœ¨æš‚å­˜åŒºã€‚å¦‚æœæˆ‘ä»¬ç¡®å®šé‡ç½®ï¼Œæäº¤ä»£ç ç”Ÿæˆæ–°ç‰ˆæœ¬å³å¯ã€‚å¦‚æœæˆ‘ä»¬åæ‚”äº†ï¼Œä¾ç„¶å¯ä»¥æ‰¾å›ç‰ˆæœ¬é‡ç½®å‰çš„ä»£ç ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹# æ’¤å› git add æ“ä½œgit reset HEAD [è¢«åˆ é™¤çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹]# æ¢å¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œcheckout æŒ‡ä»¤ä¹Ÿå¯ä»¥ç”¨äºåˆ‡æ¢åˆ†æ”¯git checkout [è¢«åˆ é™¤çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹]â€“hardï¼šå°†ç‰ˆæœ¬åº“çš„ä»£ç é‡ç½®åˆ°æŸä¸ªç‰ˆæœ¬ï¼Œåˆ é™¤å˜æ›´çš„è®°å½•ï¼Œä¸€æ— æ‰€æœ‰ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦è°¨æ…ä½¿ç”¨hardæ¨¡å¼ï¼Œå› ä¸ºè¿™ç§æ¨¡å¼ä¼šä¸¢å¤±æ‰è‡ªå·±å˜åŠ¨è¿‡çš„ä»£ç ã€‚" }, { "title": "æ€æ ·ä½¿ç”¨gitè¿›è¡ŒååŒå¼€å‘ï¼Ÿ", "url": "/posts/git_cooperative-development.html", "categories": "git", "tags": "", "date": "2023-01-31 21:57:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°è¿™ç¯‡æ–‡ç« æ˜¯æœ¬ç³»åˆ—çš„ç¬¬ 3 ç¯‡ã€‚é€šè¿‡å‰ä¸¤ç¯‡ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† git çš„æœ€å¸¸ç”¨çš„å‘½ä»¤ä»¥åŠç›¸å…³æ“ä½œã€‚åœ¨æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¼ä¸šå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ååŒæ–¹å¼ï¼Œé‚£å°±æ˜¯åŸºäº git åˆ†æ”¯è¿›è¡ŒååŒå¼€å‘ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡å‰ä¸¤ç¯‡æ–‡ç« ï¼Œå»ºè®®å…ˆé˜…è¯»ã€‚gitçš„ç®€ä»‹ä¸åŸºæœ¬æ“ä½œæ–¹æ³•é€šä¿—æ˜“æ‡‚åœ°å­¦ä¹ gitä¸­æœ€å¸¸ç”¨çš„æŒ‡ä»¤äºŒã€git åˆ†æ”¯2.1 åˆ†æ”¯ç®€ä»‹git é€šè¿‡ä¿å­˜ä¸€ç³»åˆ—ä¸åŒæ—¶åˆ»çš„æ–‡ä»¶å¿«ç…§ï¼Œæ¥è®°å½•æ–‡ä»¶åœ¨ä¸åŒæ—¶åˆ»çš„å·®å¼‚ã€‚...", "content": "ä¸€ã€æ¦‚è¿°è¿™ç¯‡æ–‡ç« æ˜¯æœ¬ç³»åˆ—çš„ç¬¬ 3 ç¯‡ã€‚é€šè¿‡å‰ä¸¤ç¯‡ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº† git çš„æœ€å¸¸ç”¨çš„å‘½ä»¤ä»¥åŠç›¸å…³æ“ä½œã€‚åœ¨æœ¬ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ ä¼ä¸šå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ååŒæ–¹å¼ï¼Œé‚£å°±æ˜¯åŸºäº git åˆ†æ”¯è¿›è¡ŒååŒå¼€å‘ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡å‰ä¸¤ç¯‡æ–‡ç« ï¼Œå»ºè®®å…ˆé˜…è¯»ã€‚gitçš„ç®€ä»‹ä¸åŸºæœ¬æ“ä½œæ–¹æ³•é€šä¿—æ˜“æ‡‚åœ°å­¦ä¹ gitä¸­æœ€å¸¸ç”¨çš„æŒ‡ä»¤äºŒã€git åˆ†æ”¯2.1 åˆ†æ”¯ç®€ä»‹git é€šè¿‡ä¿å­˜ä¸€ç³»åˆ—ä¸åŒæ—¶åˆ»çš„æ–‡ä»¶å¿«ç…§ï¼Œæ¥è®°å½•æ–‡ä»¶åœ¨ä¸åŒæ—¶åˆ»çš„å·®å¼‚ã€‚git çš„åˆ†æ”¯ï¼Œæœ¬è´¨ä¸Šæ˜¯æŒ‡å‘æäº¤å¯¹è±¡çš„å¯å˜æŒ‡é’ˆã€‚ git çš„é»˜è®¤åˆ†æ”¯åæ˜¯ masterã€‚ åœ¨å¤šæ¬¡æäº¤æ“ä½œä¹‹åï¼Œä½ å…¶å®å·²ç»æœ‰ä¸€ä¸ªæŒ‡å‘æœ€åé‚£ä¸ªæäº¤å¯¹è±¡çš„ master åˆ†æ”¯ã€‚ master åˆ†æ”¯ä¼šåœ¨æ¯æ¬¡æäº¤æ—¶è‡ªåŠ¨å‘å‰ç§»åŠ¨ã€‚git çš„ master åˆ†æ”¯å¹¶ä¸æ˜¯ä¸€ä¸ªç‰¹æ®Šåˆ†æ”¯ã€‚ è·Ÿå…¶å®ƒåˆ†æ”¯å®Œå…¨æ²¡æœ‰åŒºåˆ«ã€‚ ä¹‹æ‰€ä»¥å‡ ä¹æ¯ä¸€ä¸ªä»“åº“éƒ½æœ‰ master åˆ†æ”¯ï¼Œæ˜¯å› ä¸º git init å‘½ä»¤é»˜è®¤åˆ›å»ºå®ƒï¼Œå¹¶ä¸”å¤§å¤šæ•°äººéƒ½æ‡’å¾—å»æ”¹åŠ¨å®ƒã€‚ä¸åŒçš„å¼€å‘å›¢é˜Ÿçš„åˆ†æ”¯ç®¡ç†è§„èŒƒä¸ä¸€æ ·ï¼Œä½†åŸºæœ¬åŸç†æ˜¯ç›¸åŒçš„ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå…¸å‹çš„ git åˆ†æ”¯çš„å·¥ä½œæµç¤ºä¾‹å›¾Masterï¼šè¿™é‡ŒæŒ‡ master ä¸»åˆ†æ”¯ï¼Œmaster åˆ†æ”¯è®°å½•çš„é‡å¤§ç‰ˆæœ¬æ›´æ–°Developï¼šè¿™é‡ŒæŒ‡ develop å¼€å‘åˆ†æ”¯ï¼Œä» master åˆ†æ”¯åˆ›å»ºï¼Œå˜åŠ¨æ¯”è¾ƒå¤§ï¼Œé€šå¸¸å¾…ä¸Šçº¿çš„åŠŸèƒ½åˆå¹¶åˆ°è¿™ä¸ªåˆ†æ”¯Featureï¼šè¿™é‡ŒæŒ‡ feature åŠŸèƒ½åˆ†æ”¯ï¼Œä» develop åˆ†æ”¯åˆ›å»ºï¼Œåœ¨è¿™ç±»åˆ†æ”¯ä¸Šå»å¼€å‘æ–°çš„åŠŸèƒ½ã€‚å¼€å‘åŠŸèƒ½çš„æ—¶å€™ï¼Œè¿™ä¸ªåŠŸèƒ½å±äºå“ªä¸ªç›®æ ‡å‘è¡Œç‰ˆæœ¬è¿˜ä¸çŸ¥é“ã€‚åŠŸèƒ½å¦‚æœä¸€ç›´åœ¨å¼€å‘ï¼Œå¯¹åº”çš„è¿™ä¸ªåŠŸèƒ½åˆ†æ”¯å°±å¯ä»¥ä¸€ç›´å­˜åœ¨ã€‚å¾…ä¸Šçº¿çš„æ—¶å€™ï¼Œåˆå¹¶åˆ° develop åˆ†æ”¯ä¸Šï¼Œè¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚å¦‚æœä¸æƒ³è¦å¼€å‘çš„è¿™ä¸ªåŠŸèƒ½äº†ï¼Œå¯ä»¥ç›´æ¥æ‰”æ‰å®ƒã€‚2.2 åˆ†æ”¯çš„åŸºæœ¬æ“ä½œ ï¼ˆ1ï¼‰æŸ¥çœ‹åˆ†æ”¯æˆ‘ä»¬å…ˆé€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹åˆ†æ”¯ä¿¡æ¯git branchçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ ï¼ˆ2ï¼‰åˆ›å»ºä¸åˆ‡æ¢åˆ†æ”¯ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ä»å½“å‰åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯# åˆ›å»ºdevelopåˆ†æ”¯git branch develop# åˆ‡æ¢åˆ° develop åˆ†æ”¯git checkout developæˆ–è€…æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¹‹åç›´æ¥åˆ‡æ¢åˆ°æ–°åˆ†æ”¯# checkout æŒ‡ä»¤ä½¿ç”¨ -bå‚æ•°ï¼Œåˆ›å»ºä¹‹åå³åˆ‡æ¢git checkout -b developæ­¤æ—¶æˆ‘ä»¬å†ä½¿ç”¨ git branch æŸ¥çœ‹åˆ†æ”¯ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ°ç°åœ¨ä¸€å…±æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œè€Œæœ‰â€œ*â€æ ‡è¯†çš„æ˜¯æˆ‘ä»¬ç°åœ¨æ‰€åœ¨çš„åˆ†æ”¯ã€‚ ï¼ˆ3ï¼‰åˆ é™¤åˆ†æ”¯ç»è¿‡ä¸Šé¢çš„æ“ä½œï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å¤„åœ¨ develop åˆ†æ”¯ä¸Šï¼Œä¸‹é¢æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œå¹¶åˆ é™¤æ‰æ–°åˆ›å»ºçš„åˆ†æ”¯# åˆ›å»ºå¹¶åˆ‡æ¢åˆ° feature/211031git checkout -b feature/211031é€šè¿‡ä¸Šé¢çš„æŒ‡ä»¤æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŠŸèƒ½åˆ†æ”¯ï¼Œå‡å¦‚è¿™ä¸ªåŠŸèƒ½ä¸æƒ³è¦äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ é™¤æ‰ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤# å…ˆåˆ‡æ¢å›developåˆ†æ”¯git checkout develop# åˆ é™¤ feature/211031 åŠŸèƒ½åˆ†æ”¯git branch -d feature/211031åˆ é™¤è¿œç«¯åˆ†æ”¯ï¼Œä¸ºäº†æ¼”ç¤ºåˆ é™¤è¿œç«¯åˆ†æ”¯ï¼Œæˆ‘ä»¬å…ˆå°†æœ¬åœ°çš„developåˆ†æ”¯æäº¤åˆ°è¿œç«¯# å°†æœ¬åœ°develop åˆ†æ”¯æäº¤åˆ°è¿œç«¯git push -u origin developå¦‚æœè¿œç«¯æ²¡æœ‰ develop åˆ†æ”¯å°†ä¼šè‡ªåŠ¨åˆ›å»ºã€‚è¿™é‡Œè¿˜æœ‰ä¸ªå‚æ•°æ˜¯ -uï¼Œæ˜¯--set-upstreamçš„ç®€å†™ï¼Œè¯¥å‚æ•°ç”¨äºæ¨é€ä»£ç æ˜¯è¿›è¡Œåˆ†æ”¯å…³è”ï¼Œè¯¥å‚æ•°ä¸ pushæŒ‡ä»¤è”ç”¨ã€‚å¦ä¸€ä¸ªç±»ä¼¼åŠŸèƒ½çš„å‚æ•°--set-upstream-toç”¨äºç›´æ¥è®¾ç½®å…³è”ï¼Œè¯¥å‚æ•°ä¸branchæŒ‡ä»¤è”ç”¨ã€‚å¦‚ä¸‹æŒ‡ä»¤# å°†è¿œç«¯ master å…³è”åˆ° æœ¬åœ° developåˆ†æ”¯git branch --set-upstream-to origin/master developä»¥ä¸ŠæŒ‡ä»¤å°†è¿œç«¯ master åˆ†æ”¯å…³è”åˆ°æœ¬åœ°çš„ develop åˆ†æ”¯ã€‚æ¢ä¸€ç§è¯´æ³•æ˜¯ï¼Œæˆ‘ä»¬å°†æœ¬åœ° develop åˆ†æ”¯è¿½è¸ªè¿œç«¯çš„ master åˆ†æ”¯ã€‚ä»¥ä¸Šçš„è®¾ç½®åªæ˜¯ä¸ªç¤ºä¾‹ï¼Œåœ¨å®é™…ä¸­ï¼Œæ ¹æ®åˆ†æ”¯åç§°ï¼Œæœ¬åœ°åˆ†æ”¯åº”å½“ä¸è¿œç«¯åˆ†æ”¯ä¸€ä¸€å¯¹åº”ã€‚ä¸Šé¢è®²developåˆ†æ”¯æ¨é€åˆ°è¿œç«¯ä»“åº“ä¹‹åï¼Œæˆ‘ä»¬å¯æ‰§è¡Œè¿œç«¯çš„åˆ†æ”¯åˆ é™¤æ“ä½œï¼Œå¦‚ä¸‹æŒ‡ä»¤# åˆ é™¤è¿œç«¯çš„ develop åˆ†æ”¯git push -u origin -d develop origin å…³é”®è¯æŒ‡çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œorigin æŒ‡å‘çš„æ˜¯æœ¬åœ°çš„ä»£ç åº“æ‰˜ç®¡åœ¨è¿œç«¯çš„ä»“åº“ï¼Œå¯ä»¥è¯´ origin å¯¹åº”çš„æ˜¯è¿œç«¯ä»“åº“ã€‚2.3 åŒæ­¥è¿œç«¯åˆ†æ”¯ ï¼ˆ1ï¼‰ç›¸å…³æŒ‡ä»¤ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆå¹¶è¿œç«¯ä»£ç # ä»è¿œç¨‹è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯åˆ°æœ¬åœ°git fetch# å°†è¿œç«¯ç‰ˆæœ¬åˆå¹¶åˆ°å½“å‰åˆ†æ”¯git merge FETCH_HEADè¿™é‡Œå‡ºç°ä¸€ä¸ªå…³é”®è¯FETCH_HEADï¼Œè¯¥å…³é”®è¯åŒæ ·æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œç”¨äºè·Ÿè¸ªä»è¿œç¨‹å­˜å‚¨åº“ä¸­è·å–çš„å†…å®¹ã€‚ä»¥ä¸Šçš„ä¸¤ä¸ªæŒ‡ä»¤å¯ä»¥ç”¨ä¸€ä¸ª git pullæ¥ä»£æ›¿ï¼Œ å…¶å®å°±æ˜¯ git fetch å’Œ git merge FETCH_HEAD çš„åˆå¹¶ã€‚å‘½ä»¤æ ¼å¼å¦‚ä¸‹git pull &lt;è¿œç¨‹ä¸»æœºå&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt; ï¼ˆ2ï¼‰å®ä¾‹è®©å½“å‰åˆ†æ”¯è‡ªåŠ¨ä¸å…¶è¿½è¸ªçš„åˆ†æ”¯è¿›è¡Œåˆå¹¶git pullè®©è¿œç«¯çš„ master åˆ†æ”¯ï¼Œä¸æœ¬åœ°çš„ develop åˆ†æ”¯åˆå¹¶ï¼Œå¦‚ä¸‹æŒ‡ä»¤git pull origin master:develop2.4 åˆ†æ”¯çš„åˆå¹¶é€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦å•ç‹¬å»ºä¸€ä¸ªåˆ†æ”¯æ¥å¼€å‘åŠŸèƒ½ï¼Œå¼€å‘å®Œæˆä¹‹åéœ€è¦åˆå¹¶åˆ°ä¸»åˆ†æ”¯ã€‚æˆ‘ä»¬è¿™é‡Œè¯´çš„ä¸»åˆ†æ”¯æ˜¯åŠŸèƒ½åˆ†æ”¯çš„æ¥æºåˆ†æ”¯ï¼Œå‡å¦‚ feature åˆ†æ”¯æ˜¯ä» develop åˆ†æ”¯åˆ›å»ºçš„ï¼Œæˆ‘ä»¬å°±æŠŠè¿™é‡Œçš„ develop åˆ†æ”¯å«åšä¸»åˆ†æ”¯ã€‚é€šè¿‡ä¸‹å›¾å¯ä»¥çœ‹åˆ°åˆå¹¶çš„è¿‡ç¨‹æ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªæäº¤ï¼Œä½†åŠŸèƒ½åˆ†æ”¯åœ¨å¼€å‘çš„æ—¶å€™ï¼Œä¸»åˆ†æ”¯ä¹Ÿå¯èƒ½è¿›è¡Œäº†å¥½å‡ æ¬¡æäº¤ã€‚æœ€åï¼ŒåŠŸèƒ½åˆ†æ”¯è¦åˆå¹¶åˆ°ä¸»åˆ†æ”¯ä¸Šã€‚ä¸Šå›¾çš„åˆå¹¶è¿‡ç¨‹å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å®ç°# åˆ‡æ¢åˆ°developåˆ†æ”¯git checkout develop# å°†featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯git merge featureä½†å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–çš„æ•ˆæœï¼Œå¦‚ä¸‹å›¾å°†åŠŸèƒ½åˆ†æ”¯çš„æäº¤è®°å½•è¿½åŠ åœ¨ä¸»åˆ†æ”¯ä¸Šï¼Œè®©gitä¿æŒä¸€æ¡çº¿çš„æäº¤è®°å½•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤# ä½¿ç”¨rebaseçš„æ–¹å¼å°†featureåˆ†æ”¯åˆå¹¶åˆ°developåˆ†æ”¯git rebase featurerebase çš„æ–¹å¼ä¸æ˜¯ç›´æ¥åˆå¹¶ï¼Œè€Œæ˜¯å°† feature åˆ†æ”¯å˜åŒ–çš„æäº¤è®°å½•ç›´æ¥è¿½åŠ åˆ°ä¸»åˆ†æ”¯ä¹‹ä¸Šã€‚ä½¿å¾—ä¸¤ä¸ªåˆ†æ”¯çš„ä»£ç ä¿æŒæäº¤çš„è®°å½•æ˜¯ä¸€è‡´çš„ã€‚å®é™…ä¸Šä¸ä»…ä»…æœ¬åœ°åˆ†æ”¯çš„åˆå¹¶å¯ä»¥ä½¿ç”¨rebaseçš„æ–¹å¼ã€‚å°†è¿œç«¯ä»£ç åˆå¹¶åˆ°æœ¬åœ°çš„åˆ†æ”¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨--rebaseå‚æ•°å°†æœ¬åœ°åˆ†æ”¯çš„æäº¤è®°å½•è¿½åŠ åˆ°è¿œç«¯çš„åˆ†æ”¯ä¸Šï¼Œå¦‚ä¸‹å‘½ä»¤git pull --rebase2.5 ä»£ç å†²çªè§£å†³åŠæ³•å› ä¸º git ä¸»è¦æ˜¯ç”¨æ¥åšååŒå¼€å‘çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªé¡¹ç›®ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œå¯èƒ½åŒæ—¶æœ‰å¤šä¸ªäººç¼–è¾‘ï¼Œé‚£ä¹ˆå°±å¯èƒ½äº§ç”Ÿæ–‡ä»¶çš„å†²çªã€‚å†²çªä¸»è¦æ¥è‡ªä»¥ä¸‹æ–¹é¢ï¼Œå¤šäººåŒæ—¶å˜æ›´ç›¸åŒæ–‡ä»¶çš„åŒä¸€ä¸ªåœ°æ–¹ï¼šä¸€å®šä¼šäº§ç”Ÿå†²çªï¼Œå¤šäººåŒæ—¶ç¼–è¾‘æ–‡ä»¶çš„ä¸åŒåœ°æ–¹ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªã€‚å¦‚æœäº§ç”Ÿçš„å†²çª git èƒ½å¤„ç†çš„ git å°†ä¼šè‡ªåŠ¨è§£å†³ï¼Œä½†æ˜¯å¦‚æœ git ä¸èƒ½è§£å†³çš„å†²çªåˆ™éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è§£å†³ã€‚ä¸‹é¢æˆ‘ä»¬æ¼”ç¤ºä¸€ä¸‹æ–‡ä»¶äº§ç”Ÿå†²çªå’Œè§£å†³çš„è¿‡ç¨‹ åˆå§‹åŒ–gitä»“åº“# åˆ›å»ºä¸€ä¸ª test2 ç›®å½•mkdir test2# è¿›å…¥ test2 ç›®å½•cd test2# åˆ›å»ºä¸€ä¸ªæºä»£ç æ–‡ä»¶ main.cpptouch main.cpp# åˆå§‹åŒ–gitä»“åº“git init# å°†æ–‡ä»¶æ·»åŠ gitç¼“å­˜åŒºgit add .# å°†gitæäº¤åˆ°ç‰ˆæœ¬åº“git commit -m \"first commit\" ï¼ˆ1ï¼‰åœ¨æ–°åˆ†æ”¯å†™å…¥ä»£ç è¿™æ—¶å€™ï¼Œæˆ‘ä»¬å·²ç»åœ¨ master åˆ†æ”¯å·²ç»æœ‰äº†ä¸€ä¸ª git çš„ç‰ˆæœ¬åº“ã€‚ç°åœ¨éœ€è¦ä» master åˆ†æ”¯åˆ›å»ºæ–°åˆ†æ”¯ï¼Œå¦‚ä¸‹å‘½ä»¤git checkout -b developç°åœ¨æˆ‘ä»¬åœ¨main.cppä¸­æ·»åŠ ä»¥ä¸‹ä»£ç #include&lt;iostream&gt;ç„¶åå°†ä»£ç è¿›è¡Œæäº¤ï¼Œå¦‚ä¸‹æŒ‡ä»¤git commit -aä½ å¯èƒ½ä¼šç–‘é—®ï¼Œè¿™æ¬¡æäº¤æ€ä¹ˆè·Ÿä¹‹å‰çš„å‘½ä»¤ä¸ä¸€æ ·å‘¢ï¼Ÿå®é™…ä¸Šï¼Œä»¥ä¸Šå‘½ä»¤å°±ç­‰ä»·äºä¸‹é¢çš„æŒ‡ä»¤git add .git commitä½†æ˜¯æ²¡æœ‰-må‚æ•°ï¼Œæ‰€ä»¥ git ä¼šè‡ªåŠ¨æ‰“å¼€å…¶ç»‘å®šçš„ç»ˆç«¯ç¼–è¾‘å™¨ï¼Œè®©æˆ‘ä»¬æ‰‹åŠ¨è¾“ä¿¡æ¯ã€‚è¾“å¥½æäº¤å¤‡æ³¨ä¿¡æ¯ä¹‹åï¼Œæˆ‘ä»¬é€€å‡ºç¼–è¾‘å™¨å³å¯ã€‚ ï¼ˆ2ï¼‰åœ¨ä¸»åˆ†æ”¯ä¸Šå†™å…¥ä»£ç æ¥ç€æˆ‘ä»¬åˆ‡æ¢åˆ° master åˆ†æ”¯ï¼Œå¦‚ä¸‹æŒ‡ä»¤git checkout masterç°åœ¨æˆ‘ä»¬åœ¨ master åˆ†æ”¯ä¸­å¯¹main.cppæ–‡ä»¶æ·»åŠ å¦å¤–ä¸€è¡Œä»£ç ï¼Œå¦‚ä¸‹å†…å®¹#include&lt;stdlib.h&gt;å†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œæäº¤git commit -a ï¼ˆ3ï¼‰äº§ç”Ÿå†²çªæ­¤æ—¶ï¼Œmaster åˆ†æ”¯åˆ°äº†ç¬¬ 2 ä¸ªç‰ˆæœ¬ï¼Œdevelop ä¹Ÿåœ¨ç¬¬ 2 ä¸ªç‰ˆæœ¬ï¼Œå¹¶ä¸”ä»–ä»¬åŒä¸€è¡Œæ–‡ä»¶ä»£ç ä¸ä¸€æ ·ï¼Œä»£ç åˆå¹¶åå¿…å®šä¼šäº§ç”Ÿå†²çªã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°† develop åˆ†æ”¯åˆå¹¶åˆ° masteråˆ†æ”¯ï¼Œå¦‚ä¸‹å‘½ä»¤# åœ¨masteråˆ†æ”¯ä¸Šå°†developåˆ†æ”¯åˆå¹¶è¿›æ¥git merge developåˆå¹¶ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥çœ‹åˆ°æç¤ºä¿¡æ¯çš„å…³é”®è¯CONFLICTï¼Œæ­¤æ—¶ä»£ç å·²ç»äº§ç”Ÿäº† git æ— æ³•è‡ªåŠ¨è§£å†³çš„å†²çªï¼Œåˆå¹¶ä¹‹åçš„ä»£ç å¦‚ä¸‹æ‰€ç¤º&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD#include&lt;stdlib.h&gt;=======#include&lt;iostream&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; developç°åœ¨æˆ‘ä»¬æ‰“å¼€main.cppæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°åˆå¹¶çš„ä»£ç ä¸­è¢«åˆ†æˆäº†ä¸¤æ ã€‚ä¸Šé¢éƒ¨åˆ†çš„å…³é”®è¯æ˜¯HEADï¼Œæˆ‘ä»¬åœ¨å‰é¢è¯´è¿‡ HEADæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å½“å‰åˆ†æ”¯ï¼Œå³ masterï¼Œè€Œä¸‹é¢çš„éƒ¨åˆ†æ˜¯ develop åˆ†æ”¯çš„ä»£ç ã€‚ ï¼ˆ4ï¼‰è§£å†³å†²çªç°åœ¨å°±éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è§£å†³å†²çªï¼Œå‡å¦‚æˆ‘ä»¬ä¸¤è¡Œä»£ç éƒ½æƒ³è¦ï¼Œé‚£ä¹ˆåˆ é™¤æ‰ git äº§ç”Ÿçš„ä¸´æ—¶è¡Œï¼ŒåŒæ—¶ä¿ç•™ä¸¤ä¸ªåˆ†æ”¯çš„ä»£ç å³å¯ï¼Œæœ€ç»ˆä¿®æ”¹å¦‚ä¸‹ï¼š#include&lt;stdlib.h&gt;#include&lt;iostream&gt;æœ€åï¼Œæˆ‘ä»¬å†å°†ä¿®æ”¹ä¹‹åçš„ä»£ç å†æ¬¡æäº¤åˆ°ç‰ˆæœ¬åº“å³å¯ï¼Œå¦‚ä¸‹æŒ‡ä»¤git commit -a -m \"è§£å†³å†²çª\"ä¸‰ã€æ ‡ç­¾git å¯ä»¥å¯¹æŸæ¬¡ç‰ˆæœ¬æäº¤è¿›è¡Œæ‰“æ ‡ç­¾ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªé‡è¦æ›´æ–°æˆ–è€…æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨ä»£ç å³å°†å‘å¸ƒçš„æ—¶å€™æ‰“ä¸€ä¸ªæ ‡ç­¾ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªç¨³å®šçš„ç‰ˆæœ¬ã€‚3.1 æŸ¥çœ‹æ ‡ç­¾ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹å·²ç»å­˜åœ¨çš„æ ‡ç­¾git tagè¿™ä¸ªæŒ‡ä»¤ä¼šæ ¹æ®æ ‡ç­¾çš„å­—æ¯é¡ºåºåˆ—å‡ºï¼Œå¦‚æœåªæƒ³æŸ¥çœ‹æŸä¸ªå…³é”®å­—çš„åˆ†æ”¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤# æŸ¥çœ‹ å¸¦æœ‰ \"v1.\" å…³é”®å­—çš„æ ‡ç­¾ æ˜Ÿå·ï¼ˆ\"*\"ï¼‰ä»£è¡¨é€šé…ç¬¦å·git tag -l \"v1.*\"3.2 æ‰“æ ‡ç­¾git æ”¯æŒä¸¤ç§æ ‡ç­¾ï¼šè½»é‡æ ‡ç­¾ï¼ˆlightweightï¼‰ä¸é™„æ³¨æ ‡ç­¾ï¼ˆannotatedï¼‰ã€‚è½»é‡æ ‡ç­¾å¾ˆåƒä¸€ä¸ªä¸ä¼šæ”¹å˜çš„åˆ†æ”¯ï¼Œå®ƒåªæ˜¯æŸä¸ªç‰¹å®šæäº¤çš„å¼•ç”¨ã€‚è€Œé™„æ³¨æ ‡ç­¾æ˜¯å­˜å‚¨åœ¨ git æ•°æ®åº“ä¸­çš„ä¸€ä¸ªå®Œæ•´å¯¹è±¡ã€‚ä½¿ç”¨å½“å‰åˆ†æ”¯æœ€æ–°çš„æäº¤åˆ›å»ºæ ‡ç­¾è½»é‡æ ‡ç­¾git tag v1.0 -m \"version 1.0\"ä½¿ç”¨å½“å‰åˆ†æ”¯æœ€æ–°çš„æäº¤åˆ›å»ºé™„ä»¶æ ‡ç­¾git tag -a v1.0 -m \"version 2.0\"æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹è¿‡å»çš„æäº¤è¿›è¡Œæ‰“æ ‡ç­¾ï¼Œä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤æŸ¥çœ‹è¿‡å»çš„æäº¤æ—¥å¿—git log --pretty=onelineå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å†…å®¹pan@pandeMacBook-Pro test2 % git log --pretty=oneline667a8a76e994f9abe0624d5b14093af92de16ac2 (HEAD -&gt; master, tag: v2.0, tag: v1.0, origin/master, develop) Merge branch 'develop'db8f7cf7cadcfbf357a93b4a1cab3ee25a86db85 main commit 2f9715e2aae67cf66b1d1348e872cb313f25ed514 develop commit 1ba8703bd5151796106af7fe55109c9d80ea8b27f first commitå‡å¦‚æˆ‘ä»¬éœ€è¦å¯¹ç¬¬ä¸€æ¬¡ç‰ˆæœ¬æäº¤æ‰“æ ‡ç­¾ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤# ä½¿ç”¨æäº¤idæŒ‡å®šå¯¹åº”çš„æäº¤git tag -a v3.0 ba8703bd5151796106af7fe55109c9d80ea8b27f -m \"tag v3.0\"æˆ–è€…ç›´æ¥ç”¨æäº¤ id çš„ç¼©å†™ï¼Œå¦‚ä¸‹æŒ‡ä»¤git tag -a v3.0 ba8703b -m \"tag v3.1\"3.3 å°†æ ‡ç­¾æäº¤åˆ°æœåŠ¡å™¨æˆ‘ä»¬åœ¨ä½¿ç”¨pushæŒ‡ä»¤çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šç›´æ¥å°†æ ‡ç­¾è¿œç«¯ä»“åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æäº¤å¯¹åº”çš„æ ‡ç­¾# å°† åä¸º v2.0 çš„æ ‡ç­¾æäº¤åˆ°è¿œç«¯ä»“åº“git push origin v2.0æˆ–è€…ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤å°†æ‰€æœ‰çš„æ ‡ç­¾æäº¤åˆ°è¿œç«¯ä»“åº“git push origin --tags3.4 åˆ é™¤æ ‡ç­¾ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ é™¤æœ¬åœ°æ ‡ç­¾git tag -d v1.0æœ¬åœ°æ ‡ç­¾åˆ é™¤åï¼Œå¦‚æœè¿œç«¯å­˜åœ¨å½“å‰å¯¹åº”æ ‡ç­¾ï¼Œä½¿ç”¨git pullåŒæ—¶å°†è¿œç«¯æ ‡ç­¾åŒæ­¥åˆ°æœ¬åœ°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ é™¤è¿œç«¯æ ‡ç­¾# åˆ é™¤è¿œç«¯ä»“åº“çš„ v1.0 æ ‡ç­¾git push origin :refs/tags/v1.0ä¸Šé¢è¿™ç§æ“ä½œçš„å«ä¹‰æ˜¯ï¼Œå°†å†’å·å‰é¢çš„ç©ºå€¼æ¨é€åˆ°è¿œç¨‹æ ‡ç­¾åï¼Œä»è€Œé«˜æ•ˆåœ°åˆ é™¤å®ƒã€‚å¦‚æœä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤åˆ é™¤è¿œç«¯æ ‡ç­¾ï¼Œæ›´åŠ ç›´è§‚# åˆ é™¤è¿œç«¯ v1.0 æ ‡ç­¾ï¼Œ-d æ˜¯ --delete çš„ç¼©å†™ï¼Œä¸¤è€…çš„åŠŸèƒ½æ˜¯ç­‰ä»·çš„git push origin --delete v1.0è¿™æ—¶å€™ï¼Œä½ å¯èƒ½ä¼šç–‘é—®ï¼šåˆ é™¤åˆ†æ”¯å’Œåˆ é™¤æ ‡ç­¾çš„å‘½ä»¤æ˜¯ä¸€æ ·çš„ï¼Ÿç¡®å®æ˜¯ï¼Œå› ä¸ºè¿™ç§æ–¹å¼æ˜¯é€šè¿‡å¼•ç”¨åç§°è¿›è¡Œåˆ é™¤ã€‚å¦‚æœå­˜åœ¨åŒååˆ†æ”¯æ—¶ï¼Œä½¿ç”¨ä¸Šè¿°çš„ç¬¬äºŒç§æ–¹æ³•åˆ é™¤æ ‡ç­¾ä¼šåˆ é™¤å¤±è´¥ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿè¯´æ˜ä¸€ä¸‹åˆ é™¤åˆ†æ”¯çš„åŸå§‹æŒ‡ä»¤ï¼Œå¦‚ä¸‹# åˆ é™¤ develop åˆ†æ”¯git push origin :refs/heads/developä»ä¸Šé¢çš„æŒ‡ä»¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåˆ†æ”¯çš„å¼•ç”¨å±äº refs/heads ä¹‹ä¸‹ï¼Œè€Œæ ‡ç­¾çš„å¼•ç”¨å±äº refs/tags ä¹‹ä¸‹å››ã€æ€»ç»“é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬æŠŠå¸¸è§çš„ git ååŒå¼€å‘æ“ä½œéƒ½æ¼”ç¤ºäº†ä¸€éã€‚æˆ‘ä»¬ä¸»è¦æ˜¯ä»¥å®è·µçš„æ–¹å¼è¿›è¡Œäº†ä»£ç çš„åˆå¹¶ã€ä»£ç çš„æäº¤ã€å†²çªçš„è§£å†³ã€æ ‡ç­¾çš„ä½¿ç”¨ç­‰ã€‚å¦‚æœæŒæ¡è¿™ç¯‡æ–‡ç« ï¼Œå‡ ä¹å°±èƒ½æ»¡è¶³æ—¥å¸¸çš„å¼€å‘gitåä½œéœ€æ±‚äº†ã€‚å®é™…ä¸Šgitçš„åŠŸèƒ½ä¹Ÿä¸æ­¢è¿™äº›ï¼Œé™äºç¯‡å¹…ï¼Œgitè¿˜æœ‰å¾ˆå¤šä¸å¸¸ç”¨çš„å‚æ•°å’ŒåŠŸèƒ½è¿™ç¯‡æ–‡ç« æ²¡æœ‰ä»‹ç»ã€‚å¦‚æœä½ æœ‰å…´è¶£ï¼Œå¯ä»¥é€šè¿‡é˜…è¯»å®˜æ–¹æ–‡æ¡£çš„æ–¹å¼äº†è§£æ›´å¤šå†…å®¹ï¼" }, { "title": "é€šä¿—æ˜“æ‡‚åœ°å­¦ä¹ gitä¸­æœ€å¸¸ç”¨çš„å‘½ä»¤", "url": "/posts/git_basic-command.html", "categories": "git", "tags": "", "date": "2023-01-31 21:55:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿° åœ¨ä¸ŠèŠ‚ï¼Œå¸¦å¤§å®¶ä¸€èµ·ç®€å•äº†è§£äº† git ï¼Œå¹¶ä½¿ç”¨ git æˆåŠŸå°†ä»£ç æ‰˜ç®¡åˆ° githubã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹  git ï¼Œæˆ‘ä»¬æ ¹æ®å®é™…å¼€å‘ä¸­çš„éœ€æ±‚ï¼Œæ¥é€ä¸ªè®¤è¯† git ä¸­æœ€å¸¸è§ä¸æœ€åŸºæœ¬çš„æŒ‡ä»¤ã€‚æœ¬ç³»åˆ—å¤§æ¦‚ä¼šæœ‰ 3 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 2 ç¯‡ï¼Œå¦‚æœä½ è¿˜æ²¡çœ‹ä¸Šä¸€ç¯‡ï¼Œæ¨èå…ˆçœ‹ä¸Šä¸€ç¯‡ï¼šè®°å½• git å‡ æ¡å‘½ä»¤ï¼Œå°†è‡ªå·±çš„ä»£ç æ‰˜ç®¡åˆ° Github ä¸Šå®é™…ä¸Š git çš„æ¯ä¸ªæŒ‡ä»¤éƒ½æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œè¿™ç³»åˆ—çš„æ–‡...", "content": "ä¸€ã€æ¦‚è¿° åœ¨ä¸ŠèŠ‚ï¼Œå¸¦å¤§å®¶ä¸€èµ·ç®€å•äº†è§£äº† git ï¼Œå¹¶ä½¿ç”¨ git æˆåŠŸå°†ä»£ç æ‰˜ç®¡åˆ° githubã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å­¦ä¹  git ï¼Œæˆ‘ä»¬æ ¹æ®å®é™…å¼€å‘ä¸­çš„éœ€æ±‚ï¼Œæ¥é€ä¸ªè®¤è¯† git ä¸­æœ€å¸¸è§ä¸æœ€åŸºæœ¬çš„æŒ‡ä»¤ã€‚æœ¬ç³»åˆ—å¤§æ¦‚ä¼šæœ‰ 3 ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬ 2 ç¯‡ï¼Œå¦‚æœä½ è¿˜æ²¡çœ‹ä¸Šä¸€ç¯‡ï¼Œæ¨èå…ˆçœ‹ä¸Šä¸€ç¯‡ï¼šè®°å½• git å‡ æ¡å‘½ä»¤ï¼Œå°†è‡ªå·±çš„ä»£ç æ‰˜ç®¡åˆ° Github ä¸Šå®é™…ä¸Š git çš„æ¯ä¸ªæŒ‡ä»¤éƒ½æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œè¿™ç³»åˆ—çš„æ–‡ç« æˆ‘ä¼šä»‹ç»æœ€å¸¸ç”¨çš„ git æŒ‡ä»¤ï¼Œå¦‚æœä½ æƒ³æ·±å…¥äº†è§£æŸä¸ªæŒ‡ä»¤ï¼Œgit çš„å®˜æ–¹èƒ½æä¾›å¾ˆå¤šå¸®åŠ©ï¼Œå¦‚ä¸‹æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„æ–‡æ¡£å¸®åŠ©# æŸ¥çœ‹gitçš„æ‰€æœ‰æŒ‡ä»¤git --help# æŸ¥çœ‹ add æŒ‡ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼Œæ­¤æ–¹æ³•å¯ä»¥æŸ¥çœ‹å…¶ä»–æŒ‡ä»¤çš„è¯¦æƒ…git add --helpæœ¬èŠ‚å…³é”®è¯ï¼šæœ¬åœ°ä»“åº“ã€è¿œç«¯ä»“åº“ï¼ˆæˆ–è€…å«è¿œç¨‹ä»“åº“ã€æœåŠ¡å™¨ä»“åº“ï¼‰ã€å·¥ä½œåŒºã€ç¼“å­˜åŒºã€æœ¬åœ°ä»“åº“ï¼ˆæˆ–è€…å« æœ¬åœ°ç‰ˆæœ¬åº“ï¼‰äºŒã€æœ¬åœ°ä»“åº“çš„åˆå§‹åŒ– æœ‰ä¸¤ç§åˆå§‹åŒ– git é¡¹ç›®ä»“åº“çš„æ–¹æ³•ã€‚ç¬¬ä¸€ç§æ˜¯ä»ä¸€ä¸ª git æœåŠ¡å™¨å…‹éš†ä¸€ä¸ªç°æœ‰çš„ git ä»“åº“ã€‚ç¬¬äºŒç§æ˜¯åœ¨ç°æœ‰é¡¹ç›® æˆ– ç©ºé¡¹ç›®ç›®å½•ä¸‹åˆå§‹åŒ– git ä»“åº“ï¼Œå¹¶ç»‘å®šä¸Šè¿œç«¯ä»“åº“ã€‚2.1 åˆ›å»ºè¿œç«¯ä»“åº“åˆå§‹åŒ–æœ¬åœ°ä»“åº“å‰ï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºè¿œç«¯ä»“åº“ã€‚è¿œç«¯ä»“åº“æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ githubï¼Œè¿™æ˜¯æœ€çŸ¥åçš„åŸºäº git çš„ä»£ç å…è´¹æ‰˜ç®¡æœåŠ¡ï¼Œç¼ºç‚¹æ˜¯å›½å†…è®¿é—®å¯èƒ½æ¯”è¾ƒæ…¢ã€‚ä¹Ÿå¯ä»¥ç”¨ giteeï¼Œè¿™æ˜¯å›½å†…çš„åŸºäº git çš„ä»£ç å…è´¹æ‰˜ç®¡æœåŠ¡ï¼Œç‰¹ç‚¹æ˜¯è®¿é—®é€Ÿåº¦å¿«ã€ä¸­æ–‡ç•Œé¢ã€‚æˆ‘ä»¬ä»¥ giteeä¸ºä¾‹ï¼Œgitee çš„ç½‘å€æ˜¯ https://gitee.comï¼Œå…ˆåˆ›å»ºä¸ªäººè´¦å·ï¼Œç™»å½•ä¹‹åç‚¹å‡»ç½‘å€å³ä¸Šè§’çš„ â€œåˆ›å»ºä»“åº“â€ï¼Œå³è¿›å…¥åˆ›å»ºä»“åº“ç•Œé¢ï¼Œå¦‚ä¸‹å›¾æ³¨æ„ï¼Œä»“åº“åå¯ä»¥ç”¨ä¸­æ–‡ï¼Œä½†æ˜¯ä»“åº“è·¯å¾„å¿…é¡»è¦ç”¨è‹±æ–‡æ ‡è¯†ï¼Œå¦‚æœå¸Œæœ›è‡ªå·±çš„ä»“åº“å¯ä»¥è¢«åˆ«äººè®¿é—®ï¼Œåˆ™é€‰æ‹© â€œå¼€æºâ€ï¼Œå…¶ä»–é€‰é¡¹é»˜è®¤å³å¯ï¼Œç‚¹å‡»â€œåˆ›å»ºâ€æŒ‰é’®å³å¯å®Œæˆ è¿œç«¯ä»“åº“çš„åˆ›å»ºã€‚2.2 ä»è¿œç«¯å…‹éš†ä»“åº“ æˆ‘ä»¬åœ¨ gitee ä¸Šæœ‰ä¸€ä¸ªç°æœ‰çš„ä»“åº“ https://gitee.com/kotlindev/test1.gitã€‚å°†è¿œç¨‹ test1 ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼Œå…‹éš†å®Œæˆåæœ¬åœ°å°†è‡ªåŠ¨åˆ›å»ºå‡º test1 ç›®å½•ï¼ŒåŒæ—¶è¿œç«¯çš„æ–‡ä»¶åŒæ­¥åˆ°æœ¬åœ°ã€‚# å°†è¿œç«¯ test1 ä»“åº“å…‹éš†åˆ°æœ¬åœ°git clone https://gitee.com/kotlindev/test1.gitå…‹éš†çš„åŒæ—¶å¯ä»¥ä¹Ÿé‡å‘½åï¼Œå¦‚ä¸‹å‘½ä»¤# å°†è¿œç«¯ test1 ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼ŒåŒæ—¶å‘½åä¸º demogit clone https://gitee.com/kotlindev/test1.git demo12.3 åœ¨æœ¬åœ°åˆå§‹åŒ– git ä»“åº“å¦‚æœæˆ‘ä»¬ä¸å…‹éš†è¿œç«¯çš„ä»“åº“åˆ°æœ¬åœ°ï¼Œä¸‹é¢è¿˜æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å°†æœ¬åœ°çš„ä»“åº“ç»‘å®šåˆ°è¿œç«¯çš„ä»“åº“ã€‚æ–¹æ³•ä¸€ï¼šå°†æœ¬åœ°ä»£ç ç›®å½•åˆå§‹åŒ–ä¸º git é¡¹ç›®ï¼Œåç»‘å®šè¿œç«¯ä»“åº“# åˆ›å»ºé¡¹ç›®ç›®å½•mkdir test1# è¿›å…¥é¡¹ç›®ç›®å½•cd test1# åˆå§‹åŒ–gitä»“åº“git init# ç»‘å®šç»‘å®šè¿œç«¯ä»“åº“git remote add origin https://gitee.com/kotlindev/test1.gitæ–¹æ³•äºŒï¼šå°†è¿œç«¯ä»“åº“çš„.gitç›®å½•æ‹·è´ï¼ˆæˆ–ç§»åŠ¨ï¼‰åˆ°æœ¬åœ°é¡¹ç›®ç›®å½•# è¿›å…¥é¡¹ç›®ç›®å½•cd test1# æ‹‰å–è¿œç«¯ä»“åº“ï¼Œå¹¶å‘½åä¸º temp ï¼Œä»£è¡¨çš„æ˜¯ä¸´æ—¶ç›®å½•git clone https://gitee.com/kotlindev/test1.git temp# å°† temp ç›®å½•ä¸­çš„ .git ç›®å½•ç§»åŠ¨åˆ°å½“å‰é¡¹ç›®ç›®å½•mv temp/.git ./# åˆ é™¤æ‰ä¸´æ—¶ç›®å½•rm -r tempä¸Šé¢ä¸¤ç§æ–¹æ³•ï¼Œéƒ½å¯ä»¥å°†æœ¬åœ°é¡¹ç›®ç›®å½•ä¸è¿œç«¯çš„ git ä»“åº“è¿›è¡Œç»‘å®šï¼Œç»‘å®šä¹‹åæ–¹å¯è¿›è¡Œä»£ç çš„åŒæ­¥ã€æ¨é€ã€‚ä¸‰ã€git ä»“åº“çš„åŸºæœ¬æ“ä½œ3.1 æŸ¥çœ‹ä»“åº“çš„çŠ¶æ€git statuså¯ä»¥çœ‹åˆ°å¦‚ä¸‹æç¤ºä¸Šé¢çš„æˆªå›¾å†…å®¹æ˜¯ï¼šå½“å‰åœ¨ master åˆ†æ”¯ï¼Œç›®å‰æ²¡æœ‰ä»»ä½•æäº¤3.2 å°†å·¥ä½œåŒºæ–‡ä»¶æ·»åŠ åˆ° git ç¼“å­˜åŒºæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹å‘½ä»¤# æ·»åŠ ä¸€ä¸ª c++ æºä»£ç æ–‡ä»¶touch main.cppç°åœ¨æ–‡ä»¶åœ¨å·¥ä½œåŒºï¼Œä½¿ç”¨ git status å‘½ä»¤æŸ¥çœ‹ git çŠ¶æ€ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå…³é”®è¯ Untracked filesï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰è¢« git ç›‘æ§çš„æ–‡ä»¶ï¼Œè¿™é‡Œæ‰€è¯´çš„ç›‘æ§å°±æ˜¯è·Ÿè¸ªæ–‡ä»¶çš„å˜åŒ–ï¼Œå¦‚ä¸‹å›¾æ·»åŠ åˆ° git ç¼“å­˜åŒºåï¼Œé¡¹ç›®é‡Œçš„æ–‡ä»¶å°†ä¼šè¢« git ç›‘æ§ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† main.cpp æ–‡ä»¶æ·»åŠ åˆ° git ç¼“å­˜åŒºgit add main.cppæ­¤æ—¶å†ä½¿ç”¨ git statuså¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ° Changes to be committedå…³é”®è¯ï¼Œä»£è¡¨å·²ç»åœ¨ git ç¼“å­˜åŒºçš„æ–‡ä»¶ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå½“æˆ‘ä»¬æ¯æ¬¡ç¼–ç å®Œæˆåï¼Œå·¥ä½œåŒºå¯èƒ½åˆ›å»ºäº†å¾ˆå¤šæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ° git ç¼“å­˜åŒºã€‚# .ä»£è¡¨å½“å‰ç›®å½•ï¼Œä»¥ä¸‹å‘½ä»¤æ˜¯å°†å·¥ä½œåŒºçš„æ‰€æœ‰æ–‡ä»¶æ·»åŠ  git ç¼“å­˜åŒºgit add .3.3 å°†ç¼“å­˜åŒºæ–‡ä»¶æäº¤åˆ° ç‰ˆæœ¬åº“ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†ç¼“å­˜åŒºçš„æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“# -m å‚æ•°åé¢ä»£è¡¨çš„ä¿¡æ¯å¤‡æ³¨git commit -m \"first commit\"æ­¤æ—¶æˆ‘ä»¬çœ‹åˆ°ç»ˆç«¯çš„ä¸€äº›æç¤ºä¿¡æ¯ï¼ŒåŒ…å«æ–‡ä»¶å˜åŠ¨çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ¯æ¬¡æäº¤çš„å˜æ›´å†…å®¹ï¼Œéƒ½ä¼šè¢« git è®°å½•ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ git æäº¤è®°å½•git logæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ° git å¦‚ä¸‹å›¾ä¿¡æ¯ç¬¬ä¸€è¡Œï¼šæœ¬æ¬¡æäº¤çš„åŸºæœ¬ä¿¡æ¯ã€‚ç¬¬ 2 åˆ—è¡¨ç¤º git æäº¤çš„å”¯ä¸€æ ‡è¯†ï¼ˆæˆ‘ä»¬å¯ä»¥å«åšæäº¤ id æˆ–è€… commit idï¼‰ï¼›ç¬¬ 3 åˆ—è¡¨ç¤ºå½“å‰åˆ†æ”¯æäº¤åˆ°è¿œç«¯ master åˆ†æ”¯ï¼Œè¡¨ç¤ºæœ¬åœ°å½“å‰åˆ†æ”¯ï¼ˆé»˜è®¤æ˜¯ masterï¼‰ æäº¤åˆ°è¿œç«¯ masteråˆ†æ”¯ æˆ‘ä»¬ç°åœ¨è¿˜æ²¡æåˆ°åˆ†æ”¯æ¦‚å¿µï¼Œä½ åªéœ€è¦çŸ¥é“æœ‰è¿™ä¸ªåè¯å°±å¯ä»¥äº†ï¼Œåé¢ç« èŠ‚ä¸­å°†è¯´æ˜ã€‚ä»»ä½•æ—¶å€™ï¼ŒHEAD æ‰€æŒ‡å‘çš„åˆ†æ”¯å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚åœ¨æ— ä»»ä½•æ–°å»ºåˆ†æ”¯æƒ…å†µä¸‹ï¼Œä¹Ÿå°±æ˜¯åªæœ‰ master åˆ†æ”¯ï¼ŒHEAD æ‰€æŒ‡å‘çš„åˆ†æ”¯å°±æ˜¯å½“å‰åˆ†æ”¯ â€“ masterã€‚åœ¨æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯åï¼ŒHEAD æ‰€æŒ‡å‘çš„åˆ†æ”¯å°±æ˜¯æ–°åˆ†æ”¯ã€‚ç¬¬äºŒè¡Œï¼šä½œè€…ä¿¡æ¯ã€‚ç¬¬ 2 åˆ—æ˜¯æˆ‘ä»¬è®¾ç½®çš„æœ¬åœ°ä½œè€…åç§°ï¼›ç¬¬ 3 åˆ—æ˜¯æˆ‘ä»¬è®¾ç½®çš„ä½œè€…é‚®ç®±ç¬¬ä¸‰è¡Œï¼šgit æäº¤çš„æ—¶é—´å‰©ä½™ä¿¡æ¯ï¼šä½œè€…æäº¤æ—¶çš„å¤‡æ³¨ä¿¡æ¯3.4 æŸ¥çœ‹æ–‡ä»¶å·®å¼‚åœ¨ git ä»“åº“ä¸­çš„æ–‡ä»¶ï¼Œéƒ½ä¼šè¢« git è·Ÿè¸ªï¼Œå¦‚æ–‡ä»¶ä¿®æ”¹å†å²ã€æ˜¯å¦æ˜¯æ–°æ–‡ä»¶ã€æäº¤æäº¤å†å²ç­‰ç­‰ã€‚git diff å‘½ä»¤ç”¨äºæŸ¥çœ‹çš„æ–‡ä»¶çš„å·®å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æŒ‡ä»¤å¯¹æ¯”æ–‡ä»¶çš„å„ç§å·®å¼‚ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨æŒ‡ä»¤# æ¯”è¾ƒæ‰€æœ‰æ–‡ä»¶ä¸ç¼“å­˜åŒºæ–‡ä»¶å·®å¼‚git diff# æ¯”è¾ƒå½“å‰æ–‡ä»¶å’Œç¼“å­˜åŒºæ–‡ä»¶å·®å¼‚git diff &lt;file&gt;# æ¯”è¾ƒä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚git diff &lt;id1&gt; &lt;id2&gt;# åœ¨ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´æ¯”è¾ƒgit diff &lt;branch1&gt; &lt;branch2&gt;# æ¯”è¾ƒç¼“å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚ï¼Œä¸ä¸‹ä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœä¸€æ ·git diff --staged# æ¯”è¾ƒç¼“å­˜åŒºå’Œç‰ˆæœ¬åº“å·®å¼‚ï¼Œä¸ä¸Šä¸€æ¡æŒ‡ä»¤çš„æ•ˆæœä¸€æ ·git diff --cached# ä»…ä»…æ¯”è¾ƒç»Ÿè®¡ä¿¡æ¯git diff --statä½†è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰ä½¿ç”¨ git add æŒ‡ä»¤å°†æ–‡ä»¶æ–‡ä»¶åˆ°ç¼“å­˜åŒºä¹‹åï¼Œæ–‡ä»¶çš„ä¿¡æ¯æ‰ä¼šè¢«è®°å½•ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åšä¸ªç®€å•æ¼”ç¤ºï¼Œä¿®æ”¹main.cppï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç #include &lt;iostream&gt;using namespace std;int main(){ cout &lt;&lt; \"hello world\" &lt;&lt; endl;}é€šè¿‡git diffå‘½ä»¤æŸ¥çœ‹å·¥ä½œåŒºä¸ç¼“å­˜åŒºçš„æ–‡ä»¶å·®å¼‚ï¼Œå¦‚ä¸‹å›¾æœ‰ä¸¤ä¸ªå…³é”®è¯ a å’Œ bï¼Œåˆ†åˆ«æŒ‡çš„æ˜¯ç¼“å­˜åŒºå’Œå·¥ä½œåŒºï¼Œå¯ä»¥çœ‹å‡ºåœ¨bä¸­çš„main.cppæ–‡ä»¶å¤šäº† 6 è¡Œä»£ç 3.5 å°†æœ¬åœ°ä»“åº“æäº¤åŒæ­¥åˆ°è¿œç¨‹ä»“åº“æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†æœ¬åœ°ä»£ç æ¨é€åˆ°è¿œç«¯ä»“åº“# å°†å½“å‰åˆ†æ”¯ (é»˜è®¤æ˜¯master) æ¨é€åˆ°è¿œç«¯ä»“åº“çš„ master åˆ†æ”¯git push -u origin masterå®é™…ä¸Šæäº¤æˆåŠŸä¹‹åï¼Œè¿œç«¯çš„ main.cpp æ–‡ä»¶æ˜¯ç©ºçš„ï¼Œæ˜¯å› ä¸ºæœ¬åœ°ç‰ˆæœ¬åº“è¿˜æ˜¯ä¸€ä¸ªç©ºçš„ main.cppæ–‡ä»¶ã€‚è™½ç„¶main.cpp æ–‡ä»¶è¢«ä¿®æ”¹äº†ï¼Œä½†è¿˜æœªæäº¤åˆ°æœ¬åœ°çš„ç‰ˆæœ¬åº“ã€‚æ‰€ä»¥è¿˜éœ€è¦è¿›è¡Œä¸‹é¢çš„æ“ä½œ# å°†æ‰€æœ‰å˜æ›´æ·»åŠ çš„ç¼“å­˜åŒºgit add .# å°†ç¼“å­˜åŒºçš„å˜æ›´æäº¤åˆ° æœ¬åœ°gitç‰ˆæœ¬åº“git commit -m \"ä¿®æ”¹main.cppæ–‡ä»¶\"# å°†æœ¬åœ°ç‰ˆæœ¬åº“æäº¤åˆ°è¿œç«¯ä»“åº“git push -u origin masteræ­¤æ—¶ï¼Œæˆ‘ä»¬å†æµè§ˆè¿œç«¯ä»“åº“ï¼Œå¯ä»¥çœ‹åˆ°ä»£ç å·²ç»åŒæ­¥è¿‡å»äº†ã€‚å››ã€æ€»ç»“åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† git æœ€å¸¸ç”¨çš„æŒ‡ä»¤ï¼Œå¹¶å®Œæˆäº†ä¸€äº›æœ€åŸºæœ¬çš„æ“ä½œã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è¿›ä¸€æ­¥ä»‹ç» git å®ç”¨çš„æŠ€å·§ï¼Œå¸®åŠ©æˆ‘ä»¬æé«˜å·¥ä½œæ•ˆç‡ï¼Œæ¬¢è¿æŒç»­å…³æ³¨ï¼" }, { "title": "ä½¿ç”¨gitæ‰˜ç®¡ä»£ç çš„åŸºæœ¬æ“ä½œæ–¹æ³•", "url": "/posts/git_installation-and-basic-operation.html", "categories": "git", "tags": "", "date": "2023-01-31 21:54:00 +0800", "snippet": " æˆ‘è®¡åˆ’å†™2åˆ°3ç¯‡çš„gitåŸºç¡€æ–‡ç« ï¼Œè¿™æ¬¡ä»‹ç» git çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚åé¢ä»‹ç»ä¼ä¸šä¸­å¦‚ä½•ä½¿ç”¨ git è¿›è¡ŒååŒå¼€å‘ã€‚ä¸€ã€Git ç®€ä»‹1.1 æ¶æ„å…³é”®è¯ï¼šgit æˆ– GitGit æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ä»£ç æ‰˜ç®¡å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºåŒä¸€å¥—ä»£ç ï¼Œåœ¨ä¸åŒç”µè„‘ä¸Šè¿›è¡Œé¡¹ç›®å¼€å‘ï¼Œæœ€ç»ˆéƒ½å¯ä»¥å¯ä»¥æŠŠä»£ç åŒæ­¥åˆ° Git æœåŠ¡å™¨ä¸Šã€‚Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ä»£ç æ‰˜ç®¡å·¥å…·ï¼Œå¦‚ä¸‹å›¾ï¼š1.2 å·¥ä½œæµä¸‹é¢æ˜¯ä¸€å¼ åŸºäº Git æ‰˜ç®¡çš„ä»£ç ...", "content": " æˆ‘è®¡åˆ’å†™2åˆ°3ç¯‡çš„gitåŸºç¡€æ–‡ç« ï¼Œè¿™æ¬¡ä»‹ç» git çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ã€‚åé¢ä»‹ç»ä¼ä¸šä¸­å¦‚ä½•ä½¿ç”¨ git è¿›è¡ŒååŒå¼€å‘ã€‚ä¸€ã€Git ç®€ä»‹1.1 æ¶æ„å…³é”®è¯ï¼šgit æˆ– GitGit æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ä»£ç æ‰˜ç®¡å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºåŒä¸€å¥—ä»£ç ï¼Œåœ¨ä¸åŒç”µè„‘ä¸Šè¿›è¡Œé¡¹ç›®å¼€å‘ï¼Œæœ€ç»ˆéƒ½å¯ä»¥å¯ä»¥æŠŠä»£ç åŒæ­¥åˆ° Git æœåŠ¡å™¨ä¸Šã€‚Gitæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ä»£ç æ‰˜ç®¡å·¥å…·ï¼Œå¦‚ä¸‹å›¾ï¼š1.2 å·¥ä½œæµä¸‹é¢æ˜¯ä¸€å¼ åŸºäº Git æ‰˜ç®¡çš„ä»£ç æµå‘å›¾Gitæ¶‰åŠåˆ°ä¸€ä¸‹å…³é”®çš„å‡ ä¸ªæ¦‚å¿µï¼šWorking Directory (å·¥ä½œåŒº)ï¼šæˆ‘ä»¬ç¼–è¾‘ä¸å˜åŠ¨çš„ä»£ç æ–‡ä»¶ï¼Œéƒ½åœ¨å·¥ä½œåŒºä¸‹ï¼›Stating Area (ç¼“å­˜åŒº)ï¼šä»£ç æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯æ¬¡å˜åŠ¨åçš„ä»£ç ï¼Œæäº¤åˆ°Gitç¼“å­˜åŒºã€‚è®© Git è®°å½•ä»£ç çš„å˜åŠ¨ï¼›Respository (ä»“åº“)ï¼šåœ¨Gitç¼“å­˜åŒºçš„ä»£ç ï¼Œéƒ½å¯ä»¥æäº¤åˆ° Gitä»“åº“è¿›è¡Œæ‰˜ç®¡ã€‚ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæœ¬åœ°çš„ä»“åº“ï¼ˆä¸€èˆ¬æŒ‡æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ï¼‰å¯ä»¥å°†ä»£ç æäº¤åˆ°è¿œç¨‹çš„ä»“åº“ï¼ˆä¸€èˆ¬æŒ‡GitæœåŠ¡å™¨ï¼‰ã€‚äºŒã€å®‰è£…2.1 Linuxåœ¨ Debianã€Ubuntuã€Deepin ç­‰æ“ä½œç³»ç»Ÿä¸Šå®‰è£…å‘½ä»¤å¦‚ä¸‹sudo apt install git2.2 MacMac å¯ä»¥ä½¿ç”¨homebrewè¿›è¡Œå®‰è£…ï¼Œå¦‚ä¸‹å‘½ä»¤# å®‰è£…homebrew/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"# å®‰è£…gitbrew install gitæˆ–è€…å®‰è£… xcode å·¥å…·åŒ…ï¼Œxcodeå·¥å…·åŒ…åŒ…å«äº†gitï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œxcode å®‰è£…æ—¶é—´å¯èƒ½æ¯”è¾ƒé•¿ï¼Œæ¨èåœ¨ç½‘ç»œç¯å¢ƒå¾ˆå¥½çš„å‰æä¸‹ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚2.3 windowswindows å®‰è£…æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ä½¿ç”¨äºŒè¿›åˆ¶åŒ…æŒ‰æç¤ºå®‰è£…å³å¯ï¼ŒgitäºŒè¿›åˆ¶å®‰è£…åŒ…ä¸‹è½½åœ°å€åœ¨ Gitå®˜ç½‘ä¸Š å¯ä»¥æ‰¾åˆ°ã€‚ä¸‰ã€åŸºæœ¬ä½¿ç”¨3.1 åˆå§‹åŒ–æœ¬åœ°ç”¨æˆ·åœ¨ä½¿ç”¨gitä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®¾ç½®æœ¬åœ°çš„è´¦å·ï¼Œè®¾ç½®ä¸€ä¸‹æœ¬åœ° gitç”¨æˆ· çš„ç”¨æˆ·åå’Œé‚®ç®±ï¼Œå¦‚ä¸‹å‘½ä»¤# é…ç½®ç”¨æˆ·ågit config --global user.name \"John Doe\"# é…ç½®é‚®ç®±git config --global user.email johndoe@example.comé…ç½®å¥½æœ¬åœ°è´¦å·ä¿¡æ¯ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚å®é™…ä¸Šæœ¬åœ°çš„è´¦å·å¯ä»¥ä»»æ„è®¾ç½®ï¼Œä¸è¿œç«¯è´¦å·å…³ç³»ä¸å¤§ï¼Œåªæ˜¯è®°å½•æˆ‘ä»¬åœ¨æœ¬åœ°ä»“åº“æ“ä½œçš„ç”¨æˆ·ä¿¡æ¯è€Œå·²ã€‚3.2 åˆ›å»ºæœ¬åœ°ä»“åº“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œç»ˆç«¯ä¸Šè¿›å…¥åˆ°è‡ªå·±çš„å·¥ä½œç›®å½•ï¼Œå‡å¦‚è‡ªå·±çš„å·¥ä½œç›®å½•åœ¨ /home/pan/work/src ï¼Œæˆ‘ä»¬å…ˆè¿›å…¥è¿™ä¸ªç›®å½•ï¼Œå†æ‰§è¡Œgitåˆå§‹åŒ–å‘½ä»¤å³å¯ï¼Œå¦‚ä¸‹å‘½ä»¤# è¿›å…¥å·¥ä½œç›®å½•cd /home/pan/work/src# åˆå§‹åŒ–gitä»“åº“git initåˆå§‹åŒ–å®Œæˆåå½“å‰ç›®å½•å˜æˆäº† git çš„å·¥ä½œç›®å½•ï¼Œæ­¤æ—¶åœ¨è¿™ä¸ªç›®å½•ä¸‹ä¼šç”Ÿæˆåä¸º .git çš„éšè—ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°±æ˜¯ git ä¿å­˜æ–‡ä»¶å˜åŠ¨ä¿¡æ¯çš„ç›®å½•ï¼Œæœ¬åœ°çš„æ‰€æœ‰å˜åŠ¨è®°å½•éƒ½åœ¨è¿™é‡Œã€‚è¿™ä¸ªç›®å½•ä¸èƒ½åˆ é™¤ï¼Œå¦‚æœåˆ é™¤ä¹‹åï¼Œå·¥ä½œç›®å½•å°†ä¸å†æ˜¯ä¸€ä¸ª git çš„å·¥ä½œç›®å½•ã€‚3.3 å°†æœ¬åœ°ä»£ç æäº¤åˆ°Gitç¼“å­˜åŒºæˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°æ·»åŠ ä¸€ä¸ªä»£ç æ–‡ä»¶ï¼Œå¦‚ä¸‹å‘½ä»¤# åˆ›å»ºä¸€ä¸ªc++æºä»£ç æ–‡ä»¶touch test.cppè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨git å°† test.cpp æºä»£ç æ–‡ä»¶æäº¤åˆ° git ç¼“å­˜åŒºï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤# å°† test.cpp æ–‡ä»¶æäº¤åˆ° git ç¼“å­˜åŒºgit add test.cppæˆ–è€…ä½¿ç”¨å¦ä¸€ä¸ªå‘½ä»¤# å°†å½“å‰ç›®å½•æ‰€æœ‰æ–‡ä»¶æäº¤åˆ° git ç¼“å­˜åŒºgit add .3.4 å°†ç¼“å­˜åŒºçš„ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ä½¿ç”¨ä¸‹é¢å‘½ä»¤å°†ä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå°±å®Œæˆæ‰˜ç®¡äº†ï¼Œå¦‚ä¸‹å‘½ä»¤# å°†æœ¬åœ°gitç¼“å­˜åŒºä»£ç æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œ-m å‚æ•°åé¢æ˜¯æäº¤å¤‡æ³¨git commit -m \"first commit\"æäº¤åˆ°gitä»“åº“çš„ä»£ç ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ git çš„å¾ˆå¤šå®ç”¨åŠŸèƒ½ï¼Œå¦‚å›é€€ä»£ç ã€æŸ¥çœ‹ä»£ç å˜åŠ¨å†å²ç­‰ç­‰ã€‚3.5 å°†ä»£ç æäº¤åˆ°è¿œç¨‹ä»“åº“æœ¬åœ°ä»“åº“çš„å¯ä»¥æäº¤åˆ°è¿œç¨‹ä»“åº“ï¼Œè¿œç¨‹ä»“åº“ä¹Ÿå¯ä»¥å®æ—¶åŒæ­¥æœ€æ–°ä»£ç åˆ°æœ¬åœ°ä»“åº“ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬æ˜¯å¤šä¸ªäººå…±ç”¨ä¸€ä¸ªè¿œç¨‹ä»“åº“ï¼Œå› ä¸ºä¸€ä¸ªç¨å¾®æœ‰è§„æ¨¡çš„é¡¹ç›®é€šå¸¸ä¸æ˜¯ä¸€ä¸ªäººå¼€å‘çš„ï¼Œè€Œæ˜¯å¤šä¸ªäººå…±åŒç»´æŠ¤ä¸€å¥—ä»£ç ã€‚ä¸‹é¢æ˜¯å°†æœ¬åœ°ä»£ç åŒæ­¥åˆ°è¿œç«¯çš„åŸºæœ¬æ“ä½œï¼šå‡å¦‚æˆ‘ä»¬åœ¨Githubä»“åº“ä¸Šåˆ›å»ºäº†ä¸€ä¸ªä»“åº“ï¼Œä»“åº“çš„gitåœ°å€ä¸º https://github.com/kotlindev/test.git,æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯å°†æœ¬åœ°ä»£ç æäº¤åˆ°è¿œç«¯ä»“åº“ã€‚# å°†æœ¬åœ°ä»“åº“ç»‘å®šè¿œç¨‹ä»“åº“git remote add origin https://github.com/kotlindev/test.git# å°†æœ¬åœ°çš„å½“å‰masteråˆ†æ”¯ä»£ç æäº¤å¾…è¿œç«¯mastergit push -u origin masterè¿›è¡Œè´¦å·éªŒè¯ä¹‹åï¼Œå³å¯æˆåŠŸå°†ä»£ç æ¨é€åˆ°è¿œç«¯gitä»“åº“ã€‚å››ã€æ€»ç»“é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å·²ç»ä¼šå°†è‡ªå·±çš„ä»£ç æ¨é€åˆ°è¿œç«¯çš„ Github è¿›è¡Œæ‰˜ç®¡äº†ï¼Œä½†å®é™…ä¸Šï¼Œè¿œè¿œä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚ä½ å¯èƒ½ä¼šæœ‰ä»¥ä¸‹ç–‘é—®ï¼š æ€ä¹ˆåŒæ­¥è¿œç«¯çš„æœ€æ–°ä»£ç ï¼Ÿ æ€ä¹ˆå›é€€åˆ°æ—§çš„ä»£ç ï¼Ÿ æ€ä¹ˆè¿›è¡Œå¤šäººååŒå¼€å‘ï¼Ÿ ä¼ä¸šçš„ä»£ç ååŒè¿‡ç¨‹æ˜¯æ€æ ·çš„ï¼Ÿâ€¦â€¦ç¯‡å¹…é—®é¢˜ï¼Œåé¢æˆ‘ä»¬ä¼šè§£å†³ä¸Šè¿°æˆ‘ä»¬æåˆ°çš„é—®é¢˜ï¼Œå¹¶å¾ªåºæ¸è¿›åœ°ä»‹ç»æ€æ ·gitåœ¨å®é™…å·¥ä½œçš„æé«˜æˆ‘ä»¬å·¥ä½œæ•ˆç‡ã€‚æ¬¢è¿å¤§å®¶ç»§ç»­å…³æ³¨ï¼" }, { "title": "æ€æ ·ä½¿ç”¨Vagrantåœ¨å‘½ä»¤è¡Œç»ˆç«¯å‘½ä¸Šç®¡ç†Linuxè™šæ‹Ÿæœºï¼Ÿ", "url": "/posts/tools_run-linux-on-vagrant.html", "categories": "å·¥å…·", "tags": "è™šæ‹Ÿæœº", "date": "2023-01-31 21:41:00 +0800", "snippet": "ä¸€ã€Vgrantçš„å®‰è£…Vagrantæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è™šæ‹Ÿæœºç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬ä»¥ Deepin 20.2.3 ä¸ºä¾‹ï¼Œå®‰è£…å’Œä½¿ç”¨ Vagrantã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€è¯´çš„ Vagrant åŒ…æ‹¬ Vagrant å·¥å…·æœ¬èº« å’Œ è™šæ‹Ÿå¼•æ“å·¥å…· VirtualBoxã€‚1.1 å®‰è£…Vagrantå®‰è£… vagrant æ—¶ï¼Œä½¿ç”¨çš„ VirtualBox ç‰ˆæœ¬å¿…é¡»è¦å¾—åˆ° å¯¹åº” Vagrant ç‰ˆæœ¬çš„æ”¯æŒï¼Œåœ¨å†™è¿™ç¯‡æ–‡æ¡£çš„æ—¶å€™ï¼Œ...", "content": "ä¸€ã€Vgrantçš„å®‰è£…Vagrantæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è™šæ‹Ÿæœºç®¡ç†å·¥å…·ï¼Œæˆ‘ä»¬ä»¥ Deepin 20.2.3 ä¸ºä¾‹ï¼Œå®‰è£…å’Œä½¿ç”¨ Vagrantã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€è¯´çš„ Vagrant åŒ…æ‹¬ Vagrant å·¥å…·æœ¬èº« å’Œ è™šæ‹Ÿå¼•æ“å·¥å…· VirtualBoxã€‚1.1 å®‰è£…Vagrantå®‰è£… vagrant æ—¶ï¼Œä½¿ç”¨çš„ VirtualBox ç‰ˆæœ¬å¿…é¡»è¦å¾—åˆ° å¯¹åº” Vagrant ç‰ˆæœ¬çš„æ”¯æŒï¼Œåœ¨å†™è¿™ç¯‡æ–‡æ¡£çš„æ—¶å€™ï¼Œæˆ‘å®‰è£…çš„ Vagrant ç‰ˆæœ¬æ˜¯ 2.2.18 ï¼Œå¯¹åº”çš„ VirtualBox ç‰ˆæœ¬æ˜¯ 6.1.26ã€‚Vagrant å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://releases.hashicorp.com/vagrant/ï¼Œåœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°Vagrant å½“å‰çš„æœ€æ–°ç‰ˆæœ¬ä»¥åŠå†å²ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©åˆ°å¯¹åº”æ“ä½œç³»ç»Ÿçš„å¯¹åº”ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚VirtualBox å®‰è£…åŒ…ä¸‹è½½åœ°å€ï¼šhttps://www.virtualbox.org/wiki/Downloadsï¼ŒåŒæ ·ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ° VirtualBox çš„å¯¹åº”ç‰ˆæœ¬ã€‚å°† Vagrant å’Œ VirtualBox æŒ‡å®šçš„å®‰è£…åŒ…ä¸‹è½½åˆ°æœ¬åœ°åï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼Œå¦‚ä¸‹# å®‰è£… Vagrantsudo apt install ./vagrant_2.2.18_x86_64.deb# å®‰è£… VirtualBoxsudo apt install ./virtualbox-6.1_6.1.26-145957_Debian_buster_amd64.deb1.2 å®‰è£…éªŒè¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯vagrnatæ˜¯å¦èƒ½æ­£å¸¸ä½¿ç”¨# åˆ›å»º vagrant é¡¹ç›®è·¯å¾„mkdir ~/my-vagrant-project# åˆå§‹åŒ– centos8è™šæ‹Ÿæœºvagrant init centos/8# å¯åŠ¨è™šæ‹Ÿæœºvagrant up# åœæ­¢è™šæ‹Ÿæœºvagrant halt# åˆ é™¤è™šæ‹Ÿæœºvagrant destroyå¦‚æœä»¥ä¸Šæ­¥éª¤å¯ä»¥é¡ºåˆ©æ‰§è¡Œï¼Œåˆ™ä»£è¡¨ Vagrant å®‰è£…æˆåŠŸã€‚äºŒã€Vagrantçš„ä½¿ç”¨2.1 å®‰è£… boxæˆ‘ä»¬å¯ä»¥æŠŠ Vgarnt ä¸­çš„ box ç†è§£ä¸ºæŸç§æ“ä½œç³»ç»Ÿçš„é•œåƒæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè™šæ‹Ÿæœºçš„æœ¬èº«ï¼Œæˆ‘ä»¬å¯ä»¥å»æ·»åŠ æˆ‘ä»¬æƒ³è¦çš„ boxï¼Œ Vagrant å¯ä»¥å»ç®¡ç†è¿™äº› boxï¼Œæˆ‘ä»¬åœ¨å¯åŠ¨è™šæ‹Ÿæœºæ—¶å¯ä»¥é€‰æ‹©æˆ‘ä»¬æƒ³è¦çš„ boxã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡https://app.vagrantup.com/boxes/searchå»æ‰¾åˆ°æˆ‘ä»¬æƒ³è¦çš„boxï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° box åç§°æ ¼å¼ä¸º A/Bï¼Œ å…¶ä¸­ A ä»£è¡¨åˆ›å»º box çš„ç”¨æˆ·åï¼ŒB ä¸º box çš„åç§°ï¼Œå¦‚centos/7ã€‚ å®‰è£…æŒ‡å®šçš„ boxvagrant box add centos/7æ­¤æ—¶çœ‹åˆ°å¦‚ä¸‹é€‰æ‹©æç¤ºpan@pan-PC:~$ vagrant box add centos/7==&gt; box: Loading metadata for box 'centos/7' box: URL: https://vagrantcloud.com/centos/7This box can work with multiple providers! The providers that itcan work with are listed below. Please review the list and choosethe provider you will be working with.1) hyperv2) libvirt3) virtualbox4) vmware_desktopEnter your choice: å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„è™šæ‹Ÿæœºå¼•æ“æ˜¯virtualboxï¼Œæ‰€ä»¥è¾“å…¥3åæŒ‰å›è½¦å³ä¸‹è½½ virtualbox ç‰ˆæœ¬çš„ centos/7ã€‚ æŸ¥çœ‹å·²ç»å®‰è£…çš„boxvagrant box list2.2 è™šæ‹Ÿæœºçš„åŸºæœ¬ä½¿ç”¨ åˆå§‹åŒ–è™šæ‹Ÿæœº# åˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ç›®å½•mkdir ~/test# è¿›å…¥é¡¹ç›®ç›®å½•cd ~/test# ä½¿ç”¨centos/7åˆå§‹åŒ–vagranté¡¹ç›®vagrant init centos/7æ­¤æ—¶åœ¨ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º Vagrantfile çš„é…ç½®æ–‡ä»¶ï¼Œåœ¨åç»­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ Vagrantfile æ¥å®šä¹‰è™šæ‹Ÿæœºï¼Œæ¥ä¸‹æ¥çš„ç›¸å…³æ“ä½œæŒ‡ä»¤éƒ½å°†åœ¨ vagrant é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ å¯åŠ¨è™šæ‹Ÿæœºvagrant upè™šæ‹Ÿæœºå¯åŠ¨ä¹‹åï¼Œä¼šå°†æœ¬åœ°çš„é¡¹ç›®ç›®å½•è‡ªåŠ¨æŒ‚è½½åˆ°è™šæ‹Ÿæœºé‡Œçš„ /vagrant ç›®å½• è¿æ¥è™šæ‹Ÿæœº# é»˜è®¤ä½¿ç”¨vagrantç”¨æˆ·è¿æ¥åˆ°è™šæ‹Ÿæœºvagrant sshå¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡vagrant ssh-configå‘½ä»¤æŸ¥çœ‹sshé…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºä¸æœ¬åœ°çš„æ˜ å°„ç«¯å£ã€è¯ä¹¦æ–‡ä»¶ç­‰ï¼Œå¦‚ä¸‹pan@pan-PC:~/Work/vagrant/centos$ vagrant ssh-configHost default HostName 127.0.0.1 User vagrant Port 2222 UserKnownHostsFile /dev/null StrictHostKeyChecking no PasswordAuthentication no IdentityFile /home/pan/Work/vagrant/centos/.vagrant/machines/default/virtualbox/private_key IdentitiesOnly yes LogLevel FATALæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥é€šè¿‡ ssh å·¥å…·è¿æ¥åˆ°è™šæ‹Ÿæœºï¼Œå¦‚ä¸‹å‘½ä»¤ssh vagrant@127.0.0.1 -p 2222 -i .vagrant/machines/default/virtualbox/private_keyvagrantç”¨æˆ·çš„é»˜è®¤å¯†ç ä¸ºvagrantç›¸å…³å‚æ•°å‚æ•°-pï¼šæŒ‡å®šsshç«¯å£-iï¼šæŒ‡å®šsshç§é’¥æ–‡ä»¶ æŸ¥çœ‹è™šæ‹ŸæœºçŠ¶æ€vagrant status è™šæ‹Ÿæœºå…³æœºvagrant halt æš‚åœè™šæ‹Ÿæœº# å†æ¬¡å¯åŠ¨è™šæ‹Ÿæœºvagrant up# é€€å‡ºè™šæ‹Ÿæœºexit# æš‚åœè™šæ‹Ÿæœºvagrant suspend# ç»§ç»­è¿è¡Œè™šæ‹Ÿæœºvagrant resumevagrant å°†ä¼šåœ¨è™šæ‹Ÿæœºæš‚åœä¹‹åï¼ŒæŠŠæ•°æ®å­˜å‚¨åˆ°æˆ‘ä»¬æœ¬åœ°ç¡¬ç›˜ï¼Œä¸‹æ¬¡å¼€å¯æ—¶ï¼Œå°†ä»ç¡¬ç›˜è¯»å–æ¢å¤ã€‚åœ¨è™šæ‹Ÿæœºæš‚åœçš„è¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºç›¸å…³æœåŠ¡çš„çŠ¶æ€ä¼šè¿›è¡Œä¿å­˜ï¼Œå¦‚httpd æœåŠ¡çš„æ­£åœ¨è¿è¡Œï¼Œè™šæ‹Ÿæœºæš‚åœåå†ç»§ç»­è¿è¡Œè™šæ‹Ÿæœºï¼Œhttpd æœåŠ¡ä¹Ÿä¼šç»§ç»­è¿è¡Œ é‡å¯è™šæ‹Ÿæœºåœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰§è¡Œvagrant reloadï¼Œè™šæ‹Ÿæœºå°†ä¼šå…ˆæ‰§è¡Œå…³æœºåŠ¨ä½œï¼Œåæ‰§è¡Œå¼€æœºåŠ¨ä½œã€‚ é”€æ¯å½“å‰çš„è™šæ‹Ÿæœºvagrant destroyé”€æ¯è™šæ‹Ÿæœºæ“ä½œä¼šå°†è™šæ‹Ÿæœºè¿›è¡Œå…³æœºååˆ é™¤å®ä¾‹ï¼Œå¦‚æœè™šæ‹Ÿæœºå·²ç»å¤„äºå…³æœºçŠ¶æ€å°†ç›´æ¥åˆ é™¤ã€‚æ­¤å‘½ä»¤åªä¼šé”€æ¯æˆ‘ä»¬åœ¨å½“å‰ç›®å½•åˆ›å»ºçš„ è™šæ‹Ÿæœºï¼Œä¸ä¼šé”€æ¯ boxã€‚æ­¤æ—¶æˆ‘ä»¬ä½¿ç”¨ vagrant status å‘½ä»¤æŸ¥çœ‹è™šæ‹ŸæœºçŠ¶æ€ï¼Œä¼šçœ‹åˆ°è™šæ‹Ÿæœºå¤„äº not created çŠ¶æ€ã€‚ä¸‰. ç”¨Vagrantfileå®šä¹‰è™šæ‹Ÿæœº3.1 æ·»åŠ é¢å¤–å…±äº«ç›®å½•å®é™…ä¸Šï¼Œåœ¨è™šæ‹Ÿæœºåˆ›å»ºçš„æ—¶å€™ï¼Œvagrant ä¼šå°†é¡¹ç›®ç›®å½•è‡ªåŠ¨æŒ‚è½½åˆ° è™šæ‹Ÿæœºé‡Œçš„ /vagrant ç›®å½•ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ å®šä¹‰ Vagrantfile çš„æ–¹å¼æ¥æŒ‚è½½å…¶ä»–ç›®å½•ã€‚æ‰“å¼€ Vagrantfile æ‰¾åˆ° # config.vm.synced_folder \"../data\", \"/vagrant_data\" æ‰€åœ¨çš„è¡Œï¼Œå»æ‰æ³¨è§†ç¬¦å· â€œ#â€ï¼Œå³å®šä¹‰äº†ä¸€ä¸ªç›®å½•æŒ‚è½½è§„åˆ™ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨ å®¿ä¸»æœºå½“å‰ç›®å½•çš„ä¸Šçº§ç›®å½•ä¸‹ çš„ data ç›®å½•ï¼Œ ç¬¬äºŒä¸ªå‚æ•° ä»£è¡¨æŒ‚è½½ åˆ°è™šæ‹Ÿæœºé‡Œçš„ /vagrant_data ç›®å½• ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ åé¢çš„å‚æ•°ï¼Œæœ€ç»ˆä»£ç å¦‚ä¸‹config.vm.synced_folder \"../data\", \"/vagrant_data\", create: true, owner: \"root\", group: \"root\"create: trueï¼šä»£è¡¨å¦‚æœå®¿ä¸»æœºä¸å­˜åœ¨å¯¹åº”çš„ç›®å½•ï¼Œå°†ä¼šåˆ›å»ºï¼›owner: â€œrootâ€ï¼šä»£è¡¨æŒ‚è½½åˆ°è™šæ‹Ÿæœºåï¼Œç›®å½•çš„æ‹¥æœ‰è€…æ˜¯ rootï¼›group: â€œrootâ€ï¼šä»£è¡¨æŒ‚è½½åˆ°è™šæ‹Ÿæœºåï¼Œç›®å½•çš„æ‰€å±çš„ç¾¤ç»„æ˜¯ rootã€‚ä¿å­˜å¥½Vagrantfileä¹‹åï¼Œæ‰§è¡Œvagrant reloadå³å®Œæˆè™šæ‹Ÿæœºçš„é‡å¯å¹¶æŒ‚è½½ä¸Šå¯¹åº”çš„ç›®å½•ã€‚å¦‚æœæ‰§è¡ŒæŠ¥é”™çš„è¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨vagrant plugin install vagrant-vbguest --plugin-version 0.21 å®‰è£…vbguestæ’ä»¶åå†æ¬¡é‡å¯è™šæ‹Ÿæœºã€‚3.2 ç½‘ç»œé…ç½®æˆ‘ä»¬é€šå¸¸éœ€è¦è·Ÿè™šæ‹Ÿæœºè¿›è¡Œé€šä¿¡ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è™šæ‹Ÿæœºä¸Šå®‰è£…äº†ä¸€ä¸ªwebæœåŠ¡ï¼Œéœ€è¦é€šè¿‡è‡ªå·±ç”µè„‘çš„æµè§ˆå™¨æ‰“å¼€è™šæ‹Ÿæœºä¸Šæ­å»ºçš„webæœåŠ¡ã€‚è¿™å°±éœ€è¦æˆ‘ä»¬é…ç½®è™šæ‹Ÿæœºçš„ç½‘ç»œï¼Œå®¿ä¸»æœºæ‰èƒ½ä¸è™šæ‹Ÿæœºæ­£å¸¸é€šä¿¡ã€‚vagrant æä¾›ä¸‰ç§ç½‘ç»œçš„é…ç½®ã€‚ ç«¯å£è½¬å‘ï¼ˆforwarded_portï¼‰å¦‚æŠŠå®¿ä¸»æœºçš„ 8080 ç«¯å£ï¼Œè½¬å‘åˆ°è™šæ‹Ÿæœºçš„ 80 ç«¯å£ï¼Œè¿™æ · å¦‚æœåœ¨å®¿ä¸»æœºè®¿é—® http://localhost:8080 å°†å¯¹è½¬å‘åˆ°è™šæ‹Ÿæœºçš„ 80 ç«¯å£æœåŠ¡ã€‚è¿™ç§æ–¹æ³•ä¸å¤ªçµæ´»ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é…ç½®æ‰€æœ‰éœ€è¦è½¬å‘çš„ç«¯å£ã€‚ ç§æœ‰ç½‘ç»œï¼ˆprivate_networkï¼‰ä¸ºè™šæ‹Ÿæœºæ‰‹åŠ¨è®¾ç½®IPåœ°å€ï¼Œé€šè¿‡IPåœ°å€æˆ‘ä»¬çš„å®¿ä¸»æœºå°±å¯ä»¥ä¸è™šæ‹Ÿæœºä¹‹é—´é€šä¿¡äº†ï¼Œä¸è¿‡ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡æˆ‘ä»¬çš„å®¿ä¸»æœºè®¿é—®è™šæ‹Ÿæœºã€‚ å…¬æœ‰ç½‘ç»œï¼ˆpublic_networkï¼‰å…¬æœ‰ç½‘ç»œä¼šæŠŠè™šæ‹Ÿæœºé…ç½®æˆåœ¨åŒä¸€ä¸ªå±€åŸŸç½‘å†…å¯ä»¥è®¿é—®çš„ä¸€å°è®¾å¤‡ã€‚æ¯”å¦‚æˆ‘æˆ‘ä»¬çš„ç”µè„‘é“¾æ¥ä¸€å°è·¯ç”±å™¨ï¼Œé‚£ä¹ˆå…¶ä»–è¿æ¥è¿™å°è·¯ç”±å™¨çš„è®¾å¤‡ï¼ˆå…¶ä»–ç”µè„‘ã€å¹³æ¿ç”µè„‘ã€æ‰‹æœºç­‰ï¼‰ä¹Ÿå¯ä»¥è®¿é—®åˆ°æˆ‘ä»¬ç”µè„‘é‡Œçš„è™šæ‹Ÿæœºã€‚ é…ç½®ç§æœ‰ç½‘ç»œ æ‰¾åˆ° config.vm.network \"private_network\" æ‰€åœ¨è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œç¬¬2ä¸ªå‚æ•°æ˜¯æŒ‡å®šçš„ipåœ°å€config.vm.network \"private_network\", ip: \"192.168.33.10\"æ¥ä¸‹æ¥ç”¨ping 192.168.33.10å‘½ä»¤å»éªŒè¯ï¼Œå¦‚æœæœ‰è¿”å›ï¼Œä»£è¡¨ç§æœ‰ç½‘ç»œè®¾ç½®æˆåŠŸã€‚ é…ç½®å…±æœ‰ç½‘ç»œæ‰¾åˆ°config.vm.network \"public_network\"æ‰€åœ¨è¡Œï¼Œå–æ¶ˆæ³¨é‡Šï¼Œå¹¶ä¸”æ³¨é‡Šç§æœ‰ç½‘ç»œçš„é…ç½®ã€‚åæ‰§è¡Œvagrant reloadé‡æ–°åŠ è½½ Vagrantfile æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦é€‰æ‹©æŒ‡å®šçš„ç½‘å¡ã€‚å¦‚ä¸‹è¾“å‡ºå†…å®¹ï¼špan@pan-PC:~/Work/vagrant/ubuntu$ vagrant reload==&gt; default: Attempting graceful shutdown of VM...==&gt; default: Checking if box 'ubuntu/xenial64' version '20210804.0.0' is up to date...==&gt; default: Clearing any previously set forwarded ports...==&gt; default: Clearing any previously set network interfaces...==&gt; default: Available bridged network interfaces:1) enp3s02) docker03) vethc80d1c84) vethca1c3e45) veth39928446) veth2014eaa7) vethd2642b28) veth2b5b6709) veth21318b5==&gt; default: When choosing an interface, it is usually the one that is==&gt; default: being used to connect to the internet.==&gt; default: default: Which interface should the network bridge to?æˆ‘ä»¬éœ€è¦é€‰æ‹©å¯¹åº”çš„ç½‘å¡å³å¯ï¼Œæ­¤æ—¶æˆ‘éœ€è¦è¾“å…¥1åæŒ‰å›è½¦ï¼Œå› ä¸ºenp3s0æ˜¯æˆ‘ç”µè„‘çš„å®ä½“ç½‘å¡åç§°ï¼Œè€Œå…¶ä»–é€‰é¡¹éƒ½æ˜¯é€šè¿‡è½¯ä»¶åˆ›å»ºçš„è™šæ‹Ÿç½‘å¡ã€‚3.3 è™šæ‹Ÿæœºæ‰“åŒ…æˆ‘ä»¬å¯ä»¥å¯¹æ­£åœ¨è¿è¡Œçš„æŸä¸ªè™šæ‹Ÿæœºè¿›è¡Œæ‰“åŒ…ç”Ÿæˆé•œåƒã€‚è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨æ–°çš„é•œåƒè¿›è¡Œåˆ›å»ºè™šæ‹Ÿæœºï¼Œé‚£ä¹ˆæ–°åˆ›å»ºçš„è™šæ‹Ÿæœºä¼šè·Ÿæ‰“åŒ…æ—¶çš„è™šæ‹Ÿæœºç¯å¢ƒä¸€è‡´ã€‚æ­¥éª¤å¦‚ä¸‹ï¼šï¼ˆ1ï¼‰å…ˆåœ¨è™šæ‹Ÿæœºåˆ é™¤ç½‘å¡å®šä¹‰æ–‡ä»¶sudo rm -rf /etc/udev/rules.d/70-persistent-net.rulesï¼ˆ2ï¼‰é€€å‡ºè™šæ‹Ÿæœºï¼Œè¿›è¡Œæ‰“åŒ…vagrant packageæ­¤æ—¶åœ¨å½“å‰ç›®å½•ç”Ÿæˆpackage.boxé•œåƒæ–‡ä»¶ï¼ˆ3ï¼‰å°†é•œåƒæ–‡ä»¶å¯¼å…¥boxä¸­# å°†å¯¼å…¥çš„boxå‘½åä¸º jkdev/ubuntuvagrant box add jkdev/ubuntu package.boxå¯¼å…¥æˆåŠŸåï¼Œå³å¯ä½¿ç”¨ jkdev/ubuntu åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº3.4 åˆ›å»ºå¤šå°è™šæ‹Ÿæœºåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šæŠŠ web æœåŠ¡æ”¾åœ¨ä¸€å°æˆ–è€…å¤šå°æœåŠ¡å™¨ï¼Œ æ•°æ®åº“æœåŠ¡å™¨æ”¾åœ¨ä¸€å°æœåŠ¡å™¨ã€‚é‚£ä¹ˆåœ¨æœ¬åœ°å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å»æ¨¡æ‹Ÿå¯¹åº”çš„æœåŠ¡å™¨ç¯å¢ƒã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¤šå°è™šæ‹Ÿæœºï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®çš„æœåŠ¡å™¨ç¯å¢ƒã€‚å®é™…ä¸Šï¼Œ Vagrantfile å¯ä»¥åŒæ—¶å®šä¹‰å¤šå°æœåŠ¡å™¨ï¼Œæ¯ä¸€å°ä¸»æœºéƒ½å¯ä»¥æœ‰è‡ªå·±çš„é…ç½®ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦æŠŠæ¯ä¸€å°ä¸»æœºçš„ç½‘ç»œé…ç½®å¥½ï¼Œé‚£ä¹ˆå„å°æœåŠ¡å™¨ä¹‹é—´å°±å¯ä»¥è¿›è¡Œé€šä¿¡äº†ã€‚åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š# åˆ›å»ºç›®å½•mkdir project# åˆå§‹åŒ–Vagrantfilevagrant init ubuntu/xenial64åœ¨Vagranfile åœ¨config.vm.box = \"ubuntu/xenial64\"ä¸‹é¢çš„ä¸€è¡Œæ·»åŠ ä»¥ä¸‹ä»£ç # å®šä¹‰åä¸ºdevelopmentçš„è™šæ‹Ÿæœºï¼Œå¹¶å¯ç”¨è¯¥è™šæ‹Ÿæœºconfig.vm.define \"development\" do |development|end# å®šä¹‰åä¸ºproductionçš„è™šæ‹Ÿæœºï¼Œå¹¶å¯ç”¨è¯¥è™šæ‹Ÿæœºconfig.vm.define \"production\" do |production|endä¿å­˜æ–‡ä»¶ä¹‹åï¼Œä½¿ç”¨vagrant upå¯åŠ¨è™šæ‹Ÿæœºï¼Œæ­¤æ—¶åŒæ—¶å¼€å¯ä¸¤ä¸ªè™šæ‹Ÿæœºã€‚å¯åŠ¨å®Œæ¯•åä½¿ç”¨vagrant statusï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¯åŠ¨äº†ä¸¤ä¸ªè™šæ‹Ÿæœºpan@pan-PC:~/Work/vagrant/test$ vagrant statusCurrent machine states:development running (virtualbox)production running (virtualbox)This environment represents multiple VMs. The VMs are all listedabove with their current state. For more information about a specificVM, run `vagrant status NAME`.pan@pan-PC:~/Work/vagrant/test$å¦‚æœæˆ‘ä»¬åªæƒ³å¯åŠ¨ä¸€å°è™šæ‹Ÿæœºï¼Œåœ¨å¯åŠ¨å‘½ä»¤çš„åé¢æŒ‡å®šå¯¹åº”çš„è™šæ‹Ÿæœºåç§°å³å¯ï¼Œå¦‚vagrant up productionã€‚å¦‚æœæˆ‘ä»¬éœ€è¦è¿æ¥è¯¥è™šæ‹Ÿæœºï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç vagrant ssh production3.5 é…ç½®å¤šå°è™šæ‹Ÿæœºçš„ç½‘ç»œåœ¨4ä¸­Vagrantfileæ–‡ä»¶é‡Œï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤å°è™šæ‹Ÿæœºï¼Œè¿™ä¸¤å°è™šæ‹Ÿæœºéƒ½åŸºäºubuntu/xenial64ï¼ŒåŸå› æ˜¯è¯¥é…ç½®ä¸å®šä¹‰è™šæ‹Ÿæœºçš„é…ç½®å±äºåŒä¸€çº§ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¸ºæŸå°è™šæ‹Ÿæœºå®šä¹‰ç‹¬ç«‹çš„é…ç½®ï¼Œæˆ‘ä»¬éœ€è¦å°†é…ç½®å†…å®¹å®šä¹‰åœ¨config.vm.defineå’Œendä¹‹é—´ã€‚å¦‚ä¸‹æˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªä¸»æœºçš„ç§æœ‰ç½‘ç»œï¼Œæ³¨æ„ç§æœ‰ç½‘ç»œçš„IPåœ°å€ä¸è¦å’Œå®¿ä¸»æœºè¿æ¥çš„è·¯ç”±å™¨IPåœ°å€é‡å¤ã€‚å¦‚ä¸‹é…ç½®config.vm.define \"development\" do |development| development.vm.network \"private_network\", ip: \"192.168.33.11\"endconfig.vm.define \"production\" do |production| production.vm.network \"private_network\", ip: \"192.168.33.12\" endå†ä½¿ç”¨vagrant reloadå³å¯å®Œæˆé…ç½®çš„é‡åŠ è½½ã€‚3.6 å®šä¹‰ä¸»æœºååœ¨5ä¸­ï¼Œæˆ‘ä»¬ä¸€å®šé…ç½®å¥½äº†ä¸»æœºçš„IPåœ°å€ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¿½åŠ é…ç½®ï¼Œå®šä¹‰ä¸»æœºçš„åç§°ï¼Œå¦‚ä¸‹ä»£ç ï¼šconfig.vm.define \"development\" do |development| development.vm.network \"private_network\", ip: \"192.168.33.11\" development.vm.hostname = \"dev\"endconfig.vm.define \"production\" do |production| production.vm.network \"private_network\", ip: \"192.168.33.12\" production.vm.hostname = \"pro\"end3.7 è‡ªå®šä¹‰åŒæ­¥ç›®å½•é»˜è®¤é…ç½®ä¸‹ï¼Œå¤šå°è™šæ‹Ÿæœºä¼šè‡ªåŠ¨å…±äº«ç”µè„‘ä¸Šé¡¹ç›®æ‰€åœ¨ç›®å½•ï¼Œåœ¨è™šæ‹Ÿæœºé‡Œä¼šæ˜ å°„åˆ°/vagrantç›®å½•ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å•ç‹¬ä¸ºä¸åŒè™šæ‹Ÿæœºè®¾ç½®ä¸åŒçš„ç›®å½•ï¼Œé¦–å…ˆåœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸¤ä¸ªç›®å½•devå’Œproï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶å¦‚ä¸‹config.vm.define \"development\" do |development| development.vm.network \"private_network\", ip: \"192.168.33.11\" development.vm.hostname = \"dev\" # å°†dev ç›®å½•æŒ‚è½½åˆ°/vagrant_devç›®å½• development.vm.synced_folder \"dev\", \"/vagrant_dev\"endconfig.vm.define \"production\" do |production| production.vm.network \"private_network\", ip: \"192.168.33.12\" production.vm.hostname = \"pro\" # å°†pro ç›®å½•æŒ‚è½½åˆ°/vagrant_proç›®å½• production.vm.synced_folder \"pro\", \"/vagrant_pro\"end3.8 æŒ‡å®šcpuæ ¸å¿ƒå’Œå†…å­˜æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰è™šæ‹Ÿæœºçš„å†…å­˜å’Œæ ¸å¿ƒæ•°ï¼Œå¦‚ä¸‹ä»£ç config.vm.define \"development\" do |development| development.vm.network \"private_network\", ip: \"192.168.33.11\" development.vm.hostname = \"dev\" # å°†dev ç›®å½•æŒ‚è½½åˆ°/vagrant_devç›®å½• development.vm.synced_folder \"dev\", \"/vagrant_dev\" # æŒ‡å®šæ ¸å¿ƒæ•°å’Œå†…å­˜ config.vm.provider \"virtualbox\" do |v| v.memory = 1024 v.cpus = 2 endendconfig.vm.define \"production\" do |production| production.vm.network \"private_network\", ip: \"192.168.33.12\" production.vm.hostname = \"pro\" # å°†pro ç›®å½•æŒ‚è½½åˆ°/vagrant_proç›®å½• production.vm.synced_folder \"pro\", \"/vagrant_pro\" # æŒ‡å®šæ ¸å¿ƒæ•°å’Œå†…å­˜ config.vm.provider \"virtualbox\" do |v| v.memory = 1024 v.cpus = 2 endendä½¿ç”¨vagrant reloadå®Œæˆè™šæ‹Ÿæœºé‡åŠ è½½" }, { "title": "æ€æ ·ä½¿ç”¨Multipasså¿«é€Ÿåˆ›å»ºå’Œç®¡ç†Ubuntuè™šæ‹Ÿæœºï¼Ÿ", "url": "/posts/tools_run-ubuntu-on-multipass.html", "categories": "å·¥å…·", "tags": "è™šæ‹Ÿæœº", "date": "2023-01-31 21:40:00 +0800", "snippet": " multipassæ˜¯Ubuntuå®˜æ–¹æä¾›ç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºçš„æ¡Œé¢å·¥å…·ï¼Œæœ¬æ–‡å°†ä»‹ç»æ€æ ·ä½¿ç”¨multipassæ­å»ºUbuntu Serverè™šæ‹Ÿæœºã€‚multipasså¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºå’Œç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºã€‚ä¸€ã€å®‰è£…multipassçš„å®˜æ–¹ç½‘ç«™æ˜¯https://multipass.run/ï¼Œ æˆ‘ä»¬å¯ä»¥ä¸‹è½½Linux/Windows/Macç‰ˆæœ¬ã€‚é€‰æ‹©å¯¹åº”çš„ç‰ˆ...", "content": " multipassæ˜¯Ubuntuå®˜æ–¹æä¾›ç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºçš„æ¡Œé¢å·¥å…·ï¼Œæœ¬æ–‡å°†ä»‹ç»æ€æ ·ä½¿ç”¨multipassæ­å»ºUbuntu Serverè™šæ‹Ÿæœºã€‚multipasså¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåˆ›å»ºå’Œç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºã€‚ä¸€ã€å®‰è£…multipassçš„å®˜æ–¹ç½‘ç«™æ˜¯https://multipass.run/ï¼Œ æˆ‘ä»¬å¯ä»¥ä¸‹è½½Linux/Windows/Macç‰ˆæœ¬ã€‚é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›è¡Œå®‰è£…ã€‚äºŒã€ä½¿ç”¨2.1 æŸ¥çœ‹å‘½ä»¤å¸®åŠ©æŸ¥çœ‹å¸®åŠ©multipass --help# æˆ–multipass -hæŸ¥çœ‹æŸä¸ªlaunchæŒ‡ä»¤çš„å¸®åŠ©multipass launch --help# æˆ–multipass launch -h2.2 åˆ›å»ºå®ä¾‹ä½¿ç”¨æœ€æ–°LTSé•œåƒåˆ›å»ºå®ä¾‹multipass launch --name ubuntuæŸ¥çœ‹å¯ç”¨çš„é•œåƒmultipass findä½¿ç”¨æŒ‡å®šLTSç‰ˆæœ¬é•œåƒåˆ›å»ºå®ä¾‹multipass launch --name ubuntu1 18.042.3 æ“ä½œå®ä¾‹è¿›å…¥å®ä¾‹çš„shellç»ˆç«¯# å¦‚æœå¯¹åº”å®ä¾‹æ²¡æœ‰è¿è¡Œçš„è¯ï¼Œä¼šä¸»åŠ¨è¿è¡Œå¯¹åº”å®ä¾‹multipass shell ubuntuæ‰§è¡Œå®ä¾‹çš„shellå‘½ä»¤# æŸ¥çœ‹å®ä¾‹ç‰ˆæœ¬ï¼Œå¦‚æœå®ä¾‹æ²¡æœ‰åœ¨è¿è¡Œï¼Œå°†ä¼šæç¤ºé”™è¯¯multipass exec ubuntu -- lsb_release -a2.4 æŸ¥çœ‹å’Œç®¡ç†å®ä¾‹æŸ¥çœ‹è™šæ‹Ÿæœºå®ä¾‹åˆ—è¡¨multipass liståœæ­¢å’Œå¯åŠ¨å®ä¾‹# åœæ­¢ubuntuå’Œubuntu1multipass stop ubuntu ubuntu1# å¯åŠ¨ubuntumultipass start ubuntuæ¸…ç©ºä¸éœ€è¦çš„å®ä¾‹multipass delete ubuntu1multipass purgeä½¿ç”¨â€“allå¯¹æ“ä½œæ‰€æœ‰å®ä¾‹# å¯åŠ¨æ‰€æœ‰å®ä¾‹multipass start --all# åœæ­¢æ‰€æœ‰å®ä¾‹multipass stop --all# åˆ é™¤æ‰€æœ‰å®ä¾‹multipass delete --all" }, { "title": "æœ¬åœ°æŸ¥çœ‹Swaggerå¯¼å‡ºçš„Jsonæ–‡ä»¶çš„æ–¹æ³•", "url": "/posts/tools_preview-swagger-json.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:36:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°å¯¹äºSwagger APIæ–‡æ¡£ï¼Œå¯ä»¥åœ¨æœ¬åœ°éƒ¨ç½²Swagger UIç”¨äºæŸ¥çœ‹ã€‚ä»¥ä¸‹æ˜¯æ­å»ºæ­¥éª¤äºŒã€æ­å»ºè¿‡ç¨‹2.1 å®‰è£…npmåé¢æˆ‘ä»¬ç”¨åˆ°çš„å·¥å…·éƒ½ä¼šç”¨åˆ°npmï¼Œæ‰€ä»¥å…ˆå®‰è£…npmå®‰è£…npmå¯ä»¥å‚è€ƒhttps://blog.jkdev.cn/index.php/archives/277/2.2 å®‰è£…swagger-uié€šè¿‡gitå®‰è£…swagger-uiï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœç”¨æ·˜å®é•œåƒå¯èƒ½å®‰è£…å¤±è´¥ï¼Œ...", "content": "ä¸€ã€æ¦‚è¿°å¯¹äºSwagger APIæ–‡æ¡£ï¼Œå¯ä»¥åœ¨æœ¬åœ°éƒ¨ç½²Swagger UIç”¨äºæŸ¥çœ‹ã€‚ä»¥ä¸‹æ˜¯æ­å»ºæ­¥éª¤äºŒã€æ­å»ºè¿‡ç¨‹2.1 å®‰è£…npmåé¢æˆ‘ä»¬ç”¨åˆ°çš„å·¥å…·éƒ½ä¼šç”¨åˆ°npmï¼Œæ‰€ä»¥å…ˆå®‰è£…npmå®‰è£…npmå¯ä»¥å‚è€ƒhttps://blog.jkdev.cn/index.php/archives/277/2.2 å®‰è£…swagger-uié€šè¿‡gitå®‰è£…swagger-uiï¼Œåœ¨å®‰è£…è¿‡ç¨‹ä¸­å¦‚æœç”¨æ·˜å®é•œåƒå¯èƒ½å®‰è£…å¤±è´¥ï¼Œé‡åˆ°å¤±è´¥çš„æƒ…å†µå¯ä»¥å°è¯•è¿˜åŸé»˜è®¤çš„npmé•œåƒgit clone https://github.com/swagger-api/swagger-ui.gitcd swagger-uinpm installnpm run devçœ‹åˆ°æˆåŠŸæç¤ºä¹‹åï¼Œå¯ä»¥æ‰“å¼€åœ¨æµè§ˆæ‰“å¼€å™¨ http://localhost:3200ï¼Œå°±å¯ä»¥çœ‹åˆ°æœ¬åœ°çš„swagger-uiæœåŠ¡2.3 å®‰è£…http-serverhttp-serverå¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„httpæœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°†swaggeræ–‡ä»¶æ”¾åœ¨æœåŠ¡å™¨ä¸­ï¼Œç”¨swagger-uiè®¿é—®httpè·¯å¾„çš„æ–‡æ¡£npm install --global http-serveråŠ å…¥æˆ‘ä»¬çš„æ–‡ä»¶åœ¨~/Documents/swagger.jsonæ¥ä¸‹æ¥è¿›å…¥åˆ°æ–‡æ¡£ç›®å½•ï¼Œå¹¶å¼€å¯httpæœåŠ¡cd ~/Documents/http-server --cors--corså‚æ•°ä»£è¡¨èƒ½è·¨åŸŸè®¿é—®æˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨æŸ¥çœ‹æ–‡æ¡£äº†ï¼Œå¦‚ä¸‹å›¾" }, { "title": "Let's Encryptå…è´¹SSLé€šé…è¯ä¹¦çš„ç”³è¯·ä¸ç»­æœŸæ–¹æ³•", "url": "/posts/tools_get-ssl-certification.html", "categories": "å·¥å…·", "tags": "https", "date": "2023-01-31 21:33:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°Letâ€™s Encrypt æ˜¯å…è´¹ã€å¼€æ”¾å’Œè‡ªåŠ¨åŒ–çš„è¯ä¹¦é¢å‘æœºæ„ã€‚ç›®å‰æœ‰å¾ˆå¤šç½‘ç«™ä½¿ç”¨Letâ€™s Encryptè¯ä¹¦åšhttpsåŠ å¯†ã€‚æˆ‘ä¹Ÿä¸€ç›´åœ¨ç”¨ï¼Œä¸è¿‡ä»¥å‰éƒ½æ˜¯ç”¨çš„å•åŸŸåè¯ä¹¦ï¼Œæ–°å»ºç½‘ç«™å°±éœ€è¦é‡æ–°ç”³è¯·ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ä½†ç°åœ¨å·²ç»å¯ä»¥ç”³è¯·Letâ€™s Encrypté€šé…è¯ä¹¦äº†ã€‚å®é™…ä¸Šï¼Œç”³è¯· Letâ€™s Encrypt ç”Ÿæˆè¯ä¹¦çš„å·¥å…·ä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘ç”¨è¿‡ cerbot å’Œ acme.shã€‚ä»¥å‰ç”¨ cerb...", "content": "ä¸€ã€æ¦‚è¿°Letâ€™s Encrypt æ˜¯å…è´¹ã€å¼€æ”¾å’Œè‡ªåŠ¨åŒ–çš„è¯ä¹¦é¢å‘æœºæ„ã€‚ç›®å‰æœ‰å¾ˆå¤šç½‘ç«™ä½¿ç”¨Letâ€™s Encryptè¯ä¹¦åšhttpsåŠ å¯†ã€‚æˆ‘ä¹Ÿä¸€ç›´åœ¨ç”¨ï¼Œä¸è¿‡ä»¥å‰éƒ½æ˜¯ç”¨çš„å•åŸŸåè¯ä¹¦ï¼Œæ–°å»ºç½‘ç«™å°±éœ€è¦é‡æ–°ç”³è¯·ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ä½†ç°åœ¨å·²ç»å¯ä»¥ç”³è¯·Letâ€™s Encrypté€šé…è¯ä¹¦äº†ã€‚å®é™…ä¸Šï¼Œç”³è¯· Letâ€™s Encrypt ç”Ÿæˆè¯ä¹¦çš„å·¥å…·ä¸æ­¢ä¸€ä¸ªï¼Œæˆ‘ç”¨è¿‡ cerbot å’Œ acme.shã€‚ä»¥å‰ç”¨ cerbot ç”³è¯·çš„æ—¶å€™ä¸å¾—ä¸åœæ‰ 80 ç«¯å£çš„æœåŠ¡ï¼Œæ„Ÿè§‰ä¸å¤ªå‹å¥½ã€‚åæ¥ç”¨ acme.sh ç®€å•ä¸€ç‚¹ï¼Œæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ acme.sh æ¥ç‹¬ç«‹ç”³è¯·åŸŸåé€šé…è¯ä¹¦ã€‚acme.sh é¡¹ç›®åœ°å€ä¸ºhttps://github.com/acmesh-official/acme.shï¼Œæœ¬æ–‡å‚è€ƒå®˜æ–¹æ–‡æ¡£äºŒã€å®‰è£…2.1 å®‰è£…socatå’Œcurlä»¥ä¸‹ä»¥debian/ubuntuä¸ºä¾‹ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹apt install socat curl # debian/ubuntu ç¯å¢ƒä»¥ä¸‹ä»¥alpineä¸ºä¾‹ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹apk add socat curl # alpine ç¯å¢ƒ 2.2 å®‰è£… acmese.shcurl https://get.acme.sh | shå®‰è£…å®Œæˆä¹‹åä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆ .acme.sh ç›®å½•ä¸‰ã€ç”Ÿæˆè¯ä¹¦3.1 é…ç½®åŸŸåæœåŠ¡å•†çš„AccessKeyç”³è¯·åŸŸåè¯ä¹¦å¯ä»¥æ‰‹åŠ¨æ·»åŠ åŸŸåè§£æéªŒè¯ã€‚ä½†ä½¿ç”¨åŸŸåæœåŠ¡å•†æä¾›çš„ API è‡ªåŠ¨æ·»åŠ txtè§£æçš„æ–¹å¼æ¥å®ŒæˆéªŒè¯ï¼Œä¼šæ›´æ–¹ä¾¿åç»­å®ç°è‡ªåŠ¨åŒ–çš„sslè¯ä¹¦ç»­è®¢ã€‚æ ¹æ®ä¸åŒç±»å‹çš„åŸŸåæœåŠ¡å•†ï¼Œæˆ‘ä»¬é€‰æ‹©å¯¹åº”çš„DNS API ï¼šhttps://github.com/acmesh-official/acme.sh/wiki/dnsapié¦–å…ˆæˆ‘ä»¬éœ€è¦è·å–åŸŸåæœåŠ¡å•†æä¾›çš„AccessKeyï¼Œè¿™æ˜¯ç”¨æ¥ä½œä¸ºè°ƒç”¨APIçš„å‡­è¯ã€‚å› ä¸ºæˆ‘çš„åŸŸåæ˜¯åœ¨é˜¿é‡Œäº‘ä¹°çš„ï¼Œè¿™é‡Œä»¥é˜¿é‡Œäº‘ä½œä¸ºç¤ºä¾‹ï¼Œå¯ä»¥ç‚¹å‡»è¿™ä¸ªé“¾æ¥ç”³è¯·é˜¿é‡Œäº‘çš„Accesskeyï¼šhttps://usercenter.console.aliyun.com/#/manage/akä½ å¯ä»¥ä½¿ç”¨å…¨å±€çš„AccessKeyï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­è´¦å·çš„AccessKeyã€‚å› ä¸ºå…¨å±€AccessKeyå…·æœ‰çš„é˜¿é‡Œäº‘è´¦å·çš„æ‰€æœ‰æƒé™ï¼Œæ›´å»ºè®®ä½¿ç”¨å­è´¦å·ã€‚è¿™é‡Œæˆ‘ä½¿ç”¨å­è´¦å·çš„AccessKeyï¼ˆä½†æ³¨æ„ï¼Œå­è´¦å·å¿…é¡»è®¾ç½®å¥½dnsç›¸å…³æƒé™ï¼‰ï¼Œç”ŸæˆAccessKey ID å’Œ AccessKey Secret å¦‚ä¸‹å›¾ï¼šè·å–AccessKey IDå’ŒAccess Scretåå°†å®ƒä»¬åŠ å…¥åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­export Ali_Key=\"$KEY\"export Ali_Secret=\"hyddKq5Dm9OBfpCftGRP9Uo3vcFRaa\"3.2 ç”Ÿæˆè¯ä¹¦é…ç½®å¥½ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç”Ÿæˆè¯ä¹¦.acme.sh/acme.sh --issue --dns dns_ali -d jkdev.cn -d *.jkdev.cnè¿™é‡Œç”Ÿæˆä¸¤ä¸ªè¯ä¹¦ï¼Œä¸€ä¸ªæ˜¯ jkdev.cn çš„ï¼Œå¦ä¸€ä¸ªä½¿ç”¨ * æ¥ä»£æ›¿ï¼Œå³å¯ç”Ÿæˆå­åŸŸåçš„é€šé…è¯ä¹¦ã€‚ç”Ÿæˆè¯ä¹¦è¿‡ç¨‹ä¸­ï¼Œä¼šè°ƒç”¨æœåŠ¡å•†APIè‡ªåŠ¨æ·»åŠ ä¸€æ¡ txt çš„åŸŸåè§£æéªŒè¯ï¼ŒéªŒè¯é€šè¿‡åä¼šè‡ªåŠ¨åˆ é™¤è§£æï¼Œè¿™ä¸ªè¿‡ç¨‹å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ã€‚ æ³¨æ„ï¼šå¦‚æœä½ æ²¡æœ‰ä½¿ç”¨çš„é˜¿é‡Œäº‘çš„åŸŸåï¼Œä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤æ˜¯ä¸ç®¡ç”¨çš„ï¼Œè¯·å‚è€ƒ 3.1 ä¸­çš„ DNS APIè¯´æ˜é“¾æ¥ã€‚è¯ä¹¦çš„æœ‰æ•ˆæœŸä¸º90ï¼Œ80å¤©ä¹‹åç»­æœŸï¼Œç»­æœŸå‘½ä»¤å¦‚ä¸‹.acme.sh/acme.sh --renew -d jkdev.cn -d *.jkdev.cnå½“ç„¶äº†ï¼Œä½ å¯ä»¥åšæˆç³»ç»Ÿä»»åŠ¡ï¼Œè‡ªåŠ¨ç»­æœŸï¼Œè¿™é‡Œä¸å†è¯´æ˜ã€‚å››ã€ä½¿ç”¨SSLè¯ä¹¦éƒ¨ç½²httpsç½‘ç«™4.1 éƒ¨ç½²åˆ°ApacheæœåŠ¡å™¨ç”Ÿæˆçš„è¯ä¹¦å¯ä»¥ç”¨äºApache/Nginxç­‰æœåŠ¡å™¨ï¼Œæˆ‘ç”¨çš„æ˜¯Apacheï¼Œæ­¤å¤„å…±äº«ä¸€ä¸‹æˆ‘çš„é…ç½®å‚æ•°&lt;VirtualHost _default_:443&gt; DocumentRoot \"/var/www/html/www\" ServerName www.jkdev.cn SSLEngine on SSLCertificateFile /etc/letsencrypt/live/ssl/test.phy/*.jkdev.cn.cer SSLCertificateKeyFile /etc/letsencrypt/live/ssl/test.phy/*.jkdev.cn.key SSLCertificateChainFile /etc/letsencrypt/live/ssl/test.phy/fullchain.cer &lt;Directory \"/var/www/html/www\"&gt; Options Indexes FollowSymLinks AllowOverride All Require all granted ErrorDocument 404 https://www.jkdev.cn/404.html &lt;/Directory&gt;&lt;/VirtualHost&gt;4.2 éƒ¨ç½²åˆ°NginxæœåŠ¡å™¨ä»¥ä¸‹æ˜¯Nginxé…ç½®æ–‡ä»¶server { listen 443 ssl; server_name admin.jkdev.cn; root /usr/share/nginx/html/php/admin_v2/dist; index index.php index.html index.htm; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; #ç¼“å­˜æœ‰æ•ˆæœŸ ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®® ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; #åŠ å¯†ç®—æ³• ssl_prefer_server_ciphers on; #ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³• location / { try_files $uri $uri/ /index.html; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~* ^/(css|img|js|flv|swf|download)/(.+)$ { root /usr/share/nginx/html/php/admin_v2/dist; } location ~* \\.(eot|ttf|woff|svg|otf)$ { add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers X-Requested-With; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; } location ~ /\\.ht { deny all; }}æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç»™ç•™è¨€è¯„è®ºï¼" }, { "title": "SQLiteçš„å®‰è£…ä¸åŸºæœ¬æ“ä½œæ–¹æ³•", "url": "/posts/tools_sqlite-installation-and-operation.html", "categories": "å·¥å…·", "tags": "sqlie", "date": "2023-01-31 21:31:00 +0800", "snippet": "ä¸€ã€å®‰è£…SQLiteä¸‹è½½é“¾æ¥: https://www.sqlite.org/download.htmlï¼Œæ­¤æ•™ç¨‹åŸºäºæœ€æ–°çš„SQLite3æ•°æ®åº“å¼•æ“1.1 Windowsä» Windows åŒºä¸‹è½½é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ éœ€è¦ä¸‹è½½Â sqlite-tools-win32-*.zipÂ å’ŒÂ sqlite-dll-win32-*.zipÂ å‹ç¼©æ–‡ä»¶ã€‚ åˆ›å»ºæ–‡ä»¶å¤¹ C:\\sqliteï¼Œ...", "content": "ä¸€ã€å®‰è£…SQLiteä¸‹è½½é“¾æ¥: https://www.sqlite.org/download.htmlï¼Œæ­¤æ•™ç¨‹åŸºäºæœ€æ–°çš„SQLite3æ•°æ®åº“å¼•æ“1.1 Windowsä» Windows åŒºä¸‹è½½é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ éœ€è¦ä¸‹è½½Â sqlite-tools-win32-*.zipÂ å’ŒÂ sqlite-dll-win32-*.zipÂ å‹ç¼©æ–‡ä»¶ã€‚ åˆ›å»ºæ–‡ä»¶å¤¹ C:\\sqliteï¼Œå¹¶åœ¨æ­¤æ–‡ä»¶å¤¹ä¸‹è§£å‹ä¸Šé¢ä¸¤ä¸ªå‹ç¼©æ–‡ä»¶ï¼Œå°†å¾—åˆ° sqlite3.defã€sqlite3.dll å’Œ sqlite3.exe æ–‡ä»¶ã€‚ æ·»åŠ  C:\\sqlite åˆ° PATH ç¯å¢ƒå˜é‡ï¼Œæœ€ååœ¨å‘½ä»¤æç¤ºç¬¦ä¸‹ï¼Œä½¿ç”¨Â sqlite3Â å‘½ä»¤ï¼Œå°†æ˜¾ç¤ºå¦‚ä¸‹ç»“æœã€‚ 1.2 Linuxå¾ˆå¤šLinuxéƒ½è‡ªå¸¦SQLiteï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤â€œsqlite3â€å‘½ä»¤æ£€æµ‹SQLiteæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæœ‰ä¸¤ç§å®‰è£…æ–¹å¼ï¼šï¼ˆ1ï¼‰ä½¿ç”¨ä»è½¯ä»¶åº“ä¸­å®‰è£…ï¼Œåœ¨debian/ubuntuç³»ç»Ÿä¸­ï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®Œæˆå®‰è£…sudo apt install sqliteå¦‚æœä½¿ç”¨aptå·¥å…·å®‰è£…ï¼Œaptä¼šå°†sqlite2å’Œsqlite3éƒ½å®‰è£…åˆ°ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨sqliteå’Œsqlite3åŒºåˆ†ä¸åŒçš„ç‰ˆæœ¬ï¼ˆ2ï¼‰ä»æºä»£ç è¿›è¡Œç¼–è¯‘å®‰è£…ä¸‹è½½æºä»£ç sqlite-autoconf-*.tar.gzå®‰è£…æ­¥éª¤å¦‚ä¸‹tar -zxvf sqlite-autoconf-*.tar.gzcd sqlite-autoconf-*./configure --prefix=/usr/local/sqlitemakemake installå°†SQLiteå‘½ä»¤å·¥å…·æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­sudo vim /etc/profileåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹ä»£ç ï¼šPATH = /usr/local/sqlite/bin:$PATHäºŒã€SQLiteåŸºæœ¬å‘½ä»¤2.1 åŸºæœ¬æ“ä½œï¼ˆ1ï¼‰è¿›å…¥æ•°æ®åº“å‘½ä»¤å·¥å…·sqlite3ï¼ˆ2ï¼‰é€€å‡ºå‘½ä»¤å·¥å…·.quit2.2 åˆ›å»ºæ•°æ®åº“sqlite3 DatabaseName.dbSQLiteæ•°æ®åº“æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ•°æ®åº“ç³»ç»Ÿï¼Œæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­2.3 åˆ›å»ºè¡¨ï¼ˆ1ï¼‰è¯­æ³•ç”¨.tableså‘½ä»¤æŸ¥çœ‹æ‰€æœ‰è¡¨.tablesåˆ›å»ºè¡¨åŸºæœ¬è¯­æ³•å¦‚ä¸‹CREATE TABLE table_name( column1 datatype PRIMARY KEY(one or more columns), column2 datatype, column3 datatype, ..... columnN datatype,);ï¼ˆ2ç¤ºä¾‹ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ª user è¡¨ï¼Œid ä½œä¸ºä¸»é”®ï¼ŒNOT NULL çš„çº¦æŸè¡¨ç¤ºåœ¨è¡¨ä¸­åˆ›å»ºçºªå½•æ—¶è¿™äº›å­—æ®µä¸èƒ½ä¸º NULLCREATE TABLE user( id INT PRIMARY KEY NOT NULL, name TEXT NOT NULL, age INT NOT NULL);2.3 åˆ é™¤è¡¨DROP TABLE table_name;2.4 æ’å…¥ä¸€æ¡æ•°æ®ï¼ˆ1ï¼‰è¯­æ³•INSERTè¯­å¥ç”¨äºSQLiteæ’å…¥æ•°æ®ï¼ŒINSERT INTO è¯­å¥æœ‰ä¸¤ç§åŸºæœ¬è¯­æ³•ï¼Œå¦‚ä¸‹INSERT INTO TABLE_NAME [(column1, column2, column3,...columnN)] VALUES (value1, value2, value3,...valueN);column1ã€column2ã€â€¦columnN æ˜¯è¦æ’å…¥æ•°æ®çš„è¡¨ä¸­çš„åˆ—çš„åç§°ã€‚å¦‚æœè¦ä¸ºè¡¨ä¸­çš„æ‰€æœ‰åˆ—æ·»åŠ å€¼ï¼Œä¹Ÿå¯ä»¥ä¸éœ€è¦åœ¨ SQLite æŸ¥è¯¢ä¸­æŒ‡å®šåˆ—åç§°ã€‚ä½†è¦ç¡®ä¿å€¼çš„é¡ºåºä¸åˆ—åœ¨è¡¨ä¸­çš„é¡ºåºä¸€è‡´ã€‚INSERT INTO TABLE_NAME VALUES (value1,value2,value3,...valueN);ï¼ˆ2ï¼‰ç¤ºä¾‹ä¸‹é¢å®ç°æ•°æ®æ’å…¥ç¤ºä¾‹INSERT INTO user(id,name,age) VALUES(1,'zhangsan',18);INSERT INTO user VALUES(2,'lisi',20);2.5 æŸ¥è¯¢æ•°æ®SQLite çš„Â SELECTÂ è¯­å¥ç”¨äºä» SQLite æ•°æ®åº“è¡¨ä¸­è·å–æ•°æ®ï¼Œä»¥ç»“æœè¡¨çš„å½¢å¼è¿”å›æ•°æ®ã€‚è¿™äº›ç»“æœè¡¨ä¹Ÿè¢«ç§°ä¸ºç»“æœé›†ã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼šSELECT column1, column2, columnN FROM table_name;column1ã€column2â€¦æ˜¯è¡¨çš„å­—æ®µã€‚å¦‚æœæƒ³è·å–æ‰€æœ‰å¯ç”¨çš„å­—æ®µï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•ï¼šSELECT * FROM table_name;" }, { "title": "æ€æ ·é˜»æ­¢Linuxæ‰§è¡Œrm -rf /*å‘½ä»¤", "url": "/posts/tools_prevent-exec-rm-rf.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:30:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°è‡ªå·±åœ¨Debian 9.9ä¸Šæµ‹è¯•æˆåŠŸï¼Œè¯·ç»“åˆæ‚¨æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒï¼Œè°¨æ…æ“ä½œï¼Œåœ¨è¿›è¡Œæµ‹è¯•æ—¶å€™å°½é‡å…ˆä½¿ç”¨ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œè‹¥ç”±äºä½ çš„ä¸æ­£ç¡®æ“ä½œé€ æˆçš„åæœä¸æœ¬äººæ— å…³ä¼—æ‰€å‘¨çŸ¥ï¼ŒLinuxä¸­çš„rm -rf /*å‘½ä»¤æ˜¯ä¸€æ¡ç¾éš¾æ€§çš„å‘½ä»¤ï¼Œå› æ­¤æœ‰çš„è¿ç»´äººå‘˜æƒ³ä¸€äº›åŠæ³•æ¥ç¦æ­¢è¿™æ¡å‘½ä»¤çš„æ‰§è¡Œï¼Œä»Šå¤©æ¼”ç¤ºä¸€ä¸ªç®€å•çš„å·¥å…·ã€‚è¯¥å·¥å…·å¯ä»¥æœ‰æ•ˆé˜»æ­¢rmå‘½ä»¤çš„æ‰§è¡Œï¼Œè®©ç³»ç»Ÿä¸èƒ½æ‰§è¡Œrm -rf /*äºŒã€ä¸‹è½½safe-rmæœ‰è¿™ä¸€ä¸ªå·¥...", "content": "ä¸€ã€æ¦‚è¿°è‡ªå·±åœ¨Debian 9.9ä¸Šæµ‹è¯•æˆåŠŸï¼Œè¯·ç»“åˆæ‚¨æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒï¼Œè°¨æ…æ“ä½œï¼Œåœ¨è¿›è¡Œæµ‹è¯•æ—¶å€™å°½é‡å…ˆä½¿ç”¨ä¸€ä¸ªä¸´æ—¶ç›®å½•ï¼Œè‹¥ç”±äºä½ çš„ä¸æ­£ç¡®æ“ä½œé€ æˆçš„åæœä¸æœ¬äººæ— å…³ä¼—æ‰€å‘¨çŸ¥ï¼ŒLinuxä¸­çš„rm -rf /*å‘½ä»¤æ˜¯ä¸€æ¡ç¾éš¾æ€§çš„å‘½ä»¤ï¼Œå› æ­¤æœ‰çš„è¿ç»´äººå‘˜æƒ³ä¸€äº›åŠæ³•æ¥ç¦æ­¢è¿™æ¡å‘½ä»¤çš„æ‰§è¡Œï¼Œä»Šå¤©æ¼”ç¤ºä¸€ä¸ªç®€å•çš„å·¥å…·ã€‚è¯¥å·¥å…·å¯ä»¥æœ‰æ•ˆé˜»æ­¢rmå‘½ä»¤çš„æ‰§è¡Œï¼Œè®©ç³»ç»Ÿä¸èƒ½æ‰§è¡Œrm -rf /*äºŒã€ä¸‹è½½safe-rmæœ‰è¿™ä¸€ä¸ªå·¥å…·ï¼Œä¹Ÿå°±æ˜¯safe-rmï¼Œæˆ‘ä»¬ç”¨æ¥æ›¿æ¢rmå°±è¡Œäº†ï¼Œå®é™…ä¸Šsafe-rmå°±æ˜¯ä¸€ä¸ªåˆ é™¤å‘½ä»¤ï¼Œåªä¸è¿‡å‘¢å®ƒå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥åšä¸€äº›è¿‡æ»¤å®˜ç½‘ä¸‹è½½https://launchpad.net/safe-rm/+downloadæˆ‘ç›´æ¥ä¸‹è½½0.12ç‰ˆæœ¬wget https://launchpad.net/safe-rm/trunk/0.12/+download/safe-rm-0.12.tar.gzä¸‰ã€æ›¿æ¢ç³»ç»Ÿçš„rmå‘½ä»¤# è§£å‹tar -zxvf safe-rm-0.12.tar.gz# å°†safe-rmå‘½ä»¤å¤åˆ¶åˆ°ç³»ç»Ÿçš„/usr/local/binç›®å½•cp safe-rm-0.12/safe-rm /usr/local/bin/# åˆ›å»ºé“¾æ¥,å°†safe-rmæ›¿æ¢rmln -s /usr/local/bin/safe-rm /usr/local/bin/rmæ­¤æ—¶å·²ç»æ›¿æ¢æ‰rmå‘½ä»¤ï¼Œä¸ºäº†ç¡®ä¿ç¯å¢ƒå˜é‡æœ‰æ•ˆï¼Œæˆ‘ä»¬å°†/usr/local/binç›®å½•è®¾ç½®åœ¨æ‰€æœ‰PATHç¯å¢ƒå˜é‡ä¹‹å‰ï¼Œå…ˆæ›´æ”¹/etc/profileæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä»¥ä¸‹ä»£ç PATH=/usr/local/bin:$PATHç¼–è¾‘å®Œæ¯•ä¹‹å,ä¸ºäº†è®©ç¯å¢ƒå˜é‡åœ¨æ•´ä¸ªç³»ç»Ÿå…¨å±€ç”Ÿæ•ˆ,æˆ‘ä»¬é‡å¯æ“ä½œç³»ç»Ÿ.é‡å¯ä¹‹åæ‰§è¡Œrmå‘½ä»¤å°±ç›¸å½“äºæ‰§è¡Œsafe-rmäº†å››ã€è®¾ç½®è¿‡æ»¤ç›®å½•è¿‡æ»¤ç›®å½•å°†ä¸è¢«åˆ é™¤,ç¼–å†™ /etc/safe-rm.conf æ–‡ä»¶ï¼Œæ·»åŠ è‡ªå·±éœ€è¦è¿‡æ»¤çš„ç›®å½•ï¼Œä»¥ä¸‹æ˜¯é…ç½®ç¤ºä¾‹ï¼Œå®é™…ä¸Šè¦æ ¹æ®ä½ çš„éœ€æ±‚æ¥//*/etc/etc/*/data/data/mysql/data/mysql/datadir/data/mysql/datadir/*/usr/usr/local/usr/local/bin/usr/local/bin/*/ ä»£è¡¨è¿‡æ»¤ //* ä»£è¡¨è¿‡æ»¤ / ä¸‹é¢çš„æ‰€æœ‰æ–‡ä»¶åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘è¿‡æ»¤æ‰safe-rmæ‰€åœ¨ç›®å½•å’Œå…¶é“¾æ¥æ‰€åœ¨ç›®å½•ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¿‡æ»¤å…¶é…ç½®æ–‡ä»¶ï¼Œè¿™æ ·çš„è¯å¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šåšåˆ°å®‰å…¨é˜²æŠ¤äº†ã€‚å¦‚æœé…ç½®æ–‡ä»¶ä¸­ï¼Œæœ‰ /root/test/123 è¿™æ ·ä¸€æ¡è§„åˆ™ï¼Œé‚£ä¹ˆåˆ é™¤/root/test/123æ–‡ä»¶æ—¶ä¼šè¢«è¿‡æ»¤æ‰ï¼Œä½†æ˜¯åˆ é™¤/root/testæ—¶èƒ½æˆåŠŸåˆ é™¤ï¼Œå› æ­¤ä¸æ”¯æŒé€’å½’çš„è§„åˆ™ï¼Œé‚£ä¹ˆé…ç½®æ–‡ä»¶æˆ‘ä»¬åº”è¯¥å†™æˆä»¥ä¸‹æ ¼å¼//root/root/test/root/test/123äº”ã€æµ‹è¯•æ¥ä¸‹æ¥å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»äº†ï¼Œæ‰§è¡Œæµ‹è¯•ä¹‹å‰è¯·ç¡®ä¿ä½ çš„é…ç½®æ–‡ä»¶ç¼–å†™æ­£ç¡®ï¼Œå…¶æ¬¡ï¼Œä½ å‡ºé”™å¯ä¸ä½œè€…æ— å…³!!!å“ˆå“ˆå“ˆå¦‚ä¸‹å›¾:" }, { "title": "æ€æ ·ä½¿ç”¨Dockeré•œåƒæ­å»ºSVNæœåŠ¡", "url": "/posts/tools_install-svn-on-docker.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:28:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°1.åŸºç¡€ç¯å¢ƒ Debian GNU/Linux 9.9 (stretch) Docker version 19.03.4å¦‚æœä½ ä½¿ç”¨å…¶ä»–Linuxå‘è¡Œç‰ˆæœ¬å®‰è£…è¿‡ç¨‹ä¹ŸåŸºæœ¬ä¸€æ ·çš„ï¼Œæˆ‘åœ¨æ“ä½œçš„æ—¶å€™ä½¿ç”¨é˜¿é‡Œäº‘çš„Debian 9.9æœåŠ¡å™¨ã€‚å…³äºä»€ä¹ˆæ˜¯SVNï¼Œè¿™é‡Œä¸ä¼šèµ˜è¿°ï¼Œæœ¬æ–‡å°†æ¼”ç¤ºåŸºäºç¬¬ä¸‰æ–¹é•œåƒæ­å»ºSVNæœåŠ¡çš„è¿‡ç¨‹2.å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹æœ¬æ¬¡æˆ‘ä»¬ç›´æ¥ä½¿ç”¨Dockerhubä¸Šæ¯”è¾ƒçƒ­é—¨çš„ä¸€ä¸ªé•œåƒe...", "content": "ä¸€ã€æ¦‚è¿°1.åŸºç¡€ç¯å¢ƒ Debian GNU/Linux 9.9 (stretch) Docker version 19.03.4å¦‚æœä½ ä½¿ç”¨å…¶ä»–Linuxå‘è¡Œç‰ˆæœ¬å®‰è£…è¿‡ç¨‹ä¹ŸåŸºæœ¬ä¸€æ ·çš„ï¼Œæˆ‘åœ¨æ“ä½œçš„æ—¶å€™ä½¿ç”¨é˜¿é‡Œäº‘çš„Debian 9.9æœåŠ¡å™¨ã€‚å…³äºä»€ä¹ˆæ˜¯SVNï¼Œè¿™é‡Œä¸ä¼šèµ˜è¿°ï¼Œæœ¬æ–‡å°†æ¼”ç¤ºåŸºäºç¬¬ä¸‰æ–¹é•œåƒæ­å»ºSVNæœåŠ¡çš„è¿‡ç¨‹2.å¼€å¯ç®€å•çš„å®¹å™¨å®ä¾‹æœ¬æ¬¡æˆ‘ä»¬ç›´æ¥ä½¿ç”¨Dockerhubä¸Šæ¯”è¾ƒçƒ­é—¨çš„ä¸€ä¸ªé•œåƒelleflorio/svn-serverï¼Œè¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒæ­¤é“¾æ¥:https://hub.docker.com/r/elleflorio/svn-serverä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªç®€å•çš„svnæœåŠ¡docker run -d --name svn-server -p 3690:3690 elleflorio/svn-serverä½ è¿˜å¯ä»¥é€‰æ‹©æ€§çš„æŠŠæœ¬åœ°ç›®å½•æ˜ å°„åˆ°å®¹å™¨çš„svnä»“åº“ç›®å½•ï¼Œå¦‚ä¸‹å‚æ•°-v &lt;hostpath&gt;:/home/svnäºŒã€å®é™…æ“ä½œè¿‡ç¨‹å‡è®¾ç°åœ¨æœ‰è¿™æ ·çš„éœ€è¦ï¼Œå¼€å‘ä¸€ä¸ªPHPé¡¹ç›®ï¼Œåœ¨æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªbaseä»£ç ä»“åº“ï¼Œæ‰€æœ‰å¼€å‘äººå‘˜å¯ä»¥ä»æœåŠ¡å™¨æŠŠä»£ç pullåˆ°PCè¿›è¡Œå¼€å‘ï¼Œå†pushåˆ°æœåŠ¡å™¨è¿›è¡Œæ‰˜ç®¡ï¼Œå¼€å‘ä»»åŠ¡pushä»£ç å®Œæˆä¹‹åï¼Œå°†ä»£ç åŒæ­¥åˆ°åŒä¸€å°æœåŠ¡å™¨çš„webç›®å½•ï¼Œä¸‹é¢æˆ‘ä»¬åŸºäºDockerå®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚2.1 ä¸‹è½½é•œåƒï¼Œåˆ›å»ºå®¹å™¨# ä¸‹è½½é•œåƒdocker pull elleflorio/svn-server# åˆ›å»ºsvnä»“åº“ç›®å½•ï¼Œè¿›å…¥svnä»“åº“ç›®å½•mkdir -p /var/svn# åˆ›å»ºsvnæœåŠ¡å®¹å™¨ï¼ŒæŠŠå®¹å™¨ä¸­çš„svnä»“åº“æ˜ å°„åˆ°æœ¬æœºï¼Œå¹¶æ˜ å°„3690ç«¯å£docker run -d --name svn-server -p 3690:3690 -v \"$PWD\":/home/svn -v /var/www/html:/var/www/html elleflorio/svn-serveråœ¨ä»¥ä¸Šç¤ºä¾‹ä»£ç ä¸­ï¼Œä¸ºäº†èƒ½åœ¨svnå®¹å™¨ä¸­ç®¡ç†æœ¬æœºçš„é¡¹ç›®ç›®å½•ï¼Œå‡è®¾æœ¬æœºçš„é¡¹ç›®ç›®å½•æ˜¯/var/www/htmlï¼Œé™¤äº†æ˜ å°„SVNä»“åº“ç›®å½•ï¼Œæˆ‘ä»¬åŒæ—¶æŠŠæœ¬æœºçš„/var/www/htmlæ˜ å°„åˆ°svnå®¹å™¨ä¸­çš„/var/www/htmlç›®å½•ã€‚2.2 åœ¨æœåŠ¡å™¨åˆ›å»ºä»£ç ä»“åº“# åˆ›å»ºä»£ç ä»“åº“docker exec -t svn-server svnadmin create /home/svn/testä»¥ä¸Šä»£ç ä¸­ï¼Œåœ¨å®¹å™¨ä¸­çš„/home/svn/testç›®å½•åˆ›å»ºä»£ç ä»“åº“ï¼Œä¼šåŒæ­¥åˆ°æœ¬æœºçš„/var/svnç›®å½•ã€‚æˆ‘ä»¬å…ˆè¿›è¡Œsvnä»“åº“é…ç½®ã€‚SVNåº“ä¸­çš„é…ç½®ç›®å½• conf æœ‰ä¸‰ä¸ªæ–‡ä»¶: authzï¼šæƒé™æ§åˆ¶æ–‡ä»¶ passwdï¼šå¸å·å¯†ç æ–‡ä»¶ svnserve.confï¼šSVNæœåŠ¡ç»¼åˆé…ç½®æ–‡ä»¶ä¿®æ”¹æƒé™é…ç½®æ–‡ä»¶/var/svn/test/conf/authzï¼Œå¦‚ä¸‹[groups] # ç”¨æˆ·ç»„admin = master,admin #ç”¨æˆ·ç»„æ‰€å¯¹åº”çš„ç›®å½•[/] # åº“ç›®å½•æƒé™@admin = rw # ç”¨æˆ·ç»„æƒé™*=r é…ç½®è´¦å·å¯†ç æ–‡ä»¶ passwdï¼Œ/var/svn/test/conf/passwd[users]# harry = harryssecret# sally = sallyssecretmaster = masteradmin = adminé…ç½®SVNçš„æœåŠ¡é…ç½®æ–‡ä»¶/var/svn/test/conf/svnserve.confï¼Œå¦‚ä¸‹[general]# force-username-case = none# åŒ¿åè®¿é—®çš„æƒé™ å¯ä»¥æ˜¯readã€writeï¼Œnoneï¼Œé»˜è®¤ä¸ºreadï¼Œç°æ”¹ä¸ºnoneanon-access = none# ä½¿æˆæƒç”¨æˆ·æœ‰å†™æƒé™auth-access = write# å¯†ç æ•°æ®åº“çš„è·¯å¾„password-db = passwd# æˆæƒé…ç½®æ–‡ä»¶authz-db = authz# è®¤è¯å‘½åç©ºé—´ï¼ŒSVNä¼šåœ¨è®¤è¯æç¤ºé‡Œæ˜¾ç¤ºï¼Œå¹¶ä¸”ä½œä¸ºå‡­è¯ç¼“å­˜çš„å…³é”®å­—realm = /var/svn/test[sasl]å®Œæˆä»¥ä¸Šé…ç½®ä¹‹åï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯æœåŠ¡å™¨ä»£ç ä¸æœ¬åœ°ä»£ç åŒæ­¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šä¸‹é¢ï¼Œæˆ‘ä»¬å°†æœ¬æœºç”µè„‘ä»£ç æ¨é€åˆ°SVNä»“åº“åï¼ŒæœåŠ¡å™¨åˆå°†ä»£ç åŒæ­¥åˆ°é¡¹ç›®ç›®å½•ã€‚2.3 åŒæ­¥ä»£ç åˆ°æœåŠ¡å™¨é¡¹ç›®ç›®å½• åœ¨PCä¸Šå°†ä»£ç ä¸Šä¼ åˆ°svnä»“åº“ï¼ˆPCä¸Šå¿…é¡»å®‰è£…SVNï¼‰# å°†ä»“åº“ä¸­çš„ä»£ç pullåˆ°æœ¬åœ°,ä¸‹é¢çš„123.123.123.123ä»£è¡¨çš„æ˜¯æœåŠ¡å™¨IPåœ°å€ï¼Œä»¥ä¸‹è¿‡ç¨‹å¯èƒ½ä¼šéœ€è¦è¾“å…¥svnè´¦å·å’Œå¯†ç svn checkout svn://123.123.123.123/test# è¿›å…¥ä»£ç ç›®å½•cd test# åˆ›å»ºç¤ºä¾‹æ–‡ä»¶echo \"hello\" &gt;&gt; test.txt# æäº¤ä»£ç åˆ°SVNä»“åº“svn add test.txtsvn commit test.txt -m 'test' æœåŠ¡å™¨åŒæ­¥ä»£ç # ä½¿ç”¨checkoutæŒ‡ä»¤å°†ä»£ç åŒæ­¥åˆ°é¡¹ç›®ç›®å½•docker exec -t svn-server svn checkout svn://127.0.0.1/test /var/www/html/test --username master --password master --force --no-auth-cache è‡ªåŠ¨åŒæ­¥ä»£ç æˆ‘ä»¬å¼€å‘çš„PCæ¯ä¸€æ¬¡å‘æœåŠ¡å™¨æäº¤ä¸€æ¬¡ä»£ç ï¼Œç°åœ¨éƒ½éœ€è¦å»æœåŠ¡å™¨ä¸»åŠ¨æ‰§è¡Œä¸€ä¸‹åŒæ­¥å‘½ä»¤ï¼Œä»£ç æ‰ä¼šåŒæ­¥åˆ°æœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•ã€‚æƒ³å¿…å¾ˆéº»çƒ¦ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨SVNæä¾›çš„é’©å­å»å®ç°ä»£ç è‡ªåŠ¨æ›´æ–°ï¼Œå¦‚ä¸‹é…ç½®# è¿›å…¥é’©å­é…ç½®æ–‡ä»¶ç›®å½•cd /var/svn/test/hooks# å¤åˆ¶é’©å­æ¨¡æ¿æ–‡ä»¶ä¸ºé’©å­æ–‡ä»¶cp post-commit.tmpl post-commitæ¥ä¸‹æ¥æˆ‘ä»¬ç¼–è¾‘post-commitæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰å‘é€é‚®ä»¶çš„ä»£ç ã€‚ç„¶ååœ¨ä¸‹é¢åŠ ä¸Šä¸¤è¡Œä»£ç å³å¯ï¼Œå¦‚ä¸‹ï¼šREPOS=\"$1\"REV=\"$2\"TXN_NAME=\"$3\"#mailer.py commit \"$REPOS\" \"$REV\" /path/to/mailer.conf# è®¾ç½®ç¼–ç export LANG=\"en_US.UTF-8\"# æ›´æ–°ä»£ç åˆ°é¡¹ç›®ç›®å½•svn update --username master --password master /var/www/html/testç¼–è¾‘å®Œæˆé…ç½®æ–‡ä»¶ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦ä¿å­˜å³å¯ï¼Œè‡ªåŠ¨ç”Ÿæ•ˆã€‚æ­¤æ—¶åœ¨PCä¸Šä¿®æ”¹é¡¹ç›®å†…å®¹ï¼Œå†æ¬¡æäº¤åˆ°ä»£ç ä»“åº“ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨åŒæ­¥åˆ°æœåŠ¡å™¨çš„é¡¹ç›®ç›®å½•ã€‚ä¸å†éœ€è¦æ‰‹åŠ¨æ‰§è¡Œsvn checkoutæŒ‡ä»¤ä¸‰ã€æ€»ç»“æœ¬æ¬¡ä¸»è¦æ¼”ç¤ºäº†SVNæœåŠ¡å™¨çš„æ­å»ºè¿‡ç¨‹ä¸­çš„ä¸€äº›åŸºæœ¬æµç¨‹ã€‚æˆ‘ä»¬ä½¿ç”¨ç¬¬ä¸‰æ–¹Dockeré•œåƒæ¥æ„å»ºSVNå®¹å™¨æœåŠ¡ï¼Œå®é™…ä¸Šå’Œæˆ‘ä»¬ç›´æ¥åœ¨æ“ä½œç³»ç»Ÿä¸Šæ‰‹åŠ¨ç¼–è¯‘å®‰è£…ï¼Œæˆ–è€…ä»è½¯ä»¶åº“å®‰è£…çš„æ•ˆæœä¸€æ ·ã€‚è€Œå®¹å™¨æ›´å¥½çš„å‡å°‘æœåŠ¡å™¨ç›¸å…³ä¾èµ–ï¼Œä¹Ÿæ›´å¥½åœ°éš”ç¦»æ“ä½œç³»ç»Ÿçš„ç¯å¢ƒã€‚å¦‚æœæˆ‘ä»¬ä¸éœ€è¦SVNæœåŠ¡äº†ï¼Œç›´æ¥å°†å¯¹åº”å®¹å™¨ç§»é™¤å³å¯ã€‚å¦‚æœæˆ‘ä»¬æ¯æ¬¡åˆ›å»ºä¸€ä¸ªSVNä»“åº“ï¼Œéƒ½è¦è¿›è¡Œä¸€å¤§å †é…ç½®ï¼Œæ˜¯ä¸€ä»¶æ¯”è¾ƒæµªè´¹æ—¶é—´çš„äº‹ã€‚å¼€å‘è€…ä¹Ÿä¸åº”è¯¥æŠŠè¿‡å¤šçš„æ—¶é—´ä¸ç²¾åŠ›å»â€œé‡å¤é€ è½®å­â€ï¼Œè€Œåº”è¯¥æŠŠæ›´å¤šçš„æ—¶é—´å’Œç²¾åŠ›å»æ€è€ƒæ›´æœ‰ä»·å€¼çš„äº‹ç‰©ï¼å¤§å®¶å¯ä»¥è‡ªè¡Œå­¦ä¹ ç¼–å†™ä¸€ä¸ªShellè„šæœ¬ï¼Œç”¨äºå¿«é€Ÿæ­å»ºSVNä»“åº“ï¼Œå°±å¯ä»¥ä½¿ç”¨ä¸€æ¡å‘½ä»¤å³å¯å®Œæˆä»¥ä¸Šå¤æ‚çš„å†…å®¹ã€‚é™äºç¯‡å¹…ï¼Œæœ¬æ–‡ä¸å†æ·±å…¥ç ”ç©¶ã€‚" }, { "title": "æ­£åˆ™è¡¨è¾¾å¼çš„å¸¸ç”¨è¯­æ³•è§„åˆ™", "url": "/posts/tools_regex-expression.html", "categories": "å·¥å…·", "tags": "æ­£åˆ™è¡¨è¾¾å¼", "date": "2023-01-31 21:27:00 +0800", "snippet": "ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿå…¶å®æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯æè¿°ä¸€ç±»å­—ç¬¦ä¸²çš„ç‰¹å¾ï¼Œé€šè¿‡è¿™ä¸ªç‰¹å¾ä¸ç‰¹å®šå‡½æ•°é…åˆä½¿ç”¨ï¼Œå¯¹å…¶ä»–çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€æŸ¥æ‰¾ã€æ›¿æ¢ã€åˆ†å‰²ç­‰æ“ä½œçš„é€»è¾‘å…¬å¼ï¼æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å‘¢ï¼Ÿåœ¨ç¼–ç¨‹ä¸­ï¼Œä¸æ˜¯æ‰€æœ‰çš„å­—ç¬¦æ“ä½œéƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæœ‰å½“æˆ‘ä»¬é‡åˆ°å¤æ‚å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ‰ä¼šç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™æ­£åˆ™è¡¨è¾¾å¼ç§’ç´ äº†ä¸€ç±»å­—ç¬¦ä¸²çš„ç‰¹å¾ï¼Œé€šè¿‡è¿™ä¸ªç‰¹å¾ä¸ç‰¹å®šçš„å‡½æ•°é…åˆï¼Œå¯¹å…¶ä»–çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€æŸ¥æ‰¾ã€æ›¿æ¢...", "content": "ä»€ä¹ˆæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Ÿå…¶å®æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯æè¿°ä¸€ç±»å­—ç¬¦ä¸²çš„ç‰¹å¾ï¼Œé€šè¿‡è¿™ä¸ªç‰¹å¾ä¸ç‰¹å®šå‡½æ•°é…åˆä½¿ç”¨ï¼Œå¯¹å…¶ä»–çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€æŸ¥æ‰¾ã€æ›¿æ¢ã€åˆ†å‰²ç­‰æ“ä½œçš„é€»è¾‘å…¬å¼ï¼æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å‘¢ï¼Ÿåœ¨ç¼–ç¨‹ä¸­ï¼Œä¸æ˜¯æ‰€æœ‰çš„å­—ç¬¦æ“ä½œéƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œåªæœ‰å½“æˆ‘ä»¬é‡åˆ°å¤æ‚å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œæ‰ä¼šç”¨åˆ°æ­£åˆ™è¡¨è¾¾å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™æ­£åˆ™è¡¨è¾¾å¼ç§’ç´ äº†ä¸€ç±»å­—ç¬¦ä¸²çš„ç‰¹å¾ï¼Œé€šè¿‡è¿™ä¸ªç‰¹å¾ä¸ç‰¹å®šçš„å‡½æ•°é…åˆï¼Œå¯¹å…¶ä»–çš„å­—ç¬¦ä¸²è¿›è¡ŒåŒ¹é…ã€æŸ¥æ‰¾ã€æ›¿æ¢ä»¥åŠåˆ†å‰²æ“ä½œï¼è¿™ç±»å­—ç¬¦ä¸²çš„ç‰¹å¾æ˜¯æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª 1.æ™®é€šå­—ç¬¦ï¼ˆæ¯”å¦‚aåˆ°zï¼‰ã€ 2.å…ƒå­—ç¬¦ï¼ˆæœ‰ç‰¹æ®ŠåŠŸèƒ½çš„å­—ç¬¦æ¯”å¦‚*ã€+ã€?ï¼‰ï¼Œ æ­£åˆ™è¡¨è¾¾å¼æ­£æ˜¯ç”±æ™®é€šå­—ç¬¦å’Œå…ƒå­—ç¬¦ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚â€™/a/â€™ï¼Œaå°±æ˜¯æ™®é€šå­—ç¬¦ï¼Œ/æ˜¯å®šç•Œç¬¦ï¼ˆè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„å¼€å§‹æˆ–ç»“æŸï¼‰ã€‚ä¸‹é¢æ˜¯æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å‚è€ƒè¡¨ å­—ç¬¦ æè¿° ç¤ºä¾‹ \\ è½¬ä¹‰å­—ç¬¦ \\. åŒ¹é…ç‚¹å·æœ¬èº« ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½® ^abc åŒ¹é…ä»¥â€abcâ€å¼€å¤´çš„å­—ç¬¦ä¸² $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½® xyz$ åŒ¹é…ä»¥â€xyzâ€ç»“å°¾çš„å­—ç¬¦ä¸² * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ ab*c åŒ¹é… â€œacâ€ã€â€abcâ€ã€â€abbcâ€ ç­‰ + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ ab+c åŒ¹é… â€œabcâ€ã€â€abbcâ€ï¼Œä½†ä¸åŒ¹é… â€œacâ€ ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ colou?r åŒ¹é… â€œcolorâ€ å’Œ â€œcolourâ€ {n} åŒ¹é…ç¡®å®šçš„ n æ¬¡ o{2} åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oï¼Œä½†ä¸åŒ¹é… â€œBobâ€ ä¸­çš„ o {n,m} æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ o{1,3} åŒ¹é… â€œfooooodâ€ ä¸­çš„å‰ä¸‰ä¸ª o ??, *?, +?, {n,m}? éè´ªå©ªåŒ¹é…ï¼ˆæœ€å°åŒ¹é…ï¼‰ o+? åœ¨ â€œooooâ€ ä¸­åªåŒ¹é…ç¬¬ä¸€ä¸ª o . åŒ¹é…é™¤æ¢è¡Œç¬¦å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ a.c åŒ¹é… â€œabcâ€ã€â€aacâ€ã€â€a&amp;câ€ ç­‰ (pattern) åŒ¹é… pattern å¹¶æ•è·åŒ¹é…é¡¹ (abc) åŒ¹é…å¹¶æ•è· â€œabcâ€ x\\|y åŒ¹é… x æˆ– y z\\|food åŒ¹é… â€œzâ€ æˆ– â€œfoodâ€ [xyz] å­—ç¬¦é›†åˆï¼ŒåŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ [abc] åŒ¹é… â€œplainâ€ ä¸­çš„ â€˜aâ€™ [^xyz] è´Ÿå€¼å­—ç¬¦é›†åˆï¼ŒåŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ [^abc] åŒ¹é… â€œplainâ€ ä¸­çš„ â€˜pâ€™ã€â€™lâ€™ã€â€™iâ€™ã€â€™nâ€™ [a-z] å­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ [a-z] åŒ¹é…ä»»æ„å°å†™å­—æ¯ [^a-z] è´Ÿå€¼å­—ç¬¦èŒƒå›´ï¼ŒåŒ¹é…ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦ [^a-z] åŒ¹é…ä»»æ„éå°å†™å­—æ¯ \\b åŒ¹é…å•è¯è¾¹ç•Œ er\\b åŒ¹é… â€œneverâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ \\B åŒ¹é…éå•è¯è¾¹ç•Œ er\\B åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸åŒ¹é… â€œneverâ€ ä¸­çš„ â€˜erâ€™ \\d åŒ¹é…æ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº [0-9] \\d+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­— \\D åŒ¹é…éæ•°å­—å­—ç¬¦ï¼Œç­‰ä»·äº [^0-9] \\D+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéæ•°å­—å­—ç¬¦ \\f åŒ¹é…æ¢é¡µç¬¦ Â  \\n åŒ¹é…æ¢è¡Œç¬¦ Â  \\r åŒ¹é…å›è½¦ç¬¦ Â  \\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ï¼‰ \\s+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªç©ºç™½å­—ç¬¦ \\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ \\S+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéç©ºç™½å­—ç¬¦ \\w åŒ¹é…å•è¯å­—ç¬¦ï¼ˆå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ï¼‰ \\w+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯å­—ç¬¦ \\W åŒ¹é…éå•è¯å­—ç¬¦ \\W+ åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªéå•è¯å­—ç¬¦ ä¸­æ–‡æ­£åˆ™éªŒè¯ 1.jsåŒ¹é…ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š [\\u4e00-\\u9fa5]åŒ¹é…åŒå­—èŠ‚å­—ç¬¦(åŒ…æ‹¬æ±‰å­—åœ¨å†…)ï¼š[^\\x00-\\xff] 2.PHP/^[\\x{4e00}-\\x{9fa5}]+$/uå…¶ä¸­â€\\x{4e00}-\\x{9fa5}â€ä»£è¡¨æ±‰å­—éªŒè¯ã€‚â€/uâ€ä»£è¡¨unicode(utf-8)åŒ¹é…ã€‚åœ¨phpä¸­ï¼Œä¸æ”¯æŒ[\\u4e00-\\u9fa5]åŒ¹é…æ±‰å­—ï¼Œè€Œæ˜¯ç”¨\\xè¡¨ç¤ºåå…­è¿›åˆ¶æ•°æ®ï¼Œç„¶è€Œphpä¸­ç”¨â€[\\x4e00-\\x9fa5]â€œçš„å†™æ³•ä¹Ÿæ˜¯é”™çš„ï¼Œå¿…é¡»ç”¨{}æŠŠå®ƒåŒ…èµ·æ¥æ‰è¡Œã€‚æ­¤å¤–ï¼Œç”±äºç¼–ç å…³ç³»ï¼Œéœ€è¦ç”¨åˆ°â€/uâ€å£°æ˜ç¼–ç æ ¼å¼." }, { "title": "YAMLçš„åŸºæœ¬è¯­æ³•", "url": "/posts/tools_yaml-grammar.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:24:00 +0800", "snippet": "ä¸€ã€YAMLåŸºæœ¬è¯­æ³• ä½¿ç”¨é”ç´§è¡¨ç¤ºå±‚çº§å…³ç³» é”ç´§æ—¶ä¸å…è®¸ä½¿ç”¨tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ å¤§å°å†™æ•æ„Ÿè§‰k: vï¼šè¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ä»¥ç©ºæ ¼çš„é”ç´§æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯ä¸€ä¸ªå±‚çº§çš„ï¼Œå¦‚ä¸‹ç¤ºä¾‹server: port: 8081 path: /helloäºŒã€YAMLæ”¯æŒçš„ä¸‰ç§æ•°æ®ç»“æ„ å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆ æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸...", "content": "ä¸€ã€YAMLåŸºæœ¬è¯­æ³• ä½¿ç”¨é”ç´§è¡¨ç¤ºå±‚çº§å…³ç³» é”ç´§æ—¶ä¸å…è®¸ä½¿ç”¨tabé”®ï¼Œåªå…è®¸ä½¿ç”¨ç©ºæ ¼ å¤§å°å†™æ•æ„Ÿè§‰k: vï¼šè¡¨ç¤ºä¸€å¯¹é”®å€¼å¯¹ï¼ˆç©ºæ ¼å¿…é¡»æœ‰ï¼‰ä»¥ç©ºæ ¼çš„é”ç´§æ¥æ§åˆ¶å±‚çº§å…³ç³»ï¼Œåªè¦æ˜¯å·¦å¯¹é½çš„ä¸€åˆ—æ•°æ®ï¼Œéƒ½æ˜¯ä¸€ä¸ªå±‚çº§çš„ï¼Œå¦‚ä¸‹ç¤ºä¾‹server: port: 8081 path: /helloäºŒã€YAMLæ”¯æŒçš„ä¸‰ç§æ•°æ®ç»“æ„ å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆ æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ä¸‰ã€å€¼çš„å†™æ³•3.1 å­—é¢é‡ï¼šæ™®é€šçš„å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ï¼‰ K: vå­—é¢ç›´æ¥æ¥å†™ï¼Œå­—ç¬¦é»˜è®¤ä¸ç”¨åŠ ä¸Šå•å¼•å·æˆ–è€…åŒå¼•å·ï¼› â€â€åŒå¼•å·ï¼Œä¸ä¼šè½¬ä¹‰å­—ç¬¦ä¸²é‡Œçš„ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦ä½œä¸ºæœ¬èº«æƒ³è¡¨è¾¾çš„æ„æ€ï¼Œname: \"zhangsan \\n lisi\"ï¼Œè¾“å‡ºä¸ºï¼šzhangsan æ¢è¡Œ lisi â€™â€™å•å¼•å·ï¼Œä¼šè½¬ä¹‰ç‰¹æ®Šå­—ç¬¦ï¼Œç‰¹æ®Šå­—ç¬¦æœ€ç»ˆåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²æ•°æ®ï¼Œname: 'zhangsan \\n lisi'ï¼Œè¾“å‡ºä¸ºï¼šzhangsan \\n lisiå››ã€å¯¹è±¡ã€Mapï¼ˆå±æ€§å’Œå€¼ï¼‰ï¼ˆé”®å€¼å¯¹ï¼‰ å¯¹è±¡ç¼©è¿›å†™æ³•friend: lastName: zhangsan age: 20è¡Œå†…å†™æ³•friend: {lastName: zhangsan, age: 18}äº”ã€æ•°ç»„ï¼ˆListã€Setï¼‰ç”¨-è¡¨ç¤ºæ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ pets: - cat - dog - pigè¡Œå†…å†™æ³•ï¼špets: [cat,dog,pig]" }, { "title": "å¦‚ä½•ä½¿ç”¨Apacheåšåå‘ä»£ç†", "url": "/posts/tools_apache-proxy.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:19:00 +0800", "snippet": " æœ¬æ–‡æ’°å†™æ—¶é—´ï¼š2018-07-21 09:11ï¼Œä¿®æ”¹æ—¶é—´ï¼š2022-07-12ä¸€ã€åå‘ä»£ç† æ­£å‘ä»£ç†ï¼šæœåŠ¡å™¨A æ›¿ä»£å®¢æˆ·ç«¯å»è¯·æ±‚å¦å¤–ä¸€å°æœåŠ¡å™¨Bï¼Œå°†æ•°æ®è¿”å›å®¢æˆ·ç«¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å«æ­£å‘ä»£ç†ï¼Œæ­£å‘ä»£ç†éšè—äº†çœŸå®çš„å®¢æˆ·ç«¯ åå‘ä»£ç†ï¼šæœåŠ¡å™¨A å°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™äº†æœåŠ¡å™¨Bå»å¤„ç†ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“æœåŠ¡å™¨Bçš„å­˜åœ¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åå‘ä»£ç†ï¼Œåå‘ä»£ç†éšè—äº†çœŸå®çš„æœåŠ¡å™¨ åå‘ä»£ç†ç®€å•ç†è§£å¦‚...", "content": " æœ¬æ–‡æ’°å†™æ—¶é—´ï¼š2018-07-21 09:11ï¼Œä¿®æ”¹æ—¶é—´ï¼š2022-07-12ä¸€ã€åå‘ä»£ç† æ­£å‘ä»£ç†ï¼šæœåŠ¡å™¨A æ›¿ä»£å®¢æˆ·ç«¯å»è¯·æ±‚å¦å¤–ä¸€å°æœåŠ¡å™¨Bï¼Œå°†æ•°æ®è¿”å›å®¢æˆ·ç«¯ï¼Œè¿™ä¸ªè¿‡ç¨‹å«æ­£å‘ä»£ç†ï¼Œæ­£å‘ä»£ç†éšè—äº†çœŸå®çš„å®¢æˆ·ç«¯ åå‘ä»£ç†ï¼šæœåŠ¡å™¨A å°†å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘ç»™äº†æœåŠ¡å™¨Bå»å¤„ç†ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“æœåŠ¡å™¨Bçš„å­˜åœ¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åå‘ä»£ç†ï¼Œåå‘ä»£ç†éšè—äº†çœŸå®çš„æœåŠ¡å™¨ åå‘ä»£ç†ç®€å•ç†è§£å¦‚ä¸‹å›¾ç¤ºï¼šåœ¨åŒä¸€å°æœåŠ¡å™¨å†…ï¼Œå‡è®¾æœåŠ¡å™¨å¯¹å¤–ç½‘åªå¼€æ”¾äº†80ç«¯å£ï¼Œå½“å®¢æˆ·ç«¯è¯·æ±‚80ç«¯å£çš„httpæœåŠ¡ï¼Œè½¬å‘ç»™å…¶ä»–ç«¯å£æœåŠ¡æ¥å¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯åå‘ä»£ç†ã€‚è¿™ç¯‡åšå®¢ç»™å¤§å®¶æ¼”ç¤ºApacheåå‘ä»£ç†è®¾ç½®ï¼Œä½¿çš„å¾—ä¸€å°æœåŠ¡å™¨ä¸ŠåŒæ—¶æ”¯æŒè¿è¡Œå¤šç«¯å£æœåŠ¡ï¼ˆå¦‚åŒæ—¶è¿è¡ŒPHPå’ŒJavaé¡¹ç›®ï¼‰ã€‚äºŒã€å·¥å…· Apache 2.4.33 JDK 1.8 + Tomcat 8.5 ä¸‰ã€æ­¥éª¤3.1ã€å¼€å¯mod_proxy.soå’Œmod_proxy_http.soæ¨¡å—åœ¨Apacheçš„httpd.confé…ç½®æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¸¤è¡Œé…ç½®LoadModule proxy_module modules/mod_proxy.soLoadModule proxy_http_module modules/mod_proxy_http.so3.2ã€è®¾ç½®è½¬å‘è¿›å…¥Apacheå®‰è£…ç›®å½•ä¸‹çš„/conf/extraç›®å½•ï¼Œå¦‚æœä½ ä½¿ç”¨çš„httpé»˜è®¤ç«¯å£ï¼Œæ›´æ”¹httpd-vhosts.confæ–‡ä»¶ï¼Œ&lt;VirtualHost _default_:80&gt; ServerName test.cn #åŸŸå ProxyPreserveHost On # å¼€å¯åå‘ä»£ç† ProxyRequests Off # å…³é—­æ­£å‘ä»£ç† ProxyPass / http://127.0.0.1:8080/ #æ˜ å°„åœ°å€ ProxyPassReverse / http://127.0.0.1:8080/ #æ˜ å°„302é‡å®šå‘çš„åœ°å€&lt;/VirtualHost&gt;å‡å¦‚ä½¿ç”¨çš„æ˜¯httpsåŠ å¯†ç«¯å£çš„è¯ï¼Œæ›´æ”¹httpd-ssl.confæ–‡ä»¶ï¼Œå¦‚ä¸‹&lt;VirtualHost _default_:443&gt; ServerName test.cn #åŸŸå SSLEngine on SSLCertificateFile \"è¯ä¹¦æ‰€åœ¨ç›®å½•/fullchain.pem\" SSLCertificateKeyFile \"è¯ä¹¦æ‰€åœ¨ç›®å½•/privkey.pem\" ProxyPreserveHost On ProxyRequests Off ProxyPass / http://127.0.0.1:8080/ ProxyPassReverse / http://127.0.0.1:8080/&lt;/VirtualHost&gt; ä¿å­˜é…ç½®é‡å¯Apacheï¼Œåœ¨æµè§ˆå™¨è¾“å…¥ç›´æ¥è¾“å…¥åŸŸåå°±å¯ä»¥è®¿é—®åˆ°8080ç«¯å£çš„é¡¹ç›®äº†" }, { "title": "å›½å†…å¸¸ç”¨çš„å¼€æºè½¯ä»¶é•œåƒç½‘ç«™", "url": "/posts/tools_cn-mirrors.html", "categories": "å·¥å…·", "tags": "", "date": "2023-01-31 21:18:00 +0800", "snippet": " æœ€åæ›´æ–°æ—¶é—´ï¼š2021-06-15å…¬å¸é•œåƒæœç‹å¼€æºé•œåƒç«™ï¼šhttp://mirrors.sohu.com/ç½‘æ˜“å¼€æºé•œåƒç«™ï¼šhttp://mirrors.163.com/é¦–éƒ½åœ¨çº¿ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼šhttp://mirrors.yun-idc.com/é˜¿é‡Œäº‘å¼€æºé•œåƒï¼šhttp://mirrors.aliyun.com/è…¾è®¯äº‘è½¯ä»¶æºï¼šhttps://mirrors.cloud.tencent....", "content": " æœ€åæ›´æ–°æ—¶é—´ï¼š2021-06-15å…¬å¸é•œåƒæœç‹å¼€æºé•œåƒç«™ï¼šhttp://mirrors.sohu.com/ç½‘æ˜“å¼€æºé•œåƒç«™ï¼šhttp://mirrors.163.com/é¦–éƒ½åœ¨çº¿ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼šhttp://mirrors.yun-idc.com/é˜¿é‡Œäº‘å¼€æºé•œåƒï¼šhttp://mirrors.aliyun.com/è…¾è®¯äº‘è½¯ä»¶æºï¼šhttps://mirrors.cloud.tencent.com/å¸¸å·è´ç‰¹åº·å§†è½¯ä»¶æŠ€æœ¯æœ‰é™å…¬å¸(åŸcn99ï¼‰ï¼šhttp://centos.bitcomm.cn/å¤§å­¦é•œåƒå±±ä¸œç†å·¥å¤§å­¦ï¼šhttp://mirrors.sdutlinux.orgå¤§è¿ç†å·¥å¤§å­¦ï¼šhttp://mirror.dlut.edu.cn/å¤§è¿ä¸œè½¯ä¿¡æ¯å­¦é™¢ï¼š http://mirrors.neusoft.edu.cn/æµ™æ±Ÿå¤§å­¦ï¼šhttp://mirrors.zju.edu.cn/å…°å·å¤§å­¦ï¼šhttp://mirror.lzu.edu.cn/åŒ—äº¬äº¤é€šå¤§å­¦ï¼šhttp://mirror.bjtu.edu.cn (IPv4 only)http://mirror6.bjtu.edu.cn (IPv6 only)http://debian.bjtu.edu.cn (IPv4+IPv6)ä¸Šæµ·äº¤é€šå¤§å­¦ï¼šhttp://ftp.sjtu.edu.cn/ (IPv4 only)http://ftp6.sjtu.edu.cn (IPv6 only)æ¸…åå¤§å­¦ï¼šhttp://mirrors.tuna.tsinghua.edu.cn/ (IPv4+IPv6)http://mirrors.6.tuna.tsinghua.edu.cn/ (IPv6 only)http://mirrors.4.tuna.tsinghua.edu.cn/ (IPv4 only)ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼šhttp://mirrors.ustc.edu.cn/ (IPv4+IPv6)http://mirrors4.ustc.edu.cn/http://mirrors6.ustc.edu.cn/ä¸œåŒ—å¤§å­¦ï¼šhttp://mirror.neu.edu.cn/ (IPv4 only)http://mirror.neu6.edu.cn/ (IPv6 only)åä¸­ç§‘æŠ€å¤§å­¦ï¼šhttp://mirrors.hust.edu.cn/" }, { "title": "å¦‚ä½•ä¸Šä¼ dockeré•œåƒåˆ°docker hub", "url": "/posts/tools_push-to-docker-harbor.html", "categories": "å·¥å…·", "tags": "docker", "date": "2023-01-31 21:11:00 +0800", "snippet": "1ã€æ³¨å†Œdocker hubè´¦å·å¦‚æœä½ åˆšå¥½çœ‹åˆ°è¿™ç¯‡åšå®¢ï¼Œæˆ‘ç›¸ä¿¡ä½ æ­£åœ¨å­¦ä¹ DockeråŸºç¡€çŸ¥è¯†ã€‚docker hubå°±åƒgithubä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„æœåŠ¡ï¼Œä¸è¿‡docker hubæ‰˜ç®¡çš„æ˜¯dockeré•œåƒï¼Œè€Œgithubæ‰˜ç®¡çš„æ˜¯ä»£ç ã€‚docker hubæ˜¯dockerå®˜æ–¹æä¾›çš„é•œåƒæ‰˜ç®¡æœåŠ¡ã€‚å¦‚æœæ²¡æœ‰çš„docker hubçš„è´¦å·éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªã€‚åœ°å€ä¸ºhttps://hub.docker.com/...", "content": "1ã€æ³¨å†Œdocker hubè´¦å·å¦‚æœä½ åˆšå¥½çœ‹åˆ°è¿™ç¯‡åšå®¢ï¼Œæˆ‘ç›¸ä¿¡ä½ æ­£åœ¨å­¦ä¹ DockeråŸºç¡€çŸ¥è¯†ã€‚docker hubå°±åƒgithubä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„æœåŠ¡ï¼Œä¸è¿‡docker hubæ‰˜ç®¡çš„æ˜¯dockeré•œåƒï¼Œè€Œgithubæ‰˜ç®¡çš„æ˜¯ä»£ç ã€‚docker hubæ˜¯dockerå®˜æ–¹æä¾›çš„é•œåƒæ‰˜ç®¡æœåŠ¡ã€‚å¦‚æœæ²¡æœ‰çš„docker hubçš„è´¦å·éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªã€‚åœ°å€ä¸ºhttps://hub.docker.com/2ã€åˆ›å»ºä¸€ä¸ªè¿œç¨‹ä»“åº“å¦‚å›¾æ‰€ç¤ºï¼Œæˆ‘çš„è´¦å·æ˜¯jkdevï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„helloé•œåƒï¼Œjkdevæ˜¯æˆ‘çš„ä»“åº“åï¼Œhelloæ˜¯é•œåƒå3ã€åœ¨æœ¬åœ°ç™»å½•docker hubè´¦å·# ç™»å½•dockerservice docker start# ç™»å½•dockerå®˜æ–¹é•œåƒæœåŠ¡sudo docker login4ã€åˆ›å»ºæœ¬åœ°é•œåƒ(1)é¦–å…ˆæŸ¥çœ‹æœ¬åœ°çš„æ‰€æœ‰é•œåƒ:sudo docker imagesæˆ‘ä»¬åŸºäºubuntué•œåƒåˆ›å»ºäº†ä¸€ä¸ªhelloé•œåƒï¼Œå¦‚å›¾æ‰€ç¤º(2)ä¿®æ”¹æœ¬åœ°é•œåƒtagä¸è¿œç«¯ä»“åº“ä¸€æ ·ï¼Œåˆ›å»ºé•œåƒå¯ä»¥æŒ‡å®šæ ‡ç­¾ï¼Œæ ‡ç­¾å¯ä»¥ç†è§£ä¸ºé•œåƒçš„ç‰ˆæœ¬ï¼Œå¦‚æœä¸æŒ‡å®šæ ‡ç­¾ï¼Œå®ƒä¼šé»˜è®¤ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬(latest)sudo docker tag &lt;é•œåƒå&gt;:&lt;æ ‡ç­¾&gt; &lt;ä»“åº“&gt;/&lt;é•œåƒå&gt;:&lt;æ ‡ç­¾&gt;å®é™…åˆ›å»ºçš„å‘½ä»¤å¦‚ä¸‹:docker tag hello jkdev/helloæˆ‘ä»¬å†æ¬¡æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰é•œåƒï¼Œå¯ä»¥çœ‹åˆ°å¤šå‡ºäº†ä¸€ä¸ªä»“åº“åå’Œè¿œç¨‹ä»“åº“ä¸€æ ·çš„é•œåƒï¼Œå¦‚å›¾æ‰€ç¤º(3)æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼šsudo docker push jkdev/helloä¸€å®šè¦æ³¨æ„çš„æ˜¯ï¼šæœ¬åœ°çš„é•œåƒåç§°å¿…é¡»å’Œè¿œç«¯ä¸€è‡´ï¼Œå¦åˆ™å°†æ— æ³•æ¨é€å®Œæˆã€‚å‘½ä»¤æ‰§è¡ŒæˆåŠŸåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨docker hubæ§åˆ¶å°çœ‹åˆ°æˆ‘ä»¬æ¨é€çš„é•œåƒä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸‹æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯sudo docker pull jkdev/hello" }, { "title": "Linux Mintå®‰è£…è€ç‰ˆæœ¬æ‰€æœ‰çš„å£çº¸", "url": "/posts/tools_install-all-mint-backgrounds.html", "categories": "å·¥å…·", "tags": "linuxmint", "date": "2023-01-31 21:08:00 +0800", "snippet": "Linux Mintç³»ç»Ÿé»˜è®¤åªä¿ç•™å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å£çº¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤å®‰è£…ä¸Šä¹‹å‰çš„å£çº¸ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š1ã€é¦–å…ˆæ›´æ–°è½¯ä»¶åˆ—è¡¨sudo apt-get update2ã€å®‰è£…å£çº¸sudo apt-get install mint-backgrounds-*æœ€åå°±å¾—åˆ°å¾ˆå¤šè€ç‰ˆæœ¬å£çº¸äº†ï¼Œå¦‚ä¸‹å›¾ï¼š", "content": "Linux Mintç³»ç»Ÿé»˜è®¤åªä¿ç•™å½“å‰ç³»ç»Ÿç‰ˆæœ¬çš„å£çº¸ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤å®‰è£…ä¸Šä¹‹å‰çš„å£çº¸ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š1ã€é¦–å…ˆæ›´æ–°è½¯ä»¶åˆ—è¡¨sudo apt-get update2ã€å®‰è£…å£çº¸sudo apt-get install mint-backgrounds-*æœ€åå°±å¾—åˆ°å¾ˆå¤šè€ç‰ˆæœ¬å£çº¸äº†ï¼Œå¦‚ä¸‹å›¾ï¼š" }, { "title": "RESTfulæ¶æ„APIé£æ ¼ä¸ç›¸å…³è§„èŒƒ", "url": "/posts/theory_restful.html", "categories": "ç†è®ºåŸºç¡€", "tags": "", "date": "2023-01-31 00:57:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°RESTfulæ¶æ„ï¼Œå°±æ˜¯ç›®å‰æœ€æµè¡Œçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶æ¶æ„ã€‚RESTæ˜¯Representational State Transferè¯ç»„çš„ç®€å†™ï¼Œå³â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ã€‚ä»£è¡¨ï¼ˆäº’è”ç½‘èµ„æºï¼‰è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‚RESTæ˜¯Roy Fieldingåšå£«åœ¨2000å¹´åœ¨å…¶è®ºæ–‡ä¸­ç¬¬ä¸€ä¸ªæåˆ°çš„ï¼Œå› ä¸ºä»–æ˜¯äº’è”ç½‘è¡Œä¸šå†…ä¸€ä¸ªé‡è¦çš„äººç‰©ï¼ˆHTTP 1.0/1.1åè®®çš„ä¸»è¦è®¾è®¡è€…ã€Apacheå¼€æºåŸºé‡‘ä¼šçš„ç¬¬ä¸€ä»»ä¸»å¸­ï¼‰ï¼Œ...", "content": "ä¸€ã€æ¦‚è¿°RESTfulæ¶æ„ï¼Œå°±æ˜¯ç›®å‰æœ€æµè¡Œçš„ä¸€ç§äº’è”ç½‘è½¯ä»¶æ¶æ„ã€‚RESTæ˜¯Representational State Transferè¯ç»„çš„ç®€å†™ï¼Œå³â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ã€‚ä»£è¡¨ï¼ˆäº’è”ç½‘èµ„æºï¼‰è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‚RESTæ˜¯Roy Fieldingåšå£«åœ¨2000å¹´åœ¨å…¶è®ºæ–‡ä¸­ç¬¬ä¸€ä¸ªæåˆ°çš„ï¼Œå› ä¸ºä»–æ˜¯äº’è”ç½‘è¡Œä¸šå†…ä¸€ä¸ªé‡è¦çš„äººç‰©ï¼ˆHTTP 1.0/1.1åè®®çš„ä¸»è¦è®¾è®¡è€…ã€Apacheå¼€æºåŸºé‡‘ä¼šçš„ç¬¬ä¸€ä»»ä¸»å¸­ï¼‰ï¼Œæ‰€ä»¥å¼•èµ·äº†äººä»¬çš„å…³æ³¨ï¼Œå¹¶ä¸”å¯¹äº’è”ç½‘äº§ç”Ÿäº†æ·±è¿œçš„å½±å“ã€‚RESTfulä¸æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œä½†æ˜¯ä¸€ç§è§„èŒƒã€‚ç°åœ¨å¾ˆå¤šè½¯ä»¶ä½¿ç”¨ä½¿ç”¨å‰åç«¯åˆ†ç¦»çš„åº”ç”¨ç»“æ„ï¼Œå®ƒç»“æ„æ¸…æ™°ã€ç¬¦åˆæ ‡å‡†ã€æ˜“äºç†è§£ã€æ‰©å±•æ–¹ä¾¿ã€‚å‰ç«¯ï¼ˆH5ã€Androidã€iPhoneã€å°ç¨‹åºï¼‰å¾€å¾€é€šè¿‡è°ƒç”¨APIçš„æ–¹å¼ä¸åç«¯è¿›è¡Œæ•°æ®äº¤æ¢ã€‚é‚£ä¹ˆï¼Œç¬¦åˆRESTfulè§„èŒƒçš„è½¯ä»¶æ¶æ„çš„APIæˆ‘ä»¬å¯ç§°ä¹‹ä¸ºRESTful APlã€‚å¦‚å¾®åšå¼€æ”¾APIå’ŒGithubå¼€æ”¾APIå°±ä¸¥æ ¼éµå¾ªäº†RESTfulè§„èŒƒã€‚ä»¥ä¸Šæ˜¯å¯¹RESTfulæ¶æ„çš„æ¦‚è¿°ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨è‡ªå·±çš„ç†è§£å®Œæ•´çš„è¡¨è¿°RESTfulçš„è§„èŒƒï¼Œä»¥åŠå¦‚ä½•è®¾è®¡ç¬¦åˆRESTfulè§„èŒƒçš„APIã€‚å®é™…ä¸Šï¼Œåœ¨å¯¹è®¡ç®—æœºæŠ€æœ¯çš„ç†è§£ä¸­ï¼Œä¸€ç™¾ä¸ªäººå¯èƒ½ä¼šæœ‰ä¸€ç™¾ç§ç†è§£æ–¹å¼ï¼Œå°½ç®¡è§ä»è§æ™ºï¼Œä½†æˆ‘ä»¬çš„ç›®çš„éƒ½æ˜¯æŠŠæŠ€æœ¯å½“ä½œå·¥å…·ï¼Œå»å®ç°æˆ‘ä»¬çš„ç¨‹åºåŠŸèƒ½ã€‚å¦‚æœåœ¨æœ¬æ–‡ä¸­çš„æè¿°æœ‰æ‰€é”™è¯¯ï¼Œæˆ–æ‚¨æœ‰æ‰€ä¸è§£ï¼Œæ¬¢è¿ç•™è¨€è¯„è®ºï¼æœ¬æ–‡å°†åˆ†ä¸ºå°†åˆ†ä¸ºä¸‰ä¸ªå†…å®¹ï¼Œç®€è¦æ¢è®¨RESTfulçš„APIè§„èŒƒ ç†è§£ RESTful RESTful APIæ¶æ„è§„èŒƒ RESTful API è®¾è®¡ç¤ºä¾‹ äºŒã€ç†è§£RESTfulè¦ç†è§£RESTfulï¼Œæˆ‘ä»¬éœ€è¦ä»æ¯ä¸€ä¸ªè¯å¼€å§‹ç†è§£ã€‚Roy Fieldingå°†ä»–å¯¹äº’è”ç½‘è½¯ä»¶çš„æ¶æ„åŸåˆ™å‘½åä¸ºRESTï¼Œå³Representational State Transferçš„ç¼©å†™ï¼Œä»£è¡¨ï¼ˆèµ„æºï¼‰è¡¨ç°å±‚çŠ¶æ€è½¬åŒ–ã€‚å¦‚æœä¸€ä¸ªè½¯ä»¶æ¶æ„ç¬¦åˆRESTåŸåˆ™ï¼Œå°±ç§°å®ƒä¸ºRESTfulæ¶æ„ã€‚2.1 èµ„æºï¼ˆResourcesï¼‰æˆ‘ä»¬åœ¨äº’è”ç½‘è½¯ä»¶å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ‰€è¯´çš„â€œèµ„æºâ€æ˜¯æŒ‡åœ¨äº’è”ç½‘ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹çš„å…·ä½“ä¿¡æ¯ï¼Œå¦‚ä¸€æ®µæ–‡æœ¬ã€ä¸€å¼ å›¾ç‰‡ã€ä¸€ä¸ªè§†é¢‘ã€ä¸€ä¸ªå‹ç¼©åŒ…ã€ä¸€ä¸ªç¨‹åºå®‰è£…åŒ…ç­‰ç­‰ã€‚åœ¨äº’è”ç½‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨URIï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰æ¥è¡¨ç¤ºæ¯ä¸€ä¸ªå…·ä½“çš„èµ„æºï¼Œå› æ­¤ï¼Œæ¯ä¸€ä¸ªäº’è”ç½‘èµ„æºéƒ½ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„URIåœ°å€ã€‚2.2 è¡¨ç°å±‚ï¼ˆRepresentationalï¼‰â€œèµ„æºâ€æ˜¯ä¸€ç§ä¿¡æ¯çš„å®ä½“ï¼Œå®é™…ä¸Šï¼Œèµ„æºæœ‰å¾ˆå¤šè¡¨ç°å½¢æˆï¼Œå¦‚ä¸€æ®µæ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ™®é€šçš„txtæ ¼å¼æ¥è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨JSONæ ¼å¼æ¥è¡¨ç¤ºï¼Œè¿˜å¯ä»¥ä½¿ç”¨XMLæ ¼å¼æ¥è¡¨ç¤ºã€‚â€œèµ„æºâ€çš„å…·ä½“è¡¨ç°å½¢å¼æˆ‘ä»¬å°±å«åšè¡¨ç°å±‚ã€‚åœ¨HTTPåè®®ä¸­ï¼Œè§„å®šäº†å¤´ä¿¡æ¯ä¸­çš„Content-Typeå­—æ®µæ¥æè¿°å…·ä½“çš„èµ„æºè¡¨ç°å½¢å¼ã€‚å¦‚â€œContent-Type: text/htmlâ€è¡¨ç¤ºä¸ºhtmlæ ¼å¼çš„æ–‡æœ¬æ•°æ®ï¼Œè€Œâ€œContent-Type: text/jsonâ€è¡¨ç¤ºä¸ºJSONæ ¼å¼çš„æ–‡æœ¬æ•°æ®ã€‚2.3 çŠ¶æ€è½¬åŒ–ï¼ˆState Transferï¼‰HTTPæ˜¯ä¸€ç§æ— çŠ¶æ€çš„ç½‘ç»œåè®®ï¼Œå¦‚æœå®¢æˆ·ç«¯è¦æ“ä½œæœåŠ¡å™¨ï¼Œå¿…é¡»é€šè¿‡ä¸€ç§æ‰‹æ®µé€šçŸ¥æœåŠ¡å™¨è¿›è¡Œâ€œçŠ¶æ€è½¬åŒ–â€ï¼Œè€Œè¿™ç§çŠ¶æ€æ”¹å˜å»ºç«‹åœ¨â€œè¡¨ç°å±‚â€ä¹‹ä¸Šï¼Œè¿™å°±æ˜¯â€œè¡¨ç°å±‚çŠ¶æ€è½¬åŒ–â€ã€‚åœ¨HTTPåè®®ä¸­ï¼Œå®¢æˆ·ç«¯é€šè¿‡å‘é€ç›¸åº”çš„è¯·æ±‚å‘ŠçŸ¥æœåŠ¡å™¨å®ç°æŸç§çŠ¶æ€çš„æ”¹å˜ã€‚å®¢æˆ·ç«¯ä½¿ç”¨GETã€POSTã€PUTã€DELETE4ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¯¹æœåŠ¡ç«¯èµ„æºè¿›è¡Œæ“ä½œã€‚ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹RESTfulçš„ç‰¹ç‚¹ï¼š æ¯ä¸ªäº’è”ç½‘èµ„æºéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„URIåœ°å€ é€šè¿‡æ“ä½œèµ„æºçš„è¡¨ç°å½¢å¼æ¥æ“ä½œèµ„æº ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨JSONæ ¼å¼æ¥è¡¨ç¤ºå…·ä½“çš„æ•°æ® ä½¿ç”¨HTTPåè®®è¿›è¡Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´çš„äº¤äº’ï¼Œä»å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æ¯ä¸ªè¯·æ±‚éƒ½å¿…é¡»åŒ…å«ç†è§£è¯·æ±‚æ‰€å¿…éœ€çš„ä¿¡æ¯ å®¢æˆ·ç«¯ä½¿ç”¨GETã€POSTã€PUTã€DELETE 4ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯å¯¹æœåŠ¡ç«¯èµ„æºè¿›è¡Œâ€œçŠ¶æ€â€æ“ä½œä¸‰ã€RESTful APIæ¶æ„è§„èŒƒRESTå¹¶æ²¡æœ‰æ˜ç¡®çš„è®¾è®¡æ ‡å‡†ï¼Œå¯ä»¥è¯´RESTfulæ˜¯ä¸€ç§è®¾è®¡é£æ ¼çš„è§„èŒƒåŒ–ã€‚åœ¨RESTful APIè®¾è®¡ä¸­ï¼Œä¸åŒçš„ç»„ç»‡å¯èƒ½è¿˜å­˜åœ¨ä¸åŒçš„è®¾è®¡é£æ ¼è§„èŒƒï¼Œä½†æ˜¯æ•´ä½“ä¸ŠRESTfulçš„é£æ ¼è§„èŒƒæ˜¯ä¸€è‡´çš„ã€‚ä¹Ÿæ­£æ˜¯å› ä¸ºæœ‰äº†ä¸€è‡´çš„é£æ ¼è§„èŒƒï¼Œè®©è¯»APIçš„äººæ›´å¥½åœ°ç†è§£APIï¼Œç”šè‡³ä¸ç”¨é˜…è¯»æ–‡æ¡£ï¼Œå°±çŸ¥é“APIè¦å®ç°çš„æŸä¸ªèµ„æºçš„æŸç§â€œçŠ¶æ€è½¬åŒ–â€ã€‚æ ¹æ®Githubå¼€æ”¾APIæˆ–è€…å¾®åšå¼€æ”¾APIçš„è®¾è®¡é£æ ¼ã€‚ä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„RESTful APIçš„ç›¸å…³é£æ ¼è§„èŒƒï¼Œä»Šåæˆ‘å°†ä½¿ç”¨æ­¤è§„èŒƒè¿›è¡ŒAPIå¼€å‘ã€‚3.1 åè®®å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨HTTPæˆ–è€…HTTPSåè®®è¿›è¡Œé€šä¿¡ã€‚3.2 åŸŸååº”å½“å°½é‡å°†APIç¨‹åºéƒ¨ç½²åˆ°ä¸“æœ‰çš„åŸŸåä¹‹ä¸‹ï¼Œå¦‚ï¼šhttps://api.demo.comå¦‚æœAPIæ¯”è¾ƒç®€å•ï¼Œæˆ–è€…ä¸è€ƒè™‘è¿›è¡Œæ‰©å±•ï¼Œåº”å½“æ”¾åœ¨é¡¹ç›®çš„å­æ¨¡å—ä¸­ï¼Œå¦‚ï¼šhttps://demo.com/api/3.3 APIç‰ˆæœ¬åº”å½“å°†APIç‰ˆæœ¬æ”¾åœ¨URLä¸­ï¼Œå¦‚å¾®åšå¼€æ”¾APIå°±å°†ç‰ˆæœ¬å·æ”¾åœ¨URLä¸­ï¼šhttp://api.weibo.com/2/å¦‚æœæˆ‘ä»¬æŠŠç‰ˆæœ¬å·ç†è§£æˆèµ„æºçš„ä¸åŒè¡¨è¿°å½¢å¼çš„è¯ï¼ŒAPIç‰ˆæœ¬åº”æ”¾åœ¨HTTPè¯·æ±‚å¤´Acceptå­—æ®µä¸­ï¼Œå¦‚githubä¸­çš„å¼€æ”¾APIAccept: application/vnd.github.v3å¯èƒ½githubè€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œæ‰€ä»¥æŠŠè¯·æ±‚çš„APIç‰ˆæœ¬æ”¾åˆ°HTTPè¯·æ±‚å¤´é‡Œäº†ã€‚å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å¿«é€Ÿçš„å¼€å‘ä¸€ä¸ªAPIç¨‹åºï¼Œä½¿ç”¨ç¬¬ä¸€ç§å½¢å¼ä¼šæ›´åŠ ç›´è§‚ä¸æ–¹ä¾¿ã€‚3.4 è·¯å¾„å¯¹äºä¸åŒçš„èµ„æºï¼Œéƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„URLåœ°å€ï¼Œæ¯ä¸€ä¸ªURLåœ°å€ä»£è¡¨ä¸€ç§èµ„æºï¼Œæ‰€ä»¥ç½‘å€ä¸­åº”å½“æ˜¯åç§°ï¼Œä¸èƒ½æ˜¯åŠ¨è¯ï¼Œè€Œä¸”åè¯åº”å½“ä¸æ•°æ®åº“è¡¨åå¯¹åº”ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ•°æ®åº“ä¸­ä¿å­˜çš„æ˜¯æ•°æ®é›†åˆï¼Œæ‰€ä»¥URLä¸­å¯¹åº”çš„èµ„æºåº”å½“æ˜¯åè¯å¤æ•°ã€‚å¦‚Githubå¼€æ”¾APIä¸­ï¼Œåˆ—å‡ºä¸€ä¸ªç»„ç»‡çš„é¡¹ç›®é›†åˆhttps://api.github.com/orgs/:org/projectsåœ¨ä¸Šé¢URLä¸­ï¼Œorgsä»£è¡¨ç»„ç»‡é›†åˆï¼Œè€Œ:orgä»£è¡¨é›†ä½“çš„ç»„ç»‡åï¼Œprojectsä»£è¡¨å…·ä½“çš„èµ„æº3.5 HTTPåŠ¨è¯å¯¹äºèµ„æºçš„æŸç§å…·ä½“æ“ä½œç±»å‹ï¼Œéœ€è¦å®¢æˆ·ç«¯å‘é€ä¸åŒçš„HTTPåŠ¨ä½œæ¥å®Œæˆã€‚å¸¸ç”¨çš„äº”ä¸ªHTTPåŠ¨è¯å·²ç»å¯¹åº”æ“ä½œå¦‚ä¸‹ï¼š GETï¼ˆRetrieveï¼‰ï¼šä»æœåŠ¡å™¨å–å‡ºèµ„æºï¼ˆä¸€é¡¹æˆ–å¤šé¡¹ï¼‰ï¼› POSTï¼ˆCREATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ–°å»ºä¸€ä¸ªèµ„æºï¼› PUTï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜åçš„å®Œæ•´èµ„æºï¼‰ï¼› PATCHï¼ˆUPDATEï¼‰ï¼šåœ¨æœåŠ¡å™¨æ›´æ–°èµ„æºï¼ˆå®¢æˆ·ç«¯æä¾›æ”¹å˜çš„å±æ€§ï¼‰ï¼› DELETEï¼ˆDELETEï¼‰ï¼šä»æœåŠ¡å™¨åˆ é™¤èµ„æºã€‚å®é™…ä¸Šï¼Œæœ€å¸¸ç”¨çš„é¢HTTPåŠ¨è¯åŸå…ˆåªæœ‰4ä¸ªï¼Œå³GETã€POSTã€PUTã€DELETEï¼ŒPATCHæ–¹æ³•æ˜¯æ–°å¼•å…¥çš„ï¼Œæ˜¯å¯¹PUTæ–¹æ³•çš„è¡¥å……ï¼Œç”¨æ¥å¯¹å·²çŸ¥èµ„æºè¿›è¡Œå±€éƒ¨æ›´æ–°ã€‚æœ‰æ—¶å€™ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸ªå±æ€§ï¼Œå¼€å‘è€…é€šå¸¸(ä¸ºå›¾çœäº‹)æŠŠä¸€ä¸ªåŒ…å«äº†ä¿®æ”¹åå®Œæ•´ä¿¡æ¯ä¼ ç»™åç«¯ï¼Œåšå®Œæ•´æ›´æ–°ã€‚ä½†å®é™…ä¸Šå¦‚æœéœ€è¦è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼Œæ˜¯æœ‰å¿…è¦åšå±€éƒ¨æ›´æ–°çš„ã€‚3.6 è¿‡æ»¤åœ¨è·å–æœåŠ¡å™¨èµ„æºçš„æ—¶å€™ï¼Œå¤§éƒ¨åˆ†æƒ…å†µæ˜¯éœ€è¦è¿›è¡Œè¿‡æ»¤çš„ï¼Œè€Œä¸æ˜¯è·å–æ•°æ®åº“ä¸­çš„å®Œæ•´é›†åˆã€‚è¿™æ—¶å€™éœ€è¦è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿‡æ»¤æ¡ä»¶ä½œä¸ºå‚æ•°æ‹¼æ¥åˆ°URLä¸­ã€‚å¦‚ä¸‹ï¼š?limit=10 # æŒ‡å®šè·å–10æ¡ä¿¡æ¯é›†åˆ?page=1&amp;limit=10 # æŒ‡å®šæ¯é¡µ10æ¡ä¿¡æ¯ï¼Œè·å–ç¬¬1é¡µä¿¡æ¯é›†åˆ?limit=10&amp;deleted=true # è·å–æ•°æ®åº“ä¸­å·²ç»æ ‡å¿—ä¸ºåˆ é™¤çš„10æ¡ä¿¡æ¯é›†åˆ3.7 è¿”å›ä½¿ç”¨ç›¸åº”çš„HTTPçŠ¶æ€ç ï¼Œå°†ç»“æœå‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨çš„HTTPçŠ¶æ€ç ä»¥åŠçŠ¶æ€æè¿°ï¼š æ­£å¸¸ï¼šå¦‚æœæ­£å¸¸è¿”å›æ•°æ®ï¼Œåº”å½“ä½¿ç”¨msgæˆ–è€…å…¶ä»–å…³é”®å­—ä½œä¸ºé”®åè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå¦‚ä¸‹{\"data\":[ \"user_id\":1, \"name\":\"å¼ ä¸‰\", \"token\":\"csdcnsdvndsijudsao\",],\"message\":\"OK\",\"code\":200} é”™è¯¯ï¼šå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåº”å½“ä½¿ç”¨errorä½œä¸ºé”™è¯¯ä¿¡æ¯çš„é”®åè¿”å›ç»™å®¢æˆ·ç«¯{\"error\":\"Unauthorized\",\"code\":401}é’ˆå¯¹ä¸åŒæ“ä½œï¼ŒæœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›çš„ç»“æœåº”è¯¥ç¬¦åˆä»¥ä¸‹è§„èŒƒï¼š GET /collectionï¼šè¿”å›èµ„æºå¯¹è±¡çš„åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ GET /collection/resourceï¼šè¿”å›å•ä¸ªèµ„æºå¯¹è±¡ POST /collectionï¼šè¿”å›æ–°ç”Ÿæˆçš„èµ„æºå¯¹è±¡ PUT /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡ PATCH /collection/resourceï¼šè¿”å›å®Œæ•´çš„èµ„æºå¯¹è±¡ DELETE /collection/resourceï¼šè¿”å›ä¸€ä¸ªç©ºæ–‡æ¡£3.8 Hypermedia APIRESTful APIæœ€å¥½åšåˆ°Hypermediaï¼Œå³è¶…åª’ä½“ï¼Œåœ¨è¿”å›ç»“æœä¸­æä¾›é“¾æ¥ï¼Œè¿å‘å…¶ä»–APIæ–¹æ³•æˆ–è€…ä¸€äº›æ–‡æ¡£ï¼Œä½¿å¾—ç”¨æˆ·ä¸æŸ¥æ–‡æ¡£ï¼Œä¹ŸçŸ¥é“ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆã€‚å¦‚Githubå°±åšåˆ°äº†Hypermediaï¼Œä½¿ç”¨GETæ–¹å¼è¯·æ±‚ https://api.github.com ï¼Œä¼šè¿”å›ä¸€ç³»åˆ—çš„é“¾æ¥åœ°ç‚¹ï¼š{ \"current_user_url\": \"https://api.github.com/user\", \"current_user_authorizations_html_url\": \"https://github.com/settings/connections/applications{/client_id}\", \"authorizations_url\": \"https://api.github.com/authorizations\", \"code_search_url\": \"https://api.github.com/search/code?q={query}{&amp;page,per_page,sort,order}\", \"commit_search_url\": \"https://api.github.com/search/commits?q={query}{&amp;page,per_page,sort,order}\",.....å››ã€RESTful APIè®¾è®¡ç¤ºä¾‹RESTful APIé£æ ¼ä¸»è¦ä½“ç°åœ¨URLä¸­ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¥å®ŒæˆRESful APIçš„URLåˆ¶å®šã€‚å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªç®€å•çš„åšå®¢ç³»ç»Ÿï¼Œè¦ç»™H5ã€Androidã€iPhoneã€å°ç¨‹åºæä¾›ä¸€å¥—ç»Ÿä¸€çš„æ¥å£ã€‚é‚£ä¹ˆé¢„è®¾åŠŸèƒ½ä¸å¯¹åº”URLå·²ç»è¯·æ±‚æ–¹å¼å¦‚ä¸‹ï¼š æœ¬æ–‡ä¸ºä½œè€…åŸåˆ›æ–‡ç« ï¼Œç¦æ­¢è½¬è½½ï¼ŒåŸä½œè€…ï¼šhttps://phy.xyz" }, { "title": "æ€æ ·ä½¿ç”¨JWTè¿›è¡ŒæˆæƒéªŒè¯ï¼Ÿ", "url": "/posts/theory_how-to-use-jwt.html", "categories": "ç†è®ºåŸºç¡€", "tags": "", "date": "2023-01-31 00:56:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°JWTå¯ä»¥å–ä»£ä»¥å¾€çš„åŸºäº COOKIE/SESSION çš„é‰´æƒä½“ç³»ï¼Œæ˜¯ç›®å‰æœ€çƒ­é—¨è·¨åŸŸé‰´æƒçš„è§£å†³æ–¹æ¡ˆï¼Œæ¥ä¸‹æ¥ä» JWT çš„åŸç†ï¼Œåˆ° PHP ç¤ºä¾‹ä»£ç ï¼Œç®€å•è¯´æ˜ä¸šåŠ¡æ€æ ·ä½¿ç”¨ JWT è¿›è¡ŒæˆæƒéªŒè¯ã€‚äºŒã€JWTçš„åŸç†æ˜¯ä»€ä¹ˆï¼ŸJWTå®šåˆ¶äº†ä¸€ä¸ªæ ‡å‡†ï¼Œå®é™…ä¸Šå°±æ˜¯å°†åˆæ³•ç”¨æˆ·ï¼ˆä¸€èˆ¬æŒ‡çš„æ˜¯ é€šè¿‡ è´¦å·å¯†ç éªŒè¯ã€çŸ­ä¿¡éªŒè¯ï¼Œä»¥åŠå°ç¨‹åºcodeï¼Œæˆ–è€…é€šè¿‡å…¶ä»–éªŒè¯é€»è¾‘ éªŒè¯ä¸ºåˆæ³•çš„ç”¨æˆ·ï¼‰çš„æˆæƒä¿¡æ¯ï¼ŒåŠ å¯†èµ·æ¥ï¼Œ...", "content": "ä¸€ã€æ¦‚è¿°JWTå¯ä»¥å–ä»£ä»¥å¾€çš„åŸºäº COOKIE/SESSION çš„é‰´æƒä½“ç³»ï¼Œæ˜¯ç›®å‰æœ€çƒ­é—¨è·¨åŸŸé‰´æƒçš„è§£å†³æ–¹æ¡ˆï¼Œæ¥ä¸‹æ¥ä» JWT çš„åŸç†ï¼Œåˆ° PHP ç¤ºä¾‹ä»£ç ï¼Œç®€å•è¯´æ˜ä¸šåŠ¡æ€æ ·ä½¿ç”¨ JWT è¿›è¡ŒæˆæƒéªŒè¯ã€‚äºŒã€JWTçš„åŸç†æ˜¯ä»€ä¹ˆï¼ŸJWTå®šåˆ¶äº†ä¸€ä¸ªæ ‡å‡†ï¼Œå®é™…ä¸Šå°±æ˜¯å°†åˆæ³•ç”¨æˆ·ï¼ˆä¸€èˆ¬æŒ‡çš„æ˜¯ é€šè¿‡ è´¦å·å¯†ç éªŒè¯ã€çŸ­ä¿¡éªŒè¯ï¼Œä»¥åŠå°ç¨‹åºcodeï¼Œæˆ–è€…é€šè¿‡å…¶ä»–éªŒè¯é€»è¾‘ éªŒè¯ä¸ºåˆæ³•çš„ç”¨æˆ·ï¼‰çš„æˆæƒä¿¡æ¯ï¼ŒåŠ å¯†èµ·æ¥ï¼Œç„¶åé¢å‘ç»™å®¢æˆ·ç«¯ã€‚å®¢æˆ·ç«¯è¯·æ±‚éœ€è¦é‰´æƒçš„æ¥å£çš„æ—¶å€™ï¼Œé€šè¿‡ HTTPæŠ¥æ–‡ å¤´éƒ¨çš„ Authorizationå›ä¼ ã€‚é¦–å…ˆï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªå¯†é’¥ï¼ˆsecretï¼‰ã€‚è¿™ä¸ªå¯†é’¥åªæœ‰æœåŠ¡å™¨æ‰çŸ¥é“ï¼Œä¸èƒ½æ³„éœ²ç»™ç”¨æˆ·ã€‚ç„¶åï¼Œä½¿ç”¨ Header é‡Œé¢æŒ‡å®šçš„ç­¾åç®—æ³•ï¼ˆé»˜è®¤æ˜¯ HMAC SHA256ï¼‰ï¼ŒæŒ‰ç…§ä¸‹é¢çš„å…¬å¼äº§ç”Ÿç­¾åï¼šHMACSHA256( base64UrlEncode(header) + \".\" + base64UrlEncode(payload), secret)ä¸‹é¢æ˜¯ JWTåŒ…å«çš„æ•°æ®ï¼š Headerï¼ˆå¤´éƒ¨ï¼‰Header éƒ¨åˆ†æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œæè¿° JWT çš„å…ƒæ•°æ®ï¼Œé€šå¸¸æ˜¯ä¸‹é¢çš„æ ·å­ã€‚{ \"alg\": \"HS256\", \"typ\": \"JWT\"}ä¸Šé¢çš„JSONå¯¹è±¡ä¸­ï¼Œalgå±æ€§è¡¨ç¤ºç­¾åçš„ç®—æ³•ï¼Œé»˜è®¤æ˜¯ HMAC SHA256ï¼›typå±æ€§è¡¨ç¤ºè¿™ä¸ªä»¤ç‰Œï¼ˆtokenï¼‰çš„ç±»å‹ã€‚ Payloadï¼ˆè´Ÿè½½ï¼‰æ­¤éƒ¨åˆ†ä¸»è¦ç”¨ç”¨äºå­˜æ”¾æ•°æ®ï¼Œå…¶ä¸­æœ‰å®˜æ–¹æŒ‡å®šçš„é»˜è®¤å­—æ®µå¦‚ä¸‹iss: ç­¾å‘äººexp: è¿‡æœŸæ—¶é—´sub: ä¸»é¢˜aud: å—ä¼—nbf: ç”Ÿæ•ˆæ—¶é—´iat: ç­¾å‘æ—¶é—´jti: JWTç¼–å·æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ è‡ªå·±çš„å­—æ®µï¼Œä½†æ˜¯ä¸è¦æˆ‘åŠ å¯†çš„ä¿¡æ¯æ”¾åœ¨è¿™é‡Œï¼Œå› ä¸ºPayploadæ•°æ®æ˜¯è°éƒ½èƒ½è§£æå‡ºæ¥çš„ã€‚æˆ‘ä»¬ä¸€èˆ¬æŠŠuidï¼ˆç”¨æˆ·idï¼‰ã€ç”¨æˆ·åç­‰ å¼€æ”¾ä¿¡æ¯å­˜åœ¨è¿™é‡Œ Signatureï¼ˆç­¾åï¼‰Signatureæ˜¯JWTæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œæ˜¯å¯¹å‰ä¸¤éƒ¨åˆ†çš„ç­¾åï¼Œé˜²æ­¢æ•°æ®ç¯¡æ”¹ã€‚ä¸‰ã€æ€æ ·ä½¿ç”¨JWTï¼ŸåŸºäºJWTåˆ¶å®šçš„æ ‡å‡†ï¼Œè¡ç”Ÿå‡ºæ¥äº†å®ç° JWT çš„å¤šä¸ªå¼€æºåº“ https://jwt.io/libraries ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®ç° JWT çš„é€»è¾‘ï¼Œä½†æ˜¯ä¹Ÿæ²¡æœ‰å¿…è¦é‡å¤å»é€ è½®å­ï¼Œå¼€å‘è€…åº”è¯¥åˆ©ç”¨æ›´å¤šçš„æ—¶é—´ å»æ€è€ƒ æœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç”± Google Firebase å¼€å‘çš„ firebase/php-jwt åº“ï¼Œ è¿™ä¸ªåº“ä¹Ÿæ˜¯ç›®å‰æœ€çƒ­é—¨çš„ PHP JWT åº“ã€‚ä¸‹é¢ä»‹ç»åŸºäºè¯¥åº“ï¼Œå®ç°å¸¸ç”¨çš„ä¸¤ç§ JWT éªŒè¯æ–¹å¼ã€‚ HS256åŠ å¯† ï¼šç”Ÿæˆä¸éªŒè¯JWTä½¿ç”¨ HS256 ç®—æ³•ç”Ÿæˆ JWTï¼Œè¿™æ˜¯ä¸€ç§å¯¹ç§°åŠ å¯†ï¼Œä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ä¸²è¿›è¡ŒåŠ å¯†å’Œè§£å¯†ã€‚åŠ å¯†è¿‡ç¨‹ï¼š// åŠ å¯†å¯†é’¥ï¼Œè¦å°½å¯èƒ½å¤æ‚ç‚¹$key = 'kol.mama.com.cn.12334556';$payload = [ // ç­¾å‘è€… 'iss' =&gt; 'kol', // ä¸»é¢˜ 'sub' =&gt; 'kol user authorization', // ç­¾å‘æ—¶é—´ 'iat' =&gt; time(), // ç”Ÿæ•ˆæ—¶é—´ 'nbf' =&gt; time(), // æˆªæ­¢æ—¶é—´ 'exp' =&gt; time() + 3600 * 24 * 3, // è‡ªå®šä¹‰å­—æ®µï¼šuid 'uid' =&gt; 123456, // è‡ªå®šä¹‰å­—æ®µï¼šç”¨æˆ·å 'user_name' =&gt; 'ç”¨æˆ·1'];$token = JWT::encode($payload, $key);è§£å¯†è¿‡ç¨‹ï¼š$token = str_replace('Bearer ', '', $request-&gt;header('Authorization'));$payload = JWT::decode($token, $key, ['HS256']); RS256åŠ å¯† ï¼šç”Ÿæˆä¸éªŒè¯JWTè¿™æ˜¯ä¸€ç§éå¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯†å’Œè§£å¯†ä½¿ç”¨ ä¸€ä¸ª å¯†é’¥å¯¹# ç”Ÿæˆç§é’¥ssh-keygen -t rsa -b 2048 -f private.key# ä½¿ç”¨ç§é’¥ç”Ÿæˆå…¬é’¥openssl rsa -in private.key -pubout -outform PEM -out public.keyåŠ å¯†è¿‡ç¨‹$priKey = file_get_contents('./private.key');$payload = [ // ç­¾å‘è€… 'iss' =&gt; 'kol', // ä¸»é¢˜ 'sub' =&gt; 'kol user authorization', // ç­¾å‘æ—¶é—´ 'iat' =&gt; time(), // ç”Ÿæ•ˆæ—¶é—´ 'nbf' =&gt; time(), // æˆªæ­¢æ—¶é—´ 'exp' =&gt; time() + 3600 * 24 * 3, // è‡ªå®šä¹‰å­—æ®µï¼šuid 'uid' =&gt; 123456, // è‡ªå®šä¹‰å­—æ®µï¼šç”¨æˆ·å 'user_name' =&gt; 'ç”¨æˆ·1'];$token = JWT::encode($payload, $priKey, 'RS256');è§£å¯†è¿‡ç¨‹$pubKey = file_get_contents('./public.key');$token = str_replace('Bearer ', '', $request-&gt;header('Authorization'));$payload = JWT::decode($token, $pubKey, ['RS256']); JWT è§£å¯†ï¼ˆéªŒè¯ï¼‰å¦‚æœæ­£å¸¸é€šè¿‡éªŒè¯ï¼Œå°†è§£æå‡º payload åœ¨åŠ å¯†å‰çš„åŸæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥åŸºç¡€å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼›å¦‚æœ token å·²ç»è¿‡æœŸï¼Œæˆ–è€… token æ˜¯éæ³• tokenï¼Œè¿™æ—¶å€™æˆ‘ä»¬é€šå¸¸è®¤ä¸ºç”¨æˆ·çš„æ“ä½œæ˜¯ éæ³•è¯·æ±‚ï¼Œç³»ç»Ÿä¹Ÿå°†ä¼šæŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬åªéœ€è¿›è¡Œæ•è·å¹¶ å¤„ç†ç›¸å…³æ‹¦æˆªçš„ é€»è¾‘å³å¯ã€‚å¦‚ä¸‹ç¤ºä¾‹ä»£ç ï¼štry { // éªŒè¯JWT $token = str_replace('Bearer ', '', $request-&gt;header('Authorization')); $payload = JWT::decode($token, config('jwt.key'), ['HS256']);} catch (Exception $exception) { // ç»ˆæ­¢ä¸šåŠ¡é€»è¾‘ï¼Œå‘å®¢æˆ·ç«¯è¿”å›é”™è¯¯ä¿¡æ¯ $data = [ 'code' =&gt; $exception-&gt;getCode() ?: 401, 'msg' =&gt; $exception-&gt;getMessage(), 'data' =&gt; null, ]; return json($data);}å››ã€å®¢æˆ·ç«¯æ€ä¹ˆå›ä¼ JWTï¼ŸJWT å®˜ç½‘çš„æ ‡å‡†æ˜¯å°† JWT å‡­è¯æ”¾åœ¨ HTTP æŠ¥æ–‡ å¤´éƒ¨çš„ Authorization ä¸­è¿›è¡Œè¯·æ±‚ï¼Œå¦‚å‘æœåŠ¡å™¨è¯·æ±‚ ç”¨æˆ·çš„ ä¸ªäººä¿¡æ¯ï¼ŒHTTPæŠ¥æ–‡ å¦‚ä¸‹ç¤ºä¾‹GET https://api.example.com/userAccept: application/jsonAuthorization: Bearer $TOKENäº”ã€ä½¿ç”¨JWTè¦æ³¨æ„ä»€ä¹ˆï¼ŸJWT çš„æœ€å¤§ç¼ºç‚¹æ˜¯ï¼Œç”±äºæœåŠ¡å™¨ä¸ä¿å­˜ session çŠ¶æ€ï¼Œå› æ­¤æ— æ³•åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­åºŸæ­¢æŸä¸ª tokenï¼Œæˆ–è€…æ›´æ”¹ token çš„æƒé™ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦ JWT ç­¾å‘äº†ï¼Œåœ¨åˆ°æœŸä¹‹å‰å°±ä¼šå§‹ç»ˆæœ‰æ•ˆï¼Œé™¤éæœåŠ¡å™¨éƒ¨ç½²é¢å¤–çš„é€»è¾‘ã€‚JWT æœ¬èº«åŒ…å«äº†è®¤è¯ä¿¡æ¯ï¼Œä¸€æ—¦æ³„éœ²ï¼Œä»»ä½•äººéƒ½å¯ä»¥è·å¾—è¯¥ä»¤ç‰Œçš„æ‰€æœ‰æƒé™ã€‚ä¸ºäº†å‡å°‘ç›—ç”¨ï¼ŒJWT çš„æœ‰æ•ˆæœŸåº”è¯¥è®¾ç½®å¾—æ¯”è¾ƒçŸ­ã€‚å¯¹äºä¸€äº›æ¯”è¾ƒé‡è¦çš„æƒé™ï¼Œä½¿ç”¨æ—¶åº”è¯¥å†æ¬¡å¯¹ç”¨æˆ·è¿›è¡Œè®¤è¯ï¼ˆå¦‚é€šè¿‡æ‰‹æœº éªŒè¯ç  å†æ¬¡éªŒè¯ï¼Œæˆ–è€…å†æ¬¡è¾“å…¥ç”¨æˆ·å¯†ç è¿›è¡ŒéªŒè¯ï¼‰ã€‚" }, { "title": "Linuxå­¦ä¹ è·¯å¾„", "url": "/posts/theory_linux-study-roadmap.html", "categories": "ç†è®ºåŸºç¡€", "tags": "", "date": "2023-01-31 00:55:00 +0800", "snippet": " æœ¬æ–‡ä¸ºæ‘˜æŠ„æ–‡ç« ä¸€ã€äº†è§£æ“ä½œç³»ç»ŸåŸºæœ¬æ¦‚å¿µå¦‚æœä¸ä¼šï¼Œå¯ä»¥å­¦ä¹ ã€Šæ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸å®ç°ã€‹Andrew S.Tanenbaum å†™çš„é‚£æœ¬ã€‚ä»¥MINIXä¸ºä¾‹å­è®²è§£æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µã€‚éå¸¸æ¨èã€‚äºŒã€äº†è§£Linuxå†…æ ¸æœºåˆ¶æœ‰äº†æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µä»¥åï¼Œå¯ä»¥äº†è§£Linuxçš„æœºåˆ¶äº†ã€‚æ¨èã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹Robert Love å†™çš„ã€‚è¿™æœ¬ä¹¦ä»æ¦‚å¿µä¸Šè®²è§£äº†Linuxæœ‰ä»€ä¹ˆï¼Œä»–ä»¬æ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚è¿™æœ¬ä¹¦è¦åå¤è®¤...", "content": " æœ¬æ–‡ä¸ºæ‘˜æŠ„æ–‡ç« ä¸€ã€äº†è§£æ“ä½œç³»ç»ŸåŸºæœ¬æ¦‚å¿µå¦‚æœä¸ä¼šï¼Œå¯ä»¥å­¦ä¹ ã€Šæ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸å®ç°ã€‹Andrew S.Tanenbaum å†™çš„é‚£æœ¬ã€‚ä»¥MINIXä¸ºä¾‹å­è®²è§£æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µã€‚éå¸¸æ¨èã€‚äºŒã€äº†è§£Linuxå†…æ ¸æœºåˆ¶æœ‰äº†æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µä»¥åï¼Œå¯ä»¥äº†è§£Linuxçš„æœºåˆ¶äº†ã€‚æ¨èã€ŠLinuxå†…æ ¸è®¾è®¡ä¸å®ç°ã€‹Robert Love å†™çš„ã€‚è¿™æœ¬ä¹¦ä»æ¦‚å¿µä¸Šè®²è§£äº†Linuxæœ‰ä»€ä¹ˆï¼Œä»–ä»¬æ˜¯æ€ä¹ˆè¿è¡Œçš„ã€‚è¿™æœ¬ä¹¦è¦åå¤è®¤çœŸçœ‹é€ã€‚ä¸‰ã€ç ”ç©¶Linuxå†…æ ¸æºç æœ‰äº†Linuxå†…æ ¸çš„äº†è§£ï¼Œè¿˜éœ€è¦å…·ä½“ç ”ç©¶Linuxå†…æ ¸æºç ã€‚æœ€ç»å…¸çš„å°±æ˜¯ã€Šæ·±å…¥ç†è§£Linuxå†…æ ¸ã€‹Daniel P. Bovet å†™çš„ã€‚å­¦ä¹ è¿™æœ¬ä¹¦çš„æ—¶å€™ï¼Œè¦å¯¹ç€å†…æ ¸ä»£ç çœ‹ç€å­¦ã€‚è¿™æœ¬ä¹¦å­¦èµ·æ¥ç›¸å½“è´¹åŠ›äº†ï¼Œé‚£ä¹ˆå¤šå¤šä»£ç è¦ç ”ç©¶ã€‚ä¸è¿‡è¿™æœ¬ä¹¦å¦‚æœå­¦æ˜ç™½äº†ï¼Œæ­å–œä½ ï¼ŒLinuxå†…æ ¸ä½ å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚å››ã€è®¾å¤‡é©±åŠ¨æ–¹å‘å­¦ä¹ å¦‚æœè¦å¼€å‘è®¾å¤‡é©±åŠ¨ï¼Œå¯ä»¥å­¦ä¹ ã€Šlinuxè®¾å¤‡é©±åŠ¨ç¨‹åºã€‹Oâ€™Reillyå‡ºç‰ˆç¤¾çš„ã€‚è¿™æœ¬ä½œä¸ºé©±åŠ¨çš„å…¥é—¨æ˜¯å¾ˆå¥½çš„èµ„æ–™ã€‚å¦å¤–è¿˜æœ‰ä¸€æœ¬ã€Šç²¾é€š Linux é©±åŠ¨ç¨‹åºå¼€å‘ã€‹ä¹Ÿæ˜¯ä¸é”™çš„æ•™æï¼Œå¯ä»¥å‚è€ƒç€çœ‹ã€‚å­¦ä¹ é©±åŠ¨ï¼Œå…ä¸äº†è¦å­¦ä¹ ä¸€äº›ç¡¬ä»¶çš„åè®®å’Œèµ„æ–™ï¼Œç ”ç©¶å“ªä¸ªå°±æ‰¾åˆ°ç›¸åº”çš„ç¡¬ä»¶æ–‡æ¡£ï¼ŒæŠŠç¡¬ä»¶çš„å·¥ä½œåŸ ç†ææ˜ç™½ã€‚è¿™äº›å°±ä¸ç»†è¯´äº†ã€‚äº”ã€ç½‘ç»œæ–¹å‘å­¦ä¹ ç½‘ç»œéƒ¨åˆ†ï¼Œå­¦äº›Linuxç½‘ç»œéƒ¨åˆ†å°±å­¦ä¹ ã€Šæ·±å…¥ç†è§£LINUXç½‘ç»œæŠ€æœ¯å†…å¹•ã€‹ã€‚è¿™æœ¬ä¹¦æŠŠLinuxçš„ç½‘ç»œéƒ¨åˆ†è®²çš„éå¸¸æ¸…æ™°é€å½»ã€‚ä½†æ˜¯é€šå¸¸ä¸åšè¿™æ–¹é¢çš„å·¥ä½œç ”ç©¶ï¼Œä¹Ÿä¸ç”¨ç ”ç©¶è¿™ä¹ˆæ·±ï¼Œæ¯•ç«Ÿç°åœ¨å›½å†…ç›¸å…³èŒä½è¾ƒå°‘ã€‚å…­ã€åµŒå…¥å¼å¼€å‘ç°åœ¨Linuxç›¸å…³çš„å·¥ä½œï¼Œå¤šé›†ä¸­åœ¨ä¸€äº›åµŒå…¥å¼å¼€å‘é¢†åŸŸï¼Œarmï¼Œmipsç­‰ï¼Œè¦å­¦ä¹ ä»¥ä¸‹è¿™äº›ä½“ç³»æ¶æ„çš„çš„èµ„æ–™ï¼Œäº†è§£CPUçš„è®¾è®¡å’Œå·¥ä½œæ–¹å¼ã€‚ ARMå°±çœ‹å¯¹åº”çš„èŠ¯ç‰‡æ‰‹å†Œï¼Œè®²çš„å¾ˆç»†è‡´ã€‚MIPSå°±çœ‹ ã€Šsee mips runã€‹ï¼Œæœ‰ä¸€äºŒä¸¤ç‰ˆï¼Œä¸¤ç‰ˆå†…å®¹æœ‰äº›å·®å¼‚ï¼Œæ¨èéƒ½çœ‹ã€‚ä¸ƒã€è¡¥å……ä¸€ç‚¹ç»éªŒä¸è¦è®¤ä¸ºLinuxå¾ˆåºå¤§ï¼Œå¾ˆå¤æ‚ï¼Œå°±è§‰çš„å¾ˆéš¾å­¦ã€‚ä»»ä½•ä¸œè¥¿è®¤çœŸå­¦ä¸‹æ¥éƒ½æ˜¯èƒ½å­¦ä¼šçš„ï¼Œçœ‹ä½ çš„æ’å¿ƒå’Œæ¯…åŠ›äº†ã€‚å¦å¤–ï¼Œä¸è¦èµ°å¼¯è·¯ï¼Œä¸è¦çœ‹ å¸‚é¢ä¸Šè®²ä»€ä¹ˆLinux0.11çš„é‚£äº›ä¹¦ï¼Œç›´æ¥å­¦ä½ è¦å­¦çš„ä¸œè¥¿ã€‚å°±åƒå­¦Cè¯­è¨€çœ‹ä»€ä¹ˆè°­æµ©å¼ºä¸€æ ·ï¼Œå¼¯è·¯èµ°äº†ï¼ŒåŠ›æ°”æ²¡å°‘èŠ±ï¼Œè¿˜ä¸¥é‡å½±å“å­¦ä¹ æ•ˆæœã€‚ä½ é—®çš„å†…æ ¸ï¼Œå¤šç»™ä½ è¯´å‡ å¥åº”ç”¨ç¼–ç¨‹ï¼Œæœ‰æ—¶å€™ç»å¸¸ä¼šéœ€è¦çš„ å­¦ä¹ Linuxåº”ç”¨ç¼–ç¨‹ï¼Œå»ºè®®çœ‹ã€Šunixç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ï¼ŒæŠŠé‡Œé¢çš„ä¾‹å­éƒ½åšä¸€éï¼Œä¼šå¯¹æ•´ä¸ªLinuxç¼–ç¨‹æœ‰ç³»ç»Ÿéƒ½è®¤è¯†ã€‚ é’ˆå¯¹Linuxï¼Œæœ‰æœ¬ ã€ŠLinuxç³»ç»Ÿç¼–ç¨‹ã€‹ï¼Œå­¦å®Œä¸Šä¸€æœ¬ï¼Œè¿™æœ¬å¾ˆå¿«çœ‹ä¸€éå°±æ‡‚äº†ã€‚ä¸»è¦æ˜¯é’ˆå¯¹Linuxå…·ä½“æ‡‚ä¸€äº›å†…å®¹ï¼Œè®²çš„æŒºå…¨äº†ï¼Œå¾ˆå®ç”¨ã€‚ Linuxç½‘ç»œç¼–ç¨‹ï¼Œç³»ç»Ÿçš„å­¦ä¹ ä¸€ä¸‹ã€Šunixç½‘ç»œç¼–ç¨‹.å·1,å¥—æ¥å­—è”ç½‘apiã€‹ï¼ŒåŸºæœ¬ä¸Šç½‘ç»œåº”ç”¨ç›¸å…³çš„ç¨‹åºå°±éƒ½æ²¡é—®é¢˜äº†ã€‚" }, { "title": "è½¯ä»¶å¼€å‘ä¸­å¸¸ç”¨çš„æ•°æ®åŠ å¯†æ–¹å¼", "url": "/posts/theory_encrypt-method.html", "categories": "ç†è®ºåŸºç¡€", "tags": "", "date": "2023-01-31 00:53:00 +0800", "snippet": "ä¸€ã€å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ä½¿ç”¨ç›¸åŒçš„ç§˜é’¥åœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œ AèŠ‚ç‚¹å‘BèŠ‚ç‚¹ä¼ æ•°æ®ï¼Œåœ¨æ•°æ®ä¼ è¾“ä¹‹å‰ï¼Œå…ˆä½¿ç”¨ä¸€ä¸ªç§˜é’¥åœ¨AèŠ‚ç‚¹ä¸Šè¿›è¡ŒåŠ å¯†ï¼Œå½“æ•°æ®ä¼ è¾“åˆ°BèŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ç›¸åŒçš„ç§˜é’¥è¿›è¡Œè§£å¯†æ‰èƒ½è·å–åˆ°åŸå§‹æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯¹ç§°åŠ å¯†ã€‚ ç¼ºç‚¹ï¼šåœ¨ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸å°†åŠ å¯†æ•°æ®å’Œç§˜é’¥ä¸€åŒä¼ è¾“ï¼Œå¦‚æœè¢«é»‘å®¢é€šè¿‡æŠ“åŒ…ç­‰æ–¹æ³•æ‹¦æˆªï¼Œå¯ä»¥é¡ºåˆ©æ‹¿åˆ°åŠ å¯†çš„æ•°æ®å’ŒåŠ å¯†ç§˜é’¥ã€‚è¿™æ ·æ˜¯ä¸å®‰å…¨çš„ã€‚äºŒã€éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†ä½¿ç”¨å…¬ç§å¯†é’¥å¯¹å®ç°...", "content": "ä¸€ã€å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†è¿‡ç¨‹ä½¿ç”¨ç›¸åŒçš„ç§˜é’¥åœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œ AèŠ‚ç‚¹å‘BèŠ‚ç‚¹ä¼ æ•°æ®ï¼Œåœ¨æ•°æ®ä¼ è¾“ä¹‹å‰ï¼Œå…ˆä½¿ç”¨ä¸€ä¸ªç§˜é’¥åœ¨AèŠ‚ç‚¹ä¸Šè¿›è¡ŒåŠ å¯†ï¼Œå½“æ•°æ®ä¼ è¾“åˆ°BèŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ç›¸åŒçš„ç§˜é’¥è¿›è¡Œè§£å¯†æ‰èƒ½è·å–åˆ°åŸå§‹æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¯¹ç§°åŠ å¯†ã€‚ ç¼ºç‚¹ï¼šåœ¨ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸å°†åŠ å¯†æ•°æ®å’Œç§˜é’¥ä¸€åŒä¼ è¾“ï¼Œå¦‚æœè¢«é»‘å®¢é€šè¿‡æŠ“åŒ…ç­‰æ–¹æ³•æ‹¦æˆªï¼Œå¯ä»¥é¡ºåˆ©æ‹¿åˆ°åŠ å¯†çš„æ•°æ®å’ŒåŠ å¯†ç§˜é’¥ã€‚è¿™æ ·æ˜¯ä¸å®‰å…¨çš„ã€‚äºŒã€éå¯¹ç§°åŠ å¯†éå¯¹ç§°åŠ å¯†ä½¿ç”¨å…¬ç§å¯†é’¥å¯¹å®ç°æ•°æ®çš„åŠ å¯†å’Œè§£å¯†åœ¨ç½‘ç»œä¼ è¾“ä¸­ï¼Œ AèŠ‚ç‚¹å‘BèŠ‚ç‚¹ä¼ æ•°æ®ï¼Œåœ¨å‘é€æ•°æ®çš„æ—¶å€™ä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†ã€‚ä½¿ç”¨å…¬é’¥åŠ å¯†æ—¶ï¼Œåªèƒ½ä½¿ç”¨ä¸ä¹‹ç›¸å¯¹åº”çš„ç§é’¥è¿›è¡Œè§£å¯†ã€‚è¿™æ ·ï¼Œåœ¨ä¼ è¾“æ•°æ®çš„æ—¶å€™å°±ä¸å­˜åœ¨å®‰å…¨éšæ‚£é—®é¢˜äº†ï¼Œæ¯”å¦‚ç°åœ¨å¤§å¤šæ•°ç”µå•†ç½‘ç«™ï¼Œå°±æ˜¯ä½¿ç”¨çš„éå¯¹ç§°åŠ å¯†çš„æ–¹å¼ã€‚ä¾‹å­ï¼šç°åœ¨å¾ˆå¤šHTTPSç½‘ç«™é€šè¿‡æƒå¨CAæœºæ„ç”³è¯·äº†SSLè¯ä¹¦ï¼Œè¯ä¹¦åŒ…å«ä¸€å¯¹å…¬ç§é’¥ã€‚å½“æˆ‘ä»¬è®¿é—®HTTPSç½‘ç«™æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†å…¬é’¥ä¸‹è½½åˆ°æœ¬åœ°ï¼Œåœ¨å‘æœåŠ¡å™¨ä¼ è¾“æ•°æ®ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å…ˆä½¿ç”¨å…¬é’¥è¿›è¡ŒåŠ å¯†ï¼Œæ•°æ®ä¼ åˆ°æœåŠ¡å™¨ä¹‹åï¼ŒæœåŠ¡å™¨å†ä½¿ç”¨ç§é’¥è¿›è¡Œè§£å¯†ã€‚ä¸‰ã€å•å‘åŠ å¯†å•å‘åŠ å¯†åªèƒ½åŠ å¯†ä¸èƒ½è§£å¯† ä¾‹å­1æ•°æ®åº“ä¸­çš„ä¿å­˜å¯†ç å¯ä»¥ä½¿ç”¨md5è¿›è¡ŒåŠ å¯†ï¼ŒåŠ å¯†ä¹‹åä¸èƒ½è§£å¯†ã€‚å¸¸ç”¨çš„å•å‘åŠ å¯†è¿˜æœ‰sha1åŠ å¯†ã€sha256åŠ å¯†ã€‚ ä¾‹å­2 æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æµ‹ä¸€ä¸ªæ–‡ä»¶çš„md5æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚æœ€å¼€å§‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨md5sumè¿›è¡Œæ ¡éªŒå¾—åˆ°æ–‡ä»¶åˆå§‹md5æ£€éªŒå€¼ã€‚åç»­å†æ£€æµ‹æ–‡ä»¶çš„æ—¶å€™ï¼Œå†é€šè¿‡msd5sumè¿›è¡Œæ ¡éªŒå¾—åˆ°æ–‡ä»¶å®æ—¶md5æ£€éªŒå€¼ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸ä¸€æ ·ï¼Œåˆ™æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ã€‚" }, { "title": "æ€æ ·æ£€æµ‹SSLè¯ä¹¦å’Œå¯†é’¥æ˜¯å¦åŒ¹é…", "url": "/posts/skill_check-certcation-and-key.html", "categories": "æŠ€å·§", "tags": "", "date": "2023-01-31 00:51:00 +0800", "snippet": "å¯†é’¥æ–‡ä»¶é€šå¸¸æ˜¯.keyåç¼€ï¼Œè¯ä¹¦æ–‡ä»¶æ ¼å¼é€šå¸¸æ˜¯.crtåç¼€ï¼Œæ£€æµ‹å‘½ä»¤å¦‚ä¸‹openssl x509 -noout -modulus -in dl.discuz.chat.crt | openssl md5openssl rsa -noout -modulus -in dl.discuz.chat.key | openssl md5", "content": "å¯†é’¥æ–‡ä»¶é€šå¸¸æ˜¯.keyåç¼€ï¼Œè¯ä¹¦æ–‡ä»¶æ ¼å¼é€šå¸¸æ˜¯.crtåç¼€ï¼Œæ£€æµ‹å‘½ä»¤å¦‚ä¸‹openssl x509 -noout -modulus -in dl.discuz.chat.crt | openssl md5openssl rsa -noout -modulus -in dl.discuz.chat.key | openssl md5" }, { "title": "æ€æ ·ç»™ç½‘å¡çš„IPåœ°å€è®¾ç½®åˆ«å", "url": "/posts/skill_set-ip-alias-on-linux-or-unix.html", "categories": "æŠ€å·§", "tags": "", "date": "2023-01-31 00:49:00 +0800", "snippet": "å‘½ä»¤å¦‚ä¸‹ï¼Œé€‚ç”¨äºLinuxå’ŒMac# è®¾ç½®IPåˆ«åifconfig en1 alias 192.168.2.1 netmask 255.255.255.0# åˆ é™¤IPåˆ«åifconfig en1 â€“alias 192.168.2.1 netmask 255.255.255.0", "content": "å‘½ä»¤å¦‚ä¸‹ï¼Œé€‚ç”¨äºLinuxå’ŒMac# è®¾ç½®IPåˆ«åifconfig en1 alias 192.168.2.1 netmask 255.255.255.0# åˆ é™¤IPåˆ«åifconfig en1 â€“alias 192.168.2.1 netmask 255.255.255.0" }, { "title": "oh-my-zshåœ¨gitç›®å½•å˜å¾—å¾ˆå¡çš„è§£å†³åŠæ³•", "url": "/posts/skill_resolve-disfluency-on-git-directory-when-using-oh-my-zsh.html", "categories": "æŠ€å·§", "tags": "oh-my-zsh", "date": "2023-01-31 00:48:00 +0800", "snippet": "åœ¨ oh-my-zsh è¿›å…¥æ¯”è¾ƒå¤§çš„gitç›®å½•æ—¶ï¼Œä¼šå˜å¾—å¡é¡¿ï¼ŒåŸå› æ˜¯oh-my-zsh è¦è·å– git æ›´æ–°ä¿¡æ¯å¯ä»¥åœ¨gitç›®å½•æ‰§è¡Œä»¥ä¸‹æ“ä½œ è®¾ç½® oh-my-zsh ä¸è¯»å–æ–‡ä»¶å˜åŒ–ä¿¡æ¯git config --add oh-my-zsh.hide-dirty 1 è®¾ç½® oh-my-zsh ä¸è¯»å–ä»»ä½• git ä¿¡æ¯git config --add oh-my-zsh.hide-status 1", "content": "åœ¨ oh-my-zsh è¿›å…¥æ¯”è¾ƒå¤§çš„gitç›®å½•æ—¶ï¼Œä¼šå˜å¾—å¡é¡¿ï¼ŒåŸå› æ˜¯oh-my-zsh è¦è·å– git æ›´æ–°ä¿¡æ¯å¯ä»¥åœ¨gitç›®å½•æ‰§è¡Œä»¥ä¸‹æ“ä½œ è®¾ç½® oh-my-zsh ä¸è¯»å–æ–‡ä»¶å˜åŒ–ä¿¡æ¯git config --add oh-my-zsh.hide-dirty 1 è®¾ç½® oh-my-zsh ä¸è¯»å–ä»»ä½• git ä¿¡æ¯git config --add oh-my-zsh.hide-status 1" }, { "title": "ESé€šé…ç¬¦æŸ¥è¯¢", "url": "/posts/skill_elasticsearch-fuzzy-query.html", "categories": "æŠ€å·§", "tags": "elasticsearch", "date": "2023-01-31 00:46:00 +0800", "snippet": "Elasticsearché€šé…ç¬¦æŸ¥è¯¢è¯­æ³•å¦‚ä¸‹GET /meituan_v1/_search{ \"query\": { \"wildcard\": { \"uripath\": { \"value\": \"*collect_info/index/form/id*\" } } }}", "content": "Elasticsearché€šé…ç¬¦æŸ¥è¯¢è¯­æ³•å¦‚ä¸‹GET /meituan_v1/_search{ \"query\": { \"wildcard\": { \"uripath\": { \"value\": \"*collect_info/index/form/id*\" } } }}" }, { "title": "æ€æ ·è®©dockerå®¹å™¨å¼€æœºè‡ªå¯ï¼Ÿ", "url": "/posts/skill_let-docker-auto-start-on-boot.html", "categories": "æŠ€å·§", "tags": "", "date": "2023-01-31 00:37:00 +0800", "snippet": "é¦–å…ˆè®©dockeræœåŠ¡å¼€æœºè‡ªå¯ï¼Œå¦‚ä¸‹å‘½ä»¤systemctl enable dockerå†è®©docker å®¹å™¨å¼€æœºè‡ªå¯ï¼Œå‘½ä»¤å¦‚ä¸‹docker update --restart=always mysql", "content": "é¦–å…ˆè®©dockeræœåŠ¡å¼€æœºè‡ªå¯ï¼Œå¦‚ä¸‹å‘½ä»¤systemctl enable dockerå†è®©docker å®¹å™¨å¼€æœºè‡ªå¯ï¼Œå‘½ä»¤å¦‚ä¸‹docker update --restart=always mysql" }, { "title": "æ€æ ·åœ¨Linuxä¸­ä¿®æ”¹ç½‘å¡MACåœ°å€", "url": "/posts/skill_change-macaddress-on-linux.html", "categories": "æŠ€å·§", "tags": "", "date": "2023-01-31 00:37:00 +0800", "snippet": "åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¿®æ”¹ç½‘å¡MACåœ°å€çš„æ–¹æ³•å¦‚ä¸‹# å…³é—­ç½‘å¡/sbin/ifconfig eth0 down# ä¿®æ”¹ç½‘å¡MACåœ°å€/sbin/ifconfig eth0 hw ether 00:0C:29:36:97:20# å¼€å¯ç½‘å¡/sbin/ifconfig eth0 up", "content": "åœ¨Linuxç³»ç»Ÿä¸­ï¼Œä¿®æ”¹ç½‘å¡MACåœ°å€çš„æ–¹æ³•å¦‚ä¸‹# å…³é—­ç½‘å¡/sbin/ifconfig eth0 down# ä¿®æ”¹ç½‘å¡MACåœ°å€/sbin/ifconfig eth0 hw ether 00:0C:29:36:97:20# å¼€å¯ç½‘å¡/sbin/ifconfig eth0 up" }, { "title": "åœ¨Linuxæ¡Œé¢ä¸‹ä½¿ç”¨adbè¿›è¡ŒAndroidæŠ•å±", "url": "/posts/skill_android-screen-mirror-using-adb.html", "categories": "æŠ€å·§", "tags": "adb", "date": "2023-01-31 00:35:00 +0800", "snippet": "å…ˆå®‰è£…ä¸Šadbå’Œffplayï¼ŒæŠ•å±å‘½ä»¤å¦‚ä¸‹æ–‡ æŒ‡å®šå‚æ•°è¿è¡Œadb shell screenrecord --bit-rate=16m --output-format=h264 --size 540x960 - | ffplay -framerate 60 -framedrop -bufsize 16M - ä½¿ç”¨é»˜è®¤å‚æ•°è¿è¡Œadb shell screenrecord --output-f...", "content": "å…ˆå®‰è£…ä¸Šadbå’Œffplayï¼ŒæŠ•å±å‘½ä»¤å¦‚ä¸‹æ–‡ æŒ‡å®šå‚æ•°è¿è¡Œadb shell screenrecord --bit-rate=16m --output-format=h264 --size 540x960 - | ffplay -framerate 60 -framedrop -bufsize 16M - ä½¿ç”¨é»˜è®¤å‚æ•°è¿è¡Œadb shell screenrecord --output-format=h264 - | ffplay -" }, { "title": "è£…windows+LinuxåŒç³»ç»Ÿåï¼ŒWindowsæ—¶é—´ä¸æ­£ç¡®çš„è§£å†³åŠæ³•", "url": "/posts/skill_resolve-different-time-on-double-system.html", "categories": "æŠ€å·§", "tags": "åŒç³»ç»Ÿ", "date": "2023-01-31 00:33:00 +0800", "snippet": "å¦‚æ ‡é¢˜æ‰€ç¤ºï¼Œå®‰è£…Linux+WindosåŒç³»ç»Ÿåï¼ŒWindowsæ—¶é—´ä¼šæ…¢8ä¸ªå°æ—¶ï¼Œåœ¨windowsä¸Šä½¿ç”¨ç®¡ç†å‘˜èº«ä»½ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯Reg add HKLM\\SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1ä»¥ä¸ŠæŒ‡ä»¤æ˜¯å°†windowsè¯†åˆ«ç¡¬ä»¶æ—¶é—´...", "content": "å¦‚æ ‡é¢˜æ‰€ç¤ºï¼Œå®‰è£…Linux+WindosåŒç³»ç»Ÿåï¼ŒWindowsæ—¶é—´ä¼šæ…¢8ä¸ªå°æ—¶ï¼Œåœ¨windowsä¸Šä½¿ç”¨ç®¡ç†å‘˜èº«ä»½ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯Reg add HKLM\\SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1ä»¥ä¸ŠæŒ‡ä»¤æ˜¯å°†windowsè¯†åˆ«ç¡¬ä»¶æ—¶é—´æ”¹ä»¥UTC-0ä¸ºå‡†" }, { "title": "ä¸ä½¿ç”¨æ¿€æ´»å·¥å…·ï¼Œæ€æ ·ä½¿ç”¨ä»£ç æ¿€æ´»Windows10ï¼Ÿ", "url": "/posts/skill_active-win10-using-code.html", "categories": "æŠ€å·§", "tags": "", "date": "2023-01-31 00:28:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°ç°åœ¨æˆ‘ä»¬ä¹°çš„ç¬”è®°æœ¬ç”µè„‘ä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹é»˜è®¤å‡ºå‚å®‰è£…çš„æ˜¯Windows 10å®¶åº­ä¸­æ–‡ç‰ˆã€‚æœ‰æ—¶å€™æˆ‘ä»¬ç³»ç»Ÿå´©æºƒæˆ–è€…å…¶ä»–åŸå› æˆ‘ä»¬éœ€è¦é‡è£…ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬é‡è£…çš„æ˜¯Windows 10ç³»ç»Ÿå®¶åº­ä¸­æ–‡ç‰ˆï¼Œè”ç½‘ä¹‹åç³»ç»Ÿä¼šè‡ªåŠ¨æ¿€æ´»ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç”µè„‘ä¸»æ¿å·²ç»é»˜è®¤ç»‘å®šäº†ä¸€ä¸ªæ­£ç‰ˆçš„Windows 10å®¶åº­ä¸­æ–‡ç‰ˆã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å®‰è£…å™¨å…¶ä»–ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼šä¼ä¸šç‰ˆã€ä¸“ä¸šç‰ˆï¼Œé‚£ä¹ˆç³»ç»Ÿå°†å¤„äºâ€œæœªæ¿€æ´»â€çŠ¶æ€ã€‚æœ¬æ–‡å°†ç»™å¤§å®¶ä»‹ç»ï¼Œå¦‚ä½•ä½¿...", "content": "ä¸€ã€æ¦‚è¿°ç°åœ¨æˆ‘ä»¬ä¹°çš„ç¬”è®°æœ¬ç”µè„‘ä¸­ï¼Œä¸€èˆ¬æƒ…å†µä¸‹é»˜è®¤å‡ºå‚å®‰è£…çš„æ˜¯Windows 10å®¶åº­ä¸­æ–‡ç‰ˆã€‚æœ‰æ—¶å€™æˆ‘ä»¬ç³»ç»Ÿå´©æºƒæˆ–è€…å…¶ä»–åŸå› æˆ‘ä»¬éœ€è¦é‡è£…ç³»ç»Ÿï¼Œå¦‚æœæˆ‘ä»¬é‡è£…çš„æ˜¯Windows 10ç³»ç»Ÿå®¶åº­ä¸­æ–‡ç‰ˆï¼Œè”ç½‘ä¹‹åç³»ç»Ÿä¼šè‡ªåŠ¨æ¿€æ´»ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç”µè„‘ä¸»æ¿å·²ç»é»˜è®¤ç»‘å®šäº†ä¸€ä¸ªæ­£ç‰ˆçš„Windows 10å®¶åº­ä¸­æ–‡ç‰ˆã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å®‰è£…å™¨å…¶ä»–ç‰ˆæœ¬ï¼Œæ¯”å¦‚ï¼šä¼ä¸šç‰ˆã€ä¸“ä¸šç‰ˆï¼Œé‚£ä¹ˆç³»ç»Ÿå°†å¤„äºâ€œæœªæ¿€æ´»â€çŠ¶æ€ã€‚æœ¬æ–‡å°†ç»™å¤§å®¶ä»‹ç»ï¼Œå¦‚ä½•ä½¿ç”¨å‘½ä»¤æ¥æ¿€æ´»è¯•ç”¨ã€‚å¦‚æœä½ éœ€è¦åœ¨ç¬”è®°æœ¬ä¸Šå®‰è£…æ­£ç‰ˆWindows 10ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªè§†é¢‘æ•™ç¨‹ï¼šhttps://www.bilibili.com/video/BV187411A7rtå¦‚æœä½ çš„ç³»ç»Ÿå´©æºƒäº†ï¼Œéœ€è¦ä»å´©æºƒçš„ç³»ç»Ÿä¸­å¤‡ä»½å‡ºé‡è¦æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªæ•™ç¨‹ï¼šhttps://www.bilibili.com/video/BV1D7411E7ZCäºŒã€æ¿€æ´»æ­¥éª¤å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å…¶ä»–ç‰ˆæœ¬çš„Windowsï¼Œå¯ä»¥æ‰‹åŠ¨æ¿€æ´»è¯•ç”¨ ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤æç¤ºç¬¦å•å‡»å¼€å§‹æŒ‰é’®ï¼Œæœç´¢cmdï¼Œç„¶åä»¥ç®¡ç†å‘˜æƒé™è¿è¡Œå®ƒã€‚ å®‰è£…KMSå®¢æˆ·ç«¯å¯†é’¥ä½¿ç”¨å‘½ä»¤slmgr /ipk ä½ çš„ç§˜é’¥å®‰è£…è®¸å¯è¯å¯†é’¥ï¼ˆæ‚¨çš„è®¸å¯è¯å¯†é’¥æ˜¯ä¸Windowsç‰ˆæœ¬ç›¸å¯¹åº”çš„æ¿€æ´»å¯†é’¥ï¼‰ã€‚ä»¥ä¸‹æ˜¯Windows 10æ‰¹é‡è®¸å¯è¯å¯†é’¥çš„åˆ—è¡¨ã€‚å®¶åº­ï¼š TX9XD-98N7V-6WMQ6-BX7FG-H8Q99å®¶åº­Nï¼š 3KHY7-WNT83-DGQKR-F7HPR-844BMå®¶åº­å•ä¸€è¯­è¨€ï¼š 7HNRX-D7KGG-3K4RQ-4WPJ4-YTDFHç‰¹å®šå›½å®¶ç‰ˆï¼š PVMJN-6DFY6-9CCP6-7BKTT-D3WVRä¸“ä¸šï¼š W269N-WFGWX-YVC9B-4J6C9-T83GXä¸“ä¸šNï¼š MH37W-N47XK-V7XM9-C7227-GCQG9æ•™è‚²ï¼š NW6C2-QMPVW-D7KKK-3GKT6-VCFB2æ•™è‚²Nï¼š 2WH4N-8QGBV-H22JP-CT43Q-MDWWJä¼ä¸šï¼š NPPR9-FWDCX -D2C8J-H872K-2YT43ä¼ä¸šNï¼š DPH2V-TTNVB-4X9Q3-TJR4H-KHJW4æ³¨æ„ï¼šæ‚¨éœ€è¦æŒ‰[Enter]é”®æ‰èƒ½æ‰§è¡Œå‘½ä»¤ã€‚ è®¾ç½®KMSæœºå™¨åœ°å€ä½¿ç”¨å‘½ä»¤slmgr /skms kms8.msguides.comï¼ˆæˆ–è€…slmgr /skms s8.now.imï¼‰è¿æ¥åˆ°ç½‘ä¸Šçš„KMSæœåŠ¡å™¨ æ¿€æ´»ä½ çš„Windowsæœ€åä¸€æ­¥æ˜¯ä½¿ç”¨å‘½ä»¤slmgr /atoæ¿€æ´»Windowsã€‚ä¸‰ã€æ€»ç»“å…è´£å£°æ˜ï¼šæœ¬æ–‡åªä¾›å­¦ä¹ å‚è€ƒï¼Œç”±äºä¸ªäººçš„ä¸æ­£å½“ä½¿ç”¨é€ æˆçš„åæœä¸ä½œè€…æ— å…³ï¼Œå»ºè®®è´­ä¹°æ­£ç‰ˆç³»ç»Ÿã€‚ å‚è€ƒé“¾æ¥ï¼šhttps://msguides.com/microsoft-software-products/2-ways-activate-windows-10-free-without-software.html" }, { "title": "æ€æ ·ä½¿ç”¨windowsè‡ªå¸¦ç£ç›˜å·¥å…·æ¢å¤å¯åŠ¨ç›˜", "url": "/posts/skill_reset-windows-boot-usb.html", "categories": "æŠ€å·§", "tags": "windowså¯åŠ¨ç›˜", "date": "2023-01-31 00:27:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°1.1 é—®é¢˜æè¿°å®‰è£…æ“ä½œç³»ç»Ÿçš„æ—¶å€™ç”¨Uç›˜æ¥åšæˆå¯åŠ¨ç›˜ï¼Œå®‰è£…å¥½ç³»ç»Ÿä¹‹åï¼Œå¯èƒ½Uç›˜ä¸èƒ½ç”¨ã€‚æ¯”å¦‚è¯´ï¼šUç›˜ç©ºé—´å˜å°äº†ã€Uç›˜ä¸èƒ½æ ¼å¼åŒ–ã€Uç›˜ä¸èƒ½æ‰“å¼€ã€‚å› ä¸ºUç›˜å¯åŠ¨åˆ¶ä½œå·¥å…·å·²ç»æ”¹å˜äº†Uç›˜çš„åˆ†åŒºç»“æ„ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨wndowsè‡ªå¸¦å·¥å…·è¿˜åŸUç›˜ã€‚1.2 æ“ä½œç¯å¢ƒ windows 10 diskpart (windowsè‡ªå¸¦çš„ç£ç›˜ç®¡ç†å·¥å…·) äºŒã€æ“ä½œè¿‡ç¨‹2.1 æ¸…ç†ç£ç›˜é¦–å…ˆ...", "content": "ä¸€ã€æ¦‚è¿°1.1 é—®é¢˜æè¿°å®‰è£…æ“ä½œç³»ç»Ÿçš„æ—¶å€™ç”¨Uç›˜æ¥åšæˆå¯åŠ¨ç›˜ï¼Œå®‰è£…å¥½ç³»ç»Ÿä¹‹åï¼Œå¯èƒ½Uç›˜ä¸èƒ½ç”¨ã€‚æ¯”å¦‚è¯´ï¼šUç›˜ç©ºé—´å˜å°äº†ã€Uç›˜ä¸èƒ½æ ¼å¼åŒ–ã€Uç›˜ä¸èƒ½æ‰“å¼€ã€‚å› ä¸ºUç›˜å¯åŠ¨åˆ¶ä½œå·¥å…·å·²ç»æ”¹å˜äº†Uç›˜çš„åˆ†åŒºç»“æ„ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä½¿ç”¨wndowsè‡ªå¸¦å·¥å…·è¿˜åŸUç›˜ã€‚1.2 æ“ä½œç¯å¢ƒ windows 10 diskpart (windowsè‡ªå¸¦çš„ç£ç›˜ç®¡ç†å·¥å…·) äºŒã€æ“ä½œè¿‡ç¨‹2.1 æ¸…ç†ç£ç›˜é¦–å…ˆåŒæ—¶æŒ‰ä½windows+Ré”®ï¼Œå¼¹å‡ºå‘½ä»¤è¾“å…¥æ¡†ï¼Œè¾“å…¥diskpartå¯æ‰§è¡Œå‘½ä»¤ï¼Œå¦‚ä¸‹å¦‚ï¼šæŒ‰å›è½¦æ‰“å¼€diskpartï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ç£ç›˜åˆ—è¡¨ï¼šlist diskå¦‚å›¾æ‰€ç¤ºå¯ä»¥åˆ¤æ–­åºå·ä¸º1çš„æ˜¯Uç›˜ï¼Œä½†ç°åœ¨æ˜¯ä¸å¯ç”¨çš„ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€‰ä¸­åºå·ä¸º1çš„ç£ç›˜ï¼ˆUç›˜ï¼‰ï¼šselect disk 1æ‰§è¡Œæ¸…é™¤å‘½ä»¤cleanç£ç›˜æ¸…ç©ºäº†åï¼Œä¼šé‡æ–°æŒ‚è½½åˆ°windowsä¸Šï¼Œä½†æ˜¯è¿˜æ²¡æœ‰åˆ›å»ºåˆ†åŒºï¼Œåœ¨èµ„æºç®¡ç†å™¨ä¸­è®¿é—®ä¸åˆ°ï¼Œå¦‚ä¸‹å›¾åªæ˜¯æ˜¾ç¤ºåœ¨èµ„æºç®¡ç†å™¨ä¸­è¿˜æ˜¯ä¸èƒ½è®¿é—®ï¼Œè¿˜éœ€è¦åˆ›å»ºåˆ†åŒº2.2 åˆ›å»ºåˆ†åŒºå³å‡»å›¾æ ‡ â€œæˆ‘çš„ç”µè„‘â€ â€“&gt; â€œç®¡ç†â€ â€“&gt; â€œå­˜å‚¨â€ â€“&gt; â€œç£ç›˜ç®¡ç†â€ï¼Œåœ¨æœªéé…çš„ç£ç›˜ä¸­ï¼ˆUç›˜ï¼‰é€‰æ‹©å³é”® â€œæ–°å»ºç®€å•åˆ¸â€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºæ¥ä¸‹æ¥ä¸€ç›´æŒ‰æç¤ºé€‰æ‹©â€œä¸‹ä¸€æ­¥â€ç›´åˆ°å®Œæˆå³å¯ã€‚" }, { "title": "vueé¡¹ç›®éƒ¨ç½²åˆ°Apacheåå­ç•Œé¢åˆ·æ–°å‡ºç°404çš„è§£å†³åŠæ³•", "url": "/posts/skill_resolve-vue-404-error-on-apache.html", "categories": "æŠ€å·§", "tags": "vue", "date": "2023-01-31 00:26:00 +0800", "snippet": "vueé¡¹ç›®éƒ¨ç½²åˆ°Apacheåï¼Œåœ¨å­ç•Œé¢åˆ·æ–°å‡ºç°404ï¼Œä»¥ä¸‹æ˜¯è§£å†³åŠæ³•ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ Apacheé‡å†™è§„åˆ™æ–‡ä»¶ .htaccessï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç &lt;IfModule mod_rewrite.c&gt; RewriteEngine On RewriteBase / RewriteRule ^index\\.html$ - [L] RewriteCond %{REQUEST_FILE...", "content": "vueé¡¹ç›®éƒ¨ç½²åˆ°Apacheåï¼Œåœ¨å­ç•Œé¢åˆ·æ–°å‡ºç°404ï¼Œä»¥ä¸‹æ˜¯è§£å†³åŠæ³•ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•æ·»åŠ Apacheé‡å†™è§„åˆ™æ–‡ä»¶ .htaccessï¼ŒåŠ å…¥ä»¥ä¸‹ä»£ç &lt;IfModule mod_rewrite.c&gt; RewriteEngine On RewriteBase / RewriteRule ^index\\.html$ - [L] RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule . /index.html [L]&lt;/IfModule&gt;é‡å¯ApacheæœåŠ¡å™¨å³å¯è§£å†³" }, { "title": "Error: ENOSPC: System limit for number of file watchers reachedï¼ŒVueé¡¹ç›®è¿è¡Œå‡ºç°è¯¥æŠ¥é”™çš„è§£å†³åŠæ³•", "url": "/posts/frontend_resolve-vue-error-of-enospc.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-31 00:23:00 +0800", "snippet": "åœ¨Linuxç³»ç»Ÿä¸Šè¿è¡Œvueé¡¹ç›®ã€‚å‡ºç°å¦‚é¢˜æŠ¥é”™ä»£ç çš„è§£å†³åŠæ³•ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -psudo sysctl --system", "content": "åœ¨Linuxç³»ç»Ÿä¸Šè¿è¡Œvueé¡¹ç›®ã€‚å‡ºç°å¦‚é¢˜æŠ¥é”™ä»£ç çš„è§£å†³åŠæ³•ï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -psudo sysctl --system" }, { "title": "NginxæœåŠ¡å™¨serverèŠ‚ç‚¹å¸¸ç”¨é…ç½®", "url": "/posts/server_nginx-server-common-configuration.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:16:00 +0800", "snippet": "NginxæœåŠ¡å™¨çš„serverèŠ‚ç‚¹é€šå¸¸ç”¨æ¥å®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼ŒNginxæœåŠ¡å™¨å¯ä»¥é…ç½®å¤šä¸ªserverèŠ‚ç‚¹ï¼Œä¸€ä¸ªserveré€šå¸¸ç”¨æ¥å®šä¹‰ä¸€ä¸ªå•ç‹¬é¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ª serveræ¥å®šä¹‰Nginxå…¨å±€é¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ€»ç»“NginxæœåŠ¡å™¨serverèŠ‚ç‚¹çš„å¸¸ç”¨é…ç½®å‚æ•°ã€‚ä¸€ã€åŸºç¡€çŸ¥è¯†1.1 å¸¸è§„é…ç½®server { listen 80; server_name jkd...", "content": "NginxæœåŠ¡å™¨çš„serverèŠ‚ç‚¹é€šå¸¸ç”¨æ¥å®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼ŒNginxæœåŠ¡å™¨å¯ä»¥é…ç½®å¤šä¸ªserverèŠ‚ç‚¹ï¼Œä¸€ä¸ªserveré€šå¸¸ç”¨æ¥å®šä¹‰ä¸€ä¸ªå•ç‹¬é¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ª serveræ¥å®šä¹‰Nginxå…¨å±€é¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ€»ç»“NginxæœåŠ¡å™¨serverèŠ‚ç‚¹çš„å¸¸ç”¨é…ç½®å‚æ•°ã€‚ä¸€ã€åŸºç¡€çŸ¥è¯†1.1 å¸¸è§„é…ç½®server { listen 80; server_name jkdev.cn www.jkdev.cn; root /usr/share/nginx/html; index index.php index.html index.htm;} listenï¼šç›‘å¬ç«¯å£ server_nameï¼šåŸŸå rootï¼šé¡¹ç›®è·¯å¾„ indexï¼šé»˜è®¤è®¿é—®æ–‡ä»¶1.2 httpsé…ç½®server { listen 443 ssl; server_name jkdev.cn www.jkdev.cn; root /usr/share/nginx/html; index index.php index.html index.htm; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on;} ssl_certificateï¼šè¯ä¹¦å…¬é’¥æ–‡ä»¶ ssl_certificate_keyï¼šè¯ä¹¦ç§é’¥æ–‡ä»¶ ssl_session_timeoutï¼šç¼“å­˜æœ‰æ•ˆæœŸ ssl_protocolsï¼šå®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®® ssl_ciphersï¼šåŠ å¯†ç®—æ³• ssl_prefer_server_ciphers onï¼šä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•1.3 ä»å®šå‘å¦‚æœè®¿é—®åŸŸåä¸æ˜¯www.jkdev.cnï¼Œå¼ºåˆ¶ä»å®šå‘åˆ°http://www.jkdev.cnï¼Œå¹¶æºå¸¦å‚æ•°ã€‚permanentè¡¨ç¤ºè¿”å›301æ°¸ä¹…é‡å®šå‘ï¼Œåœ°å€æ æ˜¾ç¤ºé‡å®šå‘åçš„urlserver { listen 80; server_name jkdev.cn www.jkdev.cn; root /usr/share/nginx/html/php/www/public; index index.php index.html index.htm; if ( $host != 'www.jkdev.cn' ) { rewrite ^(.*)$ https://www.jkdev.cn$1 permanent; }}åœ¨é¡¹ç›®çš„æ ¹èŠ‚ç‚¹ä¹‹ä¸‹ï¼Œå¦‚æœè®¿é—®æ–‡ä»¶ä¸ºç©ºï¼Œåˆ™é‡å®šå‘åˆ°æ ¹èŠ‚ç‚¹ä¸‹çš„index.phpæ–‡ä»¶ã€‚lastè¡¨ç¤ºurlé‡å†™åï¼Œé©¬ä¸Šå‘èµ·ä¸€ä¸ªæ–°çš„è¯·æ±‚ï¼Œå†æ¬¡è¿›å…¥serverå—ï¼Œé‡è¯•locationåŒ¹é…ï¼Œè¶…è¿‡10æ¬¡åŒ¹é…ä¸åˆ°æŠ¥500é”™è¯¯ï¼Œåœ°å€æ urlä¸å˜server { listen 80; server_name jkdev.cn www.jkdev.cn; root /usr/share/nginx/html/php/www/public; index index.php index.html index.htm; if ( $host != 'www.jkdev.cn' ) { rewrite ^(.*)$ http://www.jkdev.cn$1 permanent; } location / { if (!-e $request_filename) { rewrite ^(.*)$ /index.php/$1 last; } }} localtionï¼šé¡¹ç›®ä¸‹çš„è·¯å¾„1.4 å®šä¹‰é”™è¯¯ç•Œé¢å½“å‘ç”Ÿ500ã€502ã€503ã€504è¿™å‡ ç§é”™è¯¯æ—¶ï¼Œè¿”å›/50x.htmlã€‚locationéƒ¨åˆ†å®šä¹‰äº†50x.htmlçš„è®¿é—®ä½ç½®ï¼Œä»¥ä¿è¯æ‰¾åˆ°è‡ªå®šä¹‰çš„50xé¡µé¢server { listen 80; server_name jkdev.cn www.jkdev.cn; root /usr/share/nginx/html/php/www/public; index index.php index.html index.htm; if ( $host != 'www.jkdev.cn' ) { rewrite ^(.*)$ https://www.jkdev.cn$1 permanent; } location / { if (!-e $request_filename) { rewrite ^(.*)$ /index.php?s=/$1 last; } } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; }}1.5 fastcgié…ç½®å½“è®¿é—®phpæ–‡ä»¶æ—¶ï¼Œè½¬å‘ç»™127.0.0.1:9000server { listen 80; server_name jkdev.cn www.jkdev.cn; root /var/www/html; index index.php index.html index.htm; if ( $host != 'www.jkdev.cn' ) { rewrite ^(.*)$ https://www.jkdev.cn$1 permanent; } location / { if (!-e $request_filename) { rewrite ^(.*)$ /index.php?s=/$1 last; } } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~ \\.php(.*)$ { fastcgi_pass 127.0.0.1:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /var/www/html/$fastcgi_script_name; include fastcgi_params; fastcgi_split_path_info ^((?U).+\\.php)(/?.+)$; }}1.6 åå‘ä»£ç†-ç«¯å£è½¬å‘server { listen 443 ssl; server_name api.jkdev.cn; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location /v2/ { proxy_pass http://127.0.0.1:8080/; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } } proxy_passï¼šä»£ç†åœ°å€ proxy_set_headerï¼šè®¾ç½®ä»£ç†è¯·æ±‚å¤´äºŒã€å®é™…åº”ç”¨æ ¹æ®1ä¸­çš„åŸºç¡€ä»‹ç»ï¼Œæˆ‘ä»¬å¯¹Nginxçš„serveré…ç½®å‚æ•°æœ‰äº†åŸºæœ¬äº†è§£ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¨¡æ‹Ÿå®é™…åœºæ™¯ï¼Œç¼–å†™Nginxçš„serveré…ç½®2.1 å°†æ‰€æœ‰httpè¯·æ±‚é‡å®šå‘åˆ°httpsserver { listen 80; rewrite ^(.*) https://$host permanent;}2.2 éƒ¨ç½²phpåšå®¢ï¼ˆå¦‚wordpressã€typechoï¼‰server { listen 443 ssl; server_name blog.jkdev.cn; root /usr/share/nginx/html/php/blog; index index.php index.html index.htm; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { if (!-e $request_filename) { rewrite ^(.*)$ /index.php?s=/$1 last; } } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~ \\.php(.*)$ { fastcgi_pass php-fpm:9000; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME /var/www/html/blog/$fastcgi_script_name; include fastcgi_params; fastcgi_split_path_info ^((?U).+\\.php)(/?.+)$; } location ~* ^/(css|img|js|flv|swf|download)/(.+)$ { root /usr/share/nginx/html/php/blog; } location ~* \\.(eot|ttf|woff|svg|otf)$ { add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers X-Requested-With; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; } location ~ /\\.ht { deny all; }}2.3 åœ¨ä¸€ä¸ªåŸŸåä¹‹ä¸‹éƒ¨ç½²å¤šä¸ªæœåŠ¡server { listen 443 ssl; server_name api.jkdev.cn; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location /v1/ { proxy_pass http://127.0.0.1:8080/; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } location /v2/ { proxy_pass http://127.0.0.1:8081/; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header REMOTE-HOST $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; } } location /v1/ ï¼šé…ç½®v1é¡¹ç›®è½¬å‘ location /v2/ ï¼šé…ç½®v2é¡¹ç›®è½¬å‘2.4 éƒ¨ç½²å‰ç«¯é¡¹ç›®ï¼ˆå¦‚vueï¼‰server { listen 443 ssl; server_name www.jkdev.cn; root /usr/share/nginx/html/php/www/dist; index index.php index.html index.htm; ssl_certificate /etc/ssl/jkdev.cn/cert.pem; ssl_certificate_key /etc/ssl/jkdev.cn/key.pem; ssl_session_timeout 5m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; location / { try_files $uri $uri/ /index.html; } error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~* ^/(css|img|js|flv|swf|download)/(.+)$ { root /usr/share/nginx/html/php/www/dist; } location ~* \\.(eot|ttf|woff|svg|otf)$ { add_header Access-Control-Allow-Origin *; add_header Access-Control-Allow-Headers X-Requested-With; add_header Access-Control-Allow-Methods GET,POST,OPTIONS; } location ~ /\\.ht { deny all; }}" }, { "title": "ApacheæœåŠ¡å™¨VirtualHostå¸¸ç”¨é…ç½®", "url": "/posts/server_apache-virtualhost-common-configuration.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:15:00 +0800", "snippet": "ApacheæœåŠ¡å™¨ä¸­çš„VirtualHostç”¨æ¥å®šä¹‰è™šæ‹Ÿç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªVirtualHostä¸­å®šä¹‰ä¸€ä¸ªé¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åå‘ä»£ç†çš„æ–¹å¼å®šä¹‰å¤šä¸ªé¡¹ç›®ï¼ˆå³ä¸€ä¸ªåŸŸåä¹‹ä¸‹å¤šä¸ªå­é¡¹ç›®ï¼‰ã€‚ä»¥ä¸‹æ€»ç»“ApacheæœåŠ¡å™¨VirtualHostå¸¸ç”¨é…ç½®ã€‚ä¸€ã€å¸¸è§„é…ç½®&lt;VirtualHost *:80&gt; DocumentRoot \"/var/www/html\" ...", "content": "ApacheæœåŠ¡å™¨ä¸­çš„VirtualHostç”¨æ¥å®šä¹‰è™šæ‹Ÿç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªVirtualHostä¸­å®šä¹‰ä¸€ä¸ªé¡¹ç›®ï¼ˆç½‘ç«™ï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åå‘ä»£ç†çš„æ–¹å¼å®šä¹‰å¤šä¸ªé¡¹ç›®ï¼ˆå³ä¸€ä¸ªåŸŸåä¹‹ä¸‹å¤šä¸ªå­é¡¹ç›®ï¼‰ã€‚ä»¥ä¸‹æ€»ç»“ApacheæœåŠ¡å™¨VirtualHostå¸¸ç”¨é…ç½®ã€‚ä¸€ã€å¸¸è§„é…ç½®&lt;VirtualHost *:80&gt; DocumentRoot \"/var/www/html\" ServerName www.jkdev.cn&lt;/VirtualHost&gt; DocumentRootï¼šç½‘ç«™ç›®å½• ServerNameï¼šç½‘ç«™åŸŸåäºŒã€å¸¸ç”¨é™„åŠ é…ç½®&lt;VirtualHost *:80&gt; DocumentRoot \"/var/www/html\" ServerName localhost &lt;Directory \"/var/www/html\"&gt; Options Indexes FollowSymLinks AllowOverride All Require all granted ErrorDocument 404 https://www.jkdev.cn/404.html &lt;/Directory&gt;&lt;/VirtualHost&gt; DirectoryèŠ‚ç‚¹ï¼šå®šä¹‰ç›®å½•å±æ€§ Options Indexes FollowSymLinksï¼šå¼€å¯ç›®å½•è®¿é—®ï¼Œæ˜¾ç¤ºç›®å½•ç»“æ„ï¼Œå¹¶å…è®¸åœ¨æ­¤ç›®å½•ä¸­ä½¿ç”¨ç¬¦å·è¿æ¥ AllowOverride Allï¼šå…è®¸å®šä¹‰.htaccessæ–‡ä»¶ AllowOverride Noneï¼šå¿½ç•¥.htaccessæ–‡ä»¶ Require all grantedï¼šå…è®¸æ‰€æœ‰è¯·æ±‚ ErrorDocument 404 https://www.jkdev.cn/404.htmlï¼šè·¯å¾„åŒ¹é…æ—¶è·³è½¬çš„404ç•Œé¢ä¸‰ã€å¼€å¯HTTPS&lt;VirtualHost _default_:443&gt; DocumentRoot \"/var/www/html\" ServerName hook.jkdev.cn SSLEngine on SSLCertificateFile /etc/ssl/2_hook.jkdev.cn.crt SSLCertificateKeyFile /etc/ssl/3_hook.jkdev.cn.key SSLCertificateChainFile /etc/ssl/1_root_bundle.crt &lt;Directory \"/var/www/html\"&gt; Options Indexes FollowSymLinks AllowOverride All Require all granted ErrorDocument 404 https://www.jkdev.cn/404.html &lt;/Directory&gt; &lt;/VirtualHost&gt; SSLEngine onï¼šå¼€å¯SSL SSLCertificateFileï¼šæŒ‡å®šè¯ä¹¦å…¬é’¥æ–‡ä»¶ SSLCertificateKeyFileï¼šæŒ‡å®šè¯ä¹¦ç§é’¥æ–‡ä»¶ SSLCertificateChainFileï¼šæŒ‡å®šè¯ä¹¦é“¾æ–‡ä»¶å››ã€åå‘ä»£ç†ï¼ˆç«¯å£è½¬å‘ï¼‰&lt;VirtualHost _default_:443&gt; ServerName api.jkdev.cn SSLEngine on SSLCertificateFile /etc/ssl/api/2_api.jkdev.cn.crt SSLCertificateKeyFile /etc/ssl/3_api.jkdev.cn.key SSLCertificateChainFile /etc/ssl/1_root_bundle.crt ProxyPreserveHost On ProxyRequests Off ProxyPass /v2 http://localhost:92/ ProxyPass /v1 http://localhost:91/ ProxyPass / http://localhost:90/ ProxyPassReverse /v2 http://localhost:92/ ProxyPassReverse /v1 http://localhost:91/ ProxyPassReverse / http://localhost:90/&lt;/VirtualHost&gt; ProxyPreserveHost Onï¼šå¼€å¯åå‘ä»£ç† ProxyRequests Offï¼šå…³é—­æ­£å‘ä»£ç† ProxyPassï¼šè®¾ç½®åå‘ä»£ç†è·¯å¾„ ProxyPassReverseï¼šä½¿Apacheè‡ªåŠ¨å¤„ç†åå‘ä»£ç†ä¸­çš„ä»å®šå‘å“åº”ï¼Œä¸€èˆ¬å’ŒProxyPassä¸€èµ·ç”¨äº”ã€httpé‡å®šå‘åˆ°https&lt;VirtualHost *:80&gt; ServerName jkdev.cn #redirect RewriteEngine on RewriteCond %{SERVER_PORT} !^443$ RewriteRule ^(.*)?$ https://%{SERVER_NAME}$1 [L,R]&lt;/VirtualHost&gt; RewriteEngine onï¼šå¼€å¯ä»å®šå‘åŠŸèƒ½ RewriteCond %{SERVER_PORT} !^443$ï¼šä»å®šå‘æ¡ä»¶ï¼Œç«¯å£ä¸æ˜¯443æ—¶é‡å®šå‘ï¼Œ^ä¸ºå¼€å¤´ï¼Œ$ä¸ºç»“æŸ RewriteRuleï¼šé‡å®šå‘è§„åˆ™ï¼ŒLï¼šè¡¨æ˜å½“å‰è§„åˆ™æ˜¯æœ€åä¸€æ¡è§„åˆ™ï¼Œåœæ­¢åˆ†æä»¥åè§„åˆ™çš„é‡å†™ï¼›Rï¼šå¼ºåˆ¶å¤–éƒ¨é‡å®šå‘" }, { "title": "æ€æ ·åœ¨AlpineLinuxä¸­æ­å»ºPython3+Djangoç¯å¢ƒ", "url": "/posts/server_install-django-on-alpine.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:13:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°Alpine Linuxæ˜¯ä¸€ä¸ªååˆ†è½»é‡çº§çš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå…¶Dockeré•œåƒå¤§æ¦‚åªæœ‰5mã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä»Alpineä¸­æ„å»ºPython3+Djangoç¯å¢ƒã€‚æ¼”ç¤ºç¯å¢ƒï¼šAlpine 3.11 çš„Dockerå®¹å™¨ç¯å¢ƒæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»ä¸€ä¸ªçº¯å‡€çš„Alpineç³»ç»Ÿå¼€å§‹æ­å»ºPython3+Djangoè¿è¡Œç¯å¢ƒã€‚é¦–å…ˆåœ¨æœ¬æœºçš„Linuxæ¡Œé¢ç¯å¢ƒå¼€å¯ä¸€ä¸ªLinuxå®¹å™¨ï¼Œå¦‚ä¸‹ä»£ç docker run ...", "content": "ä¸€ã€æ¦‚è¿°Alpine Linuxæ˜¯ä¸€ä¸ªååˆ†è½»é‡çº§çš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå…¶Dockeré•œåƒå¤§æ¦‚åªæœ‰5mã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä»Alpineä¸­æ„å»ºPython3+Djangoç¯å¢ƒã€‚æ¼”ç¤ºç¯å¢ƒï¼šAlpine 3.11 çš„Dockerå®¹å™¨ç¯å¢ƒæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»ä¸€ä¸ªçº¯å‡€çš„Alpineç³»ç»Ÿå¼€å§‹æ­å»ºPython3+Djangoè¿è¡Œç¯å¢ƒã€‚é¦–å…ˆåœ¨æœ¬æœºçš„Linuxæ¡Œé¢ç¯å¢ƒå¼€å¯ä¸€ä¸ªLinuxå®¹å™¨ï¼Œå¦‚ä¸‹ä»£ç docker run -it --name django -p 80:80 -p 465:465 -p 9090:9090 -p 8001:8001 -p 8002:8002 -v $PWD:/www alpine:3.11äºŒã€è¯¦ç»†è¿‡ç¨‹2.1 åˆ‡æ¢åŠ é€Ÿé•œåƒè½¯ä»¶æºç¼–è¾‘ /etc/apk/repositoriesï¼Œå°†é‡Œé¢ dl-cdn.alpinelinux.org çš„æ”¹æˆ mirrors.aliyun.com ï¼Œä¿å­˜é€€å‡ºå³å¯å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸€ä¸‹å‘½ä»¤è¿›è¡Œæ›¿æ¢sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories2.2 å®‰è£…Python3Djangoæ˜¯ä¸€ä¸ªDjangoçš„æ¡†æ¶ï¼Œæ‰€ä»¥Pythonæ˜¯å¿…é¡»çš„ï¼Œæ­¤æ¬¡æˆ‘ä»¬å®‰è£…Python3apk add --no-cache python3 python3-dev python3-pipå®é™…ä¸Šï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…python3-devè½¯ä»¶åº“ï¼Œå¦åˆ™åœ¨å®‰è£…Djangoæ—¶ä¼šæŠ¥é”™ã€‚åŒæ—¶æˆ‘ä»¬éœ€è¦å®‰è£…python3-pip2.3 å®‰è£…åŸºæœ¬åŸºæœ¬çš„å¼€å‘å·¥å…·åŒ…æˆ‘ä»¬åœ¨å¼€å‘ç¨‹åºæ˜¯ä¼šä½¿ç”¨åˆ°ä¸€äº›åŸºæœ¬çš„å·¥å…·åŒ…ï¼Œæˆ‘ä»¬å…ˆå®‰è£…ä¸Šï¼Œå¦åˆ™åœ¨ç¼–è¯‘æˆ–è€…è¿è¡Œç¨‹åºæ—¶å¯èƒ½ä¼šå‡ºé”™apk add --no-cache zlib-dev bzip2-dev pcre-dev openssl-dev ncurses-dev sqlite-dev readline-dev tk-dev2.4 å®‰è£…ç¼–è¯‘å·¥å…·åé¢æˆ‘ä»¬å¯èƒ½ä¼šç”¨ç¼–è¯‘å·¥å…·ç¼–è¯‘æºä»£ç ï¼Œæˆ‘ä»¬å…ˆå®‰è£…ä¸ŠåŸºæœ¬çš„ç¼–è¯‘å·¥å…·apk add --no-cache gcc g++ make cmake2.5 å®‰è£…easy_install# å‡çº§pippip3 install --upgrade pip# å®‰è£…setuptoolspip3 install setuptoolså®é™…ä¸Šï¼Œå®‰è£…ä¹‹åä¼šè‡ªå¸¦easy_installï¼Œæˆ‘åœ¨è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ç³»ç»Ÿæ˜¯Python3.8.1ç‰ˆæœ¬ï¼Œå³å¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹easy_installçš„ç‰ˆæœ¬ä¿¡æ¯ã€‚easy_install-3.8 --version2.6 å®‰è£…uwsgiapk add --no-cache linux-headers #å®‰è£…ä¾èµ–pip3 install uwsgiæµ‹è¯• uwsgi æ˜¯å¦æ­£å¸¸ï¼šæ–°å»º test.py æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼šdef application(env, start_response): start_response('200 OK', [('Content-Type','text/html')]) test =\"Hello World\" return test.encode(\"utf-8\")å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Python3ï¼Œæ‰€ä»¥éœ€è¦åˆ¶å®šç¼–ç ï¼Œå†è¿”å›ï¼Œç„¶ååœ¨ç»ˆç«¯è¿è¡Œä»¥ä¸‹ä»£ç ï¼šuwsgi --http :8001 --wsgi-file test.py #åå°è¿è¡Œæ­¤æ—¶é€šè¿‡ç”µè„‘è®¿é—®http://127.0.0.1:8001å¦‚æœæ­£å¸¸æ˜¾ç¤ºâ€Hello Worldâ€ï¼Œå¦åˆ™æ£€æŸ¥ä¸€ä¸‹å®‰è£…è¿‡ç¨‹2.7 å®‰è£…Djangopip3 install djangoæ£€æŸ¥djangoæ˜¯å¦æ­£å¸¸django-admin.py startproject demositecd demositepython3 manage.py runserver 0.0.0.0:8002åœ¨æµè§ˆå™¨è®¿é—®ï¼šhttp://127.0.0.1:8002æ£€æŸ¥djangoæ˜¯å¦è¿è¡Œæ­£å¸¸ã€‚2.8 å®‰è£…Nginx# ä¸‹è½½wget http://nginx.org/download/nginx-1.17.8.tar.gz# è§£å‹tar -zxvf nginx-1.17.8.tar.gzcd nginx-1.17.8/# ç¼–è¯‘é…ç½®./configure --prefix=/usr/local/nginx \\--with-http_stub_status_module \\--with-http_gzip_static_module# ç¼–è¯‘ä¸å®‰è£…make &amp;&amp; make installä½¿ç”¨ä¸€ä¸‹å‘½ä»¤æµ‹è¯•æ˜¯å¦Nginxæ­£å¸¸/usr/local/nginx/sbin/nginxç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€http://127.0.0.1å¦‚æœä¸æ­£å¸¸ï¼Œæ£€æŸ¥ä¸€ä¸‹å®‰è£…è¿‡ç¨‹2.9 é…ç½®uwsgiåœ¨/etc/ç›®å½•ä¸‹æ–°å»ºuwsgi9090.iniï¼Œæ·»åŠ å¦‚ä¸‹é…ç½®ï¼š[uwsgi]socket = 127.0.0.1:9090master = true #ä¸»è¿›ç¨‹#vhost = true #å¤šç«™æ¨¡å¼#no-site = true #å¤šç«™æ¨¡å¼æ—¶ä¸è®¾ç½®å…¥å£æ¨¡å—å’Œæ–‡ä»¶workers = 2 #å­è¿›ç¨‹æ•°reload-mercy = 10 vacuum = true #é€€å‡ºã€é‡å¯æ—¶æ¸…ç†æ–‡ä»¶max-requests = 1000 limit-as = 512buffer-size = 30000pidfile = /var/run/uwsgi9090.pid #pidæ–‡ä»¶ï¼Œç”¨äºä¸‹é¢çš„è„šæœ¬å¯åŠ¨ã€åœæ­¢è¯¥è¿›ç¨‹daemonize = /www/uwsgi9090.logåˆ›å»ºå¯¹åº”çš„æ—¥å¿—æ–‡ä»¶touch /www/uwsgi9090.log2.10 é…ç½®nginxæ‰¾åˆ°nginxçš„å®‰è£…ç›®å½•ï¼ˆæœ¬æ¬¡å®‰è£…åœ¨ï¼š/usr/local/nginx/ï¼‰ï¼Œæ‰“å¼€conf/nginx.confæ–‡ä»¶ï¼Œä¿®æ”¹serveré…ç½®ï¼šserver { listen 80; server_name localhost; location / { include uwsgi_params; uwsgi_pass 127.0.0.1:9090; #å¿…é¡»å’Œuwsgiä¸­çš„è®¾ç½®ä¸€è‡´ uwsgi_param UWSGI_SCRIPT demosite.wsgi; #å…¥å£æ–‡ä»¶ï¼Œå³wsgi.pyç›¸å¯¹äºé¡¹ç›®æ ¹ç›®å½•çš„ä½ç½®ï¼Œâ€œ.â€ç›¸å½“äºä¸€å±‚ç›®å½• uwsgi_param UWSGI_CHDIR /demosite;#é¡¹ç›®æ ¹ç›®å½• index index.html index.htm; client_max_body_size 35m; }}åœ¨æµè§ˆå™¨è¾“å…¥ï¼šhttp://127.0.0.1ï¼Œä½ å°±å¯ä»¥çœ‹åˆ° django çš„ OK äº†ã€‚" }, { "title": "LAMPç¯å¢ƒæ­å»ºä¹‹ä»æºç å®‰è£…MySQL", "url": "/posts/server_build-lamp-of-install-mysql.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:11:00 +0800", "snippet": "ä¸€ã€å·¥å…· Debian 9.0 Server mysql-8.0.16.tar.gz æºç åŒ… MySQLæœ€æ–°æºä»£ç ä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/mysql/æˆ‘ä»¬ç›´æ¥ä¸‹è½½æœ€æ–°ç‰ˆMySQLçš„æºä»£ç ï¼Œå¦‚å›¾æ‰€ç¤ºäºŒã€å®‰è£…æ­¥éª¤ å®‰è£…ç¼–è¯‘ç¯å¢ƒ é…ç½®ç¼–è¯‘å‚æ•° ç¼–è¯‘ä¸å®‰è£… ä½¿ç”¨MySQLä¸‰ã€å®‰è£…è¿‡ç¨‹ä»¥ä¸‹æ“ä½œå‡åœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œï¼Œâ€œ#â€ä¹‹åä¸ºæ³¨é‡Šå†…...", "content": "ä¸€ã€å·¥å…· Debian 9.0 Server mysql-8.0.16.tar.gz æºç åŒ… MySQLæœ€æ–°æºä»£ç ä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/mysql/æˆ‘ä»¬ç›´æ¥ä¸‹è½½æœ€æ–°ç‰ˆMySQLçš„æºä»£ç ï¼Œå¦‚å›¾æ‰€ç¤ºäºŒã€å®‰è£…æ­¥éª¤ å®‰è£…ç¼–è¯‘ç¯å¢ƒ é…ç½®ç¼–è¯‘å‚æ•° ç¼–è¯‘ä¸å®‰è£… ä½¿ç”¨MySQLä¸‰ã€å®‰è£…è¿‡ç¨‹ä»¥ä¸‹æ“ä½œå‡åœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œï¼Œâ€œ#â€ä¹‹åä¸ºæ³¨é‡Šå†…å®¹3.1 å®‰è£…ç¼–è¯‘ç¯å¢ƒ cmakeç¼–è¯‘å·¥å…·æ—©åœ¨MySQL 5.* çš„æ—¶å€™ï¼ŒMySQLæºç å°±å¼€å§‹ä½¿ç”¨cmakeè¿›è¡Œç¼–è¯‘äº†ï¼Œåœ¨å®‰è£…æºç ä¹‹å‰æˆ‘ä»¬å…ˆå®‰è£…ä¸Šcmakeapt install cmake ncursesã€build-essentialã€libssl-devã€pkg-configè¿™äº›åº“æ˜¯å¿…é¡»çš„ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹apt install -y libncurses-dev build-essential libssl-dev pkg-config Boost C++æˆ‘åœ¨å†™è¿™ä¸ªæ–‡æ¡£çš„æ—¶å€™ï¼ŒMySQLçš„æœ€æ–°ç‰ˆæœ¬æ˜¯8.0.16ï¼Œéœ€è¦ä¾èµ–boost_1_69_0ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿›å…¥boostå®˜ç½‘ç›´æ¥ä¸‹è½½å‹ç¼©åŒ…ï¼Œç„¶åè§£å‹åˆ°ç³»ç»Ÿç›®å½•ä¸­ï¼Œåœ¨ç¼–è¯‘è¿‡è¿‡ç¨‹ä¸­æŒ‡å®šboostç›®å½•å³å¯ã€‚ä»¥ä¸‹é“¾æ¥ä½œä¸ºå‚è€ƒå®˜ç½‘é“¾æ¥ï¼šhttps://www.boost.org/boost_1_69_0ä¸‹è½½é“¾æ¥ï¼šhttps://dl.bintray.com/boostorg/release/1.69.0/source/boost_1_69_0.tar.gzä¸‹è½½boost_1_68_0å‹ç¼©åŒ…ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥å°†å…¶è§£å‹åˆ°ç³»ç»Ÿç›®å½•ä¸­ï¼Œå¦‚ä¸‹å‘½ä»¤ï¼š# è§£å‹å®‰è£…åŒ…tar -zxvf boost_1_69_0.tar.gz# æŠŠboostæ–‡ä»¶ç›®å½•ç§»åŠ¨åˆ°ç³»ç»Ÿç›®å½•mv boost_1_69_0 /usr/local/3.2 é…ç½®ç¼–è¯‘å‚æ•°æ ¹æ®å®˜ç½‘æ–‡æ¡£ï¼Œæˆ‘ä»¬åœ¨ç¼–è¯‘MySQL 8.0.16æºç ä¹‹å‰ã€‚æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ·»åŠ åä¸ºâ€œmysqlâ€çš„ç”¨æˆ·# æ·»åŠ ç”¨æˆ·ç»„groupadd mysql# æ·»åŠ ç”¨æˆ·useradd -r -g mysql -s /bin/false mysqlè§£å‹æºç åŒ…# è§£å‹æºç åŒ…tar -zxvf mysql-8.0.16.tar.gz# è¿›å…¥æºç ç›®å½•cd mysql-8.0.16# æ–°å»ºä¸€ä¸ªç”¨äºä¿å­˜ç¼–è¯‘ä¸­é—´æ–‡ä»¶çš„ä¸´æ—¶ç›®å½•mkdir bld# è¿›å…¥ä¸´æ—¶ç›®å½•cd bldé…ç½®ç¼–è¯‘å‚æ•°cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local/mysql -DWITH_BOOST=/usr/local/boost_1_69_0/cmakeå‘½ä»¤æ‰§è¡Œä¹‹åä¼šç”Ÿæˆç¼–è¯‘é…ç½®æ–‡ä»¶ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šæ£€æµ‹æœ¬åœ°çš„ä¾èµ–æ˜¯å¦æ»¡è¶³ï¼Œä»¥ä¸Šå‘½ä»¤ä½¿ç”¨çš„å…³é”®å‚æ•°å¦‚ä¸‹ï¼š..ï¼šä¸¤ä¸ªç‚¹ä»£è¡¨ç¼–è¯‘ä¸Šä¸€çº§ç›®å½•ï¼Œå› ä¸ºbldä¸´æ—¶ç›®å½•æ˜¯åœ¨æºç ç›®å½•ä¹‹ä¸‹çš„ä¸€ä¸ªç›®å½•ï¼Œè€Œæˆ‘ä»¬éœ€è¦æŒ‡å‘æºç ç›®å½•-DCMAKE_INSTALL_PREFIXï¼šæŒ‡å®šmysqlçš„å®‰è£…ä½ç½®ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸æŒ‡å®šçš„è¯ï¼Œé»˜è®¤å°±æ˜¯/usr/local/mysql-DWITH_BOOSTï¼šæŒ‡å®šboost_1_69_0çš„å®‰è£…ç›®å½•å¦‚æœé…ç½®æ²¡æœ‰é”™è¯¯ï¼Œä½ ä¼šçœ‹åˆ°â€œConfiguring doneâ€ç­‰çš„æç¤ºï¼Œå¦‚ä¸‹å›¾ï¼Œä½ å¯æ‰§è¡Œä¸‹ä¸€æ­¥çš„ç¼–è¯‘ä¸å®‰è£…ã€‚å¦‚æœå‡ºé”™äº†ï¼Œä½ éœ€è¦åˆ†æé”™è¯¯æç¤ºï¼ŒåŒæ—¶éœ€è¦åˆ é™¤å½“å‰bldä¸´æ—¶ç›®å½•ä¸‹é¢cmakeå‘½ä»¤æ‰§è¡Œä¹‹åäº§ç”Ÿçš„æ‰€æœ‰æ–‡ä»¶ï¼Œç»†å¿ƒä¸€ç‚¹ï¼Œæ ¹æ®æ–‡æ¡£æ•™ç¨‹é‡æ¥ä¸€éã€‚3.3 ç¼–è¯‘ä¸å®‰è£…ç¼–è¯‘ï¼šmakeå®‰è£…make installå®‰è£…æ—¶é—´æ¯”è¾ƒé•¿ï¼Œå¯èƒ½éœ€è¦ç­‰å¥½å‡ ååˆ†é’Ÿï¼Œä¸»è¦å–å†³ä¸ä½ ç”µè„‘çš„é€Ÿåº¦ã€‚å®‰è£…å®Œæˆä¹‹åï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤# è¿›å…¥å®‰è£…ç›®å½•cd /usr/local/mysql# åˆ›å»ºç›®å½•mkdir mysql-files# ä¿®æ”¹ç›®å½•æ‰€æœ‰è€…å’Œæ‰€å±ç»„ä¸ºmysqlchown mysql:mysql mysql-files# ä¿®æ”¹ç›®å½•æƒé™chmod 750 mysql-files# åˆå§‹åŒ–mysql,æ­¤æ—¶ä¼šä¸º'root'@'localhost'ç”¨æˆ·ç”Ÿæˆä¸€ä¸ªä¸´æ—¶å¯†ç ï¼Œæˆ‘ä»¬éœ€è¦è®°ä½bin/mysqld --initialize --user=mysql# æ‰§è¡Œssl_rsaåˆå§‹åŒ–å‘½ä»¤bin/mysql_ssl_rsa_setupå°†æœåŠ¡è„šæœ¬å¤åˆ¶åˆ°ç³»ç»Ÿä¸­ï¼Œå½“ç„¶äº†ï¼Œè¿™æ˜¯å¯é€‰çš„ï¼Œå‘½ä»¤å¦‚ä¸‹cp support-files/mysql.server /etc/init.d/mysql.serverå®Œæˆä»¥ä¸Šæ“ä½œï¼Œå°±å¯ä»¥å¼€å¯æœåŠ¡äº†ï¼Œå‘½ä»¤å¦‚ä¸‹bin/mysqld_safe --user=mysql &amp;ç™»å½•åˆ°MySQLæ•°æ®åº“bin/mysql -u root -pè¿æ¥æ•°æ®åº“ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹å¯†ç ALTER USER 'root'@'localhost' IDENTIFIED BY 'ä½ çš„å¯†ç ';å››ã€ä½¿ç”¨MySQLåœ¨MySQL 8.0ç³»åˆ—ä¸­ï¼Œé»˜è®¤çš„èº«ä»½éªŒè¯æ’ä»¶å·²å°† mysql_native_passwordæ›´æ”¹ä¸º caching_sha2_passwordï¼Œå¹¶ä¸”åœ¨ â€˜rootâ€™@â€™localhostâ€™ç®¡ç†å¸æˆ·ä¸­é»˜è®¤ä½¿ç”¨caching_sha2_passwordéªŒè¯æ–¹å¼ã€‚åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå¾ˆå¤šå¼€æºç¨‹åºå¦‚wordpressã€typechoæ˜¯ä¸å¯ä»¥ç›´æ¥è¿æ¥çš„ï¼Œæ‰€ä»¥ä½¿ç”¨MySQL8.0æ•°æ®åº“ï¼Œä½ å¯ä»¥æ›´æ”¹é»˜è®¤éªŒè¯æ–¹å¼ï¼Œä½ è¿˜å¯ä»¥æ–°å»ºä¸€ä¸ªä¸“é—¨ç”¨äºä½ é¡¹ç›®å¼€å‘çš„ä¸€ä¸ªæ•°æ®åº“è´¦å·ï¼Œå¹¶ä½¿ç”¨mysql_native_passwordéªŒè¯æ–¹å¼ã€‚ä»¥ä¸‹æ–¹æ³•å¯æ›´æ”¹rootç”¨æˆ·çš„éªŒè¯æ–¹å¼ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'å¯†ç ';é»˜è®¤æƒ…å†µä¸‹MySQL 8.0ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·é»˜è®¤ä¹Ÿæ˜¯ä¸èƒ½è¿æ¥çš„ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä½ éœ€è¦æ›´æ”¹ä¸€ä¸‹å¯†ç çš„åŠ å¯†æ–¹å¼ALTER USER 'root'@'localhost' IDENTIFIED BY 'å¯†ç ' PASSWORD EXPIRE NEVER;å¦‚æœä½ æƒ³åŒæ—¶æ›´æ”¹å¯†ç éªŒè¯æ–¹å¼å’ŒåŠ å¯†æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'å¯†ç ' PASSWORD EXPIRE NEVER;åˆ°è¿™é‡Œå°±ç®—å®‰è£…æˆåŠŸäº†ï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯» æ­¤åšå®¢å‚è€ƒMySQLå®˜æ–¹æ–‡æ¡£https://dev.mysql.com/doc/" }, { "title": "LAMPç¯å¢ƒæ­å»ºä¹‹ä»æºç å®‰è£…PHP", "url": "/posts/server_build-lamp-of-install-php.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:10:00 +0800", "snippet": "ä¸€ã€ç¯å¢ƒ Ubuntu 16.04 Server php-7.3.4.tar.gz æºç åŒ… PHPå®˜ç½‘æºç ä¸‹è½½é“¾æ¥ï¼šhttps://www.php.net/downloads.phpåœ¨Apacheä¸­å®‰è£…PHPï¼Œå°±æ˜¯è®©Apacheæ”¯æŒå¯¹PHPä»£ç çš„è§£æï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç°åœ¨å¼€å§‹ã€‚äºŒã€å®‰è£…æ­¥éª¤ å®‰è£…phpä¾èµ–ç¯å¢ƒ é…ç½®ç¼–è¯‘å‚æ•° ç¼–è¯‘ä¸å®‰è£… é…ç½®Apacheæ”¯æŒPHPè§£æ ä½¿ç”¨æµ‹è¯•ä¸‰ã€...", "content": "ä¸€ã€ç¯å¢ƒ Ubuntu 16.04 Server php-7.3.4.tar.gz æºç åŒ… PHPå®˜ç½‘æºç ä¸‹è½½é“¾æ¥ï¼šhttps://www.php.net/downloads.phpåœ¨Apacheä¸­å®‰è£…PHPï¼Œå°±æ˜¯è®©Apacheæ”¯æŒå¯¹PHPä»£ç çš„è§£æï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç°åœ¨å¼€å§‹ã€‚äºŒã€å®‰è£…æ­¥éª¤ å®‰è£…phpä¾èµ–ç¯å¢ƒ é…ç½®ç¼–è¯‘å‚æ•° ç¼–è¯‘ä¸å®‰è£… é…ç½®Apacheæ”¯æŒPHPè§£æ ä½¿ç”¨æµ‹è¯•ä¸‰ã€å®‰è£…è¿‡ç¨‹æ‰€æœ‰åœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œï¼Œâ€œ#â€åä¸ºæ³¨é‡Šå†…å®¹3.1. å®‰è£…phpä¾èµ–ç¯å¢ƒè§£å‹æºç # è§£å‹æºä»£ç tar -zxvf php-7.3.4.tar.gz# è¿›å…¥æºç ç›®å½•cd php-7.3.4è§£å‹ä¹‹åé€šè¿‡lså‘½ä»¤å¯ä»¥çœ‹åˆ°æºç ç›®å½•ä¸‹æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ç›®å½•ä¸‹æœ‰ä¸€ä¸ªconfigureå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç”¨äºé…ç½®ç¼–è¯‘å‚æ•°æœ¬æ¬¡å®‰è£…ï¼Œæˆ‘ä»¬è¦å®ç°æ³¨æ„åˆ°è¾¾ä»¥ä¸‹ç›®æ ‡ åŠ è½½æ‰€æœ‰æ¨¡å— è®¾ç½®MySQLé©±åŠ¨ä¸ºmysqlnd æ·»åŠ gdã€webpã€jpegã€pngå›¾ç‰‡åº“çš„æ”¯æŒï¼Œå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†ã€ç”Ÿæˆå›¾ç‰‡éªŒè¯ç ç­‰ æ·»åŠ curlçš„æ”¯æŒï¼Œç”¨äºè¿›è¡Œç½‘ç»œè¯·æ±‚ æ·»åŠ freetypeå­—ä½“åº“çš„æ”¯æŒ æ·»åŠ zlibçš„æ”¯æŒï¼Œç”¨äºè¿›è¡Œæ•°æ®å‹ç¼© æ·»åŠ soapçš„æ”¯æŒï¼ŒSOAPæ˜¯ä¸€ç§ç®€å•çš„åŸºäºXMLçš„åè®®ï¼Œå®ƒä½¿åº”ç”¨ç¨‹åºé€šè¿‡HTTPæ¥äº¤æ¢ä¿¡æ¯ã€‚æ·»åŠ soapæ‰©å±•ç”¨æ¥ç¼–å†™soapæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ æ·»åŠ mbstringçš„æ”¯æŒï¼Œå¤šå­—èŠ‚å­—ç¬¦ä¸² æ·»åŠ socketsçš„æ”¯æŒ æ·»åŠ exifçš„æ”¯æŒ å–æ¶ˆipv6çš„æ”¯æŒï¼Œç›®å‰ipv6ç›®å‰æ²¡æœ‰å®Œå…¨æ™®åŠï¼Œä½¿ç”¨ipv6æœ‰æ—¶å€™ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼Œç›´æ¥ç¦ç”¨ æ·»åŠ libmcryptçš„æ”¯æŒ æ·»åŠ xmlæ”¯æŒ æ·»åŠ opensslçš„æ”¯æŒ æ·»åŠ å¯¹bzip2çš„æ”¯æŒå®é™…ä¸Šï¼Œæ ¹æ®ä½ çš„é¡¹ç›®éœ€æ±‚ï¼Œä½ å¯èƒ½éœ€è¦é…ç½®æ›´å¤šå‚æ•°ï¼Œä»¥ä¸Šåªæ˜¯ä¸€ä¸ªæœ€å¸¸è§„çš„æ¼”ç¤ºï¼Œä½ å¯ä»¥ä½¿ç”¨./configure -helpå‘½ä»¤æŸ¥çœ‹è¯¦ç»†è¯´æ˜ã€‚ä¸è¿‡ï¼Œå¯¹äºå­¦ä¹ PHPåŸºç¡€æ­å»ºçš„ç¯å¢ƒï¼Œä¸Šé¢çš„é…ç½®åŸåˆ™åº”è¯¥å¤Ÿç”¨äº†ã€‚æ ¹æ®ä¸Šé¢éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿä¸­å®‰è£…ä¸€äº›ä¾èµ–åº“ï¼Œå¦‚ä¸‹å‘½ä»¤ï¼šapt install libcurl4-openssl-dev #å®‰è£…curlå¼€å‘å¥—ä»¶apt install libgd-dev #å®‰è£…gdå¼€å‘å¥—ä»¶apt install libwebp-dev #å®‰è£…webpå¼€å‘å¥—ä»¶apt install libjpeg-dev #å®‰è£…jpegå¼€å‘å¥—ä»¶apt install libpng++-dev #å®‰è£…pngå¼€å‘å¥—ä»¶apt install libfreetype6-dev #å®‰è£…libfreetype6-devå¼€å‘å¥—ä»¶apt install libghc-zlib-dev #å®‰è£…zlibå¼€å‘å¥—ä»¶apt install libmcrypt-dev #å®‰è£…libmcryptå¼€å‘å¥—ä»¶apt install libxml++2.6-dev #å®‰è£…libxmlå¼€å‘å¥—ä»¶apt install libssl-dev #å®‰è£…sslå¼€å‘å¥—ä»¶apt install libbz2-dev #å®‰è£…bzip2å¼€å‘å¥—ä»¶æˆ–è€…æ‰§è¡Œä»¥ä¸‹ä¸€æ¬¡æ€§å‘½ä»¤apt install -y libcurl4-openssl-dev libgd-dev libwebp-dev libpng++-dev libfreetype6-dev libghc-zlib-dev libmcrypt-dev libxml++2.6-dev libssl-dev libbz2-dev3.2 é…ç½®ç¼–è¯‘å‚æ•°æ ¹æ®3.1ä¸­çš„ç›®æ ‡è¯´æ˜ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹å‚æ•°é…ç½®å‘½ä»¤./configure --prefix=/usr/local/php --with-apxs2=/usr/local/apache2/bin/apxs --with-config-file-path=/usr/local/php/etc --with-pdo-mysql=mysqlnd --with-mysqli=mysqlnd --with-libxml-dir --with-gd --with-jpeg-dir --with-png-dir --with-freetype-dir --with-iconv-dir --with-zlib-dir --with-bz2 --with-openssl --with-curl --enable-soap --enable-mbstring --enable-sockets --enable-exif --disable-ipv6é…ç½®è¿‡ç¨‹å¦‚æœæ²¡æœ‰é”™è¯¯çš„è¯ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹å¦‚å›¾æ‰€ç¤ºï¼šå…³é”®å‚æ•°è¯´æ˜ï¼šâ€“prefixï¼šæŒ‡å®šå®‰è£…ä½ç½®â€“with-apxs2ï¼šæŒ‡å®šApache 2ä¸­apxsæ¨¡å—æ‰€åœ¨çš„ç›®å½•ï¼Œæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚å®‰è£…äº†Apache 2.4.39â€“with-config-file-pathï¼šæŒ‡å®šphpé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•å…¶ä»–ï¼šå…¶ä»–çš„å°±ä¸ç»†è¯´äº†ï¼Œè¿™äº›å‚æ•°å°±å¯¹åº”åœ¨äºŒã€1ä¸­è¯´çš„é‚£äº›3.3 æ·»åŠ è™šæ‹Ÿå†…å­˜ç¼–è¯‘è¿‡ç¨‹ä¼šæ¶ˆè€—æ¯”è¾ƒå¤šçš„å†…å­˜ï¼Œå¦‚æœæœåŠ¡å™¨å†…å­˜æ¯”è¾ƒå°ï¼ˆå°äº1Gçš„æƒ…å†µï¼‰ï¼Œåˆ›å»ºäº¤æ¢ç©ºé—´ï¼Œå¯ä»¥å†åˆ›å»º1Gçš„swapç©ºé—´ï¼ˆä»ç¡¬ç›˜åˆ†é…çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼‰ï¼Œå¦‚ä¸‹å‘½ä»¤dd if=/dev/zero of=/mnt/swap bs=1M count=1024 è®¾ç½®äº¤æ¢åˆ†åŒºæ–‡ä»¶mkswap /mnt/swapå¯åŠ¨swapswapon /mnt/swapè®¾ç½®å¼€æœºæ—¶è‡ªå¯ç”¨ swap åˆ†åŒºï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶ /etc/fstabä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¸€è¡Œé…ç½®/mnt/swap swap swap defaults 0 03.4 ç¼–è¯‘ä¸å®‰è£…å‚æ•°é…ç½®ç»“æŸä¹‹åæºç ç›®å½•ä¼šå¤šå‡ºä¸€ä¸ªMakefileæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¼–è¯‘å®‰è£…äº†ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤make #ç¼–è¯‘make install #å®‰è£…åœ¨2ä¸­æˆ‘ä»¬åœ¨å‚æ•°é…ç½®ä¸­æŒ‡å®šé…ç½®æ–‡ä»¶çš„ç›®å½•ä¸ºï¼š/usr/local/php/etcï¼Œå› æ­¤æŠŠæºç ç›®å½•ä¸‹çš„å®ä¾‹é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°æˆ‘ä»¬æŒ‡å®šçš„é…ç½®æ–‡ä»¶ç›®å½•ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤cp php.ini-production /usr/local/php/etc/php.ini3.5 è®¾ç½®Apacheæ”¯æŒPHPè§£æä½¿ç”¨vimç¼–è¾‘ApacheæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶vim /usr/local/apache2/conf/httpd.conf æ·»åŠ  php å¾—æ”¯æŒåœ¨&lt;IfModule mime_module&gt;æ·»åŠ ä»¥ä¸‹å†…å®¹AddType application/x-httpd-php .phpå¦å¤–ï¼Œæ‰¾åˆ°å¦‚ä¸‹å†…å®¹&lt;IfModule dir_module&gt; DirectoryIndex index.html&lt;/IfModule&gt;æ”¹ä¸º&lt;IfModule dir_module&gt; DirectoryIndex index.html index.htm index.php&lt;/IfModule&gt; ä¿®æ”¹æœåŠ¡å™¨åç§°æ‰¾åˆ°å¦‚ä¸‹å†…å®¹#ServerName www.example.com:80å»æ‰æ³¨é‡Šï¼Œä¿®æ”¹ä¸ºServerName localhost:803.6 ä½¿ç”¨æµ‹è¯•æˆ‘ä»¬é‡å¯ApacheæœåŠ¡å™¨ä¹‹åã€‚åœ¨Apacheçš„htdocsç›®å½•ä¸‹ï¼Œæ·»åŠ index.phpæ–‡ä»¶ç”¨äºæµ‹è¯•PHPæ˜¯å¦æ­£å¸¸è§£æï¼Œåœ¨æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹&lt;?phpphpinfo();ä¿å­˜ä¹‹åï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œæ‰“å¼€å¦‚ä¸‹é“¾æ¥ï¼Œä»¥ä¸‹â€$IPâ€æ›¿æ¢æˆä½ çš„å®é™…IPæˆ–è€…åŸŸåhttp://$IP/index.phpå¦‚æœçœ‹åˆ°å¦‚ä¸‹å›¾ä¸­ç»“æœï¼Œä»£è¡¨å®‰è£…æˆåŠŸäº†" }, { "title": "LAMPç¯å¢ƒæ­å»ºä¹‹ä»æºç å®‰è£…Apache", "url": "/posts/server_build-lamp-of-install-apache.html", "categories": "æœåŠ¡å™¨", "tags": "", "date": "2023-01-31 00:09:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019.04.21ä¸€ã€å‡†å¤‡ Ubuntu 16.04 Server çº¯å‡€ç³»ç»Ÿ Apache httpd-2.4.39 æºç Apacheçš„httpdè½¯ä»¶ï¼Œé€šå¸¸æˆ‘ä»¬ç›´æ¥å«åšApacheæœåŠ¡å™¨ã€‚Apache httpd-2.4.39çš„ä¸‹è½½åœ°å€ï¼šhttp://httpd.apache.org/download.cgiï¼Œæˆ‘åœ¨æ’°å†™æ­¤æ–‡ç« çš„æ—¶å€™è¿™æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä¸‹è½½.tar.bz2å‹...", "content": " æ’°å†™æ—¶é—´ï¼š2019.04.21ä¸€ã€å‡†å¤‡ Ubuntu 16.04 Server çº¯å‡€ç³»ç»Ÿ Apache httpd-2.4.39 æºç Apacheçš„httpdè½¯ä»¶ï¼Œé€šå¸¸æˆ‘ä»¬ç›´æ¥å«åšApacheæœåŠ¡å™¨ã€‚Apache httpd-2.4.39çš„ä¸‹è½½åœ°å€ï¼šhttp://httpd.apache.org/download.cgiï¼Œæˆ‘åœ¨æ’°å†™æ­¤æ–‡ç« çš„æ—¶å€™è¿™æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚ä½ å¯ä»¥ä¸‹è½½.tar.bz2å‹ç¼©åŒ…ï¼Œä¹Ÿå¯ä»¥.tar.gzå‹ç¼©åŒ…ã€‚æ–‡ç« ä¸­ä½¿ç”¨çš„æ˜¯httpd-2.4.39.tar.gzäºŒã€æ¦‚è¿°2.1 ä»è½¯ä»¶åº“å¿«é€Ÿå®‰è£…Apacheæ˜¯ä¸€ä¸ªå¤§åé¼é¼çš„æœåŠ¡å™¨è½¯ä»¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥ç›´æ¥ä»Linuxè½¯ä»¶åº“ä¸­å®‰è£…ï¼Œå¦‚ä¸‹å‘½ä»¤åœ¨Fedora/CentOS/Red Hatä¸Šå®‰è£…Apacheä¸è¿è¡ŒApache# å®‰è£…sudo yum install httpd# è®¾ç½®å¼€æœºè‡ªå¯sudo systemctl enable httpd# å¯åŠ¨æœåŠ¡sudo systemctl start httpdåœ¨Ubuntu/Debianä¸Šå®‰è£…å¹¶è¿è¡ŒApache# å®‰è£…æœåŠ¡sudo apt install apache2# å¯åŠ¨æœåŠ¡sudo service apache2 start2.2 ä¸ºä»€ä¹ˆéœ€è¦æºç å®‰è£…ï¼Ÿä¸è¿‡æœ‰å°ä¼™ä¼´å¯èƒ½æœ‰ç–‘é—®ï¼Œä¸¤æ¡å‘½ä»¤ä¸æ˜¯ç›´æ¥å®‰è£…æˆåŠŸäº†å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ä»æºä»£ç å®‰è£…çš„æ–¹å¼æ¥å®‰è£…Apacheï¼Ÿç­”ï¼šè§‚çœ‹æ•™ç¨‹çš„å°ä¼™ä¼´å¤§å¤šæ˜¯åˆå­¦è€…ï¼Œä½¿ç”¨ä»æºç å®‰è£…çš„æ–¹å¼ï¼Œè®©ä»–ä»¬è¿›ä¸€æ­¥äº†è§£åº•å±‚çš„ä¸€äº›çŸ¥è¯†ã€‚å¦‚æœä½ å–œæ¬¢ä»è½¯ä»¶åº“å®‰è£…ï¼Œåˆå­¦è€…å¯èƒ½å®Œå…¨ä¸çŸ¥é“å®‰è£…è¿‡ç¨‹ã€‚å¯¹è‡ªå·±åé¢ä½¿ç”¨å’Œç†è§£Apacheéƒ½æ˜¯ä¸€ç»„é˜»ç¢ã€‚æ‰€ä»¥å»ºè®®çš„æ˜¯ï¼šåˆå­¦è€…æœ€å¥½ä½¿ç”¨æºç å®‰è£…ã€‚2.3 å®‰è£…è¿‡ç¨‹ å®‰è£…ç¨‹åºç¼–è¯‘ç¯å¢ƒC/C++æºä»£ç éœ€è¦é€šè¿‡ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰å¯ä»¥æ­£å¸¸è¿è¡Œã€‚è€ŒApacheæœåŠ¡å™¨è½¯ä»¶å°±æ˜¯ä½¿ç”¨C/C++å¼€å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆéœ€è¦å…ˆç¼–è¯‘ï¼Œæ‰€ä»¥ç¼–è¯‘ç¯å¢ƒå¿…é¡»æœ‰ï¼Œä½ æ‡‚çš„ã€‚ é…ç½®ç¼–è¯‘å‚æ•°Apacheæºç ç›®å½•ä¸‹çš„configureå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±æ˜¯ç”¨æ¥é…ç½®å®‰è£…Apacheçš„ç¼–è¯‘å‚æ•°ï¼Œç”Ÿæˆç¼–è¯‘é…ç½®æ–‡ä»¶Makefileã€‚é€šè¿‡é…ç½®å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ä¸€äº›ApacheæœåŠ¡å™¨çš„ä¸€äº›åŠŸèƒ½ï¼Œåœ¨é…ç½®å‚æ•°çš„è¿‡ç¨‹ä¸­ï¼ŒApacheä¼šæ£€æŸ¥ä½ ç³»ç»Ÿç¼ºå¤±çš„å¿…å¤‡ç¨‹åºç»„ä»¶ï¼Œå¦‚æœLinuxç³»ç»Ÿç¼ºå¤±ç›¸åº”ç»„ä»¶ï¼Œåˆ™ä¼šè¾“å‡ºç›¸å…³é”™è¯¯æç¤ºï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³ã€‚è§£å†³è¿‡ç¨‹æ— éå°±æ˜¯æŠŠç¼ºå¤±çš„å†…å®¹å®‰è£…ä¸Šã€‚ ç¼–è¯‘ä¸å®‰è£…æ‰§è¡Œconfigureå¯æ‰§è¡Œæ–‡ä»¶ç”Ÿæˆmakeç¼–è¯‘é…ç½®æ–‡ä»¶Makefileä¹‹åï¼Œå°±å¯ä»¥ç¼–è¯‘ã€å®‰è£…äº†ã€‚åºŸè¯å°‘è¯´ï¼Œå¼€å§‹å§ã€‚ä¸‰ã€å®‰è£…åŸºç¡€ç¯å¢ƒå¯¹äºå®‰è£…Apacheéœ€è¦ä¾èµ–çš„ç¯å¢ƒï¼Œåœ¨Fedora/CentOS/Red Hatä¸Šä½¿ç”¨yumå·¥å…·æ¥å®‰è£…ä¾èµ–ç¨‹åºåŒ…ï¼Œåœ¨Ubuntu/Debianä¸Šä½¿ç”¨aptå·¥å…·æ¥å®‰è£…ä¾èµ–ç¨‹åºåŒ…ã€‚å½“ç„¶äº†ï¼Œä½ çš„Linuxç³»ç»Ÿéœ€è¦50Mä»¥ä¸Šçš„ä¸´æ—¶ç©ºé—´ã€ä½ çš„Linuxç³»ç»Ÿèƒ½è¿æ¥ç½‘ç»œï¼ŒåŒæ—¶ä½ çš„ç³»ç»Ÿæ—¶é—´æ­£ç¡®ã€‚æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä»httpd-2.4.39æºç å®‰è£…ï¼Œç¡®ä¿ä½ ç³»ç»ŸåŒ…å«ä»¥ä¸‹ç¯å¢ƒã€‚æœ¬æ–‡ä»¥Ubuntuä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯æŒ‰ç…§åŸºç¡€ç¯å¢ƒçš„è¿‡ç¨‹ APR and APR-Utilç¡®ä¿æ‚¨çš„ç³»ç»Ÿä¸Šå·²å®‰è£…APRå’ŒAPR-Utilï¼Œåœ¨æŸäº›ç³»ç»Ÿä¸Šéœ€è¦å®‰è£…ç›¸åº”çš„devåŒ…ã€‚sudo apt install -y libaprutil1-dev PCREsudo apt install -y libpcre3-dev Cç¼–è¯‘å™¨å’Œæ„å»ºç³»ç»Ÿè¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠgccå’Œcmakeéƒ½å®‰è£…ä¸Šsudo apt install -y gcc cmake Perl 5sudo apt install -y perl opensslè¿™ä¸ªç¨‹åºä¸æ˜¯å®˜æ–¹ä¸å¼ºåˆ¶å®‰è£…çš„ã€‚åœ¨æ­¤æ•™ç¨‹çš„åç»­ï¼Œæˆ‘ä¼šå†™ä¸€ä¸ªå®‰è£…sslè¯ä¹¦çš„æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ­¤å®‰è£…ApacheæœåŠ¡å™¨ä¹‹å‰æˆ‘ä»¬å…ˆå®‰è£…ä¸Šopensslã€‚sudo apt install -y openssl å®‰è£…æ‰€æœ‰ç¯å¢ƒå¦‚æœè§‰å¾—éº»çƒ¦ï¼Œå¯ä»¥ä¸€æ¬¡æ€§å®‰è£…ä¸Šé¢æåˆ°çš„æ‰€æœ‰ä¾èµ–ï¼Œå¦‚ä¸‹å‘½ä»¤ï¼šsudo apt install -y libaprutil1-dev libpcre3-dev gcc cmake perl opensslå››ã€å®‰è£…è¿‡ç¨‹ä»¥ä¸‹æ“ä½œéƒ½åœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œï¼Œâ€œ#â€åä¸ºæ³¨é‡Šå†…å®¹ã€‚ é…ç½®ç¼–è¯‘å‚æ•°â€œ#â€å·åé¢ä¸ºæ³¨é‡Šå†…å®¹# è§£å‹æºç åŒ…tar -zxvf httpd-2.4.39.tar.gz# è¿›å…¥æºç ç›®å½•cd httpd-2.4.39# æŸ¥çœ‹æºç ç›®å½•å†…å®¹lsä½ å¯ä»¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š é…ç½®ç¼–è¯‘å‚æ•°./configure --prefix=/usr/local/apache2 --enable-modules=all --enable-mods-shared=all --enable-soconfirgureå‚æ•°è¯´æ˜ï¼šï¼ˆ1ï¼‰â€“prefixï¼šæŒ‡å®šå®‰è£…ç›®å½•ï¼Œå¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œé»˜è®¤å°±æ˜¯/usr/local/apache2ï¼›ï¼ˆ2ï¼‰â€“enable-modules=allï¼šåŠ è½½æ‰€æœ‰æ¨¡å—ï¼›ï¼ˆ3ï¼‰â€“enable-mods-shared=allï¼šæ‰€æœ‰æ¨¡å—ä½¿ç”¨åŠ¨æ€ç¼–è¯‘çš„æ–¹å¼è¿›è¡Œç¼–è¯‘ã€‚å¦‚æœä¸åŠ æ­¤å‚æ•°ï¼Œé»˜è®¤ä¸ºé™æ€ç¼–è¯‘ï¼Œé™æ€æ˜¯ç›´æ¥ç¼–è¯‘è¿›httpdä¸­ï¼Œ åŠ¨æ€ç¼–è¯‘ä¼šæä¾›ä¸€ä¸ªmodule.so æ–‡ä»¶ï¼Œéœ€è¦åœ¨httpd.confé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨æ—¶ç”¨ loadmodule è¿™ä¸ªè¯­æ³•æ¥åŠ è½½ï¼›ï¼ˆ4ï¼‰â€“enable-soï¼šå…¶å®ä½¿ç”¨åŠ¨æ€ç¼–è¯‘æ–¹å¼æ—¶è¯¥æ¨¡å—ä¼šè‡ªåŠ¨ç”Ÿæ•ˆã€‚æœ¬æ¬¡å®‰è£…æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸Šåˆ—å‡ºçš„å‚æ•°é…ç½®ï¼Œå°±å¯ä»¥åœ¨å¾ˆå¤šéœ€æ±‚åœºæ™¯ä½¿ç”¨äº†ï¼Œä¸è¿‡ä½ å®é™…çš„é¡¹ç›®ä¸Šå¯èƒ½ä¼šåšä¿®æ”¹ã€‚å…·ä½“å‚æ•°è¯´æ˜ä½ å¯ä»¥ä½¿ç”¨./configure -helpæŸ¥çœ‹ã€‚å‚æ•°é…ç½®ç»“æŸä¹‹åï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹å›¾ä¿¡æ¯ï¼šæ­¤æ—¶ï¼Œæºç ç›®å½•ä¸‹é¢å¤šå‡ºä¸€ä¸ªMakefileæ–‡ä»¶ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ çš„ç¯å¢ƒå’Œæˆ‘æ¼”ç¤ºçš„ä¸ä¸€æ ·ï¼Œæ‰§è¡Œä¸Šé¢è¿‡ç¨‹ä½ å¯èƒ½ä¸ä¼šé¡ºåˆ©é€šè¿‡ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½ è§£å†³ç›¸åº”çš„é”™è¯¯äº†ã€‚æœ‰é—®é¢˜ï¼Œå¦‚æœé‡åˆ°ç›¸å…³é—®é¢˜ä¸èƒ½è‡ªå·±ç½‘ä¸Šä¸Šæœè§£å†³ï¼Œä¹Ÿå¯ä»¥ç§ä¿¡åˆ°æˆ‘ã€‚ ç¼–è¯‘ä¸å®‰è£…# ç¼–è¯‘make# å®‰è£…make installå¦‚æœæ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œé‚£å°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œæ­¤æ—¶ï¼Œ/usr/local/ç›®å½•ä¸‹å¤šå‡ºäº†apache2ç›®å½•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬å®‰è£…apacheçš„ç›®å½•ã€‚æ­¤æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯¹apacheæœåŠ¡å™¨è¿›è¡Œç›¸åº”æ“ä½œ# å¼€å¯æœåŠ¡å™¨/usr/local/apache2/bin/apachectl start# å…³é—­æœåŠ¡å™¨/usr/local/apache2/bin/apachectl stop# é‡å¯æœåŠ¡å™¨/usr/local/apache2/bin/apachectl restartå¼€å¯æœåŠ¡ä¹‹åï¼Œæ‰“å¼€ç½‘ç»œæµè§ˆå™¨ï¼Œè¾“å…¥æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ï¼Œçœ‹åˆ°æµè§ˆå™¨â€œIt Worksâ€å­—æ ·ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼Œå®‰è£…æˆåŠŸäº†ã€‚æ­¤æ¬¡æ–‡ç« åˆ°è¿™é‡Œï¼Œæœ¬ç³»åˆ—æ•™ç¨‹å…±ä¸‰ç¯‡ï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸€ç¯‡ï¼Œæ¬¢è¿æŒç»­å…³æ³¨ã€‚" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬9ç¯‡-keyçš„é€šç”¨æ“ä½œ", "url": "/posts/redis_general-operation.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:59:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°key æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡ key è·å– redis ä¸­ä¿å­˜çš„æ•°æ®ï¼Œé‚£ä¹ˆ key é€šå¸¸å­˜åœ¨ä»¥ä¸‹çš„æ“ä½œ å¯¹äºkeyè‡ªèº«çŠ¶æ€çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šåˆ é™¤ã€åˆ¤å®šæ˜¯å¦å­˜åœ¨ã€è·å–ç±»å‹ ç­‰ å¯¹äºkeyæœ‰æ•ˆæ§åˆ¶çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šæœ‰æ•ˆæœŸè®¾å®šã€åˆ¤å®šæ˜¯å¦æœ‰æ•ˆã€æœ‰æ•ˆçŠ¶æ€çš„åˆ‡æ¢ ç­‰ å¯¹äºkeyå¿«é€ŸæŸ¥è¯¢æ“ä½œï¼Œä¾‹å¦‚ï¼šæŒ‰æŒ‡å®šç­–ç•¥æŸ¥è¯¢key åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç» key çš„é€šç”¨æ“ä½œäºŒ...", "content": "ä¸€ã€æ¦‚è¿°key æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡ key è·å– redis ä¸­ä¿å­˜çš„æ•°æ®ï¼Œé‚£ä¹ˆ key é€šå¸¸å­˜åœ¨ä»¥ä¸‹çš„æ“ä½œ å¯¹äºkeyè‡ªèº«çŠ¶æ€çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šåˆ é™¤ã€åˆ¤å®šæ˜¯å¦å­˜åœ¨ã€è·å–ç±»å‹ ç­‰ å¯¹äºkeyæœ‰æ•ˆæ§åˆ¶çš„ç›¸å…³æ“ä½œï¼Œä¾‹å¦‚ï¼šæœ‰æ•ˆæœŸè®¾å®šã€åˆ¤å®šæ˜¯å¦æœ‰æ•ˆã€æœ‰æ•ˆçŠ¶æ€çš„åˆ‡æ¢ ç­‰ å¯¹äºkeyå¿«é€ŸæŸ¥è¯¢æ“ä½œï¼Œä¾‹å¦‚ï¼šæŒ‰æŒ‡å®šç­–ç•¥æŸ¥è¯¢key åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç» key çš„é€šç”¨æ“ä½œäºŒã€keyçš„åŸºæœ¬é€šç”¨æ“ä½œåˆ é™¤æŒ‡å®škeydel keyåˆ¤å®škeyæ˜¯å¦å­˜åœ¨exists keyè·å– key çš„ç±»å‹type keyä¸‰ã€keyçš„å®æ•ˆæ€§æ§åˆ¶æ“ä½œ ä¸ºæŒ‡å®škeyè®¾ç½®æœ‰æ•ˆæœŸ# è®¾ç½®keyæœ‰æ•ˆæœŸä¸ºsecondsç§’expire key seconds# è®¾ç½®keyæœ‰æ•ˆæœŸä¸ºmillisecondsæ¯«ç§’pexpire key milliseconds# è®¾ç½®keyå¤±æ•ˆ çš„ ç§’çº§æ—¶é—´æˆ³expireat key timestamp# è®¾ç½®keyå¤±æ•ˆçš„ æ¯«ç§’çº§æ—¶é—´æˆ³pexpireat key milliseconds-timestamp è·å–keyçš„æœ‰æ•ˆæ—¶é—´# è·å–keyçš„ç§’çº§æœ‰æ•ˆæ—¶é—´ttl key# è·å–keyçš„æ¯«ç§’çº§æœ‰æ•ˆæ—¶é—´pttl keyå¯¹äºè·å–æœ‰æ•ˆæ—¶é—´çš„æŒ‡ä»¤ï¼Œkey ä¸å­˜åœ¨è¿”å› -2ï¼Œkey å­˜åœ¨ä½†æ˜¯æ²¡æœ‰å…³è”è¶…æ—¶æ—¶é—´è¿”å› -1ï¼Œå¦‚æœkeyå­˜åœ¨å¹¶ä¸”æœ‰å…³è”æ—¶é—´ï¼Œåˆ™è¿”å›å…·ä½“çš„å‰©ä½™æ—¶é—´ç§’æˆ–è€…æ¯«ç§’ã€‚ åˆ‡æ¢keyä»å®æ•ˆæ€§è½¬ä¸ºæ°¸ä¹…æ€§persist keyå››ã€keyçš„æŸ¥è¯¢æ“ä½œkeyå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŒ‡ä»¤ä¸ºkeys patternä»¥ä¸‹æ˜¯å¸¸ç”¨çš„æŸ¥è¯¢ç¤ºä¾‹*: åŒ¹é…ä»»æ„æ•°é‡çš„ä»»æ„å­—ç¬¦?: æ‰¹è¯„ä¸ºä»»æ„ä¸€ä¸ªç¬¦å·[]: åŒ¹é…ä¸€ä¸ªæŒ‡å®šç¬¦å·# æŸ¥è¯¢æ‰€æœ‰keys *# æŸ¥è¯¢æ‰€æœ‰ä»¥itå¼€å¤´çš„keykeys it*# æŸ¥è¯¢æ‰€æœ‰ä»¥itç»“å°¾çš„keykeys *it# æŸ¥è¯¢å‰é¢ä»¥ä¸¤ä¸ªä»»å­—ç¬¦ï¼Œåé¢ä»¥itç»“å°¾çš„keykeys ??it# æŸ¥è¯¢ä»¥user:å¼€å¤´ï¼Œä»»æ„ä¸€ä¸ªå­—ç¬¦ç»“å°¾çš„keykeys user:?# æŸ¥è¯¢ä»¥uå¼€å¤´ï¼Œä»¥er:1ç»“å°¾ï¼Œä¸­é—´åŒ…å« s æˆ– t å­—ç¬¦çš„keykeys keys u[st]er:1äº”ã€keyçš„å…¶ä»–æ“ä½œ å°†keyæ”¹å# å½“ newkey å·²ç»å­˜åœ¨æ—¶ï¼Œ rename å‘½ä»¤å°†è¦†ç›–æ—§å€¼rename key newkey# å½“ä¸”ä»…å½“ newkey ä¸å­˜åœ¨æ—¶ï¼Œå°† key æ”¹åä¸º newkeyrenamenx key newkey æ’åºå¯¹ list, set æˆ–sorted set ä¸­çš„å…ƒç´ è¿›è¡Œæ’åºè¾“å‡ºï¼Œsort æŒ‡ä»¤åŠŸèƒ½æ¯”è¾ƒå¤šï¼Œåœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬æš‚ä¸” æŒ‡æ¼”ç¤ºç®€å•çš„ç”¨æˆ·# å¯¹listæ•°æ®å€’åºè¾“å‡ºsort key desc# å¯¹lsitæ•°æ®é¡ºåºè¾“å‡ºsort key asc æŸ¥çœ‹æ›´å¤šé€šç”¨æ“ä½œhelp @generic" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬8ç¯‡-sorted_setæ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œ", "url": "/posts/redis_sort-set.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:58:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å¯¹åŒç±»æ•°æ®è¿›è¡Œæ’åºï¼Œéœ€è¦æä¾›ä¸€ç§å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹å¾è¿›è¡Œæ’åºçš„æ–¹å¼ã€‚äºæ˜¯æˆ‘ä»¬å¼•å…¥ä»Šå¤©çš„ç±»å‹ï¼šsorted_setï¼Œä¹Ÿå«åšæœ‰åºé›†åˆï¼Œé€šå¸¸æˆ‘ä»¬ä¹Ÿç§°ä¸º zsetï¼ŒæŒ‡çš„æ˜¯åœ¨ redis ä¸­ï¼Œé€šå¸¸ä»¥ zset add ç­‰å‘½ä»¤æ“ä½œã€‚æœ‰åºé›†åˆå¯ä»¥ä¿å­˜å¯æ’åºçš„æ•°æ®ï¼Œåœ¨setå­˜å‚¨ç»“æ„çš„åŸºç¡€ä¹‹ä¸Šæ·»åŠ å¯æ’åºå­—æ®µã€‚æœ‰åºé›†åˆæ•°æ®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼škey ä»£è¡¨é›†åˆä¸­çš„å…ƒç´ ï¼Œ scor...", "content": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å¯¹åŒç±»æ•°æ®è¿›è¡Œæ’åºï¼Œéœ€è¦æä¾›ä¸€ç§å¯ä»¥æ ¹æ®è‡ªèº«ç‰¹å¾è¿›è¡Œæ’åºçš„æ–¹å¼ã€‚äºæ˜¯æˆ‘ä»¬å¼•å…¥ä»Šå¤©çš„ç±»å‹ï¼šsorted_setï¼Œä¹Ÿå«åšæœ‰åºé›†åˆï¼Œé€šå¸¸æˆ‘ä»¬ä¹Ÿç§°ä¸º zsetï¼ŒæŒ‡çš„æ˜¯åœ¨ redis ä¸­ï¼Œé€šå¸¸ä»¥ zset add ç­‰å‘½ä»¤æ“ä½œã€‚æœ‰åºé›†åˆå¯ä»¥ä¿å­˜å¯æ’åºçš„æ•°æ®ï¼Œåœ¨setå­˜å‚¨ç»“æ„çš„åŸºç¡€ä¹‹ä¸Šæ·»åŠ å¯æ’åºå­—æ®µã€‚æœ‰åºé›†åˆæ•°æ®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼škey ä»£è¡¨é›†åˆä¸­çš„å…ƒç´ ï¼Œ score ä»£è¡¨å…ƒç´ å¯¹åº”çš„æ’åºå€¼ã€‚æœ¬ç¯‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸ƒç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»ä¹‹å‰çš„å†…å®¹01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯•03-rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹04-rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œ05-rediså…¥é—¨çŸ¥è¯†ç¬¬5ç¯‡-hashæ•°æ®ç±»å‹ä¸åŸºæœ¬æ“ä½œ06-rediså…¥é—¨çŸ¥è¯†ç¬¬6ç¯‡-list ç±»å‹ä»¥åŠåŸºæœ¬æ“ä½œ07-rediså…¥é—¨çŸ¥è¯†ç¬¬7ç¯‡-setæ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œäºŒã€sorted_set æ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œ2.1 æ·»åŠ æ•°æ®zadd key score1 member1 [score2 member2]2.2 è·å–å…¨éƒ¨æ•°æ®# é¡ºåºæ’åˆ—å–æ•°æ®zrange key start stop [withscores]# å€’å™æ’åˆ—å–æ•°æ®zrevrange key start stop [withscores]2.3 åˆ é™¤æ•°æ®zrem key member [member...]2.4 æŒ‰æ¡ä»¶è·å–æ•°æ®ç›¸å…³ç¬¦å·å¦‚ä¸‹ï¼š+inf: è¡¨ç¤ºå¤§äºä»»ä½•æ•°-inf: è¡¨ç¤ºå°äºä»»ä½•æ•°(: å·¦å¼€åŒºé—´): å³å¼€åŒºé—´æŒ‡ä»¤æ ¼å¼# æ­£åº æ ¹æ®scoreæŸ¥è¯¢ zrangebyscore key min max [withscores] [limit]# å€’åº æ ¹æ®scoreæŸ¥è¯¢zreverangebyscore key min max [withscores] [limit]æŸ¥è¯¢ç¤ºä¾‹# æ·»åŠ æ•°æ®zadd scores 60 li 85 ww 91 zl 88 lxm 82 xsd 66 cc 100 glz 79 zs# æŸ¥è¯¢scoreä¸º80åˆ°ä»»æ„å¤§çš„3æ¡æ•°æ®zrangebyscore scores 80 +inf withscores limit 0 3# æŸ¥è¯¢100åˆ°60çš„2æ¡æ•°æ®zrevrangebyscore scores 100 60 withscores limit 0 22.5 æŒ‰æ¡ä»¶åˆ é™¤# æ ¹æ®ç´¢å¼•åˆ é™¤æ•°æ®zremrangebyrank key start stop# æ ¹æ®scoreåˆ é™¤æ•°æ®zremrangebyscore key min max2.6 è·å–é›†åˆæ€»æ•°# è·å–æŸä¸ªé”®çš„é›†åˆæ€»æ•°zcard key# è·å–scoreèŒƒå›´å€¼çš„é›†åˆæ€»æ•°zcount key min max2.7 æœ‰åºé›†åˆçš„äº¤å¹¶æ“ä½œ æŒ‡ä»¤æ ¼å¼# å°†numkeyä¸ªé›†åˆ çš„äº¤é›†ä¿å­˜åˆ°destination ä¸­ï¼Œåˆå¹¶ä¹‹åçš„æ–°é›†åˆä¸­ï¼Œscoreå€¼è¢«ç›¸åŠ zinterstore destination numkey key [key1...]# å°†numkeyä¸ªé›†åˆ çš„å¹¶é›†ä¿å­˜åˆ°destination ä¸­zunionstore destination numkey key [key1...] äº¤é›†æ“ä½œæŒ‡ä»¤ç¤ºä¾‹æˆ‘ä»¬å…ˆæ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤æ·»åŠ æµ‹è¯•æ•°æ®# æ·»åŠ æ•°æ®åˆ°s1ä¸­zadd s1 50 aa 60 bb 70 cc# æ·»åŠ æ•°æ®åˆ°s2ä¸­zadd s2 60 aa 70 bb 90 cc# æ·»åŠ æ•°æ®åˆ°s3ä¸­zadd s3 70 aa 70 bb 100 ccå°†ä»¥ä¸Šæ˜¯é‚£ä¸ªé›†åˆçš„äº¤é›†ä¿å­˜åˆ° ss ä¸­# æ±‚s1ã€s2ã€s3çš„äº¤é›† ä¿å­˜åˆ° ss ä¸­zinterstore ss 3 s1 s2 s3# æ‰“å° ss ä¸­çš„æ•°æ®zrange ss 0 -1 withscoresæ­¤æ—¶å¯ä»¥çœ‹åˆ°è¿”å›çš„æ•°æ®å¦‚ä¸‹å›¾æ‰€ç¤ºæ­¤æ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸€ä¸ªå­—æ®µçš„scoreå€¼è¢«ç›¸åŠ èµ·æ¥ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šäº¤å‰çš„å…ƒç´  å–æœ€å¤§å€¼(max)è¿˜æ˜¯ æœ€å°å€¼(min)ï¼Œè€Œä¸æ˜¯ æ±‚å’Œå€¼(sum)ï¼Œå¦‚ä¸‹æŒ‡ä»¤# æ±‚ s1ã€s2ã€s3 çš„äº¤é›†ä¿å­˜åˆ° ss1 ä¸­ï¼Œå–äº¤å‰å…ƒç´ çš„æœ€å¤§å€¼zinterstore ss1 3 s1 s2 s3 aggregate max# æ±‚ s1ã€s2ã€s3 çš„äº¤é›†ä¿å­˜åˆ° ss2 ä¸­ï¼Œå–äº¤å‰å…ƒç´ çš„æœ€å°å€¼zinterstore ss2 3 s1 s2 s3 aggregate minåˆ†åˆ«å– ss1 å’Œ ss2 çš„ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºä¸‰ã€sorted_set æ•°æ®ç±»å‹çš„æ‰©å±•æ“ä½œ3.1 éœ€æ±‚æ¡ˆä¾‹å‡è®¾æœ‰ä»¥ä¸‹çš„éœ€æ±‚ å„ç±»èµ„æºç½‘ç«™TOP 10æ’è¡Œæ¦œï¼ˆç”µå½±ã€æ­Œæ›²ã€æ–‡æ¡£ã€ç”µå•†ã€æ¸¸æˆç­‰ï¼‰ èŠå¤©å®¤çš„æ´»è·ƒåº¦ç»Ÿè®¡ æ¸¸æˆå¥½å‹äº²å¯†åº¦3.2 è§£å†³æ–¹æ¡ˆä½¿ç”¨ æœ‰åºé›†åˆ å¯¹æ‰€æœ‰å‚ä¸æ’åçš„èµ„æºå»ºç«‹æ’åºä¾æ®ï¼Œç›¸å…³æ“ä½œæŒ‡ä»¤å¦‚ä¸‹ è·å–æ•°æ®å¯¹åº”ç´¢å¼•çš„æ’å# æ ¹æ®score å€¼ä»å°åˆ°å¤§æ­£å‘æŸ¥è¯¢ æ’åzrank key member# æ ¹æ®score å€¼ä»å¤§åˆ°å°å€’å‘æŸ¥è¯¢ æ’åzrevrank key member scoreå€¼è·å–ä¸ä¿®æ”¹# æ ¹æ®keyå’Œmemberè·å–scoreå€¼zscore key member# å¯¹ key ä¸­çš„ member å…ƒç´ å¢åŠ  increment ä¸ªå•ä½çš„ score å€¼ zincrby key increment member ç¤ºä¾‹# æ·»åŠ æµ‹è¯•æ•°æ®zadd movies 143 aa 97 bb 201 ccå››ã€sorted_set ç±»å‹æ•°æ®æ“ä½œçš„æ³¨æ„äº‹é¡¹ score ä¿å­˜çš„å­˜å‚¨ç©ºé—´æ˜¯64ä½ï¼Œå¦‚æœæ˜¯æ•´æ•°ï¼Œæ•°å€¼èŒƒå›´æ˜¯ -9007199254740992 ~ 9007199254740992 score ä¿å­˜çš„æ•°æ®ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåŒç²¾åº¦çš„doubleå€¼ï¼ŒåŸºäºåŒç²¾åº¦æµ®ç‚¹æ•°çš„ç‰¹å¾ï¼Œå¯èƒ½ä¼šä¸¢å¤±ç²¾åº¦ï¼Œä½¿ç”¨çš„æ—¶å€™è¦æ…é‡ sorted_set åº•å±‚å­˜å‚¨è¿˜æ˜¯åŸºäºsetç»“æ„çš„ï¼Œå› æ­¤æ•°æ®ä¸èƒ½é‡å¤ï¼Œå¦‚æœé‡å¤æ·»åŠ ç›¸åŒçš„æ•°æ®ï¼Œscoreå€¼å°†ä¼šè¢«è¦†ç›–ï¼Œä¿ç•™æœ€åä¸€æ¬¡ä¿å­˜çš„ç»“æœäº”ã€sorted_set åº”ç”¨äºå¤„ç†å®šæ—¶çš„é¡ºåºä»»åŠ¡ å¯¹äºåŸºäºæ—¶é—´çº¿é™å®šçš„ä»»åŠ¡å¤„ç†ï¼Œå°†å¤„ç†æ—¶é—´è®°å½•ä¸ºscore å€¼ï¼Œåˆ©ç”¨æ’åºåŠŸèƒ½åŒºåˆ†å¤„ç†çš„å…ˆåé¡ºåºï¼› è®°å½•ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„æ—¶é—´ï¼Œå½“åˆ°æœŸåå¤„ç†å¯¹åº”çš„ä»»åŠ¡ï¼Œä»»åŠ¡å¤„ç†å®Œæˆä¹‹åç§»é™¤redisä¸­å¯¹åº”çš„è®°å½•ï¼Œå¹¶è®°å½•ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„æ—¶é—´ï¼› å½“æ–°ä»»åŠ¡åŠ å…¥æ—¶ï¼Œåˆ¤å®šå¹¶æ›´æ–°ä¸‹ä¸€ä¸ªè¦å¤„ç†çš„ä»»åŠ¡æ—¶é—´ï¼› ä¸ºäº†æå‡sorted_setçš„æ€§èƒ½ï¼Œé€šå¸¸å°†ä»»åŠ¡æ ¹æ®ç‰¹å¾å­˜å‚¨æˆè‹¥å¹²ä¸ªsorted_setã€‚ä¾‹å¦‚ä¸€å°æ—¶å†…ã€ä¸€å¤©å†…ã€ä¸€å‘¨å†…ã€ä¸€ä¸ªæœˆå†…ã€å­£åº¦å†…ã€å¹´åº¦å†…ç­‰ï¼Œæ“ä½œæ—¶é€çº§æå‡ï¼Œå°†å³å°†æ“ä½œçš„è‹¥å¹²ä¸ªä»»åŠ¡çº³å…¥åˆ°1å°æ—¶å†…å¤„ç†çš„é˜Ÿåˆ—ä¸­ã€‚redisä¸­è·å–ç³»ç»Ÿæ—¶é—´çš„æŒ‡ä»¤timeå…­ã€sorted_set åº”ç”¨äºå¤„ç†æœ‰æƒé‡çš„é˜Ÿåˆ—ä»»åŠ¡6.1 æ™®é€šæƒé‡ä»»åŠ¡çš„å¤„ç†å½“ä»»åŠ¡æˆ–è€…æ¶ˆæ¯å¾…å¤„ç†ï¼Œå½¢æˆäº†ä»»åŠ¡é˜Ÿåˆ—æˆ–è€…æ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œå¯¹äºé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡è¦ä¿éšœå¯¹å…¶ä¼˜å…ˆå¤„ç†ã€‚æˆ‘ä»¬åˆ©ç”¨sorted_setçš„ç‰¹å¾ï¼Œå³å¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¯¹äºæœ‰æƒé‡çš„ä»»åŠ¡ï¼Œä¼˜å…ˆå¤„ç†æƒé‡é«˜çš„ä»»åŠ¡ï¼Œé‡‡ç”¨scoreè®°å½•æƒé‡å³å¯ã€‚å¦‚ä¸‹æŒ‡ä»¤æ·»åŠ æµ‹è¯•æ•°æ®# æ·»åŠ æƒé‡ä¸º 4 çš„idä¸º105è®¢å•ä»»åŠ¡zadd tasks 4 order:id:105# æ·»åŠ æƒé‡ä¸º 9 çš„idä¸º425è®¢å•ä»»åŠ¡zadd tasks 9 order:id:425# æ·»åŠ æƒé‡ä¸º 1 çš„idä¸º1345è®¢å•ä»»åŠ¡zadd tasks 1 order:id:345æ ¹æ®æƒé‡ä»é«˜åˆ°ä½æŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨zrevrange tasks 0 -1 withscoresåœ¨å®é™…çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€æŒ¨æ¡ä»»åŠ¡å–å‡ºæ¥å¤„ç†ï¼Œä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡zrevrange tasks 0 0 withscoresæˆ‘ä»¬å¾—åˆ°çš„ä»»åŠ¡å…ƒç´ æ˜¯ order:id:425 ï¼Œä»»åŠ¡å¤„ç†å®Œæˆä¹‹åï¼Œå°†å¯¹åº”å…ƒç´ ç§»é™¤å³å¯ï¼Œå¦‚ä¸‹æŒ‡ä»¤zrem tasks order:id:425ä¸è¿‡ï¼Œä»¥ä¸Šçš„æ“ä½œä¸æ˜¯åŸå­æ€§ï¼ˆè¦ä¹ˆå…¨éƒ¨æ‰§è¡ŒæˆåŠŸè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¤±è´¥ï¼‰çš„ï¼Œæˆ‘ä»¬è¿™é‡Œæš‚ä¸”ä¸è®¨è®ºéåŸå­æ€§æ“ä½œå¸¦æ¥çš„åæœï¼Œåé¢çš„ç« èŠ‚ä¼šè¯´æ˜ã€‚6.2 å¤šé‡æƒé‡ä»»åŠ¡çš„å¤„ç†å¦‚æœæƒé‡æ¡ä»¶è¿‡å¤šæ—¶ï¼Œéœ€è¦å¯¹æ’åºscoreå€¼è¿›è¡Œå¤„ç†ï¼Œä¿éšœscoreå€¼èƒ½å¤Ÿå…¼å®¹2ä¸ªæ¡ä»¶æˆ–è€…å¤šä¸ªæ¡ä»¶ï¼Œä¾‹å¦‚å¤–è´¸è®¢å•ä¼˜å…ˆäºå›½å†…è®¢å•ï¼Œæ€»è£è®¢å•ä¼˜å…ˆäºå‘˜å·¥è®¢å•ï¼Œç»ç†è®¢å•ä¼˜å…ˆäºå‘˜å·¥è®¢å•ã€‚è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼šå› scoreé•¿åº¦å—é™ï¼Œéœ€è¦å¯¹æ•°æ®è¿›è¡Œæˆªæ–­å¤„ç†ï¼Œå°¤å…¶æ˜¯æ—¶é—´è®¾ç½®ä¸ºå°æ—¶æˆ–åˆ†é’Ÿçº§åˆ«å³å¯ã€‚å…ˆè®¾å®šè®¢å•åˆ—è¡¨ï¼Œåè®¾å®šå‘èµ·è§’è‰²ç±»åˆ«ï¼Œæ•´ä½“scoreé•¿åº¦å¿…é¡»æ˜¯ç»Ÿä¸€çš„ï¼Œä¸è¶³åˆ™è¡¥0ã€‚ç¬¬ä¸€æ’åºè§„åˆ™é¦–ä½ä¸å¾—æ˜¯0ç¤ºä¾‹ï¼šå¤–è´¸101ï¼Œå›½å†…102ï¼Œç»ç†104ï¼Œå‘˜å·¥008ã€‚é‚£ä¹ˆå‘˜å·¥ä¸‹çš„å¤–è´¸å•ä¸º101008ï¼Œç»ç†ä¸‹çš„å›½å†…è®¢å•ä¸º102004" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬7ç¯‡-setæ•°æ®ç±»å‹çš„åŸºæœ¬æ“ä½œ", "url": "/posts/redis_set.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:57:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬å­˜åœ¨è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œä¸”éœ€è¦åœ¨æŸ¥è¯¢ä¸Šè¦æ±‚æ›´é«˜çš„æ•ˆç‡ã€‚ä¼¼ä¹å‰é¢æåˆ°çš„æ•°æ®ç±»å‹å·²ä¸æ»¡è¶³æˆ‘ä»¬ç°æœ‰çš„éœ€æ±‚ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå…¨æ–°çš„æ¦‚å¿µï¼šsetæ•°æ®ç±»å‹ã€‚ä¸hashå­˜å‚¨ç»“æ„ç±»ä¼¼ï¼Œä½†æ˜¯ä»…å­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ï¼ˆnilï¼‰ï¼Œå¹¶ä¸”ä¸é‡å¤å­˜å‚¨ã€‚æœ¬ç¯‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸ƒç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»ä¹‹å‰çš„å†…å®¹01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡...", "content": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬å­˜åœ¨è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬éœ€è¦å­˜å‚¨å¤§é‡çš„æ•°æ®ï¼Œä¸”éœ€è¦åœ¨æŸ¥è¯¢ä¸Šè¦æ±‚æ›´é«˜çš„æ•ˆç‡ã€‚ä¼¼ä¹å‰é¢æåˆ°çš„æ•°æ®ç±»å‹å·²ä¸æ»¡è¶³æˆ‘ä»¬ç°æœ‰çš„éœ€æ±‚ï¼Œåœ¨æœ¬ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªå…¨æ–°çš„æ¦‚å¿µï¼šsetæ•°æ®ç±»å‹ã€‚ä¸hashå­˜å‚¨ç»“æ„ç±»ä¼¼ï¼Œä½†æ˜¯ä»…å­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ï¼ˆnilï¼‰ï¼Œå¹¶ä¸”ä¸é‡å¤å­˜å‚¨ã€‚æœ¬ç¯‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬ä¸ƒç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»ä¹‹å‰çš„å†…å®¹01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯•03-rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹04-rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œ05-rediså…¥é—¨çŸ¥è¯†ç¬¬5ç¯‡-hashæ•°æ®ç±»å‹ä¸åŸºæœ¬æ“ä½œ06-rediså…¥é—¨çŸ¥è¯†ç¬¬6ç¯‡-list ç±»å‹ä»¥åŠåŸºæœ¬æ“ä½œäºŒã€setç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ2.1. æ“ä½œæŒ‡ä»¤ æ·»åŠ æ•°æ®sadd key member1 [member2] è·å–å…¨éƒ¨æ•°æ®smembers key åˆ é™¤æ•°æ®srem key member1 [member2] è·å–é›†åˆæ•°æ®æ€»æ•°scard key åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŒ‡å®šæ•°æ®sismember key member2.2 éœ€æ±‚æ¡ˆä¾‹ï¼šè®¿é—®ç»Ÿè®¡å…¬å¸æ——ä¸‹æ–°çš„ç½‘ç«™åšæ¨å¹¿ï¼Œç»Ÿè®¡ç½‘ç«™çš„ PVï¼ˆè®¿é—®é‡ï¼‰ï¼ŒUVï¼ˆç‹¬ç«‹è®¿å®¢ï¼‰ï¼ŒIPï¼ˆç‹¬ç«‹ IPï¼‰PVï¼šç½‘ç«™è¢«è®¿é—®æ¬¡æ•°ï¼Œå¯é€šè¿‡åˆ·æ–°ç•Œé¢æäº¤è®¿é—®é‡UVï¼šç½‘ç«™è¢«ä¸åŒç”¨æˆ·è®¿é—®çš„æ¬¡æ•°ï¼Œå¯é€šè¿‡ cookie ç»Ÿè®¡è®¿é—®é‡ï¼Œç›¸åŒç”¨æˆ·åˆ‡æ¢ IP åœ°å€ï¼ŒUV ä¸å˜IPï¼šç½‘ç«™è¢«ä¸åŒ IP åœ°å€è®¿é—®çš„æ€»æ¬¡æ•°ï¼Œå¯é€šè¿‡ IP åœ°å€ç»Ÿè®¡è®¿é—®é‡ï¼Œç›¸åŒ IP ä¸åŒç”¨æˆ·è®¿é—®ï¼ŒIP ä¸å˜ è§£å†³æ–¹æ¡ˆ-ï¼ˆ1ï¼‰åˆ©ç”¨ set é›†åˆå¯¹æ•°æ®å»é‡ç‰¹å¾ï¼Œè®°å½•å„ç§è®¿é—®æ•°æ®ï¼ˆ2ï¼‰åˆ©ç”¨ string ç±»å‹æ•°æ®ï¼Œåˆ©ç”¨ incr ç»Ÿè®¡æ—¥è®¿é—®é‡ï¼ˆ3ï¼‰å»ºç«‹ set æ¨¡å‹ï¼Œè®°å½•ä¸åŒ cookie æ•°é‡ï¼ˆUVï¼‰ï¼ˆ4ï¼‰å»ºç«‹ set æ¨¡å‹ï¼Œè®°å½•ä¸åŒ IP æ•°é‡ï¼ˆIPï¼‰å¦‚è®°å½•ä¸åŒçš„ IPï¼Œç¤ºä¾‹æŒ‡ä»¤å¦‚ä¸‹sadd ips 1.2.3.4sadd ips 2.3.4.5sadd ips 2.3.4.5è™½ç„¶æˆ‘ä»¬è®°å½•äº† 3 æ¬¡ IP åœ°å€ï¼Œä½†æœ‰ä¸¤æ¬¡ IP åœ°å€æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸€å…±æœ‰ä¸¤ä¸ª IPï¼Œä½¿ç”¨scard ipsæŒ‡ä»¤å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç»“æœ(integer) 2ä¸‰ã€setç±»å‹æ•°æ®çš„éšæœºæ•°æ®æ“ä½œ3.1 æ“ä½œæŒ‡ä»¤ éšæœºè·å–é›†åˆä¸­æŒ‡å®šæ•°é‡çš„æ•°æ®srandmember key [count] éšæœºè·å–é›†åˆä¸­çš„æŒ‡å®šæ•°é‡çš„æ•°æ® å¹¶ å°†è¯¥æ•°æ®è¿ç§»å‡ºé›†åˆspop key [count]3.2 éœ€æ±‚æ¡ˆä¾‹ï¼šçƒ­é—¨æ¨èå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šæ¯ä½ç”¨æˆ·é¦–æ¬¡ä½¿ç”¨æ–°é—»APPæ—¶ï¼Œä¼šæ¨èä¸‰é¡¹çš„çˆ±å¥½å†…å®¹ã€‚ä½†æ˜¯åæœŸä¸ºäº†å¢åŠ ç”¨æˆ·çš„æ´»è·ƒåº¦ã€å…´è¶£ç‚¹ï¼Œå¿…é¡»è®©ç”¨æˆ·å¯¹å…¶ä»–ä¿¡æ¯ç±»åˆ«é€æ¸äº§ç”Ÿå…´è¶£ï¼Œå¢åŠ å®¢æˆ·å­˜ç•™åº¦ï¼Œå¦‚ä½•å®ç°ï¼Ÿ è§£å†³æ–¹æ¡ˆï¼ˆ1ï¼‰ç³»ç»Ÿåˆ†æå‡ºå„ä¸ªåˆ†ç±»çš„æœ€æ–°çƒ­ç‚¹ä¿¡æ¯æ¡ç›®å¹¶ç»„ç»‡æˆ set é›†åˆï¼ˆ2ï¼‰éšæœºæŒ‘é€‰éƒ¨åˆ†ä¿¡æ¯ï¼ˆ3ï¼‰é…åˆç”¨æˆ·å…³æ³¨ä¿¡æ¯åˆ†ç±»ä¸­çš„çƒ­ç‚¹ä¿¡æ¯ç»„ç»‡æˆå±•ç¤ºçš„å…¨ä¿¡æ¯é›†åˆé€šè¿‡ redis çš„éšæœºç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å°† redis åº”ç”¨äºéšæœºç±»ä¿¡æ¯çš„æ£€ç´¢ï¼Œä¾‹å¦‚ç‚¹æ­Œå•æ¨èï¼Œçƒ­ç‚¹ä¿¡æ¯æ¨èï¼Œçƒ­å–æ—…æ¸¸è·¯çº¿ï¼Œåº”ç”¨ APP æ¨èï¼Œå¤§ V æ¨èç­‰ç­‰ã€‚å››ã€setç±»å‹æ•°æ®çš„æ•°æ®å¯¹æ¯”(äº¤ã€å¹¶ã€å·®)æ“ä½œ4.1 æ“ä½œæŒ‡ä»¤åœ¨redisä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ“ä½œæŒ‡ä»¤è¿›è¡Œé›†åˆæ“ä½œ æ±‚é›†åˆçš„äº¤ã€å¹¶ã€å·®é›†# æ±‚äº¤å‰çš„æ•°æ®sinter key1 [key2...]# æ±‚åˆå¹¶çš„æ•°æ®sunion key1 [key2...]# æ±‚ç›¸å·®çš„æ•°æ®ï¼Œæœ‰æ–¹å‘æ€§ï¼Œç”¨key1çš„é›†åˆ å‡å»key1ä¸key2çš„å¹¶é›†ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯å·®é›†sdiff key1 [key2...] æ±‚é›†åˆçš„äº¤ã€å¹¶ã€å·®ï¼Œå¹¶å­˜å‚¨åˆ°æŒ‡å®šçš„é›†åˆä¸­sinterstore desination key1 [key2...]sunionstore desination key1 [key2...]sdiffstore desination key1 [key2...]ç¤ºä¾‹ï¼š å°† u1 ä¸ u2 çš„äº¤é›†å­˜åˆ° u3sinterstore u3 u1 u2 å°†æŒ‡å®šæ•°æ®ä»åŸå§‹æ•°æ®é›†åˆä¸­ç§»åŠ¨åˆ°ç›®æ ‡é›†åˆsmove source destination memberç¤ºä¾‹ï¼š å°† u2 çš„ w1 ç§»åˆ° u1smove u2 u1 w14.2 éœ€æ±‚æ¡ˆä¾‹å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹éœ€æ±‚ç¤¾äº¤APPä¸ºäº†ä¿ƒè¿›ç”¨æˆ·ä¹‹é—´çš„äº¤æµï¼Œéœ€è¦è®©æ¯ä½ç”¨æˆ·æ‹¥æœ‰å¤§é‡çš„å¥½å‹ï¼Œå¦‚ä½•å¿«é€Ÿä¸ºç”¨æˆ·ç§¯ç´¯æ›´å¤šçš„å¥½å‹ï¼Ÿç¤¾åŒºAPPä¸ºäº†å¢åŠ ç”¨æˆ·çƒ­åº¦ï¼Œæé«˜ç”¨æˆ·å­˜ç•™æ€§ï¼Œéœ€è¦ç”¨æˆ·åœ¨å…³æ³¨æ›´å¤šçš„äººï¼Œä»¥æ­¤è·å¾—æ›´å¤šçš„ä¿¡æ¯æˆ–çƒ­é—¨è¯é¢˜ï¼Œå¦‚ä½•æé«˜ç”¨æˆ·å…³æ³¨ä»–äººçš„æ€»é‡ï¼Ÿå¤–å–APPä¸ºäº†æå‡æˆå•é‡ï¼Œå¿…é¡»å¸®åŠ©ç”¨æˆ·æŒ–æ˜ç¾é£Ÿéœ€æ±‚ï¼Œå¦‚ä½•æ¨èç”¨æˆ·æœ€é€‚åˆè‡ªå·±çš„ç¾é£Ÿï¼Ÿ4.3 è§£å†³æ–¹æ¡ˆå¯¹ç”¨æˆ·åŒç±»çš„ä¿¡æ¯è¿›è¡Œå…³è”æœç´¢ï¼ŒäºŒåº¦å…³è”æœç´¢ï¼Œæ·±åº¦å…³è”æœç´¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ æ˜¾ç¤ºå…±åŒå…³æ³¨ï¼ˆä¸€åº¦æ£€ç´¢ï¼‰ æ˜¾ç¤ºå…±åŒå¥½å‹ï¼ˆä¸€åº¦æ£€ç´¢ï¼‰ ç”±ç”¨æˆ· A å‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ· B çš„å¥½å‹ä¿¡æ¯åˆ—è¡¨ï¼ˆä¸€åº¦æ£€ç´¢ï¼‰ ç”±ç”¨æˆ· A å‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ· B çš„è´­ç‰©æ¸…å•åˆ—è¡¨ï¼ˆäºŒåº¦æ£€ç´¢ï¼‰ ç”±ç”¨æˆ· A å‡ºå‘ï¼Œè·å–åˆ°å¥½å‹ç”¨æˆ· B çš„æ¸¸æˆå……å€¼åˆ—è¡¨ï¼ˆäºŒåº¦æ£€ç´¢ï¼‰äº”ã€ç»¼åˆæ¡ˆä¾‹ï¼šä½¿ç”¨ redis å®ç°é‰´æƒæ ¡éªŒ5.1 æ³¨æ„äº‹é¡¹å¯¹äº set æ•°æ®ç±»å‹ï¼Œæˆ‘ä»¬è¦æ³¨æ„ä»¥ä¸‹äº‹é¡¹ï¼š set ä¸å…è®¸æ•°æ®é‡å¤ï¼Œå¦‚æœæ·»åŠ çš„æ•°æ®åœ¨ set ä¸­å·²ç»å­˜åœ¨ï¼Œå°†åªä¿ç•™ä¸€ä»½ set è™½ç„¶ä¸ hash çš„å­˜å‚¨ç»“æ„ç›¸ä¼¼ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨ hash ä¸­å­˜å‚¨å€¼çš„ç©ºé—´ 5.2 éœ€æ±‚æ¡ˆä¾‹é›†å›¢å…¬å¸å…±æœ‰ 12000 åå‘˜å·¥ï¼Œå†…éƒ¨ OA ç³»ç»Ÿå…·æœ‰ 700 å¤šä¸ªè§’è‰²ï¼Œ3000 å¤šä¸ªä¸šåŠ¡æ“ä½œï¼Œæ¯ä½å‘˜å·¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè§’è‰²ï¼Œå¦‚ä½•å¿«é€Ÿè¿›è¡Œä¸šåŠ¡æ“ä½œçš„æƒé™æ ¡éªŒï¼Ÿ5.3. è§£å†³æ–¹æ¡ˆ ä¾èµ– set é›†åˆæ•°æ®ä¸é‡å¤çš„ç‰¹å¾ï¼Œä¾èµ– set é›†åˆ hash å­˜å‚¨ç»“æ„ç‰¹å¾å®Œæˆæ•°æ®è¿‡æ»¤ä¸å¿«é€ŸæŸ¥è¯¢ ç‰¹å¾ æ ¹æ®ç”¨æˆ· id è·å–ç”¨æˆ·æ‰€æœ‰çš„è§’è‰² æ ¹æ®ç”¨æˆ·æ‰€æœ‰è§’è‰²è·å–ç”¨æˆ·æ‰€æœ‰ æ“ä½œæƒé™ æ”¾å…¥ set é›†åˆ æ ¹æ®ç”¨æˆ·æ‰€æœ‰è§’è‰²è·å–ç”¨æˆ·æ‰€æœ‰ æ•°æ®æƒé™ æ”¾å…¥ set é›†åˆæ“ä½œè¿‡ç¨‹å¦‚ä¸‹ç¤ºä¾‹# ç»™001è§’è‰²æ·»åŠ 2ä¸ªæƒé™ï¼šgetallã€getByIdsadd rid:001 getallsadd rid:001 getById# ç»™002è§’è‰²æ·»åŠ 3ä¸ªæƒé™ï¼šgetCountã€getallã€insertsadd rid:002 getCountsadd rid:002 getallsadd rid:002 insert# å°†ä¸¤ä¸ªè§’è‰²æ‰€æœ‰æƒé™çš„äº¤é›†ä¿å­˜ç»™ 007 ç”¨æˆ·sunionstore uid:007 rid:001 rid:002# è¿™æ—¶å€™æŸ¥è¯¢ 007 ç”¨æˆ·çš„æƒé™åˆ—è¡¨smembers uid:007å¯ä»¥çœ‹åˆ°ç”¨æˆ· 007 å…·æœ‰å·²ç»åŒ…å«å’Œ 001 è§’è‰²å’Œ 002 è§’è‰²çš„æ‰€æœ‰æƒé™ï¼Œå¦‚ä¸‹ï¼š1) \"getCount\"2) \"insert\"3) \"getall\"4) \"getById\"å½“ç„¶ï¼Œé™¤äº†æŸ¥è¯¢å¤„ç”¨æˆ· 007 çš„æ‰€æœ‰æƒé™ï¼Œæˆ‘ä»¬è¿˜èƒ½æ£€éªŒ 007 æ˜¯å¦å…·æœ‰å…·ä½“æŸä¸ªæƒé™ï¼Œå¦‚ä¸‹æŒ‡ä»¤sismember uid:007 insertè¿™æ˜¯è¿”å›ç»“æœå¦‚ä¸‹(integer) 1å¯ä»¥çœ‹åˆ° uid:007 è¿™ä¸ªé›†åˆåŒ…å« insert è¿™ä¸ªå…ƒç´ ï¼Œå¯ä»¥è¯æ˜ 007 è¿™ä¸ªç”¨æˆ·å…·æœ‰ insert æƒé™5.4 æ ¡éªŒå·¥ä½œredis æä¾›åŸºç¡€çš„æ•°æ®è¿˜æ˜¯æä¾›æœ€ç»ˆçš„æ ¡éªŒç»“æœï¼Ÿæ ¹æ®ä¸Šé¢çš„æƒé™æ ¡éªŒç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šé¢ä¸¤ç§æ–¹å¼æ£€éªŒç”¨æˆ·æ˜¯å¦å…·æœ‰æŸä¸ªæƒé™ã€‚ ç¬¬ä¸€ç§ï¼šå…ˆæ‹¿æ•°æ®å†åˆ°ä¸šåŠ¡é€»è¾‘è¿›è¡Œæ ¡éªŒ ç¬¬äºŒç§ï¼šæ˜¯ç›´æ¥æŠŠä¸šåŠ¡æ ¡éªŒçš„å·¥ä½œç›´æ¥èåˆåˆ°æ•°æ®æŸ¥è¯¢é‡Œæ¥äº†ï¼Œå¯ä»¥è¯´æ˜¯ç›´æ¥å–æ ¡éªŒç»“æœæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ç¬¬ä¸€ç§è¿˜æ˜¯ç¬¬äºŒç§ï¼Œä½†æ˜¯åœ¨å¤§å‹çš„æ¨¡å—åŒ–åº”ç”¨ä¸­ï¼Œæ›´é¼“åŠ±å¤§å®¶ä½¿ç”¨ ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä»¥è¾¾åˆ° æ•°æ®è¯»å– ä¸ ä¸šåŠ¡é€»è¾‘ çš„åˆ†ç¦»ã€‚" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬6ç¯‡-listæ•°æ®ç±»å‹ä¸åŸºæœ¬æ“ä½œ", "url": "/posts/redis_list.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:56:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬å­˜å‚¨å¤šä¸ªæ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›å…¥å­˜å‚¨ç©ºé—´çš„é¡ºåºè¿›è¡ŒåŒºåˆ†ã€‚å‰é¢ä»‹ç»çš„æ•°æ®ç±»å‹å·²ç»ä¸æ»¡è¶³æˆ‘ä»¬ç°æœ‰çš„éœ€æ±‚ï¼Œäºæ˜¯å¼•å…¥ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ â€“ list ï¼Œlist ä¹Ÿå¯ä»¥å«åˆ—è¡¨ï¼Œ èƒ½ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ç»“æ„å®ç°ï¼ˆé“¾è¡¨å±äºã€Šæ•°æ®ç»“æ„ã€‹çš„å½’å±è¯¾ç¨‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸å†èµ˜è¿°ï¼‰ã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬å…­ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—é“¾æ¥é˜…è¯»å¾€æœŸçš„ç¯‡ç« ï¼š01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-red...", "content": "ä¸€ã€æ¦‚è¿°å‡è®¾æˆ‘ä»¬æœ‰è¿™æ ·çš„éœ€æ±‚ï¼šæˆ‘ä»¬å­˜å‚¨å¤šä¸ªæ•°æ®ï¼Œå¹¶å¯¹æ•°æ®è¿›å…¥å­˜å‚¨ç©ºé—´çš„é¡ºåºè¿›è¡ŒåŒºåˆ†ã€‚å‰é¢ä»‹ç»çš„æ•°æ®ç±»å‹å·²ç»ä¸æ»¡è¶³æˆ‘ä»¬ç°æœ‰çš„éœ€æ±‚ï¼Œäºæ˜¯å¼•å…¥ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹ â€“ list ï¼Œlist ä¹Ÿå¯ä»¥å«åˆ—è¡¨ï¼Œ èƒ½ä¿å­˜å¤šä¸ªæ•°æ®ï¼Œåº•å±‚ä½¿ç”¨åŒå‘é“¾è¡¨å­˜å‚¨ç»“æ„å®ç°ï¼ˆé“¾è¡¨å±äºã€Šæ•°æ®ç»“æ„ã€‹çš„å½’å±è¯¾ç¨‹ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œä¸å†èµ˜è¿°ï¼‰ã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬å…­ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—é“¾æ¥é˜…è¯»å¾€æœŸçš„ç¯‡ç« ï¼š01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯•03-rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹04-rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œ05-rediså…¥é—¨çŸ¥è¯†ç¬¬5ç¯‡-hashæ•°æ®ç±»å‹ä¸åŸºæœ¬æ“ä½œäºŒã€list ç±»å‹æ•°æ®åŸºæœ¬æ“ä½œ æ·»åŠ /ä¿®æ”¹æ•°æ®å‘½ä»¤æ ¼å¼# ä»å·¦è¾¹æ”¾æ•°æ®lpush key value1 [value2] ...# ä»å³è¾¹æ”¾æ•°æ®rpush key value1 [value2] ...ç¤ºä¾‹ï¼Œå¾€å³è¾¹ æ·»åŠ  a b c ä¸‰ä¸ªæ•°æ®åˆ° list é”®ä¸­RPUSH list a b c æŸ¥è¯¢æ•°æ®å‘½ä»¤æ ¼å¼# æ ¹æ®ç´¢å¼•èŒƒå›´æŸ¥è¯¢æ•°æ®lrange key start stop# æ ¹æ®ç´¢å¼•æŸ¥è¯¢æ•°æ®lindex key index# æŸ¥çœ‹listçš„é•¿åº¦llen keyç¤ºä¾‹ï¼ŒæŸ¥è¯¢ç¬¬ä¸€ä¸ªå…ƒç´ ï¼š list ä¸­ç´¢å¼•ä» 0 å¼€å§‹åˆ° 1 çš„å…ƒç´ LRANGE list 0 1æŸ¥è¯¢æ‰€æœ‰å…ƒç´ ï¼š list ä¸­ç´¢å¼•ä» 0 å¼€å§‹åˆ° å€’æ•°ç¬¬ 1 çš„å…ƒç´ LRANGE list 0 -1 è·å–å¹¶ç§»é™¤æ•°æ®å‘½ä»¤æ ¼å¼# ä»å·¦è¾¹å‡ºæ•°æ®lpop key# ä»å³è¾¹å‡ºæ•°æ®rpop keyä¸‰ã€list ç±»å‹æ•°æ®æ‰©å±•æ“ä½œ è§„å®šæ—¶é—´å†…è·å–å¹¶ç§»é™¤æ•°æ®å‘½ä»¤æ ¼å¼# é˜»å¡å¼ä»listå·¦è¾¹å–æ•°æ®blpop key1 [key2] ... timeout# é˜»å¡å¼ä»listå³è¾¹å–æ•°æ®brpop key1 [key2] ... timeoutç¤ºä¾‹ï¼Œä»key1 åˆ—è¡¨ä¸­ï¼Œæˆ– key2 åˆ—è¡¨ä¸­ï¼Œæˆ– key3 åˆ—è¡¨ä¸­ï¼Œé˜»å¡å¼ å–å‡ºåˆ—è¡¨æ•°æ®ï¼Œé˜»å¡ç­‰å¾…æ—¶é—´æ˜¯ 200 ç§’ã€‚ä¸‹é¢è¿™æ¡æŒ‡ä»¤çš„åŠŸèƒ½æ˜¯ï¼šä»ä¸‰ä¸ªåˆ—è¡¨ä¸­ä»»æ„å–ä¸€ä¸ªæ•°æ®æ•°æ®ï¼Œä»key1 å¼€å§‹å–ï¼Œå¦‚æœ key1 æ²¡æœ‰æ•°æ®åˆ™ä» key2 å–ï¼Œ key2 æ²¡æœ‰åˆ™ä» key3 å–ã€‚å¦‚æœéƒ½æ²¡æœ‰ redis ä¼šç­‰å¾… 200 ç§’ï¼Œå¦‚æœåœ¨ 200 ç§’å†…æ²¡æœ‰å–åˆ°ï¼Œå°†ä¼š è¿”å› nilBRPOP key1 key2 key2 200 ç§»é™¤æŒ‡å®šæ•°æ®åº”ç”¨æ¡ˆä¾‹ï¼š å¾®ä¿¡æœ‹å‹åœˆç‚¹èµï¼Œè¦æ±‚æŒ‰ç…§ç‚¹èµé¡ºåºæ˜¾ç¤ºç‚¹èµå¥½å‹ä¿¡æ¯ã€‚å¦‚æœå–æ¶ˆç‚¹èµï¼Œç§»é™¤å¯¹åº”çš„å¥½å‹ä¿¡æ¯ã€‚è¿™å°±å°±ç”¨åˆ°æˆ‘ä»¬å°†è¯´çš„ï¼Œç§»é™¤æŒ‡å®šæ•°æ®ã€‚æŒ‡ä»¤æ ¼å¼# ç§»é™¤æŒ‡å®šä¸ªæ•°çš„æ•°æ®lrem key count valueç¤ºä¾‹# æ·»åŠ 9ä¸ªæ•°æ®åˆ°001åˆ—è¡¨ä¸­RPUSH 001 a b c d e d e f g# ç§»é™¤1ä¸ªâ€dâ€œLREM 001 1 d# ç§»é™¤2ä¸ªâ€eâ€œLREM 001 2 eæœ€åé€šè¿‡LRANGE 001 0 -1å‘½ä»¤æŸ¥è¯¢ç»“æœå¦‚ä¸‹1) \"a\"2) \"b\"3) \"c\"4) \"d\"5) \"f\"6) \"g\"æ€»ç»“ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ list çš„ç‰¹æ€§ï¼Œå¯ä»¥å°† redis åº”ç”¨äºæ“ä½œå…·æœ‰å…ˆåé¡ºåºçš„æ•°æ®æ§åˆ¶å››ã€redisæ•°æ®æ³¨æ„äº‹é¡¹ list ä¸­ä¿å­˜çš„æ•°æ®éƒ½æ˜¯ string ç±»å‹ï¼Œæ•°æ®æ€»é‡æ˜¯æœ‰é™çš„ï¼Œæœ€å¤š 2 çš„ 32 æ¬¡æ–¹å‡ 1 ä¸ªå…ƒç´ ï¼ˆ4294967295ï¼‰ list å…·æœ‰ç´¢å¼•çš„æ¦‚å¿µï¼Œä½†æ˜¯æ“ä½œæ•°æ®æ—¶é€šå¸¸ä»¥é˜Ÿåˆ—çš„å½¢å¼è¿›è¡Œå…¥é˜Ÿå‡ºé˜Ÿæ“ä½œï¼Œæˆ–è€…æ ˆçš„å½¢å¼è¿›è¡Œå…¥æ ˆå‡ºæ ˆæ“ä½œ è·å–å…¨éƒ¨æ•°æ®æ“ä½œç»“æŸç´¢å¼•è®¾ç½®ä¸º-1 list å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†é¡µæ“ä½œï¼Œé€šå¸¸ç¬¬ä¸€é¡µçš„ä¿¡æ¯æ¥è‡ª listï¼Œç¬¬ 2 é¡µåŠæ›´å¤šçš„ä¿¡æ¯é€šè¿‡æ•°æ®åº“çš„å½¢å¼åŠ è½½ " }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œ", "url": "/posts/redis_string.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:55:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°redis æœ€å¸¸åº”ç”¨äºå„ç§ç»“æ„ç±»å‹å’Œéç»“æ„ç±»å‹é«˜çƒ­åº¦æ•°æ®çš„è®¿é—®åŠ é€Ÿã€‚åœ¨æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä» redis ä¸­ string æ•°æ®ç±»å‹å¼€å§‹äº†è§£ redis å¯¹æ•°æ®çš„å­˜å–æ“ä½œã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—çš„ç¬¬å››ç¯‡åŸåˆ›ç¬”è®°ï¼Œå¦‚æœä½ è¿˜æ²¡é˜…è¯»ä¹‹å‰çš„éƒ¨åˆ†ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯» 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹ 02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯• ...", "content": "ä¸€ã€æ¦‚è¿°redis æœ€å¸¸åº”ç”¨äºå„ç§ç»“æ„ç±»å‹å’Œéç»“æ„ç±»å‹é«˜çƒ­åº¦æ•°æ®çš„è®¿é—®åŠ é€Ÿã€‚åœ¨æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä» redis ä¸­ string æ•°æ®ç±»å‹å¼€å§‹äº†è§£ redis å¯¹æ•°æ®çš„å­˜å–æ“ä½œã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—çš„ç¬¬å››ç¯‡åŸåˆ›ç¬”è®°ï¼Œå¦‚æœä½ è¿˜æ²¡é˜…è¯»ä¹‹å‰çš„éƒ¨åˆ†ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯» 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹ 02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯• 03-rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹ äºŒã€string ç±»å‹çš„ç‰¹å¾ å­˜å‚¨çš„æ•°æ®ï¼šå•ä¸ªæ•°æ®ï¼Œæœ€ç®€å•çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„å­˜å‚¨ç±»å‹ å­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜ä¸€ä¸ªæ•°æ® å­˜å‚¨ç©ºé—´ï¼šé€šå¸¸ä½¿ç”¨å­—ç¬¦ä¸²ï¼Œå¦‚æœå­˜å‚¨çš„å­—ç¬¦æ˜¯æ•°å€¼çš„å½¢å¼ï¼Œå¯ä»¥ä½¿ç”¨æ•°å€¼æ“ä½œï¼ˆæ¯”å¦‚å¢åŠ æŒ‡å®šå€¼ã€å‡å°‘æŒ‡å®šå€¼ï¼‰çš„åŠŸèƒ½ ä¸‰ã€string ç±»å‹çš„åŸºæœ¬æ“ä½œ æ·»åŠ /ä¿®æ”¹æ•°æ®set key value è·å–æ•°æ®get key åˆ é™¤æ•°æ®del key æ·»åŠ /ä¿®æ”¹å¤šä¸ªæ•°æ®ï¼ˆM å³ multipleï¼‰mset key1 value1 key2 value2 ... è·å–å¤šä¸ªæ•°æ®mget key1 key2 ... è·å–æ•°æ®å­—ç¬¦ä¸ªæ•°strlen key è¿½åŠ ä¿¡æ¯åˆ°åŸå§‹æ•°æ®æœ«å°¾ï¼ˆå¦‚åŸå§‹å­˜åœ¨åˆ™è¿½åŠ ï¼Œå¦åˆ™æ–°å»ºï¼‰å¦‚æœ key å·²ç»å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ APPEND å‘½ä»¤å°†æŒ‡å®šçš„ value è¿½åŠ åˆ°è¯¥ key åŸæ¥å€¼ï¼ˆvalueï¼‰çš„æœ«å°¾ã€‚append key valueå››ã€å•æ•°æ®æ“ä½œ ä¸ å¤šæ•°æ®æ“ä½œçš„å¯¹æ¯”4.1 æŒ‡ä»¤ è®¾ç½®å•æ¡æ•°æ®ï¼šset key value è®¾ç½®å¤šæ¡æ•°æ®ï¼šmset key1 value1 key2 value24.2 æ“ä½œæ—¶é—´å·®å‡è®¾æ¯æ‰§è¡Œä¸€ä¸ªåŠ¨ä½œéœ€è¦ä¸€ä¸ªæ—¶é—´å•ä½ï¼Œé‚£ä¹ˆæ‰§è¡Œä¸€æ¬¡å‘½ä»¤ï¼Œéœ€è¦çš„æ—¶é—´å•ä½ä¸ºï¼šå‘é€æ‰§è¡Œå‘½ä»¤ï¼ˆå¾€ï¼‰çš„æ—¶é—´ + æ‰§è¡Œçš„æ—¶é—´ + è¿”å›ç»“æœï¼ˆè¿”ï¼‰çš„æ—¶é—´ï¼Œä¸€å…±éœ€è¦ 3 ä¸ªæ—¶é—´å•ä½ã€‚ å•æ•°æ®æ“ä½œï¼Œæ‰§è¡Œ 3 æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ï¼šå¾€è¿” 6 ä¸ªå•ä½ + æ‰§è¡Œ 3 ä¸ª å¤šæ•°æ®æ“ä½œï¼Œæ‰§è¡Œ 3 æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ï¼šå¾€è¿” 2 ä¸ªå•ä½ + æ‰§è¡Œ 3 ä¸ª äº”ã€stringæ•°å€¼ç±»å‹æ•°æ®çš„æ“ä½œè®¾ç½®æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šçš„å€¼# å¯¹keyçš„å€¼å¢åŠ 1ä¸ªå•ä½incr key# æŒ‡å®šå¯¹keyçš„å€¼å¢åŠ incrementä¸ªå•ä½incrby key increment# æŒ‡å®šå¯¹keyçš„å€¼å¢åŠ incrementå€¼ï¼Œincrementå¯ä»¥æ˜¯floatç±»å‹çš„å€¼incrbyfloat key incrementè®¾ç½®æ•°å€¼æ•°æ®å‡å°‘æŒ‡å®šçš„å€¼# å¯¹keyçš„å€¼å‡å°‘1ä¸ªå•ä½decr key# æŒ‡å®šå¯¹keyçš„å€¼å‡å°incrementä¸ªå•ä½decrby key incrementstring åœ¨ redis ä¸­å†…éƒ¨å­˜å‚¨é»˜è®¤å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“é‡åˆ°å¢å‡ç±»æ“ä½œ incrï¼Œdecr æ—¶ä¼šè½¬æˆæ•°å€¼å‹è¿›è¡Œè®¡ç®—ã€‚redis æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ï¼Œé‡‡ç”¨å•çº¿ç¨‹å¤„ç†æ‰€æœ‰çš„ä¸šåŠ¡ï¼Œå‘½ä»¤æ˜¯ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œçš„ï¼Œå› æ­¤æ— éœ€è€ƒè™‘å¹¶å‘å¸¦æ¥çš„æ•°æ®å½±å“ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŒ‰æ•°å€¼è¿›è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹æ•°æ®ä¸èƒ½è½¬æˆæ•°å€¼ï¼Œæˆ–è¶…è¶Š redis æ•°å€¼çš„ä¸Šé™èŒƒå›´ï¼Œå°†ä¼šæŠ¥é”™ã€‚redisä¸­æ•°å€¼æ•°æ®æœ€å¤§å€¼ä¸º 9223372036854775807ï¼ˆjava ä¸­ long å‹æ•°æ®çš„æœ€å¤§å€¼ï¼ŒLong.MAX_VALUEï¼‰åœ¨å¤§å‹ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œå› ä¸ºå¤§é‡çš„æ•°æ®ï¼Œæ‰€ä»¥é€šå¸¸ä½¿ç”¨åˆ†è¡¨çš„æ–¹å¼å­˜å‚¨æ•°æ®ã€‚åœ¨ä½¿ç”¨å¤šå¼ è¡¨å­˜å‚¨åŒç±»å‹æ•°æ®ä¸­ï¼Œå¯¹åº”çš„ä¸»é”® id å¿…é¡»ä¿è¯ç»Ÿä¸€æ€§ï¼Œä¸èƒ½é‡å¤ã€‚Oracle æ•°æ®åº“å…·æœ‰ sequence è®¾å®šï¼Œå¯ä»¥è§£å†³è¯¥é—®é¢˜ï¼Œä½†æ˜¯ MySQL æ•°æ®åº“å¹¶ä¸å…·æœ‰æ­¤ç±»æœºåˆ¶ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ string æ•°å€¼ç±»å‹çš„å¢åŠ æ“ä½œè·å¾—ä¸‹ä¸€ä¸ªå€¼ï¼Œå†ä½œä¸ºå…³ç³»æ•°æ®åº“ä¸­çš„ä¸»é”®å€¼ã€‚å…­ã€è®¾ç½®stringç±»å‹æ•°æ®çš„æœ‰æ•ˆæœŸä»¥ä¸‹æœ‰å‡ ä¸ªä¾‹å­ï¼ˆ1ï¼‰ï¼šâ€œæœ€å¼ºå¥³ç”Ÿâ€å¯åŠ¨æµ·é€‰æŠ•ç¥¨ï¼Œåªèƒ½é€šè¿‡å¾®ä¿¡æŠ•ç¥¨ï¼Œæ¯ä¸ªå¾®ä¿¡å·æ¯ 4 ä¸ªå°æ—¶åªèƒ½æŠ• 1 ç¥¨ã€‚ï¼ˆ2ï¼‰ï¼šç”µå•†å•†å®¶å¼€å¯çƒ­é—¨å•†å“æ¨èï¼Œçƒ­é—¨å•†å“ä¸èƒ½ä¸€ç›´å¤„äºçƒ­é—¨æœŸï¼Œæ¯ç§å•†å“çƒ­é—¨æœŸç»´æŒ 3 å¤©ï¼Œ3 å¤©åè‡ªåŠ¨å–æ¶ˆçƒ­é—¨ã€‚ï¼ˆ3ï¼‰ï¼šæ–°é—»ç½‘ç«™ä¼šå‡ºç°çƒ­ç‚¹æ–°é—»ï¼Œçƒ­ç‚¹æ–°é—»æœ€å¤§çš„ç‰¹å¾æ˜¯å®æ•ˆæ€§ï¼Œå¦‚ä½•è‡ªåŠ¨æ§åˆ¶çƒ­ç‚¹æ–°é—»çš„æ—¶æ•ˆæ€§ã€‚ è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®æ•°æ®å…·æœ‰æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸ# ä»¥ç§’ä¸ºå•ä½è®¾ç½®keyçš„å€¼setex key seconds value# ä»¥æ¯«ç§’ä¸ºå•ä½è®¾ç½®keyçš„å€¼psetex key millisenconds value æŸ¥çœ‹keyæœ‰ç”Ÿå‘½å‘¨æœŸçš„æ•°æ®# ä»¥ç§’ä¸ºå•ä½æŸ¥è¯¢keyå‰©ä½™çš„ç”Ÿå‘½å‘¨æœŸttl key# ä»¥æ¯«ç§’ä¸ºå•ä½æŸ¥è¯¢keyå‰©ä½™çš„ç”Ÿå‘½å‘¨æœŸpttl keyredis æ§åˆ¶æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡æ•°æ®æ˜¯å¦å¤±æ•ˆæ§åˆ¶ä¸šåŠ¡è¡Œä¸ºï¼Œé€‚ç”¨äºæœ‰æ‰€å…·æœ‰æ—¶æ•ˆæ€§é™å®šæ§åˆ¶çš„æ“ä½œã€‚ä¸ƒã€redis æ“ä½œåé¦ˆæ•°æ®ç±»å‹æ“ä½œä¸æˆåŠŸçš„åé¦ˆä¸æ•°æ®æ­£å¸¸æ“ä½œçš„åé¦ˆçš„æœ‰æŸ¥è¯¢ï¼Œå¦‚ä¸‹ è¡¨ç¤ºè¿è¡Œç»“æœæ˜¯å¦æˆåŠŸï¼ˆintegerï¼‰0 -&gt; false å¤±è´¥ï¼ˆintegerï¼‰1 -&gt; true æˆåŠŸ è¡¨ç¤ºç»“æœå€¼ï¼ˆintegerï¼‰3 -&gt; 3 ä¸ªï¼ˆintegerï¼‰1 -&gt; 1 ä¸ª è¡¨ç¤ºæ•°æ®æœªè·å–åˆ°ï¼ˆnilï¼‰ç­‰åŒäº nullæ•°æ®æœ€å¤§å­˜å‚¨é‡ä¸º512mï¼Œè€Œæ•°å€¼è®¡ç®—æœ€å¤§èŒƒå›´ï¼ˆjava ä¸­çš„ long çš„æœ€å¤§å€¼ï¼‰ä¸º-9223372036854775807 åˆ° 9223372036854775807å…«ã€redisä¸­keyçš„å‘½åå»ºè®®redisç”¨äºç¼“å­˜çƒ­ç‚¹æ•°æ®ï¼Œä½†æ•°æ®æœ€ç»ˆå­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œredisä¸€èˆ¬ç”¨äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®ç¼“å­˜ã€‚æ‰€ä»¥åœ¨ç»™ç¼“å­˜keyå‘½åæ—¶æœ€å¥½è¦è¯­æ„åŒ–ï¼Œè§„èŒƒåŒ–ã€‚å¦‚ä¸‹åˆ— key -&gt; value é”®å€¼å¯¹ä¾‹å­ã€‚ ç”¨æˆ·çš„ç²‰ä¸æ•°ï¼šuser:id:100:fans -&gt; 123355 ç”¨æˆ·çš„åšå®¢æ•°ï¼šuser:id:100:blogs -&gt; 99 ç”¨æˆ·çš„å…³æ³¨æ•°ï¼šuser:id:100:focus -&gt; 83ä¸Šé¢çš„ç¤ºä¾‹æ˜¯å­˜å‚¨ç”¨æˆ·çš„å•ä¸ªå­—æ®µä¿¡æ¯ï¼Œåœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥éœ€è¦å­˜å‚¨ç”¨æˆ·çš„å®Œæˆä¿¡æ¯ï¼Œé‚£ä¹ˆä¸­é€šå¸¸ä»¥ json æ ¼å¼å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚ä¸‹ key -&gt; value ç¤ºä¾‹ ç”¨æˆ·çš„ä¿¡æ¯ï¼šuser:id:100 -&gt; {\"id\":100,\"name\":\"æ˜¥æ™š\",\"fans\":12355,\"blogs\":99,\"focus:83}" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œ", "url": "/posts/redis_hash.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:55:00 +0800", "snippet": "ä¸€ã€hashç±»å‹æ•°æ®æ¦‚è¿°æˆ‘ä»¬å…ˆæ¥çœ‹è¿™ä¸ªä¾‹å­åœ¨ä¸Šä¸€èŠ‚æˆ‘ä»¬ä¸€èµ·äº†è§£äº† string å­˜å‚¨ç±»å‹ã€‚ä½†æ˜¯å¦‚æœæ˜¯å¯¹è±¡æ•°æ®çš„å­˜å‚¨å…·æœ‰è¾ƒé¢‘ç¹çš„æ›´æ–°éœ€æ±‚ï¼Œæ“ä½œä¼šæ˜¾å¾—ç¬¨é‡ã€‚ä¾‹å¦‚ï¼šuser:id:100 -&gt; {\"id\":100,\"name\":\"æ˜¥æ™š\",\"fans\":12355,\"blogs\":99,\"focus:83}ï¼Œå¦‚æœéœ€è¦æ›´æ–°ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±€éƒ¨æ•°æ®ï¼Œå°±éœ€è¦æ›¿æ¢æ‰æ‰€æœ‰æ•°æ®ï¼Œäºæ˜¯æœ‰äº†ä»¥ä¸‹çš„éœ€æ±‚æ–°çš„éœ€æ±‚ï¼šå¯¹...", "content": "ä¸€ã€hashç±»å‹æ•°æ®æ¦‚è¿°æˆ‘ä»¬å…ˆæ¥çœ‹è¿™ä¸ªä¾‹å­åœ¨ä¸Šä¸€èŠ‚æˆ‘ä»¬ä¸€èµ·äº†è§£äº† string å­˜å‚¨ç±»å‹ã€‚ä½†æ˜¯å¦‚æœæ˜¯å¯¹è±¡æ•°æ®çš„å­˜å‚¨å…·æœ‰è¾ƒé¢‘ç¹çš„æ›´æ–°éœ€æ±‚ï¼Œæ“ä½œä¼šæ˜¾å¾—ç¬¨é‡ã€‚ä¾‹å¦‚ï¼šuser:id:100 -&gt; {\"id\":100,\"name\":\"æ˜¥æ™š\",\"fans\":12355,\"blogs\":99,\"focus:83}ï¼Œå¦‚æœéœ€è¦æ›´æ–°ä¸€ä¸ªå¯¹è±¡ä¸­çš„å±€éƒ¨æ•°æ®ï¼Œå°±éœ€è¦æ›¿æ¢æ‰æ‰€æœ‰æ•°æ®ï¼Œäºæ˜¯æœ‰äº†ä»¥ä¸‹çš„éœ€æ±‚æ–°çš„éœ€æ±‚ï¼šå¯¹ä¸€ç³»åˆ—å­˜å‚¨çš„æ•°æ®è¿›è¡Œç¼–ç»„ï¼Œæ–¹ä¾¿ç®¡ç†ï¼Œæ¯”å¦‚å­˜å‚¨ä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯éœ€è¦çš„å­˜å‚¨ç»“æ„ï¼šä¸€ä¸ªå­˜å‚¨ç©ºé—´ä¿å­˜å¤šä¸ªé”®å€¼å¯¹æ•°æ®å¦‚ä¸‹å›¾ï¼šä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥æ–°çš„æ•°æ®ç±»å‹ï¼šhashã€‚åŒæ—¶ hash å­˜å‚¨ç»“æ„ä¹Ÿåšäº†ä»¥ä¸‹ä¼˜åŒ– å¦‚æœ field æ•°é‡è¾ƒå°ï¼Œå­˜å‚¨ç»“æ„ä¼˜åŒ–ä¸ºç±»æ•°ç»„ç»“æ„ å¦‚æœ field æ•°é‡è¾ƒå¤šï¼Œå­˜å‚¨ç»“æ„ä½¿ç”¨ HashMap ç»“æ„æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—æ–‡ç« çš„ç¬¬äº”ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—é“¾æ¥é˜…è¯»å¾€æœŸçš„ç¯‡ç« 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯•03-rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹04-rediså…¥é—¨çŸ¥è¯†ç¬¬4ç¯‡-redisä¸­çš„stringæ•°æ®ç±»å‹ä¸åŸºæœ¬çš„æ•°æ®å­˜å–æ“ä½œäºŒã€hash ç±»å‹æ•°æ®çš„åŸºæœ¬æ“ä½œ ä¿®æ”¹/æ·»åŠ æ•°æ®hset key field value æŸ¥è¯¢å•ä¸ªå­—æ®µ/æŸ¥è¯¢æ‰€æœ‰å­—æ®µ# æŸ¥è¯¢å•ä¸ªå­—æ®µæ•°æ®hget key field# æŸ¥è¯¢æ‰€æœ‰æ•°æ®hgetall key åˆ é™¤æ“ä½œhdel key field1 [field2] ä¿®æ”¹/æ·»åŠ å¤šä¸ªæ•°æ®hmset key field1 value1 field2 value2 è¿”å› hash è¡¨ä¸­ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šå­—æ®µçš„å€¼hmget key field1 field2 è·å– hash è¡¨ä¸­å­—æ®µçš„æ•°é‡hlen key è·å– hash è¡¨ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„å­—æ®µhexists key fieldä¸‰ã€hash ç±»å‹æ•°æ®çš„æ‰©å±•æ“ä½œ è·å– hash è¡¨ä¸­æ‰€æœ‰å­—æ®µåæˆ–å­—æ®µå€¼hkey keyhvals key è®¾ç½®æŒ‡å®šå­—ç¬¦æ®µçš„æ•°å€¼æ•°æ®å¢åŠ æŒ‡å®šèŒƒå›´çš„å€¼hincrby key field incrementhincrbyfloat key field incrementhash ç±»å‹æ•°æ®æ“ä½œæ³¨æ„äº‹é¡¹ hash ç±»å‹ä¸‹çš„ value åªèƒ½å­˜å‚¨å­—ç¬¦ä¸²ï¼Œä¸å…è®¸å­˜å‚¨å…¶ä»–æ•°æ®ç±»å‹ï¼Œä¸å­˜åœ¨åµŒå¥—å¯¹è±¡ã€‚å¦‚æœæ•°æ®æœªè·å–åˆ°ï¼Œå¯¹åº”çš„ç»“æœä¸º(nil)ï¼› æ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2 çš„ 32 æ¬¡æ–¹å‡ 1 ä¸ªé”®å€¼å¯¹ï¼› hash ç±»å‹ååˆ†è´´è¿‘å¯¹è±¡çš„æ•°æ®å­˜å‚¨å½¢å¼ï¼Œå¹¶ä¸”å¯ä»¥çµæ´»æ·»åŠ åˆ é™¤å¯¹è±¡å±æ€§ï¼Œä½† hash è®¾è®¡åˆè¡·ä¸æ˜¯ä¸ºäº†å­˜å‚¨å¤§é‡å¯¹è±¡è€Œè®¾è®¡ï¼Œåˆ‡è®°ä¸å¯æ»¥ç”¨ï¼Œæ›´ä¸å¯ä»¥å°† hash ä½œä¸ºå¯¹è±¡åˆ—è¡¨ä½¿ç”¨ï¼› hgetall æ“ä½œå¯ä»¥è·å–å…¨éƒ¨å±æ€§ï¼Œå¦‚æœå†…éƒ¨ field è¿‡å¤šï¼Œéå†æ•´ä¸ªæ•°æ®æ•ˆç‡ä¼šå¾ˆä½ï¼Œæœ‰å¯èƒ½æˆä¸ºæ•°æ®è®¿é—®ç“¶é¢ˆã€‚ å››ã€hashçš„åº”ç”¨æ¡ˆä¾‹4.1 ç”¨hashå®ç°è´­ç‰©è½¦ æ¦‚è¿°åœ¨è¿™é‡Œæˆ‘ä»¬ä¸è®¨è®ºè´­ç‰©è½¦ä¸æ•°æ®åº“é—´çš„æŒä¹…åŒ–åŒæ­¥ï¼Œä¹Ÿä¸è®¨è®ºè´­ç‰©è½¦ä¸è®¢å•ä¹‹é—´çš„å…³ç³»ï¼ŒåŒæ—¶å¿½ç•¥æœªç™»å½•ç”¨æˆ·è´­ç‰©è½¦ä¿¡æ¯å­˜å‚¨ã€‚æˆ‘ä»¬ä»…ä»…æ˜¯ç”¨ redis çš„å­˜å‚¨æ¨¡å‹æ¥ å¯¹è´­ç‰©è½¦ çš„æ¡ç›®è¿›è¡Œ æ·»åŠ ã€æµè§ˆã€æ›´æ”¹æ•°é‡ã€åˆ é™¤ã€æ¸…ç©º å®ç°æ–¹æ¡ˆï¼ˆ1ï¼‰ä»¥å®¢æˆ· id ä½œä¸º keyï¼Œæ¯ä½ç”¨æˆ·åˆ›å»ºä¸€ä¸ª hash å­˜å‚¨ç»“æ„å¯¹åº”è´­ç‰©è½¦ä¿¡æ¯ï¼ˆ2ï¼‰å°†å•†å“ç¼–å·ä½œä¸º fieldï¼Œè´­ä¹°æ•°é‡ä½œä¸º value è¿›è¡Œå­˜å‚¨ï¼ˆ3ï¼‰æ·»åŠ å•†å“ï¼šè¿½åŠ å…¨æ–°çš„ field äº valueï¼ˆ4ï¼‰æµè§ˆå•†å“ï¼šéå† hashï¼ˆ5ï¼‰æ›´æ”¹æ•°é‡ï¼šè‡ªå¢/è‡ªå‡ï¼Œè®¾ç½® value å€¼ï¼ˆ6ï¼‰åˆ é™¤å•†å“ï¼šåˆ é™¤ fieldï¼ˆ7ï¼‰æ¸…ç©ºï¼šåˆ é™¤ keyç¤ºä¾‹ä»£ç å¦‚ä¸‹# 001 ç”¨æˆ·è´­ä¹° IDä¸º101å•†å“ 100ä»¶ï¼ŒIDä¸º102çš„å•†å“ 200ä»¶hmset 001 101 100 102 200# 002 ç”¨æˆ·è´­ä¹° IDä¸º102å•†å“ 1ä»¶ï¼ŒIDä¸º104çš„å•†å“ 7ä»¶hmset 002 102 1 104 7 å•†å“ä¿¡æ¯åŠ é€Ÿå½“å‰ä»…ä»…æ˜¯å°†æ•°é‡å­˜å‚¨åˆ° redis ä¸­ï¼Œå¹¶æ²¡æœ‰èµ·åˆ°åŠ é€Ÿä½œç”¨ï¼Œå› ä¸ºå•†å“ä¿¡æ¯è¿˜éœ€è¦æŸ¥è¯¢æ•°æ®åº“ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆè§£å†³ï¼šæ¯æ¡è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯è®°å½•ä¿å­˜ä¸ºä¸¤ä¸ª field field1 ä¸“é—¨ç”¨äºä¿å­˜æ•°é‡å‘½åæ ¼å¼ï¼šå•†å“ id:numsä¿å­˜æ•°æ®ï¼šæ•°å€¼ field2 ä¸“é—¨ç”¨äºä¿å­˜è´­ç‰©è½¦ä¸­æ˜¾ç¤ºçš„å•†å“ä¿¡æ¯ï¼ŒåŒ…å«æ–‡å­—æè¿°ï¼Œå›¾ç‰‡åœ°å€ï¼Œæ‰€å±å•†å®¶ä¿¡æ¯ç­‰å‘½åæ ¼å¼ï¼šå•†å“ id:infoä¿å­˜æ•°æ®ï¼šjsonç¤ºä¾‹ä»£ç å¦‚ä¸‹# 001 ç”¨æˆ· è´­ä¹° IDä¸º101çš„å•†å“ 2ä»¶ï¼Œå•†å“çš„ä¿¡æ¯ä¸ºï¼š{\"name\":\"good name\"} hmset 001 101:num 2 101:info \"{\\\"name\\\":\\\"goods name\\\"}\"# 002 ç”¨æˆ· è´­ä¹° IDä¸º101çš„å•†å“ 1ä»¶ï¼Œå•†å“çš„ä¿¡æ¯ä¸ºï¼š{\"name\":\"good name\"} hmset 002 101:num 1 101:info \"{\\\"name\\\":\\\"goods name\\\"}\"åœ¨ä¸Šé¢çš„101:info å¯¹åº”çš„å€¼ä¸­ï¼Œå­—ç¬¦ä¸²åŒ…å«äº†ç©ºæ ¼ï¼Œæ‰€ä»¥ç”¨åŒå¼•å·å¼•ç”¨èµ·æ¥ï¼Œè¾¾åˆ°è½¬ä¹‰çš„ç›®çš„ã€‚ å•†å“ä¿¡æ¯ç‹¬ç«‹ä¿å­˜ç”±äº field2 å¯èƒ½åœ¨å¤šæ¡å•†å“è®°å½•ä¸­å­˜åœ¨ï¼Œå›º field2 é‡Œçš„æ•°æ®å¯ä¿å­˜åˆ°ç‹¬ç«‹çš„ hashã€‚æ­¤æ—¶ï¼Œå¦‚æœæ¯æ·»åŠ ä¸€æ¡è´­ç‰©è½¦è®°å½•ï¼Œå°±ä¿å­˜ä¸€æ¬¡ hash æ•°æ®ï¼Œæ˜¾ç„¶æ˜¯ä¸åˆç†çš„ï¼Œå¯ä»¥é€šè¿‡hsetnxæ“ä½œæ¥ä¿å­˜æ•°æ®ï¼Œå¦‚æœæ•°æ®å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œä¿å­˜æ“ä½œã€‚å‘½ä»¤æ ¼å¼å¦‚ä¸‹hsetnx key field valueä»£ç ç¤ºä¾‹å¦‚ä¸‹# å°†idä¸º101 çš„å•†å“ç‹¬ç«‹å­˜èµ·æ¥hsetnx info 101 \"{\\\"name\\\":\\\"goods name\\\"}\"4.2 ç”¨hashå®ç°æŠ¢è´­æ¡ˆä¾‹ï¼šåŒ 11 æ´»åŠ¨æ—¥ï¼Œé”€å”®æ‰‹æœºå……å€¼å¡çš„å•†å®¶å¯¹ç§»åŠ¨ã€è”é€šã€ç”µä¿¡çš„ 30 å…ƒã€50 å…ƒã€100 å…ƒå•†å“æ¨å‡ºæŠ¢è´­æ´»åŠ¨ï¼Œæ¯ç§å•†å“çš„æŠ¢è´­ä¸Šé™ä¸º 100ã€‚ è§£å†³æ–¹æ¡ˆï¼ˆ1ï¼‰ä»¥å•†å®¶ id ä½œä¸º keyï¼ˆ2ï¼‰å°†å‚ä¸æŠ¢è´­çš„å•†å“ä½œä¸º fieldï¼ˆ3ï¼‰å°†å‚ä¸æŠ¢è´­çš„å•†å“æ•°é‡ä½œä¸ºå¯¹åº”çš„ valueï¼ˆ4ï¼‰æŠ¢è´­æ—¶ä½¿ç”¨é™å€¼çš„æ–¹å¼æ§åˆ¶äº§å“æ•°é‡ï¼ˆ5ï¼‰å®é™…ä¸šåŠ¡ä¸­è¿˜æœ‰è¶…å–ç­‰å®é™…é—®é¢˜ï¼Œè¿™é‡Œä¸åšè®¨è®º å®ç°è¿‡ç¨‹å•†å“åˆå§‹ä¿¡æ¯# p01å•†å®¶ä¸‹ï¼Œc30å……å€¼åˆ¸1000å¼ ï¼Œc50å……å€¼åˆ¸1000å¼ ï¼Œc100å……å€¼åˆ¸1000å¼ hmset p01 c30 1000 c50 1000 c100 1000å½“ c30 å”®å‡º1ä»¶æ—¶ï¼Œå€¼å‡ 1ï¼› å½“ c100 å”®å‡º 20 ä»¶æ—¶ï¼Œå€¼å‡ 20ï¼Œå¦‚ä¸‹ä»£ç # p01å•†å®¶ï¼Œå•†å“c30å”®å‡º1ä»¶hincrby p01 c30 -1# p01å•†å®¶ï¼Œå•†å“c100å”®å‡º20ä»¶hincrby p01 c100 -20äº”ã€string å­˜å¯¹è±¡å¯¹æ¯” hash å­˜å¯¹è±¡ string å­˜å‚¨ json å­—ç¬¦ä¸²ï¼šè¯»å–æ–¹ä¾¿ï¼Œåœ¨æ›´æ–°çš„æ—¶å€™ä¼šæ•´ä½“è¿›è¡Œæ›´æ–° hash å­˜å¯¹è±¡å…·ä½“çš„å­—æ®µï¼šæ›´æ–°çµæ´» å¼•å…¥ hash æ•°æ®ç±»å‹ä¹‹åï¼Œæˆ‘ä»¬å°±è§£å†³äº† string å­˜å‚¨å¯¹è±¡ï¼Œæ›´æ–°å¯¹è±¡æ—¶éœ€è¦æ•´ä½“æ›´æ–°çš„é—®é¢˜ã€‚" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬3ç¯‡-redisçš„åŸºæœ¬æ“ä½œä¸æ•°æ®ç±»å‹", "url": "/posts/redis_basic-operation-and-data-type.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:54:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨æˆ‘çš„å‰ä¸¤ç¯‡ç¬”è®°ä¸­ï¼Œä»‹ç»äº†redisçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠå®‰è£…äº†redisçš„å­¦ä¹ ç¯å¢ƒã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥ç†Ÿæ‚‰ redis çš„åŸºæœ¬æ“ä½œã€‚redisæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥è®©ç¨‹åºé«˜æ•ˆåœ°è¯»å–ã€‚ä½†å®ƒä¹Ÿèƒ½å°†æ•°æ®å†™å…¥ç¡¬ç›˜å†…è¿›è¡Œæ°¸ä¹…ä¿å­˜ï¼Œåœ¨è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬é€æ¸ç†Ÿæ‚‰rediså¯¹æ•°æ®çš„æ“ä½œã€‚å¦‚æœä½ è¿˜æ²¡é˜…è¯»è¿‡ä¹‹å‰çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»å‰é¢çš„éƒ¨åˆ† 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€...", "content": "ä¸€ã€æ¦‚è¿°åœ¨æˆ‘çš„å‰ä¸¤ç¯‡ç¬”è®°ä¸­ï¼Œä»‹ç»äº†redisçš„åŸºæœ¬æ¦‚å¿µï¼Œä»¥åŠå®‰è£…äº†redisçš„å­¦ä¹ ç¯å¢ƒã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥ç†Ÿæ‚‰ redis çš„åŸºæœ¬æ“ä½œã€‚redisæ•°æ®å­˜åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥è®©ç¨‹åºé«˜æ•ˆåœ°è¯»å–ã€‚ä½†å®ƒä¹Ÿèƒ½å°†æ•°æ®å†™å…¥ç¡¬ç›˜å†…è¿›è¡Œæ°¸ä¹…ä¿å­˜ï¼Œåœ¨è¿™ç¯‡æ–‡ç« å¼€å§‹ï¼Œæˆ‘ä»¬é€æ¸ç†Ÿæ‚‰rediså¯¹æ•°æ®çš„æ“ä½œã€‚å¦‚æœä½ è¿˜æ²¡é˜…è¯»è¿‡ä¹‹å‰çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥é˜…è¯»å‰é¢çš„éƒ¨åˆ† 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹ 02-rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯• äºŒã€redisçš„åŸºæœ¬æ“ä½œ2.1 æ·»åŠ æ•°æ®è¿›å…¥rediså‘½ä»¤è¡Œæ¨¡å¼./src/redis-cliè®¾ç½® keyã€value æ•°æ® å‘½ä»¤æ ¼å¼set key value ç¤ºä¾‹set name jkdev2.2 æ•°æ®æŸ¥è¯¢åŠŸèƒ½ï¼šæ ¹æ® key æŸ¥è¯¢å¯¹åº”çš„ valueï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©º ï¼ˆnilï¼‰ å‘½ä»¤æ ¼å¼get key ç¤ºä¾‹get name2.3 æ¸…é™¤å±å¹•ä¿¡æ¯ å‘½ä»¤clearæ´»ç€ æŒ‰Ctrl + L ä¹Ÿå¯ä»¥æ¸…é™¤å±å¹•ä¿¡æ¯2.4 æŸ¥çœ‹å¸®åŠ©æ–‡æ¡£ å‘½ä»¤æ ¼å¼help å‘½ä»¤åç§°help @ç»„å ç¤ºä¾‹ï¼šä½¿ç”¨ help get æŒ‡ä»¤è·å– get æŒ‡ä»¤çš„å¸®åŠ©ï¼Œå¦‚ä¸‹å›¾ ç¤ºä¾‹ï¼šä½¿ç”¨ help @string æŒ‡ä»¤è·å– string ç±»å‹çš„å¸®åŠ©ï¼Œå¦‚ä¸‹å›¾2.5 é€€å‡ºå‘½ä»¤è¡Œæ¨¡å¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨quitæŒ‡ä»¤æˆ–è€…exitæŒ‡ä»¤ï¼Œé€€å‡ºcliå®¢æˆ·ç«¯ä¸‰ã€redisçš„ä½¿ç”¨åœºæ™¯rediså› ä¸ºæ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå³å¯æä¾›é«˜æ€§èƒ½çš„æ•°æ®è¯»å–ä½¿ç”¨ï¼Œå› æ­¤é€šå¸¸ç”¨äºç”¨äºæ•°æ®çš„ç¼“å­˜ã€‚ä»¥ä¸‹æ˜¯redisçš„å¸¸ç”¨åœºæ™¯3.1 åŸå§‹ä¸šåŠ¡è®¾è®¡ ç§’æ€ 618 æ´»åŠ¨ åŒ 11 æ´»åŠ¨ æ’é˜Ÿè´­ç¥¨3.2 è¿è¥å¹³å°ç›‘æ§çš„çªå‘é«˜é¢‘è®¿é—®æ•°æ® çªå‘çš„è¦é—»ï¼Œè¢«å¼ºåŠ¿å…³æ³¨å›´è§‚3.3 é«˜é¢‘ã€å¤æ‚çš„æ•°æ®ç»Ÿè®¡ åœ¨çº¿äººæ•°ä¹Ÿå°±æ˜¯è¯´ï¼Œrediså¯ç”¨äºæ•°æ®çš„é«˜å¹¶å‘åœºæ™¯ï¼Œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ä¸‹ï¼Œç¨‹åºç›´æ¥å­˜å†…å­˜ä¸­è¯»å–æ•°æ®ã€‚å››ã€redis æ•°æ®ç±»å‹åœ¨redisä¸­ï¼Œå¯ä»¥å­˜å‚¨ä¸€ä¸‹5ç§æ•°æ®ç±»å‹ string ï¼ˆå­—ç¬¦ä¸²ï¼Œç±»æ¯” java ä¸­ Stringï¼‰ hash ï¼ˆæ•£åˆ—å€¼ï¼Œç±»æ¯” java ä¸­ HashMapï¼‰ list ï¼ˆåˆ—è¡¨ï¼Œç±»æ¯” java ä¸­ LinkedListï¼‰ set ï¼ˆé›†åˆï¼Œç±»æ¯” java ä¸­ Setï¼‰ sorted_set ï¼ˆæœ‰åºé›†åˆï¼Œç±»æ¯” java ä¸­ TreeSetï¼‰redis è‡ªèº«æ˜¯ä¸€ä¸ªæ˜ å°„ï¼ˆmapï¼‰ï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯é‡‡ç”¨ key:valueï¼ˆé”®å€¼å¯¹ï¼‰ çš„å½¢å¼ï¼Œæ•°æ®ç±»å‹æ˜¯æŒ‡å­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ value çš„ç±»å‹ï¼Œkey æ°¸è¿œæ˜¯å­—ç¬¦ä¸²ã€‚" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬2ç¯‡-redisçš„å®‰è£…ä¸æµ‹è¯•", "url": "/posts/redis_installation.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:52:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ï¼Œä»‹ç»äº†redisçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚åœ¨æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†æ¥å®‰è£… redis çš„å­¦ä¹ ç¯å¢ƒã€‚æˆ‘ä»¬å°†åœ¨Linuxç¯å¢ƒä¸­å®‰è£…redisæœåŠ¡ï¼Œå¦‚æœä½ ç°åœ¨æ²¡æœ‰Linuxç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥å‚è€ƒLinuxè™šæ‹Ÿæœºç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼šä½¿ç”¨Multipasså¿«é€Ÿåˆ›å»ºå’Œç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—ç¬”è®°çš„ç¬¬2ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—é“¾æ¥é˜…è¯»å¾€æœŸçš„ç¯‡ç« ï¼š 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1...", "content": "ä¸€ã€æ¦‚è¿°åœ¨æˆ‘çš„ä¸Šä¸€ç¯‡ç¬”è®°ä¸­ï¼Œä»‹ç»äº†redisçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µã€‚åœ¨æœ¬æ–‡ï¼Œæˆ‘ä»¬å°†æ¥å®‰è£… redis çš„å­¦ä¹ ç¯å¢ƒã€‚æˆ‘ä»¬å°†åœ¨Linuxç¯å¢ƒä¸­å®‰è£…redisæœåŠ¡ï¼Œå¦‚æœä½ ç°åœ¨æ²¡æœ‰Linuxç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªé“¾æ¥å‚è€ƒLinuxè™šæ‹Ÿæœºç¯å¢ƒçš„æ­å»ºæ–¹æ³•ï¼šä½¿ç”¨Multipasså¿«é€Ÿåˆ›å»ºå’Œç®¡ç†Ubuntu Serverè™šæ‹Ÿæœºã€‚æœ¬æ–‡æ˜¯è¯¥ç³»åˆ—ç¬”è®°çš„ç¬¬2ç¯‡ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹åˆ—é“¾æ¥é˜…è¯»å¾€æœŸçš„ç¯‡ç« ï¼š 01-rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹äºŒã€å®‰è£…è¿‡ç¨‹å¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥å»ä¸‹è½½redisçš„æœ€æ–°æºä»£ç http://download.redis.io/releases/åœ¨æ’°å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œredisçš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ä¸º6.2.6ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™æ¬¡å®‰è£…6.2.6 ç‰ˆæœ¬ï¼Œå®‰è£…è¿‡ç¨‹å¦‚ä¸‹wget http://download.redis.io/releases/redis-6.2.6.tar.gz #ä¸‹è½½æºä»£ç tar xzf redis-6.2.6.tar.gz #è§£å‹cd redis-6.2.6 #è¿›å…¥æºç ç›®å½•make #ç¼–è¯‘ä½¿ç”¨ make ç¼–è¯‘å®Œæˆå redis ç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘åçš„ redis æœåŠ¡ç¨‹åº redis-server,è¿˜æœ‰ç”¨äºæµ‹è¯•çš„å®¢æˆ·ç«¯ç¨‹åº redis-cliï¼Œç¼–è¯‘åç”Ÿæˆçš„å¯æ‰§è¡Œç¨‹åºä½äºæºç ç›®å½•ä¸‹çš„ src ç›®å½•ä¸‰ã€æµ‹è¯•æ•°æ®åº“è¿›å…¥ redis ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨redisæœåŠ¡ï¼š./src/redis-server redis.conf #å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶å¦‚æœçœ‹åˆ°å¦‚ä¸‹å›¾çš„æç¤ºï¼Œä»£è¡¨ç¨‹åºæœåŠ¡å¯åŠ¨æˆåŠŸå¯åŠ¨ redis æœåŠ¡è¿›ç¨‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æµ‹è¯•å®¢æˆ·ç«¯ç¨‹åº redis-cli å’Œ redis æœåŠ¡äº¤äº’äº†ã€‚æ­¤æ—¶æˆ‘ä»¬æ‰“å¼€å¦ä¸€çª—å£ï¼Œè¿›å…¥redisçš„ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š# å¯åŠ¨æœåŠ¡./src/redis-cli# è®¾ç½® foo é”®çš„å€¼ä¸º barredis&gt; set foo bar# è¯»å– foo é”®çš„å€¼redis&gt; get fooå¦‚æœå‡ºç°å¦‚ä¸‹å›¾çš„æ‰§è¡Œç»“æœï¼Œä»£è¡¨å®‰è£…æˆåŠŸå››ã€å…³é—­æ•°æ®åº“æœåŠ¡åœ¨3ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† ./src/redis-server redis.conf è¿™æ ·çš„æŒ‡ä»¤å¼€å¯äº†redisæœåŠ¡ï¼Œå¦‚æœéœ€è¦å…³é—­ï¼Œåªéœ€è¦åœ¨å‘½ä»¤è¡Œç»ˆç«¯åŒæ—¶æŒ‰é”®ç›˜ä¸Šçš„ Ctrl + C é”®å³å¯ã€‚å¦‚ä¸‹å›¾æç¤ºä»£è¡¨redisæœåŠ¡å…³é—­æˆåŠŸåœ¨çš„å®é™…ä¸­çš„æœåŠ¡å™¨ä¸Šé€šå¸¸è¿è¡Œå¾ˆå¤šæœåŠ¡ï¼Œä¸ä»…ä»…æ˜¯redisï¼Œäººä»¬ä¸å¯èƒ½ç”¨ä¸€åªç”¨ä¸€ä¸ªç»ˆç«¯ä¸€åªä¿æŒredisä¸€ç›´åœ¨å‰å°è¿è¡Œã€‚å› æ­¤äººä»¬é€šå¸¸ä½¿ç”¨ â€œåå°è¿è¡Œâ€ çš„æ–¹å¼å¯åŠ¨redisæœåŠ¡ã€‚å¦‚ä¸‹å‘½ä»¤./src/redis-server redis.conf &amp;å¯åŠ¨æœåŠ¡ä¹‹åï¼Œåªéœ€è¦å†æŒ‰ä¸€æ¬¡é”®ç›˜ä¸Šçš„Enteré”®ï¼ŒæœåŠ¡å³è¿›å…¥äº†åå°è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ redis-cli -p ç«¯å£å· shutdown çš„å‘½ä»¤æ ¼å¼å…³é—­æœåŠ¡ï¼Œå¦‚ä¸‹ï¼š./src/redis-cli -p 6379 shutdownå¦‚ä¸‹å›¾æç¤ºå†…å®¹ï¼Œä»£è¡¨æœåŠ¡å…³é—­æˆåŠŸäº”ã€ä¿®æ”¹é…ç½®æ–‡ä»¶ redis.confä»¥ä¸‹åˆ—ä¸¾resdiså®‰è£…åæœ€å¸¸ç”¨çš„ä¸¤ä¸ªé…ç½®5.1 è®¾ç½®æ”¯æŒè¿œç¨‹è®¿é—®æ‰¾åˆ°ä»¥ä¸‹ä¸€è¡Œbind 127.0.0.1æ³¨é‡Šæ‰å½“å‰è¡Œå³å¯æ”¯æŒè¿œç¨‹ç™»å½•# bind 127.0.0.15.2 è®¾ç½®å¯†ç æ‰¾åˆ°ä¸‹é¢ä¸€è¡Œ# requirepass foobaredå–æ¶ˆæ³¨é‡Šï¼Œâ€œfoobaredâ€å°±æ˜¯å¯†ç ï¼Œå¯ä»¥æ”¹æˆå…¶ä»–çš„ï¼Œå¦‚æ”¹æˆâ€œmyredisâ€requirepass myredisé‡å¯æœåŠ¡ï¼Œä½¿ç”¨ a å‚æ•°ä¼ å…¥å¯†ç æ‰å¯ä»¥æ­£å¸¸æ“ä½œ./src/redis-cli -a myredis" }, { "title": "rediså…¥é—¨çŸ¥è¯†ç¬¬1ç¯‡-redisç®€ä»‹", "url": "/posts/redis_introduction.html", "categories": "redis", "tags": "", "date": "2023-01-30 23:50:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°æœåŠ¡å™¨è½¯ä»¶é¡¹ç›®çš„ç“¶é¢ˆçš„ä¸€èˆ¬ç”±äºæµ·é‡ç”¨æˆ·å’Œé«˜å¹¶å‘å¼•èµ·ï¼Œå…¶ä¸­ç½ªé­ç¥¸é¦–æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚åŸå› æ˜¯å…³ç³»å‹æ•°æ®åº“å­˜åœ¨ä»¥ä¸‹çš„ç¼ºç‚¹ï¼š æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜ IO æ€§èƒ½ä½ä¸‹ æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿ä¸å¤§è§„æ¨¡é›†ç¾¤ æƒ³è¦è§£å†³è¿™ä¸ªç£ç›˜IOçš„ç“¶é¢ˆï¼Œäºæ˜¯äº§ç”Ÿä¸€ä¸ªè§£å†³æ€è·¯ï¼šé™ä½ç£ç›˜ IOï¼Œè¶Šä½è¶Šå¥½ï¼Œå³ç”¨å†…å­˜å­˜å‚¨ã€‚å»é™¤æ•°æ®å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ï¼Œä¸å­˜å‚¨æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä»…å­˜æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¯´...", "content": "ä¸€ã€æ¦‚è¿°æœåŠ¡å™¨è½¯ä»¶é¡¹ç›®çš„ç“¶é¢ˆçš„ä¸€èˆ¬ç”±äºæµ·é‡ç”¨æˆ·å’Œé«˜å¹¶å‘å¼•èµ·ï¼Œå…¶ä¸­ç½ªé­ç¥¸é¦–æ˜¯å…³ç³»å‹æ•°æ®åº“ã€‚åŸå› æ˜¯å…³ç³»å‹æ•°æ®åº“å­˜åœ¨ä»¥ä¸‹çš„ç¼ºç‚¹ï¼š æ€§èƒ½ç“¶é¢ˆï¼šç£ç›˜ IO æ€§èƒ½ä½ä¸‹ æ‰©å±•ç“¶é¢ˆï¼šæ•°æ®å…³ç³»å¤æ‚ï¼Œæ‰©å±•æ€§å·®ï¼Œä¸ä¾¿ä¸å¤§è§„æ¨¡é›†ç¾¤ æƒ³è¦è§£å†³è¿™ä¸ªç£ç›˜IOçš„ç“¶é¢ˆï¼Œäºæ˜¯äº§ç”Ÿä¸€ä¸ªè§£å†³æ€è·¯ï¼šé™ä½ç£ç›˜ IOï¼Œè¶Šä½è¶Šå¥½ï¼Œå³ç”¨å†…å­˜å­˜å‚¨ã€‚å»é™¤æ•°æ®å…³ç³»ï¼Œè¶Šç®€å•è¶Šå¥½ï¼Œä¸å­˜å‚¨æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä»…å­˜æ•°æ®ã€‚è¿™å°±æ˜¯æˆ‘ä»¬è¯´çš„ NosqläºŒã€ä»€ä¹ˆæ˜¯NoSQLï¼Ÿ2.1 æ¦‚å¿µNoSQL: Not Only SQLï¼ˆæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“ï¼‰ï¼Œä½œä¸ºå…³ç³»å‹æ•°æ®åº“çš„è¡¥å……ã€‚NoSQL çš„ä½œç”¨æ˜¯ï¼šåº”å¯¹åŸºäºæµ·é‡ç”¨æˆ·å’Œæµ·é‡æ•°æ®çš„å‰æä¸‹çš„æ•°æ®å¤„ç†é—®é¢˜ã€‚å…¶å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š å¯æ‰©å®¹ï¼Œå¯æ‰©å…… å¤§é‡æ•°æ®ä¸‹é«˜æ€§èƒ½ çµæ´»çš„æ•°æ®æ¨¡å‹ é«˜å¯ç”¨2.2 å¸¸è§çš„ NoSQL Redis memcache HBase MongoDB2.3 ç”µå•†è§£å†³æ–¹æ³•ï¼ˆ1ï¼‰å•†å“åŸºæœ¬ä¿¡æ¯ï¼šåç§°ã€ä»·æ ¼ã€å‚å•†ï¼Œè¿™ç±»ç»“æ„åŒ–ä¿¡æ¯ä¸€èˆ¬å­˜åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå¦‚MySQLï¼ˆ2ï¼‰å•†å“é™„åŠ ä¿¡æ¯ï¼šæè¿°ã€è¯¦æƒ…ã€è¯„è®ºï¼Œè¿™ç±»æ–‡æ¡£ä¿¡æ¯ä¸€èˆ¬ç”¨ MongoDBï¼ˆ3ï¼‰å›¾ç‰‡ä¿¡æ¯ï¼šé™æ€æ–‡ä»¶ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆ4ï¼‰æœç´¢å…³é”®å­—ï¼šElasticSearchã€Lucenceã€solrï¼ˆ5ï¼‰çƒ­ç‚¹ä¿¡æ¯ï¼ˆé«˜é¢‘ã€æ³¢æ®µæ€§çš„ä¿¡æ¯ï¼‰ï¼šç”¨é«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ redisã€memcacheã€tairä¸‰ã€Redisçš„æ¦‚å¿µ3.1 æ¦‚å¿µRedis(Remote Dictionary Server)æ˜¯ç”¨ C è¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½é”®å€¼å¯¹ï¼ˆkey-valueï¼‰æ•°æ®åº“ã€‚æ˜¯ç›®å‰æœ€çƒ­é—¨çš„ç”¨äºæ•°æ®ç¼“å­˜ï¼Œä»¥å®ç°é«˜å¹¶å‘çš„å·¥å…·ã€‚3.2 ç‰¹å¾ï¼ˆ1ï¼‰. æ•°æ®ä¹‹é—´æ²¡æœ‰å¿…ç„¶çš„å…³è”å…³ç³»ï¼ˆ2ï¼‰. å†…éƒ¨é‡‡ç”¨å•çº¿ç¨‹æœºåˆ¶è¿›è¡Œï¼ˆ3ï¼‰. é«˜æ€§èƒ½ã€‚å®˜æ–¹æµ‹è¯•æ•°æ®ï¼Œ50 ä¸ªå¹¶å‘æ‰§è¡Œ 100000 ä¸ªè¯·æ±‚ï¼Œè¯»çš„é€Ÿåº¦æ˜¯ 110000 æ¬¡/sï¼Œå†™çš„é€Ÿåº¦æ˜¯ 81000 æ¬¡/sã€‚ï¼ˆ4ï¼‰. æ•°æ®ç±»å‹çš„æ”¯æŒ å­—ç¬¦ä¸²ç±»å‹ string åˆ—è¡¨ç±»å‹ list æ•£åˆ—ç±»å‹ hash é›†åˆç±»å‹ set æœ‰åºé›†åˆç±»å‹ sorted_setï¼ˆ5ï¼‰. æ•°æ®æŒä¹…åŒ–ã€‚å¯ä»¥è¿›è¡Œæ•°æ®ç¾éš¾æ¢å¤3.3. redis çš„åº”ç”¨ æ•°æ®çƒ­ç‚¹çš„åŠ é€ŸæŸ¥è¯¢ï¼ˆä¸»è¦åœºæ™¯ï¼‰ï¼Œå¦‚çƒ­ç‚¹å•†å“ã€çƒ­ç‚¹æ–°é—»ã€çƒ­ç‚¹å’¨è¯¢ã€çƒ­ç‚¹æ¨å¹¿ç­‰é«˜ è®¿é—®é‡ä¿¡æ¯ ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚ç§’æ€ã€æŠ¢è´­ã€è´­ç¥¨æ’é˜Ÿ åŠæ—¶ä¿¡æ¯æŸ¥è¯¢ï¼Œå¦‚å„ç±»æ’è¡Œã€å„ç±»ç½‘ç«™çš„è®¿é—®ç»Ÿè®¡ã€å…¬äº¤åˆ°ç«™ä¿¡æ¯ã€åœ¨çº¿äººæ•°ä¿¡æ¯ï¼ˆèŠå¤©å®¤ã€ç½‘ç«™ï¼‰ã€è®¾å¤‡ä¿¡å·ç­‰ å®æ•ˆæ€§ä¿¡æ¯çš„æ§åˆ¶ï¼Œå¦‚éªŒè¯ç æ§åˆ¶ã€æŠ•ç¥¨æ§åˆ¶ åˆ†å¸ƒå¼æ•°æ®å…±äº«ï¼Œå¦‚åˆ†å¸ƒå¼é›†ç¾¤æ¶æ„ä¸­çš„ session åˆ†ç¦» æ¶ˆæ¯é˜Ÿåˆ— åˆ†å¸ƒå¼é”å››ã€æ€»ç»“åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†NoSQLçš„æ¦‚å¿µï¼ŒåŒæ—¶ä»‹ç»äº†Redisç›¸å…³æ¦‚å¿µä»¥åŠåº”ç”¨åœºæ™¯ï¼Œåœ¨åç»­çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç»§ç»­æ¢è®¨Redisçš„çŸ¥è¯†ã€‚" }, { "title": "2021å¹´ç»ˆæ€»ç»“-é‡æ‹¾å¸Œæœ›ï¼ŒåŠªåŠ›è¿½æ±‚", "url": "/posts/reading_2021-year-end-summary.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 23:12:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022.01.02ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30å‰è¨€æ—¶å…‰é£é€ï¼Œ2021å¹´åˆåŒ†åŒ†åœ°è¿‡å»äº†ï¼Œæˆ‘è¿˜æ˜¯å†™ä¸‹äº†è¿™ç¯‡è¿Ÿæ¥çš„æ€»ç»“ã€‚è¿‡å»ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä¸€ç›´å¯¹è‡ªå·±è¿›è¡Œåæ€å’Œæ€»ç»“ï¼Œä¸æ–­åœ°ç¡®å®šæ–°çš„ç›®æ ‡ä¸æœŸæœ›ã€‚å»å¹´æˆ‘çš„å·¥ä½œä¸ç”Ÿæ´»å‘ç”Ÿäº†é‡å¤§çš„å˜åŒ–ï¼Œä»Šå¤©é€šè¿‡è¿™ç¯‡æ–‡ç« æ€»ç»“è¿‡å»ä¸€å¹´çš„å¾—å¤±ä¸å¿ƒæƒ…ã€‚æˆ‘åœ¨2017å¹´10æœˆçš„æ—¶å€™é€šè¿‡å…¬ä¼—å·å‘å‡ºäº†ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œåé¢ä¸€ç›´æ–­æ–­ç»­ç»­æ›´æ–°äº†ä¸€äº›ã€‚ç›´åˆ°ä»Šå¹´11æœˆï¼Œæˆ‘å†³å®šç»§ç»­æ›´æ–°ä¸‹...", "content": " æ’°å†™æ—¶é—´ï¼š2022.01.02ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30å‰è¨€æ—¶å…‰é£é€ï¼Œ2021å¹´åˆåŒ†åŒ†åœ°è¿‡å»äº†ï¼Œæˆ‘è¿˜æ˜¯å†™ä¸‹äº†è¿™ç¯‡è¿Ÿæ¥çš„æ€»ç»“ã€‚è¿‡å»ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä¸€ç›´å¯¹è‡ªå·±è¿›è¡Œåæ€å’Œæ€»ç»“ï¼Œä¸æ–­åœ°ç¡®å®šæ–°çš„ç›®æ ‡ä¸æœŸæœ›ã€‚å»å¹´æˆ‘çš„å·¥ä½œä¸ç”Ÿæ´»å‘ç”Ÿäº†é‡å¤§çš„å˜åŒ–ï¼Œä»Šå¤©é€šè¿‡è¿™ç¯‡æ–‡ç« æ€»ç»“è¿‡å»ä¸€å¹´çš„å¾—å¤±ä¸å¿ƒæƒ…ã€‚æˆ‘åœ¨2017å¹´10æœˆçš„æ—¶å€™é€šè¿‡å…¬ä¼—å·å‘å‡ºäº†ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œåé¢ä¸€ç›´æ–­æ–­ç»­ç»­æ›´æ–°äº†ä¸€äº›ã€‚ç›´åˆ°ä»Šå¹´11æœˆï¼Œæˆ‘å†³å®šç»§ç»­æ›´æ–°ä¸‹å»ã€‚è¿‡å»è¿™ä¸¤å¹´è™½ç„¶å‡ ä¹ä¸æ›´æ–°ï¼Œä½†æˆ‘éƒ½ä¼šåœ¨æ¯å¹´å¹´åˆçš„æ—¶å€™å†™ä¸€ç¯‡æ—¥è®°æ¥è®°å½•è‡ªå·±å½“æ—¶çš„å¿ƒæƒ…ã€‚ä»¥ä¸‹æ˜¯å»å¹´çš„æ€»ç»“2021-å››çº¿å°åŸå¸‚ç¨‹åºå‘˜çš„å¹´ç»ˆæ€»ç»“è¾å»ç¬¬ä¸€ä»½å·¥ä½œå…ˆè¯´è¯´ä»å­¦æ ¡åˆ°å·¥ä½œã€‚å®é™…ä¸Šæˆ‘åœ¨å¤§å­¦è¿‡å¾—ä¸å¥½ï¼Œåªæ˜¯æˆ‘å¾ˆå°‘è·Ÿåˆ«äººæèµ·ã€‚ç”±äºè‡ªå·±çš„æˆé•¿ç¯å¢ƒã€å®¶åº­èƒŒæ™¯ç­‰åŸå› ï¼Œå®é™…ä¸Šæˆ‘çš„å¤§å­¦å¾ˆç—›è‹¦ã€‚æˆ‘ä¸å–œæ¬¢æˆ‘çš„å¤§å­¦ç”Ÿæ´»ï¼Œé‚£æ—¶å€™æˆ‘å¾ˆæƒ³æ—©ä¸€ç‚¹ç¦»å¼€å­¦æ ¡ã€‚è¿™ç§ç—›è‹¦ä¸æ˜¯å­¦ä¹ ä¸è€ƒè¯•ï¼Œè€Œæ˜¯å„ç§å¤æ‚çš„äººæƒ…ä¸–æ•…ä¸è‡ªå·±ä»·å€¼è§‚çš„å†²çªã€‚æˆ‘ä¹Ÿå¾ˆéš¾ä»¥è¡¨è¾¾è‡ªå·±å†…å¿ƒçœŸæ­£çš„å¿ƒæƒ…ã€‚ä½†ä»¤äººæ¬£æ…°çš„æ˜¯ï¼Œæˆ‘åœ¨ä¸Šå¤§å­¦çš„æ—¶å€™ï¼Œç»“è¯†å¾ˆå¥½çš„åŒå­¦ä»¬ï¼Œä»–ä»¬æœ‰æ¶µå…»ã€æœ‰ç¤¼è²Œã€æ˜ç¡®ç›®æ ‡ã€‚å¾ˆå¤šäººå’Œäº‹ç»™æˆ‘ç•™ä¸‹äº†æ·±åˆ»çš„å°è±¡ï¼Œä¹Ÿæˆäº†æˆ‘è¿™è¾ˆå­æˆ‘æœ€ç¾å¥½ä¸æ— ä»·çš„å›å¿†ã€‚ä»¥å‰æˆ‘ä¸å¤ŸåŠªåŠ›ï¼Œæ¯•ä¸šåçš„ç¬¬ä¸€ä»½å·¥ä½œå¾ˆä¸ç†æƒ³ï¼Œå¹¶åšæŒäº†è¿‘ä¸¤å¹´ã€‚æˆ‘ä¸ä¼šæ„Ÿæ¿€æˆ‘çš„ç¬¬ä¸€ä¸ªè€æ¿ï¼Œæˆ‘åªä¼šæ„Ÿæ¿€æˆ‘è‡ªå·±ã€‚æˆ‘æ›¾æœ‰ä¸€ä¸ªå¸¸äººè®¤ä¸ºâ€œæ†¨åšè€å®â€çš„æ€§æ ¼ï¼Œä½†è¿™æ ·çš„æ€§æ ¼æ”¾åœ¨ç¤¾ä¼šä¸Šï¼Œå¹¶ä¸å®ç”¨ï¼Œä»¥è‡³äºåˆšæ¯•ä¸šå°±é­å—äº†å¤±åˆ©ã€‚19å¹´åˆ°21å¹´çš„ä¹‹é—´ï¼Œæ€»æ˜¯æ— å¿åŠ ç­ï¼Œæ— æ‰€è¿›æ­¥çš„çŠ¶æ€ã€‚å»å¹´æ˜¥å­£æˆ‘è¾èŒäº†ï¼å’Œæˆ‘é¢„æƒ³çš„ä¸€æ ·ï¼Œé‚£ä¸ªå›¢é˜Ÿä¸ä¹…ä¹‹åä¹Ÿè§£æ•£äº†ï¼èå…¥æ–°çš„ç¯å¢ƒåˆšæ¥åˆ°å¹¿å·é‚£æ®µæ—¶é—´å¿ƒæƒ…æŒºå¤æ‚çš„ï¼Œå„ç§ä¸åˆ©ï¼Œå¿ƒæƒ…å¤±è½ã€‚åæ¥ä¸¤å‘¨çš„æ—¶é—´ï¼Œæˆ‘ä¸å»è€ƒè™‘å·¥ä½œï¼Œè¿œç¦»èŒåœºï¼Œç»™è‡ªå·±æ”¾å‡ï¼Œè§£å¼€å¿ƒç»“ã€‚åœ¨2021å¹´5æœˆ24å·ï¼Œæˆ‘ä»¥å…¨æ–°çš„å¿ƒæ€å…¥èŒäº†ç°åœ¨æ‰€åœ¨çš„å…¬å¸ã€‚è¿™åŠå¹´æ¥èå…¥å›¢é˜Ÿçš„è¿‡ç¨‹ä¸­ï¼ŒåŠªåŠ›å·¥ä½œï¼Œè®¤çœŸæ€»ç»“ã€‚åŒæ—¶åšæŒå­¦ä¹ ï¼ŒåŠªåŠ›æå‡ã€‚åæ¥æˆ‘ä»¥å†™æ—¥è®°çš„æ–¹å¼æ¥è®°å½•è‡ªå·±çš„å¿ƒæƒ…ï¼Œæå‡è‡ªå·±çš„å¹¸ç¦æ„Ÿï¼åˆ°å¹´åº•ï¼Œæˆ‘å·²ç»åŸºæœ¬å®ç°äº†æˆ‘åˆšå…¥èŒæ—¶ç»™è‡ªå·±å®šä¸‹çš„ç›®æ ‡ã€‚æˆ‘æŒºæ»¡è¶³è‡ªå·±ç°åœ¨çš„å·¥ä½œç¯å¢ƒï¼Œç°åœ¨èƒ½äº«å—ä¸€äº›å·¥ä½œç¦åˆ©ï¼Œæ¯”å¦‚ä¸‹åˆèŒ¶ã€ç”Ÿæ—¥ä¼šã€èŠ‚æ—¥ç¤¼ç‰©ç­‰ï¼Œè¿™æ˜¯æˆ‘ä»¥å‰çš„å·¥ä½œæ‰€æ²¡æœ‰çš„ã€‚å·¥ä½œç´¯äº†å¯ä»¥çœºæœ›ä¸€ä¸‹è¿œå¤„çš„é£æ™¯ï¼ŒåŒæ—¶æ¯å‘¨ä¹Ÿæœ‰æŠ€æœ¯åˆ†äº«ä¼šï¼Œå¯ä»¥æŠ¥åå‚åŠ ã€‚åœ¨æ–°çš„ç¯å¢ƒé‡Œï¼Œèƒ½å‘æŒ¥è‡ªå·±çš„ä»·å€¼ï¼ŒåŒæ—¶ä¹Ÿæœ‰æˆé•¿çš„ç©ºé—´ã€‚æœªæ¥çš„è®¡åˆ’åœ¨æ¥ä¸‹æ¥çš„è®¡åˆ’ä¸­ï¼Œé™¤äº†åŠªåŠ›å·¥ä½œï¼ŒåŠªåŠ›å­˜é’±ã€‚æˆ‘æ›´å¸Œæœ›çœŸæ­£åœ°æå‡ä¸€ä¸‹è‡ªå·±çš„ç»¼åˆæ°´å¹³ï¼Œä¸æ–­åœ°å­¦ä¹ ï¼Œå› æ­¤æˆ‘åˆ¶å®šäº†ä»¥ä¸‹çš„è®¡åˆ’ï¼šåšæŒå­¦ä¹ è‹±è¯­ï¼šæé«˜è‹±è¯­è¯æ±‡é‡ï¼Œä¹Ÿæé«˜è‡ªå·±çš„è‹±è¯­é˜…è¯»èƒ½åŠ›ï¼›åšæŒå­¦ä¹ ä¸“ä¸šæŠ€æœ¯çŸ¥è¯†ï¼šåŠ å¼ºå­¦ä¹ åŸºç¡€çŸ¥è¯†ï¼Œå¦‚Linuxæ ¸å¿ƒçŸ¥è¯†ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ã€è®¡ç®—æœºåŸç†ã€‚åŒæ—¶åšæŒå­¦ä¹ æ–°æŠ€æœ¯ï¼Œé€æ¸äº†è§£æ¡†æ¶åº•å±‚çš„çŸ¥è¯†ï¼Œä¹Ÿå¸Œæœ›ç”¨ä¸šä½™çš„æ—¶é—´å»äº†è§£å…¶ä»–æŠ€æœ¯æ ˆï¼Œç›®çš„æ˜¯è®©è‡ªå·±åœ¨è¿™æ¡è·¯ä¸Šèµ°å¾—æ›´é¡ºåˆ©ã€‚åšæŒè¯»ä¹¦ï¼šæˆ‘ç°åœ¨çœŸæ­£ä½“ä¼šåˆ°ï¼Œä¸€ä¸ªäººçš„è®¤çŸ¥å†³å®šäº†ä»–çš„å‰é€”ã€‚æˆ‘ä»¬å¯ä»¥ä»ç”Ÿæ´»ç»éªŒä¸­æé«˜è®¤çŸ¥ï¼Œä½†æ˜¯è¿‡ç¨‹éå¸¸è‰°éš¾ä¸ç—›è‹¦ã€‚è€Œå¤šè¯»ä¹¦æ˜¯æé«˜è‡ªæˆ‘æ„è¯†ä¸è®¤çŸ¥æ°´å¹³çš„æœ€æœ‰æ•ˆé€”å¾„ï¼ŒåšæŒè¯»ä¹¦ï¼Œå¯¹è‡ªå·±ç»å¯¹æœ‰åˆ©ï¼ç»“è¯­è¿‡å»è¿™ä¸¤å¹´æˆ‘åœ¨æŠ€æœ¯åˆ†äº«ä¸ŠåŸºæœ¬å±äºåœæ»çŠ¶æ€ã€‚æˆ‘è®¡åˆ’åœ¨ä»Šå¹´é‡æ–°äº§å‡ºæ›´å¤šä¸é™äº è§†é¢‘å’Œå›¾æ–‡ çš„æŠ€æœ¯ç±»çŸ¥è¯† ä¸ ITèŒåœºåˆ†äº«ã€‚æˆ‘å°†é‡æ–°æŠŠè‡ªå·±åœ¨å·¥ä½œä¸­çš„ç»éªŒã€æ—¥å¸¸çš„å­¦ä¹ å¿ƒå¾—åˆ†äº«å‡ºå»ï¼Œä¹Ÿä¼šä¸æ–­åœ°æé«˜äº§å‡ºçš„è´¨é‡ã€‚åœ¨æ–°çš„ä¸€å¹´é‡Œï¼Œä¸å¿˜åˆå¿ƒï¼ŒåŠªåŠ›æ‹¼æï¼ç¥ä½ è¶Šæ¥è¶Šå¥½ï¼Œä¸€åˆ‡éƒ½å¥½ï¼" }, { "title": "ä¸ºä»€ä¹ˆè¯´å¤§åŸå¸‚æ˜¯ä¸“ä¸šæŠ€æœ¯å°±ä¸šçš„æœ€å¥½é€‰æ‹©", "url": "/posts/reading_why-big-city-is-best-choose-for-developer.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 23:08:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-11-02ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30åˆšæ¯•ä¸šå°±å›äº†è€å®¶é™„è¿‘çš„å››äº”çº¿åŸå¸‚ï¼Œç›´åˆ°ä¸¤å¹´åå›¢é˜Ÿè§£æ•£ï¼Œç¦»å¼€äº†è€å®¶æ¥åˆ°å¹¿å·ï¼Œå¦‚ä»Šå·²ç»è¿‡å»å¤§åŠå¹´äº†ã€‚ä»¥ä¸€ä¸ªæŠ€æœ¯ä»ä¸šè€…çš„è§’åº¦ï¼Œåˆ†äº«ä¸€ä¸‹è‡ªå·±ç°åœ¨çš„å¿ƒæƒ…æ„Ÿæƒ³ã€‚äººç¾¤ï¼šåœ¨å°åŸå¸‚ï¼Œå…¬äº¤è½¦ä¸Šï¼Œä¸­è€å¹´äººç¾¤å¯èƒ½å å¤§å¤šæ•°ï¼Œç»å¸¸è§åˆ°æ— æ‰€äº‹äº‹çš„äººä»¬ã€‚ä½†æ˜¯åœ¨å¤§åŸå¸‚ï¼Œå¤§éƒ¨åˆ†æ˜¯å¹´è½»äººï¼Œæ¯ä¸ªäººå¿™å¿™ç¢Œç¢Œï¼Œå¤§å®¶éƒ½åœ¨åŠªåŠ›æ‰“æ‹¼ã€‚åœ¨å¤§åŸå¸‚ï¼Œç»“è¯†ä¼˜ç§€äººç¾¤çš„æœºä¼šä¹Ÿæ›´å¤šã€‚å·¥ä½œæœº...", "content": " æ’°å†™æ—¶é—´ï¼š2021-11-02ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30åˆšæ¯•ä¸šå°±å›äº†è€å®¶é™„è¿‘çš„å››äº”çº¿åŸå¸‚ï¼Œç›´åˆ°ä¸¤å¹´åå›¢é˜Ÿè§£æ•£ï¼Œç¦»å¼€äº†è€å®¶æ¥åˆ°å¹¿å·ï¼Œå¦‚ä»Šå·²ç»è¿‡å»å¤§åŠå¹´äº†ã€‚ä»¥ä¸€ä¸ªæŠ€æœ¯ä»ä¸šè€…çš„è§’åº¦ï¼Œåˆ†äº«ä¸€ä¸‹è‡ªå·±ç°åœ¨çš„å¿ƒæƒ…æ„Ÿæƒ³ã€‚äººç¾¤ï¼šåœ¨å°åŸå¸‚ï¼Œå…¬äº¤è½¦ä¸Šï¼Œä¸­è€å¹´äººç¾¤å¯èƒ½å å¤§å¤šæ•°ï¼Œç»å¸¸è§åˆ°æ— æ‰€äº‹äº‹çš„äººä»¬ã€‚ä½†æ˜¯åœ¨å¤§åŸå¸‚ï¼Œå¤§éƒ¨åˆ†æ˜¯å¹´è½»äººï¼Œæ¯ä¸ªäººå¿™å¿™ç¢Œç¢Œï¼Œå¤§å®¶éƒ½åœ¨åŠªåŠ›æ‰“æ‹¼ã€‚åœ¨å¤§åŸå¸‚ï¼Œç»“è¯†ä¼˜ç§€äººç¾¤çš„æœºä¼šä¹Ÿæ›´å¤šã€‚å·¥ä½œæœºä¼šï¼šåœ¨å°åŸå¸‚ï¼Œä½ å¯é€‰æ‹©å¾ˆå°‘ï¼Œç‰¹åˆ«æ˜¯æŠ€æœ¯è¡Œä¸šï¼Œä½ å¯èƒ½åŠªåŠ›å¯»æ±‚å·¥ä½œæœºä¼šï¼Œä½†æ˜¯ç»ˆå°†åªæœ‰é‚£å‡ å®¶åˆ›ä¸šå…¬å¸ä¾›ä½ é€‰æ‹©ã€‚ä½†æ˜¯åœ¨å¤§åŸå¸‚ï¼Œä½ å¯ä»¥äº‰å–çš„å·¥ä½œæœºä¼šå¾ˆå¤šï¼Œæ‰€ä»¥ä½ çš„é€‰æ‹©ä¹Ÿä¼šæ›´å¤šã€‚å­¦ä¹ ç©ºé—´ï¼šå°åŸå¸‚æ›´å¤šæ˜¯å°å…¬å¸æˆ–è€…å°å›¢é˜Ÿï¼Œå¹³æ—¶çš„å¼€å‘å¤§å¤šæ ¹æœ¬æ²¡è§„èŒƒå¯è¨€ï¼Œåªè¦å®ç°åŠŸèƒ½å°±è¡Œäº†ã€‚ä¹Ÿä¸æ•¢ç»å¯¹çš„è¿™ä¹ˆè¯´ï¼Œä½†è‡³å°‘è¿‡å»ä¸¤å¹´æˆ‘æ˜¯è¿™æ ·çš„ã€‚å¤šä¸ªäº§å“ä¸¥é‡çš„é€»è¾‘é—®é¢˜ï¼Œå¼€å‘å‡ºæ¥çš„ä¸œè¥¿ï¼Œæ ¹æœ¬å°±æ²¡äººä½¿ç”¨ï¼Œè¿˜æ˜¯ç¡¬æ’‘ä¸‹å»ã€‚æ›´ä¸ç”¨è¯´å­¦åˆ°çŸ¥è¯†äº†ï¼Œå¾ˆå¤šæ—¶å€™åŠ ç­å·²ç»è®©äººç–²æƒ«ä¸å ªäº†ã€‚ä½†æ˜¯åœ¨å¤§åŸå¸‚ï¼Œä¼šæœ‰æ›´å¤šçš„æœºä¼šæ¥è§¦é•¿æœŸç¨³å®šçš„é¡¹ç›®ï¼Œä¹Ÿæ›´å®¹æ˜“æ¥è§¦åˆ°ä¸€ä¸ªæˆç†Ÿçš„å›¢é˜Ÿã€‚æˆç†Ÿçš„å›¢é˜Ÿæœ‰å®Œæ•´çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå®è·µè¿‡çš„å¼€å‘æ–¹æ¡ˆï¼Œå®Œæ•´çš„æŠ€æœ¯åŸ¹è®­æ–‡æ¡£ã€‚åœ¨è¿™æ ·çš„ç¯å¢ƒï¼Œä½ èƒ½çŸ¥é“è‡ªå·±çš„å­¦ä¹ ç›®æ ‡ï¼Œä½ ä¹Ÿèƒ½æ›´åŠ æ˜ç¡®è‡ªå·±çš„æ–¹å‘ã€‚å·¥èµ„æ°´å¹³ï¼šå¾ˆå¤šäººè¯´å¤§åŸå¸‚æ¶ˆè´¹é«˜ï¼Œç¡®å®æ˜¯ï¼Œè¿™å¯èƒ½ä¸»è¦ä½“ç°åœ¨ä½æˆ¿ä¸Šã€‚å…¶å®ç”Ÿæ´»è´¹æ˜¯å·®ä¸å¤šçš„ï¼Œä½†æ˜¯åœ¨å¤§åŸå¸‚å·¥èµ„æ°´å¹³ä¼šæ¯”å°åŸå¸‚é«˜ã€‚é‚£ä½ æ”¶å…¥çš„å°±ä¼šæ›´å¤šï¼Œä¹Ÿé—´æ¥æ€§åœ°è®©ä½ èƒ½æ”¯é…çš„æ›´å¤šã€‚ç¯å¢ƒä¸èµ„æºï¼šå¯èƒ½æœ‰çš„äººè§‰å¾—ï¼Œå¤§åŸå¸‚ç«äº‰å¤ªå¤§äº†ã€‚ä½†å®é™…ä¸Šï¼Œå¤§åŸå¸‚çš„å·¥ä¸šå‘è¾¾ï¼Œå¯¹ç‰¹å®šä¸“ä¸šéœ€æ±‚çš„åŠ³åŠ¨åŠ›ä¹Ÿé«˜ã€‚ä¸€ä¸ªæ–¹é¢æ¥è¯´ï¼Œåœ¨å¤§åŸå¸‚å°±å®Œå…¨å¯ä»¥è¿‡å°åŸå¸‚çš„ç”Ÿæ´»ï¼Œå› ä¸ºæ‰€æœ‰å¯¹äº‹ç‰©çš„å†³å®šéƒ½åœ¨äºäººæœ¬èº«ã€‚åä¹‹ï¼Œåœ¨å°åŸå¸‚é‡Œï¼Œç‰¹åˆ«æ˜¯æŠ€æœ¯äººå‘˜ï¼Œå°±ä¼šæ— æ³•äº«å—åˆ°å¤§åŸå¸‚çš„æŠ€æœ¯ç¯å¢ƒä¸å„ç§èµ„æºã€‚æˆ‘ç°åœ¨ç›¸ä¿¡ï¼Œä½œä¸ºæŠ€æœ¯äººï¼Œç‰¹åˆ«æ˜¯åœ¨å¹´è½»çš„æ—¶å€™ï¼ŒçœŸçš„åªæœ‰å¤§åŸå¸‚é€‚åˆè‡ªå·±ï¼" }, { "title": "æˆ‘ä»¬ç”¨çš„è½¯ä»¶æ˜¯ç¼–ç¨‹è½¯ä»¶ç¼–çš„ï¼Œé‚£ç¼–ç¨‹è½¯ä»¶æ˜¯ç”¨ä»€ä¹ˆç¼–çš„ï¼Ÿ", "url": "/posts/reading_what-programming-language-is-mode-of.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 23:08:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-11-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30æˆ‘ä»¬æ‰‹æœºçš„APPï¼Œç”µè„‘çš„APPã€‚éƒ½æ˜¯è½¯ä»¶ï¼Œæˆ‘ä»¬ç”¨çš„è½¯ä»¶éƒ½æ˜¯ç”¨ç¼–ç¨‹è½¯ä»¶ç¼–çš„ã€‚å®é™…ä¸Šï¼Œç¼–ç¨‹è½¯ä»¶ä¹Ÿæ˜¯è½¯ä»¶ï¼Œæ‰€ä»¥ç¼–ç¨‹è½¯ä»¶æ˜¯ç”¨ç¼–ç¼–ç¨‹è½¯ä»¶çš„ç¼–ç¨‹è½¯ä»¶ç¼–çš„ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šç¼–ç¼–ç¨‹è½¯ä»¶çš„ç¼–ç¨‹è½¯ä»¶åˆæ˜¯ç”¨ä»€ä¹ˆç¼–ç¨‹è½¯ä»¶ç¼–çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šè¿˜æ˜¯ç¼–ç¨‹è½¯ä»¶ã€‚æ€»ä¹‹ï¼Œéƒ½æ˜¯è½¯ä»¶ï¼Œè½¯ä»¶å†ç¼–å†™å‡ºè½¯ä»¶ã€‚æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œè¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å®‰å“æ‰‹æœºçš„APPæ˜¯ä¸ªè½¯ä»¶ï¼Œä½†è¿™ä¸ªè½¯ä»¶...", "content": " æ’°å†™æ—¶é—´ï¼š2021-11-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30æˆ‘ä»¬æ‰‹æœºçš„APPï¼Œç”µè„‘çš„APPã€‚éƒ½æ˜¯è½¯ä»¶ï¼Œæˆ‘ä»¬ç”¨çš„è½¯ä»¶éƒ½æ˜¯ç”¨ç¼–ç¨‹è½¯ä»¶ç¼–çš„ã€‚å®é™…ä¸Šï¼Œç¼–ç¨‹è½¯ä»¶ä¹Ÿæ˜¯è½¯ä»¶ï¼Œæ‰€ä»¥ç¼–ç¨‹è½¯ä»¶æ˜¯ç”¨ç¼–ç¼–ç¨‹è½¯ä»¶çš„ç¼–ç¨‹è½¯ä»¶ç¼–çš„ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šç¼–ç¼–ç¨‹è½¯ä»¶çš„ç¼–ç¨‹è½¯ä»¶åˆæ˜¯ç”¨ä»€ä¹ˆç¼–ç¨‹è½¯ä»¶ç¼–çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šè¿˜æ˜¯ç¼–ç¨‹è½¯ä»¶ã€‚æ€»ä¹‹ï¼Œéƒ½æ˜¯è½¯ä»¶ï¼Œè½¯ä»¶å†ç¼–å†™å‡ºè½¯ä»¶ã€‚æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼Œè¯´æ˜è¿™ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬å®‰å“æ‰‹æœºçš„APPæ˜¯ä¸ªè½¯ä»¶ï¼Œä½†è¿™ä¸ªè½¯ä»¶æ˜¯ç”¨ä»€ä¹ˆå†™çš„å‘¢ï¼Ÿå®‰å“æ‰‹æœºè½¯ä»¶ç”¨ä¸€ä¸ªå«AndroidStudioçš„ç”µè„‘è½¯ä»¶ç¼–å†™çš„ã€‚è€ŒAndroidStudioè½¯ä»¶æ˜¯ç”¨Intellij Ideaè¿™ä¸ªè½¯ä»¶ç¼–å†™çš„ã€‚é‚£Intellij Ideaè¿™ä¸ªè½¯ä»¶åˆæ˜¯ä»€ä¹ˆè½¯ä»¶ç¼–å†™çš„å‘¢ï¼Ÿè¿™ä¸ªæˆ‘å°±ä¸ç¡®å®šäº†ï¼ŒIntellij Ideaè¿™ä¸ªè½¯ä»¶å¯èƒ½æ˜¯ç”¨è®°äº‹æœ¬è½¯ä»¶ï¼Œåæ­£èƒ½æŠŠä»£ç ç¼–ä¸Šå»å°±è¡Œã€‚ä½†æ˜¯è®°äº‹æœ¬è½¯ä»¶åˆæ˜¯ä»€ä¹ˆè½¯ä»¶å†™çš„ï¼Œè®°äº‹æœ¬è½¯ä»¶å¯èƒ½æ˜¯ç”¨ä¸€ä¸ªå«vimçš„è½¯ä»¶å†™çš„ï¼Œvimè¿™ä¸ªè½¯ä»¶æ˜¯ä¸€ä¸ªæ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œåªæœ‰æ–‡å­—äº¤äº’çš„å‘½ä»¤è¡Œè½¯ä»¶ã€‚æ„æ€å°±æ˜¯è¯´ï¼Œè¿™ä¸ªè½¯ä»¶æ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œä¹Ÿå°±ä¸èƒ½ç”¨é¼ æ ‡ç‚¹å‡»ï¼Œå‘½ä»¤è¡Œè½¯ä»¶å°±åªèƒ½ç”¨é”®ç›˜æ•²äº†ã€‚é‚£ä¹ˆå‘½ä»¤è¡Œè½¯ä»¶åˆæ˜¯ä»€ä¹ˆè½¯ä»¶ç¼–å‡ºæ¥çš„å‘¢ï¼Ÿå…¶å®â€¦â€¦æˆ‘ä¸çŸ¥é“ï¼åæ­£æ˜¯ç”¨ç¼–ç¨‹è¯­è¨€ç¼–å‡ºæ¥çš„ã€‚é‚£ç¼–ç¨‹è¯­è¨€åˆæ€ä¹ˆç¼–å‡ºæ¥çš„å‘¢ï¼Ÿè¿˜æ˜¯ç¼–ç¨‹è¯­è¨€ç¼–å‡ºæ¥çš„â€¦â€¦" }, { "title": "åç«¯å¼€å‘å·¥ç¨‹å¸ˆçš„å·¥ä½œæµç¨‹æ˜¯æ€æ ·çš„", "url": "/posts/reading_backend-developer-work-process.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 23:07:00 +0800", "snippet": " 10æœˆ29æ—¥ å¹¿å· å¤šäº‘**ä¸€ä¸ªåç«¯è½¯ä»¶å·¥ç¨‹å¸ˆçš„åŸºæœ¬å·¥ä½œèŒä¸šæ˜¯å®Œæˆåç«¯ç¨‹åºçš„è®¾è®¡ä¸å¼€å‘ã€‚è€Œåç«¯å¼€å‘çš„å·¥ä½œæµç¨‹å¾€å¾€åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚ç¡®å®šéœ€æ±‚ï¼šåç«¯çš„éœ€æ±‚ä»äº§å“ç»ç†æ¥ï¼Œåœ¨ç¡®å®šäº§å“éœ€æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œåç«¯å·¥ç¨‹å¸ˆå¿…é¡»ç¡®å®šäº§å“éœ€æ±‚æ˜¯å¦å­˜åœ¨é€»è¾‘é—®é¢˜ï¼Œå¹¶æœ‰ä¸€å¥—å®ç°æ–¹æ¡ˆã€‚å½“ç„¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹äº§å“éœ€æ±‚æ˜¯æ²¡é—®é¢˜çš„ï¼Œåªæ˜¯å®ç°çš„éš¾æ˜“ç¨‹åº¦ä¸åŒè€Œå·²ã€‚ä½†ä¸æ’é™¤äº§å“ç»ç†ä¸ä¼šæå‡ºâ€œappä¸»é¢˜é¢œè‰²è·Ÿéšæ‰‹æœºå¤–å£³å˜åŒ–è€Œå˜åŒ–â€...", "content": " 10æœˆ29æ—¥ å¹¿å· å¤šäº‘**ä¸€ä¸ªåç«¯è½¯ä»¶å·¥ç¨‹å¸ˆçš„åŸºæœ¬å·¥ä½œèŒä¸šæ˜¯å®Œæˆåç«¯ç¨‹åºçš„è®¾è®¡ä¸å¼€å‘ã€‚è€Œåç«¯å¼€å‘çš„å·¥ä½œæµç¨‹å¾€å¾€åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚ç¡®å®šéœ€æ±‚ï¼šåç«¯çš„éœ€æ±‚ä»äº§å“ç»ç†æ¥ï¼Œåœ¨ç¡®å®šäº§å“éœ€æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œåç«¯å·¥ç¨‹å¸ˆå¿…é¡»ç¡®å®šäº§å“éœ€æ±‚æ˜¯å¦å­˜åœ¨é€»è¾‘é—®é¢˜ï¼Œå¹¶æœ‰ä¸€å¥—å®ç°æ–¹æ¡ˆã€‚å½“ç„¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹äº§å“éœ€æ±‚æ˜¯æ²¡é—®é¢˜çš„ï¼Œåªæ˜¯å®ç°çš„éš¾æ˜“ç¨‹åº¦ä¸åŒè€Œå·²ã€‚ä½†ä¸æ’é™¤äº§å“ç»ç†ä¸ä¼šæå‡ºâ€œappä¸»é¢˜é¢œè‰²è·Ÿéšæ‰‹æœºå¤–å£³å˜åŒ–è€Œå˜åŒ–â€è¿™ç§éœ€æ±‚ã€‚å¼€å‘æ’æœŸï¼šåœ¨ç¡®å®šéœ€æ±‚ä¹‹åï¼Œåç«¯å·¥ç¨‹å¸ˆè¦å¯¹è‡ªå·±å³å°†çš„å¼€å‘å·¥ä½œåšä¸€ä¸ªæ—¶é—´è®¡åˆ’ï¼Œä»¥ä¾¿è·Ÿè¿›è®¡åˆ’ã€‚äº§å“ç»ç†å¾€å¾€æœ€åœ¨æ„ä½ çš„æ—¶é—´èŠ‚ç‚¹ã€‚ä¸è¿‡ï¼Œæœ€ç»ˆçš„æ—¶é—´èŠ‚ç‚¹ä¸€èˆ¬å’Œå‰ç«¯å·¥ç¨‹å¸ˆä¸€èµ·å®šçš„ã€‚æŠ€æœ¯æ–¹æ¡ˆé€‰æ‹©ï¼šç¡®å®šé¡¹ç›®éœ€æ±‚ä»¥åï¼Œæˆ‘ä»¬å°±éœ€è¦ç¡®å®šè‡ªå·±çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œæ¯”å¦‚è¯´ï¼Œé€‰æ‹©ä»€ä¹ˆå¼€å‘æ¡†æ¶ï¼Œé€‰æ‹©ä»€ä¹ˆæ•°æ®åº“é‡Œï¼Œè¿è¡Œåœ¨ä»€ä¹ˆç¯å¢ƒé‡Œã€‚åœ¨ä¸€äº›å¤æ‚å’Œé«˜å¹¶å‘çš„åœºæ™¯ä¸­ï¼Œä¸ä»…è¦è€ƒè™‘ç¨‹åºçš„åŠŸèƒ½ï¼Œæ›´é‡è¦çš„æ˜¯å¥å£®æ€§å’Œå®‰å…¨æ€§ã€‚å®é™…ä¸Šï¼Œåœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œç¬¬ä¸€é‡è¦æ˜¯å®‰å…¨ï¼Œå…¶æ¬¡æ˜¯å¥å£®ï¼Œæœ€åæ‰æ˜¯åŠŸèƒ½ã€‚æ•´ä¸ªé¡¹ç›®æ¶æ„éœ€è¦åç«¯å·¥ç¨‹å¸ˆè¿›è¡Œåˆç†è®¾è®¡ï¼Œå½“ç„¶äº†ï¼Œé™¤äº†ä¸Šé¢è¯´çš„è¿™äº›ç‰¹æ€§ï¼Œé¡¹ç›®åº”å½“è¿˜è¦åšåˆ°æ˜“ç»´æŠ¤ã€‚å¦‚æœåšå‡ºæ¥çš„ç³»ç»Ÿåªæœ‰ä½ è‡ªå·±èƒ½æå®šï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚è®¾è®¡æ•°æ®åº“ï¼šåœ¨é¡¹ç›®å¼€å‘ä¹‹å‰ï¼Œå…ˆè®¾è®¡å¥½æ•°æ®åº“ã€‚ä¸€èˆ¬æŠŠéœ€è¦å­˜å‚¨çš„ç»“æ„åŒ–æ•°æ®è¿›è¡Œè¡¨ç»“æ„çš„è®¾è®¡ã€‚æ•°æ®åº“è®¾è®¡æ—¶éœ€è¦æ³¨æ„è¯­æ„åŒ–ï¼Œéœ€è¦ç»™äºˆå¤‡æ³¨çš„æ·»åŠ åˆç†çš„å¤‡æ³¨ã€‚é¡¹ç›®å¼€å‘ï¼šåœ¨é¡¹ç›®å¼€å‘å‰ï¼Œä¸€å®šè¦æŠŠå¼€å‘çš„åŠŸèƒ½ç‚¹æ•´ç†å‡ºæ¥ï¼Œå¹¶æŒ¨ä¸ªå®ç°ã€‚ç¼–ç å¼€å‘æ˜¯æ•´ä¸ªé¡¹ç›®æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æœ€èŠ±æ—¶é—´çš„éƒ¨åˆ†ã€‚é¡¹ç›®å¯¹æ¥ï¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¦ç¼–å†™å¼€å‘æ–‡æ¡£ï¼Œæ¥å£æ–‡æ¡£ï¼Œä¸å‰ç«¯å·¥ç¨‹å¸ˆä¸€èµ·å¯¹æ¥åŠŸèƒ½ã€‚é¡¹ç›®åæœŸï¼Œé…åˆæµ‹è¯•å·¥ç¨‹å¸ˆè¿›è¡Œé¡¹ç›®è´¨é‡æ£€æµ‹ï¼ŒåŠŸèƒ½æµ‹è¯•ã€‚æœ€åï¼Œé…åˆè¿ç»´åŒäº‹è¿›è¡Œé¡¹ç›®ä¸Šçº¿ã€‚å®é™…ä¸Šï¼Œè¦é«˜æ•ˆé«˜è´¨é‡åœ°å®Œæˆåç«¯å¼€å‘å·¥ä½œï¼Œéœ€è¦å­¦ä¹ å’Œä½œç”¨å¾ˆå¤šçŸ¥è¯†ã€‚è¿™äº›æŠ€èƒ½åŒ…æ‹¬ï¼šLinuxæ“ä½œèƒ½åŠ›ï¼Œç¼–ç èƒ½åŠ›ï¼Œæ•°æ®åº“è®¾è®¡èƒ½åŠ›ï¼Œæ–‡æ¡£ç¼–å†™èƒ½åŠ›ï¼Œè‹±æ–‡é˜…è¯»èƒ½åŠ›ï¼Œç»„ç»‡å’Œè®¾è®¡èƒ½åŠ›ã€‚ç­‰ç­‰ï¼Œéœ€è¦åœ¨å¹³æ—¶å·¥ä½œå’Œç”Ÿæ´»ä¸­ä¸æ–­å­¦ä¹ ï¼Œä¸æ–­æé«˜è‡ªå·±ã€‚å½“ç„¶ï¼Œä¸“ä¸šæŠ€æœ¯èƒ½åŠ›æ˜¯éœ€è¦ç”¨å¿ƒå­¦ä¹ å’Œæ€»ç»“ï¼Œå¦‚æœè¯´æŠ€æœ¯å¾ˆå®¹æ˜“åœ°å­¦ä¼šï¼Œå¾ˆå®¹æ˜“ç™»è¾¾é¡¶å³°ï¼Œé‚£å°±ä¸æ˜¯æŠ€æœ¯äº†ï¼" }, { "title": "2020å¹´ç»ˆæ€»ç»“--20å¹´å®é¼ ä¸æ˜“ï¼Œå¸Œæœ›21å¹´ç‰›è½¬ä¹¾å¤", "url": "/posts/reading_2020-year-end-summary.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 23:00:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-302020å¹´å°±è¦è¿‡å»äº†ï¼Œæƒ³ç€åŒ†åŒ†é£é€çš„æ—¶é—´ï¼Œè®©äººæ²‰æ€ï¼Œå·¥ä½œä¸€å¹´å¤šä»¥æ¥ï¼Œæˆ‘åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿå¹´åº•æ€»ç»“ä¸€ä¸‹è‡ªå·±çš„è¿‡å¤±ï¼Œä»¥ç§¯æå’Œå‹‡æ°”å»é¢å¯¹æœªæ¥ã€‚è‡ªä»2019å¹´7æœˆæ¯•ä¸šå¼€å§‹ï¼Œå†è¿‡ä¸¤å¤©å°±æ˜¯2021å¹´äº†ã€‚è¿™ä¸€å¹´å¤šçš„å·¥ä½œï¼Œæ”¶è·è®¸å¤šï¼Œä½†ä¹Ÿå› ä¸ºå¾ˆå¤šé—æ†¾æ„Ÿåˆ°å¿ƒç†æœ‰è½å·®ã€‚å¸Œæœ›2021å¹´ï¼Œæˆ‘ä»¬éƒ½èƒ½ç‰›è½¬ä¹¾å¤ï¼ŒåŠªåŠ›å®Œæˆç›®æ ‡ã€å®ç°æ„¿æœ›ã€‚ä»¥å‰åœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œæˆ‘å¹»æƒ³ç€å¤§åŸå¸‚çš„å·¥ä½œ...", "content": " æ’°å†™æ—¶é—´ï¼š2021ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-302020å¹´å°±è¦è¿‡å»äº†ï¼Œæƒ³ç€åŒ†åŒ†é£é€çš„æ—¶é—´ï¼Œè®©äººæ²‰æ€ï¼Œå·¥ä½œä¸€å¹´å¤šä»¥æ¥ï¼Œæˆ‘åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Ÿå¹´åº•æ€»ç»“ä¸€ä¸‹è‡ªå·±çš„è¿‡å¤±ï¼Œä»¥ç§¯æå’Œå‹‡æ°”å»é¢å¯¹æœªæ¥ã€‚è‡ªä»2019å¹´7æœˆæ¯•ä¸šå¼€å§‹ï¼Œå†è¿‡ä¸¤å¤©å°±æ˜¯2021å¹´äº†ã€‚è¿™ä¸€å¹´å¤šçš„å·¥ä½œï¼Œæ”¶è·è®¸å¤šï¼Œä½†ä¹Ÿå› ä¸ºå¾ˆå¤šé—æ†¾æ„Ÿåˆ°å¿ƒç†æœ‰è½å·®ã€‚å¸Œæœ›2021å¹´ï¼Œæˆ‘ä»¬éƒ½èƒ½ç‰›è½¬ä¹¾å¤ï¼ŒåŠªåŠ›å®Œæˆç›®æ ‡ã€å®ç°æ„¿æœ›ã€‚ä»¥å‰åœ¨å­¦æ ¡çš„æ—¶å€™ï¼Œæˆ‘å¹»æƒ³ç€å¤§åŸå¸‚çš„å·¥ä½œä¸ç”Ÿæ´»ã€‚å¯æƒ³ä¸åˆ°æ¯•ä¸šä¹‹åï¼Œæˆ‘å›äº†è€å®¶çš„å››çº¿åŸå¸‚ï¼Œè¿›äº†ä¸€å®¶å°å¤–åŒ…å…¬å¸ï¼Œä¸€å¾…å°±åˆ°2021å¹´äº†ã€‚è¿™é‡Œçš„äº’è”ç½‘ç¯å¢ƒå¯ä»¥è¯´è®©äººå¾ˆéš¾æƒ³è±¡ï¼Œå¦‚æœåœ¨è¿™åº§å°åŸå¸‚è¿˜èƒ½æ‰¾åˆ°ç¬¬äºŒå®¶è½¯ä»¶å…¬å¸çš„è¯åº”è¯¥æ˜¯ä¸ªå¥‡è¿¹ã€‚åœ¨è¿™ä¸€å¹´å¤šçš„æ—¶é—´é‡Œï¼Œå…¬å¸é‡Œæ¥æ¥èµ°èµ°å¥½å‡ ä¸ªäººäº†ã€‚ç›´åˆ°åˆ°ç°åœ¨ï¼Œå…¬å¸ä¹Ÿå°±ä¸è¿‡10äººã€‚ä¸‰ä¸ªåç«¯ä¸‰ä¸ªå‰ç«¯ã€ä¸€ä¸ªè®¾è®¡å¸ˆã€ä¸€ä¸ªè´¢åŠ¡å…¼äººäº‹ï¼ŒåŠ ä¸Šè€æ¿ï¼Œè€æ¿è‡ªå·±ä¹Ÿæ˜¯äº§å“ç»ç†ï¼Œå¼€å‘äººå‘˜è¿˜ç»å¸¸æ¢æ¥æ¢å»çš„ã€‚è¯´çœŸçš„ï¼Œåœ¨è¿™ä¸€å¹´å¤šï¼Œæœ‰æ—¶å€™æ„Ÿè§‰æŒºç´¯ã€‚çŸ­æ—¶é—´å†…éœ€è¦å®Œæˆçš„ä»»åŠ¡å¤ªå¤šï¼Œå¾ˆå¤šæ—¶å€™ç†¬å¤œåŠ ç­ã€‚ç®€å•çš„è¯´å¤–åŒ…å…¬å¸æ‰€åšçš„å°±æ˜¯å¸®åˆ«äººå†™ç¨‹åºï¼Œåœ¨è¿™æ ·çš„ç¯å¢ƒï¼Œå…¶å®æˆ‘ä»¬åšçš„é¡¹ç›®æ ¹æœ¬å°±æ²¡ä»€ä¹ˆæŠ€æœ¯å«é‡ï¼Œåœ¨æˆ‘çœ‹æ¥ä¹Ÿå°±æ˜¯æ— é™åœ°å †ç§¯åŠŸèƒ½è€Œå·²ã€‚åœ¨è¿™ä¸€å¹´å¤šï¼Œæœ€å¿™çš„æ—¶å€™æˆ‘ä¸€ä¸ªäººåŒæ—¶å†™ä¸‰ä¸ªé¡¹ç›®ã€‚è¿˜æœ‰å¾ˆå¤šæ—¶å€™ï¼Œå› ä¸ºäº§å“é€»è¾‘å­˜åœ¨æå¤§çš„æ¼æ´ï¼Œæˆ‘è¿˜éœ€è¦åˆ°ç°åœºä¸å®¢æˆ·æ²Ÿé€šã€‚ä»ä¸Šç­é‚£ä¸€åˆ»å¼€å§‹ï¼Œæˆ‘å‡ ä¹å°±æ˜¯ä¸€ä¸ªäººå•æ‰“ç‹¬æ–—ï¼Œæœ€å¤šä¸è¿‡å°±æ˜¯å’ŒæŠ€æœ¯æ€»ç›‘è®¨è®ºä¸€äº›æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œä½†æŠ€æœ¯æ€»ç›‘çš„å¾ˆå¤šè§‚ç‚¹æˆ‘éƒ½ä¸è®¤åŒã€‚åœ¨å°å¤–åŒ…çš„ç¯å¢ƒæ°›å›´ä¹‹ä¸‹ï¼ŒæŠ€æœ¯å®åœ¨æ²¡ä»€ä¹ˆå¯è°ˆçš„ï¼ŒèŠ±æœ€å°‘çš„æ—¶é—´åšæœ€å¤šçš„äº‹æ‰æ˜¯ä¸»è¦ç›®çš„ã€‚æ¥å…¬å¸ä¸¤ä¸‰ä¸ªæœˆåï¼Œé‡åˆ°é—®é¢˜éƒ½è‡ªå·±è§£å†³ï¼Œä¸å†æ±‚åŠ©ä»»ä½•äººã€‚åªæœ‰å‡ ä¸ªäººçš„å…¬å¸ï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆä»£ç è§„èŒƒï¼Œå¯èƒ½æ¯ä¸ªäººå†™çš„ä»£ç ä»–äººéƒ½æ‡’å¾—è¯»ã€‚æˆ‘å¾ˆæƒ³æé«˜è‡ªå·±çš„çœŸæ­£æŠ€èƒ½ï¼Œä½†åœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹ï¼Œæ˜¯åšä¸åˆ°çš„ã€‚å¹³æ—¶æˆ‘åªèƒ½å°½å¯èƒ½åœ°é˜…è¯»ç½‘ç»œä»£ç ï¼Œæˆ–é€šè¿‡é˜…è¯»æ–‡æ¡£çš„æ–¹å¼å­¦ä¹ ä¸€äº›å¼€å‘è§„èŒƒã€‚ä½†å®é™…ç”±äºé«˜å¼ºåº¦çš„å·¥ä½œï¼Œè‡ªå·±ç ”ç©¶æŠ€æœ¯çš„æ—¶é—´ä¹Ÿå¾ˆå°‘ã€‚æˆ‘å·¥ä½œçš„ä¸»è¦å†…å®¹æ˜¯ç”¨PHPå†™æœåŠ¡å™¨ç«¯ç¨‹åºï¼Œç»™å‰ç«¯æä¾›æ¥å£ã€‚ä¸€ä¸ªç³»ç»Ÿä»æ— åˆ°æœ‰éƒ½æ˜¯ä¸€ä¸ªäººï¼Œä»é€‰æ‹©æŠ€æœ¯æ–¹æ¡ˆï¼Œåˆ°æ•°æ®åº“è®¾è®¡ä¸æ¥å£å¼€å‘ï¼Œéƒ½æ˜¯ä¸€ä¸ªäººç‹¬ç«‹å®Œæˆã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘å‚ä¸çš„é¡¹ç›®ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦è‡ªå·±å¼€å‘å¯¹åº”çš„ç®¡ç†ç«¯å‰ç«¯ç¨‹åºã€‚ä¸€å¹´å¤šæ¥ï¼Œæˆ‘éƒ½åœ¨åšè¿™äº›ã€‚ä¹Ÿæ›¾åŠªåŠ›å»è§„èŒƒè‡ªå·±çš„ä»£ç ï¼Œä¼˜åŒ–ä»£ç ï¼Œä½†åˆ°å¤´æ¥æ„Ÿè§‰æŒæ¡åˆ°çš„çœŸæ­£æŠ€æœ¯å¾ˆå°‘å¾ˆå°‘ã€‚æ—¥å¤ä¸€æ—¥çš„æ•°æ®åº“å¢åˆ æ”¹æŸ¥ï¼Œè®©äººè§‰å¾—èº«å¿ƒç–²æƒ«ã€‚æˆ‘å¾ˆçƒ­çˆ±æŠ€æœ¯ï¼Œä½†æˆ‘ç°åœ¨çš„å·¥ä½œè®©è‡ªå·±æ„Ÿè§‰è‡ªå·±éƒ½ä¸æ˜¯ä¸€ä¸ªç¨‹åºå‘˜ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¯å¤©å¹²è‹¦åŠ›æ´»çš„æ¬è¿å·¥ã€‚åŒæ¯”ä¹‹ä¸‹çš„æˆ‘å®¤å‹ï¼Œæ¯•ä¸šä¹‹åå»åŒ—ä¸Šå¹¿ï¼Œæœˆå…¥è¿‡ä¸‡ï¼Œæ¯å¤©çš„å·¥ä½œæ²¡æœ‰é‚£ä¹ˆç´¯ã€‚ç¦åˆ©å¾…é‡å¾ˆæ˜¯è®©äººç¾¡æ…•ï¼Œè€Œæˆ‘æ¯å¤©æœ‰å¹²ä¸å®Œçš„å·¥ä½œï¼Œæ¯æœˆé¢†ç€å›ºå®šçš„å‡ åƒå…ƒæ­»å·¥èµ„ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œå…¬å¸å› ä¸ºèµ„é‡‘é—®é¢˜è¿˜æ‹–æ¬ å·¥èµ„ä¸å‘ã€‚å¦‚æœçœ‹åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šåŠæˆ‘ç«‹å³è¾èŒï¼ä½†æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±è¡¡é‡ä»·å€¼çš„ä¸€å¥—æ ‡å‡†ï¼Œåœ¨è¿™é‡Œå·¥ä½œï¼Œä¹Ÿæ˜¯æœ‰å…¶ä»–åŸå› çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿè¿˜æ˜¯å°½é‡æŠŠå·¥ä½œåšå¥½ï¼å¦‚æœè¦èµ°æŠ€æœ¯è¿™æ¡è·¯ï¼Œåº”å½“çœŸæ­£åœ°çƒ­çˆ±å®ƒã€‚å­¦ç”Ÿæ—¶æœŸï¼Œåº”å½“æŠ“å¥½åŸºç¡€èƒ½åŠ›ï¼Œè¿™åŒ…æ‹¬æ•°å­¦åŠŸåº•ã€è‹±è¯­é˜…è¯»èƒ½åŠ›ã€æ•°æ®ç»“æ„ä¸ç®—æ³•ï¼Œè¿™äº›æ˜¯æ¯ä¸ªæŠ€æœ¯äººå‘˜åº”æœ‰çš„å†…åœ¨åŠŸåº•ã€‚è‹¥æ˜¯åœ¨å·¥ä½œä¸­ï¼Œä¸è¯¥æ»¡è¶³äºç°çŠ¶ï¼Œæ›´ä¸è¦è§‰å¾—èº«è¾¹åŒäº‹æŠ€æœ¯ä¸å¦‚æˆ‘ä»¬å°±æ²¾æ²¾è‡ªå–œï¼åº”å½“æ—¶åˆ»ä¿æŒç§¯æå­¦ä¹ çš„æ€åº¦ï¼Œå‘æ¯”æˆ‘ä»¬ä¼˜ç§€çš„äººçœ‹é½ï¼æˆ‘æƒ³è‹¥æ˜¯å°†æ¥æœ‰æœºä¼šï¼Œæˆ‘ä¸€å®šä¼šåˆ°æˆ‘æƒ³å»çš„åœ°æ–¹ã€‚æˆ‘ä¹Ÿç›¸ä¿¡ï¼Œåœ¨æŠ€æœ¯è¿™æ¡è·¯ä¸Šçš„æ¯ä¸€æ®µç»å†ï¼Œéƒ½å¿…å°†æ˜¯æˆ‘ä»¬æˆé•¿ä¹‹è·¯ä¸Šæ°¸æ’æ— ä»·çš„è®°å¿†ï¼" }, { "title": "è‡ªå­¦ç¼–ç¨‹åˆå­¦è€…è¯¥åšçš„äº‹", "url": "/posts/reading_learn-programming-how-to-do-for-beginner.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 22:59:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-10-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸Šæ¬¡åˆ†äº«äº†ä¸€ç¯‡æ–‡ç« ï¼šã€Šå¦‚ä½•è‡ªå­¦ç¼–ç¨‹ï¼Ÿã€‹ï¼Œä»åˆå­¦è€…çš„è§’åº¦ç»™å¤§å®¶ä»‹ç»äº†ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µå’Œä¸€äº›æœ¯è¯­ã€‚ä»Šå¤©å°†ç»§ç»­ç»™å¤§å®¶åˆ†äº«ä¸€äº›çŸ¥è¯†å’Œä¸€äº›å»ºè®®ã€‚å¦‚æœä½ ä»¥ä¸€ä¸ªåˆå­¦è€…çš„èº«ä»½é€‰æ‹©äº†è¿™æ¡è·¯ï¼Œé‚£ä½ è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Ÿä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªAPPå¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªWebå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæˆ–è€…åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ ä¹Ÿå¯èƒ½æƒ³æˆä¸ºAIï¼ˆäººå·¥æ™ºèƒ½...", "content": " æ’°å†™æ—¶é—´ï¼š2018-10-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸Šæ¬¡åˆ†äº«äº†ä¸€ç¯‡æ–‡ç« ï¼šã€Šå¦‚ä½•è‡ªå­¦ç¼–ç¨‹ï¼Ÿã€‹ï¼Œä»åˆå­¦è€…çš„è§’åº¦ç»™å¤§å®¶ä»‹ç»äº†ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µå’Œä¸€äº›æœ¯è¯­ã€‚ä»Šå¤©å°†ç»§ç»­ç»™å¤§å®¶åˆ†äº«ä¸€äº›çŸ¥è¯†å’Œä¸€äº›å»ºè®®ã€‚å¦‚æœä½ ä»¥ä¸€ä¸ªåˆå­¦è€…çš„èº«ä»½é€‰æ‹©äº†è¿™æ¡è·¯ï¼Œé‚£ä½ è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Ÿä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªAPPå¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªWebå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæˆ–è€…åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ ä¹Ÿå¯èƒ½æƒ³æˆä¸ºAIï¼ˆäººå·¥æ™ºèƒ½ï¼‰å·¥ç¨‹å¸ˆæˆ–è€…å¤§æ•°æ®å·¥ç¨‹å¸ˆã€‚åœ¨ä½ å®ç°æ„¿æœ›ä¹‹å‰ï¼Œä½ å¿…é¡»æŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›çµæ´»è¿ç”¨è¿™é—¨ç¼–ç¨‹è¯­è¨€æ¥å®Œæˆä½ è¦å®Œæˆçš„ä»»åŠ¡ï¼Œè¿˜è¦ä¸æ–­åœ°å­¦ä¹ æ¥æé«˜è‡ªå·±çš„èƒ½åŠ›ã€‚æˆ‘ä»¬ç°åœ¨ä»¥æ‰¾æ±‚èŒä¸ºç›®çš„ï¼Œåˆ†æä¸€ä¸‹åº”è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œæ‰ä½¿è‡ªå·±èƒ½å°½å¿«åœ°æˆé•¿ã€‚å…ˆçœ‹çœ‹ç¼–ç¨‹è¯­è¨€çš„æ´»è·ƒåº¦æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å›½å¤–ç½‘å‹åˆ†äº«çš„åœ¨æŸä¸ªæ—¶é—´æ®µå†…ï¼Œå„å¤§ç¼–ç¨‹è¯­è¨€çš„å—æ¬¢è¿ç¨‹åº¦ï¼šä¸ºä»€ä¹ˆJavaScriptã€HTMLã€CSSåˆ†åˆ«æ’åå‰ä¸‰ï¼Ÿæˆ‘ä»¬ä¹Ÿå¯æƒ³è€ŒçŸ¥ï¼Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œæœ€åŸºç¡€çš„äº’è”ç½‘æ•°æ®æ˜¯ä»¥ç½‘é¡µçš„å½¢å¼ç»™ç”¨æˆ·å±•ç¤ºçš„ã€‚æ¯ä¸ªç½‘é¡µæœ€åŸºç¡€çš„æŠ€æœ¯å°±æ˜¯ä½¿ç”¨è¿™ä¸‰ç§è¯­è¨€æ¥å®ç°çš„ï¼Œè€Œç°åœ¨æ¯å¤©ä¼šæœ‰å¤§å¤§å°å°çš„ã€å¤§é‡çš„ç½‘ç«™è¢«ä¸Šçº¿ã€æ¯ä¸ªç½‘ç«™çš„æ•°æ®éšç€æ—¶é—´çš„æ”¹å˜ä¹Ÿä¼šä¸æ–­åœ°å¢åŠ ã€‚ç”±äºè¿™äº›åŸå› ï¼Œå°±èƒ½æœ€å¥½è§£é‡Šä¸ºä»€ä¹ˆJavaScriptã€HTMLã€CSSåœ¨æŸä¸ªæ—¶é—´æ®µå†…èƒ½æˆä¸ºä½¿ç”¨æœ€å¹¿çš„ç¼–ç¨‹è¯­è¨€äº†ã€‚å…¶æ¬¡ï¼Œåº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„äº¤äº’å°±æ˜¯é€šè¿‡SQLè¯­è¨€æ¥å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿèƒ½é¢„æƒ³åˆ°SQLè¯­è¨€ä¼šå æœ‰å¾ˆé«˜çš„åœ°ä½ã€‚æ´»è·ƒåº¦é«˜ä¸ä»£è¡¨å¼€å‘äººå‘˜éœ€æ±‚é«˜è™½ç„¶ä»ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¥çœ‹ï¼ŒJavaScript/CSS/HTMLå æœ‰éå¸¸é«˜çš„åœ°ä½ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½ä»£è¡¨ç›®å‰å¸‚åœºå¯¹å¼€å‘ç›¸å…³äººå‘˜éœ€è¦æœ€é«˜ã€‚å¦‚æœæˆ‘ä»¬æ˜¯ä»¥æ±‚èŒä¸ºç›®çš„è€Œè‡ªå­¦ç¼–ç¨‹ï¼Œè¯¥å¦‚ä½•é€‰æ‹©ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä½œä¸ºè‡ªå·±å…¥é—¨å­¦ä¹ è¯­è¨€çš„å¹¶ä½œä¸ºè‡ªå·±çš„å‘å±•æ–¹å‘ï¼Œé‚£ä¹ˆæœ€å¥½è¦ç»¼åˆè€ƒè™‘è‡ªå·±çš„å…´è¶£å’Œå¸‚åœºçš„å‘å±•å‰æ™¯ã€‚å…¶å®ï¼Œæˆ‘ä»¬çš„é•¿è¿œçš„ç›®æ ‡æ˜¯è‡³å°‘ç²¾é€šä¸€é—¨è¯­è¨€ï¼Œä½†ä¹Ÿè¦äº†è§£å…¶ä»–è¯­è¨€ã€‚æ˜ç¡®è‡ªå·±çš„èŒä¸šç›®æ ‡ï¼Œé€‰æ‹©å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„å­˜åœ¨éƒ½æœ‰å®ƒè‡ªå·±å­˜åœ¨çš„æ„ä¹‰ï¼Œæˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹è¯­è¨€çš„ç›®çš„å°±æ˜¯èƒ½é«˜æ•ˆåœ°ä½¿ç”¨å®ƒä»¬æ¥å¸®æˆ‘ä»¬å®Œæˆç›¸åº”çš„ä»»åŠ¡ã€‚å‡å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªè½¯ä»¶é¡¹ç›®çš„æ—¶å€™éœ€è¦é€‰æ‹©ä¸€é—¨è¯­è¨€ä½œä¸ºç¨‹åºçš„åç«¯è¯­è¨€ï¼Œå°±å¯ä»¥ä»Javaã€Pythonã€Golangã€PHPã€C++ã€C#ä¸­åšé€‰æ‹©ã€‚ä½†ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ ¹æ®é¡¹ç›®çš„ä¸åŒéœ€æ±‚æ¥é€‰æ‹©ä¸åŒçš„è¯­è¨€ï¼Œé‚£ä¹ˆåªæœ‰æŒæ¡äº†è¿™äº›è¯­è¨€æ‰ä½ è‡ªå·±æ‰èƒ½äº†è§£å¯¹ä½ è‡ªå·±æ¥è¯´ä»–ä»¬çš„ä¸€äº›ä¼˜ç¼ºç‚¹ï¼Œä¹Ÿæ‰èƒ½æ›´å¥½çš„ä½¿ç”¨ä»–ä»¬ã€‚å‡å¦‚ä½ éœ€è¦å¿«é€Ÿå¼€å‘ä¸€ä¸ªç½‘ç«™ï¼Œé€‰æ‹©PHPä¸é”™ï¼›å‡å¦‚ä½ å¸Œæœ›åŸºäºå¼€æºæ¡†æ¶ï¼Œåˆè¦æé«˜ä¸€ä¸‹ç¨‹åºçš„æ€§èƒ½ï¼Œé€‰æ‹©Javaå’ŒPythonä¹Ÿå¯ä»¥ï¼›å¦‚æœä½ æƒ³è¦ç¨‹åºåšåˆ°ååˆ†ç¨³å®šï¼Œå¯ä»¥é€‰æ‹©C++ï¼Œä¸è¿‡C++çš„å¼€å‘æˆæœ¬å¯èƒ½ä¼šæ›´é«˜ã€‚ä¸åŒçš„é¡¹ç›®å¾€å¾€æœ‰ä¸åŒéœ€æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè‡³å°‘è¦æŒæ¡ä¸€é—¨æŠ€æœ¯ã€‚ä½œä¸ºåˆå­¦è€…ï¼Œä½ è¦çŸ¥é“è‡ªå·±çš„ç›®æ ‡å’Œè‡ªå·±å–œæ¬¢çš„æ–¹å‘ï¼Œç„¶åé€‰æ‹©è‡ªå·±å…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š Android APPæ–¹å‘å­¦Javaçš„åŒæ—¶å­¦ä¹ Android APIï¼ŒæŒæ¡åˆ°ä¸€å®šç¨‹åº¦ä¹‹åç„¶åç»§ç»­å­¦ä¹ Kotlinï¼› Webå‰ç«¯æ–¹å‘é¦–å…ˆå­¦JavaScript/CSS/HTMLæœ€åŸºç¡€çš„çŸ¥è¯†ï¼Œè‡³å°‘ä½ è¦ä¼šç”¨å®ƒä»¬æ¥å®Œæˆä¸€ä¸ªç½‘é¡µä»£ç çš„ç¼–å†™ã€‚ç„¶åå°±æ˜¯å­¦ä¹ ä¸€äº›æ¡†æ¶ï¼Œèƒ½å¸®ä½ å¿«é€Ÿå®Œæˆå¼€å‘ï¼Œå¦‚jQueryåº“ã€BootStrapå“åº”å¼UIç»„ä»¶ï¼›è¿˜æœ‰å¤§åé¼é¼çš„Angular å’Œè¿‘å‡ å¹´æ¯”è¾ƒç«çš„Vue.jsï¼›è¿‘å‡ å¹´å¾ˆå¤šå…¬å¸ä¹Ÿå¢åŠ å¯¹å‰ç«¯å·¥ç¨‹å¸ˆçš„æŠ€èƒ½è¦æ±‚ï¼Œéœ€è¦æŒæ¡Node.jsåç«¯è¯­è¨€ï¼Œä¸è¿‡å®ƒåŸºäºJavaScriptï¼Œæœ‰äº†JavaScriptåŸºç¡€éƒ½å¾ˆå®¹æ˜“å­¦ä¹ ã€‚ åç«¯æ–¹å‘ä½œä¸ºåˆå­¦è€…ï¼Œä½ å¯ä»¥é€‰æ‹©Javaã€PHPã€Pythonä»»ä½•ä¸€é—¨è¯­è¨€ä½œä¸ºè‡ªå·±å­¦ä¹ çš„åç«¯è¯­è¨€ã€‚ä»–ä»¬ä¹Ÿéƒ½æ˜¯æ‹¥æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œæ“…é•¿ä¸åŒçš„é¢†åŸŸï¼Œå¦‚æœè¯´è¦å¿«é€Ÿå¼€å‘ä¸€ä¸ªç”¨æˆ·äº¤äº’çš„å°ç½‘ç«™ï¼Œå¯ä»¥è€ƒè™‘ä»PHPå¼€å§‹å­¦ä¹ ã€‚é€‰æ‹©ä»€ä¹ˆè¯­è¨€ã€ä»å“ªä¸ªæ–¹å‘æœ€å¥½å…¥é—¨ï¼Ÿè¿™é‡Œçš„ç­”æ¡ˆæ˜¯ï¼šå‰ç«¯å¼€å‘ã€‚å‰ç«¯å¼€å‘æ–¹å‘å¯¹å¤§å¤šæ•°äººæ¥è¯´åº”è¯¥æ˜¯æœ€å¥½å…¥é—¨çš„ï¼Œå› ä¸ºå­¦ä¹ é—¨æ§›ä½ï¼Œä»£ç ä¹Ÿå®¹æ˜“ç†è§£ã€‚å…¶å®åç«¯å·¥ç¨‹å¸ˆéƒ½æ˜¯è¦æŒæ¡å‰æ®µçš„åŸºç¡€ï¼Œåªæ˜¯ä»–ä»¬å¯ä»¥ä¸æ“…é•¿å‰ç«¯å¼€å‘è€Œå·²ã€‚å­¦æœŸå‰ç«¯çš„åŸºç¡€è¦æ±‚å¹¶ä¸é«˜ï¼Œä½ åªéœ€è¦ä¼šç”µè„‘çš„åŸºæœ¬æ“ä½œå’Œä¸€äº›ç®€å•çš„è‹±è¯­å•è¯ï¼Œå¯¹å­¦ä¹ æ¥è¯´å›°éš¾æ˜¯ä¸å¤§çš„ï¼Œä½†æ˜¯ä½ æƒ³è¦ç²¾é€šå´ä¸æ˜¯å®¹æ˜“çš„äº‹ã€‚ä¸€ä¸ªæˆåŠŸçš„ç½‘ç«™ï¼Œå‹å¥½çš„ç•Œé¢å’Œäººæ€§åŒ–çš„äº¤äº’æ–¹å¼å¿…å®šæ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚å¦‚æœä½ é€‰æ‹©å‰ç«¯æ–¹å‘ï¼Œé‚£ä¹ˆä½ æœ€ç»ˆçš„åº”è¯¥å…·å¤‡çš„èƒ½åŠ›æ˜¯ï¼šåœ¨ä½ è„‘æµ·ä¸­æƒ³åƒç¨‹åºç•Œé¢é•¿ä»€ä¹ˆæ ·å­ï¼Œæœ‰å“ªäº›åŠ¨ç”»ï¼Œä½ éƒ½èƒ½å¿«é€Ÿåœ°ä½¿ç”¨ä»£ç æ¥å®ç°ã€‚åˆå­¦çš„æ—¶å€™ï¼Œå…ˆä»æœ€åŸºæœ¬çš„HTMLæ ‡ç­¾å¼€å§‹ï¼ŒçŸ¥é“ä»–ä»¬çš„ç”¨å¤„ï¼Œå…¶æ¬¡è¦å­¦ä¼šä½¿ç”¨CSSè¯­è¨€æ¥å®šä¹‰HTMLç½‘é¡µçš„æ ·å¼ï¼Œæœ€åè¦ä¼šä½¿ç”¨JavaScriptæ¥æ“çºµHTMLæ ‡ç­¾ï¼Œæ”¹å˜ç½‘ç«™æ˜¾ç¤ºå†…å®¹ã€‚æ‰€ä»¥å­¦ä¹ è·¯çº¿å¾ˆæ¸…æ™°ï¼ŒHTML -&gt; CSS -&gt;JavaScript ï¼Œæœ€åè¦å­¦ä¹ å¸¸ç”¨çš„æ¡†æ¶ã€‚å“ªä¸ªå¼€å‘æ–¹å‘å®¹æ˜“æ‰¾åˆ°å·¥ä½œï¼Ÿå°±ç›®å‰æ•´ä¸ªè¡Œä¸šæ¥è¯´ï¼Œç¨‹åºå‘˜å¹¶ä¸åƒä»¥å‰é‚£ä¹ˆå¥½æ‰¾å·¥ä½œï¼Œå› ä¸ºè¿™å‡ å¹´ç¼–ç¨‹äººå‘˜è¶Šæ¥è¶Šå¤šã€‚ä½†æ˜¯ä½ åªè¦æœ‰èƒ½åŠ›å°±ä¸æ€•æ‰¾ä¸æ‰¾å·¥ä½œçš„ï¼Œå› ä¸ºä¸æ–­åœ°å‡ºç°åˆ›ä¸šå…¬å¸æä¾›å¾ˆå¤šå°±ä¸šæœºä¼šï¼Œå†µä¸”ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç¨‹åºå‘˜ï¼Œä½†æ˜¯å´æœ‰å¾ˆå¤šå…¬å¸æ‹›ä¸åˆ°é«˜çº§å·¥ç¨‹å¸ˆï¼Œæ‰€ä»¥æœ‰èƒ½åŠ›å¿…å®šæœ‰æœºé‡ã€‚é‚£ä¹ˆä¸ºäº†æ±‚èŒï¼Œæˆ‘ä»¬ä»å“ªä¸ªæ–¹é¢å…¥é—¨å­¦ä¹ å¯¹è‡ªå·±æœ€æœ‰åˆ©ï¼Ÿä»¥ä¸‹åˆ—å‡ºå‡ ä¸ªæ–¹å‘ å‰ç«¯å·¥ç¨‹å¸ˆä½ éœ€è¦å­¦ä¹ æœ€åŸºæœ¬çš„å‰ç«¯çŸ¥è¯†ï¼ŒæŒæ¡ä¸€ä¸ªå‰ç«¯ç½‘é¡µä»£ç çš„ç¼–å†™ä»»åŠ¡ï¼ŒåŒæ—¶ï¼Œè¦ä¼šä½¿ç”¨å„ç§çƒ­é—¨çš„å‰ç«¯æ¡†æ¶å¦‚jQueryã€Angularã€Vue.jsï¼Œæœ€å¥½è¿˜è¦æŒæ¡å¾®ä¿¡å°ç¨‹åºå¼€å‘ã€‚ PHPå·¥ç¨‹å¸ˆPHPå¯èƒ½æ˜¯æœ€é€‚åˆå¿«é€Ÿå¼€å‘ç½‘ç«™çš„ä¸€é—¨æœåŠ¡å™¨è¯­è¨€äº†ï¼Œç°åœ¨ä»å¾ˆå¤šç½‘ç«™éƒ½èƒ½æ‰¾åˆ°PHPçš„èº«å½±ï¼Œæ‰€ä»¥å¸‚åœºä¸Šæœ‰å¾ˆå¤šPHPå·¥ç¨‹å¸ˆçš„å²—ä½ã€‚ Javaåç«¯å·¥ç¨‹å¸ˆJavaå¾ˆé€‚åˆä½œä¸ºå‰åç«¯åˆ†ç¦»ç¨‹åºä¸­çš„åç«¯è¯­è¨€ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ç¼–è¯‘ç±»å‹è¯­è¨€ï¼Œå¾ˆå®¹æ˜“å‡çº§ä¸ç»´æŠ¤ï¼Œå¹¶ä¸”Javaæœ‰å¾ˆå¤šå¼€æºæ¡†æ¶ï¼Œå¯ä»¥è¯´Javaæ˜¯éå¸¸çƒ­é—¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¾ˆå¤šå¤§å…¬å¸éƒ½æ˜¯ä½¿ç”¨Javaæ¥å¤„ç†é‡è¦çš„ä¸šåŠ¡ã€‚ Pythonåç«¯å·¥ç¨‹å¸ˆPythonä»£ç æœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯æ¯”è¾ƒç®€æ´ï¼ŒPythonæœ¬èº«å°è£…äº†å¾ˆå¤šåº“ï¼Œæœ‰æ—¶å€™å®ç°ä¸€ä¸ªåŠŸèƒ½åªè¦ä¸€è¡Œä»£ç å°±æå®šï¼Œç‰¹åˆ«åœ¨ç®—æ³•æ–¹é¢è¡¨ç°å‡ºè‰²ï¼›åœ¨Webå¼€å‘ä¸Šï¼Œä¹Ÿæœ‰å¾ˆå¤šå…¬å¸ä½¿ç”¨Pythonæ¥ä½œä¸ºä»–ä»¬çš„åç«¯è¯­è¨€ã€‚å¦‚æœä½ æ³¨æ„çœ‹æ‹›è˜ç½‘ç«™çš„è¯ï¼Œè¿™å‡ ä¸ªèŒä½åº”è¯¥æ˜¯ä¸€ç›´åœ¨æ‹›äººã€‚æˆ‘ä»¬å¯ä»¥ç”¨åŠå¹´æˆ–è€…ä¸€å¹´çš„æ—¶é—´ï¼Œä»é›¶å¼€å§‹å­¦ä¹ ï¼Œå°±å¯ä»¥æŒæ¡å¯¹ä¸€ä¸ªå·¥ä½œå²—ä½çš„å¼€å‘åŸºç¡€ã€‚æ¨èä½¿ç”¨Javaä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€å…ˆè¯´è¯´æˆ‘è‡ªå·±çš„ç»å†ï¼Œæˆ‘å¤§å­¦å¼€å§‹æ¥è§¦ç¼–ç¨‹ã€‚ç”±äºè‡ªå·±ç†è§£èƒ½åŠ›ä¸æ˜¯å¾ˆå¼ºï¼Œæ‰€ä»¥å½“æ—¶å­¦ä¹ Cè¯­è¨€æ¯”è¾ƒè´¹åŠ²ã€‚ç¬¬ä¸€å­¦æœŸå°±æœ‰Cè¯­è¨€è¯¾ç¨‹ï¼Œå½“æ—¶æŒºæœ‰çƒ­æƒ…çš„ï¼Œä¸è¿‡è¯¾å¤–æ—¶é—´æ²¡èŠ±å¤šå°‘æ—¶é—´ï¼Œä¸»è¦æ˜¯å½“æ—¶çš„è¯¾ç¨‹ä»»åŠ¡å¤ªé‡äº†ï¼Œå‡ ä¹æ»¡è¯¾ï¼Œå‘¨ç›®è¿˜è¦å†™å¾ˆå¤šä½œä¸šã€‚ä½†æ˜¯ä¸€ä¸ªå­¦æœŸè¿‡å»äº†æˆ‘éƒ½ä¸çŸ¥åˆ°å®ƒåˆ°åº•èƒ½åšä»€ä¹ˆï¼Œå½“æ—¶å§‹ç»ˆéš¾ä»¥ç†è§£i++å’Œ++içš„æ„æ€ã€‚æˆ‘åŒå­¦ä¹Ÿä¸€æ ·ï¼Œå¾ˆå¤šäººéƒ½è¡¨ç¤ºå¤´ç–¼ã€‚æˆ‘å»ºè®®ï¼Œå¦‚æœä½ ä¸æ˜¯è®¡ç®—æœºç›¸å…³ä¸“ä¸šçš„ï¼Œå†µä¸”æƒ³è¦é€šè¿‡è‡ªå­¦èµ°ç¼–ç¨‹è¿™æ¡è·¯ï¼Œå°½é‡ä¸è¦ä»¥Cè¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œå®ƒå¯èƒ½ä¼šè®©ä½ å¤±å»ä¿¡å¿ƒã€‚é€‰æ‹©ä½ å–œæ¬¢çš„ã€å†µä¸”å®¹æ˜“æ‰¾åˆ°å·¥ä½œçš„ä¸€é—¨æŠ€æœ¯ï¼Œç„¶åå­¦ä¹ å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™åº”è¯¥æ˜¯æœ€æ˜æ™ºçš„é€‰æ‹©ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•åŸºç¡€ï¼Œä½ ä¹Ÿæœ‰å……æ²›çš„æ—¶é—´ï¼Œå­¦ä¹ ä»€ä¹ˆæœ€å¥½ï¼Ÿå¦‚æœä½ è¦èµ°ç¼–ç¨‹è¿™æ¡é“è·¯ï¼Œå°†æ¥å¿…å®šä¼šæ¥è§¦å¾ˆå¤šç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆé€‰æ‹©ä»€ä¹ˆè¯­è¨€èƒ½å¿«é€Ÿæé«˜è‡ªå·±çš„æŠ€èƒ½ï¼Ÿæˆ‘ååˆ†æ¨èJavaï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š Javaæ˜¯ä¸€é—¨çº¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å­¦ä¹ JavaåŸºç¡€ï¼Œä½ èƒ½æŒæ¡é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ï¼Œè™½ç„¶è¿˜æœ‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¹Ÿæœ‰é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œä½†æ˜¯Javaæ˜¯çº¯é¢å‘å¯¹è±¡çš„ï¼Œä½¿ç”¨Javaä½ èƒ½ä½“ä¼šåˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ•´ä¸ªè¿‡ç¨‹ï¼› Javaè¯­æ³•ååˆ†ä¸¥æ ¼Javaæ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€ï¼Œæºä»£ç é€šè¿‡ç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ‰èƒ½è¿è¡Œã€‚ç¼–è¯‘å‹çš„è¯­è¨€è¯­æ³•è¦æ±‚ååˆ†ä¸¥æ ¼ï¼Œå®¹ä¸ä¸‹ä¸€ç‚¹è¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥å­¦ä¹ Javaä½ ä¼šä¹ æƒ¯æ€§åœ°æ³¨é‡ä¸€äº›ç¨‹åºçš„ç»†èŠ‚ã€‚ç­‰ä½ æŒæ¡äº†Javaï¼Œå†æ¥å­¦ä¹ C/C++çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ååˆ†å®¹æ˜“ã€‚ Javaæ‹¥æœ‰ä¸°å¯Œçš„å¼€æºåº“ æœ‰å¼ºå¤§çš„å¼€æºç¤¾åŒºæ”¯æŒï¼ŒJavaæ‹¥æœ‰éå¸¸å¤šçš„æˆç†Ÿçš„å¼€æºåº“ï¼ŒJavaä¹Ÿæ˜¯ç›®å‰åç«¯å¼€å‘ä¸­ä½¿ç”¨æœ€å¤šçš„è¯­è¨€ï¼Œæ‰€ä»¥ä½ åœ¨å­¦ä¹ çš„æ—¶å€™å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå®Œå…¨å¯ä»¥ä»ç½‘ä¸Šæ‰¾åˆ°è§£å†³åŠæ³•ï¼Œå¯¹è‡ªå·±çš„è‡ªå­¦ä¹‹è·¯å¾ˆæœ‰å¸®åŠ©ã€‚ä»¥ä¸Šå°±æ˜¯è¿™æ¬¡ç»™å¤§å®¶åˆ†äº«çš„å†…å®¹ï¼Œå½“ç„¶éƒ½æ˜¯è‡ªå·±çš„è§‚ç‚¹ã€‚åœ¨çœŸæ­£é€‰æ‹©è‡ªå·±å­¦ä¹ æ–¹å‘çš„æ—¶å€™ä½ éœ€è¦ç»¼åˆè€ƒè™‘è‡ªèº«çš„æƒ…å†µå†åšå‡ºæœ€å¥½çš„é€‰æ‹©ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå­¦ä¸€é—¨æŠ€æœ¯ï¼Œä½ è¦çœŸæ­£çš„ä¼šä½¿ç”¨å®ƒï¼Œèƒ½ç”¨å®ƒç‹¬ç«‹å®Œæˆç›¸åº”çš„é¡¹ç›®ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„å­¦åˆ°çŸ¥è¯†ã€‚æ–‡ç« åŸåˆ›é¦–å‘è‡ªå¾®ä¿¡è®¢é˜…å·ï¼šæå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½" }, { "title": "è‡ªå­¦ç¼–ç¨‹æ—¶æ€æ ·é€‰æ‹©å…¥é—¨è¯­è¨€ï¼Ÿ", "url": "/posts/reading_learn-programming-select-language.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 22:53:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-10-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸Šæ¬¡åˆ†äº«äº†ä¸€ç¯‡æ–‡ç« ï¼šã€Šå¦‚ä½•è‡ªå­¦ç¼–ç¨‹ï¼Ÿã€‹ï¼Œä»åˆå­¦è€…çš„è§’åº¦ç»™å¤§å®¶ä»‹ç»äº†ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µå’Œä¸€äº›æœ¯è¯­ã€‚ä»Šå¤©å°†ç»§ç»­ç»™å¤§å®¶åˆ†äº«ä¸€äº›çŸ¥è¯†å’Œä¸€äº›å»ºè®®ã€‚å¦‚æœä½ ä»¥ä¸€ä¸ªåˆå­¦è€…çš„èº«ä»½é€‰æ‹©äº†è¿™æ¡è·¯ï¼Œé‚£ä½ è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Ÿä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªAPPå¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªWebå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæˆ–è€…åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ ä¹Ÿå¯èƒ½æƒ³æˆä¸ºAIï¼ˆäººå·¥æ™ºèƒ½...", "content": " æ’°å†™æ—¶é—´ï¼š2018-10-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸Šæ¬¡åˆ†äº«äº†ä¸€ç¯‡æ–‡ç« ï¼šã€Šå¦‚ä½•è‡ªå­¦ç¼–ç¨‹ï¼Ÿã€‹ï¼Œä»åˆå­¦è€…çš„è§’åº¦ç»™å¤§å®¶ä»‹ç»äº†ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µå’Œä¸€äº›æœ¯è¯­ã€‚ä»Šå¤©å°†ç»§ç»­ç»™å¤§å®¶åˆ†äº«ä¸€äº›çŸ¥è¯†å’Œä¸€äº›å»ºè®®ã€‚å¦‚æœä½ ä»¥ä¸€ä¸ªåˆå­¦è€…çš„èº«ä»½é€‰æ‹©äº†è¿™æ¡è·¯ï¼Œé‚£ä½ è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Ÿä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªAPPå¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ å¯èƒ½æƒ³æˆä¸ºä¸€ä¸ªWebå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæˆ–è€…åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼›ä½ ä¹Ÿå¯èƒ½æƒ³æˆä¸ºAIï¼ˆäººå·¥æ™ºèƒ½ï¼‰å·¥ç¨‹å¸ˆæˆ–è€…å¤§æ•°æ®å·¥ç¨‹å¸ˆã€‚åœ¨ä½ å®ç°æ„¿æœ›ä¹‹å‰ï¼Œä½ å¿…é¡»æŒæ¡ä¸€é—¨ç¼–ç¨‹è¯­è¨€åŸºç¡€ï¼Œå¹¶ä¸”æœ‰èƒ½åŠ›çµæ´»è¿ç”¨è¿™é—¨ç¼–ç¨‹è¯­è¨€æ¥å®Œæˆä½ è¦å®Œæˆçš„ä»»åŠ¡ï¼Œè¿˜è¦ä¸æ–­åœ°å­¦ä¹ æ¥æé«˜è‡ªå·±çš„èƒ½åŠ›ã€‚æˆ‘ä»¬ç°åœ¨ä»¥æ‰¾æ±‚èŒä¸ºç›®çš„ï¼Œåˆ†æä¸€ä¸‹åº”è¯¥é€‰æ‹©ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œæ‰ä½¿è‡ªå·±èƒ½å°½å¿«åœ°æˆé•¿ã€‚å…ˆçœ‹çœ‹ç¼–ç¨‹è¯­è¨€çš„æ´»è·ƒåº¦æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å›½å¤–ç½‘å‹åˆ†äº«çš„åœ¨æŸä¸ªæ—¶é—´æ®µå†…ï¼Œå„å¤§ç¼–ç¨‹è¯­è¨€çš„å—æ¬¢è¿ç¨‹åº¦ï¼šä¸ºä»€ä¹ˆJavaScriptã€HTMLã€CSSåˆ†åˆ«æ’åå‰ä¸‰ï¼Ÿæˆ‘ä»¬ä¹Ÿå¯æƒ³è€ŒçŸ¥ï¼Œåœ¨äº’è”ç½‘æ—¶ä»£ï¼Œæœ€åŸºç¡€çš„äº’è”ç½‘æ•°æ®æ˜¯ä»¥ç½‘é¡µçš„å½¢å¼ç»™ç”¨æˆ·å±•ç¤ºçš„ã€‚æ¯ä¸ªç½‘é¡µæœ€åŸºç¡€çš„æŠ€æœ¯å°±æ˜¯ä½¿ç”¨è¿™ä¸‰ç§è¯­è¨€æ¥å®ç°çš„ï¼Œè€Œç°åœ¨æ¯å¤©ä¼šæœ‰å¤§å¤§å°å°çš„ã€å¤§é‡çš„ç½‘ç«™è¢«ä¸Šçº¿ã€æ¯ä¸ªç½‘ç«™çš„æ•°æ®éšç€æ—¶é—´çš„æ”¹å˜ä¹Ÿä¼šä¸æ–­åœ°å¢åŠ ã€‚ç”±äºè¿™äº›åŸå› ï¼Œå°±èƒ½æœ€å¥½è§£é‡Šä¸ºä»€ä¹ˆJavaScriptã€HTMLã€CSSåœ¨æŸä¸ªæ—¶é—´æ®µå†…èƒ½æˆä¸ºä½¿ç”¨æœ€å¹¿çš„ç¼–ç¨‹è¯­è¨€äº†ã€‚å…¶æ¬¡ï¼Œåº”ç”¨ç¨‹åºä¸æ•°æ®åº“çš„äº¤äº’å°±æ˜¯é€šè¿‡SQLè¯­è¨€æ¥å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿèƒ½é¢„æƒ³åˆ°SQLè¯­è¨€ä¼šå æœ‰å¾ˆé«˜çš„åœ°ä½ã€‚æ´»è·ƒåº¦é«˜ä¸ä»£è¡¨å¼€å‘äººå‘˜éœ€æ±‚é«˜è™½ç„¶ä»ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¥çœ‹ï¼ŒJavaScript/CSS/HTMLå æœ‰éå¸¸é«˜çš„åœ°ä½ã€‚ä½†æ˜¯ä¹Ÿä¸èƒ½ä»£è¡¨ç›®å‰å¸‚åœºå¯¹å¼€å‘ç›¸å…³äººå‘˜éœ€è¦æœ€é«˜ã€‚å¦‚æœæˆ‘ä»¬æ˜¯ä»¥æ±‚èŒä¸ºç›®çš„è€Œè‡ªå­¦ç¼–ç¨‹ï¼Œè¯¥å¦‚ä½•é€‰æ‹©ä¸€é—¨ç¼–ç¨‹è¯­è¨€ä½œä¸ºè‡ªå·±å…¥é—¨å­¦ä¹ è¯­è¨€çš„å¹¶ä½œä¸ºè‡ªå·±çš„å‘å±•æ–¹å‘ï¼Œé‚£ä¹ˆæœ€å¥½è¦ç»¼åˆè€ƒè™‘è‡ªå·±çš„å…´è¶£å’Œå¸‚åœºçš„å‘å±•å‰æ™¯ã€‚å…¶å®ï¼Œæˆ‘ä»¬çš„é•¿è¿œçš„ç›®æ ‡æ˜¯è‡³å°‘ç²¾é€šä¸€é—¨è¯­è¨€ï¼Œä½†ä¹Ÿè¦äº†è§£å…¶ä»–è¯­è¨€ã€‚æ˜ç¡®è‡ªå·±çš„èŒä¸šç›®æ ‡ï¼Œé€‰æ‹©å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€æ¯ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„å­˜åœ¨éƒ½æœ‰å®ƒè‡ªå·±å­˜åœ¨çš„æ„ä¹‰ï¼Œæˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹è¯­è¨€çš„ç›®çš„å°±æ˜¯èƒ½é«˜æ•ˆåœ°ä½¿ç”¨å®ƒä»¬æ¥å¸®æˆ‘ä»¬å®Œæˆç›¸åº”çš„ä»»åŠ¡ã€‚å‡å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªè½¯ä»¶é¡¹ç›®çš„æ—¶å€™éœ€è¦é€‰æ‹©ä¸€é—¨è¯­è¨€ä½œä¸ºç¨‹åºçš„åç«¯è¯­è¨€ï¼Œå°±å¯ä»¥ä»Javaã€Pythonã€Golangã€PHPã€C++ã€C#ä¸­åšé€‰æ‹©ã€‚ä½†ä¸åŒçš„ç¼–ç¨‹è¯­è¨€æœ‰ä¸åŒçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ ¹æ®é¡¹ç›®çš„ä¸åŒéœ€æ±‚æ¥é€‰æ‹©ä¸åŒçš„è¯­è¨€ï¼Œé‚£ä¹ˆåªæœ‰æŒæ¡äº†è¿™äº›è¯­è¨€æ‰ä½ è‡ªå·±æ‰èƒ½äº†è§£å¯¹ä½ è‡ªå·±æ¥è¯´ä»–ä»¬çš„ä¸€äº›ä¼˜ç¼ºç‚¹ï¼Œä¹Ÿæ‰èƒ½æ›´å¥½çš„ä½¿ç”¨ä»–ä»¬ã€‚å‡å¦‚ä½ éœ€è¦å¿«é€Ÿå¼€å‘ä¸€ä¸ªç½‘ç«™ï¼Œé€‰æ‹©PHPä¸é”™ï¼›å‡å¦‚ä½ å¸Œæœ›åŸºäºå¼€æºæ¡†æ¶ï¼Œåˆè¦æé«˜ä¸€ä¸‹ç¨‹åºçš„æ€§èƒ½ï¼Œé€‰æ‹©Javaå’ŒPythonä¹Ÿå¯ä»¥ï¼›å¦‚æœä½ æƒ³è¦ç¨‹åºåšåˆ°ååˆ†ç¨³å®šï¼Œå¯ä»¥é€‰æ‹©C++ï¼Œä¸è¿‡C++çš„å¼€å‘æˆæœ¬å¯èƒ½ä¼šæ›´é«˜ã€‚ä¸åŒçš„é¡¹ç›®å¾€å¾€æœ‰ä¸åŒéœ€æ±‚ï¼Œé‚£ä¹ˆæˆ‘ä»¬é¦–å…ˆè‡³å°‘è¦æŒæ¡ä¸€é—¨æŠ€æœ¯ã€‚ä½œä¸ºåˆå­¦è€…ï¼Œä½ è¦çŸ¥é“è‡ªå·±çš„ç›®æ ‡å’Œè‡ªå·±å–œæ¬¢çš„æ–¹å‘ï¼Œç„¶åé€‰æ‹©è‡ªå·±å…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å»ºè®®ï¼š Android APPæ–¹å‘å­¦Javaçš„åŒæ—¶å­¦ä¹ Android APIï¼ŒæŒæ¡åˆ°ä¸€å®šç¨‹åº¦ä¹‹åç„¶åç»§ç»­å­¦ä¹ Kotlinï¼› Webå‰ç«¯æ–¹å‘é¦–å…ˆå­¦JavaScript/CSS/HTMLæœ€åŸºç¡€çš„çŸ¥è¯†ï¼Œè‡³å°‘ä½ è¦ä¼šç”¨å®ƒä»¬æ¥å®Œæˆä¸€ä¸ªç½‘é¡µä»£ç çš„ç¼–å†™ã€‚ç„¶åå°±æ˜¯å­¦ä¹ ä¸€äº›æ¡†æ¶ï¼Œèƒ½å¸®ä½ å¿«é€Ÿå®Œæˆå¼€å‘ï¼Œå¦‚jQueryåº“ã€BootStrapå“åº”å¼UIç»„ä»¶ï¼›è¿˜æœ‰å¤§åé¼é¼çš„Angular å’Œè¿‘å‡ å¹´æ¯”è¾ƒç«çš„Vue.jsï¼›è¿‘å‡ å¹´å¾ˆå¤šå…¬å¸ä¹Ÿå¢åŠ å¯¹å‰ç«¯å·¥ç¨‹å¸ˆçš„æŠ€èƒ½è¦æ±‚ï¼Œéœ€è¦æŒæ¡Node.jsåç«¯è¯­è¨€ï¼Œä¸è¿‡å®ƒåŸºäºJavaScriptï¼Œæœ‰äº†JavaScriptåŸºç¡€éƒ½å¾ˆå®¹æ˜“å­¦ä¹ ã€‚ åç«¯æ–¹å‘ä½œä¸ºåˆå­¦è€…ï¼Œä½ å¯ä»¥é€‰æ‹©Javaã€PHPã€Pythonä»»ä½•ä¸€é—¨è¯­è¨€ä½œä¸ºè‡ªå·±å­¦ä¹ çš„åç«¯è¯­è¨€ã€‚ä»–ä»¬ä¹Ÿéƒ½æ˜¯æ‹¥æœ‰è‡ªå·±çš„ç‰¹æ€§ï¼Œæ“…é•¿ä¸åŒçš„é¢†åŸŸï¼Œå¦‚æœè¯´è¦å¿«é€Ÿå¼€å‘ä¸€ä¸ªç”¨æˆ·äº¤äº’çš„å°ç½‘ç«™ï¼Œå¯ä»¥è€ƒè™‘ä»PHPå¼€å§‹å­¦ä¹ ã€‚é€‰æ‹©ä»€ä¹ˆè¯­è¨€ã€ä»å“ªä¸ªæ–¹å‘æœ€å¥½å…¥é—¨ï¼Ÿè¿™é‡Œçš„ç­”æ¡ˆæ˜¯ï¼šå‰ç«¯å¼€å‘ã€‚å‰ç«¯å¼€å‘æ–¹å‘å¯¹å¤§å¤šæ•°äººæ¥è¯´åº”è¯¥æ˜¯æœ€å¥½å…¥é—¨çš„ï¼Œå› ä¸ºå­¦ä¹ é—¨æ§›ä½ï¼Œä»£ç ä¹Ÿå®¹æ˜“ç†è§£ã€‚å…¶å®åç«¯å·¥ç¨‹å¸ˆéƒ½æ˜¯è¦æŒæ¡å‰æ®µçš„åŸºç¡€ï¼Œåªæ˜¯ä»–ä»¬å¯ä»¥ä¸æ“…é•¿å‰ç«¯å¼€å‘è€Œå·²ã€‚å­¦æœŸå‰ç«¯çš„åŸºç¡€è¦æ±‚å¹¶ä¸é«˜ï¼Œä½ åªéœ€è¦ä¼šç”µè„‘çš„åŸºæœ¬æ“ä½œå’Œä¸€äº›ç®€å•çš„è‹±è¯­å•è¯ï¼Œå¯¹å­¦ä¹ æ¥è¯´å›°éš¾æ˜¯ä¸å¤§çš„ï¼Œä½†æ˜¯ä½ æƒ³è¦ç²¾é€šå´ä¸æ˜¯å®¹æ˜“çš„äº‹ã€‚ä¸€ä¸ªæˆåŠŸçš„ç½‘ç«™ï¼Œå‹å¥½çš„ç•Œé¢å’Œäººæ€§åŒ–çš„äº¤äº’æ–¹å¼å¿…å®šæ˜¯ä¸€ä¸ªé‡è¦çš„éƒ¨åˆ†ã€‚å¦‚æœä½ é€‰æ‹©å‰ç«¯æ–¹å‘ï¼Œé‚£ä¹ˆä½ æœ€ç»ˆçš„åº”è¯¥å…·å¤‡çš„èƒ½åŠ›æ˜¯ï¼šåœ¨ä½ è„‘æµ·ä¸­æƒ³åƒç¨‹åºç•Œé¢é•¿ä»€ä¹ˆæ ·å­ï¼Œæœ‰å“ªäº›åŠ¨ç”»ï¼Œä½ éƒ½èƒ½å¿«é€Ÿåœ°ä½¿ç”¨ä»£ç æ¥å®ç°ã€‚åˆå­¦çš„æ—¶å€™ï¼Œå…ˆä»æœ€åŸºæœ¬çš„HTMLæ ‡ç­¾å¼€å§‹ï¼ŒçŸ¥é“ä»–ä»¬çš„ç”¨å¤„ï¼Œå…¶æ¬¡è¦å­¦ä¼šä½¿ç”¨CSSè¯­è¨€æ¥å®šä¹‰HTMLç½‘é¡µçš„æ ·å¼ï¼Œæœ€åè¦ä¼šä½¿ç”¨JavaScriptæ¥æ“çºµHTMLæ ‡ç­¾ï¼Œæ”¹å˜ç½‘ç«™æ˜¾ç¤ºå†…å®¹ã€‚æ‰€ä»¥å­¦ä¹ è·¯çº¿å¾ˆæ¸…æ™°ï¼ŒHTML -&gt; CSS -&gt;JavaScript ï¼Œæœ€åè¦å­¦ä¹ å¸¸ç”¨çš„æ¡†æ¶ã€‚å“ªä¸ªå¼€å‘æ–¹å‘å®¹æ˜“æ‰¾åˆ°å·¥ä½œï¼Ÿå°±ç›®å‰æ•´ä¸ªè¡Œä¸šæ¥è¯´ï¼Œç¨‹åºå‘˜å¹¶ä¸åƒä»¥å‰é‚£ä¹ˆå¥½æ‰¾å·¥ä½œï¼Œå› ä¸ºè¿™å‡ å¹´ç¼–ç¨‹äººå‘˜è¶Šæ¥è¶Šå¤šã€‚ä½†æ˜¯ä½ åªè¦æœ‰èƒ½åŠ›å°±ä¸æ€•æ‰¾ä¸æ‰¾å·¥ä½œçš„ï¼Œå› ä¸ºä¸æ–­åœ°å‡ºç°åˆ›ä¸šå…¬å¸æä¾›å¾ˆå¤šå°±ä¸šæœºä¼šï¼Œå†µä¸”ï¼Œè™½ç„¶æœ‰å¾ˆå¤šç¨‹åºå‘˜ï¼Œä½†æ˜¯å´æœ‰å¾ˆå¤šå…¬å¸æ‹›ä¸åˆ°é«˜çº§å·¥ç¨‹å¸ˆï¼Œæ‰€ä»¥æœ‰èƒ½åŠ›å¿…å®šæœ‰æœºé‡ã€‚é‚£ä¹ˆä¸ºäº†æ±‚èŒï¼Œæˆ‘ä»¬ä»å“ªä¸ªæ–¹é¢å…¥é—¨å­¦ä¹ å¯¹è‡ªå·±æœ€æœ‰åˆ©ï¼Ÿä»¥ä¸‹åˆ—å‡ºå‡ ä¸ªæ–¹å‘ å‰ç«¯å·¥ç¨‹å¸ˆä½ éœ€è¦å­¦ä¹ æœ€åŸºæœ¬çš„å‰ç«¯çŸ¥è¯†ï¼ŒæŒæ¡ä¸€ä¸ªå‰ç«¯ç½‘é¡µä»£ç çš„ç¼–å†™ä»»åŠ¡ï¼ŒåŒæ—¶ï¼Œè¦ä¼šä½¿ç”¨å„ç§çƒ­é—¨çš„å‰ç«¯æ¡†æ¶å¦‚jQueryã€Angularã€Vue.jsï¼Œæœ€å¥½è¿˜è¦æŒæ¡å¾®ä¿¡å°ç¨‹åºå¼€å‘ã€‚ PHPå·¥ç¨‹å¸ˆPHPå¯èƒ½æ˜¯æœ€é€‚åˆå¿«é€Ÿå¼€å‘ç½‘ç«™çš„ä¸€é—¨æœåŠ¡å™¨è¯­è¨€äº†ï¼Œç°åœ¨ä»å¾ˆå¤šç½‘ç«™éƒ½èƒ½æ‰¾åˆ°PHPçš„èº«å½±ï¼Œæ‰€ä»¥å¸‚åœºä¸Šæœ‰å¾ˆå¤šPHPå·¥ç¨‹å¸ˆçš„å²—ä½ã€‚ Javaåç«¯å·¥ç¨‹å¸ˆJavaå¾ˆé€‚åˆä½œä¸ºå‰åç«¯åˆ†ç¦»ç¨‹åºä¸­çš„åç«¯è¯­è¨€ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€é—¨å®Œå…¨é¢å‘å¯¹è±¡çš„ç¼–è¯‘ç±»å‹è¯­è¨€ï¼Œå¾ˆå®¹æ˜“å‡çº§ä¸ç»´æŠ¤ï¼Œå¹¶ä¸”Javaæœ‰å¾ˆå¤šå¼€æºæ¡†æ¶ï¼Œå¯ä»¥è¯´Javaæ˜¯éå¸¸çƒ­é—¨çš„ç¼–ç¨‹è¯­è¨€ï¼Œå¾ˆå¤šå¤§å…¬å¸éƒ½æ˜¯ä½¿ç”¨Javaæ¥å¤„ç†é‡è¦çš„ä¸šåŠ¡ã€‚ Pythonåç«¯å·¥ç¨‹å¸ˆPythonä»£ç æœ‰ä¸€ä¸ªç‰¹ç‚¹æ˜¯æ¯”è¾ƒç®€æ´ï¼ŒPythonæœ¬èº«å°è£…äº†å¾ˆå¤šåº“ï¼Œæœ‰æ—¶å€™å®ç°ä¸€ä¸ªåŠŸèƒ½åªè¦ä¸€è¡Œä»£ç å°±æå®šï¼Œç‰¹åˆ«åœ¨ç®—æ³•æ–¹é¢è¡¨ç°å‡ºè‰²ï¼›åœ¨Webå¼€å‘ä¸Šï¼Œä¹Ÿæœ‰å¾ˆå¤šå…¬å¸ä½¿ç”¨Pythonæ¥ä½œä¸ºä»–ä»¬çš„åç«¯è¯­è¨€ã€‚å¦‚æœä½ æ³¨æ„çœ‹æ‹›è˜ç½‘ç«™çš„è¯ï¼Œè¿™å‡ ä¸ªèŒä½åº”è¯¥æ˜¯ä¸€ç›´åœ¨æ‹›äººã€‚æˆ‘ä»¬å¯ä»¥ç”¨åŠå¹´æˆ–è€…ä¸€å¹´çš„æ—¶é—´ï¼Œä»é›¶å¼€å§‹å­¦ä¹ ï¼Œå°±å¯ä»¥æŒæ¡å¯¹ä¸€ä¸ªå·¥ä½œå²—ä½çš„å¼€å‘åŸºç¡€ã€‚æ¨èä½¿ç”¨Javaä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€å…ˆè¯´è¯´æˆ‘è‡ªå·±çš„ç»å†ï¼Œæˆ‘å¤§å­¦å¼€å§‹æ¥è§¦ç¼–ç¨‹ã€‚ç”±äºè‡ªå·±ç†è§£èƒ½åŠ›ä¸æ˜¯å¾ˆå¼ºï¼Œæ‰€ä»¥å½“æ—¶å­¦ä¹ Cè¯­è¨€æ¯”è¾ƒè´¹åŠ²ã€‚ç¬¬ä¸€å­¦æœŸå°±æœ‰Cè¯­è¨€è¯¾ç¨‹ï¼Œå½“æ—¶æŒºæœ‰çƒ­æƒ…çš„ï¼Œä¸è¿‡è¯¾å¤–æ—¶é—´æ²¡èŠ±å¤šå°‘æ—¶é—´ï¼Œä¸»è¦æ˜¯å½“æ—¶çš„è¯¾ç¨‹ä»»åŠ¡å¤ªé‡äº†ï¼Œå‡ ä¹æ»¡è¯¾ï¼Œå‘¨ç›®è¿˜è¦å†™å¾ˆå¤šä½œä¸šã€‚ä½†æ˜¯ä¸€ä¸ªå­¦æœŸè¿‡å»äº†æˆ‘éƒ½ä¸çŸ¥åˆ°å®ƒåˆ°åº•èƒ½åšä»€ä¹ˆï¼Œå½“æ—¶å§‹ç»ˆéš¾ä»¥ç†è§£i++å’Œ++içš„æ„æ€ã€‚æˆ‘åŒå­¦ä¹Ÿä¸€æ ·ï¼Œå¾ˆå¤šäººéƒ½è¡¨ç¤ºå¤´ç–¼ã€‚æˆ‘å»ºè®®ï¼Œå¦‚æœä½ ä¸æ˜¯è®¡ç®—æœºç›¸å…³ä¸“ä¸šçš„ï¼Œå†µä¸”æƒ³è¦é€šè¿‡è‡ªå­¦èµ°ç¼–ç¨‹è¿™æ¡è·¯ï¼Œå°½é‡ä¸è¦ä»¥Cè¯­è¨€ä½œä¸ºå…¥é—¨å­¦ä¹ è¯­è¨€ï¼Œå®ƒå¯èƒ½ä¼šè®©ä½ å¤±å»ä¿¡å¿ƒã€‚é€‰æ‹©ä½ å–œæ¬¢çš„ã€å†µä¸”å®¹æ˜“æ‰¾åˆ°å·¥ä½œçš„ä¸€é—¨æŠ€æœ¯ï¼Œç„¶åå­¦ä¹ å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™åº”è¯¥æ˜¯æœ€æ˜æ™ºçš„é€‰æ‹©ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•åŸºç¡€ï¼Œä½ ä¹Ÿæœ‰å……æ²›çš„æ—¶é—´ï¼Œå­¦ä¹ ä»€ä¹ˆæœ€å¥½ï¼Ÿå¦‚æœä½ è¦èµ°ç¼–ç¨‹è¿™æ¡é“è·¯ï¼Œå°†æ¥å¿…å®šä¼šæ¥è§¦å¾ˆå¤šç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆé€‰æ‹©ä»€ä¹ˆè¯­è¨€èƒ½å¿«é€Ÿæé«˜è‡ªå·±çš„æŠ€èƒ½ï¼Ÿæˆ‘ååˆ†æ¨èJavaï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š Javaæ˜¯ä¸€é—¨çº¯é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€å­¦ä¹ JavaåŸºç¡€ï¼Œä½ èƒ½æŒæ¡é¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸºç¡€ï¼Œè™½ç„¶è¿˜æœ‰å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¹Ÿæœ‰é¢å‘å¯¹è±¡ç‰¹æ€§ï¼Œä½†æ˜¯Javaæ˜¯çº¯é¢å‘å¯¹è±¡çš„ï¼Œä½¿ç”¨Javaä½ èƒ½ä½“ä¼šåˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ•´ä¸ªè¿‡ç¨‹ï¼› Javaè¯­æ³•ååˆ†ä¸¥æ ¼Javaæ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€ï¼Œæºä»£ç é€šè¿‡ç¼–è¯‘ä¹‹åç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶æ‰èƒ½è¿è¡Œã€‚ç¼–è¯‘å‹çš„è¯­è¨€è¯­æ³•è¦æ±‚ååˆ†ä¸¥æ ¼ï¼Œå®¹ä¸ä¸‹ä¸€ç‚¹è¯­æ³•é”™è¯¯ï¼Œæ‰€ä»¥å­¦ä¹ Javaä½ ä¼šä¹ æƒ¯æ€§åœ°æ³¨é‡ä¸€äº›ç¨‹åºçš„ç»†èŠ‚ã€‚ç­‰ä½ æŒæ¡äº†Javaï¼Œå†æ¥å­¦ä¹ C/C++çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°ååˆ†å®¹æ˜“ã€‚ Javaæ‹¥æœ‰ä¸°å¯Œçš„å¼€æºåº“ æœ‰å¼ºå¤§çš„å¼€æºç¤¾åŒºæ”¯æŒï¼ŒJavaæ‹¥æœ‰éå¸¸å¤šçš„æˆç†Ÿçš„å¼€æºåº“ï¼ŒJavaä¹Ÿæ˜¯ç›®å‰åç«¯å¼€å‘ä¸­ä½¿ç”¨æœ€å¤šçš„è¯­è¨€ï¼Œæ‰€ä»¥ä½ åœ¨å­¦ä¹ çš„æ—¶å€™å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå®Œå…¨å¯ä»¥ä»ç½‘ä¸Šæ‰¾åˆ°è§£å†³åŠæ³•ï¼Œå¯¹è‡ªå·±çš„è‡ªå­¦ä¹‹è·¯å¾ˆæœ‰å¸®åŠ©ã€‚ä»¥ä¸Šå°±æ˜¯è¿™æ¬¡ç»™å¤§å®¶åˆ†äº«çš„å†…å®¹ï¼Œå½“ç„¶éƒ½æ˜¯è‡ªå·±çš„è§‚ç‚¹ã€‚åœ¨çœŸæ­£é€‰æ‹©è‡ªå·±å­¦ä¹ æ–¹å‘çš„æ—¶å€™ä½ éœ€è¦ç»¼åˆè€ƒè™‘è‡ªèº«çš„æƒ…å†µå†åšå‡ºæœ€å¥½çš„é€‰æ‹©ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå­¦ä¸€é—¨æŠ€æœ¯ï¼Œä½ è¦çœŸæ­£çš„ä¼šä½¿ç”¨å®ƒï¼Œèƒ½ç”¨å®ƒç‹¬ç«‹å®Œæˆç›¸åº”çš„é¡¹ç›®ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„å­¦åˆ°çŸ¥è¯†ã€‚æ–‡ç« åŸåˆ›é¦–å‘è‡ªå¾®ä¿¡è®¢é˜…å·ï¼šæå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½" }, { "title": "å¦‚ä½•è‡ªå­¦ç¼–ç¨‹ï¼Ÿ", "url": "/posts/reading_learn-programming-by-self.html", "categories": "éšç¬”", "tags": "", "date": "2023-01-30 20:53:00 +0800", "snippet": "ä¸€ã€è¯´æ˜ ç¬¬ä¸€æ¬¡å‘å¸ƒæ—¶é—´ï¼š2018-06-13 09:35ï¼Œä»¥ä¸‹ç›¸å…³å†…å®¹æ˜¯åœ¨2018å¹´æ‰€å†™è¿™ç¯‡æ–‡ç« æˆ‘å°†ä»¥æˆ‘è‡ªå­¦ç¼–ç¨‹çš„ç»å†ã€è‡ªå·±é‡åˆ°çš„å‘ã€å¦‚ä½•è§£å†³é—®é¢˜ç­‰æ–¹é¢ï¼Œç»™åˆå­¦è€…æœ‹å‹ä»¬åˆ†äº«è‡ªå·±çš„ç»éªŒï¼Œå¸Œæœ›å¯¹æ­£åœ¨è‡ªå­¦ç¼–ç¨‹çš„ä½ æœ‰å¸®åŠ©ã€‚å¦‚æœå“ªé‡Œè¯´çš„ä¸å¯¹ï¼Œä¹Ÿå¸Œæœ›å¾—åˆ°æ‰¹è¯„æŒ‡æ­£ï¼äºŒã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿ (1)å› ä¸ºçˆ±å¥½ï¼šå¦‚æœä½ å¯¹ä¿¡æ¯æŠ€æœ¯å……æ»¡æ¿€æƒ…ä¸çˆ±å¥½ï¼Œæ—¥å¸¸å–œæ¬¢ç ”ç©¶ç”µè„‘ã€æ™ºèƒ½æ‰‹æœºç­‰ï¼Œæƒ³è¦æŒæ¡è®¡ç®—æœºæ›´å¤šçš„çŸ¥è¯†ï¼Œæƒ³è®©è‡ªå·±...", "content": "ä¸€ã€è¯´æ˜ ç¬¬ä¸€æ¬¡å‘å¸ƒæ—¶é—´ï¼š2018-06-13 09:35ï¼Œä»¥ä¸‹ç›¸å…³å†…å®¹æ˜¯åœ¨2018å¹´æ‰€å†™è¿™ç¯‡æ–‡ç« æˆ‘å°†ä»¥æˆ‘è‡ªå­¦ç¼–ç¨‹çš„ç»å†ã€è‡ªå·±é‡åˆ°çš„å‘ã€å¦‚ä½•è§£å†³é—®é¢˜ç­‰æ–¹é¢ï¼Œç»™åˆå­¦è€…æœ‹å‹ä»¬åˆ†äº«è‡ªå·±çš„ç»éªŒï¼Œå¸Œæœ›å¯¹æ­£åœ¨è‡ªå­¦ç¼–ç¨‹çš„ä½ æœ‰å¸®åŠ©ã€‚å¦‚æœå“ªé‡Œè¯´çš„ä¸å¯¹ï¼Œä¹Ÿå¸Œæœ›å¾—åˆ°æ‰¹è¯„æŒ‡æ­£ï¼äºŒã€ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿ (1)å› ä¸ºçˆ±å¥½ï¼šå¦‚æœä½ å¯¹ä¿¡æ¯æŠ€æœ¯å……æ»¡æ¿€æƒ…ä¸çˆ±å¥½ï¼Œæ—¥å¸¸å–œæ¬¢ç ”ç©¶ç”µè„‘ã€æ™ºèƒ½æ‰‹æœºç­‰ï¼Œæƒ³è¦æŒæ¡è®¡ç®—æœºæ›´å¤šçš„çŸ¥è¯†ï¼Œæƒ³è®©è‡ªå·±å­¦ä¼šå¼€å‘å‡ºè‡ªå·±çš„æ¡Œé¢è½¯ä»¶ã€ç½‘ç«™ã€APPã€‚ (2)æƒ³è¦è·å¾—é«˜è–ªèµ„çš„å·¥ä½œï¼šITè¡Œä¸šçš„å·¥èµ„ç›¸å¯¹äºä¼ ç»Ÿè¡Œä¸šæ¥è¯´å·¥èµ„æ˜¯æ¯”è¾ƒé«˜çš„ï¼ŒITè¡Œä¸šé€‚ç”¨é¢†åŸŸå¾ˆå¹¿é˜”ï¼Œé¤é¥®ã€äº¤é€šã€ç‰©æµã€åŒ»ç–—ã€é‡‘èã€æ•™è‚²ç­‰å„å¤§è¡Œä¸šéƒ½ç¦»ä¸å¼€ITè¡Œä¸šçš„æ”¯æŒï¼Œå¦‚æœæŒæ¡è¿™ä¸ªè¡Œä¸šçš„ä¸€é—¨æŠ€æœ¯ï¼Œé‚£åƒé¥­æ˜¯ä¸æˆé—®é¢˜çš„ï¼Œèƒ½ä¸èƒ½åƒå¥½é¥­å°±çœ‹è‡ªå·±äº†ã€‚å½“ç„¶ï¼Œä½ æœ€å¥½è‡ªå·±å–œæ¬¢è¿™ä¸ªè¡Œä¸šï¼Œå–œæ¬¢ä¿¡æ¯æŠ€æœ¯ï¼Œç„¶ååšæŒå¾€è¿™ä¸ªæ–¹å‘å‘å±•ã€‚å¦‚æœä»…ä»…æ˜¯æƒ³è¦èµšé’±ï¼Œä¹Ÿè®¸ç¼–ç¨‹ä¸é€‚åˆä½ ã€‚å¦‚æœèƒ½æŠŠè‡ªå·±çš„å¯¹ä¿¡æ¯æŠ€æœ¯çš„çƒ­çˆ±æŠ•èº«åˆ°è‡ªå·±çš„å·¥ä½œèŒä¸šä¸­ï¼Œè¿™æ˜¯æœ€å¥½çš„ã€‚æ¥ä¸‹æ¥çš„æ–‡ç« ä¸­ï¼Œæˆ‘å‡è®¾ä»¥æ±‚èŒä¸ºç›®æ ‡ï¼Œæ¥ç»™å¤§å®¶åˆ†äº«è‡ªå­¦ç¼–ç¨‹çš„ç»éªŒã€‚ä¸‰ã€æ€ä¹ˆé€šä¿—æ˜“æ‡‚åœ°ç†è§£è½¯ä»¶å¼€å‘ ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯ç¼–ç¨‹ï¼Ÿç®€å•çš„ç†è§£å°±æ˜¯é€šè¿‡æŸç§ç¼–ç¨‹è¯­è¨€ï¼Œç¼–å†™ç‰¹å®šä»£ç æŒ‡ä»¤ã€æ‰§è¡Œä»£ç ï¼Œè®©è®¡ç®—æœºå¸®åŠ©æˆ‘ä»¬åšä¸€äº›è®¡ç®—ã€æ‰§è¡Œä¸€äº›ä»»åŠ¡ï¼Œç­‰ç­‰ã€‚ ï¼ˆ2ï¼‰ç¼–ç¨‹çš„æœ€ç»ˆç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿæ›´é€šä¿—çš„è¯´ç¼–å†™ä»£ç çš„å¤§å¤šæ•°ç»ˆç›®çš„æ˜¯å¼€å‘ä¸€å¥—å®Œæ•´çš„è½¯ä»¶ç³»ç»Ÿï¼Œæˆ‘ä»¬çŸ¥é“è½¯ä»¶å¯ä»¥å¸®æˆ‘ä»¬åšå¾ˆå¤šäº‹ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä½¿ç”¨QQè½¯ä»¶å’Œæœ‹å‹èŠå¤©ã€ä½¿ç”¨ç™¾åº¦ç½‘ç«™æœç´¢èµ„æ–™ã€åœ¨è®ºå›ç½‘ç«™ä¸Šé—®é—®é¢˜ã€ä½¿ç”¨WPSè½¯ä»¶ç¼–å†™æ–‡æ¡£ã€ä½¿ç”¨PSè½¯ä»¶å¤„ç†å›¾ç‰‡ï¼Œç­‰ç­‰ã€‚è¿™äº›éƒ½æ˜¯è½¯ä»¶ï¼Œé€šè¿‡å¼€å‘è€…ç¼–å†™ä»£ç ã€æ‰“åŒ…ã€ä¸Šçº¿ç­‰å¤šä¸ªæ­¥éª¤ï¼Œæœ€åå½¢æˆä¸€å¥—å®Œæ•´çš„ç¨‹åºï¼Œä¾›ç”¨æˆ·ä½¿ç”¨ã€‚ ï¼ˆ3ï¼‰B/Sæ¶æ„å’ŒC/Sæ¶æ„ç°åœ¨å¸‚é¢ä¸Šçš„è½¯ä»¶å¦‚æœæŒ‰ç…§æŸç§ç‰¹å®šåˆ†ç±»æ–¹æ³•å¯åˆ†ä¸ºä¸¤ç§ï¼š B(Browser)/S(Server)æ¶æ„ï¼ˆæµè§ˆå™¨/æœåŠ¡å™¨ï¼‰å’ŒCï¼ˆClientï¼‰/Sï¼ˆServerï¼‰æ¶æ„ï¼ˆå®¢æˆ·ç«¯/æœåŠ¡å™¨ï¼‰ã€‚å½“ç„¶ï¼Œè¿˜æœ‰å•æœºè½¯ä»¶ï¼Œç°åœ¨è¿˜æœ‰éƒ¨åˆ†è½¯ä»¶æ˜¯ä¸éœ€è¦è”ç½‘å°±å¯ä»¥ä¸ºäººä»¬æä¾›æœåŠ¡çš„ï¼Œæ¯”å¦‚è¯´å¾ˆå¤šäººæ‰‹æœºä¸Šè®¡ç®—å™¨APPã€‚ç®€å•çš„è¯´ï¼Œä½¿ç”¨æµè§ˆå™¨æ‰“å¼€çš„ç½‘ç«™æ˜¯B/Sæ¶æ„çš„è½¯ä»¶ï¼Œè€Œç›´æ¥æ‰“å¼€å®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯C/Sæ¶æ„çš„è½¯ä»¶ã€‚ ï¼ˆ4ï¼‰é‚£ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Ÿç¼–ç¨‹è¯­è¨€æ˜¯ç”¨æ¥å®šä¹‰è®¡ç®—æœºç¨‹åºçš„å½¢å¼è¯­è¨€ã€‚äººä¸äººäº¤æµä½¿ç”¨çš„æ˜¯æ±‰è¯­ã€è‹±è¯­ã€é˜¿æ‹‰ä¼¯è¯­ç­‰ç­‰ï¼Œè€Œäººä¸è®¡ç®—æœºäº¤æµä½¿ç”¨çš„å°±æ˜¯è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œé€šè¿‡ç¼–å†™ç‰¹å®šçš„ä»£ç ç‰‡æ®µè®©è®¡ç®—æœºç†è§£æˆ‘ä»¬çš„æ„å›¾ã€‚äºæ˜¯åæ¥æœ‰äº†å¾ˆå¤šç§è®¡ç®—æœºç¼–ç¨‹è¯­è¨€ï¼Œå¦‚C++ã€C#ã€Javaã€JavaScriptã€PHPã€Kotlinï¼Œæ±‡ç¼–è¯­è¨€ç­‰ç­‰ã€‚å››ã€è®¤è¯†ç¨‹åºå‘˜ï¼ˆè½¯ä»¶å¼€å‘è€…ï¼‰è¿™ä¸ªå·¥ä½œèŒåŠ¡ ï¼ˆ1ï¼‰è½¯ä»¶å¼€å‘è€…åº”è‡³å°‘åº”è¯¥å…·å¤‡ä»€ä¹ˆèƒ½åŠ›ï¼Ÿå°±ç°åœ¨çš„ç¤¾ä¼šéœ€æ±‚æ¥è¯´ï¼Œä½œä¸ºè½¯ä»¶å¼€å‘è€…ï¼Œæˆ‘ä»¬åº”è¯¥è‡³å°‘æ‡‚å¾—ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶ä¸”èƒ½åˆ©ç”¨è½¯ä»¶å¼€å‘ä½¿ç”¨è¿™ç§ç¼–ç¨‹è¯­è¨€åœ¨å®é™…å·¥ä½œä¸­å®Œæˆç›¸åº”çš„å·¥ä½œï¼Œè‡³å°‘è¿™æ ·æ‰æ˜¯ä¸€ä¸ªåˆæ ¼è½¯ä»¶å¼€å‘è€…ã€‚ç°åœ¨å¾ˆå¤šè½¯ä»¶å¼€å‘é¡¹ç›®ä¸­éƒ½æ˜¯ç”±å¤šä¸ªäººæ¥å®Œæˆçš„ï¼Œé‚£ä¹ˆå¿…å®šç”±ä¸€ä¸ªå¼€å‘è€…è´Ÿè´£å¼€å‘ç¯èŠ‚ä¸­ç‰¹å®šçš„ä»»åŠ¡ï¼Œå¦‚javaåç«¯å·¥ç¨‹å¸ˆç¼–å†™ä¸æ•°æ®äº¤äº’çš„ä»£ç é€»è¾‘ï¼ŒAndroidå·¥ç¨‹å¸ˆè´Ÿè´£ç¼–å†™Android APPï¼ŒIOSå·¥ç¨‹å¸ˆè´Ÿè´£ç¼–å†™iPhone APP,ç­‰ç­‰ã€‚ ï¼ˆ2ï¼‰è½¯ä»¶å¼€å‘è€…åº”è¯¥é•¿æœŸå…·å¤‡ä»€ä¹ˆèƒ½åŠ›ï¼Ÿé¦–å…ˆï¼šä¸æ–­å­¦ä¹ ã€‚åœ¨è½¯ä»¶å¼€å‘è¿™ä¸ªé¢†åŸŸä¸­ï¼Œå¼€å‘æŠ€æœ¯ä¸æ–­çš„æ›´æ–°ä¸å˜åŒ–ï¼Œå¦‚æœæƒ³è¦å…·å¤‡ç«äº‰èƒ½åŠ›ï¼Œé‚£å°±å¿…é¡»ä¸æ–­çš„å­¦ä¹ ï¼Œè€Œä¸æ˜¯é•¿æœŸä»¥åŸæœ‰çš„æŠ€æœ¯æ··é¥­åƒï¼Œå¦‚æœçœŸæ˜¯è¿™æ ·ï¼Œæœ€ç»ˆæ˜¯è¦è¢«æ·˜æ±°çš„ã€‚è¿™ä¸ªè¡Œä¸šä¸é€‚åˆæƒ³è¦ä¸€åŠ³æ°¸é€¸çš„äººã€‚åœ¨è¿™ä¸ªè¡Œä¸šå¿…é¡»ä¸æ–­å­¦ä¹ ã€åˆ›æ–°ï¼Œä½ å¿…é¡»å…·å¤‡ä¸æ€•è‹¦ä¸æ€•ç´¯çš„åˆ›ä¸šç²¾ç¥ã€‚å…¶æ¬¡ï¼šåšä¸€ä¸ªæœ‰è®¡åˆ’çš„äººï¼šä½ åº”è¯¥æ—¶æ—¶æœ‰å±æœºæ„Ÿï¼Œé‚£ä¹ˆå°±ç»™è‡ªå·±åˆ¶å®šè®¡åˆ’ï¼Œä¸ç®¡æ˜¯çŸ­æœŸè®¡åˆ’è¿˜æ˜¯é•¿æœŸè®¡åˆ’ï¼Œæœç€é‚£ä¸ªç›®æ ‡åŠªåŠ›ï¼Œä½ ä¼šè¶Šæ¥è¶Šä¼˜ç§€ã€‚ä½ æ˜¯ä¸€ä¸ªåˆçº§ç¨‹åºå‘˜ï¼Œä½ åº”è¯¥æœç€é«˜çº§ç¨‹åºå‘˜çš„ç›®æ ‡åŠªåŠ›ï¼›ä½ ä¸€ä¸ªé«˜çº§ç¨‹åºå‘˜ï¼Œä½ åº”è¯¥æœç€æ¶æ„å¸ˆçš„ç›®æ ‡åŠªåŠ›ï¼›è€Œå½“ä½ æˆä¸ºäº†æ¶æ„å¸ˆï¼Œä½ åº”è¯¥æœç€ç®¡ç†è€…çš„ç›®æ ‡åŠªåŠ›ã€‚åªæœ‰åšå¥½è®¡åˆ’ï¼Œå¹¶éšç€æ—¶é—´çš„æ”¹å˜è€Œæ”¹å˜ï¼Œæœç€ç›®æ ‡åŠªåŠ›ï¼Œä½ æ‰èƒ½ä¸æ–­å®ç°è‡ªå·±çš„ä»·å€¼ã€‚æ— ã€æ²¡æœ‰ç¼–ç¨‹åŸºç¡€ï¼Œæˆ‘è¯¥æ€ä¹ˆå…¥é—¨ï¼Ÿæˆ‘ç›¸ä¿¡è¿™æ˜¯å¤§å¤šåˆå­¦è€…å›°æƒ‘çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯é˜»ç¢å¾ˆå¤šåˆå­¦è€…å­¦ä¹ è¿›åº¦çš„é—®é¢˜ã€‚ä½ ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹å­¦ä¹ ï¼Œæˆ–è€…ä¸çŸ¥é“ä»ä½•å¼€å§‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¥è‡ªå·±çš„å­¦ä¹ ç»å†ï¼Œç»™å¤§å®¶æä¾›ä¸€äº›å»ºè®®ï¼Œå¸Œæœ›å¯¹ä½ æœ‰å¸®åŠ©ã€‚ ï¼ˆ1ï¼‰ä½ åº”è¯¥å…·å¤‡ä»€ä¹ˆåŸºç¡€ï¼šè‡ªå­¦ä½ è‡³å°‘å¾—æœ‰ä¸€å°è‡ªå·±ç”µè„‘ï¼Œè¿™å°ç”µè„‘ä¸éœ€è¦é…ç½®æœ‰å¤šé«˜ï¼Œé™¤éä½ å­¦ä¹ çš„æ˜¯å¼€å‘å¤§å‹3Dæ¸¸æˆã€‚ä¼ ç»Ÿçš„å¼€å‘å­¦ä¹ ï¼Œæ™®é€šç¬”è®°æœ¬ã€å°å¼æœºéƒ½å¯ä»¥çš„ï¼Œä½†æ˜¯å¿…é¡»å¾—æœ‰ç½‘ç»œï¼Œå› ä¸ºä½ éœ€è¦ä»ç½‘ç»œä¸Šè·å–è¿™ç§å­¦ä¹ èµ„æ–™ï¼Œå†µä¸”æˆ‘ä»¬æ˜¯åœ¨å­¦ä¹ ä¿¡æ¯æŠ€æœ¯ï¼Œæ²¡æœ‰ç½‘ç»œæ€ä¹ˆå¯èƒ½ï¼Œæƒ³ä¸€æƒ³å¤šå¯æ€•ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œä½ è¦å–œæ¬¢å®ƒå†å»å­¦å®ƒï¼Œå¦‚æœä¸å–œæ¬¢å®ƒï¼Œå­¦äº†åˆæœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ ï¼ˆ2ï¼‰æ•°å­¦ã€è‹±è¯­ä¸å¥½ï¼Œèƒ½å­¦å¥½ç¼–ç¨‹å—ï¼Ÿå°±è¿™ä¹ˆè¯´å§ï¼Œå¦‚æœä½ æ„Ÿè§‰è‡ªå·±æ•°å­¦ä¸å¥½ï¼Œä½†æ˜¯ä½ å–œæ¬¢ä¿¡æ¯æŠ€æœ¯æ–¹é¢ï¼Œä½ å°±å¥½å¥½å­¦å§ï¼Œä½ æ˜¯èƒ½å­¦å¥½ç¼–ç¨‹çš„ã€‚æˆ‘çš„æ•°å­¦å’Œè‹±è¯­çœŸçš„æ˜¯è¶…çº§ä¸å¥½ï¼ŒåŸå› æ˜¯æˆ‘ä¸å–œæ¬¢å®ƒä»¬ã€‚ç¼–ç¨‹çš„é€»è¾‘æ€§æŒºå¼ºçš„ï¼Œä½†æ˜¯ä¸ä»£è¡¨ä½ çš„æ•°å­¦ä¸å¥½ä½ çš„ç¼–ç¨‹å°±å­¦çš„å·®ï¼Œå®ƒä»¬æœ¬å°±ä¸æ˜¯ä¸€ä¸ªå›äº‹ï¼Œè™½ç„¶ç¼–ç¨‹å¾ˆå¤šæ—¶å€™ç”¨äºç§‘å­¦è®¡ç®—æ–¹é¢ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬å­¦ä¹ ç¼–ç¨‹æ˜¯ä¸ºäº†å¼€å‘åº”ç”¨è½¯ä»¶ï¼Œä¸ºçš„æ˜¯æ‰¾å·¥ä½œï¼Œç¼–ç¨‹æœ¬å°±æ²¡æœ‰é‚£ä¹ˆåˆ«äººè¯´çš„é‚£ä¹ˆéš¾ã€‚è‹±è¯­ä¸å¥½å‘¢ï¼Ÿé‚£ä¹Ÿå¯ä»¥å­¦å¥½çš„ã€‚è®¡ç®—æœºå‘å±•æŠ€æœ¯æºè‡ªè¥¿æ–¹ï¼Œè¥¿æ–¹äººåœ¨è¿™æ–¹é¢åšçš„æ¯”æˆ‘ä»¬å¤šï¼Œå½“ç„¶è¿™äº›è®¡ç®—æœºè¯­è¨€å‡ ä¹å…¨æ˜¯è‹±è¯­å­—æ¯ç»„åˆçš„ã€‚æˆ‘æƒ³ï¼Œå¦‚æœæˆ‘ä»¬èƒ½èµ¶åœ¨è¥¿æ–¹ä¹‹å‰å‘å±•ä¿¡æ¯æŠ€æœ¯ï¼Œç°åœ¨å¤–å›½äººä¼°è®¡å°±ä½¿ç”¨ä¸­æ–‡æ¥ç¼–ç¨‹äº†ã€‚ä½†æ˜¯æˆ‘è‹±è¯­ä¸å¥½ï¼Œå¥å­éƒ½è¯»ä¸é€šé¡ºï¼Œæ€ä¹ˆåŠï¼Ÿæ²¡å…³ç³»çš„ï¼Œè¯»ä»£ç ä¸è¯»è‹±è¯­æ–‡ç« å®Œå…¨ä¸ä¸€æ ·ï¼Œè™½ç„¶å¤§å¤šæ•°ä»£ç ä½¿ç”¨çš„æ˜¯è‹±æ–‡å­—æ¯æ¥ç¼–å†™ï¼Œè€Œç†è§£ä»£ç æ›´å¤šçš„æ˜¯ç†è§£å®ƒçš„é€»è¾‘ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ çš„è‹±è¯­ä¸å¥½ï¼Œä½ æœ€å¥½æé«˜ä¸€ä¸‹çš„è‹±è¯­æ°´å¹³ï¼Œå› ä¸ºå¾ˆå¤šå¼€å‘æ–‡æ¡£ã€æ•™ç¨‹ï¼Œæ˜¯ä½¿ç”¨è‹±æ–‡æ¥å†™çš„ã€‚ä¸æ˜¯è¯´ä½ è‹±è¯­ä¸å¥½ä½ å°±ä¸èƒ½å†™ä»£ç ï¼Œä½†æ˜¯ä½ ä¸èƒ½è¿â€œhelloâ€ã€â€œhow are youâ€è¿™äº›ç®€å•çš„è‹±æ–‡å•è¯éƒ½ä¸è®¤è¯†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å…·æœ‰åˆä¸­æ¯•ä¸šç”Ÿçš„è‹±è¯­æ°´å¹³å°±å¯ä»¥å­¦ä¹ ç¼–ç¨‹äº†ã€‚ ï¼ˆ3ï¼‰é€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ–¹é¢å…¥é—¨ï¼šè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­æ ¹æ®ä¸åŒçš„éœ€è¦ï¼ŒåŒ…å«äº†å¤šä¸ªå·¥ä½œä»»åŠ¡å’Œå¤šç§å·¥ä½œæµç¨‹ï¼Œå› æ­¤ä¹Ÿäº§ç”Ÿäº†ä¸åŒçš„å·¥ä½œå²—ä½ï¼Œå‰ç«¯å·¥ç¨‹å¸ˆï¼šAndroidå·¥ç¨‹å¸ˆã€IOSå·¥ç¨‹å¸ˆã€Webå‰ç«¯å·¥ç¨‹å¸ˆï¼Œåç«¯å·¥ç¨‹å¸ˆï¼šJavaåç«¯å·¥ç¨‹å¸ˆã€Pythonåç«¯å·¥ç¨‹å¸ˆã€PHPå·¥ç¨‹å¸ˆï¼ŒLinuxè¿ç»´å·¥ç¨‹å¸ˆï¼Œç°åœ¨è¿˜æµè¡Œç€å¤§æ•°æ®å·¥ç¨‹å¸ˆã€AIï¼ˆäººå·¥æ™ºèƒ½ï¼‰å·¥ç¨‹å¸ˆï¼Œç­‰ç­‰ã€‚å½“ç„¶ï¼Œåœ¨äººå‘˜ç¼ºå°‘çš„æƒ…å†µä¸‹æœ‰çš„äººå´æ‹…ä»»äº†å¥½å‡ ç§èº«ä»½ï¼Œä½†æ˜¯åœ¨å¤§å…¬å¸é‡Œé¢ï¼Œåˆ†å·¥ä¸€èˆ¬æ˜¯æ˜ç¡®çš„ã€‚é‚£æ€ä¹ˆå¼€å§‹å…¥é—¨å­¦ä¹ å‘¢ï¼Ÿé¦–å…ˆï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„è¯­è¨€ï¼Œé€‰æ‹©è‡ªå·±æ–¹å‘ï¼Œæœç€é‚£ä¹ˆç›®æ ‡å­¦ä¹ ã€‚å¯æ˜¯æˆ‘éƒ½æ²¡äº†è§£è¿‡ï¼Œæˆ‘æ€ä¹ˆçŸ¥é“ä»€ä¹ˆç¼–ç¨‹è¯­è¨€é€‚åˆæˆ‘ï¼Ÿè¿™å°±éœ€è¦ä½ äº‹å…ˆäº†è§£ä¸€ä¸‹äº†ï¼Œæ—¢ç„¶æ‰“ç®—è‡ªå­¦ç¼–ç¨‹ï¼Œé‚£ä½ åº”è¯¥æŸ¥é˜…ä¸€äº›èµ„æ–™äº†è§£ä¸€ä¸‹ï¼Œä»€ä¹ˆè¯­è¨€é€‚åˆæ¥åšä»€ä¹ˆï¼Œè‡ªå·±åˆåº”è¯¥å­¦ä¹ ä»€ä¹ˆè¯­è¨€ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬çš„é•¿è¿œçš„ç›®æ ‡æ˜¯ç²¾é€šä¸€ä¸ªæŠ€æœ¯æ–¹å‘ï¼Œä½†æ˜¯å…¶ä»–æ–¹å‘æœ€å¥½æ˜¯ä»€ä¹ˆéƒ½è¦ä¼šã€‚æ‰€ä»¥ï¼Œæˆ‘å»ºè®®ä½ é€‰æ‹©è‡ªå·±å–œæ¬¢çš„æ–¹å‘ï¼Œå®¹æ˜“çš„å…¥é—¨çš„æ–¹å‘è¿›è¡Œå…¥é—¨å­¦ä¹ ã€‚å¯æ˜¯æœ‰çš„äººè¯´ç°åœ¨å¾ˆç«çš„ä¸æ˜¯å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½å—ï¼Ÿæœˆè–ªä¸¤ä¸‰ä¸‡ã€å››äº”ä¸‡çš„ã€‚ä½†æ˜¯ä½ è¦çŸ¥é“ï¼Œå¯¹äºä¸€ä¸ªä»»ä½•åŸºç¡€éƒ½æ²¡æœ‰çš„æ™®é€šåˆå­¦è€…ï¼Œéœ€è¦èŠ±å¤šå°‘åŠŸå¤«æ‰èƒ½è¾¾åˆ°å¤§æ•°æ®å·¥ç¨‹å¸ˆã€AIå·¥ç¨‹å¸ˆçš„æ°´å¹³ï¼Œæ‰€ä»¥å­¦ä¹ åŸºç¡€æ˜¯ååˆ†é‡è¦çš„ï¼Œè‡³å°‘å¾—ä¿è¯ä½ æœ‰ä¸€æ ·æŠ€èƒ½äº†ï¼Œèƒ½ä¿è¯è‡ªå·±èƒ½èƒœä»»æŸé¡¹å·¥ä½œä¹‹åï¼Œå†æœç€æ›´é«˜å¾—å±‚æ¬¡åŠªåŠ›ï¼Œä¹Ÿè®¸é‚£æ ·ä¼šæ›´å¥½ã€‚æˆ‘å½“å¹´é€‰æ‹©Androidä½œä¸ºå…¥é—¨å­¦ä¹ çš„æ–¹å‘ï¼ŒåŸå› æ˜¯æˆ‘æŒºå–œæ¬¢Androidã€‚æˆ‘å¼€å­¦ä¹ Androidçš„æ—¶å€™æ˜¯åœ¨2015å¹´ï¼Œé‚£æ—¶å€™å¾ˆå¤šäººè¯´Androidç°åœ¨é¥±å’Œäº†ï¼Œå­¦ä¹ Androidä¼šæ‰¾ä¸åˆ°å·¥ä½œã€‚ä½†æ˜¯æˆ‘å¹¶æ²¡æœ‰æ”¾å¼ƒå­¦ä¹ Androidï¼Œæˆ‘æƒ³ï¼Œå¦‚æœæœ‰æ—¶é—´å»æ‹…å¿ƒä»¥åæ‰¾ä¸åˆ°å·¥ä½œï¼Œä¸ºä»€ä¹ˆä¸é™ä¸‹å¿ƒæ¥å¥½å¥½å­¦ï¼Œåªè¦å­¦å¥½äº†ä¸ºä»€ä¹ˆè¿˜è¦æ€•æ‰¾ä¸åˆ°å·¥ä½œï¼Œä¸ºä»€ä¹ˆè‡ªå·±ä¸å¯ä»¥ä½œä¸ºé‚£äº›å­¦ä¹ Androidä¸­çš„ä½¼ä½¼è€…ï¼Œä½ å¯ä»¥æ¯”åˆ«äººç¬¨ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥æ¯”åˆ«äººåŠªåŠ›ï¼Œå†µä¸”ï¼Œåˆæœ‰å¤šå°‘äººçœŸæ­£çš„æ‰¿è®¤è‡ªå·±æ¯”åˆ«äººç¬¨å‘¢ï¼Ÿç°åœ¨å†å›æƒ³è‡ªå·±å½“å¹´å­¦ä¹ Androidçš„æ—¶å€™ï¼Œæ¯å¤©æ™šä¸ŠåšæŒè§‚çœ‹è§†é¢‘ï¼Œè®°ç¬”è®°ï¼Œå…ˆå­¦JavaåŸºç¡€ï¼Œåæ˜¯AndroidåŸºç¡€ï¼Œå°±è¿™æ ·åšæŒå¥½å‡ ä¸ªæœˆã€‚æŒºè¾›è‹¦ï¼Œå¯æ˜¯åæ¥æ”¶è·çš„æ˜¯å¼€å¿ƒçš„ã€‚å½“ç„¶ï¼Œä½ æœ‰å¾ˆå¤šé€‰æ‹©ã€‚å¦‚æœä½ å–œæ¬¢APPå¼€å‘ï¼Œé‚£ä¹ˆå°±æ˜¯Androidå’ŒIOSäº†ï¼Œè€ŒAndroidå­¦ä¹ æˆæœ¬æ¯”IOSå­¦ä¹ æˆæœ¬ä½ï¼ŒåŸå› å°±æ˜¯å¦‚æœä½ è¦åšIOSå¼€å‘ä½ éœ€è¦macç”µè„‘ï¼ŒAndroidå¼€å‘ä½¿ç”¨æ™®é€šçš„Windowså°±å¯ä»¥ï¼Œè¿›ä¸€æ­¥å­¦ä¹ çš„è¯ä½ å¯ä»¥å®‰è£…ä¸€ä¸ªLinuxæ“ä½œç³»ç»Ÿï¼Œå†åŠ ä¸Šä¸€ä¸ªå‡ ç™¾å…ƒçš„Androidæ‰‹æœºå°±å¯ä»¥å­¦ä¹ äº†,ç­‰ä½ æŒæ¡Androidå¼€å‘åå†å­¦ä¹ IOSä¹Ÿä¸è¿Ÿã€‚å¦‚æœä½ å–œæ¬¢åç«¯å¼€å‘ï¼Œæˆ‘å»ºè®®ä½ é€‰æ‹©Javaã€Pythonã€PHPè¿™äº›è¯­è¨€ã€‚å‡å¦‚ä½ ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ç¼–ç¨‹ï¼Œåªè¦è®¤çœŸå­¦ï¼Œè¿™äº›è¯­è¨€æŒºå®¹æ˜“å…¥é—¨çš„ï¼Œå¦‚æœæœ‰ä¸€ç‚¹Cè¯­è¨€åŸºç¡€é‚£æ›´å¥½ã€‚è€Œå¦‚æœä½ å–œæ¬¢Web å‰ç«¯ï¼Œé‚£ä½ å°±å¥½å¥½å­¦ä¹ H5+CSS3+JavaScriptï¼Œä¸€ä¸ªåˆæ ¼webå‰ç«¯å·¥ç¨‹å¸ˆé™¤äº†èƒ½æŠŠç½‘ç«™åšå‡ºæ¼‚äº®çš„ç‰¹æ•ˆï¼Œè¿˜è¦æ‡‚å¾—åç«¯çš„çŸ¥è¯†ï¼Œè¿™æ—¶å¯ä»¥å­¦ä¸€å­¦Node.jsã€‚è™½ç„¶å¼€å‘æŠ€æœ¯åˆ†ç±»å¾ˆå¤šï¼Œä½†æ˜¯è¿™äº›æŠ€æœ¯éƒ½æ˜¯ç›¸é€šçš„ï¼Œæœ‰äº†ä¸€é—¨æŠ€æœ¯çš„åŸºç¡€ä¹‹åï¼Œå†å­¦ä¹ å…¶å®ƒæŠ€æœ¯å°±è½»è€Œæ˜“ä¸¾äº†ã€‚è€Œåœ¨åˆå­¦è€…é˜¶æ®µï¼Œä½ éœ€è¦é€‰æ‹©ä¸€é—¨æŠ€æœ¯è¿›è¡Œç³»ç»Ÿçš„å­¦ä¹ ï¼ŒåŒæ—¶ä¸è¦å¿˜è®°å¤šäº†è§£ä¸€äº›å…¶ä»–çš„æŠ€æœ¯ã€‚ä»¥ä¸‹æ˜¯ç¼–ç¨‹è¯­è¨€åœ¨æŸä¸ªæ—¶é—´æ®µçš„æ’è¡Œæ¦œï¼š ï¼ˆ4ï¼‰æ€ä¹ˆè·å–å­¦ä¹ èµ„æºï¼Ÿä½ å¯ä»¥ä¹°ä¸€æœ¬ä¹¦ã€‚ä¹¦æœ‰å¥½æœ‰åï¼Œæœ‰çš„ä¹¦é€‚åˆåˆå­¦è€…ï¼Œè€Œæœ‰çš„ä¹¦ä¸é€‚åˆåˆå­¦è€…ï¼›æœ‰çš„ä¹¦é€šä¿—æ˜“æ‡‚ï¼Œä¹Ÿæœ‰ä¸€äº›ä¹¦å…¨æ˜¯åºŸè¯ï¼Œç”šè‡³é”™è¯¯ä¸€å †ï¼Œè¿™å°±éœ€è¦ä½ å¥½å¥½è¾¨è®¤äº†ã€‚æœ‰çš„ä¹¦é€‚åˆä½ ï¼Œä½†æ˜¯æœ‰çš„ä¹¦è™½å¥½ï¼Œå´ä¸é€‚åˆä½ ï¼Œä½ åº”è¯¥åˆ°ä¹¦åº—é‡Œé¢ï¼Œåˆ°å›¾ä¹¦é¦†é‡Œé¢å¥½å¥½ç¿»ä¸€ç¿»ï¼Œé€‰æ‹©åˆé€‚è‡ªå·±çš„ä¸€æœ¬ç³»ç»Ÿæ•™å­¦ä¹¦ç±ã€‚å¯¹äºæŠ€æœ¯ç±»å‹çš„ä¹¦ï¼Œå°½é‡é€‰æ‹©æ¯”è¾ƒæ–°çš„ï¼Œå¯¹äºåŒä¸€ç§æŠ€æœ¯ï¼Œå°½é‡é¿å…å¥½å‡ å¹´çš„ä¹¦ç±ï¼Œå› ä¸ºæŠ€æœ¯ä¹¦ç±ä¸åƒæ–‡å­¦ä¹¦ç±é‚£æ ·ï¼ŒæŠ€æœ¯æ¯å¤©éƒ½åœ¨æ”¹å˜ã€‚ä½ è¿˜å¯ä»¥çœ‹ä¸€å¥—ç³»ç»Ÿçš„è§†é¢‘æ•™ç¨‹ã€‚äº’è”ç½‘ä¸Šå…è´¹çš„æ•™ç¨‹èµ„æºå¾ˆå¤šï¼Œå¦‚æœå¥½å¥½åˆ©ç”¨ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½å­¦å¥½çš„ã€‚æœ‰çš„è§†é¢‘é‡Œè€å¸ˆè®²è¯¾æ–¹å¼ä¸é€‚åˆä½ ï¼Œè€Œæœ‰çš„è€å¸ˆè®²è¯¾æ–¹å¼å¾ˆé€‚åˆä½ ï¼Œæˆ‘ç›¸ä¿¡åè€…å¯¹ä½ çš„è¿›æ­¥æ›´æœ‰å¸®åŠ©ã€‚ç°åœ¨æ•™å­¦ç½‘ç«™ä¹Ÿå¾ˆå¤šï¼Œä¹Ÿæä¾›äº†å¤§é‡çš„å…è´¹èµ„æºï¼Œå¦‚æå®¢å­¦é™¢ã€æ…•è¯¾ç½‘ï¼Œç™¾åº¦ä¼ è¯¾ã€è…¾è®¯è¯¾å ‚ç­‰ç­‰éƒ½æœ‰å¤§é‡çš„å…è´¹èµ„æºï¼Œå»ºè®®ä½ èŠ±ä¸€äº›æ—¶é—´å»å°è¯•å¬ä¸€ä¸‹å¤šå¥—è§†é¢‘çš„ç¬¬ä¸€èŠ‚è¯¾ï¼Œæœ€åé€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„ä¸€å¥—ã€‚ ï¼ˆ5ï¼‰è¦å›åˆ©ç”¨äº’è”ç½‘è§£å†³é—®é¢˜ï¼šä½ åœ¨å­¦ä¹ ç¼–ç¨‹è¿‡ç¨‹ä¸­å¿…å®šé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œç”šè‡³æœ‰æ—¶å‡ºç°çš„bugè®©è‡ªå·±æ„Ÿåˆ°å´©æºƒã€æ— åŠ©ï¼Œè¿™æ—¶ä¸è¦æ…Œï¼Œè¿™æ˜¯å¾ˆå¤šåˆå­¦è€…éƒ½æ˜¯å¿…å®šç»å†çš„è¿‡ç¨‹ï¼Œåªè¦ä¸€ä¸ªä¸€ä¸ªé—®é¢˜çš„è§£å†³äº†ï¼Œç§¯ç´¯ç»éªŒï¼Œä»¥åä½ æ‰èƒ½è§£å†³å®é™…å¼€å‘ä¸­é‡åˆ°çš„é—®é¢˜ã€‚åœ¨ä½ é‡åˆ°é”™è¯¯æ—¶ï¼ŒæŠŠä½ å‡ºç°çš„é”™è¯¯ç™¾åº¦ä¸€ä¸‹ï¼Œå¿…å®šåˆ«äººä¹Ÿé‡åˆ°è¿‡ï¼Œå¹¶æœ‰ä¸€å †çš„è§£å†³åŠæ³•ã€‚ä½ è¿˜å¯ä»¥åˆ°å„å¤§è®ºå›å¯»æ±‚å¸®åŠ©ï¼Œå¦‚å›½å†…çš„CSDNè®ºå›ï¼Œå¦‚æœä½ è‹±è¯­é˜…è¯»èƒ½åŠ›æ¯”è¾ƒå¥½ï¼Œè¿˜å¯ä»¥åˆ°stackoverflow.comç½‘ç«™ä¸Šå¯»æ±‚å…¨çƒå¼€å‘è€…çš„å¸®åŠ©ã€‚ ï¼ˆ6ï¼‰å¤šè¯»åˆ«äººçš„ä»£ç ï¼Œå€Ÿé‰´åˆ«äººçš„é•¿å¤„ï¼šé˜…è¯»åˆ«äººçš„ä»£ç æ˜¯è‡ªå·±æé«˜ç¼–ç èƒ½åŠ›çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½ å¯ä»¥çœ‹åˆ°è‡ªå·±ä¸å¤§ç¥çš„è·ç¦»ï¼Œç„¶ååŠªåŠ›æœç€ç›®æ ‡åŠªåŠ›ï¼Œä¸€ä¸ªåˆæ ¼çš„å¼€å‘è€…ï¼Œä¸ä»…èƒ½è‡ªå·±å†™ä»£ç ï¼Œè¿˜è¦æœ‰é˜…è¯»åˆ«äººä»£ç çš„èƒ½åŠ›ã€‚ ï¼ˆ7ï¼‰å¤šç»ƒä¹ ï¼Œå­°èƒ½ç”Ÿå·§ï¼šå­¦ä¹ ä¸­ç¼–ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œçœ‹æ‡‚å’Œä¼šåšå®Œå…¨æ˜¯ä¸¤å›äº‹ï¼Œä¸è¦è§‰å¾—è‡ªå·±çœ‹è§†é¢‘çœ‹æ‡‚äº†ï¼Œæˆ–è€…çœ‹ä¹¦çœ‹æ‡‚äº†å°±ä»æ¥ä¸å»ç¼–ç ç»ƒä¹ äº†ã€‚å¾€å¾€å¾ˆå¤šäººçœ‹æ‡‚äº†ï¼Œä½†æ˜¯è‡ªå·±å´æ•²å‡ºä¸€å †çš„é”™è¯¯ï¼Œè¿™é˜¶æ®µä½ éœ€è¦ä¸æ–­çš„ç»ƒä¹ ã€‚ç½‘ä¸Šè¯´çš„â€œ7å¤©æŒæ¡PHPâ€ã€â€œ5èŠ‚è¯¾æŒæ¡javaâ€ï¼Œç­‰ç­‰è¿™äº›ï¼Œä»¥ä¸€ä¸ªæ™®é€šåˆå­¦è€…çš„è§’åº¦æ¥è¯´ç»å¯¹æ˜¯ä¸å¯èƒ½çš„ï¼Œä½œä¸ºåˆå­¦è€…ï¼Œåº”è¯¥è„šè¸å®åœ°ï¼Œæ¯å¤©åšæŒï¼Œç§¯ç´¯ä¸Šå‡ ä¸‡è¡Œä»£ç ï¼Œç”šè‡³å‡ åä¸‡è¡Œä»£ç ï¼Œä¹Ÿè®¸é‚£æ ·æ‰æ˜¯çœŸæ­£çš„å…¥é—¨ã€‚è¿™ä¸–ä¸Šæ²¡æœ‰ä¸åŠ³è€Œè·çš„ï¼Œæ‰€æœ‰çš„æ”¶è·ï¼Œå¿…å®šç»å†ä»˜å‡ºï¼ŒçŸ¥è¯†ä¹Ÿä¸€æ ·ï¼ŒåŠ æ²¹ï¼å…­ã€æ€»ç»“ä¸Šä¸€ä¸ªä¸–çºªçš„å‰è¾ˆä»¬åœ¨å­¦ä¹ çš„æ—¶å€™ï¼Œä»–ä»¬æ²¡æœ‰ç½‘ç»œï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šå­¦ä¹ èµ„æ–™ï¼Œè€Œä»–ä»¬å´èƒ½ç»™åäººåˆ›é€ äº†å¾ˆå¤šæœ‰ä»·å€¼çš„ä¸œè¥¿ï¼Œä»–ä»¬éƒ½é‚£ä¹ˆåšæŒï¼Œæˆ‘ä»¬å°±æ²¡æœ‰ç†ç”±ä¸åŠªåŠ›äº†ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œå­¦ä¹ ç¼–ç¨‹ä¸å®¹æ˜“ï¼Œä¸€å®šè¦çœŸæ­£çš„å–œæ¬¢å®ƒå†å»å­¦ï¼Œè„šè¸å®åœ°ï¼ŒåšæŒä¸æ‡ˆï¼Œå¾€æ—¢å®šçš„ç›®æ ‡åŠªåŠ›ã€‚å…¥é—¨å­¦ä¹ çš„ä»˜å‡ºæ˜¯è¾›è‹¦çš„ï¼Œç”šè‡³æ˜¯ä¹å‘³çš„ï¼Œä½†æ˜¯æ‹¼ä¸€æ‹¼ï¼ŒåŠªåŠ›å¥‹æ–—ï¼Œç›¸æ¯”æœ€åå¾—åˆ°çš„ï¼Œæ˜¯å€¼å¾—çš„ã€‚åŠ æ²¹ï¼æˆ‘ä¹Ÿä¼šåˆ©ç”¨ä¸šä½™æ—¶é—´åˆ†äº«ä¸€äº›å¼€å‘æŠ€æœ¯è§†é¢‘ï¼Œæ¬¢è¿è®¢é˜…æˆ‘ä»¬çš„å“”å“©å“”å“©è§†é¢‘åˆ†äº«é¢‘é“ï¼ˆæå®¢å¼€å‘è€…: https://space.bilibili.com/172353353/ï¼‰ï¼Œä¹Ÿå¯ä»¥è®¢é˜…æˆ‘çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œäº¤æµä¸æé—®ã€è®¢é˜…æœ€æ–°åˆ†äº«å†…å®¹ã€‚" }, { "title": "æ€æ ·åœ¨macä¸­ç¼–è¯‘å®‰è£…php8.1ï¼Ÿ", "url": "/posts/php_install-php8.1-on-mac.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022-04-08ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚ åœ¨æ’°å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œphpçš„æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯8.1.4ï¼Œæœ¬æ–‡ä»‹ç»macOSä¸‹ç¼–è¯‘å®‰è£…æ–¹æ³•ã€‚ä¸€ã€é…ç½®ç¼–è¯‘å‚æ•°./configure --prefix=/usr/local/php-8.1.4 \\--with-config-file-path=/usr/local/php-8.1.4/etc \\--with-zlib \\--wit...", "content": " æ’°å†™æ—¶é—´ï¼š2022-04-08ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚ åœ¨æ’°å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œphpçš„æœ€æ–°ç¨³å®šç‰ˆæœ¬æ˜¯8.1.4ï¼Œæœ¬æ–‡ä»‹ç»macOSä¸‹ç¼–è¯‘å®‰è£…æ–¹æ³•ã€‚ä¸€ã€é…ç½®ç¼–è¯‘å‚æ•°./configure --prefix=/usr/local/php-8.1.4 \\--with-config-file-path=/usr/local/php-8.1.4/etc \\--with-zlib \\--with-zip \\--with-pdo-mysql=mysqlnd \\--with-mysqli=mysqlnd \\--with-bz2=/usr/local/Cellar/bzip2/1.0.8 \\--with-iconv=/usr/local/Cellar/libiconv/1.16 \\--enable-gd \\--with-external-gd \\--with-jpeg \\--with-xpm \\--with-webp \\--with-freetype \\--with-zlib-dir \\--with-openssl \\--with-curl \\--enable-soap \\--enable-mbstring \\--enable-sockets \\--with-readline=/usr/local/Cellar/readline/8.1.2 \\--enable-exifä»¥ä¸Šæœ‰äº›å‚æ•°æŒ‡å®šåˆ°äº†å®é™…çš„åº“ç›®å½•ï¼Œå¦‚--with-iconv=/usr/local/Cellar/libiconv/1.16ï¼Œè¿™é‡Œæˆ‘æŒ‡å®šåˆ°æˆ‘ç”µè„‘é‡Œlibiconvçš„å®é™…å®‰è£…ç›®å½•ï¼Œå¦‚æœä½ ç”µè„‘æ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨homebrewè¿›è¡Œå®‰è£…äºŒã€ç¼–è¯‘ä¸å®‰è£…åœ¨ç¼–è¯‘ä¹‹å‰å…ˆåŠ ä¸Šopensslåº“é‡Œpkgconfigå‘½ä»¤æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°PKG_CONFIG_PATHç¯å¢ƒå˜é‡ï¼Œå¦åˆ™å¯èƒ½æŠ¥é”™ï¼Œå¦‚ä¸‹å‘½ä»¤export PKG_CONFIG_PATH=/usr/local/Cellar/openssl@1.1/1.1.1n/lib/pkgconfig:$PKG_CONFIG_PATHç¼–è¯‘ä¸å®‰è£…# ç¼–è¯‘make# å®‰è£…make install" }, { "title": "æ€æ ·åœ¨macä¸­ç¼–è¯‘å®‰è£…php7.3ï¼Ÿ", "url": "/posts/php_install-php7.3-on-mac.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022-04-08ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚ åœ¨æ’°å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œphp7.3æœ€æ–°çš„ç‰ˆæœ¬æ˜¯7.3.33ï¼Œä»¥ä¸‹æ˜¯macOSç¼–è¯‘å®‰è£…PHPçš„è¿‡ç¨‹ä¸€ã€ç¼–è¯‘é…ç½®ç¼–è¯‘é…ç½®ï¼Œå‘½ä»¤æ‰§è¡Œä¹‹åï¼Œä¼šæ£€æµ‹ä½ ç³»ç»Ÿçš„ç¯å¢ƒæ˜¯å¦å·²ç»æ»¡è¶³ç¼–è¯‘ä¾èµ–./configure \\ --prefix=/usr/local/php-7.3.33 \\ --with-config-file-path=/usr/l...", "content": " æ’°å†™æ—¶é—´ï¼š2022-04-08ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚ åœ¨æ’°å†™æœ¬æ–‡çš„æ—¶å€™ï¼Œphp7.3æœ€æ–°çš„ç‰ˆæœ¬æ˜¯7.3.33ï¼Œä»¥ä¸‹æ˜¯macOSç¼–è¯‘å®‰è£…PHPçš„è¿‡ç¨‹ä¸€ã€ç¼–è¯‘é…ç½®ç¼–è¯‘é…ç½®ï¼Œå‘½ä»¤æ‰§è¡Œä¹‹åï¼Œä¼šæ£€æµ‹ä½ ç³»ç»Ÿçš„ç¯å¢ƒæ˜¯å¦å·²ç»æ»¡è¶³ç¼–è¯‘ä¾èµ–./configure \\ --prefix=/usr/local/php-7.3.33 \\ --with-config-file-path=/usr/local/php-7.3.33/etc \\ --with-pdo-mysql=mysqlnd \\ --with-mysqli=mysqlnd \\ --with-libxml-dir \\ --with-gd \\ --with-jpeg-dir \\ --with-png-dir \\ --with-freetype-dir \\ --with-iconv=/usr/local/Cellar/libiconv/1.16 \\ --with-zlib-dir=/usr/local/Cellar/zlib/1.2.11 \\ --with-bz2=/usr/local/Cellar/bzip2/1.0.8 \\ --with-openssl=/usr/local/Cellar/openssl@1.1/1.1.1n \\ --with-curl=/usr/local/Cellar/curl/7.82.0 \\ --enable-soap \\ --enable-mbstring \\ --enable-sockets \\ --enable-exif \\ --with-readline=/usr/local/Cellar/readline/8.1.2 \\ --disable-ipv6ä»¥ä¸Šæœ‰äº›å‚æ•°æŒ‡å®šåˆ°äº†å®é™…çš„åº“ç›®å½•ï¼Œå¦‚--with-iconv=/usr/local/Cellar/libiconv/1.16ï¼Œè¿™é‡Œæˆ‘æŒ‡å®šåˆ°æˆ‘ç”µè„‘é‡Œlibiconvçš„å®é™…å®‰è£…ç›®å½•ï¼Œå¦‚æœä½ ç”µè„‘æ²¡æœ‰ï¼Œå¯ä»¥ä½¿ç”¨homebrewè¿›è¡Œå®‰è£…äºŒã€ç¼–è¯‘è¿‡ç¨‹å¯èƒ½é‡è§çš„é”™è¯¯ç¼–è¯‘çš„è¿‡ç¨‹ä¸­é¦–å…ˆå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹ç¬¬ä¸¤ä¸ªé”™è¯¯ liconvç›¸å…³Undefined symbols for architecture x86_64: \"_libiconv\", referenced from: _do_convert in gdkanji.o _php_iconv_string in iconv.o __php_iconv_strlen in iconv.o _zif_iconv_substr in iconv.o __php_iconv_strpos in iconv.o _zif_iconv_mime_encode in iconv.o __php_iconv_appendl in iconv.o ... \"_libiconv_close\", referenced from: _do_convert in gdkanji.o _php_iconv_string in iconv.o __php_iconv_strlen in iconv.o _zif_iconv_substr in iconv.o __php_iconv_strpos in iconv.o _zif_iconv_mime_encode in iconv.o __php_iconv_mime_decode in iconv.o ... \"_libiconv_open\", referenced from: _do_convert in gdkanji.o _php_iconv_string in iconv.o __php_iconv_strlen in iconv.o _zif_iconv_substr in iconv.o __php_iconv_strpos in iconv.o _zif_iconv_mime_encode in iconv.o __php_iconv_mime_decode in iconv.o ...ld: symbol(s) not found for architecture x86_64clang: error: linker command failed with exit code 1 (use -v to see invocation)make: *** [sapi/cli/php] Error 1è§£å†³åŠæ³•ï¼šæˆ‘ä»¬æ‰‹åŠ¨æ‰“å¼€æºç ç›®å½•ä¸‹ configureå‘½ä»¤ ç”Ÿæˆçš„Makefileæ–‡ä»¶ï¼Œæ‰¾åˆ°EXTRA_LIBSå˜é‡ï¼Œå°†å˜é‡å€¼ä¸­çš„-liconvè¿™ä¸ªå‚æ•°æ›¿æ¢ä¸ºä½ å®é™…å®‰è£…çš„libiconv.dylibçš„ç»å¯¹è·¯å¾„ï¼Œå¦‚æˆ‘çš„ç”µè„‘ä½¿ç”¨homebrewå®‰è£…ï¼Œåœ¨æˆ‘ç”µè„‘é‡Œç»å¯¹è·¯å¾„æ˜¯/usr/local/Cellar/libiconv/1.16/lib/libiconv.dylibã€‚ readlineç›¸å…³å¯èƒ½é‡åˆ°ç›¸å…³çš„é”™è¯¯å¦‚ä¸‹Undefined symbols for architecture x86_64: \"_append_history\", referenced from: _readline_shell_run in readline_cli.o \"_history_list\", referenced from: _zif_readline_list_history in readline.o \"_rl_completion_suppress_append\", referenced from: _zif_readline_info in readline.o \"_rl_done\", referenced from: _zif_readline_info in readline.o \"_rl_mark\", referenced from: _zif_readline_info in readline.o \"_rl_pending_input\", referenced from: _zif_readline_info in readline.old: symbol(s) not found for architecture x86_64clang: error: linker command failed with exit code 1 (use -v to see invocation)make: *** [sapi/cli/php] Error 1æ‰¾åˆ°EXTRA_LIBSå˜é‡ï¼Œå°†å˜é‡å€¼ä¸­çš„-lreadlineè¿™ä¸ªå‚æ•°æ›¿æ¢ä¸ºä½ å®é™…å®‰è£…çš„libreadline.dylibçš„ç»å¯¹è·¯å¾„ï¼Œå¦‚/usr/local/Cellar/readline/8.1.2/lib/libreadline.dylib æœ€ç»ˆä¿®æ”¹åä¿®æ”¹äº†Makefileæ–‡ä»¶ä¹‹åï¼Œæœ€ç»ˆçš„EXTRA_LIBSå˜é‡å€¼å¦‚ä¸‹EXTRA_LIBS = -lcrypto -lssl -lcrypto -lresolv /usr/local/Cellar/readline/8.1.2/lib/libreadline.dylib /usr/local/Cellar/libiconv/1.16/lib/libiconv.dylib /usr/local/Cellar/libiconv/1.16/lib/libiconv.dylib -lpng -lz -ljpeg -lbz2 -lz -lcrypto -lssl -lcrypto -lm -lxml2 -lz -licucore -lm -lcurl -lxml2 -lz -licucore -lm -lfreetype -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lm -lxml2 -lz -licucore -lmä¸‰ã€ç¼–è¯‘ä¸å®‰è£…# ç¼–è¯‘make# å®‰è£…make install" }, { "title": "åœ¨deepinä¸Šå®‰è£…å¤šä¸ªPHPç‰ˆæœ¬", "url": "/posts/php_install-multiple-php-on-deepin.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022-12-20ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30åœ¨ deepin 20 ä¸Šä½¿ç”¨ç¼–è¯‘çš„æ–¹å¼å®‰è£…å¤šä¸ªç‰ˆæœ¬ä¸€ã€å®‰è£…ä¾èµ–é¦–å…ˆå®‰è£…ä¾èµ–sudo apt install -y libcurl4-openssl-dev libgd-dev libwebp-dev libpng++-dev libfreetype6-dev libghc-zlib-dev libmcrypt-dev lib...", "content": " æ’°å†™æ—¶é—´ï¼š2022-12-20ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30åœ¨ deepin 20 ä¸Šä½¿ç”¨ç¼–è¯‘çš„æ–¹å¼å®‰è£…å¤šä¸ªç‰ˆæœ¬ä¸€ã€å®‰è£…ä¾èµ–é¦–å…ˆå®‰è£…ä¾èµ–sudo apt install -y libcurl4-openssl-dev libgd-dev libwebp-dev libpng++-dev libfreetype6-dev libghc-zlib-dev libmcrypt-dev libxml++2.6-dev libssl-dev libbz2-dev libedit-dev libreadline-dev libsqlite3-dev libonig-dev libzip-devå› ä¸ºPHP7éœ€è¦çš„freetypeç‰ˆæœ¬è¦ä½ä¸€äº›ï¼Œæ‰‹åŠ¨ç¼–è¯‘å®‰è£…å¦‚ä¸‹wget https://download.savannah.gnu.org/releases/freetype/freetype-2.8.1.tar.gztar zxvf freetype-2.8.1.tar.gzcd freetype-2.8.1/./configure --prefix=/usr/local/freetype-2.8.1/éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œéœ€è¦ç”¨åˆ°çš„phpæºç ç›´æ¥ä»phpå®˜ç½‘ä¸‹è½½ã€‚äºŒã€å®‰è£…PHP2.1 PHP 7.2# ç¼–è¯‘æ£€æµ‹./configure \\ --prefix=/usr/local/php-7.2.34 \\ --with-config-file-path=/usr/local/php-7.2.34/etc \\ --with-pdo-mysql=mysqlnd \\ --with-mysqli=mysqlnd \\ --with-libxml-dir \\ --with-gd \\ --with-jpeg-dir \\ --with-png-dir \\ --with-freetype-dir=/usr/local/freetype-2.8.1 \\ --with-iconv-dir \\ --with-zlib-dir \\ --with-bz2 \\ --with-openssl \\ --with-curl \\ --enable-pcntl \\ --with-readline \\ --enable-soap \\ --enable-zip \\ --enable-mbstring \\ --enable-sockets \\ --enable-exif# ç¼–è¯‘make -j16# å®‰è£…make install2.2 PHP 7.3# ç¼–è¯‘æ£€æµ‹./configure \\ --prefix=/usr/local/php-7.3.33 \\ --with-config-file-path=/usr/local/php-7.3.33/etc \\ --with-pdo-mysql=mysqlnd \\ --with-mysqli=mysqlnd \\ --with-libxml-dir \\ --with-gd \\ --with-jpeg-dir \\ --with-png-dir \\ --with-freetype-dir=/usr/local/freetype-2.8.1 \\ --with-iconv \\ --with-zlib-dir \\ --with-bz2 \\ --with-openssl \\ --with-curl \\ --enable-soap \\ --enable-mbstring \\ --enable-sockets \\ --enable-exif \\ --enable-pcntl \\ --enable-zip \\ --with-readline# ç¼–è¯‘make -j16# å®‰è£…make install2.3 PHP 8.0# ç¼–è¯‘./configure --prefix=/usr/local/php-8.0.25 \\ --with-config-file-path=/usr/local/php-8.0.25/etc \\ --with-zlib \\ --with-zip \\ --with-pdo-mysql=mysqlnd \\ --with-mysqli=mysqlnd \\ --with-mysqli=mysqlnd \\ --enable-gd \\ --with-external-gd \\ --with-jpeg \\ --with-xpm \\ --with-webp \\ --with-freetype \\ --with-zlib-dir \\ --with-bz2 \\ --with-openssl \\ --with-curl \\ --enable-soap \\ --enable-pcntl \\ --enable-mbstring \\ --enable-sockets \\ --enable-exif \\ --enable-pcntl \\ --with-readline# ç¼–è¯‘make -j16# å®‰è£…sudo make install2.4 PHP 5.6php 5.6 è¿™ä¸ªç‰ˆæœ¬ç›¸å¯¹è€ï¼Œå› æ­¤æœ‰ä¸€äº›ä¾èµ–åº“ä¾èµ–çš„æ˜¯æ—§ç‰ˆæœ¬ã€‚æˆ‘åœ¨ Deepin 20.9ä¸Šå®‰è£…æ—¶ï¼Œcurl å’Œ openssl è¿™ä¸¤ä¸ªä¾èµ–åº“éœ€è¦å®‰è£…æ—§ç‰ˆæœ¬ï¼Œæˆ‘ç¼–è¯‘å®‰è£…äº† curl-7.19.7 å’Œ openssl-1.0.2uã€‚ å®‰è£… curlæºç ä¸‹è½½é¡µé¢ï¼šhttps://www.openssl.org/source/old/ç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹# ç¼–è¯‘é…ç½®./configure --prefix=/usr/local/curl-7.19.7# ç¼–è¯‘make -j# å®‰è£…sudo make install å®‰è£… opelsslæºç ä¸‹è½½é¡µé¢ï¼šhttps://www.openssl.org/source/old/ç¼–è¯‘ä¸å®‰è£…å‘½ä»¤å¦‚ä¸‹# ç¼–è¯‘é…ç½®./config --prefix=/usr/local/openssl-1.0.2u# ç¼–è¯‘make -j# å®‰è£…sudo make install å®‰è£… php# ç¼–è¯‘./configure \\ --prefix=/usr/local/php-5.6.40 \\ --with-config-file-path=/usr/local/php-5.6.40/etc \\ --with-mysql \\ --with-mysqli \\ --with-pdo-mysql \\ --with-zlib \\ --with-curl=/usr/local/curl-7.19.7 \\ --with-mcrypt \\ --with-gd \\ --with-jpeg-dir \\ --with-freetype-dir=/usr/local/freetype-2.8.1 \\ --with-openssl=/usr/local/openssl-1.0.2u \\ --with-mhash \\ --disable-rpath \\ --disable-ipv6 \\ --enable-fpm \\ --enable-pcntl \\ --enable-gd-native-ttf \\ --enable-sockets \\ --enable-bcmath# ç¼–è¯‘make -j16# å®‰è£…sudo make install2.5 PHP 8.3# ç¼–è¯‘é…ç½®./configure --prefix=/usr/local/php-8.3.0 \\ --with-config-file-path=/usr/local/php-8.3.0/etc \\ --with-zlib \\ --with-zip \\ --with-pdo-mysql=mysqlnd \\ --with-mysqli=mysqlnd \\ --with-mysqli=mysqlnd \\ --enable-gd \\ --with-external-gd \\ --with-jpeg \\ --with-xpm \\ --with-webp \\ --with-freetype \\ --with-zlib-dir \\ --with-bz2 \\ --with-openssl \\ --with-curl \\ --enable-soap \\ --enable-pcntl \\ --enable-mbstring \\ --enable-sockets \\ --enable-exif \\ --enable-pcntl \\ --enable-fpm \\ --with-readline# ç¼–è¯‘make -j4# å®‰è£…sudo make install" }, { "title": "PHP TS å’Œ PHP NTSæœ‰ä»€ä¹ˆåŒºåˆ«", "url": "/posts/php_difference-of-ts-and-nts.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:20:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-12-09ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚æ­¤æ–‡å‚è€ƒäº’è”ç½‘çš„æ–‡ç« ä¸€ã€é—®é¢˜Windowsç‰ˆçš„PHPä»ç‰ˆæœ¬5.2.1å¼€å§‹æœ‰Thread Safe(çº¿ç¨‹å®‰å…¨)å’ŒNone Thread Safe(NTSï¼Œéçº¿ç¨‹å®‰å…¨)ä¹‹åˆ†ï¼Œè¿™ä¸¤è€…ä¸åŒåœ¨äºä½•å¤„ï¼Ÿåˆ°åº•åº”è¯¥ç”¨å“ªç§ï¼ŸäºŒã€åˆ†æä»2000å¹´10æœˆ20æ—¥å‘å¸ƒçš„ç¬¬ä¸€ä¸ªWindowsç‰ˆçš„PHP3.0.17å¼€å§‹çš„éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ï¼Œè¿™æ˜¯ç”±äºä¸Li...", "content": " æ’°å†™æ—¶é—´ï¼š2020-12-09ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ã€‚æ­¤æ–‡å‚è€ƒäº’è”ç½‘çš„æ–‡ç« ä¸€ã€é—®é¢˜Windowsç‰ˆçš„PHPä»ç‰ˆæœ¬5.2.1å¼€å§‹æœ‰Thread Safe(çº¿ç¨‹å®‰å…¨)å’ŒNone Thread Safe(NTSï¼Œéçº¿ç¨‹å®‰å…¨)ä¹‹åˆ†ï¼Œè¿™ä¸¤è€…ä¸åŒåœ¨äºä½•å¤„ï¼Ÿåˆ°åº•åº”è¯¥ç”¨å“ªç§ï¼ŸäºŒã€åˆ†æä»2000å¹´10æœˆ20æ—¥å‘å¸ƒçš„ç¬¬ä¸€ä¸ªWindowsç‰ˆçš„PHP3.0.17å¼€å§‹çš„éƒ½æ˜¯çº¿ç¨‹å®‰å…¨çš„ç‰ˆæœ¬ï¼Œè¿™æ˜¯ç”±äºä¸Linux/Unixç³»ç»Ÿæ˜¯é‡‡ç”¨å¤šè¿›ç¨‹çš„å·¥ä½œæ–¹å¼ï¼Œä¸åŒçš„æ˜¯Windowsç³»ç»Ÿæ˜¯é‡‡ç”¨å¤šçº¿ç¨‹çš„å·¥ä½œæ–¹å¼ã€‚åœ¨IISä¸‹ä»¥CGIæ–¹å¼è¿è¡ŒPHPä¼šéå¸¸æ…¢ï¼Œè¿™æ˜¯ç”±äºCGIæ¨¡å¼æ˜¯å»ºç«‹åœ¨å¤šè¿›ç¨‹çš„åŸºç¡€ä¹‹ä¸Šçš„ï¼Œè€Œéå¤šçº¿ç¨‹ã€‚ å…¬å…±ç½‘å…³æ¥å£ï¼ˆCommon Gateway Interfaceï¼ŒCGIï¼‰æ˜¯Web æœåŠ¡å™¨è¿è¡Œæ—¶å¤–éƒ¨ç¨‹åºçš„è§„èŒƒï¼ŒæŒ‰CGI ç¼–å†™çš„ç¨‹åºå¯ä»¥æ‰©å±•æœåŠ¡å™¨åŠŸèƒ½ã€‚ä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠPHPé…ç½®æˆä»¥ISAPIçš„æ–¹å¼æ¥è¿è¡Œï¼ŒISAPIæ˜¯å¤šçº¿ç¨‹çš„æ–¹å¼ï¼Œè¿™æ ·å°±å¿«å¤šäº†ã€‚ ISAPIï¼ˆInternet Server Application Programming Interfaceï¼‰æ‰©å±•æ˜¯å¯ä»¥è¢« HTTP æœåŠ¡å™¨åŠ è½½å’Œè°ƒç”¨çš„ DLLï¼ˆDynamic Link Library å³åŠ¨æ€è¿æ¥åº“ï¼‰ã€‚Internet æœåŠ¡å™¨æ‰©å±•ä¹Ÿç§°ä¸º Internet æœåŠ¡å™¨åº”ç”¨ç¨‹åº (ISA)ï¼Œç”¨äºå¢å¼ºç¬¦åˆ Internet æœåŠ¡å™¨ API (ISAPI) çš„æœåŠ¡å™¨çš„åŠŸèƒ½ã€‚ä½†å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šå¸¸ç”¨çš„PHPæ‰©å±•æ˜¯ä»¥ Linux/Unixçš„å¤šè¿›ç¨‹æ€æƒ³æ¥å¼€å‘çš„ï¼Œè¿™äº›æ‰©å±•åœ¨ISAPIçš„æ–¹å¼è¿è¡Œæ—¶å°±ä¼šå‡ºé”™æå®IISã€‚å› æ­¤åœ¨IISä¸‹CGIæ¨¡å¼æ‰æ˜¯PHPè¿è¡Œçš„æœ€å®‰å…¨æ–¹å¼ï¼Œä½†CGIæ¨¡å¼å¯¹äºæ¯ä¸ªHTTPè¯·æ±‚éƒ½éœ€è¦é‡æ–°åŠ è½½å’Œå¸è½½æ•´ä¸ªPHPç¯å¢ƒï¼Œå…¶æ¶ˆè€—æ˜¯å·¨å¤§çš„ã€‚ä¸ºäº†å…¼é¡¾IISä¸‹PHPçš„æ•ˆç‡å’Œå®‰å…¨ï¼Œå¾®è½¯ ç»™å‡ºäº†FastCGIçš„è§£å†³æ–¹æ¡ˆã€‚FastCGIå¯ä»¥è®©PHPçš„è¿›ç¨‹é‡å¤åˆ©ç”¨è€Œä¸æ˜¯æ¯ä¸€ä¸ªæ–°çš„è¯·æ±‚å°±é‡å¼€ä¸€ä¸ªè¿›ç¨‹ã€‚åŒæ—¶FastCGIä¹Ÿå¯ä»¥å…è®¸å‡ ä¸ªè¿›ç¨‹åŒæ—¶æ‰§è¡Œã€‚è¿™æ ·æ—¢è§£å†³äº†CGIè¿›ç¨‹æ¨¡å¼æ¶ˆè€—å¤ªå¤§çš„é—®é¢˜ï¼Œåˆåˆ©ç”¨ä¸Šäº†CGIè¿›ç¨‹æ¨¡å¼ä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜çš„ä¼˜åŠ¿ã€‚ä¸‰ã€æ€»ç»“å› æ­¤ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ISAPIçš„æ–¹å¼æ¥è¿è¡ŒPHPå°±å¿…é¡»ç”¨Thread Safe(çº¿ç¨‹å®‰å…¨)çš„ç‰ˆæœ¬ï¼›è€Œç”¨FastCGIæ¨¡å¼è¿è¡ŒPHPçš„è¯å°±æ²¡æœ‰å¿…è¦ç”¨çº¿ç¨‹å®‰å…¨æ£€æŸ¥äº†ï¼Œç”¨None Thread Safe(NTSï¼Œéçº¿ç¨‹å®‰å…¨)çš„ç‰ˆæœ¬èƒ½å¤Ÿæ›´å¥½çš„æé«˜æ•ˆç‡ã€‚" }, { "title": "PHPå¾®ä¿¡æ”¯ä»˜å¼€å‘å®æˆ˜-è®¢å•æŸ¥è¯¢", "url": "/posts/php_wepay-develop-order-query.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:18:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-10-23ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„åç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®ºPHPåç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹ï¼š0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬ä¸‰ç¯‡ï¼Œæˆ‘ä»¬å…ˆè®¨è®º...", "content": " æ’°å†™æ—¶é—´ï¼š2020-10-23ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„åç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®ºPHPåç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹ï¼š0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬ä¸‰ç¯‡ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºè®¢å•æŸ¥è¯¢ã€‚è®¢å•æŸ¥è¯¢æ¥å£æ˜¯ç”¨äºæŸ¥è¯¢è®¢å•çŠ¶æ€çš„ï¼Œå½“ç”¨æˆ·æ”¯ä»˜æˆåŠŸä¹‹åï¼Œæˆ–è€…é€€æ¬¾æˆåŠŸä¹‹åï¼Œå¾®ä¿¡æœåŠ¡å™¨å¯èƒ½æ²¡æœ‰åŠæ—¶å®Œæˆé€šçŸ¥ï¼ˆè¿™ç§æ¦‚ç‡å¾ˆå°ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥è®¾ç½®è®¢å•æŸ¥è¯¢æ¥å£ç»™å‰æ®µè°ƒç”¨æ¥æ›´æ–°ä¸šåŠ¡çš„è®¢å•çŠ¶æ€ï¼ŒåŠæ—¶å®Œæˆè®¢å•çŠ¶æ€çš„æ›´æ–°ã€‚äºŒã€è¯·æ±‚æŸ¥è¯¢æ¥å£// æ ¹æ®å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„ä¸šåŠ¡è®¢å•idï¼Œè·å–åˆ°ä¸šåŠ¡è®¢å•å¯¹è±¡$order = Orders::where('id',request()-&gt;params('id'))-&gt;find();if (!$order) { return json(['code':-1,'msg':'è®¢å•ä¸å­˜åœ¨']);}// æ„é€ è¯·æ±‚å¾®ä¿¡æ¥å£çš„å‚æ•°$params = [ 'appid' =&gt; config('wx.app_id'),// APP ID 'mch_id' =&gt; config('wx.mch_id'),// å•†æˆ·å· 'out_trade_no' =&gt; $order['out_trade_no'], 'nonce_str' =&gt; md5(time()), 'sign_type' =&gt; 'MD5',];// æ„é€ xml$xml = '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;';$xml .= '&lt;xml&gt;';$stringA = '';ksort($params);foreach ($params as $key =&gt; $value) { $stringA .= $key . '=' . $value . '&amp;'; $xml .= '&lt;' . $key . '&gt;' . $value . '&lt;/' . $key . '&gt;';}$signTmp = $stringA . 'key=' . config('wx.mch_key');// æ‹¼æ¥å•†æˆ·å·$sign = strtoupper(md5($signTmp));// ç­¾ååçš„32ä½å­—ç¬¦// å°†ç­¾åæ·»åŠ åˆ°xmlä¸­$xml .= '&lt;sign&gt;' . $sign . '&lt;/sign&gt;';$xml .= '&lt;/xml&gt;';æ„é€ å¥½å‚æ•°ä¹‹åï¼Œå‘é€è¯·æ±‚// å‘èµ·httpsè¯·æ±‚$url = 'https://api.mch.weixin.qq.com/pay/orderquery';$res_xml = order_request($url, $xml);$simpleXMLElement = simplexml_load_string($res_xml, 'SimpleXMLElement', LIBXML_NOCDATA);// å°†SimpleXMLElementå¯¹è±¡è½¬ä¸ºæ•°ç»„$jsonStr = json_encode($simpleXMLElement);$jsonArray = json_decode($jsonStr, true);å¦‚æœè®¢å•å·²ç»æ”¯ä»˜ï¼Œæ›´æ–°ä¸ºå·²æ”¯ä»˜çŠ¶æ€ï¼Œå¦‚æœè®¢å•å·²é€€æ¬¾ï¼Œæ›´æ–°ä¸ºé€€æ¬¾çŠ¶æ€// æ›´æ–°è®¢å•çŠ¶æ€if (strval($jsonArray['return_code']) === 'SUCCESS') { if (strval($jsonArray['trade_state']) === 'SUCCESS') { if ($order['status'] !== 1) { // æ”¯ä»˜æˆåŠŸ $order['status'] = 1; $order['transaction_id'] = $jsonArray['transaction_id']; } } elseif (strval($jsonArray['trade_state']) === 'REFUND') { if ($order['status'] !== 3) { // é€€æ¬¾æˆåŠŸ $order['status'] = 3; $order['transaction_id'] = $jsonArray['transaction_id']; } } $order-&gt;save();}" }, { "title": "PHPå¾®ä¿¡æ”¯ä»˜å¼€å‘å®æˆ˜-é€€æ¬¾", "url": "/posts/php_wepay-develop-refund.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:16:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-09-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„åç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®º PHP åç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹ï¼š0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬äºŒç¯‡ï¼Œæˆ‘ä»¬è®¨...", "content": " æ’°å†™æ—¶é—´ï¼š2020-09-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„åç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®º PHP åç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹ï¼š0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬äºŒç¯‡ï¼Œæˆ‘ä»¬è®¨è®ºé€€æ¬¾é—®é¢˜äºŒã€é€€æ¬¾ç”³è¯·è®¢å•æ”¯ä»˜æˆåŠŸä¹‹åå³å¯é€€æ¬¾ï¼Œé€€æ¬¾çš„é‡‘é¢å¯ä»¥å°äºæˆ–è€…ç­‰äºè®¢å•çš„ä¸‹å•é‡‘é¢ã€‚è¯·æ±‚å‚æ•°ç›¸å¯¹ä¸‹å•æ¥å£ç•¥æœ‰å˜åŒ–ï¼Œå¦‚ä¸‹ä»£ç $order = Order::where('id',request()-&gt;params('id'))-&gt;find();$order['out_refund_no'] = date('YmdHis').mt_rand(1000, 9999);$params = [ 'appid' =&gt; config('wx.app_id'), 'mch_id' =&gt; config('wx.mch_id'), 'nonce_str' =&gt; md5(time()), 'sign_type' =&gt; 'MD5', 'transaction_id' =&gt; $order['transaction_id'], 'out_trade_no' =&gt; $order['out_trade_no'], 'out_refund_no' =&gt; $order['out_refund_no'], 'total_fee' =&gt; $order['fee'] * 100, 'refund_fee' =&gt; $order['fee'] * 100, 'refund_desc' =&gt; $params['refund_desc'], 'notify_url' =&gt; 'https://test.com/orders/callback_refund',// é€šçŸ¥åœ°å€];æ„é€ xml// åˆ›å»ºxml$xml = '&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;';$xml .= '&lt;xml&gt;';// éå†å‚æ•°$stringA = '';// æ ¹æ®é”®åå¯¹å‚æ•°è¿›è¡Œå­—å…¸æ’åºksort($params);foreach ($params as $key =&gt; $value) { $stringA .= $key . '=' . $value . '&amp;'; $xml .= '&lt;' . $key . '&gt;' . $value . '&lt;/' . $key . '&gt;';}$signTmp = $stringA . 'key=' . config('wx.mch_key');// ä¸å•†æˆ·APIç§˜é’¥è¿›è¡Œæ‹¼æ¥$sign = strtoupper(md5($signTmp));// ç­¾ååçš„32ä½å­—ç¬¦// å°†ç­¾åæ·»åŠ åˆ°è¯·æ±‚å‚æ•°ä¸­$xml .= '&lt;sign&gt;' . $sign . '&lt;/sign&gt;';$xml .= '&lt;/xml&gt;';é€€æ¬¾ç”³è¯·éœ€è¦å®‰å…¨è¯ä¹¦ï¼ˆåœ¨å¾®ä¿¡å•†æˆ·å·é‡Œç”³è¯·ï¼‰ï¼Œæˆ‘ä»¬é‡æ–°å®šä¹‰åœ¨common.phpä¸€ä¸ªç”¨äºè¯·æ±‚çš„æ–¹æ³•function order_refund_request($url, $data = null){ $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); if (!empty($data)) { curl_setopt($curl, CURLOPT_POST, 1); curl_setopt($curl, CURLOPT_POSTFIELDS, $data); } curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); // è¯ä¹¦è®¾ç½® curl_setopt($curl, CURLOPT_SSLCERTTYPE, 'PEM'); curl_setopt($curl, CURLOPT_SSLCERT, dirname(__FILE__) . '/cert/apiclient_cert.pem');// å®¢æˆ·ç«¯certè·¯å¾„ curl_setopt($curl, CURLOPT_SSLKEYTYPE, 'PEM'); curl_setopt($curl, CURLOPT_SSLKEY, dirname(__FILE__) . '/cert/apiclient_key.pem');// å®¢æˆ·ç«¯keyè·¯å¾„ $output = curl_exec($curl); curl_close($curl); return $output;}è¿™é‡Œè¦æ³¨æ„è¯ä¹¦çš„è·¯å¾„ï¼Œä¸€å®šè¦åŒ¹é…ã€‚æ¥ç€å‘é€é€€æ¬¾è¯·æ±‚$url = 'https://api.mch.weixin.qq.com/secapi/pay/refund';$res_xml = order_refund_request($url, $xml);trace('å¾®ä¿¡ä¸­å°ç”³è¯·é€€æ¬¾ï¼Œè¿”å›ä¿¡æ¯');trace($res_xml);$simpleXMLElement = simplexml_load_string($res_xml, 'SimpleXMLElement', LIBXML_NOCDATA);//å°†SimpleXMLElementè½¬ä¸ºæ•°ç»„$jsonStr = json_encode($simpleXMLElement);$jsonArray = json_decode($jsonStr, true);if (isset($jsonArray['return_code']) &amp;&amp; $jsonArray['return_code'] == 'SUCCESS') { // é€€æ¬¾ç”³è¯·æˆåŠŸï¼Œæ›´æ–°è®¢å•çŠ¶æ€ $order['status'] = 2; return json(['code'=&gt;0,'msg'=&gt;'æˆåŠŸ']);} else { //å“åº”å¤±è´¥ return json(['code'=&gt;-1,'msg'=&gt;'å“åº”å¤±è´¥']);}ä¸‰ã€é€€æ¬¾é€šçŸ¥å›è°ƒé€€æ¬¾å›è°ƒè¿”å›çš„æ•°æ®æ˜¯åŠ å¯†çš„ï¼Œå›è°ƒåœ°å€æ˜¯é€€æ¬¾ç”³è¯·ä¸­çš„é€šçŸ¥åœ°å€ã€‚æˆ‘ä»¬éœ€è¦å…ˆè§£å¯†è¿”å›æ•°æ®ï¼Œå†æ ¹æ®è¿”å›æ•°æ®å»æ›´æ–°è®¢å•çŠ¶æ€ã€‚é¦–å…ˆåœ¨å½“å‰ç±»é‡Œå®šä¹‰è§£å¯†æ–¹æ³•private function refundDecrypt($str, $key){ $key = md5($key); $str = base64_decode($str); return openssl_decrypt($str, 'aes-256-ecb', $key, OPENSSL_RAW_DATA);}æ¥ä¸‹æ¥ï¼Œè·å–å‚æ•°å¹¶è§£å¯†$xml = file_get_contents('php://input');if (!$xml) { exit(0);}$simpleXMLElement = simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_NOCDATA);// å°†SimpleXMLElementè½¬ä¸ºæ•°ç»„$jsonStr = json_encode($simpleXMLElement);$jsonArray = json_decode($jsonStr, true);// ä¸­å°è¿”å›æ•°æ®è§£å¯†if (!isset($jsonArray['req_info'])) { exit(0);}$decryptStr = $this-&gt;refundDecrypt($jsonArray['req_info'], // å°†xmlè§£æä¸ºarray$simpleXMLElement = simplexml_load_string($decryptStr, 'SimpleXMLElement', LIBXML_NOCDATA);// å°†SimpleXMLElementå¯¹è±¡è½¬ä¸ºæ•°ç»„$jsonStr = json_encode($simpleXMLElement);// è§£æå­—æ®µ$jsonResArr = json_decode($jsonStr, true);// éªŒè¯å‚æ•°if (!(isset($jsonResArr['out_refund_no']) &amp;&amp; isset($jsonResArr['refund_status']) &amp;&amp; (strval($jsonResArr['refund_status']) === 'SUCCESS'))) { exit(0);//å‚æ•°é”™è¯¯ï¼Œç»ˆæ­¢ç¨‹åº}// é€šè¿‡é€€æ¬¾è®¢å•å·æŸ¥è¯¢è®¢å•$order = Order::where('out_refund_no',$jsonResArr['out_refund_no'])-&gt;find();if (!$order) { exit(0);//æŸ¥è¯¢ä¸åˆ°ç›¸åº”è®¢å•,ç»ˆæ­¢ç¨‹åº}// æ›´æ–°è®¢å•çŠ¶æ€if ($order['status'] !== 3) { // æ›´æ–°è®¢å•çŠ¶æ€ trace('å¾®ä¿¡é€€æ¬¾å›è°ƒ,æ­£åœ¨æ›´æ–°è®¢å•çŠ¶æ€'); $order['status'] = 3; $order['transaction_id'] = $jsonResArr['transaction_id']; $order['refund_fee'] = round($jsonResArr['refund_fee'] / 100, 2); $order['refund_time'] = time(); $saveOrder = $order-&gt;save();}// ç»™å¾®ä¿¡è¿”å›æ•°æ®$xml = '&lt;xml&gt;';$xml .= '&lt;return_code&gt;' . '&lt;![CDATA[SUCCESS]]&gt;' . '&lt;/return_code&gt;';$xml .= '&lt;return_msg&gt;' . '&lt;![CDATA[OK]]&gt;' . '&lt;/return_msg&gt;';$xml .= '&lt;/xml&gt;';return response($xml, 200, [], 'xml');" }, { "title": "PHPå¾®ä¿¡æ”¯ä»˜å¼€å‘å®æˆ˜-ä¸‹å•ä¸æ”¯ä»˜", "url": "/posts/php_wepay-develop-order-and-pay.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:15:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-09-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„PHPåç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®ºPHPåç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä»¬å…ˆ...", "content": " æ’°å†™æ—¶é—´ï¼š2020-09-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°æœ¬ç³»åˆ—æ–‡ç« å°†è®¨è®ºåŸºäºå¾®ä¿¡æ”¯ä»˜çš„é¡¹ç›®å¼€å‘ä¸­ï¼Œæ¶‰åŠåˆ°çš„ä¸‹å•ä¸æ”¯ä»˜ã€é€€æ¬¾ã€ä»¥åŠè®¢å•æŸ¥è¯¢çš„PHPåç«¯ä»£ç å®ç°ã€‚åœ¨æœ¬ç³»åˆ—æ–‡ç« ä¸­ï¼Œå°†ä»¥ä»£ç ç‰‡æ®µä½œä¸ºç¤ºä¾‹ï¼Œæ¥è®¨è®ºPHPåç«¯æ¥å£å®ç°çš„è¿‡ç¨‹ã€‚åœ¨æœ¬ç³»åˆ—çš„æ¥å£ç¤ºä¾‹ä¸­ï¼Œè¿”å›çš„çŠ¶æ€ç æ ‡è¯†å¦‚ä¸‹0: ä¸šåŠ¡æˆåŠŸ-1: ä¸šåŠ¡å¤±è´¥å¼€å‘ç¯å¢ƒ ThinkPHP 6 PHP 7 è¿è¡Œç¯å¢ƒæœ¬æ–‡æ˜¯ç¬¬ä¸€ç¯‡ï¼Œæˆ‘ä»¬å…ˆè®¨è®ºä¸‹å•ä¸æ”¯ä»˜ã€‚äºŒã€å®šä¹‰æ•°æ®åº“åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦åœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­ç”Ÿæˆè®¢å•æ•°æ®ï¼ŒåŒæ—¶éœ€è¦åœ¨å¾®ä¿¡ä¸­å°ç”Ÿæˆå¯¹åº”çš„è®¢å•ã€‚å¹¶ä¸”ä¸šåŠ¡è®¢å•çŠ¶æ€éœ€è¦ä¸å¾®ä¿¡è®¢å•çŠ¶æ€ä¸€è‡´ã€‚-- å»ºç«‹è¡¨ç»“æ„CREATE TABLE `orders`( `id` INT(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT 'è¡¨ID', `fee` DECIMAL(15, 2) NOT NULL DEFAULT 0.00 COMMENT 'è®¢å•è´¹ç”¨', `status` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'çŠ¶æ€:0-æœªæ”¯ä»˜,1-å·²æ”¯ä»˜,2-é€€æ¬¾ä¸­,3-å·²é€€æ¬¾', `time_start` int(11) UNSIGNED DEFAULT NULL COMMENT 'äº¤æ˜“èµ·å§‹æ—¶é—´', `time_expire` int(11) UNSIGNED DEFAULT NULL COMMENT 'äº¤æ˜“ç»“æŸæ—¶é—´', `order_time` int(11) UNSIGNED DEFAULT NULL COMMENT 'æ”¯ä»˜å®Œæˆæ—¶é—´', `out_trade_no` varchar(32) NOT NULL COMMENT 'å•†æˆ·è®¢å•å·', `out_refund_no` varchar(32) DEFAULT NULL COMMENT 'å•†æˆ·é€€æ¬¾è®¢å•å·', `transaction_id` varchar(32) DEFAULT NULL COMMENT 'å¾®ä¿¡æ”¯ä»˜æµæ°´å·', `refund_desc` varchar(64) DEFAULT NULL COMMENT 'é€€æ¬¾åŸå› ', `refund_fee` DECIMAL(15, 2) NOT NULL DEFAULT 0.00 COMMENT 'é€€æ¬¾é‡‘é¢', `refund_time` int(11) UNSIGNED DEFAULT NULL COMMENT 'é€€æ¬¾å®Œæˆæ—¶é—´', `create_time` INT(11) UNSIGNED DEFAULT NULL COMMENT 'åˆ›å»ºæ—¶é—´', `update_time` INT(11) UNSIGNED DEFAULT NULL COMMENT 'æ›´æ–°æ—¶é—´', `delete_time` INT(11) UNSIGNED DEFAULT NULL COMMENT 'åˆ é™¤æ—¶é—´', CONSTRAINT `pk_id_orders` PRIMARY KEY (`id`)) ENGINE = InnoDB AUTO_INCREMENT = 100 DEFAULT CHARSET = utf8mb4 COLLATE utf8mb4_unicode_ci COMMENT ='è®¢å•ä¿¡æ¯è¡¨';åœ¨æœ¬ä¾‹ä¸­æˆ‘ä»¬åªè€ƒè™‘åŸºæœ¬æ•°æ®å­—æ®µï¼Œä½†åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ä½ åº”å½“è€ƒè™‘å®é™…ä¸šåŠ¡éœ€æ±‚ã€‚æœ¬ä¾‹è®¢å•çŠ¶æ€åªè€ƒè™‘å››ç§ï¼šæœªæ”¯ä»˜ã€å·²æ”¯ä»˜ã€é€€æ¬¾ä¸­ã€å·²é€€æ¬¾ã€‚æ•°æ®åº“ä¸­ï¼Œè®¢å•è´¹ç”¨å•ä½è®°å½•ä¸ºå…ƒã€‚ä¸‰ã€ä¸‹å•$order = new Order();$order['fee'] = 0.1;$order['out_trade_no'] = date('YmdHis').mt_rand(1000, 9999);$order['time_start'] = time();$order['time_expire'] = strtotime('+10 minutes');$order-&gt;save();åœ¨ä¸Šé¢ä»£ç ä¸­ï¼ŒOrderç±»ä»£è¡¨è®¢å•æ¨¡å‹ã€‚æˆ‘ä»¬å°†è®¢å•è´¹ç”¨å›ºå®šè®¾ç½®ä¸º0.1å…ƒï¼ˆå®é™…é¡¹ç›®ä¸­åº”å½“æ ¹æ®å•†å“è´¹ç”¨ã€æŠ˜æ‰£ã€è¿è´¹ç­‰æ¥è®¡ç®—ï¼‰ï¼Œè®¢å•å·æˆ‘ä»¬æ ¹æ®æ—¶é—´ç”Ÿæˆï¼Œå¹¶æ‹¼æ¥ä¸Šä¸€ä¸ªéšæœºæ•°ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œè®¢å•å·è¦é¿å…é‡å¤ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨common.phpæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªè¯·æ±‚å¾®ä¿¡ä¸‹å•æ¥å£çš„æ–¹æ³•function order_request($url, $data = null){ $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); if (!empty($data)) { curl_setopt($curl, CURLOPT_POST, 1); curl_setopt($curl, CURLOPT_POSTFIELDS, $data); } curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); $output = curl_exec($curl); curl_close($curl); return $output;}æ¥ç€ï¼Œå®šä¹‰ä¸‹å•çš„å‚æ•°$params = [ 'appid' =&gt; config('wx.app_id'), // APP ID 'mch_id' =&gt; config('wx.mch_id'), // å•†æˆ·å· 'nonce_str' =&gt; md5(time()), // éšæœºå­—ç¬¦ä¸² 'sign_type' =&gt; 'MD5', // åŠ å¯†æ–¹å¼ 'body' =&gt; 'è®¢å•è´¹ç”¨', // å•†å“æè¿° 'attach' =&gt; 'å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜', // é™„åŠ ä¿¡æ¯ 'out_trade_no' =&gt; $order['out_trade_no'], // å•†æˆ·è®¢å•å· 'total_fee' =&gt; $order['fee'] * 100, // æ ‡ä»·é‡‘é¢,å•ä½åˆ† 'spbill_create_ip' =&gt; request()-&gt;ip(), // ç»ˆç«¯IP 'time_start' =&gt; date('YmdHis', $order['time_start']), // äº¤æ˜“èµ·å§‹æ—¶é—´ 'time_expire' =&gt; date('YmdHis', $order['time_expire']), // äº¤æ˜“ç»“æŸæ—¶é—´ 'notify_url' =&gt; 'https://test.com/order/callback', // é€šçŸ¥åœ°å€ 'trade_type' =&gt; 'JSAPI', // äº¤æ˜“ç±»å‹ 'openid' =&gt; $user['openid'], // ç”¨æˆ·openid];ä»¥ä¸Šä»£ç ä¸­ï¼Œåˆ—å‡ºçš„å‚æ•°æ˜¯æœ€åŸºæœ¬çš„ï¼Œå®é™…é¡¹ç›®ä¸­ä½ å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®æ›´å¤šçš„å‚æ•°ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬æŠŠAPPIDå’Œå•†æˆ·å·å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œå¾®ä¿¡ä¸‹å•æ¥å£ä¸­ï¼Œæ¥æ”¶çš„é‡‘é¢å•ä½ä¸ºåˆ†ã€‚å¾®ä¿¡è®¢å•æ¥å£åªæ”¯æŒxmlï¼Œæ¥ç€æˆ‘ä»¬ä»æ•°ç»„å‚æ•°ä¸­æ„é€ xmlå­—ç¬¦ä¸²$stringA = '';// æ ¹æ®é”®åå¯¹å‚æ•°è¿›è¡Œå­—å…¸æ’åºksort($params);// åˆ›å»ºxml$xml = '';$xml .= '&lt;xml&gt;';// éå†å‚æ•°foreach ($params as $key =&gt; $value) { // æ‹¼è£…å‚æ•° $stringA .= $key . '=' . $value . '&amp;'; //æ‹¼è£…xml $xml .= '&lt;' . $key . '&gt;' . $value . '&lt;/' . $key . '&gt;';}// ä¸å•†æˆ·APIç§˜é’¥è¿›è¡Œæ‹¼æ¥$signTmp = $stringA . 'key=' . config('wx.mch_key');$sign = strtoupper(md5($signTmp));// ç­¾ååçš„32ä½å­—ç¬¦// å°†ç­¾åæ·»åŠ åˆ°è¯·æ±‚å‚æ•°ä¸­$xml .= '&lt;sign&gt;' . $sign . '&lt;/sign&gt;';$xml .= '&lt;/xml&gt;';ä¸‹å•æˆåŠŸåï¼Œå°†è¿”å›ç»“æœç»“æ„å¥½æ”¯ä»˜å‚æ•°ï¼Œè¿”å›ç»™å‰ç«¯è°ƒèµ·å¾®ä¿¡æ”¯ä»˜$url = 'https://api.mch.weixin.qq.com/pay/unifiedorder'; //ä¸‹å•æ¥å£åœ°å€$res_xml = order_request($url, $xml);//ä¸‹å•$simpleXMLElement = simplexml_load_string($res_xml, 'SimpleXMLElement', LIBXML_NOCDATA);// å°†è¿”å›çš„xmlè½¬ä¸ºå¯¹è±¡$jsonStr = json_encode($simpleXMLElement);// å°†å¯¹è±¡è½¬ä¸ºjsonå­—ç¬¦ä¸²$jsonArray = json_decode($jsonStr, true);// å°†jsonå­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„if ($jsonArray['return_code'] != 'SUCCESS') { return json(['code'=&gt;-1,'msg'=&gt;'ä¸‹å•å¤±è´¥']);}// æ„é€ æ”¯ä»˜å‚æ•°$data['appId'] = $jsonArray['appid'];$data['timeStamp'] = strval(time());$data['nonceStr'] = md5(time());$data['package'] = 'prepay_id=' . $jsonArray['prepay_id'];$data['signType'] = 'MD5';ksort($data);// æ„é€ æ”¯ä»˜ç­¾å$data['key'] = config('wx.mch_key');//å•†æˆ·APIç§˜é’¥$stringTmp = '';foreach ($data as $key =&gt; $value) { $stringTmp .= $key . '=' . $value . '&amp;';}$stringTmp = rtrim($stringTmp, '&amp;');$data['paySign'] = strtoupper(md5($stringTmp));unset($data['key']);// å°†æ”¯ä»˜å‚æ•°è¿”å›ç»™å‰ç«¯return json($data);åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠå•†æˆ·APIç§˜é’¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ã€‚å››ã€æ”¯ä»˜é€šçŸ¥å›è°ƒå½“å‰ç«¯ç”¨æˆ·æ”¯ä»˜æˆåŠŸä¹‹åï¼Œå¾®ä¿¡ä¼šå°†æ”¯ä»˜ç»“æœå‘é€ä¸€ä¸ªGETè¯·æ±‚å›è°ƒåˆ°ä¸šåŠ¡æœåŠ¡å™¨ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®å¥½å¯¹åº”çš„è·¯ç”±å¹¶åŒ¹é…ä¸Šå›è°ƒæ–¹æ³•ï¼Œå›è°ƒåœ°å€å°±æ˜¯ä¸‹å•æ—¶è®¾ç½®çš„é€šçŸ¥åœ°å€ï¼Œé€šçŸ¥å†…å®¹æ˜¯XMLã€‚åœ¨å›è°ƒæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å…ˆè·å–å‚æ•°ã€‚$xml = file_get_contents('php://input');if (!$xml) { exit(0);// xmlæ•°æ®ä¸ºç©ºï¼Œç»ˆæ­¢ç¨‹åº}// å°†xmlè§£æä¸ºå¯¹è±¡$simpleXMLElement = simplexml_load_string($xml, 'SimpleXMLElement', LIBXML_NOCDATA);// å°†å¯¹è±¡è½¬ä¸ºæ•°ç»„$jsonStr = json_encode($simpleXMLElement);$jsonArray = json_decode($jsonStr, true);æ¥ä¸‹æ¥éªŒè¯ç­¾å$stringA = '';foreach ($jsonArray as $key =&gt; $value) { if ($key == 'sign') { continue; } // æ‹¼è£…å‚æ•° $stringA .= $key . '=' . $value . '&amp;';}$signTmp = $stringA . 'key=' . config('wx.mch_key');// ä¸å•†æˆ·APIç§˜é’¥è¿›è¡Œæ‹¼æ¥$sign = strtoupper(md5($signTmp));// ç­¾ååçš„32ä½å­—ç¬¦if ($sign != $jsonArray['sign']) { exit(0);// ç­¾åé”™è¯¯ï¼Œç»ˆæ­¢ç¨‹åº}éªŒè¯ç­¾åé€šè¿‡ä¹‹åï¼Œæ›´æ–°è®¢å•çŠ¶æ€ï¼Œå¹¶ä¸”å°†ç»“æœè¿”å›ç»™å¾®ä¿¡æœåŠ¡å™¨å³å¯$order = Order::where('out_trade_no',$jsonArray['out_trade_no'])-&gt;find();if (!$order) { exit(0);// æŸ¥è¯¢ä¸åˆ°è®¢å•ï¼Œç»ˆæ­¢ç¨‹åº}// æ›´æ–°è®¢å•çŠ¶æ€$order['status'] = 1;$order['order_time'] = time();$order['transaction_id'] = $jsonArray['transaction_id'];$order-&gt;save();// ç»™å¾®ä¿¡è¿”å›æ•°æ®$xml = '&lt;xml&gt;';$xml .= '&lt;return_code&gt;' . '&lt;![CDATA[SUCCESS]]&gt;' . '&lt;/return_code&gt;';$xml .= '&lt;return_msg&gt;' . '&lt;![CDATA[OK]]&gt;' . '&lt;/return_msg&gt;';$xml .= '&lt;/xml&gt;';return response($xml, 200, [], 'xml'); æœ¬æ–‡åŸåˆ›é¦–å‘è‡ªå¾®ä¿¡è®¢é˜…å·æå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½" }, { "title": "æ€æ ·åˆ©ç”¨é’©å­å®ç°gitä»“åº“çš„PHPä»£ç è‡ªåŠ¨éƒ¨ç½²ï¼Ÿ", "url": "/posts/php_make-php-auto-deploy-using-webhook.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:12:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-03-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨éƒ¨ç½²é’©å­ï¼Ÿé¡¹ç›®åœ°å€ ç äº‘ï¼šhttps://gitee.com/jikerdev/PHPWebHook GitHubï¼šhttps://github.com/jikerdev/PHPWebHookç®€å•åœ°è¯´è‡ªåŠ¨éƒ¨ç½²é’©å­å°±æ˜¯å®ç°ä»£ç åŒæ­¥çš„ä¸€ä¸ªç¨‹åºï¼Œç¨‹åºä¼šåœ¨ç‰¹å®šçš„æƒ…å†µä¼šè¢«è§¦å‘ï¼Œæ¯”å¦‚å¼€å‘è€…å°†ä»£ç æ¨é€åˆ°gitæœåŠ¡å™¨æ—¶ã€‚æœ¬æ–‡...", "content": " æ’°å†™æ—¶é—´ï¼š2019-03-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä»€ä¹ˆæ˜¯è‡ªåŠ¨éƒ¨ç½²é’©å­ï¼Ÿé¡¹ç›®åœ°å€ ç äº‘ï¼šhttps://gitee.com/jikerdev/PHPWebHook GitHubï¼šhttps://github.com/jikerdev/PHPWebHookç®€å•åœ°è¯´è‡ªåŠ¨éƒ¨ç½²é’©å­å°±æ˜¯å®ç°ä»£ç åŒæ­¥çš„ä¸€ä¸ªç¨‹åºï¼Œç¨‹åºä¼šåœ¨ç‰¹å®šçš„æƒ…å†µä¼šè¢«è§¦å‘ï¼Œæ¯”å¦‚å¼€å‘è€…å°†ä»£ç æ¨é€åˆ°gitæœåŠ¡å™¨æ—¶ã€‚æœ¬æ–‡ä½¿ç”¨PHPè¯­è¨€æ¥ç¼–å†™ä¸€ä¸ªèƒ½å®ç°PHPé¡¹ç›®è‡ªåŠ¨éƒ¨ç½²çš„ç¨‹åºã€‚äºŒã€ç›®æ ‡éœ€æ±‚æœ¬æ–‡ä½¿ç”¨çš„æ˜¯ç äº‘ä½œä¸ºç¤ºä¾‹ï¼Œåœ¨æˆ‘ä»¬çš„ä¸šåŠ¡æœåŠ¡å™¨ä¸Šéƒ¨ç½²é’©å­ç¨‹åºï¼Œå½“æˆ‘ä»¬æ¨é€ä»£ç åˆ°ç äº‘ä»“åº“ä¹‹åï¼Œä½¿ç äº‘è§¦å‘ç½‘ç»œé’©å­åŠŸèƒ½ï¼Œå®ç°ä»£ç åŒæ­¥åˆ°ä¸šåŠ¡æœåŠ¡å™¨ï¼Œè¾¾åˆ°é¡¹ç›®è‡ªåŠ¨éƒ¨ç½²çš„ç›®çš„ã€‚é¦–å…ˆéœ€è¦å®ç°ä»£ç åŒæ­¥åŠŸèƒ½å³å¯ï¼ŒåŒæ—¶ï¼Œä»£ç åŒæ­¥åˆ°ä¸šåŠ¡æœåŠ¡å™¨ä¹‹åï¼Œå‘é€é€šçŸ¥é‚®ä»¶ç»™ä»£ç æ¨é€è€…ã€‚äºŒã€å®ç°è¿‡ç¨‹2.1 åˆå§‹åŒ–é¡¹ç›®åˆ›å»ºä¸€ä¸ªç©ºçš„é¡¹ç›®ç›®å½•ï¼Œåœ¨ç›®å½•ä¹‹ä¸‹ä½¿ç”¨composerå®‰è£…ä¸€ä¸ªphpmaileré‚®ä»¶å‘é€ä¾èµ–åº“ï¼ŒcomposeræŒ‡ä»¤å¦‚ä¸‹composer require phpmailer/phpmailer2.2 å®šä¹‰é‚®ä»¶å‘é€è€…å¯¹è±¡åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºMailSender.phpæ–‡ä»¶ï¼Œé¦–å…ˆåœ¨å¤´éƒ¨å¼•å…¥åœ¨1ä¸­å®‰è£…çš„phpmailerä¾èµ–ï¼Œå¦‚ä¸‹&lt;?phprequire_once 'vendor/autoload.php';// å¼•å…¥phpmailerä¾èµ–use PHPMailer\\PHPMailer\\Exception;use PHPMailer\\PHPMailer\\PHPMailer;use PHPMailer\\PHPMailer\\SMTP;åœ¨MailSender.phpæ–‡ä»¶ä¸­æ·»åŠ MailSenderç±»ï¼Œå¹¶è®¾ç½®SMTPé‚®ä»¶å‘é€çš„ç›¸å…³å‚æ•°ï¼Œå¦‚ä¸‹ä»£ç class MailSender{ /* * SMTPé…ç½® * */ private $smtp_host = 'smtp.exmail.qq.com';//SMTPæœåŠ¡å™¨åœ°å€ private $smtp_from = 'æå®¢å¼€å‘è€…-ç®¡ç†å‘˜';//å‘é€è€… private $smtp_username = 'admin@jkdev.cn';//é‚®ç®±è´¦å· private $smtp_password = '******';//é‚®ç®±å¯†ç  private $smtp_port = '465';//ç«¯å£å·}å†åˆ›å»ºæ˜¯å®ä¾‹åŒ–é‚®ä»¶å‘é€è€…çš„æ–¹æ³•obtainEmailSenderï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯é‚®ä»¶å‘é€çš„ç›®æ ‡é‚®ç®±æ•°ç»„ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åŒæ—¶å°†é€šçŸ¥é‚®ä»¶å‘åˆ°å¤šä¸ªç›®æ ‡é‚®ç®±ï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨å‘é€ä¸»é¢˜ï¼Œç¬¬ä¸‰ä»£è¡¨é‚®ä»¶å†…å®¹ï¼Œå¦‚ä¸‹ä»£ç ï¼špublic function obtainEmailSender(array $addresses, $subject, $body) { $mailSender = new PHPMailer(true); $mailSender-&gt;CharSet = 'UTF-8'; //Server settings $mailSender-&gt;SMTPDebug = SMTP::DEBUG_SERVER; // Enable verbose debug output $mailSender-&gt;isSMTP(); // Send using SMTP $mailSender-&gt;Host = $this-&gt;smtp_host; // Set the SMTP server to send through $mailSender-&gt;SMTPAuth = true; // Enable SMTP authentication $mailSender-&gt;Username = $this-&gt;smtp_username; // SMTP username $mailSender-&gt;Password = $this-&gt;smtp_password; // SMTP password $mailSender-&gt;SMTPSecure = PHPMailer::ENCRYPTION_SMTPS; // Enable TLS encryption; `PHPMailer::ENCRYPTION_SMTPS` also accepted $mailSender-&gt;Port = $this-&gt;smtp_port; // TCP port to connect to //Recipients $mailSender-&gt;setFrom($this-&gt;smtp_username, $this-&gt;smtp_from); foreach ($addresses as $index =&gt; $address) { $mailSender-&gt;addAddress($address); // Name is optional } // Content $mailSender-&gt;isHTML(true); // Set email format to HTML $mailSender-&gt;Subject = $subject; $mailSender-&gt;Body = $body; //è¿”å›é‚®ä»¶å¯¹è±¡ return $mailSender; }2.3 å®šä¹‰é’©å­åˆ›å»ºé’©å­å…¥å£æ–‡ä»¶index.phpï¼Œå¹¶å¼•å…¥MailSender.phpæ–‡ä»¶ï¼Œå¦‚ä¸‹ä»£ç ï¼š&lt;?phpinclude 'MailSender.php';é¦–å…ˆéªŒè¯æäº¤è€…æ˜¯å¦å°†ä»£ç æäº¤åˆ°masteråˆ†æ”¯ï¼Œå…¶æ¬¡éªŒè¯å¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœéªŒè¯ä¸é€šè¿‡æ—¶ï¼Œç›´æ¥é€€å‡ºç¨‹åºï¼Œå¦‚ä¸‹ä»£ç ï¼š// æ£€æµ‹IPif (!in_array($_SERVER['REMOTE_ADDR'], $allowIpArr)) { echo 'éæ³•IP:' . $_SERVER['REMOTE_ADDR']; exit(0);}// è·å–è¯·æ±‚å‚æ•°$headers = getallheaders();$body = json_decode(file_get_contents(\"php://input\"), true);// è¯·æ±‚å¯†ç $password = 'www.jkdev.cn';// éªŒè¯æäº¤åˆ†æ”¯æ˜¯å¦ä¸ºmasterif (!isset($body['ref']) || $body['ref'] !== 'refs/heads/master') { echo 'éä¸»åˆ†æ”¯' . $body; exit(0);}// éªŒè¯æäº¤å¯†ç æ˜¯å¦æ­£ç¡®if (!isset($body['password']) || $body['password'] !== $password) { echo 'å¯†ç é”™è¯¯'; exit(0);}é€šè¿‡éªŒè¯ä¹‹åï¼Œåœ¨æœåŠ¡å™¨æ‹‰å–gitæœåŠ¡å™¨ä¸Šçš„æœ€æ–°ä»£ç // éªŒè¯æˆåŠŸï¼Œæ‹‰å–ä»£ç $path = $body['project']['path'];$command = 'cd /var/www/html/' . $path . ' &amp;&amp; git pull 2&gt;&amp;1';$res = shell_exec($command);åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œå…ˆä½¿ç”¨cdå‘½ä»¤è¿›å…¥æœåŠ¡å™¨ä¸Šçš„é¡¹ç›®ç›®å½•ï¼Œè¿™é‡Œè¦æ³¨æ„ï¼Œé¡¹ç›®åç¼€è·¯å¾„å¿…é¡»å’ŒgitæœåŠ¡å™¨ä¸Šçš„é¡¹ç›®è·¯å¾„æ˜¯ä¸€è‡´çš„ã€‚å†ä½¿ç”¨git pullå‘½ä»¤æ‹‰å–ä»£ç ï¼Œä½¿ç”¨2&gt;&amp;1æŒ‡ä»¤ä¼šè¿”å›gitæ‰§è¡Œç»“æœã€‚æœ€åä½¿ç”¨shell_execæ‰§è¡Œå‘½ä»¤å¹¶ä½¿ç”¨$reså˜é‡æ¥æ¥æ”¶æ‰§è¡Œç»“æœã€‚æœ€åï¼Œå®šä¹‰é€šçŸ¥é‚®ä»¶å‘é€å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š// å‘é€é‚®ä»¶$addresses = [ $body['sender']['email'],// å°†é‚®ä»¶å‘é€ç»™å‘é€è€… $body['repository']['owner']['email']// å°†é‚®ä»¶å‘é€ç»™ä»“åº“æ‰€æœ‰è€…];// å»é™¤é‡å¤çš„å†…å®¹$addresses = array_unique($addresses);try { // æ›´æ–°è¯´æ˜ $title = 'éƒ¨ç½²æˆåŠŸé€šçŸ¥'; // æ„é€ é‚®ä»¶å†…å®¹ $message = $body['head_commit']['message'];// æäº¤ä¿¡æ¯ $datetime = date('Y-m-d H:i:s', $body['timestamp'] / 1000);// æ—¶é—´ $pusher = $body['pusher']['name'];// æäº¤äºº $name = $body['project']['name'];// é¡¹ç›®å $path = $body['project']['path'];// è·¯å¾„ $content = &lt;&lt;&lt;HTML&lt;html&gt;&lt;body&gt; &lt;h2&gt;{$body['project']['name']}å·²éƒ¨ç½²æˆåŠŸ&lt;/h2&gt; &lt;p&gt; æè¿°ï¼š&lt;span style=\"font-size: 16px; color: cadetblue\"&gt;$message&lt;/span&gt; &lt;br&gt; æ—¶é—´ï¼š&lt;span style=\"font-size: 16px; color: red\"&gt;$datetime&lt;/span&gt; &lt;br&gt; æäº¤äººï¼š&lt;span style=\"font-size: 16px; color: cadetblue\"&gt;$pusher&lt;/span&gt; &lt;br&gt; é¡¹ç›®åç§°ï¼š&lt;span style=\"font-size: 16px; color: cadetblue\"&gt;$name&lt;/span&gt; &lt;br&gt; é¡¹ç›®è·¯å¾„ï¼š&lt;span style=\"font-size: 16px; color: cadetblue\"&gt;$path&lt;/span&gt; &lt;/p&gt;&lt;/body&gt;&lt;/html&gt;HTML; // å‘é€é‚®ä»¶ $emailSender = (new MailSender())-&gt;obtainEmailSender($addresses, $title, $content); $emailSender-&gt;send(); // è¿”å›ç»“æœ echo 'é‚®ä»¶å‘é€æˆåŠŸï¼Œgit pullæ‰§è¡Œç»“æœï¼š' . $res;} catch (\\PHPMailer\\PHPMailer\\Exception $e) { echo 'é‚®ä»¶å‘é€å¤±è´¥ï¼Œgit pullæ‰§è¡Œç»“æœï¼š' . $res . 'ï¼Œé‚®ä»¶æ—¥å¿—ï¼š' . $e;}åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»£ç æ¨é€è€…å’Œä»“åº“æ‰€æœ‰è€…ä½œä¸ºç›®æ ‡é‚®ä»¶é€šçŸ¥å¯¹è±¡ã€‚å¦‚æœä¸¤ä¸ªç›®æ ‡æ˜¯åŒä¸€ä¸ªé‚®ç®±ï¼Œå°†åªå–ä¸€ä¸ªã€‚å…¶æ¬¡æ„é€ é‚®ä»¶å‘é€å†…å®¹ï¼Œä½¿ç”¨é‚®ä»¶å‘é€è€…çš„sendæ–¹æ³•è¿›è¡Œé‚®ä»¶å‘é€ã€‚æœ€ç»ˆï¼Œå°†gitæ‹‰å–ç»“æœå’Œé‚®ä»¶å‘é€ç»“æœå“åº”ç»™è¯·æ±‚è€…ã€‚ä¸‰ã€æ€»ç»“æœ¬æ–‡ç»“åˆç äº‘çš„ç½‘ç»œé’©å­ï¼ˆweb hookï¼‰åŠŸèƒ½ï¼Œä½¿ç”¨PHPä»£ç ç¼–å†™äº†ä¸€ä¸ªHTTPæ¥å£ï¼Œå½“å¼€å‘è€…å¾€ç äº‘ä¸Šæäº¤ä»£ç æ—¶ï¼Œå°†è§¦å‘é’©å­æºå¸¦ç›¸å…³ä¿¡æ¯å»è°ƒç”¨ä¸šåŠ¡æœåŠ¡å™¨æ¥å£ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸šåŠ¡æœåŠ¡å™¨ä¸Šè§¦å‘shellå‘½ä»¤å»åŒæ­¥gitæœåŠ¡å™¨ä¸Šçš„ä»£ç ï¼Œè¾¾åˆ°è‡ªåŠ¨éƒ¨ç½²çš„ç›®çš„ã€‚ä½ è¿˜å¯ä»¥å‚è€ƒç äº‘ç½‘ç»œé’©å­çš„æ–‡æ¡£ï¼Œè¿›è€Œè¿›è¡Œä»£ç æ”¹è¿›ï¼Œå®ç°å…¶ä»–çš„ç½‘ç»œé’©å­ç›¸å…³çš„ä¸šåŠ¡éœ€æ±‚ï¼å‚è€ƒé“¾æ¥ï¼šhttps://gitee.com/helpæœ¬æ–‡åŸåˆ›é¦–å‘è‡ªå¾®ä¿¡å…¬ä¼—å·ï¼šæå®¢å¼€å‘è€…ï¼Œç¦æ­¢è½¬è½½!" }, { "title": "æ€æ ·è®©PHPæç¤ºé”™è¯¯ä¿¡æ¯", "url": "/posts/php_make-php-show-error-info.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:10:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-03-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°ä»æºä»£ç å®‰è£…PHPçš„é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è¿è¡Œä»£ç æ—¶å¦‚æœå‡ºç°é”™è¯¯ä¸æç¤ºä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œå…¶å®æˆ‘ä»¬åªæœ‰ä¿®æ”¹ä»¥ä¸‹PHPçš„é…ç½®æ–‡ä»¶å°±å¯ä»¥è®©å®ƒæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯äº†äºŒã€ç¯å¢ƒ Ubuntu 16.04 æ“ä½œç³»ç»Ÿ ä»æºç å®‰è£…çš„ PHP 7.2.7 ä¸‰ã€è§£å†³æ­¥éª¤é¦–å…ˆä½¿ç”¨ç¼–è¾‘å·¥å…·æ‰“å¼€ ph...", "content": " æ’°å†™æ—¶é—´ï¼š2019-03-04ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€æ¦‚è¿°ä»æºä»£ç å®‰è£…PHPçš„é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨è¿è¡Œä»£ç æ—¶å¦‚æœå‡ºç°é”™è¯¯ä¸æç¤ºä»»ä½•é”™è¯¯ä¿¡æ¯ï¼Œå…¶å®æˆ‘ä»¬åªæœ‰ä¿®æ”¹ä»¥ä¸‹PHPçš„é…ç½®æ–‡ä»¶å°±å¯ä»¥è®©å®ƒæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯äº†äºŒã€ç¯å¢ƒ Ubuntu 16.04 æ“ä½œç³»ç»Ÿ ä»æºç å®‰è£…çš„ PHP 7.2.7 ä¸‰ã€è§£å†³æ­¥éª¤é¦–å…ˆä½¿ç”¨ç¼–è¾‘å·¥å…·æ‰“å¼€ php é…ç½®æ–‡ä»¶ï¼Œæˆ‘çš„phpå®‰è£…ç›®å½•æ˜¯/usr/local/phpï¼Œé…ç½®æ–‡ä»¶çš„ç›®å½•åœ¨è¯¥ç›®å½•ä¸‹çš„/etcç›®å½•vim /usr/local/php/etc/php.iniåœ¨phpé…ç½®æ–‡ä»¶çš„å¤´éƒ¨æ·»åŠ ä»¥ä¸‹å‡ è¡Œä»£ç # ini_setå‡½æ•°ä½œç”¨ï¼šä¸ºä¸€ä¸ªé…ç½®é€‰é¡¹è®¾ç½®å€¼ï¼Œini_set(\"display_errors\", \"stderr\");# error_reportingæ˜¯è®¾ç½®é”™è¯¯æŠ¥å‘Šå†…å®¹ï¼ŒE_ALLä»£è¡¨æ˜¾ç¤ºæ‰€æœ‰é”™è¯¯error_reporting(E_ALL);å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå‚æ•°è¯´æ˜ï¼š display_errorsåœ¨phpçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œâ€display_errorsâ€é€‰é¡¹è®¾ç½®ä½œç”¨æ˜¯ï¼šæ˜¯å¦å°†é”™è¯¯ä¿¡æ¯ä½œä¸ºè¾“å‡ºçš„ä¸€éƒ¨åˆ†æ˜¾ç¤ºåˆ°å±å¹•ï¼Œæˆ–è€…å¯¹ç”¨æˆ·éšè—è€Œä¸æ˜¾ç¤ºã€‚è®¾ç½® â€œstderrâ€ è¡¨ç¤ºå‘é€åˆ° stderr è€Œä¸æ˜¯ stdoutã€‚ â€œstderrâ€ä» PHP 5.2.4 å¼€å§‹å¯ç”¨ã€‚åœ¨ä»¥å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¯¥é…ç½®å€¼çš„ç±»å‹ä¸º booleanã€‚stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ï¼Œè¾“å‡ºæ–¹å¼æ˜¯è¡Œç¼“å†²ã€‚è¾“å‡ºçš„å­—ç¬¦ä¼šå…ˆå­˜æ”¾åœ¨ç¼“å†²åŒºï¼Œç­‰æŒ‰ä¸‹å›è½¦é”®æ—¶æ‰è¿›è¡Œå®é™…çš„I/Oæ“ä½œã€‚stderrï¼ˆæ ‡å‡†å‡ºé”™ï¼‰ï¼Œæ˜¯ä¸å¸¦ç¼“å†²çš„ï¼Œè¿™ä½¿å¾—å‡ºé”™ä¿¡æ¯å¯ä»¥ç›´æ¥å°½å¿«åœ°æ˜¾ç¤ºå‡ºæ¥ã€‚å°½ç®¡ display_errors ä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶è®¾ç½® (ä½¿ç”¨ ini_set())ï¼Œ ä½†æ˜¯è„šæœ¬å‡ºç°è‡´å‘½é”™è¯¯æ—¶ä»»ä½•è¿è¡Œæ—¶çš„è®¾ç½®éƒ½æ˜¯æ— æ•ˆçš„ã€‚ å› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹é¢„æœŸè¿è¡Œçš„æ“ä½œä¸ä¼šè¢«æ‰§è¡Œã€‚ error_reportingè®¾ç½®é”™è¯¯æŠ¥å‘Šçš„çº§åˆ«ã€‚è¯¥å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªä»»æ„çš„è¡¨ç¤ºäºŒè¿›åˆ¶ä½å­—æ®µçš„æ•´æ•°ï¼Œæˆ–è€…å¸¸æ•°åç§°ã€‚é”™è¯¯çº§åˆ«å’Œå¸¸æ•°æ˜¯åœ¨ é¢„å®šä¹‰å¸¸é‡å®šä¹‰çš„ã€‚åœ¨ PHP5.3 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤å€¼ä¸º E_ALL &amp; ~E_NOTICE &amp; ~E_STRICT &amp; ~E_DEPRECATEDã€‚ è¯¥è®¾ç½®ä¸ä¼šæ˜¾ç¤º E_NOTICEã€ E_STRICT ã€E_DEPRECATED çº§é”™è¯¯æç¤ºã€‚åœ¨ PHP 5.3.0 ä»¥å‰ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤å€¼æ˜¯ E_ALL &amp; ~E_NOTICE &amp; ~E_STRICTã€‚åœ¨ PHP 4 ä¸­ï¼Œé»˜è®¤å€¼æ˜¯ E_ALL &amp; ~E_NOTICEã€‚å››ã€é‡å¯æœåŠ¡å™¨é‡å¯ApacheæœåŠ¡å™¨æˆ–è€…PHP-FPMä¹‹åï¼Œå³å¯çœ‹åˆ°è¿è¡Œé”™è¯¯ä»£ç æ—¶ä¼šæç¤ºé”™è¯¯ä¿¡æ¯ å‚è€ƒphpå®˜æ–¹æ–‡æ¡£ï¼šhttp://php.net/manual/zh/errorfunc.configuration.php#ini.display-errors" }, { "title": "Linuxä¸‹phpå®‰è£…curlæ‰©å±•", "url": "/posts/php_php-install-curl-extension-on-linux.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:09:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä½¿ç”¨php -mæŸ¥çœ‹phpå½“å‰å·²å¼€å¯æ‰©å±•åº“phpä½¿ç”¨æºç ç¼–è¯‘å®‰è£…ï¼ŒåŸæœ¬åœ¨å®‰è£…phpæ—¶æ²¡æœ‰è®¾ç½®curlæ‰©å±•åº“ï¼Œæœ€è¿‘é¡¹ç›®éœ€è¦curlæ‰©å±•åº“çš„æ”¯æŒï¼Œäºæ˜¯æŸ¥çœ‹phpæ˜¯å¦å·²ç»å¼€å¯curlæ‰©å±•åº“/usr/local/php/bin/php -mç»“æœå¦‚å›¾æ‰€ç¤ºï¼Œæ²¡æœ‰curlæ‰©å±•ï¼šäºŒã€å®‰è£…curlæ‰©å±•åº“è¿›å…¥æºç ç›®å½•ï¼Œè¿›å…¥åˆ°phpæºç ç›®å½•ä¸‹çš„...", "content": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä½¿ç”¨php -mæŸ¥çœ‹phpå½“å‰å·²å¼€å¯æ‰©å±•åº“phpä½¿ç”¨æºç ç¼–è¯‘å®‰è£…ï¼ŒåŸæœ¬åœ¨å®‰è£…phpæ—¶æ²¡æœ‰è®¾ç½®curlæ‰©å±•åº“ï¼Œæœ€è¿‘é¡¹ç›®éœ€è¦curlæ‰©å±•åº“çš„æ”¯æŒï¼Œäºæ˜¯æŸ¥çœ‹phpæ˜¯å¦å·²ç»å¼€å¯curlæ‰©å±•åº“/usr/local/php/bin/php -mç»“æœå¦‚å›¾æ‰€ç¤ºï¼Œæ²¡æœ‰curlæ‰©å±•ï¼šäºŒã€å®‰è£…curlæ‰©å±•åº“è¿›å…¥æºç ç›®å½•ï¼Œè¿›å…¥åˆ°phpæºç ç›®å½•ä¸‹çš„æ‰©å±•åº“æºç ç›®å½•çš„curlæºç ç›®å½•ï¼Œæºç ç›®å½•æ˜¯å½“æ—¶å®‰è£…phpæ—¶ä½¿ç”¨çš„æºç çš„ç›®å½•ï¼Œå¦‚æœåˆ é™¤äº†ï¼Œå¯ä»¥å»phpå®˜æ–¹é‡æ–°ä¸‹è½½è§£å‹ï¼Œå¯ä»¥çœ‹åˆ°ä»¥ä¸‹æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾ï¼šè°ƒç”¨phpizeç¨‹åºç”Ÿæˆç¼–è¯‘é…ç½®æ–‡ä»¶ï¼šè¿™ä¸ªå‘½ä»¤å¯èƒ½ä¼šäº§ç”Ÿä¸€äº›é”™è¯¯ï¼Œä¸»è¦æ˜¯å› ä¸ºä½ çš„ç³»ç»Ÿé‡Œç¼ºå°‘ä¸€äº›åº“ï¼Œä½ éœ€è¦æŒ‰ç…§æç¤ºå®‰è£…ç¼ºå¤±çš„åº“å°±å¯ä»¥äº†,è°ƒç”¨phpizeç¨‹åºåå¯ä»¥çœ‹åˆ°å¤šå‡ºäº†å‡ ä¸ªæ–‡ä»¶ï¼Œæœ€å…³é”®çš„æ˜¯configureæ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šè°ƒç”¨configureç”ŸæˆMakefileæ–‡ä»¶ï¼Œâ€“with-php-configçš„å€¼æ˜¯ï¼šphpå®‰è£…è·¯å¾„ä¸­çš„/bin/php-configï¼Œåœ¨æ‰§è¡Œconfigureçš„è¿‡ç¨‹ä¸­ï¼Œä¼šæ£€æµ‹ç³»ç»Ÿçš„ä¾èµ–æ˜¯å¦æ»¡è¶³ï¼Œå¦‚æœä¾èµ–ä¸æ»¡è¶³å°†ä¼šæŠ¥é”™ï¼ŒæŒ‰æç¤ºè§£å†³å³å¯ï¼š./configure -with-curl=/usr/local/curl --with-php-config=/usr/local/php/bin/php-configæ‰§è¡Œå®Œconfigureï¼Œå‡ºç°Makefileæ–‡ä»¶åå…ˆè°ƒç”¨makeç¼–è¯‘ï¼Œmake installå®‰è£…ï¼Œå¦‚æœæ²¡æœ‰ç”ŸæˆMakefileæ–‡ä»¶ï¼Œå°±æ˜¯ç³»ç»Ÿç¼ºå¤±åº“ï¼Œæ ¹æ®æç¤ºå®‰è£…ååœ¨æ­¤æ‰§è¡Œconfigureå‘½ä»¤å³å¯:make &amp;&amp; make installå¦‚å›¾æ‰€ç¤ºå°±æ˜¯å®‰è£…æˆåŠŸäº†ï¼Œå³ç”Ÿæˆäº†curl.soæ–‡ä»¶ï¼Œä½ç½®å°±åœ¨/usr/local/php/lib/php/extensions/no-debug-zts-20160303/ç›®å½•ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼šæˆ‘ä»¬éœ€è¦æ·»åŠ phpå¯¹curlçš„æ”¯æŒï¼Œç¼–è¾‘php.iniæ–‡ä»¶åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸‹åŠ è½½ä»£ç ï¼Œextenseçš„å€¼æ˜¯curl.soçš„è·¯å¾„ï¼Œç„¶åä¿å­˜é€€å‡ºå³å¯ï¼šé‡å¯ApacheæœåŠ¡å™¨æˆ–è€…php-fpmå³å¯ç”Ÿæ•ˆï¼Œå¦‚æœå†æ¬¡è°ƒç”¨php -må‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å¤šå‡ºäº†curlæ‰©å±•äº†ï¼š" }, { "title": "è§£å†³æ‰§è¡ŒphpizeæŠ¥é”™ï¼šperl: warning: Falling back to a fallback locale (\"en_US.utf8\").", "url": "/posts/php_resolve-falling-back-to-a-fallback-locate-error.html", "categories": "PHP", "tags": "", "date": "2023-01-30 00:08:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä»Šå¤©åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…phpçš„curlæ‰©å±•ï¼Œä½†æ˜¯åœ¨è¿è¡Œphpizeå‘½ä»¤æ—¶é‡åˆ°â€perl: warning: Falling back to a fallback locale (â€œen_US.utf8â€).â€é”™è¯¯æç¤ºï¼Œå¦‚å›¾ï¼šæ ¹æ®æç¤ºï¼Œä¼°è®¡æ˜¯ç³»ç»Ÿè¯­è¨€åº“ç¼ºå¤±çš„é—®é¢˜ï¼Œäºæ˜¯å®‰è£…i18n(internationalization:å›½é™…åŒ–)è¯­...", "content": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä»Šå¤©åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…phpçš„curlæ‰©å±•ï¼Œä½†æ˜¯åœ¨è¿è¡Œphpizeå‘½ä»¤æ—¶é‡åˆ°â€perl: warning: Falling back to a fallback locale (â€œen_US.utf8â€).â€é”™è¯¯æç¤ºï¼Œå¦‚å›¾ï¼šæ ¹æ®æç¤ºï¼Œä¼°è®¡æ˜¯ç³»ç»Ÿè¯­è¨€åº“ç¼ºå¤±çš„é—®é¢˜ï¼Œäºæ˜¯å®‰è£…i18n(internationalization:å›½é™…åŒ–)è¯­è¨€åŒ…ï¼šå¦‚ä¸‹apt install locales-allå¾ˆå¹¸è¿ï¼Œå†æ¬¡è¿è¡Œphpizeå‘½ä»¤ï¼ŒæˆåŠŸè§£å†³é—®é¢˜" }, { "title": "Linuxä¸‹å®‰è£…Redis", "url": "/posts/nosql_install-redis-on-linux.html", "categories": "NoSQL", "tags": "", "date": "2023-01-30 00:06:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-01-15ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä¸‹è½½ä¸å®‰è£…ä¸‹æ–‡æ˜¯åœ¨Linuxå®‰è£…redisçš„è¿‡ç¨‹ï¼Œä½¿ç”¨rootç”¨æˆ·è¿›è¡Œæ“ä½œ#ä¸‹è½½æºä»£ç wget http://download.redis.io/releases/redis-2.8.17.tar.gz#è§£å‹tar xzf redis-2.8.17.tar.gz#ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/usr/localç›®å½•mv redis-2.8...", "content": " æ’°å†™æ—¶é—´ï¼š2018-01-15ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-30ä¸€ã€ä¸‹è½½ä¸å®‰è£…ä¸‹æ–‡æ˜¯åœ¨Linuxå®‰è£…redisçš„è¿‡ç¨‹ï¼Œä½¿ç”¨rootç”¨æˆ·è¿›è¡Œæ“ä½œ#ä¸‹è½½æºä»£ç wget http://download.redis.io/releases/redis-2.8.17.tar.gz#è§£å‹tar xzf redis-2.8.17.tar.gz#ç§»åŠ¨æ–‡ä»¶å¤¹åˆ°/usr/localç›®å½•mv redis-2.8.17 /usr/local/redis#ç¼–è¯‘makemakeå®Œå redisç›®å½•ä¸‹ä¼šå‡ºç°ç¼–è¯‘åçš„redisæœåŠ¡ç¨‹åºredis-serverï¼Œè¿˜æœ‰ç”¨äºæµ‹è¯•çš„å®¢æˆ·ç«¯ç¨‹åºredis-cliï¼Œä¸¤ä¸ªç¨‹åºä½äºå®‰è£…ç›®å½• src ç›®å½•ä¸‹äºŒã€æµ‹è¯•æ•°æ®åº“è¿›å…¥redisç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š#å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶./src/redis-server redis.confå¯åŠ¨redisæœåŠ¡è¿›ç¨‹åï¼Œå°±å¯ä»¥ä½¿ç”¨æµ‹è¯•å®¢æˆ·ç«¯ç¨‹åºredis-cliå’ŒredisæœåŠ¡äº¤äº’äº†ã€‚ å¦‚ï¼š./src/redis-cliredis&gt; set foo barOKredis&gt; get foo\"bar\"ä¸‰ã€å…³é—­æ•°æ®åº“æœåŠ¡å…³é—­å‘½ä»¤ä¸ºï¼šredis-cli -p ç«¯å£å· shutdownï¼Œå¦‚ä¸‹ï¼š./src/redis-cli -p 6379 shutdownå››ã€ä¿®æ”¹é…ç½®æ–‡ä»¶redis.conf ï¼ˆ1ï¼‰è®¾ç½®æ”¯æŒè¿œç¨‹è®¿é—®ï¼šæ‰¾åˆ°ä»¥ä¸‹ä¸€è¡Œbind 127.0.0.1æ³¨é‡Šå½“å‰è¡Œå³å¯æ”¯æŒè¿œç¨‹ç™»å½•# bind 127.0.0.1 ï¼ˆ2ï¼‰è®¾ç½®å¯†ç ï¼šredisé»˜è®¤æ²¡æœ‰å¯†ç ï¼Œä½¿ç”¨ä¸‹åˆ—æ–¹å¼è®¾ç½®å¯†ç ï¼Œæ‰¾åˆ°ä¸‹é¢ä¸€è¡Œ# requirepass foobaredå–æ¶ˆæ³¨é‡Šï¼Œâ€œfoobaredâ€å°±æ˜¯å¯†ç ï¼Œå¯ä»¥æ”¹æˆå…¶ä»–çš„ï¼Œå¦‚æ”¹æˆâ€œmyredisâ€requirepass myredisé‡å¯æœåŠ¡ï¼Œä½¿ç”¨aå‚æ•°ä¼ å…¥å¯†ç æ‰å¯ä»¥æ­£å¸¸æ“ä½œ./src/redis-cli -a myredis" }, { "title": "Linuxæ€æ ·å®‰è£…MongoDB", "url": "/posts/nosql_install-mongodb-on-linux.html", "categories": "NoSQL", "tags": "", "date": "2023-01-30 00:05:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-01-15ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-301ã€æ¦‚è¿°MongoDB æ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç»“æ„ä¸º JSON ï¼Œå®˜æ–¹å«åš BJSONï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶ JSONã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚ä¸‹æ–‡æ˜¯åœ¨Linux 64...", "content": " æ’°å†™æ—¶é—´ï¼š2018-01-15ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-301ã€æ¦‚è¿°MongoDB æ˜¯ç”±C++è¯­è¨€ç¼–å†™çš„ï¼Œæ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„å¼€æºæ•°æ®åº“ç³»ç»Ÿã€‚MongoDB å°†æ•°æ®å­˜å‚¨ä¸ºä¸€ä¸ªæ–‡æ¡£ï¼Œæ•°æ®ç»“æ„ç”±é”®å€¼(key=&gt;value)å¯¹ç»„æˆã€‚MongoDB æ–‡æ¡£ç»“æ„ä¸º JSON ï¼Œå®˜æ–¹å«åš BJSONï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶ JSONã€‚å­—æ®µå€¼å¯ä»¥åŒ…å«å…¶ä»–æ–‡æ¡£ï¼Œæ•°ç»„åŠæ–‡æ¡£æ•°ç»„ã€‚ä¸‹æ–‡æ˜¯åœ¨Linux 64ä½ç³»ç»Ÿä¸­å®‰è£…MongoDBçš„æµç¨‹ï¼ˆä»¥ä¸‹æ“ä½œä»¥rootç”¨æˆ·èº«ä»½è¿›è¡Œæ“ä½œï¼‰ï¼š2ã€å®‰è£…# ä¸‹è½½curl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.0.6.tgz# è§£å‹tar -zxvf mongodb-linux-x86_64-3.0.6.tgz# å°†è§£å‹åŒ…æ‹·è´åˆ°æŒ‡å®šç›®å½•mv mongodb-linux-x86_64-3.0.6/ /usr/local/mongodbç¼–å†™/etc/profileæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ç›®å½•æ·»åŠ ä»¥ä¸‹å†…å®¹export PATH=/usr/local/mongodb/bin:$PATHä¿å­˜ä¹‹åå†æ‰§è¡Œsource /etc/profileå‘½ä»¤è®©é…ç½®ç«‹å³ç”Ÿæ•ˆ3ã€è¿è¡Œåˆ›å»ºæ•°æ®åº“ç›®å½•mkdir -p /data/dbå¯åŠ¨æ•°æ®åº“ï¼Œåœ¨å¯åŠ¨æ•°æ®åº“ä¹‹å‰ï¼Œå…ˆç¡®å®š/etc/profileæ–‡ä»¶çš„å˜æ›´å·²ç»ç”Ÿæ•ˆã€‚æˆ–è€…è¿›å…¥binç›®å½•ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå‘½ä»¤ååŠ â€&amp;â€œè¿›è¡Œåå°å¯åŠ¨ï¼Œä»¥ä¸‹æ˜¯ç›´æ¥ä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„å¯åŠ¨/usr/local/mongodb/bin/mongod &amp;4ã€æµ‹è¯•æ•°æ®åº“ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›å…¥æ•°æ®åº“/usr/local/mongodb/bin/mongoè¿›å…¥æ•°æ®åº“ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å…³é—­æ•°æ®åº“æœåŠ¡ï¼šuse admin db.shutdownServer()è¿™æ ·å°±æˆåŠŸå®‰è£…å¹¶æµ‹è¯•äº†ï¼Œæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚" }, { "title": "æ€æ ·æŠŠjavaçš„warç¨‹åºåŒ…æ”¾åœ¨tomcatæœåŠ¡å™¨ä¸Šè¿è¡Œ", "url": "/posts/java_deploy-war-package-on-tomcat.html", "categories": "java", "tags": "", "date": "2023-01-29 21:49:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-03-31ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç®€ä»‹å¾ˆä¹…ä¹‹å‰ï¼Œæˆ‘åšäº†ä¸€ä¸ªæ•™ç¨‹â€œä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨å¿«é€Ÿæ­å»ºä¸ªäººç½‘ç«™â€ï¼šhttps://www.bilibili.com/video/av15159168ï¼Œè¿™ä¸ªè§†é¢‘ç»™åˆå­¦è€…åŒå­¦ä»¬æ¼”ç¤ºäº†å¦‚ä½•åœ¨Debianç³»åˆ—çš„äº‘æœåŠ¡å™¨ä¸Šå®‰è£…tomcatï¼Œå¹¶ä½¿ç”¨tomcatç¯å¢ƒæ¥æ‰˜ç®¡æˆ‘ä»¬çš„é™æ€ç½‘é¡µã€‚è¿™è§†é¢‘å¤§å¤šè§‚ä¼—æ˜¯å–œæ¬¢webå¼€å‘çš„åˆå­¦è€…ä»¬ã€‚æ­¤åšå®¢åœ¨...", "content": " æ’°å†™æ—¶é—´ï¼š2019-03-31ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç®€ä»‹å¾ˆä¹…ä¹‹å‰ï¼Œæˆ‘åšäº†ä¸€ä¸ªæ•™ç¨‹â€œä½¿ç”¨é˜¿é‡Œäº‘æœåŠ¡å™¨å¿«é€Ÿæ­å»ºä¸ªäººç½‘ç«™â€ï¼šhttps://www.bilibili.com/video/av15159168ï¼Œè¿™ä¸ªè§†é¢‘ç»™åˆå­¦è€…åŒå­¦ä»¬æ¼”ç¤ºäº†å¦‚ä½•åœ¨Debianç³»åˆ—çš„äº‘æœåŠ¡å™¨ä¸Šå®‰è£…tomcatï¼Œå¹¶ä½¿ç”¨tomcatç¯å¢ƒæ¥æ‰˜ç®¡æˆ‘ä»¬çš„é™æ€ç½‘é¡µã€‚è¿™è§†é¢‘å¤§å¤šè§‚ä¼—æ˜¯å–œæ¬¢webå¼€å‘çš„åˆå­¦è€…ä»¬ã€‚æ­¤åšå®¢åœ¨è¿™ä¸ªè§†é¢‘çš„åŸºç¡€ä¹‹ä¸Šå†™çš„ï¼Œå¦‚æœä½ ä¸æ˜¯çœ‹è¿‡è¿™ä¸ªè§†é¢‘åˆå­¦è€…ï¼Œæœ€å¥½ç»•è·¯è€Œè¡Œï¼Œä¸ç„¶å¯èƒ½æµªè´¹ä½ çš„æ—¶é—´ã€‚å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯æ‰˜ç®¡é™æ€ç½‘é¡µçš„è¯ï¼Œéƒ½å¯ä»¥ä¸ç”¨è‡ªå·±æ­æœåŠ¡å™¨ç¯å¢ƒï¼Œå®Œå…¨å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹ç½‘ç«™æä¾›çš„webpageæœåŠ¡ã€‚tomcatä¸»è¦æ˜¯ä½œä¸ºjavaç½‘ç«™çš„å®¹å™¨ã€‚è¿™ç¯‡åšå®¢æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•å°†æˆ‘ä»¬çš„javaçš„waråŒ…ç¨‹åºå‘å¸ƒçš„tomcatä¸­ã€‚äºŒã€æ¼”ç¤ºå·¥å…· 1.Eclipse 2019.03 2.tomcat 8.5.39ä¸‰ã€æœ¬åœ°æ‰“åŒ…WARåŒ…3.1 åœ¨Eclipseä¸­æ–°å»ºä¸€ä¸ªåŠ¨æ€ç½‘é¡µé¡¹ç›®å¦‚å›¾æˆ‘çš„é¡¹ç›®å–åä¸ºâ€œTestâ€ï¼Œç„¶åå‘¢ï¼Œåœ¨WebContentç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºindex.jspï¼Œå†™ä¸€ä¸ªç®€å•çš„å­—ç¬¦è¿›å»ã€‚å› ä¸ºè¿™åªæ˜¯ç¤ºä¾‹ï¼Œå®é™…ä¸Šä½ çš„javaåŠ¨æ€ç½‘é¡µé¡¹ç›®å¯èƒ½å¾ˆå¤æ‚ï¼Œä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®ç”±å¾ˆå¤šä»£ç æ„æˆã€ä½ çš„ç¨‹åºè¿˜è¦ä¸æ•°æ®åº“äº¤äº’ç­‰ç­‰ã€‚3.2 å¯¼å‡ºwaråŒ…åœ¨Eclipseä¸­é¡¹ç›®èŠ‚ç‚¹å³é”® Export -&gt; WAR fileï¼Œé…ç½®è¾“å‡ºè·¯å¾„å°±å¯ä»¥å¯¼å‡ºäº†ï¼Œæˆ‘çš„è·¯å¾„æ˜¯ /home/pan/Downloads/Test.warï¼Œå¦‚å›¾æ‰€ç¤º20190328213818466.pngå››ã€é…ç½®æœåŠ¡å™¨4.1 ä¸Šä¼ WARåŒ…åˆ°æœåŠ¡å™¨ä¸­tomcatè§£å‹ç›®å½•çš„webappsç›®å½•å¦‚å›¾æ‰€ç¤º4.2 ç¼–è¾‘tomcatè§£å‹ç›®å½•ä¸‹çš„server.xmlæ–‡ä»¶åœ¨EngineèŠ‚ç‚¹ä¸‹çš„HostèŠ‚ç‚¹ä¸‹æ·»åŠ ä»¥ä¸‹é…ç½®å†…å®¹&lt;Context path=\"\" docBase=\"/home/pan/tomcat/webapps/Test\"/&gt;docBaseä»£è¡¨ä½ çš„é¡¹ç›®åœ¨æœåŠ¡å™¨ä¸Šçš„ç»å¯¹è·¯å¾„ï¼ŒWARåŒ…åœ¨ä½ é‡å¯tomcatä¹‹åå®ƒä¼šè‡ªåŠ¨è§£å‹ã€‚4.3 é‡å¯tomcatä½ çš„åŸŸåéœ€è¦è§£æåˆ°ä½ çš„æœåŠ¡å™¨ipåœ°å€ä¸Šï¼Œè¿™é‡Œæˆ‘ç»‘å®šçš„åŸŸåæ˜¯jkdev.cnï¼Œæˆ‘ä»¬é»˜è®¤ä½¿ç”¨8080ç«¯å£ï¼Œå¦‚æœä½ çš„é¡¹ç›®åœ¨å…¬ç½‘ä¸Šåº”è¯¥æ”¹ä¸º80ç«¯å£ã€‚å¯ä»¥çœ‹åˆ°å¯åŠ¨tomcatä¹‹åï¼ŒTest.warè¢«è§£å‹äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šæ­¤æ—¶æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼Œå°±é¡ºåˆ©è®¿é—®åˆ°æˆ‘ä»¬çš„JavaåŠ¨æ€ç½‘é¡µé¡¹ç›®äº†ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š å‚è€ƒapachaå®˜ç½‘ï¼š[http://tomcat.apache.org/tomcat-8.5-doc/index.html][7]" }, { "title": "Javaä¸­Stringã€StringBuferã€StringBuilderçš„åŒºåˆ«ä»¥åŠä½¿ç”¨æ–¹æ³•", "url": "/posts/java_defierent-of-string-stringbuffer-stringbuilder.html", "categories": "java", "tags": "", "date": "2023-01-29 21:40:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-09-16ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://www.jb51.net/article/107795.htmä¸€ã€ç®€ä»‹åœ¨Javaè¯­è¨€ä¸­ï¼Œå…±æœ‰8ä¸ªåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šbyteã€shortã€intã€longã€floatã€doubleã€boolean å’Œ charï¼Œå…¶ä¸­charç±»å‹ç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ aã€bã€c ã€Aã€Bã€Cã€&amp; è¿™äº›å¤§...", "content": " æ’°å†™æ—¶é—´ï¼š2018-09-16ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ã€‚åŸæ–‡é“¾æ¥ï¼šhttps://www.jb51.net/article/107795.htmä¸€ã€ç®€ä»‹åœ¨Javaè¯­è¨€ä¸­ï¼Œå…±æœ‰8ä¸ªåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šbyteã€shortã€intã€longã€floatã€doubleã€boolean å’Œ charï¼Œå…¶ä¸­charç±»å‹ç”¨äºè¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œä¾‹å¦‚ aã€bã€c ã€Aã€Bã€Cã€&amp; è¿™äº›å¤§å°å†™å­—æ¯æˆ–è€…ç‰¹æ®Šå­—ç¬¦ç­‰ç­‰ã€‚åœ¨å®é™…çš„ç¼–ç¨‹ä¸­ï¼Œå•ä¸ªçš„å­—ç¬¦å¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è±¡ä¸­ç”¨çš„é‚£ä¹ˆé¢‘ç¹ï¼Œåè€Œæ˜¯å¤šä¸ªå­—ç¬¦ç»„æˆçš„â€œå­—ç¬¦ä¸²â€æ›´ä¸ºå¸¸è§ï¼Œä½†æ˜¯åœ¨åŸºæœ¬çš„æ•°æ®ç±»å‹ä¸­ï¼Œå¹¶æ²¡æœ‰å­—ç¬¦ä¸²è¿™ç§æ•°æ®ç±»å‹ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJava è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¢« final å…³é”®å­—ä¿®é¥°çš„ç±» Stringï¼Œå¥¹å°±è¡¨ç¤ºå­—ç¬¦ä¸²ç±»å‹ï¼ŒåŒæ—¶ç”±äºå…¶è¢« final ä¿®é¥°ï¼Œè¿™ä¹Ÿè¡¨æ˜å’±ä»¬åªèƒ½ç”¨è¿™ä¸ªç±»åˆ›å»ºå­—ç¬¦ä¸²ä»¥åŠè°ƒç”¨å…¶ä¸­çš„æ–¹æ³•ï¼Œå´ä¸èƒ½ç»§æ‰¿å¥¹ã€‚è™½ç„¶Javaè¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†å­—ç¬¦ä¸²ç±»Stringï¼Œèƒ½è®©æˆ‘ä»¬æ–¹ä¾¿çš„ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹ï¼Œå§‘ä¸”è¿™ä¹ˆè¯´ï¼Œä½†æ˜¯åœ¨ä¸æ–­çš„å‘å±•ä¸­ï¼Œæˆ‘ä»¬å‘ç°å•çº¯çš„Stringç±»å‹ï¼Œå¹¶ä¸è¶³ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚å•¦ï¼å› æ­¤ï¼Œåœ¨Stringç±»å‹çš„åŸºç¡€ä¸Šï¼Œåˆè¡ç”Ÿå‡ºäº†ä¸¤ä¸ªå­—ç¬¦ä¸²æ„å»ºå™¨StringBufferå’ŒStringBuilderã€‚äºŒã€Stringæˆ‘ä»¬å·²ç»å¤§è‡´äº†è§£äº†Stringç±»å‹å•¦ï¼è¯´å¥¹æ˜¯ä¸€ä¸ªæ•°æ®ç±»å‹ï¼Œä½†å¥¹å¹¶ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªè¢«finalä¿®é¥°çš„ã€ä¸å¯è¢«ç»§æ‰¿çš„ç±»ï¼Œä½äºjava.lang åŒ…ã€‚è‡³äºå¦‚ä½•ä½¿ç”¨String ç±»å‹ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€æ˜¯ç›´æ¥èµ‹å€¼ï¼ŒäºŒæ˜¯ç”¨newåˆ›å»ºï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š// 1ã€ç›´æ¥èµ‹å€¼String str1 = \"ç»´Cæœç³–\"ï¼›// 2ã€ç”¨ new è¿ç®—ç¬¦åˆ›å»ºString str2 = new String(\"ç»´Cæœç³–\")ï¼›åœ¨å¸¸è§çš„å­—ç¬¦ä¸²æ“ä½œä¸­ï¼Œåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰å°¤ä¸ºå¸¸è§ï¼Œä¸”å¸¸ç”¨çš„åˆ¤åˆ«æ–¹å¼æœ‰ä¸¤ç§ï¼Œå³ç”¨Stringç±»æä¾›çš„æ–¹æ³•equalså’Œ==è¿ç®—ç¬¦ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨é¢‘ç‡æ¯”è¾ƒé«˜çš„Stringç±»çš„ APIæ–¹æ³•ï¼š//* å¦‚æœå­—ç¬¦ä¸²ä»¥ suffix ç»“å°¾ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false */boolean endsWith(String suffix)/* å¦‚æœå­—ç¬¦ä¸²ä¸ other ç›¸ç­‰ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false */boolean equals(Object other)/* å¦‚æœå­—ç¬¦ä¸²ä¸ other ç›¸ç­‰ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false */boolean equalsIgnoreCase(String other)/* è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ */int length()/* è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ç”¨ newString å­—ç¬¦ä¸²ä»£æ›¿åŸå§‹å­—ç¬¦ä¸²ä¸­æ‰€ä»¥çš„ oldString å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨ String æˆ–è€… StringBuilder å¯¹è±¡ä½œä¸º CharSequence å‚æ•° */String replace(CharSequence oldString, CharSequence newString)/* å¦‚æœå­—ç¬¦ä¸²ä»¥ prefix å¼€å§‹ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false */boolean startsWith(String prefix)/* è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²åŒ…å«åŸå§‹å­—ç¬¦ä¸²ä¸­ä» beginIndex åˆ°ä¸²å°¾æˆ– endIndex-1 ä½ç½®çš„æ‰€ä»¥ä»£ç å•å…ƒ */String substring(int beginIndex)String substring(int beginIndex, int endIndex)/* è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°†åŸå§‹å­—ç¬¦ä¸²ä¸­çš„æ‰€ä»¥å¤§å†™å­—æ¯éƒ½æ”¹æˆäº†å°å†™å­—æ¯ */String toLowerCase()/* è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°†åŸå§‹å­—ç¬¦ä¸²ä¸­çš„æ‰€ä»¥å°å†™å­—æ¯éƒ½æ”¹æˆäº†å¤§å†™å­—æ¯ */String toUpperCase()/* è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å°†åˆ é™¤å…ƒå­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼ */String trim()ä¸‰ã€StringBufferåœ¨æˆ‘ä»¬äº†è§£äº†Stringç±»ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°å¥¹æœ‰äº›ç¼ºé™·ï¼Œä¾‹å¦‚å½“æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªStringç±»çš„å¯¹è±¡ä¹‹åï¼Œæˆ‘ä»¬å¾ˆéš¾å¯¹å¥¹è¿›è¡Œå¢ã€åˆ ã€æ”¹çš„æ“ä½œã€‚ä¸ºäº†è§£å†³è¿™ä¸ªå¼Šç«¯ï¼ŒJavaè¯­è¨€å°±å¼•å…¥äº†StringBufferç±»ã€‚StringBufferå’ŒStringç±»ä¼¼ï¼Œåªæ˜¯ç”±äºStringBufferçš„å†…éƒ¨å®ç°æ–¹å¼å’ŒStringä¸åŒï¼ŒStringBufferåœ¨è¿›è¡Œå­—ç¬¦ä¸²å¤„ç†æ—¶ï¼Œä¸ç”¨ç”Ÿæˆæ–°çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨å†…å­˜çš„ä½¿ç”¨ä¸ŠStringBufferè¦ä¼˜äºStringç±»ã€‚åœ¨StringBufferç±»ä¸­å­˜åœ¨å¾ˆå¤šå’ŒStringç±»ä¸€æ ·çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•åœ¨åŠŸèƒ½ä¸Šå’ŒStringç±»ä¸­çš„åŠŸèƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ä½†æ˜¯æœ‰ä¸€ä¸ªéå¸¸æ˜¾è‘—çš„åŒºåˆ«åœ¨äºï¼ŒStringBufferå¯¹è±¡æ¯æ¬¡ä¿®æ”¹éƒ½æ˜¯ä¿®æ”¹å¯¹è±¡æœ¬èº«ï¼Œè¿™ç‚¹æ˜¯å…¶å’ŒStringç±»çš„æœ€å¤§åŒºåˆ«ã€‚æ­¤å¤–ï¼ŒStringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ç”¨äºå¤šçº¿ç¨‹ã€‚ è¿™é‡Œè¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼šä¸€ä¸ªçº¿ç¨‹è®¿é—®èµ„æºçš„æ—¶å€™ä¸ºå…¶åŠ é”ï¼Œåˆ«çš„çº¿ç¨‹åªæœ‰ç­‰åˆ°è¯¥çº¿ç¨‹é‡Šæ”¾èµ„æºåæ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ ·åšä¸ºäº†é˜²æ­¢æ•°æ®çš„éæ­£å¸¸æ”¹å˜å’Œä½¿ç”¨ï¼Œè¿™é‡Œæ‰€è¯´çš„èµ„æºé€šå¸¸æ˜¯ç¨‹åºä¸­çš„å…¨å±€å˜é‡è€Œä¸”StringBufferå¯¹è±¡çš„åˆå§‹åŒ–ä¸Stringå¯¹è±¡çš„åˆå§‹åŒ–ä¸å¤§ä¸€æ ·ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æ„é€ æ–¹æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œå³ï¼š// å£°æ˜ä¸€ä¸ªç©ºçš„ StringBuffer å¯¹è±¡StringBuffer sb = new StringBuffer();// å£°æ˜å¹¶åˆå§‹åŒ– StringBuffer å¯¹è±¡StringBuffer sb = new StringBuffer(\"ç»´Cæœç³–\");// ä¸‹é¢çš„èµ‹å€¼è¯­å¥æ˜¯é”™çš„ï¼Œå› ä¸º StringBuffer å’Œ String æ˜¯ä¸åŒçš„ç±»å‹StringBuffer sb = \"ç»´Cæœç³–\";// ä¸‹é¢çš„èµ‹å€¼è¯­å¥ä¹Ÿæ˜¯é”™çš„ï¼Œå› ä¸º StringBuffer å’Œ String æ²¡æœ‰ç»§æ‰¿å…³ç³»StringBuffer sb = (StringBuffer)\"ç»´Cæœç³–\";// å°† StringBuffer å¯¹è±¡è½¬åŒ–ä¸º String å¯¹è±¡StringBuffer sb = new StringBuffer(\"ç»´Cæœç³–\");String str = sb.toString();ä¸‹é¢æ˜¯StringBufferçš„å¸¸ç”¨APIæ–¹æ³•/* æ„é€ ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²æ„å»ºå™¨ */StringBuffer()/* è¿”å›æ„å»ºå™¨æˆ–ç¼“å†²å™¨ä¸­çš„ä»£ç å•å…ƒï¼ˆå­—ç¬¦ï¼‰æ•°é‡ */int length()/* è¿½åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ª this */StringBuffer append(String str)/* è¿½åŠ ä¸€ä¸ªå­—ç¬¦å¹¶è¿”å›ä¸€ä¸ª this */StringBuffer append(Char c)/* å°†ç¬¬ i ä¸ªä»£ç å•å…ƒè®¾ç½®ä¸º c */void setCharAt(int i, char c)/* å°†æ„å»ºå™¨çš„å†…å®¹è¿›è¡Œé¡ºåºçš„åè½¬ c */StringBuffer reverse()/* è¿”å›ä¸€ä¸ªä¸æ„å»ºå™¨æˆ–ç¼“å†²å™¨å†…å®¹ç›¸åŒçš„å­—ç¬¦ä¸² */String toString()å››ã€StringBuilderåœ¨JDK 5.0ä¹‹åï¼ŒJavaè¯­è¨€åˆå¼•å…¥äº†StringBuilderç±»ï¼Œè¿™ä¸ªç±»çš„å‰èº«æ˜¯StringBufferï¼Œå…¶æ•ˆç‡ç•¥å¾®æœ‰äº›ä½ï¼Œä½†å…è®¸é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œæ·»åŠ æˆ–è€…åˆ é™¤å­—ç¬¦çš„æ“ä½œã€‚å¦‚æœæ‰€æœ‰çš„å­—ç¬¦ä¸²åœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸­ï¼ˆé€šå¸¸éƒ½æ˜¯è¿™æ ·ï¼‰ç¼–è¾‘ï¼Œåˆ™åº”è¯¥ç”¨StringBuilderä»£æ›¿å¥¹ï¼Œè¿™ä¸¤ä¸ªç±»çš„API æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚äº”ã€æ€»ç»“è¿‡ä»¥ä¸Šçš„ä»‹ç»ï¼Œå’±ä»¬å·²ç»è¯¦ç»†çš„äº†è§£äº† Stringã€StringBuffer å’Œ StringBuilderï¼Œä¹ŸçŸ¥é“äº†å¥¹ä»¬ä¸‰ä¸ªéƒ½æ˜¯ç”¨äºæ“ä½œå­—ç¬¦ä¸²çš„ç±»ã€‚æ¥ä¸‹æ¥æ€»ç»“ä¸€äº›ä¸‰è€…çš„åŒºåˆ« å¯¹äºæ“ä½œæ•ˆç‡è€Œè¨€ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒStringBuilder &gt; StringBuffer &gt; Stringï¼› å¯¹äºçº¿ç¨‹å®‰å…¨è€Œè¨€ï¼ŒStringBufferæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ç”¨äºå¤šçº¿ç¨‹ï¼›è€ŒStringBuilderæ˜¯éçº¿ç¨‹å®‰å…¨çš„ï¼Œç”¨äºå•çº¿ç¨‹ï¼› å¯¹äºé¢‘ç¹çš„å­—ç¬¦ä¸²æ“ä½œè€Œè¨€ï¼Œæ— è®ºæ˜¯StringBufferè¿˜æ˜¯StringBuilderï¼Œéƒ½ä¼˜äºStringã€‚" }, { "title": "è§£å†³java.lang.IllegalArgumentException: An invalid character [32] was present in the Cookie valueé”™è¯¯", "url": "/posts/java_resolve-invalid-character-was-present-in-the-cookie-value.html", "categories": "java", "tags": "", "date": "2023-01-29 21:35:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-03-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€é—®é¢˜æè¿°æœ€è¿‘åœ¨å­¦ä¹ Javaä¸­çš„Servletï¼Œä»Šå¤©ä½¿ç”¨Eclipseç¼–å†™ä¸€ä¸ªCookieçš„ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¨¡æ‹Ÿç½‘ç«™å›æ˜¾ç”¨æˆ·ä¸Šæ¬¡è®¿é—®æ—¶é—´ï¼Œä»£ç å¦‚ä¸‹ï¼špackage cn.jkdev;import java.io.IOException;import java.text.SimpleDateFormat;import java.ut...", "content": " æ’°å†™æ—¶é—´ï¼š2018-03-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€é—®é¢˜æè¿°æœ€è¿‘åœ¨å­¦ä¹ Javaä¸­çš„Servletï¼Œä»Šå¤©ä½¿ç”¨Eclipseç¼–å†™ä¸€ä¸ªCookieçš„ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¨¡æ‹Ÿç½‘ç«™å›æ˜¾ç”¨æˆ·ä¸Šæ¬¡è®¿é—®æ—¶é—´ï¼Œä»£ç å¦‚ä¸‹ï¼špackage cn.jkdev;import java.io.IOException;import java.text.SimpleDateFormat;import java.util.Date;import javax.servlet.ServletException;import javax.servlet.annotation.WebServlet;import javax.servlet.http.Cookie;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;@WebServlet(\"/HistServlet\")public class HistServlet extends HttpServlet { public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { response.setContentType(\"text/html;charset=utf-8\"); // è·å–å½“å‰æ—¶é—´ SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd hh:mm:ss\"); String curTime = format.format(new Date()); // å–å¾—cookie Cookie[] cookies = request.getCookies(); String lastTime = null; if (cookies != null) { for (Cookie cookie : cookies) { if (cookie.getName().equals(\"lastTime\")) { // ç¬¬næ¬¡è®¿é—® // æœ‰lastTimeçš„cookie lastTime = cookie.getValue();// ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ // 1.æŠŠä¸Šæ¬¡æ˜¾ç¤ºæ—¶é—´æ˜¾ç¤ºåˆ°æµè§ˆå™¨ response.getWriter().write(\"æ¬¢è¿å›æ¥ï¼Œä½ ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ä¸ºï¼š\" + lastTime + \",å½“å‰æ—¶é—´ä¸ºï¼š\" + curTime); // 2.æ›´æ–°cookie cookie.setValue(curTime.trim()); cookie.setMaxAge(3600); // 3.æŠŠæ›´æ–°åçš„cookieå‘é€åˆ°æµè§ˆå™¨ response.addCookie(cookie); break; } } } /** * ç¬¬ä¸€æ¬¡è®¿é—®ï¼ˆæ²¡æœ‰cookie æˆ– æœ‰cookieï¼Œä½†æ²¡æœ‰åä¸ºlastTimeçš„cookieï¼‰ */ if (cookies == null || lastTime == null) { // 1.æ˜¾ç¤ºå½“å‰æ—¶é—´åˆ°æµè§ˆå™¨ response.getWriter().write(\"ä½ æ˜¯é¦–æ¬¡è®¿é—®æœ¬ç½‘ç«™ï¼Œå½“å‰æ—¶é—´ä¸ºï¼š\" + curTime); // 2.åˆ›å»ºCookieå¯¹è±¡ Cookie cookie = new Cookie(\"lastTime\", curTime); cookie.setMaxAge(3600); // 3.æŠŠcookieå‘é€åˆ°æµè§ˆå™¨ä¿å­˜ response.addCookie(cookie); } }}å½“æˆ‘åœ¨æµè§ˆå™¨æµ‹è¯•ï¼Œå¤šæ¬¡ç‚¹å‡»åï¼Œä¾ç„¶å¦‚å›¾ä¸‹å›¾æ˜¾ç¤ºæ•ˆæœäºŒã€å‘ç°é—®é¢˜é€šè¿‡æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ï¼Œå‘ç°ä»¥ä¸‹é”™è¯¯ï¼šjava.lang.IllegalArgumentException: An invalid character [32] was present in the Cookie valueåŸæ¥å¦‚æ­¤ï¼ŒCookieçš„å€¼æ˜¯éæ³•çš„ï¼Œéæ³•å­—ç¬¦æ˜¯character [32]ï¼Œäºæ˜¯æˆ‘æ‰¾åˆ°å¯¹åº”çš„ASCIIç è¡¨ï¼Œå¦‚ä¸‹å›¾ï¼Œcharacter [32]å¯¹åº”çš„æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œè¿™æ ·æ˜¯ä¸å¯ä»¥çš„ã€‚ä¸‰ã€è§£å†³åŠæ³• 1.åœ¨æ„é€ Dateå­—ç¬¦ä¸²çš„æ—¶å€™ä¸è¦ä½¿ç”¨ç©ºæ ¼ï¼Œä½¿ç”¨å…¶ä»–å­—ç¬¦æ¥æ›¿æ¢ï¼Œè¿™ç§æ–¹æ³•æ¯”è¾ƒç®€å•ã€‚ 2.å¦‚æœéè¦ä½¿ç”¨ç©ºæ ¼æ¥éš”å¼€æ—¥æœŸä¸æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œç¼–ç å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¯»å–çš„æ—¶å€™ä¸è¦å¿˜è®°äº†è§£ç ï¼Œä¸ç„¶åœ¨ç”¨æˆ·ç•Œé¢ä¸Šä¼šå‡ºç°ä¹±ç ã€‚(1)å¯¹Dateå­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼šString curTime = URLEncoder.encode(format.format(new Date()), \"utf-8\");(2)è¯»å–çš„æ—¶å€™è¿›è¡Œè§£ç ï¼šresponse.getWriter().write(\"æ¬¢è¿å›æ¥ï¼Œä½ ä¸Šæ¬¡è®¿é—®çš„æ—¶é—´ä¸ºï¼š\" + URLDecoder.decode(lastTime, \"utf-8\") + \",å½“å‰æ—¶é—´ä¸ºï¼š\" + URLDecoder.decode(curTime, \"utf-8\"));é€šè¿‡ä¸Šé¢çš„è§£å†³åŠæ³•ï¼Œå†åˆ·æ–°æµè§ˆå™¨ä¸¤æ¬¡ï¼Œæ­£å¸¸æ˜¾ç¤ºæƒ³è¦çš„æ•ˆæœçš„ï¼š" }, { "title": "Servletçš„ç”Ÿå‘½å‘¨æœŸ", "url": "/posts/java_servlet-lifetime.html", "categories": "java", "tags": "", "date": "2023-01-29 21:34:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-01-13ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29Servleté‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¦‚ä¸‹ï¼š 1.æ„é€ æ–¹æ³•ï¼šåˆ›å»ºServletå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ã€‚ç¬¬ä¸€æ¬¡è®¿é—®Serveletçš„æ—¶å€™åˆ›å»ºServletå¯¹è±¡ã€‚ 2.initæ–¹æ³•ï¼šåˆ›å»ºå®ŒServletå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ã€‚ 3.serviceæ–¹æ³•ï¼šå®¢æˆ·ç«¯æ¯æ¬¡å‘å‡ºè¯·æ±‚æ—¶è°ƒç”¨ã€‚ 4.destoryæ–¹æ³•...", "content": " æ’°å†™æ—¶é—´ï¼š2018-01-13ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29Servleté‡è¦çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¦‚ä¸‹ï¼š 1.æ„é€ æ–¹æ³•ï¼šåˆ›å»ºServletå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ã€‚ç¬¬ä¸€æ¬¡è®¿é—®Serveletçš„æ—¶å€™åˆ›å»ºServletå¯¹è±¡ã€‚ 2.initæ–¹æ³•ï¼šåˆ›å»ºå®ŒServletå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ã€‚ 3.serviceæ–¹æ³•ï¼šå®¢æˆ·ç«¯æ¯æ¬¡å‘å‡ºè¯·æ±‚æ—¶è°ƒç”¨ã€‚ 4.destoryæ–¹æ³•ï¼šé”€æ¯servletå¯¹è±¡çš„æ—¶å€™è°ƒç”¨ã€‚åœæ­¢æœåŠ¡å™¨è·å–é‡æ–°éƒ¨ç½²webåº”ç”¨æ—¶ä¼šè°ƒç”¨ã€‚ å¦‚ä»¥ä¸‹ä»£ç ï¼špackage servlet;import java.io.IOException;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;public class MyServlet extends HttpServlet { public MyServlet() { System.out.println(\"æ„é€ æ–¹æ³•è¢«è°ƒç”¨\"); } @Override public void init() throws ServletException { System.out.println(\"initæ–¹æ³•è¢«è°ƒç”¨\"); } @Override protected void service(HttpServletRequest arg0, HttpServletResponse arg1) throws ServletException, IOException { System.out.println(\"serviceæ–¹æ³•è¢«è°ƒç”¨\"); } @Override public void destroy() { System.out.println(\"destroyæ–¹æ³•è¢«è°ƒç”¨\"); }}" }, { "title": "golangçš„æ•°æ®ç±»å‹", "url": "/posts/golang_go-data-type.html", "categories": "golang", "tags": "", "date": "2023-01-29 21:30:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-07-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°åœ¨æœ¬èŠ‚ä¹‹åï¼Œæˆ‘ä»¬å°†æ­£å¼å­¦ä¹  golang è¯­è¨€åŸºç¡€ã€‚æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç» â€œgolang æ•°æ®ç±»å‹â€ï¼Œå¦‚æœä½ è¿˜æ²¡é˜…è¯»è¿‡ä¹‹å‰çš„æ–‡ç« å†…å®¹ï¼Œå¯ä»¥æ‰“å¼€ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯» golang å¼€å‘ç¯å¢ƒçš„æ­å»º golang å¼€å‘ä¸­åŒ…çš„ä½¿ç”¨ äºŒã€æ•°æ®ç±»å‹çš„åˆ†ç±»æ•°æ®ç±»å‹çš„å‡ºç°æ˜¯ä¸ºäº†æŠŠæ•°æ®åˆ†æˆæ‰€éœ€å†…å­˜å¤§å°ä¸åŒçš„æ•°æ®ï¼Œç¼–ç¨‹çš„...", "content": " æ’°å†™æ—¶é—´ï¼š2021-07-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°åœ¨æœ¬èŠ‚ä¹‹åï¼Œæˆ‘ä»¬å°†æ­£å¼å­¦ä¹  golang è¯­è¨€åŸºç¡€ã€‚æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç» â€œgolang æ•°æ®ç±»å‹â€ï¼Œå¦‚æœä½ è¿˜æ²¡é˜…è¯»è¿‡ä¹‹å‰çš„æ–‡ç« å†…å®¹ï¼Œå¯ä»¥æ‰“å¼€ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯» golang å¼€å‘ç¯å¢ƒçš„æ­å»º golang å¼€å‘ä¸­åŒ…çš„ä½¿ç”¨ äºŒã€æ•°æ®ç±»å‹çš„åˆ†ç±»æ•°æ®ç±»å‹çš„å‡ºç°æ˜¯ä¸ºäº†æŠŠæ•°æ®åˆ†æˆæ‰€éœ€å†…å­˜å¤§å°ä¸åŒçš„æ•°æ®ï¼Œç¼–ç¨‹çš„æ—¶å€™éœ€è¦ç”¨å¤§æ•°æ®çš„æ—¶å€™æ‰éœ€è¦ç”³è¯·å¤§å†…å­˜ï¼Œå°±å¯ä»¥å……åˆ†åˆ©ç”¨å†…å­˜ã€‚2.1 æ•°æ®ç±»åˆ«golang æ•°æ®ç±»å‹ æŒ‰æ•°æ®ç±»åˆ«æœ‰ä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹ï¼š å¸ƒå°”å‹å¸ƒå°”å‹çš„å€¼åªå¯ä»¥æ˜¯å¸¸é‡ true æˆ–è€… falseã€‚ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼švar b bool = trueã€‚ æ•°å­—ç±»å‹æ•´å‹ int å’Œæµ®ç‚¹å‹ float32ã€float64ï¼ŒGo è¯­è¨€æ”¯æŒæ•´å‹å’Œæµ®ç‚¹å‹æ•°å­—ï¼Œå¹¶ä¸”æ”¯æŒå¤æ•°ï¼Œå…¶ä¸­ä½çš„è¿ç®—é‡‡ç”¨è¡¥ç ã€‚ å­—ç¬¦ä¸²ç±»å‹å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸²å›ºå®šé•¿åº¦çš„å­—ç¬¦è¿æ¥èµ·æ¥çš„å­—ç¬¦åºåˆ—ã€‚Go çš„å­—ç¬¦ä¸²æ˜¯ç”±å•ä¸ªå­—èŠ‚è¿æ¥èµ·æ¥çš„ã€‚Go è¯­è¨€çš„å­—ç¬¦ä¸²çš„å­—èŠ‚ä½¿ç”¨ UTF-8 ç¼–ç æ ‡è¯†Unicode æ–‡æœ¬ã€‚ æ´¾ç”Ÿç±»å‹åŒ…æ‹¬ï¼š(a) æŒ‡é’ˆç±»å‹ï¼ˆPointerï¼‰(b) æ•°ç»„ç±»å‹(c) ç»“æ„åŒ–ç±»å‹(struct)(d) Channel ç±»å‹(e) å‡½æ•°ç±»å‹(f) åˆ‡ç‰‡ç±»å‹(g) æ¥å£ç±»å‹ï¼ˆinterfaceï¼‰(h) Map ç±»å‹ã€‚ 2.2 å­˜å‚¨æ–¹å¼golang æ•°æ®ç±»å‹æŒ‰å­˜å‚¨æ–¹å¼ æœ‰ä¸¤å¤§ç±»æ•°æ®ç±»å‹ï¼š å€¼ç±»å‹ä¹Ÿå«åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ•°å€¼ç±»å‹ã€boolã€stringã€æ•°ç»„ã€struct ç»“æ„ä½“ å¼•ç”¨æ•°æ®ç±»å‹æŒ‡é’ˆã€slice åˆ‡ç‰‡ã€ç®¡é“ chanã€mapã€ä»¥åŠ interface å€¼ç±»å‹ï¼Œå˜é‡ç›´æ¥å­˜å‚¨å€¼ã€‚å€¼ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨æ ˆå†…å­˜ç©ºé—´ä¸­ï¼Œæ ˆåœ¨å‡½æ•°è°ƒç”¨å®Œå†…å­˜ä¼šè¢«é‡Šæ”¾ã€‚å¼•ç”¨ç±»å‹ï¼Œå˜é‡å­˜å‚¨çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œè¿™ä¸ªåœ°å€å­˜å‚¨æœ€ç»ˆçš„å€¼ã€‚å¼•ç”¨æ•°æ®ç±»å‹çš„æ•°æ®å­˜å‚¨åœ¨å †å†…å­˜ç©ºé—´ä¸­ï¼Œé€šè¿‡ GC å›æ”¶ã€‚ä¸‰ã€å¸¸ç”¨æ•°æ®ç±»å‹3.1 bool ç±»å‹golang ä¸­ä»¥boolå…³é”®å­—å£°æ˜å¸ƒå°”ç±»å‹æ•°æ®ï¼Œå¸ƒå°”å‹çš„å€¼åªå¯ä»¥æ˜¯true æˆ–è€… falseã€‚ä»£è¡¨æ¡ä»¶æˆç«‹ï¼ˆçœŸï¼‰æˆ–æ¡ä»¶ä¸æˆç«‹ï¼ˆå‡ï¼‰ï¼Œä»¥ä¸‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼švar b bool = true å¸ƒå°”ç±»å‹å˜é‡çš„é»˜è®¤å€¼ä¸º false golang ä¸­ä¸å…è®¸å°†æ•´å‹å¼ºåˆ¶è½¬æ¢ä¸ºå¸ƒå°”å‹ å¸ƒå°”å‹æ— æ³•å‚ä¸æ•°å€¼è¿ç®—ï¼Œä¹Ÿæ— æ³•ä¸å…¶ä»–ç±»å‹è¿›è¡Œè½¬æ¢ 3.2 æ•°å­—ç±»å‹ æ•´å‹æ•´å‹ä¸»è¦æœ‰ int ã€int16ã€int32ã€int64ã€uintã€uint8ã€uint16ã€uint32ã€uint64ã€‚å¦‚ä¸‹è¡¨æ ¼ ç±»å‹ è¯´æ˜ uint8 æ— ç¬¦å· 8 ä½æ•´å‹ (0 åˆ° 255) uint16 æ— ç¬¦å· 16 ä½æ•´å‹ (0 åˆ° 65535) uint32 æ— ç¬¦å· 32 ä½æ•´å‹ (0 åˆ° 4294967295) uint64 æ— ç¬¦å· 64 ä½æ•´å‹ (0 åˆ° 18446744073709551615) int8 æœ‰ç¬¦å· 8 ä½æ•´å‹ (-128 åˆ° 127) int16 æœ‰ç¬¦å· 16 ä½æ•´å‹ (-32768 åˆ° 32767) int32 æœ‰ç¬¦å· 32 ä½æ•´å‹ (-2147483648 åˆ° 2147483647) int64 æœ‰ç¬¦å· 64 ä½æ•´å‹ (-9223372036854775808 åˆ° 9223372036854775807) Go è¯­è¨€çš„ int/uint ç±»å‹ï¼Œæ˜¯ä¸å¯ç§»æ¤çš„ç±»å‹ï¼Œå…¶é•¿åº¦æ ¹æ®å®¿ä¸»æœºçš„æœºå™¨å­—é•¿å†³å®šã€‚int, uint å’Œ uintptr åœ¨ 32 ä½ç³»ç»Ÿä¸Šé€šå¸¸ä¸º 32 ä½å®½ï¼Œåœ¨ 64 ä½ç³»ç»Ÿä¸Šåˆ™ä¸º 64 ä½å®½ã€‚ æµ®ç‚¹å‹æµ®ç‚¹æ•°ç±»å‹ä¸»è¦æœ‰ float32ã€float64ã€complex64ã€complex128 ç±»å‹ è¯´æ˜ float32 IEEE-754 32 ä½æµ®ç‚¹å‹æ•° float64 IEEE-754 64 ä½æµ®ç‚¹å‹æ•° complex64 32 ä½å®æ•°å’Œè™šæ•° complex128 64 ä½å®æ•°å’Œè™šæ•° å…¶ä»–æ•°å­—ç±»å‹ä»¥ä¸‹åˆ—å‡ºäº†å…¶ä»–æ›´å¤šçš„æ•°å­—ç±»å‹ ç±»å‹ è¯´æ˜ byte ç±»ä¼¼ uint8ï¼Œä»£è¡¨äº† ASCII ç çš„ä¸€ä¸ªå­—ç¬¦ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ ASCII å­—ç¬¦ç±»å‹ rune ç±»ä¼¼ int32ï¼Œè¡¨ç¤ºä¸€ä¸ª Unicode ç ç‚¹ uintptr æ— ç¬¦å·æ•´å‹ï¼Œç”¨äºå­˜æ”¾ä¸€ä¸ªæŒ‡é’ˆ UTF-8 æ˜¯ Unicode çš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚UTF-8 æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨ 1~4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚ ç±»å‹å¼ºè½¬golang ä¸­åªæœ‰å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæ²¡æœ‰éšå¼ç±»å‹è½¬æ¢ã€‚è¯¥è¯­æ³•åªèƒ½åœ¨ä¸¤ä¸ªç±»å‹ä¹‹é—´æ”¯æŒç›¸äº’è½¬æ¢çš„æ—¶å€™ä½¿ç”¨ã€‚å¼ºåˆ¶ç±»å‹è½¬æ¢çš„åŸºæœ¬è¯­æ³•ä¸ºï¼štype(variable)ï¼Œå¯è½¬æ¢çš„æ•°æ®åŒ…æ‹¬å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°è¿”å›å€¼ç­‰ã€‚å¦‚ä¸‹ä»£ç var a int = 8// å°†intç±»å‹æ”¹ä¸ºint32ç±»å‹var b int32 = int32(a)3. å­—ç¬¦ä¸²ç±»å‹å­—ç¬¦ä¸²å®šä¹‰ï¼švar str stringå­—ç¬¦ä¸²æœ‰ä¸¤ç§è¡¨ç¤ºæ–¹å¼ï¼šåŒå¼•å·ï¼ˆâ€â€œï¼‰ï¼›åå¼•å·ï¼Œä¹Ÿå«åŸæ„ç¬¦å·ï¼ˆ``ï¼‰ï¼Œå¦‚ä¸‹ä»£ç package mainimport \"fmt\"func main() { var str1 = \"hello world\" var str2 = ` çª—å‰æ˜æœˆå…‰ ç–‘æ˜¯åœ°ä¸Šéœœ ä¸¾å¤´æœ›æ˜æœˆ ä½å¤´æ€æ•…ä¹¡ ` fmt.Println(\"str1 = \", str1) fmt.Println(\"str2 = \", str2)}è¿è¡Œç»“æœå¦‚ä¸‹pan@pandeMBP src % go run learn/test4str1 = hello worldstr2 = çª—å‰æ˜æœˆå…‰ ç–‘æ˜¯åœ°ä¸Šéœœ ä¸¾å¤´æœ›æ˜æœˆ ä½å¤´æ€æ•…ä¹¡pan@pandeMBP src %å››ã€æ€»ç»“æœ¬èŠ‚ï¼Œæˆ‘ä»¬ä»‹ç»äº† golang æ•°æ®ç±»å‹çš„åˆ†ç±»ï¼Œä»¥åŠä»‹ç»äº†å¸¸ç”¨çš„å‡ ç§æ•°æ®ç±»å‹ã€‚åœ¨åé¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ›´æ·±å…¥åœ°å­¦ä¹ å’Œä½¿ç”¨å„ç§æ•°æ®ç±»å‹ã€‚" }, { "title": "golangè¯­è¨€ä¸­åŒ…çš„ä½¿ç”¨", "url": "/posts/golang_go-package.html", "categories": "golang", "tags": "", "date": "2023-01-29 21:29:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-07-05ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29åœ¨ golang ä¸­ï¼Œæ‰€æœ‰æºæ–‡ä»¶éƒ½å±äºä¸€ä¸ªåŒ…ï¼Œgolang çš„åŒ…å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ åŒ…å¯ä»¥è¢«å…¶ä»–åŒ…å¼•ç”¨ æ¯ä¸ª golang ç¨‹åºåªæœ‰ä¸€ä¸ª main åŒ… åŒ…çš„ä¸»è¦ç”¨é€”æ˜¯æé«˜ä»£ç çš„å¯å¤ç”¨æ€§æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»åŒ…çš„ç›¸å…³æ¦‚å¿µä»¥åŠä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡å‰é¢çš„æ–‡ç« ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯»golang çš„å®‰è£…ä¸€ã€GOPATH ç¯å¢ƒå˜é‡1...", "content": " æ’°å†™æ—¶é—´ï¼š2021-07-05ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29åœ¨ golang ä¸­ï¼Œæ‰€æœ‰æºæ–‡ä»¶éƒ½å±äºä¸€ä¸ªåŒ…ï¼Œgolang çš„åŒ…å…·æœ‰ä»¥ä¸‹ç‰¹æ€§ åŒ…å¯ä»¥è¢«å…¶ä»–åŒ…å¼•ç”¨ æ¯ä¸ª golang ç¨‹åºåªæœ‰ä¸€ä¸ª main åŒ… åŒ…çš„ä¸»è¦ç”¨é€”æ˜¯æé«˜ä»£ç çš„å¯å¤ç”¨æ€§æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä»‹ç»åŒ…çš„ç›¸å…³æ¦‚å¿µä»¥åŠä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰é˜…è¯»è¿‡å‰é¢çš„æ–‡ç« ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹é“¾æ¥è¿›è¡Œé˜…è¯»golang çš„å®‰è£…ä¸€ã€GOPATH ç¯å¢ƒå˜é‡1.1 ä»€ä¹ˆæ˜¯ GOPATHï¼Ÿgolang åŒ…çš„ä½¿ç”¨ä¾èµ–ä¸€ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ï¼šGOPATHï¼Œæ— è®ºæ˜¯è‡ªå·±çš„ä»£ç è¿˜æ˜¯ç¬¬ä¸‰æ–¹ä»£ç ï¼Œéƒ½ä»¥GOPATHä½œä¸ºå·¥ä½œç›®å½•å’Œä¸€å¥—å®Œæ•´çš„å·¥ç¨‹ç›®å½•è§„åˆ™ã€‚GOPATH ç›®å½•çº¦å®šæœ‰ä¸‰ä¸ªå­ç›®å½•ï¼Œä¸»è¦ç”¨äº srcï¼šå­˜æ”¾å„ç§åŒ…æºä»£ç ï¼Œsrc é‡Œçš„ä¸€ä¸ªç›®å½•å°±æ˜¯ä¸€ä¸ªåŒ… pkgï¼šå­˜æ”¾ç¼–è¯‘æºä»£ç åçš„ç±»åº“ binï¼šå­˜æ”¾ç¼–è¯‘æºä»£ç åçš„å¯æ‰§è¡Œç¨‹åºGOPATHå…è®¸å¤šä¸ªç›®å½•ï¼Œè®¾ç½®å¤šä¸ªç›®å½•æ—¶ï¼Œéœ€è¦ä½¿ç”¨ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ¥åŒºåˆ†ã€‚Unix/Linux çš„ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ˜¯è‹±æ–‡è¾“å…¥æ³•ä¸‹çš„å†’å·ï¼ˆ:ï¼‰ï¼Œwindows çš„ç¯å¢ƒå˜é‡åˆ†éš”ç¬¦æ˜¯è‹±æ–‡åˆ†å·ï¼ˆ;ï¼‰ã€‚ä½¿ç”¨GOPATHæ—¶ï¼Œgolang ä¼šåœ¨ä»¥ä¸‹ç›®å½•ä¸­æœç´¢åŒ… GOROOT/srcï¼šè¯¥ç›®å½•ä¿å­˜äº† Go æ ‡å‡†åº“é‡Œä»£ç ã€‚ GOPATH/srcï¼šè¯¥ç›®å½•ä¿å­˜äº†åº”ç”¨è‡ªèº«çš„ä»£ç å’Œç¬¬ä¸‰æ–¹ä¾èµ–çš„ä»£ç ã€‚1.2 è®¾ç½® GOPATH ç¯å¢ƒå˜é‡åœ¨ Unix/Linux ä¸­ï¼Œä½¿ç”¨sudo vim /etc/profileæ‰“å¼€ç³»ç»Ÿ profile æ–‡ä»¶ï¼Œå¹¶è¿½åŠ ä»¥ä¸‹å†…å®¹è®¾ç½®GOPATHç¯å¢ƒå˜é‡ï¼ŒåŒæ—¶è®¾ç½®GO111MODULEä¸ºå…³é—­çŠ¶æ€ï¼ŒGO111MODULEç¯å¢ƒå˜é‡æˆ‘ä»¬åœ¨æ–‡ç« ä¸­åé¢éƒ¨åˆ†è¯´æ˜export GOPATH=/Users/pan/go # æŠŠè‡ªå·±çš„golangé¡¹ç›®ç›®å½•ä½œä¸ºGOPATHçš„å˜é‡export GO111MODULE=off # å…³é—­golang 11.1 ç‰ˆæœ¬ä»¥åçš„æ¨¡å—åŠŸèƒ½ä½¿ç”¨source /etc/profileå‘½ä»¤é‡æ–°åŠ è½½ç¯å¢ƒå˜é‡1.3. åŒ…çš„ä½¿ç”¨ å¼•å…¥ç³»ç»ŸåŒ…æˆ‘ä»¬å¯ä»¥é€šè¿‡packageå…³é”®å­—å®šä¹‰ä¸€ä¸ªåŒ…ï¼Œä½¿ç”¨importå¼•å…¥å…¶ä»–åŒ…ï¼Œå¦‚æœéœ€è¦å¼•å…¥å¤šä¸ªåŒ…ï¼Œå¯ä»¥å°†å„ä¸ªåŒ…å£°æ˜åœ¨æ‹¬å·å†…package mainimport ( // å¼•å…¥ç³»ç»Ÿçš„åŒ… \"fmt\")func main() { // è°ƒç”¨ç³»ç»ŸåŒ…çš„å‡½æ•° fmt.Println(\"Hello World\")}åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡mainå…³é”®å­—å®šä¹‰äº† main åŒ…ï¼Œä¸»å‡½æ•° main å¿…é¡»ä½äº main åŒ…ä¸‹ã€‚ç¨‹åºä¸­å¼•å…¥äº†fmtåŒ…ï¼Œè¯¥åŒ…ç”± golang æœ¬èº«æä¾›ã€‚ å¼•å…¥è‡ªå®šä¹‰åŒ…æˆ‘ä»¬åœ¨ GOPATH/src ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶æ–‡ä»¶ 1ï¼Œåº“æ–‡ä»¶ä½äºjkdev.cn/test/mypkg/lib.goï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç package mypkgimport \"fmt\"func TestFunc() { fmt.Println(\"call testFunc\")}æ–‡ä»¶ 2ï¼Œä¸»æ–‡ä»¶jkdev.cn/test/main.goï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç package main// å¼•å…¥è‡ªå®šä¹‰åŒ…import \"jkdev.cn/test/mypkg\"func main() { // è°ƒç”¨è‡ªå®šä¹‰åŒ…çš„å‡½æ•° mypkg.TestFunc()}è‡ªå®šä¹‰çš„åŒ…ç”±æˆ‘ä»¬è‡ªå·±å®šä¹‰ï¼Œä½†è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªç›®å½•å¯¹åº”ä¸€ä¸ªåŒ…ï¼ŒåŒæ—¶ï¼ŒåŒ…ååº”å½“å’Œç›®å½•åä¸€è‡´ã€‚å¼•å…¥åŒ…æ—¶ï¼Œè·¯å¾„ç›¸å¯¹åº” GOPATH/srcï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„ç¨‹åºçš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†ä¸åŒçš„åŒ…ã€‚ åŒ…çš„ä½œç”¨åŸŸåŒ…å†…åœ¨åŒä¸€ä¸ªåŒ…å†…å®šä¹‰çš„å‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç»“æ„ä½“ï¼Œå¯ä»¥è¢«åŒ…å†…çš„æ‰€æœ‰å…¶ä»–ä»£ç ä»»æ„è®¿é—®ï¼Œå®ƒä»¬å±äºåŒ…å†…å…¬å¼€ã€‚åŒ…å¤–å¦‚æœå‡½æ•°ã€å˜é‡ã€å¸¸é‡ã€ç»“æ„ä½“ä½äºä¸åŒçš„åŒ…ä¸‹ï¼Œå¦‚æœå°†å®ƒä»¬çš„é¦–å­—æ¯ä½¿ç”¨å¤§å†™æ ‡è¯†ï¼Œè¡¨ç¤ºå®ƒä»¬æ˜¯å…¬å¼€è®¿é—®çš„ã€‚å¯¹äºç»“æ„ä½“å­—æ®µã€‚å¦‚æœæƒ³è¦åœ¨åŒ…å¤–è¿›è¡Œè®¿é—®ï¼Œè¿˜è¦è®©ç»“æ„ä½“å­—æ®µå˜é‡åä½¿ç”¨é¦–å­—æ¯å¤§å†™ã€‚äºŒã€ ç¼–è¯‘2.1 æ¦‚è¿°golang ä¸­go build å‘½ä»¤ä¸»è¦ç”¨äºç¼–è¯‘ä»£ç ã€‚åœ¨åŒ…çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè‹¥æœ‰å¿…è¦ï¼Œä¼šåŒæ—¶ç¼–è¯‘ä¸ä¹‹ç›¸å…³è”çš„åŒ…ã€‚å‡è®¾æˆ‘ä»¬çš„è®¾ç½® GOPATH æ˜¯/Users/pan/goï¼Œæˆ‘ä»¬åœ¨ GOPATH ä¹‹ä¸‹çš„ src åˆ›å»ºåˆ›å»ºä»£ç  test ç›®å½•ï¼Œå¹¶æ·»åŠ lib.goå’Œmain.goä¸¤ä¸ªæ–‡ä»¶ï¼šæ­¤æ—¶ï¼Œæºæ–‡ä»¶ç›¸å¯¹äº GOPATH çš„è·¯å¾„å¦‚ä¸‹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹è¿™ä¸¤ä¸ª go æºæ–‡ä»¶è¿›è¡Œç¼–è¯‘go GOPATHç›®å½•â”œâ”€src æºç ç›®å½•â”‚ â”œâ”€test é¡¹ç›®ç›®å½•â”‚ â”œâ”€lib.go å…¬å…±å‡½æ•°æ–‡ä»¶â”‚ â””â”€main.go ä¸»å‡½æ•°æ–‡ä»¶lib.go ä»£ç å¦‚ä¸‹ï¼špackage mainimport \"fmt\"func testFunc() { fmt.Println(\"call testFunc\")}main.go ä»£ç å¦‚ä¸‹ï¼špackage mainfunc main() { testFunc()}ç¤ºä¾‹ä¸­çš„ä¸¤ä¸ªæºæ–‡ä»¶éƒ½å±äºmainåŒ…ï¼Œæ‰€ä»¥åœ¨ main.go æ–‡ä»¶ä¸­èƒ½æ­£å¸¸å¼•å…¥lib.goæ–‡ä»¶ã€‚2.2 go buildæ— å‚æ•°ç¼–è¯‘ä¸ä¾èµ–GOPATHï¼Œéœ€è¦åœ¨æºç ç›®å½•ä¸‹è¿›è¡Œç¼–è¯‘# è¿›å…¥æºç ç›®å½•cd ~/go/src/test# ç¼–è¯‘ä»£ç go buildæˆ‘ä»¬è¿˜å¯ä»¥-oæŒ‡å®šç¼–è¯‘åè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶åï¼Œå¦‚ä¸‹go build -o main2.3 go build æ–‡ä»¶åˆ—è¡¨ä½¿ç”¨â€œgo build+æ–‡ä»¶åˆ—è¡¨â€ç¼–è¯‘æ—¶ï¼Œæ–‡ä»¶åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ–‡ä»¶å¿…é¡»æ˜¯åŒä¸€ä¸ªåŒ…çš„ Go æºç # è¿›å…¥æºç ç›®å½•cd ~/go/src/test# ç¼–è¯‘go build lib.go main.go2.4 go build åŒ…åŒ…çš„è·¯å¾„ç›¸å¯¹äºGOPATHï¼Œâ€œgo build+åŒ…â€ç¼–è¯‘æ—¶ï¼Œæºæ–‡ä»¶éœ€è¦å­˜æ”¾åœ¨GOPATH/srcä¸‹çš„è·¯å¾„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„æœ‰è¯»å†™æƒé™çš„ç›®å½•æ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œå¦‚ä¸‹# test ç›¸å¯¹äºGOPATH/srcgo build test2.5 go installä¸go buildå…·æœ‰ç›¸ä¼¼åŠŸèƒ½çš„æ˜¯go installå‘½ä»¤ï¼Œgo installç”¨æ¥ç”Ÿæˆåº“å’Œå·¥å…·å¹¶å­˜æ”¾äº GOPATH ä¸­ã€‚ä¸€æ˜¯ç¼–è¯‘åŒ…æ–‡ä»¶ï¼ˆæ—  main åŒ…ï¼‰ï¼Œå°†ç¼–è¯‘åçš„åŒ…æ–‡ä»¶æ”¾åˆ° pkg ç›®å½•ä¸‹ï¼ˆGOPATH/pkgï¼‰ã€‚äºŒæ˜¯ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæœ‰ main åŒ…ï¼‰ï¼Œå°†å¯æ‰§è¡Œæ–‡ä»¶æ”¾åˆ° bin ç›®å½•ï¼ˆGOPATH/binï¼‰ã€‚2.6 go build å’Œ go install å¯¹æ¯” ç›¸åŒç‚¹éƒ½èƒ½ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ ä¸åŒç‚¹go build ä¸èƒ½ç”ŸæˆåŒ…æ–‡ä»¶, go install å¯ä»¥ç”ŸæˆåŒ…æ–‡ä»¶ï¼›go build ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œ go install ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶åœ¨ bin ç›®å½•ä¸‹ï¼ˆ$GOPATH/binï¼‰ã€‚ ä¸‰ã€ Go æ¨¡å—golang åœ¨ 1.11 ç‰ˆæœ¬å¼•å…¥å’Œ Go Modulesï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å«åš Go æ¨¡å—ï¼Œæ¨¡å—ä¾èµ–äºä¸Šæ–‡æåˆ°çš„GO111MODULEç¯å¢ƒå˜é‡ã€‚å®ƒæ˜¯ golang å®˜æ–¹æä¾›çš„åŒ…ç®¡ç†å·¥å…·ï¼Œé€šè¿‡ Go Modulesï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¿…å°†é¡¹ç›®æ”¾åœ¨ GOPATH ä¸Šã€‚3.1 GO111MODULE ç¯å¢ƒå˜é‡ç”¨ç¯å¢ƒå˜é‡ GO111MODULE è®¾ç½®å¼€å¯æˆ–è€…å…³é—­æ¨¡å—æ”¯æŒï¼Œå®ƒæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼šoffã€onã€autoï¼Œé»˜è®¤æ˜¯ autoã€‚ GO111MODULE=offï¼šæ— æ¨¡å—æ”¯æŒï¼Œgo ä¼šä» GOPATH å¯»æ‰¾åŒ…ã€‚ GO111MODULE=onï¼šæ¨¡å—æ”¯æŒï¼Œæ ¹æ®go.modæ–‡ä»¶ä¸‹è½½ä¾èµ– GO111MODULE=autoï¼šåœ¨$GOPATH/src å¤–é¢ä¸”é¡¹ç›®æ ¹ç›®å½•æœ‰go.modæ–‡ä»¶æ—¶ï¼Œè‡ªåŠ¨å¼€å¯æ¨¡å—æ”¯æŒåœ¨ä½¿ç”¨æ¨¡å—çš„æ—¶å€™ï¼ŒGOPATH æ˜¯æ— æ„ä¹‰çš„ï¼Œä½† golang è¿˜æ˜¯ä¼šæŠŠä¸‹è½½çš„ä¾èµ–å­˜å‚¨äº GOPATH ä¹‹ä¸‹ã€‚3.2 ä½¿ç”¨ go æ¨¡å—ä½¿ç”¨ Go Modules æ—¶ï¼Œæˆ‘ä»¬å…ˆå°†GO111MODULEè®¾ç½®ä¸º on æˆ–è€… autoï¼ŒGo Modules å’Œ GOPATH ä¸åŒï¼Œä¸éœ€è¦åŒ…å«å›ºå®šçš„ä¸‰ä¸ªå­—ç›®å½•ã€‚ä¸€ä¸ªç©ºçš„æºä»£ç ç›®å½•ï¼Œåªè¦åˆå§‹åŒ–å¥½go.modæ–‡ä»¶ï¼Œå°±å¯ä»¥å®šä¹‰ä¸€ä¸ª Moduleã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ Module# åˆ›å»ºä¸€ä¸ªç©ºçš„å·¥ä½œç›®å½•mkdir -p ~/Work/go/test# è¿›å…¥å·¥ä½œç›®å½•cd ~/Work/go/test# åˆå§‹åŒ–ä¸€ä¸ªmodulego mod init testmoduleæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è‡ªåŠ¨ç”Ÿæˆçš„go.modæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹module testmodulego 1.16 ä¸‹è½½ä¾èµ–Go Modules ä¼šä¸ºæˆ‘ä»¬è¿›è¡ŒåŒ…ç®¡ç†ï¼Œå¹¶è‡ªåŠ¨æ›´æ–° go.mod æ–‡ä»¶ï¼Œå¦‚æœéœ€è¦å¼•å…¥æ–°çš„ä¾èµ–ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç»ˆç«¯æ‰§è¡Œgo get åŒ…åå³å¯å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¦‚go get github.com/satori/go.uuidæ‰§è¡Œå‘½ä»¤åï¼ŒGo Modules ä¼šä»æˆ‘ä»¬åœ¨å®‰è£… golang æ—¶è®¾ç½®çš„GOPROXYé•œåƒä»“åº“åœ°å€å»ä¸‹è½½å¯¹åº”çš„åŒ…ï¼Œå®‰è£…å®Œæˆä¹‹åæˆ‘ä»¬çœ‹åˆ°go.modå·²ç»å‘ç”Ÿå˜åŒ–ï¼Œå¦‚ä¸‹module testmodulego 1.16require github.com/satori/go.uuid v1.2.0 // indirectæˆ‘ä»¬ä¹Ÿå¯ä»¥å…ˆç¼–è¾‘å¥½go.modæ–‡ä»¶ï¼Œç„¶ååœ¨ç»ˆç«¯ä½¿ç”¨go mod downloadï¼Œgolang ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ä¸‹è½½ä¾èµ–åŒ…åˆ°æœ¬åœ°ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å¼•å…¥å¤šä¸ªåŒ…ï¼Œå°†æ‰€æœ‰åŒ…åå¸è½½æ‹¬å·å†…ï¼Œå¦‚ä¸‹ä»£ç module testmodulego 1.16require ( github.com/satori/go.uuid v1.2.0 // indirect gorm.io/gorm v1.21.11 // indirect) æ›´æ–°ä¾èµ–å…³ç³»ä½¿ç”¨go mod tidyæ›´æ–°ä¾èµ–å…³ç³»ï¼Œè¯¥å‘½ä»¤æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—ã€‚Go Modules å¯ä»¥è½»æ˜“åœ°è¿›è¡Œä¸€ä¸ªåŒ…çš„ä¾èµ–ç®¡ç†å’Œç‰ˆæœ¬æ§åˆ¶ï¼Œgo buildå’Œgo installå°†è‡ªåŠ¨ä½¿ç”¨ go.mod ä¸­çš„ä¾èµ–å…³ç³»ï¼Œå‡å°‘äº† GOPATH ç®¡ç†æ—¶çš„å¤æ‚æ€§ã€‚ æœ¬æ–‡ä»‹ç»äº† Go çš„åŒ…çš„åŸºæœ¬ç®¡ç†æ–¹æ³•ï¼Œåé¢ï¼Œæˆ‘ä»¬ä¼šå¾ªåºæ¸è¿›åœ°ä»‹ç» golang çš„åŸºç¡€çŸ¥è¯†ã€‚å¦‚æœå–œæ¬¢ï¼Œæ¬¢è¿è®¢é˜…ï¼" }, { "title": "æ€æ ·æ­å»ºgolangçš„å¼€å‘ç¯å¢ƒ", "url": "/posts/golang_how-to-install-go-development-environment.html", "categories": "golang", "tags": "", "date": "2023-01-29 21:18:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€å®‰è£…goè¯­è¨€goè¯­è¨€æ”¯æŒå¤šå¹³å°çš„æ“ä½œç³»ç»Ÿgoçš„å®˜ç½‘åœ°å€ä¸ºï¼šhttps://golang.orgå›½å†…åœ°å€ä¸ºï¼šhttps://golang.google.cnä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼Œæ¥ä¸‹æ¥è¿›è¡Œå®‰è£…1.1 UNIX/Linux å®‰è£…ä»¥ä¸‹æ˜¯ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…æ–‡ä»¶çš„å®‰è£…æ–¹å¼# è§£å‹å®‰è£…åŒ…tar -zxvf go1.16.5.linux-arm...", "content": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€å®‰è£…goè¯­è¨€goè¯­è¨€æ”¯æŒå¤šå¹³å°çš„æ“ä½œç³»ç»Ÿgoçš„å®˜ç½‘åœ°å€ä¸ºï¼šhttps://golang.orgå›½å†…åœ°å€ä¸ºï¼šhttps://golang.google.cnä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼Œæ¥ä¸‹æ¥è¿›è¡Œå®‰è£…1.1 UNIX/Linux å®‰è£…ä»¥ä¸‹æ˜¯ä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…æ–‡ä»¶çš„å®‰è£…æ–¹å¼# è§£å‹å®‰è£…åŒ…tar -zxvf go1.16.5.linux-arm64.tar.gz# å°†å®‰è£…åŒ…ç§»åˆ°ç³»ç»Ÿç›®å½•sudo mv go /usr/localè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨sudo vim /etc/profileæ‰“å¼€ç³»ç»Ÿprofileæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹# è¿™æ˜¯goçš„å®‰è£…è·¯å¾„ï¼Œåç»­IDEä¼šè¯»å–GO_ROOTçš„å†…å®¹export GOROOT=/usr/local/go# è®¾ç½®goçš„å›½å†…åŒ…åŠ é€Ÿé•œåƒexport GOPROXY=https://goproxy.cn# å°†goçš„äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶åŠ å…¥PATHç¯å¢ƒå˜é‡ä¸­ï¼Œå³å¯åœ¨ç»ˆç«¯è°ƒç”¨export PATH=$GOROOT/bin:$PATHæœ€åï¼Œæ‰§è¡Œsource /etc/profileå‘½ä»¤ç³»ç»Ÿé‡æ–°åŠ è½½profileæ–‡ä»¶æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨go nevå‘½ä»¤æŸ¥çœ‹golangæ‰€æœ‰ä¾èµ–çš„ç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬åœ¨åé¢éœ€è¦ä½¿ç”¨çš„æ—¶å€™ä¼šé€ä¸ªä»‹ç»ã€‚1.2 macå’Œwindows å®‰è£…windowsä½¿ç”¨.msiåç¼€çš„æ–‡ä»¶åŒå‡»è¿›è¡Œå®‰è£…ï¼Œmacå¯ä»¥ä½¿ç”¨1ä¸­çš„äºŒè¿›åˆ¶åŒ…å®‰è£…æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨.pkgåç¼€æ–‡ä»¶åŒå‡»è¿›è¡Œå®‰è£…ã€‚æœ€åï¼Œæ­£ç¡®è®¾ç½®GOROOTã€GOPROXYã€PATH ä¸‰ä¸ªç¯å¢ƒå˜é‡å³å¯ã€‚1.3 å®‰è£…éªŒè¯æœ€åä½¿ç”¨go versionåœ¨å‘½ä»¤è¡Œç»ˆç«¯éªŒè¯ï¼Œå¦‚æœå¦‚ä¸‹goçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™å®‰è£…æˆåŠŸgo version go1.16.4 darwin/amd64äºŒã€é…ç½®å¼€å‘ç¯å¢ƒ2.1 å®‰è£…IDEä¸ºäº†æ–¹ä¾¿å†™goç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…IDEã€‚æˆ‘ä»¬ä»¥VS Codeä¸ºä¾‹ï¼Œé…ç½®goçš„å¼€å‘ç¯å¢ƒã€‚VS codeçš„å®˜ç½‘æ˜¯ï¼šhttps://code.visualstudio.com/ä¸‹è½½æˆ‘ä»¬ç”µè„‘å¯¹åº”çš„æ“ä½œç³»ç»Ÿï¼ŒåŒå‡»æ ¹æ®æç¤ºå®‰è£…å³å¯ã€‚æœ€åï¼Œæˆ‘ä»¬æ‰“å¼€vs code çš„æ’ä»¶å•†åº—å®‰è£…goè¯­è¨€å®˜æ–¹çš„æ‰©å±•åŒ…ï¼Œå¦‚ä¸‹å›¾2.2 ç¼–å†™ç¬¬ä¸€ä¸ªç¨‹åºåœ¨ä»»æ„å·¥ä½œç›®å½•ï¼Œåˆ›å»ºtest.goæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹package mainimport \"fmt\"func main(){ fmt.Println(\"Hello World\")}åœ¨å‘½ä»¤è¡Œç»ˆç«¯ä½¿ç”¨goå‘½ä»¤æ‰§è¡Œè¾“å…¥ç»“æœå¦‚ä¸‹pan@pandeMBP learn % go run test.goHello Worldpan@pandeMBP learn %" }, { "title": "æ€æ ·åœ¨Linuxä¸Šå¼€å‘vueé¡¹ç›®", "url": "/posts/frontend_develop-vue-project-on-linux.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 21:00:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€å¼€å‘ç¯å¢ƒæ­å»ºï¼šå®‰è£…node.jsç¯å¢ƒä»¥åŠvue cliå·¥å…·1.1 å®‰è£…node.jsä»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶å‹ç¼©åŒ…ï¼Œå¦‚ä¸‹å›¾ï¼šè§£å‹åˆ°ç¨‹åºå®‰è£…ç›®å½•xz -d node-v12.17.0-linux-x64.tar.xztar -xvf node-v12.17.0-linux-x64.tarsudo mv node-v12.17....", "content": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€å¼€å‘ç¯å¢ƒæ­å»ºï¼šå®‰è£…node.jsç¯å¢ƒä»¥åŠvue cliå·¥å…·1.1 å®‰è£…node.jsä»å®˜ç½‘ä¸‹è½½å¯¹åº”çš„äºŒè¿›åˆ¶å‹ç¼©åŒ…ï¼Œå¦‚ä¸‹å›¾ï¼šè§£å‹åˆ°ç¨‹åºå®‰è£…ç›®å½•xz -d node-v12.17.0-linux-x64.tar.xztar -xvf node-v12.17.0-linux-x64.tarsudo mv node-v12.17.0-linux-x64 /usr/local/nodejsç¼–è¾‘é…ç½®æ–‡ä»¶vim /etc/profileå°†node.jsçš„nodeå¯æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ä¸npmé“¾æ¥æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œåœ¨æ–‡ä»¶/etc/profileæ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹export PATH=/usr/local/nodejs/bin:$PATHä¿å­˜æ–‡ä»¶å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤source /etc/profilenode -v # æŸ¥çœ‹æœ¬åœ°nodeç‰ˆæœ¬npm -v # æŸ¥çœ‹æœ¬åœ°npmç‰ˆæœ¬è‹¥æ˜¾ç¤ºä»¥ä¸‹ç±»ä¼¼ï¼Œåˆ™ä»£è¡¨å®‰è£…æˆåŠŸæ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®nodejsåœ¨å›½å†…çš„æ·˜å®åŠ é€Ÿé•œåƒæºnpm config set registry https://registry.npm.taobao.org1.2 å®‰è£…nvmï¼ˆnodeç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼‰nvmæ˜¯nodeç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œä½¿ç”¨nvmæˆ‘ä»¬å¯ä»¥éšæ—¶åœ¨åˆ‡æ¢æˆ‘ä»¬æœ¬åœ°çš„nodeç‰ˆæœ¬ã€‚nvmé¡¹ç›®åœ°å€ä¸ºhttps://github.com/nvm-sh/nvmæ ¹æ®æ–‡æ¡£æç¤ºï¼Œæˆ‘ä»¬åªéœ€æ‰§è¡Œä¸€ä¸‹å‘½ä»¤å³å¯å®Œæˆå®‰è£…ï¼šcurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bashnpmç›¸å…³æŒ‡ä»¤ä»¥åŠç¤ºä¾‹ï¼šnvm -help #æŸ¥çœ‹nvmå¸®åŠ©æ–‡æ¡£nvm --version #æŸ¥çœ‹nvmç‰ˆæœ¬å·nvm ls-remote #åˆ—å‡ºæ‰€æœ‰å¯ä»¥å®‰è£…çš„nodeç‰ˆæœ¬nvm install v10.14.2 #æŒ‡å®šå®‰è£…10.14.2ç‰ˆæœ¬çš„node.jsnvm install node #å®‰è£…æœ€æ–°çš„nodeç‰ˆæœ¬ï¼ˆnodeä¸ºæœ€æ–°ç‰ˆæœ¬å·çš„åˆ«åï¼‰nvm install --lts node #å®‰è£…æœ€æ–°çš„nodeé•¿æœŸç»´æŠ¤ç‰ˆæœ¬nvm ls #åˆ—å‡ºæœ¬åœ°å®‰è£…çš„nodeç‰ˆæœ¬nvm use v12.16.2 #å°†æœ¬åœ°nodeåˆ‡æ¢ä¸º12.16.2ç‰ˆæœ¬1.3 å®‰è£…yarnï¼ˆnodeåŒ…ç®¡ç†å·¥å…·ï¼‰yarnçš„ä¸­æ–‡å®˜ç½‘https://yarn.bootcss.com/æ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä»¥Debian/Ubuntuä¸ºä¾‹ï¼Œå®‰è£…æ­¥éª¤å¦‚ä¸‹ï¼šé¦–å…ˆé…ç½®è½¯ä»¶ä»“åº“ï¼šcurl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -echo \"deb https://dl.yarnpkg.com/debian/ stable main\" | sudo tee /etc/apt/sources.list.d/yarn.listå®‰è£…yarnåŒ…sudo apt update &amp;&amp; sudo apt install yarnå®‰è£…å®Œæˆä¹‹åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼šyarn -vå¦‚æœå‡ºç°ç›¸åº”çš„ç‰ˆæœ¬å·ï¼Œåˆ™ä»£è¡¨å®‰è£…æˆåŠŸã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œç”¨aptå®‰è£…ä¸ä¸€å®šæˆåŠŸï¼Œå› ä¸ºä½ çš„æ“ä½œç³»ç»Ÿå‚å•†çš„è½¯ä»¶åº“é‡Œä¸ä¸€å®šåŒ…å«ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨npmå®‰è£…ï¼Œå› ä¸ºåœ¨ä¸Šé¢æ­¥éª¤æˆ‘ä»¬å®‰è£…nodejså·²ç»åŒ…å«äº†npmï¼Œå¦‚ä¸‹ä»£ç ï¼šnpm install -g yarn1.4 å®‰è£…vue clivue cliå®˜ç½‘é“¾æ¥ï¼šhttps://cli.vuejs.org/ä½¿ç”¨npmå…¨å±€å®‰è£…npm install -g @vue/cliæˆ–è€…ä½¿ç”¨yarn å…¨å±€å®‰è£…yarn global add @vue/cliäºŒã€ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»ºvueé¡¹ç›®åœ¨åˆ›å»ºé¡¹ç›®ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹ç›¸å…³çš„æŒ‡ä»¤å¸®åŠ©æ–‡æ¡£vue -hè¿›å…¥å·¥ä½œç›®å½•ï¼Œåˆ›å»ºåä¸ºtestçš„vueé¡¹ç›®vue create testå°†å…‰æ ‡é€‰æ‹©åˆ°æ‰‹åŠ¨é€‰æ‹©ç‰¹æ€§ï¼ˆManually select featuresï¼‰ï¼Œå¦‚ä¸‹å›¾ï¼šæ‰‹åŠ¨ç§»åŠ¨å…‰æ ‡ï¼Œé€‰æ‹©å“åº”çš„ç‰¹æ€§ï¼Œä½¿ç”¨ç©ºæ ¼é”®å‹¾é€‰æˆ–è€…å–æ¶ˆå‹¾é€‰ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šé€‰æ‹©routerçš„historyæ¨¡å¼ï¼Œå¦‚ä¸‹å›¾ï¼šé€‰æ‹©node-sassæ¨¡å¼ï¼Œå¦‚ä¸‹å›¾ï¼šé€‰æ‹©eslintçš„é…ç½®ï¼Œå¦‚ä¸‹å›¾ï¼šé€‰æ‹©eslintä¿å­˜æ—¶æ£€æŸ¥ä»£ç ï¼Œå¦‚ä¸‹å›¾ï¼šé€‰æ‹©å°†é…ç½®æ–‡ä»¶ä¿å­˜åœ¨å•ç‹¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚ä¸‹å›¾ï¼šé€‰æ‹©æ—¶å€™å°†è®¾ç½®ä½œä¸ºé¢„è®¾ï¼Œå¦‚æœè¾“å…¥yï¼Œåˆ™æ˜¯ï¼ŒNåˆ™å¦ï¼Œå¦‚ä¸‹å›¾ï¼šå¦‚æœé€‰æ‹©æ˜¯ï¼ŒæŒ‰å›è½¦åè¿˜éœ€è¾“å…¥é¢„è®¾åï¼Œå†æŒ‰å›è½¦ç­‰å¾…å®‰è£…å³å¯ã€‚å¦‚æœå‡ºç°å¦‚ä¸‹å¦‚æ‰€ç¤ºåˆ™ä»£è¡¨åˆ›å»ºçˆ±ä½ æˆåŠŸï¼Œå¦åˆ™ä½ éœ€è¦æ£€æŸ¥ä¸€ä¸‹ç½‘ç»œå’Œä½ çš„ç¯å¢ƒï¼Œé‡æ–°åˆ›å»ºã€‚" }, { "title": "jqueryæ€æ ·è·å–æ‰€æœ‰é€‰ä¸­çš„checkboxçš„å€¼", "url": "/posts/frontend_jquery-get-checkbox-value.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:45:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022-01-18ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ç•Œé¢ç»“æ„å¦‚ä¸‹&lt;input name=\"selector[]\" id=\"ad_Checkbox1\" class=\"ads_Checkbox\" type=\"checkbox\" value=\"1\" /&gt;&lt;input name=\"selector[]\" id=\"ad_Checkbox2\" class=\"ads_Che...", "content": " æ’°å†™æ—¶é—´ï¼š2022-01-18ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ç•Œé¢ç»“æ„å¦‚ä¸‹&lt;input name=\"selector[]\" id=\"ad_Checkbox1\" class=\"ads_Checkbox\" type=\"checkbox\" value=\"1\" /&gt;&lt;input name=\"selector[]\" id=\"ad_Checkbox2\" class=\"ads_Checkbox\" type=\"checkbox\" value=\"2\" /&gt;&lt;input name=\"selector[]\" id=\"ad_Checkbox3\" class=\"ads_Checkbox\" type=\"checkbox\" value=\"3\" /&gt;&lt;input name=\"selector[]\" id=\"ad_Checkbox4\" class=\"ads_Checkbox\" type=\"checkbox\" value=\"4\" /&gt;&lt;input type=\"button\" id=\"save_value\" name=\"save_value\" value=\"Save\" /&gt;æ·»åŠ ç‚¹å‡»äº‹ä»¶$(function(){ $('#save_value').click(function(){ });});åœ¨äº‹ä»¶çš„å›è°ƒæ–¹æ³•ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç $('input[type=checkbox]:checked').map(function(_, el) { return $(el).val();}).get();" }, { "title": "CSSçš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•ä¸å­¦ä¹ å·¥å…·æ¨è", "url": "/posts/frontend_css-basic-knowledge.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:40:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚å¿µCSSæ˜¯å±‚å æ ·å¼è¡¨ï¼ˆCascading Style Sheetsï¼‰ï¼Œç”¨æ¥æè¿°æ–‡æ¡£å‘ˆç°çš„æ ·å¼è¯­è¨€ã€‚è¿™é‡Œæ‰€è¯´çš„æ–‡æ¡£é€šå¸¸æ˜¯HTMLæ–‡æ¡£ã€‚åœ¨å­¦ä¹ CSSä¹‹å‰ï¼Œåº”å½“å…·å¤‡åŸºç¡€çš„HTMLçŸ¥è¯†ã€‚äºŒã€å¼•å…¥CSSæ ·å¼2.1 å¼•å…¥å¤–éƒ¨cssæ ·å¼æ–‡ä»¶é€šå¸¸åœ¨æ–‡æ¡£å¤´éƒ¨ä½¿ç”¨ link æ ‡ç­¾å¼•å…¥å¤–éƒ¨å®šä¹‰æ–‡ä»¶ï¼Œå¦‚ä¸‹&lt;!DOCTYPE html&gt...", "content": " æ’°å†™æ—¶é—´ï¼š2020-12-07ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚å¿µCSSæ˜¯å±‚å æ ·å¼è¡¨ï¼ˆCascading Style Sheetsï¼‰ï¼Œç”¨æ¥æè¿°æ–‡æ¡£å‘ˆç°çš„æ ·å¼è¯­è¨€ã€‚è¿™é‡Œæ‰€è¯´çš„æ–‡æ¡£é€šå¸¸æ˜¯HTMLæ–‡æ¡£ã€‚åœ¨å­¦ä¹ CSSä¹‹å‰ï¼Œåº”å½“å…·å¤‡åŸºç¡€çš„HTMLçŸ¥è¯†ã€‚äºŒã€å¼•å…¥CSSæ ·å¼2.1 å¼•å…¥å¤–éƒ¨cssæ ·å¼æ–‡ä»¶é€šå¸¸åœ¨æ–‡æ¡£å¤´éƒ¨ä½¿ç”¨ link æ ‡ç­¾å¼•å…¥å¤–éƒ¨å®šä¹‰æ–‡ä»¶ï¼Œå¦‚ä¸‹&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"jkdev.css\"&gt;&lt;/head&gt;&lt;body&gt; &lt;/body&gt;&lt;/html&gt;å®Œæ•´çš„å®šä¹‰åº”è¯¥å†™ä¸Šæ–‡æ¡£ç±»å‹&lt;link rel=\"stylesheet\" href=\"jkdev.css\" type=\"text/css\"&gt;ä½†é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸å†™ä¹Ÿæ²¡äº‹ï¼Œæµè§ˆå™¨ä¼šç»™æˆ‘ä»¬åšå…¼å®¹ï¼Œä¹Ÿèƒ½æ­£å¸¸è§£æã€‚2.2 å†…éƒ¨å®šä¹‰CSSæ ·å¼æˆ‘ä»¬è¿˜å¯ä»¥æŠŠCSSå®šä¹‰çš„ä»£ç å’ŒHTMLæ··åˆåœ¨ä¸€é¡µï¼Œç¼–å†™ï¼Œé€šå¸¸åœ¨æ–‡æ¡£å¤´éƒ¨åŠ ä¸Šstyleæ ‡ç­¾ï¼Œå¹¶åœ¨styleæ ‡ç­¾å†…å®šä¹‰æ ·å¼è®©h1æ ‡ç­¾å†…æ–‡å­—å˜æˆçº¢è‰²ï¼Œå¯ä»¥è¿™æ ·å†™&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt; &lt;title&gt;Document&lt;/title&gt; &lt;link rel=\"stylesheet\" href=\"jkdev.css\" type=\"text/css\"&gt; &lt;style&gt; h1{ color: red; } &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;jkdev.cn&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;2.3 è¡Œå†…å®šä¹‰CSSæ ·å¼æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å¯¹åº”æ ‡ç­¾å†…å†™ä½¿ç”¨styleå±æ€§å®šä¹‰ CSSæ ·å¼ï¼Œå¦‚ä¸‹ä»£ç è®©h1æ ‡ç­¾ç°å®é»„è‰²ï¼Œå¹¶ä¸”å°†æ–‡å­—å¤§å°æ”¹ä¸º 12px&lt;h1 style=\"color: yellow; font-size: 12px\"&gt;jkdev.cn&lt;/h1&gt;2.4 åœ¨CSSä¸­å¼•å…¥å…¶ä»–CSSæ–‡ä»¶å®šä¹‰çš„æ ·å¼æˆ‘ä»¬è¿˜å¯ä»¥@importæ ‡è¯†åœ¨ä¸€ä¸ªCSSæ ·å¼æ–‡ä»¶ä¸­å¼•å…¥å¦ä¸€ä¸ªCSSæ ·å¼æ–‡ä»¶ï¼Œåœ¨jkdev.cssä¸­å¼•å…¥common.css@import url(\"common.css\");h1 { color: red;}åœ¨æ–‡æ¡£å¤´éƒ¨styleæ ‡ç­¾ä¸­å¼•å…¥common.cssæ–‡ä»¶&lt;style&gt; @import url(\"common.css\"); h1{ color: red; }&lt;/style&gt;2.5 æ€»ç»“åœ¨CSSå®šä¹‰ä»£ç ä¸­ï¼Œå¯ä»¥æ·»åŠ ç©ºç™½è¡Œï¼Œä¸å½±å“è§£æï¼Œä½†æ˜¯å®é™…ä¸­ï¼Œåº”å½“å‡å°‘ç©ºç™½è¡Œçš„å­˜åœ¨ï¼Œä»¥è¾¾åˆ°å‹ç¼©æ–‡ä»¶çš„æ•ˆæœã€‚CSSå®šä¹‰çš„æ¯ä¸€æ¡æ ·å¼å®šä¹‰çš„æ¡ç›®ç§°ä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä»¥è‹±æ–‡åˆ†å·ä¸ºç»“æŸæ ‡è¯†ï¼ˆâ€œ;â€ï¼‰ï¼ŒCSSå¯ä»¥ä½¿ç”¨ /* */ è¿›è¡Œæ³¨é‡Šï¼Œå‡ºç°é”™è¯¯æ ·å¼å®šä¹‰æµè§ˆå™¨ä¹Ÿä¸ä¼šè¿›è¡Œè§£æã€‚åœ¨jkdev.cssæ–‡ä»¶ä¸­å®šä¹‰å¦‚ä¸‹ä»£ç h1{ /* è®¾ç½®æ–‡å­—ä¸ºçº¢è‰² */ color: red; /* ä»¥ä¸‹ä¸€è¡Œä¸ºé”™è¯¯è¯­æ³•ï¼Œå°†ä¸ä¼šè¢«è§£æ */ fontsize: 16px;}æµè§ˆå™¨åœ¨è§£æHTMLæ–‡æ¡£æ—¶ï¼Œä¼šä»ä¸Šå¾€ä¸‹è§£æï¼Œæ‰€ä»¥CSSå®šä¹‰åº”å½“åœ¨æ–‡æ¡£çš„å¤´éƒ¨ï¼Œé¿å…åœ¨åŠ è½½ç½‘é¡µçš„è¿‡ç¨‹ä¸­ï¼Œç”±äºç½‘ç»œçš„å»¶è¿ŸåŸå› ï¼Œæ²¡æœ‰åŠæ—¶åŠ è½½CSSå®šä¹‰æ–‡ä»¶å¯¼è‡´çš„ç•Œé¢æ ·å¼é”™ä¹±ã€‚ä¸‰ã€å®‰è£…VsCodeçš„CSSå­¦ä¹ æ’ä»¶3.1 Easy Lessï¼šæ·»åŠ LESSçš„æ”¯æŒLESSæ˜¯ä¸€ç§CSSè¯­æ³•æ ¼å¼ï¼ŒLESSæ”¯æŒåµŒå¥—å®šä¹‰CSSæ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨LESSæ’ä»¶ï¼Œä½¿ç”¨LESSè¯­æ³•ç¼–å†™ï¼ŒåŒæ—¶è‡ªåŠ¨ç”ŸæˆCSSåŸç”Ÿæ–‡ä»¶ã€‚ç¼–å†™jkdev.less è‡ªåŠ¨ç”Ÿæˆ jkdev.cssjkdev.lessæ–‡ä»¶å†…å®¹div { font-size: 12px; h1 { color: red; }}è‡ªåŠ¨ç”Ÿæˆçš„jkdev.cssæ–‡ä»¶div { font-size: 12px;}div h1 { color: red;}3.2 Live Serverï¼šæµè§ˆå™¨åŒæ­¥åˆ·æ–°ç¼–è¾‘å™¨åœ¨æ²¡æœ‰å®‰è£…æ’ä»¶çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç¼–è¾‘å¥½çš„HTMLæ‰‹åŠ¨åˆ·æ–°æµè§ˆå™¨æ‰èƒ½é¢„è§ˆæ•ˆæœã€‚æ‰“å¼€Live Serverçš„æ¨¡å¼ä¸‹ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨åŒæ­¥ç•Œé¢çš„å˜åŒ–ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªçª—å£ç¼–è¾‘ä»£ç ï¼Œå¦ä¸€ä¸ªçª—å£æ‰“å¼€æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœï¼Œé¿å…é«˜é¢‘ç‡åœ°åˆ·æ–°ç½‘é¡µã€‚" }, { "title": "jsæ€æ ·åˆ¤æ–­å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Ÿ", "url": "/posts/frontend_javascript-check-image-if-valid.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:38:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-08-03ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29è¦åˆ¤æ–­å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªImageå¯¹è±¡ï¼Œç„¶åæŠŠé“¾æ¥è®¾ç½®åœ¨Imageå¯¹è±¡ä¸Šï¼Œå¦‚æœèƒ½æ­£å¸¸åŠ è½½ï¼Œåˆ™ä»£è¡¨é“¾æ¥æœ‰æ•ˆã€‚å› ä¸ºå›¾ç‰‡æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦Promiseæ¥å¤„ç†ã€‚åˆ›å»ºä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç ï¼šfunction checkImgExists(imgurl) { return new Promise(funct...", "content": " æ’°å†™æ—¶é—´ï¼š2020-08-03ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29è¦åˆ¤æ–­å›¾ç‰‡é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªImageå¯¹è±¡ï¼Œç„¶åæŠŠé“¾æ¥è®¾ç½®åœ¨Imageå¯¹è±¡ä¸Šï¼Œå¦‚æœèƒ½æ­£å¸¸åŠ è½½ï¼Œåˆ™ä»£è¡¨é“¾æ¥æœ‰æ•ˆã€‚å› ä¸ºå›¾ç‰‡æ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦Promiseæ¥å¤„ç†ã€‚åˆ›å»ºä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå¦‚ä¸‹ä»£ç ï¼šfunction checkImgExists(imgurl) { return new Promise(function(resolve, reject) { var ImgObj = new Image() ImgObj.src = imgurl ImgObj.onload = function(res) { resolve(res) } ImgObj.onerror = function(err) { reject(err) } })}æ ¹æ®ä»¥ä¸Šä»£ç ï¼Œå½“å›¾ç‰‡åŠ è½½æˆåŠŸæ—¶ï¼Œresolveï¼ˆå®Œæˆï¼‰è¢«è§¦å‘ï¼Œå½“å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ï¼Œrejectï¼ˆå¤±è´¥ï¼‰è¢«è§¦å‘ã€‚äºæ˜¯å¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä»£ç è¿›è¡Œè°ƒç”¨æµ‹è¯•checkImgExists('https://test.com/dssd=0.jpg').then(()=&gt;{ //success callback console.log('æœ‰æ•ˆé“¾æ¥')}).catch(()=&gt;{ //fail callback console.log('æ— æ•ˆé“¾æ¥')})å…¨éƒ¨ä»£ç å¦‚ä¸‹ï¼šfunction checkImgExists(imgurl) { return new Promise(function(resolve, reject) { var ImgObj = new Image(); ImgObj.src = imgurl; ImgObj.onload = function(res) { resolve(res); } ImgObj.onerror = function(err) { reject(err) } })}checkImgExists('https://test.com/20200803115749u=2876792700,1627849181&amp;fm=26&amp;gp=0.jpg').then(()=&gt;{ //success callback console.log('æœ‰æ•ˆé“¾æ¥')}).catch(()=&gt;{ //fail callback console.log('æ— æ•ˆé“¾æ¥')})" }, { "title": "æ€æ ·è§£å†³LayUIæç¤ºUncaught TypeError: Cannot create property 'LAY_TABLE_INDEX' on string '20'é”™è¯¯", "url": "/posts/frontend_resolve-layui-cantnot-create-property-LAY_TABLE_INDEX-error.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:35:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-02-28ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°æˆ‘åœ¨é¡¹ç›®åå°ä½¿ç”¨LayUIä½œä¸ºåå°ç®¡ç†ç•Œé¢ï¼Œå±•ç¤ºåˆ—è¡¨çš„æ—¶å€™å‰ç«¯å‡ºç°äº†å¦‚é¢˜æ‰€ç¤ºé”™è¯¯ï¼Œæˆªå›¾å¦‚ä¸‹å®é™…ä¸Šï¼Œåœ¨åç«¯ä»£ç æˆ‘ä½¿ç”¨ThinkPHP 5.0æ¡†æ¶ï¼Œå³ä½¿ä½ ä½¿ç”¨è¯­è¨€æˆ–è€…å…¶ä»–æ¡†æ¶æ—¶ï¼Œä¹Ÿä¸å¦¨ç¢ä½ å¯¹ä»¥ä¸‹å†…å®¹çš„ç†è§£ã€‚äºŒã€è§£å†³è¿‡ç¨‹ThinkPHP 5.0æœ‰ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢çš„å‡½æ•°ã€‚æˆ‘ç›´æ¥å°†æŸ¥è¯¢åˆ°çš„ç»“æœé›†è¿”å›ã€‚å› æ­¤æŠ¥é”™ã€‚å…¶å®ï¼Œåœ¨æ¦‚è¿°çš„ä»£ç æŠ¥é”™...", "content": " æ’°å†™æ—¶é—´ï¼š2020-02-28ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°æˆ‘åœ¨é¡¹ç›®åå°ä½¿ç”¨LayUIä½œä¸ºåå°ç®¡ç†ç•Œé¢ï¼Œå±•ç¤ºåˆ—è¡¨çš„æ—¶å€™å‰ç«¯å‡ºç°äº†å¦‚é¢˜æ‰€ç¤ºé”™è¯¯ï¼Œæˆªå›¾å¦‚ä¸‹å®é™…ä¸Šï¼Œåœ¨åç«¯ä»£ç æˆ‘ä½¿ç”¨ThinkPHP 5.0æ¡†æ¶ï¼Œå³ä½¿ä½ ä½¿ç”¨è¯­è¨€æˆ–è€…å…¶ä»–æ¡†æ¶æ—¶ï¼Œä¹Ÿä¸å¦¨ç¢ä½ å¯¹ä»¥ä¸‹å†…å®¹çš„ç†è§£ã€‚äºŒã€è§£å†³è¿‡ç¨‹ThinkPHP 5.0æœ‰ä¸€ä¸ªåˆ†é¡µæŸ¥è¯¢çš„å‡½æ•°ã€‚æˆ‘ç›´æ¥å°†æŸ¥è¯¢åˆ°çš„ç»“æœé›†è¿”å›ã€‚å› æ­¤æŠ¥é”™ã€‚å…¶å®ï¼Œåœ¨æ¦‚è¿°çš„ä»£ç æŠ¥é”™çš„åŸå› æ˜¯ï¼šlayUIè¦æ±‚dataå­—æ®µè¿”å›æ•°ç»„æ ¼å¼çš„æ•°æ®ã€‚å¦åˆ™layUIè§£æå‡ºç°é”™è¯¯ï¼Œæˆ‘ä»¬æ›´æ”¹åç«¯ä»£ç ä¹‹åã€‚è¿”å›æ•°æ®å¦‚ä¸‹è¿™æ—¶å€™layUIè§£ææ²¡æœ‰é”™è¯¯ï¼ŒlayUIåˆ—è¡¨æ­£å¸¸æ˜¾ç¤ºäº†ã€‚" }, { "title": "æ€æ ·ä½¿ç”¨ä¸ƒç‰›äº‘JSSDKä¸Šä¼ ç§å¯†æ–‡ä»¶", "url": "/posts/frontend_upload-private-file-using-qiniu-sqk.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:30:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-04-24ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™ç”¨åˆ°ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨æ¥ä¿å­˜é¡¹ç›®çš„é™æ€æ–‡ä»¶ï¼Œå¦‚è§†é¢‘ã€å›¾ç‰‡ã€å¤§æ–‡ä»¶ï¼Œç­‰ç­‰ã€‚å¦‚æœè¯´é¡¹ç›®æ–‡ä»¶æ¶‰åŠåˆ°ç”¨æˆ·éšç§ï¼Œé‚£ä¹ˆæ–‡ä»¶å°±ä¸åº”è¯¥è¢«å…¬å¼€è¯»å–ï¼Œè€Œæ˜¯ä½¿ç”¨ç§æœ‰çš„æ–¹å¼å»å­˜å–ã€‚å‚è€ƒé“¾æ¥:https://developer.qiniu.com/å‡è®¾é¡¹ç›®æœ‰è¿™æ ·éœ€æ±‚ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ ç§å¯†å›¾ç‰‡åˆ°ä¸ƒç‰›äº‘ï¼Œä¸Šä¼ æˆåŠŸåï¼Œæˆ‘ä»¬æŠŠæ–‡ä»¶çš„keyé”®...", "content": " æ’°å†™æ—¶é—´ï¼š2019-04-24ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€æ¦‚è¿°åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™ç”¨åˆ°ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨æ¥ä¿å­˜é¡¹ç›®çš„é™æ€æ–‡ä»¶ï¼Œå¦‚è§†é¢‘ã€å›¾ç‰‡ã€å¤§æ–‡ä»¶ï¼Œç­‰ç­‰ã€‚å¦‚æœè¯´é¡¹ç›®æ–‡ä»¶æ¶‰åŠåˆ°ç”¨æˆ·éšç§ï¼Œé‚£ä¹ˆæ–‡ä»¶å°±ä¸åº”è¯¥è¢«å…¬å¼€è¯»å–ï¼Œè€Œæ˜¯ä½¿ç”¨ç§æœ‰çš„æ–¹å¼å»å­˜å–ã€‚å‚è€ƒé“¾æ¥:https://developer.qiniu.com/å‡è®¾é¡¹ç›®æœ‰è¿™æ ·éœ€æ±‚ï¼Œå®¢æˆ·ç«¯ä¸Šä¼ ç§å¯†å›¾ç‰‡åˆ°ä¸ƒç‰›äº‘ï¼Œä¸Šä¼ æˆåŠŸåï¼Œæˆ‘ä»¬æŠŠæ–‡ä»¶çš„keyé”®è®°å½•åœ¨æ•°æ®åº“ä¸­ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯éœ€è¦è¯»å–å›¾ç‰‡æ—¶ï¼Œä¸šåŠ¡æœåŠ¡å™¨é€šè¿‡æ–‡ä»¶çš„keyé”®è·å–ä¸´æ—¶é“¾æ¥ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯ã€‚æš‚ä¸”ä¸è€ƒè™‘æœåŠ¡å™¨é€»è¾‘ï¼Œä¸‹é¢æ˜¯å®¢æˆ·ç«¯ä¸Šä½¿ç”¨ JSSDK ä¸Šä¼ ç§å¯†æ–‡ä»¶çš„ç®€å•ç¤ºä¾‹äºŒã€å…·ä½“æµç¨‹2.1 ä¸ƒç‰›äº‘ä¸Šä¼ è¿‡ç¨‹é¦–å…ˆçœ‹ä¸ƒç‰›äº‘å®˜æ–¹çš„ä¸€å¼ å›¾ï¼Œäº†è§£ä¸ƒç‰›äº‘æ–‡ä»¶ä¸Šä¼ çš„å¤§è‡´æµç¨‹ å®¢æˆ·ç«¯éœ€è¦å‘ä¸šåŠ¡æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè·å–ä¸´æ—¶çš„ä¸Šä¼ å‡­è¯ï¼Œè¿™é‡Œå«åš uploadToken å®¢æˆ·ç«¯è·å–ä¸Šä¼ å‡­è¯ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨ä¸Šä¼ å‡­è¯å‘ä¸ƒç‰›äº‘æœåŠ¡å™¨ä¼ æ–‡ä»¶ã€‚è¿™é‡Œè¯´çš„å®¢æˆ·ç«¯ï¼Œæ˜¯Androidã€iPhoneã€æˆ–è€…Webæµè§ˆå™¨ã€‚ ä¸Šä¼ ä»»åŠ¡å®Œæˆä¹‹åï¼Œä¸ƒç‰›äº‘æœåŠ¡å™¨ä¼šå‘é¡¹ç›®çš„ä¸šåŠ¡æœåŠ¡å™¨å‘å‡ºå›è°ƒï¼Œæ–¹ä¾¿ä¸šåŠ¡æœåŠ¡å™¨åšåç»­æ“ä½œã€‚ä¸è¿‡ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä¸è®¾ç½®å›è°ƒ 2.2 ä»£ç ç¤ºä¾‹æˆ‘ä»¬å‡è®¾æœåŠ¡å™¨ä»£ç å·²ç»å†™å¥½ï¼Œè¿™é‡Œæš‚ä¸”ä¸è€ƒè™‘ä¸šåŠ¡æœåŠ¡å™¨çš„é€»è¾‘ã€‚æˆ‘ä»¬ä½¿ç”¨Webæµè§ˆå™¨ï¼Œä»¥ä¸€ä¸ªç®€å•çš„HTMLæ–‡ä»¶ä½œä¸ºç¤ºä¾‹ï¼Œä½¿ç”¨JSSDKå¾€ä¸ƒç‰›äº‘æœåŠ¡å™¨ä¼ æ–‡ä»¶ã€‚ ä½¿ç”¨CDNçš„æ–¹å¼ï¼Œå¼•å…¥jQueryå’Œä¸ƒç‰›äº‘JS SDKï¼Œå¦‚ä¸‹ä»£ç &lt;script type=\"text/javascript\" src=\"https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js\"&gt;&lt;/script&gt;&lt;script type=\"text/javascript\" src=\"https://unpkg.com/qiniu-js@2.5.5/dist/qiniu.min.js\"&gt;&lt;/script&gt; åœ¨è¡¨å•é‡Œæ·»åŠ ä¸€ä¸ªinputç”¨æ¥é€‰æ‹©æœ¬åœ°æ–‡ä»¶ï¼Œä½¿ç”¨ä¸€ä¸ªbuttonç”¨æ¥æ‰§è¡Œå–æ¶ˆä¸Šä¼ æ“ä½œï¼Œå¦‚ä¸‹ä»£ç &lt;form style=\"width: 50%;margin: 0 auto\"&gt; &lt;input type=\"file\" id=\"selectFile\" value=\"é€‰æ‹©æ–‡ä»¶\"&gt; &lt;button id=\"oncancel\"&gt;å–æ¶ˆä¸Šä¼ &lt;/button&gt;&lt;/form&gt; ç›‘å¬inputçŠ¶æ€ï¼Œå½“inputå†…å®¹æœ‰æ”¹å˜æ—¶ï¼Œè¿›è¡Œæ–‡ä»¶ä¸Šä¼ ï¼Œå¦‚ä¸‹ä»£ç  var subscription = null $(\"#selectFile\").change(function () { console.log('æ–‡ä»¶çŠ¶æ€æœ‰å˜åŒ–') // æ–‡ä»¶å¯¹è±¡ var file = this.files[0] if (!file) return // å‘ä¸šåŠ¡æœåŠ¡å™¨å‘é€è¯·æ±‚è·å–updateToken $.post('https://www.test.com/api/qiniu/getUploadToken', {}, function (token) { console.log('è¿”å›æ•°æ®ä¸ºuploadToken:' + token) if (token) { // æäº¤æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘æœåŠ¡å™¨ var observable = qiniu.upload(file, new Date().getTime(), token, {fname: file.name}, {useCdnDomain: true}) // è®¾ç½®ç›‘å¬è€…å¯¹è±¡ var observer = { next(res) { console.log('æ€»å¤§å°=&gt;' + res.total.size + ',å½“å‰å·²ä¸Šä¼ å¤§å°=&gt;' + res.total.loaded + ',å½“å‰è¿›åº¦=&gt;' + res.total.percent) }, error(err) { // ... }, complete(res) { // ... console.log('ä¸Šä¼ æˆåŠŸ') console.dir(res) } } // ä¸Šä¼ æ–‡ä»¶ subscription = observable.subscribe(observer) } }) })åœ¨ä»¥ä¸Šä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå½“ç›‘å¬åˆ°æœ‰æ–‡ä»¶æ·»åŠ åˆ°inputæ ‡ç­¾ä¹‹åï¼Œå…ˆå‘é€ä¸€ä¸ªpostè¯·æ±‚å»æœåŠ¡å™¨è·å–ä¸Šä¼ å‡­è¯ã€‚qiniu.upload(file: blob, key: string, token: string, putExtra: object, config: object)æ–¹æ³•å‚æ•°è¯´æ˜ï¼š fileï¼šæ–‡ä»¶å¯¹è±¡ï¼Œ keyï¼šæ–‡ä»¶çš„keyï¼Œç”¨äºæ ‡è¯†å­˜å‚¨æ¡¶é‡Œçš„å”¯ä¸€ä¸€ä¸ªæ–‡ä»¶ï¼Œ tokenï¼šä¸šåŠ¡æœåŠ¡å™¨è¿”å›çš„ä¸Šä¼ å‡­è¯ï¼Œ putExtraï¼šé™„åŠ å‚æ•°å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸Šé¢ç”¨åˆ°çš„ fname æŒ‡å®šçš„æ˜¯åŸæ–‡ä»¶å configï¼šé…ç½®å¯¹è±¡ï¼ŒuseCdnDomain: trueä»£è¡¨ä½¿ç”¨cdnåŠ é€ŸåŸŸåä¸ƒç‰›äº‘ä¸Šä¼ æ–¹æ³•æ¥æ”¶ä¸€ä¸ªç›‘å¬è€…å¯¹è±¡ï¼Œ åœ¨ç›‘å¬è€…å¯¹è±¡çš„nextå›è°ƒæ–¹æ³•ä¸­ï¼Œæ¥æ”¶ä¸Šä¼ è¿›åº¦ä¿¡æ¯ï¼Œres å‚æ•°æ˜¯ä¸€ä¸ªå¸¦æœ‰ total å­—æ®µçš„ objectï¼ŒåŒ…å«loadedã€sizeã€percentä¸‰ä¸ªå±æ€§ï¼Œæä¾›ä¸Šä¼ è¿›åº¦ä¿¡æ¯ã€‚åœ¨æ–‡ä»¶ä¸Šä¼ å®Œæˆä¹‹åï¼Œå›è°ƒcompleteæ–¹æ³•ï¼Œè¿”å›æ•°æ®å¦‚ä¸‹hash: \"FluHYkQWHigWGQLSe0w9-Jl6b7LA\"key: \"1576488908539\"2.3 å–æ¶ˆä¸Šä¼ æœ€åï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ªå–æ¶ˆä¸Šä¼ çš„æ–¹æ³•$(\"#oncancel\").click(function (event) { //é˜»æ­¢é»˜è®¤äº‹ä»¶ event.preventDefault() //å–æ¶ˆä¸Šä¼  subscription.unsubscribe()})ä¸‰ã€æ€»ç»“å®é™…ä¸Šï¼Œä¸ƒç‰›äº‘å¯¹è±¡æä¾›äº†å¤šç§è¯­è¨€ç‰ˆæœ¬çš„SDKï¼Œå¯æ ¹æ®å®é™…éœ€æ±‚å»ä¸‹è½½ä½¿ç”¨ã€‚ä»¥ä¸Šæ˜¯ä½¿ç”¨ä½¿ç”¨æµè§ˆå™¨ä¸Šä¼ æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘å¯¹è±¡å­˜å‚¨çš„ç®€å•ç¤ºä¾‹ï¼Œå…¨éƒ¨ä»£ç å¦‚ä¸‹ï¼š&lt;!DOCTYPE html&gt;&lt;html lang=\"en\"&gt;&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt;ä¸ƒç‰›äº‘ä¸Šä¼ ç¤ºä¾‹&lt;/title&gt; &lt;script src=\"https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js\"&gt;&lt;/script&gt; &lt;script type=\"text/javascript\" src=\"https://unpkg.com/qiniu-js@2.5.5/dist/qiniu.min.js\"&gt;&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;form style=\"width: 50%;margin: 0 auto\"&gt; &lt;input type=\"file\" id=\"selectFile\" value=\"é€‰æ‹©æ–‡ä»¶\"&gt; &lt;button id=\"oncancel\"&gt;å–æ¶ˆä¸Šä¼ &lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;script&gt; var subscription = null $(\"#selectFile\").change(function () { console.log('æ–‡ä»¶çŠ¶æ€æœ‰å˜åŒ–') //æ–‡ä»¶å¯¹è±¡ var file = this.files[0] if (!file) return //å‘é€è¯·æ±‚è·å–updateToken $.post('https://www.test.com/api/qiniu/getUploadToken', {}, function (token) { console.log('è¿”å›æ•°æ®ä¸ºupdateToken:' + token) if (token) { //æäº¤æ–‡ä»¶åˆ°æœåŠ¡å™¨ var observable = qiniu.upload(file, new Date().getTime(), token, {fname: file.name}, {useCdnDomain: true}) //è®¾ç½®ç›‘å¬è€…å¯¹è±¡ var observer = { next(res) { // æ¥æ”¶ä¸Šä¼ è¿›åº¦ä¿¡æ¯ï¼Œres å‚æ•°æ˜¯ä¸€ä¸ªå¸¦æœ‰ total å­—æ®µçš„ objectï¼ŒåŒ…å«loadedã€sizeã€percentä¸‰ä¸ªå±æ€§ï¼Œæä¾›ä¸Šä¼ è¿›åº¦ä¿¡æ¯ã€‚ console.log('æ€»å¤§å°=&gt;' + res.total.size + ',å½“å‰å·²ä¸Šä¼ å¤§å°=&gt;' + res.total.loaded + ',å½“å‰è¿›åº¦=&gt;' + res.total.percent) }, error(err) { // ... }, complete(res) { // ... console.log('ä¸Šä¼ æˆåŠŸ') console.dir(res) } } //ä¸Šä¼ æ–‡ä»¶ subscription = observable.subscribe(observer) } }) }) $(\"#oncancel\").click(function (event) { //é˜»æ­¢é»˜è®¤äº‹ä»¶ event.preventDefault() //å–æ¶ˆä¸Šä¼  subscription.unsubscribe() })&lt;/script&gt;&lt;/html&gt; åŸåˆ›æ–‡ç« ï¼Œç¦æ­¢è½¬è½½ï¼ŒåŸä½œè€…åšå®¢ blog.jkdev.cn" }, { "title": "å¾®ä¿¡å°ç¨‹åºwx.getUserInfoæ¥å£è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œæ–°ç‰ˆSDKæ€æ ·è·å–ç”¨æˆ·ä¿¡æ¯ï¼Ÿ", "url": "/posts/frontend_weixin_sdk-get-user-info.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç®€è¿°åœ¨å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ï¼Œè°ƒç”¨wx.getUserInfoæ¥å£å°†èƒ½è·å–å°ç¨‹åºç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ¥å£è¿”å›çš„ä¿¡æ¯æ ¼å¼å¦‚ä¸‹{ \"nickName\": \"Band\", \"gender\": 1, \"language\": \"zh_CN\", \"city\": \"Guangzhou\", \"province\": \"Guangdon...", "content": " æ’°å†™æ—¶é—´ï¼š2019-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç®€è¿°åœ¨å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ï¼Œè°ƒç”¨wx.getUserInfoæ¥å£å°†èƒ½è·å–å°ç¨‹åºç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ¥å£è¿”å›çš„ä¿¡æ¯æ ¼å¼å¦‚ä¸‹{ \"nickName\": \"Band\", \"gender\": 1, \"language\": \"zh_CN\", \"city\": \"Guangzhou\", \"province\": \"Guangdong\", \"country\": \"CN\", \"avatarUrl\": \"http://wx.qlogo.cn/mmopen/vi_32/1vZvI39NWFQ9XM4LtQpFrQJ1xlgZxx3w7bQxKARol6503Iuswjjn6nIGBiaycAjAtpujxyzYsrztuuICqIM5ibXQ/0\"}ä¸è¿‡ï¼Œä½ ä¼šå‘ç°è°ƒç”¨è¿™ä¸ªæ¥å£å¹¶æ²¡æœ‰è¿”å›ç”¨æˆ·ä¿¡æ¯ã€‚é€›è®ºå›æ‰çŸ¥é“ï¼Œè¿™ä¸ªæ¥å£è¢«æŠ›å¼ƒäº†ã€‚ä½†æ˜¯è…¾è®¯ä¹Ÿæä¾›äº†æ–°çš„æ–¹å¼ï¼Œä»¥ä¸‹æ¼”ç¤ºè·å–ç”¨æˆ·ä¿¡æ¯çš„æµç¨‹ã€‚ å‚è€ƒé“¾æ¥: https://developers.weixin.qq.com/community/develop/doc/000aee01f98fc0cbd4b6ce43b56c01äºŒã€å®ç°è¿‡ç¨‹2.1 ä½¿ç”¨buttonç»„ä»¶è·å–ç”¨æˆ·ä¿¡æ¯ä½¿ç”¨ä¸€ä¸ªbuttonç»„å»ºï¼Œå¹¶å°† open-type æŒ‡å®šä¸º getUserInfo ç±»å‹ï¼Œç”¨æˆ·å…è®¸æˆæƒåï¼Œå¯è·å–ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ã€‚&lt;button open-type=\"getUserInfo\" lang=\"zh_CN\" bindtap=\"onGotUserInfo\" bindgetuserinfo=\"bindGetUserInfo\"&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/button&gt;å±æ€§è¯´æ˜ open-typeé€šè¿‡ä¸åŒå±æ€§å€¼ï¼Œå°ç¨‹åºä¼šå¼¹å‡ºä¸€ä¸ªä¸åŒçš„æˆæƒæç¤ºçª—å£ï¼Œè®©ç”¨æˆ·é€‰æ‹©æ˜¯å¦æˆæƒã€‚æˆ‘ä»¬è¦è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ‰€ä»¥å€¼æŒ‡å®šçš„æ˜¯getUserInfoï¼Œæ›´å¤šå±æ€§å€¼å¯ä»¥å‚è€ƒå¾®ä¿¡å°ç¨‹åºçš„buttonç»„ä»¶æ–‡æ¡£ bindtapç»‘å®šä¸€ä¸ªæˆæƒç»“æœå›è°ƒå‡½æ•°ï¼Œåœ¨jsæ–‡ä»¶ä¸­åˆ›å»ºå¯¹åº”æ–¹æ³•ï¼Œè¯¦ç»†ä»£ç å¦‚ä¸‹onGotUserInfo: function(e) { console.log(e.detail.errMsg) console.log(e.detail.userInfo) console.log(e.detail.rawData) }ç‚¹å‡»æŒ‰é’®ä¹‹åï¼Œå¼¹å‡ºæˆæƒçª—å£ï¼Œå¦‚ä¸‹å›¾ï¼š bindgetuserinfoå¯ä»¥ä»bindgetuserinfoå›è°ƒä¸­è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨è¿™é‡Œæˆ‘å¡«å†™çš„æ˜¯bindGetUserInfoï¼Œè¦åœ¨jsæ–‡ä»¶ä¸­åˆ›å»ºå¯¹åº”çš„æ–¹æ³•ï¼Œè¯¦ç»†ä»£ç å¦‚ä¸‹bindGetUserInfo: function(e) { console.log('å›è°ƒæˆåŠŸ') console.dir(e) }ä¸Šé¢å›è°ƒæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æ‰“å°è¿”å›çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹æˆªå›¾æ‰€ç¤ºï¼šå¯ä»¥çœ‹åˆ°ï¼Œåœ¨å›è°ƒä¿¡æ¯ä¸­ï¼ŒåŒ…å«çš„å¾®ä¿¡ç”¨æˆ·åŸºæœ¬ä¿¡æ¯çš„é”®å€¼å¯¹ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼šuserInfo:avatarUrl: \"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTL8G6eBq1K7sk3CiceZ1vbY9IHO4kmJWQyFcEPc9trIGADva7ricI1ic7Zia8eWYAy4LLJwueejXOwKcg/132\"city: \"\"country: \"ä¸­å›½\"gender: 1language: \"zh_CN\"nickName: \"ç¢§æµ·è“å¤©\"province: \"è´µå·\"ç”¨æˆ·ç¬¬ä¸€æ¬¡ç‚¹å‡»æŒ‰é’®æ—¶å¼¹å‡ºæˆæƒçª—å£ï¼Œæˆæƒä¹‹åå°†ä¸å†å¼¹å‡ºï¼Œbindtapå›è°ƒæ–¹æ³•ç¬¬äºŒæ¬¡æ‰§è¡Œä¹Ÿä¸ä¼šå†æœ‰è¿”å›æ•°æ®ã€‚å› æ­¤å¯ä»¥ä½¿ç”¨bindgetuserinfoå›è°ƒæ–¹æ³•è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œæ–¹ä¾¿æäº¤ç»™ä¸šåŠ¡æœåŠ¡å™¨ã€‚2.2 ä½¿ç”¨open-dataå±•ç¤ºç”¨æˆ·åŸºæœ¬ä¿¡æ¯open-dataæ§ä»¶ç”¨äºå±•ç¤ºå¾®ä¿¡å¼€æ”¾çš„æ•°æ®ã€‚ä¸è¿‡è¿™ä¸ªæ§ä»¶åªèƒ½æ˜¾ç¤ºæ•°æ®ï¼Œåœ¨å†™è¿™ç¯‡åšå®¢çš„æ—¶å€™ï¼Œå¾®ä¿¡æ˜¯ä¸æ”¯æŒè¯»å–open-dataä¸Šçš„æ•°æ®çš„ï¼Œä¸çŸ¥é“å°†æ¥ä¼šä¸ä¼šæ”¯æŒï¼è¯¦ç»†ä»£ç å¦‚ä¸‹&lt;view class=\"panel\"&gt; &lt;view&gt;æ˜µç§°ï¼š &lt;open-data type=\"userNickName\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;å¤´åƒï¼š &lt;open-data class=\"avatar\" type=\"userAvatarUrl\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;æ€§åˆ«ï¼š &lt;open-data type=\"userGender\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;åŸå¸‚ï¼š &lt;open-data type=\"userCity\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;çœä»½ï¼š &lt;open-data type=\"userProvince\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;å›½å®¶ï¼š &lt;open-data type=\"userCountry\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;è¯­è¨€ï¼š &lt;open-data type=\"userLanguage\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;/view&gt;è¿è¡Œé¡¹ç›®åï¼Œçœ‹åˆ°æ•ˆæœå¦‚ä¸‹å›¾ï¼š åœ¨open-dataæ ‡ç­¾ä¸­ï¼Œæœ€å…³é”®çš„å±æ€§æ˜¯type,æ ‡å¿—å¼€æ”¾æ•°æ®ç±»å‹ã€‚è¯¦ç»†è¯´æ˜å¯ä»¥å‚è€ƒå¾®ä¿¡å°ç¨‹åºopen-dataçš„å¼€æ”¾æ–‡æ¡£ä¸‰ã€æ‰€æœ‰ä»£ç ä»¥ä¸‹æ˜¯æ­¤æ–‡ç« æ¶‰åŠçš„æ‰€æœ‰ä»£ç  index.wxml&lt;!--index.wxml--&gt;&lt;view class=\"container\"&gt; &lt;view class=\"panel\"&gt; &lt;button open-type=\"getUserInfo\" lang=\"zh_CN\" bindtap=\"onGotUserInfo\" bindgetuserinfo=\"bindGetUserInfo\"&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/button&gt; &lt;/view&gt; &lt;view class=\"panel\"&gt; &lt;view&gt;æ˜µç§°ï¼š &lt;open-data type=\"userNickName\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;å¤´åƒï¼š &lt;open-data class=\"avatar\" type=\"userAvatarUrl\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;æ€§åˆ«ï¼š &lt;open-data type=\"userGender\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;åŸå¸‚ï¼š &lt;open-data type=\"userCity\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;çœä»½ï¼š &lt;open-data type=\"userProvince\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;å›½å®¶ï¼š &lt;open-data type=\"userCountry\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;view&gt;è¯­è¨€ï¼š &lt;open-data type=\"userLanguage\" lang=\"zh_CN\"&gt;&lt;/open-data&gt; &lt;/view&gt; &lt;/view&gt;&lt;/view&gt; index.wxss/**index.wxss**/.panel{ margin-top: 20px;} index.js//index.js//è·å–åº”ç”¨å®ä¾‹const app = getApp()Page({ onGotUserInfo: function(e) { console.log(e.detail.errMsg) console.log(e.detail.userInfo) console.log(e.detail.rawData) }, bindGetUserInfo: function(e) { console.log('å›è°ƒæˆåŠŸ') console.dir(e) },})å››ã€æ€»ç»“å¾®ä¿¡å°ç¨‹åºä¸å†å¼€æ”¾wx.getUserInfoæ¥å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œéœ€è¦å¼•å¯¼ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»ä¸€ä¸ªbuttonæŒ‰é’®å¼¹å‡ºæˆæƒçª—å£ï¼Œè®©ç”¨æˆ·æ‰‹åŠ¨æˆæƒï¼Œå¼€å‘è€…æ‰èƒ½æˆåŠŸè·å–ç”¨æˆ·ä¿¡æ¯ã€‚ä¹Ÿè®¸è¿™æ ·å¯¹å¼€å‘è€…æ¥è¯´éº»çƒ¦äº†ç‚¹ï¼Œä¸è¿‡ï¼Œå¦‚æœä»¥ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ ·ç¡®å®æ¯”è¾ƒå®‰å…¨ã€‚" }, { "title": "æ€æ ·åœ¨Linuxä¸Šå®‰è£…Node.js", "url": "/posts/frontend_install-nodejs-on-linux.html", "categories": "å‰ç«¯", "tags": "", "date": "2023-01-29 20:10:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-04-24ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç¯å¢ƒUbuntu 16.04 ServeräºŒã€å®‰è£…æ­¥éª¤å®‰è£…æ­¥éª¤å¾ˆç®€å•ï¼Œæœ¬æ¬¡ä¸ç›´æ¥ä»Linuxçš„è½¯ä»¶åº“å®‰è£…ï¼Œå»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š å»å®˜ç½‘ä¸‹è½½äºŒè¿›åˆ¶å¯æ‰§è¡Œå‹ç¼©åŒ…ï¼› è§£å‹åˆ°ç³»ç»Ÿç›®å½•ï¼› è®¾ç½®ç¯å¢ƒå˜é‡ï¼› å®‰è£…å®Œæˆï¼Œè¿è¡Œæµ‹è¯•ã€‚ ä¸‰ã€å®‰è£…è¿‡ç¨‹â€#â€åé¢ä¸ºæ³¨é‡Šå†…å®¹ï¼Œä»¥ä¸‹æ“ä½œåœ¨ro...", "content": " æ’°å†™æ—¶é—´ï¼š2019-04-24ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-29ä¸€ã€ç¯å¢ƒUbuntu 16.04 ServeräºŒã€å®‰è£…æ­¥éª¤å®‰è£…æ­¥éª¤å¾ˆç®€å•ï¼Œæœ¬æ¬¡ä¸ç›´æ¥ä»Linuxçš„è½¯ä»¶åº“å®‰è£…ï¼Œå»å®˜ç½‘ä¸‹è½½å®‰è£…ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š å»å®˜ç½‘ä¸‹è½½äºŒè¿›åˆ¶å¯æ‰§è¡Œå‹ç¼©åŒ…ï¼› è§£å‹åˆ°ç³»ç»Ÿç›®å½•ï¼› è®¾ç½®ç¯å¢ƒå˜é‡ï¼› å®‰è£…å®Œæˆï¼Œè¿è¡Œæµ‹è¯•ã€‚ ä¸‰ã€å®‰è£…è¿‡ç¨‹â€#â€åé¢ä¸ºæ³¨é‡Šå†…å®¹ï¼Œä»¥ä¸‹æ“ä½œåœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è¿›è¡Œ3.1 è¿›å…¥å®˜ç½‘ä¸‹è½½å®˜ç½‘ä¸‹è½½åœ°å€ä¸ºï¼šhttps://nodejs.org/en/download/ç›´æ¥é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼Œè¿™é‡Œé€‰æ‹©çš„æ˜¯Linux Binaries (x64)ï¼Œä¹Ÿå°±æ˜¯64ä½å¤„ç†å™¨çš„äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºåŒ…ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š3.2 è§£å‹åˆ°ç³»ç»Ÿç›®å½•# å…ˆå®‰è£…ä¸ªwgetï¼Œç”¨æ¥ä¸‹è½½node.jså®‰è£…åŒ…apt install wget# ä¸‹è½½å®‰è£…åŒ…wget https://nodejs.org/dist/v10.15.3/node-v10.15.3-linux-x64.tar.xz# è¿™ä¸ªåœ°æ–¹ï¼Œä½ å¯èƒ½ä¼šå‡ºé”™ï¼Œå› ä¸ºä½ çš„ç³»ç»Ÿé‡Œæ²¡æœ‰å¯¹åº”çš„è§£å‹å·¥å…·ï¼Œä½ å®‰è£…ä¸Šxzå’Œtarå¯¹åº”å·¥å…·åŒ…å°±è¡Œtar xf node-v10.15.3-linux-x64.tar.xz# å°†äºŒè¿›åˆ¶è§£å‹ç›®å½• ç§»åŠ¨åˆ°ç³»ç»ŸæŒ‡å®šç›®å½•ï¼Œé€šå¸¸æ˜¯ /usr/local ä¸‹mv node-v10.15.3-linux-x64 /usr/local/nodejs3.3 è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡éœ€è¦æŠŠnode.jsè§£å‹ç›®å½•çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿçš„PATHç¯å¢ƒå˜é‡ï¼Œæˆ‘ä»¬æ‰èƒ½é¡ºåˆ©åœ¨ç»ˆç«¯ä¸­è°ƒç”¨ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°äºŒè¿›åˆ¶ç›®å½•ä¸‹é¢åŒ…å«äº†nodeå¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿˜æœ‰npmå’Œnpxé“¾æ¥æ–‡ä»¶ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œ/etc/profile æ–‡ä»¶æ˜¯åœ¨ç³»ç»Ÿæ¯æ¬¡å¼€æœºéƒ½ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œå®šä¹‰PATHç¯å¢ƒå˜é‡ï¼Œä½¿ç”¨vimç¼–è¾‘æ­¤æ–‡ä»¶vim /etc/profileåœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä»¥ä¸‹ä»£ç ï¼šexport PATH=/usr/local/nodejs/bin:$PATHç›¸å…³å«ä¹‰=ï¼šç­‰å·å‰æ˜¯å˜é‡åï¼Œç­‰å·åæ˜¯å˜é‡å€¼ï¼›exportï¼šè¿™ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯å°†åé¢çš„PATHå˜é‡æ·»åŠ åˆ°å½“å‰ç³»ç»Ÿç¯å¢ƒä¸­ï¼›/usr/local/nodejs/binï¼šè¿™ä¸ªæ˜¯node.jså®‰è£…ç›®å½•ä¸‹çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œä¹Ÿå°±æ˜¯nodeå‘½ä»¤å’Œnpmçš„é“¾æ¥æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼›:ï¼šåŠè§’å†’å·ï¼ˆè‹±æ–‡è¾“å…¥æ³•ä¸‹çš„å†’å·ï¼‰æ˜¯Linuxç³»ç»Ÿä¸‹çš„åˆ†å‰²ç¬¦å·ï¼Œç›¸å½“äºwindowsä¸­çš„â€œ;â€ï¼›$PATHï¼šä¸ºä»€ä¹ˆè¿˜åœ¨åé¢è¿½åŠ $PATHï¼Ÿé¦–å…ˆâ€œ$â€œç¬¦å·æ˜¯Linuxå˜é‡çš„å…³é”®ç¬¦å·ï¼Œå…¶æ¬¡ï¼Œå› ä¸ºPATHç¯å¢ƒå˜é‡é»˜è®¤æƒ…å†µä¸‹å°±ä¿å­˜äº†å¾ˆå¤šçš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•äº†ï¼Œå¦‚æœä¸åŠ çš„è¯ç›¸å½“äºå¯¹PATHç¯å¢ƒå˜é‡è¿›è¡Œé‡å®šä¹‰ï¼Œè€Œä¸æ˜¯è¿½åŠ ã€‚é‚£æ ·ç³»ç»Ÿå°±ä¼šå‡ºé—®é¢˜ï¼Œå…¶ä»–Linuxå‘½ä»¤å°±ä¸èƒ½æ­£å¸¸è°ƒç”¨äº†ã€‚ å› ä¸ºæ–‡æ¡£è¯»è€…å¤§å¤šæ˜¯åˆå­¦è€…ï¼Œæ‰€ä»¥åœ¨æ–‡ä¸­å°½é‡è¯¦ç»†è¯´æ˜æ¯ä¸€ä¸ªæ­¥éª¤ã€‚3.4 è¿è¡Œæµ‹è¯•ç¼–è¾‘å®Œæˆä¹‹åï¼Œä¿å­˜å¹¶é€€å‡ºï¼Œæ­¤æ—¶ï¼Œè¦è®©/etc/profileä¸´æ—¶åœ¨å½“å‰ç»ˆç«¯èµ·ä½œç”¨ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ã€‚source /etc/profileå‘½ä»¤è°ƒç”¨æµ‹è¯•#æŸ¥çœ‹node.jsçš„ç‰ˆæœ¬ä¿¡æ¯node -v#æŸ¥çœ‹npmçš„ç‰ˆæœ¬ä¿¡æ¯npm -vå¦‚æœæ­£å¸¸ï¼Œæ­å–œä½ ï¼Œå®‰è£…æˆåŠŸäº†ã€‚" }, { "title": "MySQLæ•°æ®åº“åŸºç¡€çš„æ“ä½œä¸å¢åˆ æ”¹æŸ¥æ–¹æ³•", "url": "/posts/database_mysql-basic-operation.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:35:00 +0800", "snippet": "ä¸€ã€ç¯å¢ƒåœ¨å‰é¢,æˆ‘ä»¬å·²ç»ç»™å¤§å®¶æ¼”ç¤ºäº†å¦‚æœå®‰è£…MySQLï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…MySQLï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹ç›¸å…³é“¾æ¥è¿›è¡Œå®‰è£…æ–‡ç« é“¾æ¥: å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…MySQL 8.0æ•°æ®åº“ åœ¨Linuxä»äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…MySQL 8.0æ•°æ®åº“ åœ¨Linuxä¸Šä»æºç å®‰è£…MySQL 8.0æ•°æ®åº“è§†é¢‘æ•™ç¨‹é“¾æ¥: å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…è§£å‹ç‰ˆçš„MySQL 8.0 æ•°æ®åº“ å¦‚ä½•åœ¨é˜¿é‡Œäº‘LinuxæœåŠ¡...", "content": "ä¸€ã€ç¯å¢ƒåœ¨å‰é¢,æˆ‘ä»¬å·²ç»ç»™å¤§å®¶æ¼”ç¤ºäº†å¦‚æœå®‰è£…MySQLï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…MySQLï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹ç›¸å…³é“¾æ¥è¿›è¡Œå®‰è£…æ–‡ç« é“¾æ¥: å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…MySQL 8.0æ•°æ®åº“ åœ¨Linuxä»äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…MySQL 8.0æ•°æ®åº“ åœ¨Linuxä¸Šä»æºç å®‰è£…MySQL 8.0æ•°æ®åº“è§†é¢‘æ•™ç¨‹é“¾æ¥: å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…è§£å‹ç‰ˆçš„MySQL 8.0 æ•°æ®åº“ å¦‚ä½•åœ¨é˜¿é‡Œäº‘LinuxæœåŠ¡å™¨ä¸Šå®‰è£…MySQL 8.0 æ•°æ®åº“ æ€æ ·ä»æºç å®‰è£…MySQL 8.0 æ•°æ®åº“å¦‚æœä½ è¿˜ä¸ä¼šå®‰è£…MySQLå’Œè¿æ¥MySQLæ•°æ®åº“ï¼Œä½ åº”è¯¥é€‰æ‹©ä¸Šé¢éƒ¨åˆ†å†…å®¹å­¦ä¹ ä¹‹åï¼Œå†çœ‹ä»¥ä¸‹å†…å®¹äºŒã€æ¦‚è¿°å®é™…ä¸Šï¼Œä½œä¸ºä¸€ä¸ªè½¯ä»¶å¼€å‘è€…ï¼Œæˆ–è€…å³å°†æˆä¸ºè½¯ä»¶å¼€å‘è€…ã€‚MySQLæ•°æ®åº“æˆ–è€…è¯´æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦å­¦ä¹ çŸ¥è¯†å¾ˆå¤šå¾ˆå¤šï¼Œè€Œæ­¤æ–‡ç« ï¼Œå¸¦å¤§å®¶è¿›å…¥MySQLçš„å…¥é—¨å­¦ä¹ ï¼Œç›®çš„æ˜¯è®©å¤§å®¶å¿«é€Ÿå­¦ä¼šä½¿ç”¨ã€‚å®é™…ä¸Šä½ åœ¨ä»Šåå­¦ä¹ ä¸­é‡åˆ°çš„å›°éš¾ï¼Œä½ åº”è¯¥å­¦ä¼šä½¿ç”¨ç½‘ç»œï¼Œå»æŸ¥çœ‹æ›´å¤šæ–‡æ¡£ã€‚ä»¥ä¸‹æ‰€æœ‰å‘½ä»¤æ“ä½œçš„å‰ææ˜¯ï¼Œæ·»åŠ MySQLå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•åˆ°ç³»ç»Ÿçš„PATHç¯å¢ƒç¯å¢ƒå˜é‡ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰åšè¿™ä¸ªæ­¥éª¤ï¼Œè¯·å‚è€ƒä¹‹å‰çš„è§†é¢‘æ•™ç¨‹ã€‚åœ¨è®¡ç®—æœºä¸­ï¼Œbinå…³é”®å­—ä¸€èˆ¬æŒ‡çš„æ˜¯binaryå•è¯çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶çš„æ„æ€ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶å°±å¯ä»¥è¯´æ˜¯é€šè¿‡ç¼–è¯‘åçš„å¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚äºŒã€MySQLæœåŠ¡å™¨åŸºæœ¬æ“ä½œ3.1 ç™»å½•æ•°æ®åº“mysql -uroot -p;å‚æ•°è¯´æ˜ï¼š-uï¼šåœ¨ä¸Šé¢ç¤ºä¾‹ä¸­-uå‚æ•°åé¢ç´§è·Ÿçš„æ˜¯rootå…³é”®å­—ï¼Œæ„æ€å°±æ˜¯ä½¿ç”¨rootè´¦å·ç™»å½•-pï¼šæ­¤å‚æ•°ä»£è¡¨ä½¿ç”¨å¯†ç ç™»å½•ï¼ŒåŠ ä¸Šæ­¤å‚æ•°ä¹‹åï¼Œå‘½ä»¤è¡Œä¼šæç¤ºç”¨æˆ·è¾“å…¥MySQLè´¦å·å¯¹åº”çš„å¯†ç é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤MySQLä¼šè¿æ¥åˆ°å®‰è£…åœ¨æœ¬æœºçš„MySQæœåŠ¡ã€‚æ­¤å¤„è¯´çš„â€œæœ¬æœºâ€æŒ‡çš„æ˜¯ä½ æ­£åœ¨ä½¿çš„æ“ä½œç³»ç»Ÿï¼ŒåŒ…æ‹¬Windowsã€Linuxã€Macï¼Œæˆ–è€…ä½ çš„æœåŠ¡å™¨ã€‚å¦‚æœä½ éœ€è¦ä½¿ç”¨æœ¬æœºçš„MySQLå‘½ä»¤å»è¿æ¥è¿œç¨‹çš„MySQLæ•°æ®åº“æœåŠ¡å™¨ï¼Œåªéœ€è¦åŠ ä¸€ä¸ª-hå‚æ•°å³å¯ï¼Œä»£è¡¨æœåŠ¡å™¨ä¸»æœºï¼Œå¦‚ä¸‹ä»£ç mysql -uroot -h120.77.41.111 -p;å‡è®¾120.77.41.111æ˜¯é˜¿é‡Œäº‘çš„ä¸€å°æœåŠ¡å™¨ï¼Œåœ¨è¿™å°æœåŠ¡å™¨å®‰è£…äº†MySQLæ•°æ®åº“æœåŠ¡ï¼Œå¹¶å¯¹å¤–å¼€æ”¾äº†MySQLçš„æœåŠ¡ç«¯å£ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸Šè¿™æ¡å‘½ä»¤å³å¯è¿æ¥åˆ°å®‰è£…åœ¨120.77.41.111è¿™å°ä¸»æœºä¸Šçš„MySQLã€‚MySQLé»˜è®¤æœåŠ¡ç«¯å£æ˜¯3306ï¼Œmysqlä¼šå°†3306ä½œä¸ºé»˜è®¤æœåŠ¡ç«¯å£ã€‚å‡è®¾120.77.41.111è¿™å°æœåŠ¡å™¨åœ¨å®‰è£…MySQLæœåŠ¡çš„æ—¶å€™æŠŠå®ƒæŒ‡å®šä¸º3307ï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨mysqlå‘½ä»¤è¿›è¡Œè¿æ¥æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨-På‚æ•°æŒ‡å®šMySQLçš„æœåŠ¡ç«¯å£å·ï¼Œå¦‚ä¸‹ä»£ç mysql -uroot -h120.77.41.111 -P3307 -påœ¨ä¸Šé¢æ‰€ç¤ºä¾‹çš„å‘½ä»¤ä¸­ï¼Œä½ ä¼šå‘ç°ï¼Œå‚æ•°æ ‡ç¤ºå’Œå‚æ•°æ˜¯ç´§ç´§æŒ¨ç€çš„ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å‚æ•°æ ‡æ ‡è¯†å’Œå‚æ•°å€¼ä¹‹é—´åŠ ä¸€ä¸ªè‹±æ–‡è¾“å…¥æ³•çŠ¶æ€ä¸‹çš„ç©ºæ ¼ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºmysql -u root -h 120.77.41.111 -P 3307 -p3.2 æ›´æ”¹è´¦å·å¯†ç MySQL 8.0åˆå§‹åŒ–ä¼šç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„å¯†ç ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦æ›´æ”¹ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚åœ¨ä¹‹å‰çš„å®‰è£…MySQL 8.0çš„æ–‡æ¡£ä¸­ï¼Œå·²ç»ç»™è¯´æ˜å¦‚ä½•åœ¨MySQLæ§åˆ¶å°ä¸Šæ›´æ”¹è´¦å·çš„å¯†ç å’ŒéªŒè¯æ–¹å¼ï¼Œåœ¨è¿™é‡Œä¸å†é‡å¤ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨MySQLæœåŠ¡è‡ªå¸¦çš„mysqladminå‘½ä»¤å»æ›´æ”¹è´¦å·çš„å¯†ç ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºmysqladmin -uroot password 'root123456' -pä»¥ä¸Šä»£ç ä»£è¡¨ä½¿ç”¨mysqladminå‘½ä»¤æŠŠrootè´¦å·çš„å¯†ç æ”¹ä¸ºroot123456ï¼Œåé¢çš„-på‚æ•°ä¼šè®©ç³»ç»Ÿè‡ªåŠ¨å¼¹å‡ºå¯†ç è¾“å…¥çª—å£ï¼Œæ­¤æ—¶è¾“å…¥rootè´¦å·ä¹‹å‰çš„å¯†ç æŒ‰å›è½¦ä¹‹åï¼Œæ–°çš„å¯†ç å°±ç”Ÿæ•ˆäº†ã€‚3.3 MySQLåŸºæœ¬æ“ä½œçš„å¸¸ç”¨å‘½ä»¤ç™»å½•æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»¥ä¸‹ç›¸å…³å‘½ä»¤(1)æŸ¥è¯¢å½“å‰æ•°æ®åº“show databases;(2)åˆ‡æ¢æŸä¸ªæ•°æ®åº“ï¼Œå¦‚åˆ‡æ¢åˆ°mysqlåº“use mysql;(3)æŸ¥çœ‹æŸä¸ªåº“çš„æ‰€æœ‰è¡¨åç§°show tables;(4)æŸ¥çœ‹æŸä¸ªè¡¨çš„å…¨éƒ¨å­—æ®µdesc è¡¨å;ä¾‹å¦‚ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹mysqlåº“çš„userè¡¨ï¼Œä»£ç å¦‚ä¸‹use mysql;desc user;(5)æŸ¥çœ‹å»ºè¡¨è¯­å¥show create table è¡¨å;ç»§(4)ï¼ŒæŸ¥çœ‹userè¡¨çš„å»ºè¡¨è¯­å¥ï¼Œä»£ç å¦‚ä¸‹show create table user;(6)æŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·select user();(7)æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“select database();(8)æ–°å»ºä¸€ä¸ªæ•°æ®åº“create database æ•°æ®åº“å;ä¾‹å¦‚ï¼Œæ–°å»ºä¸€ä¸ªdb_testæ•°æ®åº“ï¼Œä»£ç å¦‚ä¸‹reate database db_test;(9)åœ¨æŸä¸ªæ•°æ®åº“é‡Œæ–°å»ºä¸€å¼ è¡¨create table è¡¨å(å­—æ®µå æ•°æ®ç±»å‹,...)ç»§(8)ï¼Œæ–°å»ºä¸€ä¸ªuserè¡¨create table user(id int(11), name varchar(45));ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ºäº†é¿å…å­—æ®µåä¸MySQLå…³é”®å­—å†²çªï¼Œåœ¨å»ºè¡¨è¿‡ç¨‹ä¸­ï¼Œä¸€èˆ¬ç»™å­—æ®µåŠ ä¸ŠåŸæ„å­—ç¬¦ï¼Œå¦‚ä¸‹ä»£ç ï¼šcreate table user(`id` int(11), `name` varchar(45));3.4 åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·å¹¶ç»™å…¶æˆæƒåˆ›å»ºä¸€ä¸ªtestç”¨æˆ·,å…è®¸å…¶åœ¨ä»»æ„ä¸»æœºç™»å½•ï¼Œå¯†ç ä¸ºtest123create user 'test'@'%' identified by 'test123'; å°†db_teståº“çš„æ‰€æœ‰æƒé™èµ‹äºˆhahagrant all on db_test.* to 'haha'@'%';å››ã€å¸¸ç”¨çš„å¢åˆ æ”¹æŸ¥è¯­å¥4.1 æŸ¥è¯¢è¯­å¥æŸ¥è¯¢è¯­å¥ä»£ç å¦‚ä¸‹select å­—æ®µå from è¡¨åæŸ¥è¯¢db_teståº“userè¡¨çš„nameï¼Œä»£ç å¦‚ä¸‹use db_test;select name from user;æˆ–è€…select name from db_test.user;åœ¨æŸ¥è¯¢æ‰€æœ‰å­—æ®µæ—¶ï¼Œç”¨*ä»£æ›¿ï¼Œå¦‚ä¸‹ä»£ç select * from user;4.2 æ’å…¥ä¸€æ¡æ•°æ®æ’å…¥ä¸€æ¡æ•°æ®ä»£ç å¦‚ä¸‹insert into è¡¨å values (æ’å…¥çš„å€¼);æ’å…¥ä¸€æ¡æ•°æ®ï¼Œä»£ç å¦‚ä¸‹insert into user values (2,'haha');4.3 æ›´æ”¹ä¸€æ¡æ•°æ®æ›´æ”¹ä¸€æ¡æ•°æ®ä»£ç å¦‚ä¸‹update è¡¨å set å­—æ®µå = æ–°å€¼ where æ¡ä»¶;æŠŠidä¸º2çš„ç”¨æˆ·åå­—æ”¹ä¸ºlisiï¼Œä»£ç å¦‚ä¸‹update user set `name` = 'lisi' where id = 2;4.4 åˆ é™¤ä¸€æ¡æ•°æ®åˆ é™¤ä¸€æ¡æ•°æ®ä»£ç å¦‚ä¸‹delete from è¡¨å where æ¡ä»¶;æˆ‘ä»¬æŠŠidä¸º2çš„ç”¨æˆ·åˆ é™¤æ‰ï¼Œä»£ç å¦‚ä¸‹delete from user where id = 2;4.5 æ¸…ç©ºæŸä¸€è¡¨çš„æ•°æ®æ¸…ç©ºä¸€ä¸ªè¡¨çš„æ•°æ®ä»£ç å¦‚ä¸‹truncate table è¡¨å;æˆ‘ä»¬æ¸…ç©ºuserè¡¨ï¼Œä»£ç å¦‚ä¸‹truncate table user;4.6 åˆ é™¤æŸå¼ è¡¨ä»£ç å¦‚ä¸‹drop table è¡¨å;åˆ é™¤æˆ‘ä»¬åˆ›å»ºçš„userè¡¨drop table user;äº”ã€MySQLæ•°æ®åº“çš„å¤‡ä»½ä¸æ¢å¤å®é™…ä¸Šï¼ŒMySQLç»™æˆ‘ä»¬æä¾›äº†å¤‡ä»½æ•°æ®å’Œæ¢å¤æ•°æ®çš„åŠŸèƒ½ã€‚é€€å‡ºmysqlå‘½ä»¤è¡Œæ§åˆ¶å°ï¼Œè¿›å…¥åˆ°ç³»ç»Ÿå‘½ä»¤æ§åˆ¶å°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨mysqldumpå‘½ä»¤å¯¹æ•°æ®åº“è¿›è¡Œå¤‡ä»½ï¼Œè¿˜å¯ä»¥ç”¨mysqlå‘½ä»¤å¯¹æ•°æ®åº“è¿›è¡Œæ¢å¤ã€‚5.1 ï¼­ySQLæ•°æ®å¤‡ä»½å°†db_teståº“å¤‡ä»½åˆ°db_test.sqlæ–‡ä»¶ä¸­ï¼Œä»£ç å¦‚ä¸‹mysqldump -uroot -p db_test &gt; db_test.sql5.2 ï¼­ySQLæ•°æ®æ¢å¤è®²db_test.sqlæ•°æ®æ¢å¤åˆ°db_newæ•°æ®åº“ä¸­ï¼Œä»£ç å¦‚ä¸‹mysql -uroot -p db_new &lt; db_test.sqlå…­ã€æ€»ç»“é€šè¿‡æ­¤åšå®¢ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå­¦ä¼šäº†MySQLæ•°æ®åº“çš„åŸºæœ¬æ“ä½œï¼Œä¸è¿‡ï¼Œä¸è¦é«˜å…´çš„å¤ªæ—©ï¼Œå®é™…ä¸ŠMySQLçš„çŸ¥è¯†ä¸ä»…ä»…è¿™äº›ã€‚MySQLä¼šé•¿æœŸæ›´æ–°ï¼Œæ¯æ¬¡æ›´æ–°éƒ½ä¼šå¸¦æ¥æ–°ç‰¹æ€§ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­å­¦ä¹ ä¸å·©å›ºï¼Œå…¥é—¨å­¦ä¹ æ—¶é—´çŸ­ï¼Œä½†æ˜¯å¿˜çš„ä¹Ÿå¿«ã€‚åªæœ‰ä¸æ–­é‡å¤ä½¿ç”¨æ—§çŸ¥è¯†ä¸å­¦ä¹ æ–°çŸ¥è¯†ï¼Œæˆ‘ä»¬æ‰èƒ½åˆ°è¾¾ç†Ÿç»ƒã€‚å­¦ä¹ æœ¬æ¥å°±æ˜¯è¿™æ ·çš„ï¼Œä¸æ˜¯ä¸€ä¸¤å¤©çš„äº‹ï¼Œå¯ä»¥è¯´æ˜¯å‡ ä¸ªæœˆï¼Œæˆ–è€…å‡ å¹´ï¼Œç”šè‡³ä¸€è¾ˆå­ã€‚åªæœ‰åšæŒæ‰ä¼šæœ‰æ”¶è·ï¼" }, { "title": "å¦‚ä½•åœ¨Windowsä¸Šå®‰è£…å’Œä½¿ç”¨MySQL8.0æ•°æ®åº“", "url": "/posts/database_install-mysql8-on-windows.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:35:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-03-31 17:06ï¼Œæ•´ç†æ—¶é—´ï¼š2023.01.28å¦‚ä½•åœ¨Windowså®‰è£…å’Œä½¿ç”¨MySQL 8.0æ•°æ®åº“ï¼šä¸€ã€ç®€ä»‹ä¹‹å‰ï¼Œæˆ‘åˆ†äº«äº†ã€Šå¦‚ä½•åœ¨LinuxæœåŠ¡å™¨ä¸Šå®‰è£…MySQL 8.0æ•°æ®åº“ã€‹ï¼Œæ•™ç¨‹é“¾æ¥ï¼šhttps://www.bilibili.com/video/av48488984ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹å¦‚ä½•åœ¨windowsä¸Šå®‰è£…å’Œä½¿ç”¨MySQL 8.0æ•°æ®åº“ï¼ŒMySQL...", "content": " æ’°å†™æ—¶é—´ï¼š2019-03-31 17:06ï¼Œæ•´ç†æ—¶é—´ï¼š2023.01.28å¦‚ä½•åœ¨Windowså®‰è£…å’Œä½¿ç”¨MySQL 8.0æ•°æ®åº“ï¼šä¸€ã€ç®€ä»‹ä¹‹å‰ï¼Œæˆ‘åˆ†äº«äº†ã€Šå¦‚ä½•åœ¨LinuxæœåŠ¡å™¨ä¸Šå®‰è£…MySQL 8.0æ•°æ®åº“ã€‹ï¼Œæ•™ç¨‹é“¾æ¥ï¼šhttps://www.bilibili.com/video/av48488984ï¼Œä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹å¦‚ä½•åœ¨windowsä¸Šå®‰è£…å’Œä½¿ç”¨MySQL 8.0æ•°æ®åº“ï¼ŒMySQLå®˜æ–¹ç»™æˆ‘ä»¬æä¾›ä¸¤ç§å®‰è£…åŒ…ï¼š1.exeå¯æ‰§è¡Œå®‰è£…åŒ…è¿™ä¸ªç±»å‹çš„å®‰è£…åŒ…ä¹Ÿå°±æ˜¯å›¾å½¢åŒ–å®‰è£…åŒ…ï¼Œå¾ˆç®€å•ï¼Œç¨‹åºä¼šé»˜è®¤å®‰è£…åˆ°Windowsçš„ç¨‹åºé»˜è®¤å®‰è£…ç›®å½•ã€‚ä¹Ÿå°±æ˜¯C:\\Program Files\\æˆ–è€…C:\\Program Files (x86)\\ã€‚2.zipå‹ç¼©åŒ…å®˜æ–¹å°†å·²ç»ç¼–è¯‘å¥½äº†çš„MySQLå¯æ‰§è¡Œç¨‹åºæ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªzipæ ¼å¼çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨å®‰è£…æ—¶å¯ä»¥ç›´æ¥è§£å‹åˆ°ç”µè„‘æ–‡ä»¶ç›®å½•ä¸Šã€‚å› ä¸ºexeå¯æ‰§è¡Œå®‰è£…åŒ…çš„å®‰è£…æ–¹å¼æ¯”è¾ƒç®€å•ï¼Œç›´æ¥æ ¹æ®æç¤ºä¸€è·¯çš„â€œä¸‹ä¸€æ­¥â€å°±å®Œæˆäº†ï¼Œä»Šå¤©ç»™å¤§å®¶æ¼”ç¤ºzipå‹ç¼©åŒ…çš„å®‰è£…æ–¹å¼ã€‚ä¸‰ã€å·¥å…· Windows 10 MySQL 8.0.15å››ã€å®‰è£…æ­¥éª¤ï¼ˆ1ï¼‰è§£å‹å®‰è£…åŒ…åˆ°å®‰è£…ç›®å½•ï¼ˆ2ï¼‰åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆ3ï¼‰é€‰æ‹©MySQLæœåŠ¡å™¨ç±»å‹ï¼ˆ4ï¼‰åˆå§‹åŒ–æ•°æ®ç›®å½•ï¼ˆ5ï¼‰ç¬¬ä¸€æ¬¡å¯åŠ¨MySQLæœåŠ¡å™¨ï¼ˆ6ï¼‰é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨å’Œå…³é—­MySQLæœåŠ¡ï¼ˆ7ï¼‰å°†MySQLè‡ªå¸¦å·¥å…·æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€éå¿…é¡»é€‰æ“ä½œã€‘ï¼ˆ8ï¼‰å°†MySQLæ³¨å†Œä¸ºä¸ºWindowsçš„æœåŠ¡ã€éå¿…é¡»é€‰æ“ä½œã€‘ï¼ˆ9ï¼‰æµ‹è¯•ä½ å®‰è£…MySQLæœåŠ¡ã€éå¿…é¡»é€‰æ“ä½œã€‘ï¼ˆ10ï¼‰æ›´æ”¹æ•°æ®åº“è´¦å·éªŒè¯æ–¹å¼ä¸å¯†ç åŠ å¯†æ–¹å¼ã€éå¿…é¡»é€‰æ“ä½œã€‘äº”ã€å®‰è£…è¿‡ç¨‹å®‰è£…ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä¸‹è½½å®‰è£…åŒ…ï¼Œå¦‚å›¾æ‰€ç¤ºï¼šä¸‹è½½é“¾æ¥ï¼šhttps://dev.mysql.com/downloads/mysql/5.1 è§£å‹å®‰è£…åŒ…åˆ°å®‰è£…ç›®å½•å› ä¸ºæˆ‘ä»¬æ˜¯å…¨æ–°å®‰è£…ï¼Œæ‰€ä»¥ä¸è€ƒè™‘å…¶ä»–æƒ…å†µï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠè§£å‹ä¹‹åçš„å†…å®¹æ”¾åœ¨C:\\mysqlï¼Œå½“ç„¶ï¼Œä½ å¯ä»¥é€‰æ‹©å…¶ä»–åˆç†çš„ç›®å½•ï¼ˆæ³¨æ„ï¼šé¿å…ä¸­æ–‡ç›®å½•ï¼‰ï¼›æœ‰çš„è§£å‹å·¥å…·è§£å‹ä¹‹åä¼šæœ‰ä¸¤å±‚ç›®å½•ï¼Œç›´æ¥æŠŠé‡Œé¢é‚£å±‚æå–å‡ºæ¥é‡å‘½åå³å¯ï¼›5.2 åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶å¦‚æœä½ æƒ³åœ¨è¿è¡ŒMySQLæ•°æ®åº“æœåŠ¡çš„æ—¶å€™æŒ‡å®šä¸€äº›å‚æ•°ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­å£°æ˜ï¼Œæˆ–è€…ä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥ä»£æ›¿ï¼ŒMySQLæœåŠ¡åœ¨è¿è¡Œçš„æ—¶å€™ä¼šå»è¯»å–é…ç½®æ–‡ä»¶çš„å†…å®¹ã€‚å½“ç„¶äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼æŒ‡å®šè¿è¡Œæ—¶çš„ä¸€äº›å‚æ•°æ˜¯æœ€æ–¹ä¾¿çš„ã€‚å½“MySQLåœ¨Windowsä¸­å¯åŠ¨æ—¶ï¼Œå®ƒä¼šä»å¤šä¸ªåœ°æ–¹æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚C:\\è¿˜æœ‰MySQLçš„å®‰è£…ç›®å½•ã€‚MySQLä¼šå¯»æ‰¾åä¸ºmy.iniçš„æ–‡æœ¬é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å†²çªï¼Œæœ€å¥½åªä½¿ç”¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬çš„å®‰è£…ç›®å½•åœ¨C:\\mysqlï¼Œæ•°æ®çš„ä¿å­˜ä¿å­˜ç›®å½•åœ¨C:\\mysql\\dataï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨mysqlå®‰è£…ç›®å½•åˆ›å»ºä¸€ä¸ªmy.iniæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å·¥å…·ï¼ˆå¦‚Notepad++å®šä¹‰ï¼‰æˆ‘ä»¬çš„å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª[mysqld]èŠ‚ç‚¹ï¼Œå¹¶å†™å…¥å¦‚ä¸‹å†…å®¹[mysqld]# æŒ‡å®šmysqlçš„å®‰è£…ç›®å½•basedir=C:/mysql# æŒ‡å®šæ•°æ®ä¿å­˜çš„ç›®å½•datadir=C:/mysql/dataåæ–œæ ï¼ˆ/ï¼‰æ˜¯Unixé£æ ¼çš„ç›®å½•åˆ†å‰²ç¬¦å·ï¼ŒMySQLä¼šè¯†åˆ«å¹¶è§£æï¼Œä½ å¯ä»¥ä½¿ç”¨Windowsçš„æ–‡ä»¶è·¯å¾„åˆ†å‰²ç¬¦å·â€“æ–œæ ï¼ˆ\\ï¼‰ï¼Œä½†æ˜¯å®˜æ–¹è¯´æ˜çš„æ˜¯ï¼Œä¸€å®šè¦ä½¿ç”¨åŒæ–œæ ï¼Œå¦‚ä¸‹å†…å®¹[mysqld]# æŒ‡å®šmysqlçš„å®‰è£…ç›®å½•basedir=C:\\\\mysql# æŒ‡å®šæ•°æ®ä¿å­˜çš„ç›®å½•datadir=C:\\\\mysql\\\\data5.3 äº†è§£æœåŠ¡æ–‡ä»¶ç±»å‹ä¸‹è¡¨æ˜¯MySQL 8.0ç³»åˆ—ä¸­Windowsçš„å¯ç”¨æœåŠ¡å™¨ï¼š äºŒè¿›åˆ¶æ–‡ä»¶å mæè¿° mysqld æ”¯æŒå‘½åç®¡é“çš„ç»è¿‡ä¼˜åŒ–çš„äºŒè¿›åˆ¶æ–‡ä»¶ mysqld-debug å’Œmysqldä¸€æ ·ï¼Œä½†æ˜¯ä½¿ç”¨å®Œå…¨debugå’Œå†…å­˜è‡ªåŠ¨æ£€æŸ¥æ–¹å¼æ¥ç¼–è¯‘ æˆ‘ä»¬è¿™ä¸€æ­¥æš‚æ—¶ä¸éœ€è¦åšä»€ä¹ˆï¼Œéœ€è¦äº†è§£ä¸€ä¸‹å°±è¡Œäº†5.4 åˆå§‹åŒ–æ•°æ®ä½¿ç”¨exeå¯æ‰§è¡Œæ–‡ä»¶å®‰è£…æ—¶ï¼Œæ•°æ®åº“åˆå§‹åŒ–æ˜¯è‡ªåŠ¨çš„ã€‚ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨zipå‹ç¼©åŒ…æ¥å®‰è£…MySQLæ˜¯æ²¡æœ‰é»˜è®¤çš„æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åˆå§‹åŒ–ä¸€ä¸‹MySQLçš„æ•°æ®ã€‚æˆ‘ä»¬éœ€æ‰“å¼€Windowsè‡ªå¸¦çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶ä¸”è¿›å…¥MySQLçš„å®‰è£…ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤bin\\mysqld --defaults-file=C:\\mysql\\my.ini --initialize --consoleç›¸å…³åˆå§‹åŒ–å‚æ•°è¯´æ˜ï¼š --defaults-fileï¼šæŒ‡å®šæˆ‘ä»¬é…ç½®æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢æ­¥éª¤ä¸­æŠŠé…ç½®æ–‡ä»¶my.iniæ”¾åœ¨åœ¨å®‰è£…ç›®å½•ä¸­ï¼Œæ‰€ä»¥è¿™é‡Œçš„å‚æ•°å€¼æ˜¯ C:\\my.ini --initializeï¼šè¿›è¡ŒMySQLåˆå§‹åŒ–ï¼Œåˆå§‹åŒ–è¿‡ç¨‹ä¼šrootç”¨æˆ·ç”Ÿæˆå¯ç”¨äºæœ¬åœ°ç™»å½•çš„éšæœºå¯†ç ï¼Œä½ éœ€è¦è®°ä½è¿™ä¸ªå¯†ç  --initialize-insecureï¼šä½¿ç”¨ä¸å®‰å…¨çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œä½¿ç”¨è¿™ä¸ªå‚æ•°ä¸ä¼šç”Ÿæˆéšæœºå¯†ç ï¼Œä¸ä¸Šmainçš„--initializeäºŒé€‰ä¸€å³å¯ --consoleï¼šè¿™ä¸ªå‚æ•°ä»£è¡¨mysqldåœ¨æ§åˆ¶å°è¿è¡Œ 5.5 ç¬¬ä¸€æ¬¡å¯åŠ¨MySQLæœåŠ¡å™¨ æ³¨æ„:å¿…é¡»å…ˆå®Œæˆåˆå§‹åŒ–æ‰èƒ½å¯åŠ¨MySQL å¯åŠ¨MySQLæœåŠ¡å™¨é€šè¿‡msqldå‘½ä»¤å¯åŠ¨æœåŠ¡C:\\&gt; \"C:\\mysql\\bin\\mysqld\" --console æˆ‘ä»¬åœ¨è°ƒç”¨å‘½ä»¤æ˜¯ä½¿ç”¨äº†åŒå¼•å·ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨ï¼Œä½†å¦‚æœç›®å½•ä¸­å­˜åœ¨ç©ºæ ¼ï¼Œä¸€å®šç”¨åŒå¼•å· ä½¿ç”¨rootè´¦å·ç™»å½•é€šè¿‡ä½¿ç”¨--initializeæˆ–-initialize-insecureåˆå§‹åŒ–ä¹‹åï¼Œå¯ä»¥æ­£å¸¸å¯åŠ¨æœåŠ¡å™¨ï¼Œæˆ‘ä»¬éœ€è¦ç»™'root'@'localhost'å¸æˆ·åˆ†é…æ–°å¯†ç ï¼Œå¦‚æœä¸ä¿®æ”¹å¯†ç ï¼ŒMySQLæœåŠ¡æ˜¯ä¸èƒ½æ­£å¸¸ä½¿ç”¨çš„å¦‚æœä½¿ç”¨--initializeåˆå§‹åŒ–æ•°æ®åº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¾“å…¥éšæœºç”Ÿæˆçš„å¯†ç ï¼šbin\\mysql -u root -p å¦‚æœä½¿ç”¨-initialize-insecureåˆå§‹åŒ–æ•°æ®åº“ç›®å½•ï¼Œæˆ‘ä»¬åœ¨rootæ²¡æœ‰å¯†ç çš„æƒ…å†µä¸‹ç™»å½•mysql -u root --skip-password è¿æ¥æ•°æ®åº“ä¹‹åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹å¯†ç ALTER USER 'root'@'localhost' IDENTIFIED BY 'ä½ çš„å¯†ç ';å…­ã€é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨å’Œå…³é—­MySQLæœåŠ¡ä¸‹é¢æˆ‘ä»¬ä»‹ç»å¯åŠ¨å’Œå…³é—­æœåŠ¡çš„å‘½ä»¤æˆ‘ä»¬å¯ä»¥ä»æ§åˆ¶å°çª—å£å¯åŠ¨æœåŠ¡ï¼Œå¦‚ä¸‹ï¼šC:\\&gt; \"C:\\mysql\\bin\\mysqld\"æˆ‘ä»¬å¯ä»¥ä»æ§åˆ¶å°çª—å£å…³é—­æœåŠ¡ï¼Œå¦‚ä¸‹ï¼Œè¾“å…¥å¯†ç åæœåŠ¡å°±è¢«å…³é—­C:\\&gt; \"C:\\mysql\\bin\\mysqladmin\" -u root shutdown -på¦‚æœrootè´¦å·æ²¡æœ‰å¯†ç ï¼Œä¸éœ€è¦åŠ -på‚æ•°ä¸ƒã€å°†MySQLè‡ªå¸¦å·¥å…·æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€éå¿…é¡»é€‰æ“ä½œã€‘è¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œå°†MySQLè‡ªå¸¦å·¥å…·æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ä¸­æˆ‘ä»¬ä¼šæ›´æ–¹ä¾¿ä»å‘½ä»¤è¡Œçª—å£è°ƒç”¨ã€‚æ“ä½œæ­¥éª¤ä¸ºï¼šåœ¨æ¡Œé¢å³é”®å•å‡»â€œ æˆ‘çš„ç”µè„‘â€å›¾æ ‡ï¼Œç„¶åé€‰æ‹©â€œ å±æ€§â€-&gt;â€œç³»ç»Ÿå±æ€§â€-&gt;â€œé«˜çº§â€-&gt;â€œç¯å¢ƒå˜é‡â€-&gt;â€œç³»ç»Ÿå˜é‡â€ï¼Œç¼–è¾‘ â€œPATHâ€ å˜é‡ï¼Œæ·»åŠ mysqlå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•ç»å¯¹è·¯å¾„å³å¯ã€‚å…«ã€å°†MySQLæ³¨å†Œä¸ºä¸ºWindowsçš„æœåŠ¡ã€éå¿…é¡»é€‰æ“ä½œã€‘è¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†MySQLæ³¨å†Œä¸ºwindowsæœåŠ¡ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä»¥å›¾å½¢åŒ–æ–¹å¼è¿›è¡Œå¯åŠ¨ç®¡ç†ã€‚ä¹Ÿå¯ä»¥éšæ—¶ç§»é™¤ï¼Œä½†æ˜¯åœ¨æ“ä½œå‰ï¼Œä¸€å®šè¦åœæ­¢MySQLæœåŠ¡ã€‚åŒæ—¶ï¼Œæ‰§è¡Œä¸‹é¢æ“ä½œéœ€è¦Windowsç®¡ç†å‘˜æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç®¡ç†å‘˜èº«ä»½æ‰“å¼€å‘½ä»¤è¡Œã€‚ æ³¨å†ŒæœåŠ¡C:\\&gt; \"C:\\mysql\\bin\\mysqld\" --install mysql --defaults-file=\"C:\\mysql\\my.ini\" ç§»é™¤æœåŠ¡C:\\&gt; SC DELETE mysqlC:\\&gt; \"C:\\mysql\\bin\\mysqld\" --removeä¹ã€æµ‹è¯•æœåŠ¡å™¨ã€å¯é€‰ã€‘è¿™éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œä½ å¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹ä»»ä½•å‘½ä»¤æ¥æµ‹è¯•MySQLæœåŠ¡å™¨æ˜¯å¦æ­£å¸¸å·¥ä½œC:\\&gt; \"C:\\mysql\\bin\\mysqlshow\"C:\\&gt; \"C:\\mysql\\bin\\mysqlshow\" -u root mysqlC:\\&gt; \"C:\\mysql\\bin\\mysqladmin\" version status procC:\\&gt; \"C:\\mysql\\bin\\mysql\" teståã€æ›´æ”¹æ•°æ®åº“è´¦å·éªŒè¯æ–¹å¼ä¸å¯†ç åŠ å¯†æ–¹å¼ã€éå¿…é¡»é€‰æ“ä½œã€‘è¿™éƒ¨åˆ†æ˜¯ä¹Ÿæ˜¯éå¿…é¡»çš„æ“ä½œï¼Œåœ¨MySQL 8.0ç³»åˆ—ä¸­ï¼Œé»˜è®¤çš„èº«ä»½éªŒè¯æ’ä»¶å·²å°†mysql_native_passwordæ›´æ”¹ä¸ºcaching_sha2_passwordï¼Œå¹¶ä¸”åœ¨ 'root'@'localhost'ç®¡ç†å¸æˆ·ä¸­é»˜è®¤ä½¿ç”¨caching_sha2_passwordéªŒè¯æ–¹å¼ã€‚äºŒåœ¨æ’°å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå¾ˆå¤šå¼€æºç¨‹åºå¦‚wordpressã€typechoæ˜¯ä¸å¯ä»¥ç›´æ¥è¿æ¥çš„ï¼Œæ‰€ä»¥ä½¿ç”¨MySQL8.0æ•°æ®åº“ï¼Œä½ å¯ä»¥æ›´æ”¹é»˜è®¤éªŒè¯æ–¹å¼ï¼Œä½ è¿˜å¯ä»¥æ–°å»ºä¸€ä¸ªä¸“é—¨ç”¨äºä½ é¡¹ç›®å¼€å‘çš„ä¸€ä¸ªæ•°æ®åº“è´¦å·ï¼Œå¹¶ä½¿ç”¨mysql_native_passwordéªŒè¯æ–¹å¼ã€‚ä»¥ä¸‹æ›´æ”¹rootç”¨æˆ·çš„éªŒè¯æ–¹å¼çš„å‘½ä»¤ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'å¯†ç ';ç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œé»˜è®¤æƒ…å†µä¸‹MySQL 8.0ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·é»˜è®¤ä¹Ÿæ˜¯ä¸èƒ½è¿æ¥çš„ï¼Œå¦‚æœæœ‰éœ€è¦ï¼Œä½ éœ€è¦æ›´æ”¹ä¸€ä¸‹å¯†ç çš„åŠ å¯†æ–¹å¼ALTER USER 'root'@'localhost' IDENTIFIED BY 'å¯†ç ' PASSWORD EXPIRE NEVER;å¦‚æœä½ æƒ³åŒæ—¶æ›´æ”¹å¯†ç éªŒè¯æ–¹å¼å’ŒåŠ å¯†æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'å¯†ç ' PASSWORD EXPIRE NEVER; åŸåˆ›ç¦æ­¢è½¬è½½ï¼Œå‚è€ƒï¼šhttps://dev.mysql.com/doc/refman/8.0/en/windows-install-archive.html" }, { "title": "ä½¿ç”¨åŸç”ŸJDBCå¼€å‘é¡¹ç›®ä¼šæœ‰ä»€ä¹ˆé—®é¢˜", "url": "/posts/database_what-is-the-problem-using-jdbc.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:33:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-08-10 10:49ï¼Œæ›´æ–°æ—¶é—´ï¼š2022-07-12æˆ‘ä»¬åœ¨å¼€å‘Javaé¡¹ç›®çš„æ—¶å€™ï¼Œå¾€å¾€åŸºäºä¸€äº›å¼€æºçš„æ¡†æ¶è¿›è¡Œå¼€å‘ã€‚å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼ˆCURDï¼‰çš„æ—¶å€™æˆ‘ä»¬é€šå¸¸ä¼šåŸºäºå¦‚myBatisç­‰æ¡†æ¶è¿›è¡Œå¼€å‘ã€‚é‚£ä¹ˆè¿™é‡Œæ€»ç»“ä¸€ä¸‹ä½¿ç”¨åŸç”ŸJDBCå­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚ æ•°æ®åº“ä½¿ç”¨æ—¶å°±è¿æ¥ï¼Œä¸ä½¿ç”¨å°±ç«‹å³é‡Šæ”¾ï¼Œå¯¹æ•°æ®é¢‘ç¹å¼€å¯è¿æ¥ä¸å…³é—­è¿æ¥ï¼Œé€ æˆæ•°æ®åº“èµ„æºæµªè´¹ï¼Œå½±å“æ•°æ®åº“æ€§...", "content": " æ’°å†™æ—¶é—´ï¼š2018-08-10 10:49ï¼Œæ›´æ–°æ—¶é—´ï¼š2022-07-12æˆ‘ä»¬åœ¨å¼€å‘Javaé¡¹ç›®çš„æ—¶å€™ï¼Œå¾€å¾€åŸºäºä¸€äº›å¼€æºçš„æ¡†æ¶è¿›è¡Œå¼€å‘ã€‚å¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼ˆCURDï¼‰çš„æ—¶å€™æˆ‘ä»¬é€šå¸¸ä¼šåŸºäºå¦‚myBatisç­‰æ¡†æ¶è¿›è¡Œå¼€å‘ã€‚é‚£ä¹ˆè¿™é‡Œæ€»ç»“ä¸€ä¸‹ä½¿ç”¨åŸç”ŸJDBCå­˜åœ¨çš„ä¸€äº›é—®é¢˜ã€‚ æ•°æ®åº“ä½¿ç”¨æ—¶å°±è¿æ¥ï¼Œä¸ä½¿ç”¨å°±ç«‹å³é‡Šæ”¾ï¼Œå¯¹æ•°æ®é¢‘ç¹å¼€å¯è¿æ¥ä¸å…³é—­è¿æ¥ï¼Œé€ æˆæ•°æ®åº“èµ„æºæµªè´¹ï¼Œå½±å“æ•°æ®åº“æ€§èƒ½ï¼›è§£å†³åŠæ³•ï¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ç®¡ç†æ•°æ®åº“è¿æ¥ï¼› SQLè¯­å¥ç¡¬ç¼–ç åœ¨Javaä»£ç ä¸­ï¼Œå¦‚æœSQLè¯­å¥éœ€è¦æ›´æ”¹ï¼Œéœ€è¦é‡ç¼–è¯‘Javaä»£ç ï¼Œä¸åˆ©äºç»´æŠ¤ï¼›è§£å†³åŠæ³•ï¼šå°†SQLè¯­å¥é…ç½®åœ¨XMLæ–‡ä»¶ä¸­ï¼Œå³ä½¿SQLå˜åŒ–ï¼Œä¸éœ€è¦å¯¹Javaä»£ç è¿›è¡Œé‡ç¼–è¯‘ã€‚ å‘PreparedStatementä¸­è®¾ç½®å‚æ•°ï¼Œå¯¹å ä½ç¬¦å·ä½ç½®å’Œè®¾ç½®å‚æ•°å€¼ç¡¬ç¼–ç åœ¨Javaä»£ç ä¸­ï¼Œä¸åˆ©äºç³»ç»Ÿç»´æŠ¤ï¼›è§£å†³åŠæ³•ï¼šå°†SQLè¯­å¥åŠå ä½ç¬¦å·å’Œå‚æ•°å…¨éƒ¨é…ç½®åœ¨XMLæ–‡ä»¶ä¸­ï¼› ä»resultSetä¸­éå†ç»“æœé›†æ•°æ®æ—¶ï¼Œå­˜åœ¨ç¡¬ç¼–ç ï¼Œå°†è·å–è¡¨çš„å­—æ®µè¿›è¡Œç¡¬ç¼–ç ï¼Œä¸åˆ©äºç³»ç»Ÿç»´æŠ¤ï¼›è§£å†³åŠæ³•ï¼šå°†æŸ¥è¯¢çš„ç»“æœé›†ï¼Œè‡ªåŠ¨æ˜ å°„æˆJavaå¯¹è±¡ã€‚ ç„¶è€Œï¼Œå¾ˆå¤šæ¡†æ¶å¸®åŠ©æˆ‘ä»¬è§£å†³äº†è¿™äº›é—®é¢˜ï¼Œè¿™ä¹Ÿå°±æ˜¯åœ¨å®é™…è½¯ä»¶é¡¹ç›®å¼€å‘ä¸­ï¼Œå¾ˆå¤šå·¥ç¨‹å¸ˆå–œæ¬¢åŸºäºå¼€æºæ¡†æ¶è¿›è¡Œé¡¹ç›®å¼€å‘çš„åŸå› äº†ã€‚æ‰€ä»¥è¯´å¤§å®¶å¥½å¥½å­¦ä¹ æ¡†æ¶æ˜¯æœ‰å¿…è¦çš„ã€‚" }, { "title": "åœ¨Linuxä¸Šä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…åŒ…å®‰è£…MySQL8.0", "url": "/posts/database_install-mysql-on-linux-using-binary.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:25:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-06-30 14:48ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€ç¯å¢ƒç»§MySQL 5.7ä¹‹åï¼Œç›´æ¥è·³åˆ°äº†MySQL 8.0ï¼Œå®˜æ–¹è¯´è¿™æ¬¡æ¥äº†ä¸ªå¤§å‡çº§ï¼Œå…¶ä»–çš„ä¸è¯´ï¼Œå°±æŸ¥è¯¢é€Ÿåº¦æ˜¯5.7çš„2å€ï¼Œå› æ­¤æˆ‘ä¹Ÿå°è¯•å®‰è£…ä½¿ç”¨ï¼Œæˆ‘çš„Linuxç‰ˆæœ¬æ˜¯ Ubuntu 16.04ï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å®‰è£…çš„è¿‡ç¨‹äºŒã€å®‰è£…è¿‡ç¨‹2.1 ä¸‹è½½å®‰è£…åŒ…MySQLæœ€æ–°ä¸‹è½½åœ°å€ï¼šhttps://dev.mysql....", "content": " æ’°å†™æ—¶é—´ï¼š2018-06-30 14:48ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€ç¯å¢ƒç»§MySQL 5.7ä¹‹åï¼Œç›´æ¥è·³åˆ°äº†MySQL 8.0ï¼Œå®˜æ–¹è¯´è¿™æ¬¡æ¥äº†ä¸ªå¤§å‡çº§ï¼Œå…¶ä»–çš„ä¸è¯´ï¼Œå°±æŸ¥è¯¢é€Ÿåº¦æ˜¯5.7çš„2å€ï¼Œå› æ­¤æˆ‘ä¹Ÿå°è¯•å®‰è£…ä½¿ç”¨ï¼Œæˆ‘çš„Linuxç‰ˆæœ¬æ˜¯ Ubuntu 16.04ï¼Œæ ¹æ®å®˜æ–¹æ–‡æ¡£ï¼Œä¸‹é¢æ˜¯å®‰è£…çš„è¿‡ç¨‹äºŒã€å®‰è£…è¿‡ç¨‹2.1 ä¸‹è½½å®‰è£…åŒ…MySQLæœ€æ–°ä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/mysql/é€‰æ‹©çš„æ˜¯Linux 64ä½é€šç”¨çš„äºŒçº§åˆ¶ç‰ˆæœ¬ï¼Œè¿™æ ·ä¸åœ¨éœ€è¦è¿›è¡Œç¼–è¯‘å®‰è£…ï¼Œç³»ç»Ÿå®‰è£…ä¾èµ–åº“åå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚2.2 å®‰è£…ä¾èµ–åº“å®˜æ–¹è¯´è¦å®‰è£…libaioï¼Œä½†å®é™…å¦‚æœä½ å®‰è£…libaioåº“çš„è¯ä¸è¡Œï¼Œè¿˜éœ€å®‰è£…numactlåº“ï¼Œå¦‚ä¸‹apt install numactlapt install libaio-dev2.3 è§£å‹è½¯ä»¶åŒ…åˆ°ç³»ç»Ÿè§£å‹ä¹‹åå°†è½¯ä»¶åŒ…ç§»åŠ¨åˆ°ç³»ç»Ÿä¸­çš„/usr/localç›®å½•ï¼Œå¹¶å‘½åä¸ºmysqltar -zxvf mysql-8.0.11-linux-glibc2.12-x86_64.tar.gzmv mysql-8.0.11-linux-glibc2.12-x86_64 /usr/local/mysql2.4 æ·»åŠ ç”¨æˆ·ã€è®¾ç½®æƒé™groupadd mysqluseradd -r -g mysql -s /bin/false mysqlcd /usr/localcd mysqlmkdir mysql-fileschown mysql:mysql mysql-fileschmod 750 mysql-files2.5 åˆå§‹åŒ–æ•°æ®åº“bin/mysqld --initialize --user=mysqlå¯ä»¥çœ‹åˆ°ç³»ç»Ÿéšæœºç»™rootç”¨æˆ·åˆ†é…äº†ä¸€ä¸ªå¯†ç ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œè¿™ä¸ªå¯†ç è¦è®°ä½ï¼Œæƒ³è¦è‡ªå®šä¹‰åç»­å¯ä»¥æ”¹2.6 å®‰è£…SSLæœåŠ¡æ‰§è¡Œå®‰è£…å‘½ä»¤ä¹‹å‰å…ˆå®‰è£…opensslï¼Œä¸ç„¶ä¼šæŠ¥é”™apt install opensslbin/mysql_ssl_rsa_setup2.7 å¤åˆ¶æœåŠ¡æ–‡ä»¶cp support-files/mysql.server /etc/init.d/mysql.serverä¸‰ã€ä½¿ç”¨MySQL 8.0.113.1 å¼€å¯æœåŠ¡&amp;æ˜¯åå°è¿è¡Œçš„æ„æ€ï¼Œæ‰§è¡Œå‘½ä»¤ä¹‹åï¼Œç»ˆç«¯ä¼šå¡åœ¨ä¸€ä¸ªä½ç½®ï¼Œå†æŒ‰ä¸€ä¸‹Enterå³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºbin/mysqld_safe --user=mysql &amp;3.2 ä½¿ç”¨ç”¨æˆ·rootç™»å½•ä½¿ç”¨åˆšæ‰éšæœºç”Ÿæˆçš„å¯†ç ï¼Œå³å¯è®¡å…¥æ•°æ®åº“bin/mysql -uroot -p3.3 æ›´æ”¹rootç”¨æˆ·å¯†ç ç¬¬ä¸€æ¬¡ä½¿ç”¨éšæœºç™»å½•å¹¶ä¸èƒ½ä½¿ç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ›´æ”¹å¯†ç ï¼Œå¦‚ä¸‹ (1)æ–¹æ¡ˆä¸€ï¼šä¿®æ”¹æœ¬åœ°ç™»å½•å¯†ç ALTER USER 'root'@'localhost' IDENTIFIED BY 'æ–°å¯†ç ';flush privileges; (2)æ–¹æ¡ˆäºŒï¼šä¿®æ”¹å¯†ç ï¼Œå¹¶è®¾ç½®ä¸ºä»»æ„IPä¸ç¬¬ä¸‰æ–¹å®¢æˆ·ç«¯å¯ç™»å½•# ä¿®æ”¹rootçš„å¯†ç ä¸åŠ å¯†æ–¹å¼ALTER USER 'root'@'localhost' IDENTIFIED BY 'å¯†ç ' PASSWORD EXPIRE NEVER;# åˆ‡æ¢åˆ°mysqlåº“use mysql;# æ›´æ”¹å¯ä»¥ç™»å½•çš„IPä¸ºä»»æ„IPupdate user set host='%' where user = 'root';# åˆ·æ–°æƒé™flush privileges;# å†æ¬¡æ›´æ”¹rootç”¨æˆ·å¯†ç ï¼Œä½¿å…¶å¯ä»¥åœ¨ä»»æ„IPè®¿é—®ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY 'å¯†ç ';# åˆ·æ–°æƒé™flush privileges;æ›´æ”¹å¥½ä¹‹åï¼Œé€€å‡ºï¼Œå¹¶ä½¿ç”¨æ–°å¯†ç é‡æ–°ç™»å½•ï¼Œæ•°æ®åº“ä¾¿å¯ä»¥ä½¿ç”¨äº†ï¼" }, { "title": "MySQLæ€æ ·ç»™æ™®é€šç”¨æˆ·åˆ†é…æƒé™ï¼Ÿ", "url": "/posts/database_mysql-grant-permission-to-general-user.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:23:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-05-18ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281ã€ä¸ºä»€ä¹ˆéœ€è¦æ™®é€šæ•°æ®åº“è´¦å·å‡è®¾æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªæ•°æ®åº“çš„MySQLæœåŠ¡ï¼Œå‡å¦‚æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªå•†åŸç½‘ç«™ï¼Œå•†åŸæ•°æ®åº“åä¸ºâ€storeâ€ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨rootç”¨æˆ·å¯¹ç½‘ç«™è¿›è¡Œæ“ä½œçš„ã€‚é€šå¸¸éœ€è¦ä¸“é—¨é’ˆå¯¹è¿™ä¸ªç½‘ç«™ç¨‹åºåˆ†é…ä¸€ä¸ªMySQLç”¨æˆ·ï¼Œä½¿è¿™ä¸ªç”¨æˆ·å¯¹å•†åŸç½‘ç«™æ•°æ®åº“å…·æœ‰æ‰€æœ‰çš„æƒé™ï¼Œè€Œå¯¹å…¶ä»–æ•°æ®åº“æ²¡æœ‰ä»»ä½•æƒé™ï¼Œè¿™æ ·åšä¹Ÿæ˜¯ä¸ºäº†æ•°æ®åº“çš„å®‰å…¨...", "content": " æ’°å†™æ—¶é—´ï¼š2018-05-18ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281ã€ä¸ºä»€ä¹ˆéœ€è¦æ™®é€šæ•°æ®åº“è´¦å·å‡è®¾æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªæ•°æ®åº“çš„MySQLæœåŠ¡ï¼Œå‡å¦‚æˆ‘ä»¬æ­£åœ¨å¼€å‘ä¸€ä¸ªå•†åŸç½‘ç«™ï¼Œå•†åŸæ•°æ®åº“åä¸ºâ€storeâ€ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥ä½¿ç”¨rootç”¨æˆ·å¯¹ç½‘ç«™è¿›è¡Œæ“ä½œçš„ã€‚é€šå¸¸éœ€è¦ä¸“é—¨é’ˆå¯¹è¿™ä¸ªç½‘ç«™ç¨‹åºåˆ†é…ä¸€ä¸ªMySQLç”¨æˆ·ï¼Œä½¿è¿™ä¸ªç”¨æˆ·å¯¹å•†åŸç½‘ç«™æ•°æ®åº“å…·æœ‰æ‰€æœ‰çš„æƒé™ï¼Œè€Œå¯¹å…¶ä»–æ•°æ®åº“æ²¡æœ‰ä»»ä½•æƒé™ï¼Œè¿™æ ·åšä¹Ÿæ˜¯ä¸ºäº†æ•°æ®åº“çš„å®‰å…¨è€ƒè™‘ã€‚é‚£ä¹ˆæˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªâ€storeâ€ç”¨æˆ·ï¼Œå¹¶èµ‹äºˆå®ƒå¯¹storeåº“æ“ä½œçš„æƒé™ã€‚2ã€åˆ›å»ºç”¨æˆ·åˆ›å»ºç”¨æˆ·å‘½ä»¤æ ¼å¼å¦‚ä¸‹create user 'ç”¨æˆ·å'@'å…è®¸è®¿é—®çš„ä¸»æœº' identified by 'å¯†ç '; åˆ›å»ºä¸€ä¸ªåªå…è®¸æœ¬æœºç™»å½•çš„ç”¨æˆ·create user 'store'@'localhost' identified by 'store2018';å¦‚æœå¸Œæœ›ç”¨æˆ·èƒ½åœ¨æ‰€æœ‰ä¸»æœºç™»å½•ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨é€šé…ç¬¦ï¼Œå¦‚ä¸‹ä»£ç :create user 'store'@'%' identified by 'store2018';3ã€æˆäºˆæƒé™(1)æŸ¥çœ‹ç”¨æˆ·æ‰€å…·æœ‰çš„æƒé™ï¼Œæ ¼å¼å¦‚ä¸‹ï¼šshow grants for 'ç”¨æˆ·å'@'ä¸»æœºå';æŸ¥è¯¢storeç”¨æˆ·åœ¨æœ¬åœ°æ‰€å…·æœ‰çš„æƒé™ï¼šshow grants for 'store'@'localhost';ç»“æœå¦‚å›¾æ‰€ç¤ºï¼šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å·²ç»èµ‹äºˆçš„æƒé™åˆ—è¡¨ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢ä»£ç æŸ¥çœ‹storeç”¨æˆ·æ‰€å…·æœ‰çš„æƒé™çš„è¯¦ç»†ä¿¡æ¯ï¼šselect * from mysql.user where user='store' and host='localhost' \\G;ä»¥ä¸Š/G çš„ä½œç”¨æ˜¯å°†æŸ¥åˆ°çš„ç»“æ„æ—‹è½¬90åº¦å˜æˆçºµå‘æ˜¾ç¤ºã€‚(2)èµ‹äºˆç”¨æˆ·æƒé™:æ ¼å¼å¦‚ä¸‹ï¼šgrant æƒé™åˆ—è¡¨ on æ•°æ®åº“åŠå…¶è¡¨å to 'ç”¨æˆ·å'@'ä¸»æœºåœ°å€'; --æƒé™åˆ—è¡¨ï¼šå¤šä¸ªæƒé™ä½¿ç”¨\",\"éš”å¼€ï¼Œèµ‹äºˆæ‰€æœ‰æƒé™æ—¶ç›´æ¥ä½¿ç”¨all--flush privileges; --åˆ·æ–°æƒé™ï¼Œè¿›è¡Œæƒé™æ“ä½œä¹‹åè¦æ‰§è¡Œåˆ·æ–°æƒé™ä»£ç --èµ‹äºˆstoreç”¨æˆ·åœ¨storeåº“çš„æ‰€æœ‰è¡¨ä¸Šå…·æœ‰æ‰€æœ‰æƒé™:grant all on store.* to 'store'@'localhost';flush privileges;æˆ‘ä»¬å†æ¬¡æŸ¥çœ‹storeç”¨æˆ·æ‰€å…·æœ‰çš„æƒé™æ—¶ï¼Œå¯ä»¥çœ‹åˆ°å’Œæœªèµ‹äºˆæƒé™å‰çš„ç»“æœä¸ä¸€æ ·äº†ï¼Œå¦‚ä¸‹å›¾ï¼š4ã€æ€»ç»“MySQLæ™®é€šç”¨æˆ·é€šå¸¸ç”¨äºåœ¨è½¯ä»¶å¼€å‘é¡¹ç›®æ—¶ï¼Œä½¿ç”¨è¯¥ç”¨æˆ·å¯¹æ•°æ®åº“è¿›è¡Œå¢åˆ è¯¥æŸ¥ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å¯¹ç”¨æˆ·æƒé™è¿›è¡Œç›¸åº”çš„ä¿®æ”¹ï¼Œå¦‚æ’¤é”€æƒé™ã€èµ‹äºˆæ›´å¤šçš„æƒé™ï¼Œç­‰ç­‰ã€‚æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚" }, { "title": "æ€æ ·ç†è§£MySQLä¸­çš„å­—ç¬¦é›†å’Œæ ¡å¯¹é›†?", "url": "/posts/database_mysql-charset-and-collate.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:15:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2017-12-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281. æ¦‚è¿°æ— è®ºWebç½‘é¡µè¿˜æ˜¯æ‰‹æœºAPPï¼Œé€šå¸¸ä¼šç”¨åˆ°æ•°æ®åº“ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯MySQLï¼Œå¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´ï¼ŒMySQLå¼€æºå…è´¹ã€ç®€å•å¿«æ·ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªMySQLæ•°æ®åº“çš„æ—¶å€™å£°æ˜çš„å­—ç¬¦é›†å’Œæ ¡å¯¹é›†æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿå‡å¦‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ•°æ®åº“ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹ä»£ç :CREATE DATABASE IF NOT EXIST...", "content": " æ’°å†™æ—¶é—´ï¼š2017-12-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281. æ¦‚è¿°æ— è®ºWebç½‘é¡µè¿˜æ˜¯æ‰‹æœºAPPï¼Œé€šå¸¸ä¼šç”¨åˆ°æ•°æ®åº“ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯MySQLï¼Œå¯¹äºä¸ªäººå¼€å‘è€…æ¥è¯´ï¼ŒMySQLå¼€æºå…è´¹ã€ç®€å•å¿«æ·ã€‚é‚£ä¹ˆæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªMySQLæ•°æ®åº“çš„æ—¶å€™å£°æ˜çš„å­—ç¬¦é›†å’Œæ ¡å¯¹é›†æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿå‡å¦‚æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç”¨æˆ·æ•°æ®åº“ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ä»¥ä¸‹ä»£ç :CREATE DATABASE IF NOT EXISTS `user` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;2. ä»€ä¹ˆæ˜¯å­—ç¬¦é›†å’Œæ ¡å¯¹é›†ä»¥ä¸‹æ˜¯ä¸ªäººç†è§£ï¼Œå¦‚æœ‰ç–‘é—®å’Œå¼‚è®®æ¬¢è¿ç•™è¨€è¯„è®ºï¼š2.1.å­—ç¬¦é›†æˆ‘ä»¬éƒ½çŸ¥é“è®¡ç®—æœºåº•å±‚ä¿å­˜æ•°æ®éƒ½æ˜¯ä»¥äºŒè¿›åˆ¶ä»£ç æ¥è¿›è¡Œä¿å­˜çš„ï¼Œå®é™…ä¸Šå°±æ˜¯0æˆ–è€…1ï¼Œdefault charsetå…³é”®å­—å°±å£°æ˜äº†useråº“é»˜è®¤ä½¿ç”¨utf8ç¼–ç è§„åˆ™æ¥ç¼–ç çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬useråº“ä¸­çš„æ•°æ®ä¼šä»¥utf8ç¼–ç è§„åˆ™æ¥ä¿å­˜ã€‚è‡³äºä»€ä¹ˆæ˜¯utf8ï¼Œæˆ‘ä»¬ç†è§£å®ƒå°±æ˜¯ä¸€ç§é€šç”¨çš„ç¼–ç è§„åˆ™ã€‚2.2.æ ¡å¯¹é›†MySQLä¸­åœ¨åˆ›å»ºæ•°æ®åº“æ—¶ä½¿ç”¨collateå…³é”®å­—æ¥å£°æ˜æ ¡å¯¹é›†ï¼Œä»å­—é¢æ„æ€æ¥çœ‹ï¼Œå°±æ˜¯ç”¨æ¥æ¯”è¾ƒçš„ã€‚å£°æ˜utf8_general_ciæ ¡å¯¹é›†ä¹‹åæ•°æ®åº“ç³»ç»Ÿå°±ä¼šä½¿ç”¨utf8_general_ciè¿™ç§æ ¡å¯¹æ–¹å¼å¯¹æ•°æ®è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬æŸ¥è¯¢çš„æ•°æ®éœ€è¦æ ¹æ®ç”¨æˆ·åè¿›è¡Œæ’åºï¼Œå¦‚ä¸‹ä»£ç ï¼šselect * from user order by username;é‚£ä¹ˆæ•°æ®åº“ç³»ç»Ÿå°±ä¼šæ ¹æ®utf8_general_ciè¿™ç§æ ¡å¯¹è§„åˆ™æ ¹æ®usernameå­—æ®µè¿›è¡Œæ•°æ®æ¯”è¾ƒæ’åºã€‚" }, { "title": "SQL Srverä¸­å¸¸ç”¨çš„çº¦æŸè¯­å¥", "url": "/posts/database_sql-server-constraint.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:13:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€åŸºæœ¬æ¦‚å¿µSQLä¸­æœ‰äº”ç±»å¸¸ç”¨çš„çº¦æŸï¼Œç”¨æ¥å¯¹æŸä¸ªå­—æ®µçš„æ•°æ®è¿›è¡Œçº¦æŸï¼šnot nullï¼šéç©ºçº¦æŸï¼ŒæŒ‡å®šæŸåˆ—ä¸ä¸ºç©ºuniqueï¼šå”¯ä¸€çº¦æŸï¼ŒæŒ‡å®šæŸåˆ—å’Œå‡ åˆ—ç»„åˆçš„æ•°æ®ä¸èƒ½é‡å¤primary keyï¼šä¸»é”®çº¦æŸï¼Œå³éç©ºåŠ ä¸Šå”¯ä¸€foreign keyï¼šå¤–é”®ï¼ŒæŒ‡å®šè¯¥åˆ—è®°å½•å±äºä¸»è¡¨ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå‚ç…§å¦ä¸€æ¡åœ¨ä¸»è¡¨ä¸­çš„æ•°æ®defaultï¼šé»˜è®¤å€¼ï¼Œå½“...", "content": " æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€åŸºæœ¬æ¦‚å¿µSQLä¸­æœ‰äº”ç±»å¸¸ç”¨çš„çº¦æŸï¼Œç”¨æ¥å¯¹æŸä¸ªå­—æ®µçš„æ•°æ®è¿›è¡Œçº¦æŸï¼šnot nullï¼šéç©ºçº¦æŸï¼ŒæŒ‡å®šæŸåˆ—ä¸ä¸ºç©ºuniqueï¼šå”¯ä¸€çº¦æŸï¼ŒæŒ‡å®šæŸåˆ—å’Œå‡ åˆ—ç»„åˆçš„æ•°æ®ä¸èƒ½é‡å¤primary keyï¼šä¸»é”®çº¦æŸï¼Œå³éç©ºåŠ ä¸Šå”¯ä¸€foreign keyï¼šå¤–é”®ï¼ŒæŒ‡å®šè¯¥åˆ—è®°å½•å±äºä¸»è¡¨ä¸­çš„ä¸€æ¡è®°å½•ï¼Œå‚ç…§å¦ä¸€æ¡åœ¨ä¸»è¡¨ä¸­çš„æ•°æ®defaultï¼šé»˜è®¤å€¼ï¼Œå½“æ·»åŠ ä¸€æ¡æ•°æ®è®°å½•æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŸä¸€ä¸ªå­—æ®µæ²¡æœ‰æ’å…¥æ•°æ®ï¼Œåˆ™è‡ªåŠ¨ä¿å­˜é»˜è®¤æ•°æ®checkï¼šæ£€æŸ¥ï¼ŒæŒ‡å®šä¸€ä¸ªè¡¨è¾¾å¼ï¼Œç”¨äºæ£€éªŒæŒ‡å®šæ•°æ®äºŒã€è¯­æ³•2.1 æ·»åŠ ä¸»é”®çº¦æŸalter table è¡¨åadd constraint çº¦æŸå primary key (ä¸»é”®)2.2 æ·»åŠ å”¯ä¸€çº¦æŸalter table è¡¨åadd constraint çº¦æŸå unique (å­—æ®µ)2.3 æ·»åŠ é»˜è®¤çº¦æŸalter table è¡¨åadd constraint çº¦æŸå default ('é»˜è®¤å†…å®¹') for å­—æ®µ2.4 æ·»åŠ æ£€æŸ¥checkçº¦æŸ,è¦æ±‚å­—æ®µåªèƒ½åœ¨1åˆ°100ä¹‹é—´alter table è¡¨åadd constraint çº¦æŸå check (å­—æ®µ between 1 and 100 )2.5 æ·»åŠ å¤–é”®çº¦æŸ(â€œä¸»è¡¨â€å’Œâ€œä»è¡¨â€å»ºç«‹å…³ç³»)alter table ä»è¡¨add constraint çº¦æŸå foreign key(å…³è”å­—æ®µ) references ä¸»è¡¨(å…³è”å­—æ®µ)2.6 æŸ¥çœ‹è¡¨ä¸­çš„æ‰€æœ‰çº¦æŸsp_helpconstraint è¡¨å2.7 åˆ é™¤çº¦æŸalter table è¡¨å drop constraint çº¦æŸåä¸‰ã€ç¤ºä¾‹ä¸‹é¢ä»¥ä»¥ä¸€ä¸ªç®€å•çš„é“¶è¡Œæ•°æ®åº“ä¸­çš„éƒ¨åˆ†è¡¨ä¸ºä¾‹ï¼Œåœ¨å»ºç«‹è¡¨çš„æ—¶å€™æ·»åŠ å¯¹åº”çš„çº¦æŸï¼šcreate table branch( branch_name varchar(20), branch_city varchar(20), assert numeric(8,2), -- æ·»åŠ branchè¡¨çš„ä¸»é”® constraint branch_primary primary key(branch_name))create table loan( loan_number varchar(20), branch_name varchar(20), amount numeric(8,2), -- æ·»åŠ loanè¡¨çš„ä¸»é”® constraint loan_primay primary key (loan_number), -- æ·»åŠ loanè¡¨ä¸­branch_nameçš„å¤–é”®ï¼Œå‚è€ƒbranchä¸»è¡¨ constraint loan_branch_name_foreign foreign key (branch_name) references branch)-- åˆ é™¤loanè¡¨ä¸­çš„å¤–é”®çº¦æŸalter table loan drop constraint loan_branch_name_foreignæœ¬æ–‡åŸåˆ›è‡ªâ€œæå®¢å¼€å‘è€…â€ï¼Œç¦æ­¢è½¬è½½ï¼" }, { "title": "è¶…ç ã€ä¸»ç ã€å€™é€‰ç çš„æ¦‚å¿µä¸åŒºåˆ†", "url": "/posts/database_base-key.html", "categories": "å…³ç³»å‹æ•°æ®åº“", "tags": "", "date": "2023-01-28 15:12:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281ã€ä»€ä¹ˆæ˜¯ç ?ç æ˜¯æ•°æ®ç³»ç»Ÿä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚æ‰€è°“ç å°±æ˜¯èƒ½å”¯ä¸€æ ‡è¯†å®ä½“ï¼ˆæ•°æ®åº“ä¸­çš„å®ä½“ï¼šå¯¹åº”ç°å®ç”Ÿæ´»ä¸­æŸæ ·äº‹ç‰©æˆ–è€…äººç‰©ï¼‰çš„å±æ€§ï¼Œä»–æ˜¯æ•´ä¸ªå®ä½“é›†çš„æ€§è´¨ï¼Œè€Œä¸æ˜¯å•ä¸ªå®ä½“çš„æ€§è´¨ã€‚å®ƒåŒ…æ‹¬è¶…ç ã€å€™é€‰ç ã€ä¸»ç ã€‚ä¸‹é¢æˆ‘ä»¥å­¦ç”Ÿè¡¨ä¸ºä¾‹ï¼Œç»™å¤§å®¶åˆ†äº«æˆ‘å¯¹ç çš„ç†è§£ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå­¦ç”Ÿè¡¨ï¼šstudent(id,student_number,name,sex)ï¼Œå³...", "content": " æ’°å†™æ—¶é—´ï¼š2017-12-10ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-281ã€ä»€ä¹ˆæ˜¯ç ?ç æ˜¯æ•°æ®ç³»ç»Ÿä¸­çš„åŸºæœ¬æ¦‚å¿µã€‚æ‰€è°“ç å°±æ˜¯èƒ½å”¯ä¸€æ ‡è¯†å®ä½“ï¼ˆæ•°æ®åº“ä¸­çš„å®ä½“ï¼šå¯¹åº”ç°å®ç”Ÿæ´»ä¸­æŸæ ·äº‹ç‰©æˆ–è€…äººç‰©ï¼‰çš„å±æ€§ï¼Œä»–æ˜¯æ•´ä¸ªå®ä½“é›†çš„æ€§è´¨ï¼Œè€Œä¸æ˜¯å•ä¸ªå®ä½“çš„æ€§è´¨ã€‚å®ƒåŒ…æ‹¬è¶…ç ã€å€™é€‰ç ã€ä¸»ç ã€‚ä¸‹é¢æˆ‘ä»¥å­¦ç”Ÿè¡¨ä¸ºä¾‹ï¼Œç»™å¤§å®¶åˆ†äº«æˆ‘å¯¹ç çš„ç†è§£ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªå­¦ç”Ÿè¡¨ï¼šstudent(id,student_number,name,sex)ï¼Œå³ï¼šIDã€å­¦å·ã€å§“åã€æ€§åˆ«ï¼Œè¿™é‡Œçš„å®ä½“æ˜¯studentï¼Œå®ä½“çš„å±æ€§æœ‰idã€student_numberã€nameã€sexã€‚2ã€è¶…ç è¶…ç ä¹Ÿå«åšâ€œè¶…çº§ç â€ï¼Œæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§çš„é›†åˆï¼Œè¿™äº›å±æ€§å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªå®ä½“é›†ï¼ˆæ‰€è°“çš„å®ä½“é›†å°±æ˜¯studentè¡¨ä¸­å¤šæ¡è®°å½•çš„é›†åˆï¼‰ä¸­å”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå®ä½“ã€‚å¦‚æœKæ˜¯ä¸€ä¸ªè¶…ç ï¼Œé‚£ä¹ˆKçš„ä»»æ„è¶…é›†ä¹Ÿæ˜¯è¶…ç ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœKæ˜¯è¶…ç ï¼Œé‚£ä¹ˆæ‰€æœ‰åŒ…å«Kçš„é›†åˆä¹Ÿæ˜¯è¶…ç ã€‚ æ‰€è°“è¶…é›†æ˜¯é›†åˆè®ºçš„æœ¯è¯­ï¼ŒA âŠ‡ Bï¼Œåˆ™ A é›†æ˜¯ B çš„è¶…é›†ï¼Œä¹Ÿå°±æ˜¯è¯´ B çš„æ‰€æœ‰å…ƒç´  A é‡Œéƒ½æœ‰ï¼Œä½† A é‡Œçš„å…ƒç´  B å°±æœªå¿…æœ‰2.1 ä¾‹å­å› ä¸ºé€šè¿‡idå¯ä»¥æ‰¾åˆ°å”¯ä¸€ä¸€ä¸ªå­¦ç”Ÿï¼Œæ‰€ä»¥{id}æ˜¯ä¸€ä¸ªè¶…ç ï¼ŒåŒç†{id,student_number}ã€{id,student_number,name}ã€{id,student_number,name,sex}ã€{student_number}ã€{student_number,name}ã€{student_number,name,sex}ä¹Ÿæ˜¯è¶…ç .3ã€å€™é€‰ç è¶…ç åŒ…æ‹¬å€™é€‰ç ï¼Œè™½ç„¶è¶…ç å¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå®ä½“ï¼Œä½†æ˜¯å¯èƒ½å¤§å¤šæ•°è¶…ç ä¸­å«æœ‰å¤šä½™çš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å€™é€‰ç ã€‚è‹¥å…³ç³»ä¸­çš„ä¸€ä¸ªå±æ€§æˆ–å±æ€§ç»„çš„å€¼èƒ½å¤Ÿå”¯ä¸€åœ°æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œä¸”å®ƒçš„çœŸå­é›†ä¸èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼Œåˆ™ç§°è¿™ä¸ªå±æ€§æˆ–å±æ€§ç»„åšå€™é€‰ç ã€‚ å­é›†æ¯”çœŸå­é›†èŒƒå›´å¤§ï¼Œå­é›†æ˜¯åŒ…æ‹¬æœ¬èº«çš„å…ƒç´ çš„é›†åˆï¼ŒçœŸå­é›†æ˜¯é™¤æœ¬èº«çš„å…ƒç´ çš„é›†åˆ3.1 ä¾‹å­åœ¨ä¸Šä¾‹ä¸­ï¼Œåªæœ‰{id}æˆ–è€…{student_number}æ˜¯å€™é€‰ç ã€‚å¦‚æœsexå’Œnameå¯ä»¥å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå­¦ç”Ÿï¼Œåˆ™{nameï¼Œsex}ä¹Ÿä¸ºå€™é€‰ç ï¼Œä½†æ˜¯ï¼Œsexå’Œnameå¹¶ä¸èƒ½å”¯ä¸€æ ‡è¯†ä¸€ä¸ªå­¦ç”Ÿï¼Œè¿™ä¸ç°å®ç”Ÿæ´»æ˜¯è¿åçš„ï¼Œå› ä¸ºç°å®æœ‰åŒååŒå§“çš„äººï¼Œåˆ™{nameï¼Œsex}ä¸èƒ½ä½œä¸ºå€™é€‰ç ã€‚4ã€ä¸»ç ä¸€ä¸ªè¡¨çš„å€™é€‰ç å¯èƒ½æœ‰å¤šä¸ªï¼Œä»è¿™äº›ä¸ªå€™é€‰ç ä¸­é€‰æ‹©ä¸€ä¸ªåšä¸ºä¸»ç ï¼Œè‡³äºé€‰æ‹©å“ªä¸€ä¸ªå€™é€‰ç ï¼Œè¿™ä¸ªæ˜¯æ— æ‰€è°“çš„ï¼Œåªè¦æ˜¯ä»å€™é€‰ç ä¸­é€‰çš„å°±è¡Œã€‚5ã€æ€»ç»“æ‰€æœ‰ç éƒ½æ˜¯ä¸€ä¸ªé›†åˆã€‚æ‰€æœ‰å¯ä»¥ç”¨æ¥åœ¨å®ä½“é›†ä¸­æ ‡è¯†å”¯ä¸€ä¸€ä¸ªå®ä½“çš„é›†åˆï¼Œéƒ½æ˜¯è¶…ç ã€‚å¦‚æœä»»æ„è¶…ç çš„çœŸå­é›†ä¸èƒ½åŒ…æ‹¬è¶…ç ï¼ˆæ¢å¥è¯è¯´å°±æ˜¯ï¼šå®ƒçš„çœŸå­é›†ä¸èƒ½å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªå…ƒç»„ï¼‰ï¼Œåˆ™ç§°å…¶ä¸ºå€™é€‰ç ã€‚è¢«æ•°æ®åº“è®¾è®¡è€…é€‰ä¸­çš„ï¼Œç”¨æ¥åœ¨åŒä¸€å®ä½“é›†ä¸­åŒºåˆ†ä¸åŒå®ä½“çš„å€™é€‰ç å°±æ˜¯ä¸»ç ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§æˆ–è€…å¤šä¸ªå±æ€§çš„é›†åˆã€‚ç®€å•çš„è¯´ï¼Œè¶…ç åŒ…æ‹¬å€™é€‰ç ï¼Œå€™é€‰ç åŒ…æ‹¬ä¸»ç ã€‚5.1 ä¾‹å­1ä½¿ç”¨idå±æ€§ä½œä¸ºä¸»ç ,MySQLè¡¨å®šä¹‰ä»£ç å¦‚ä¸‹ï¼šcreate table student( id int primary key, student_number varchar(10), name varchar(10), sex varchar(4))5.2 ä¾‹å­2ä½¿ç”¨idå’Œstudent_numberå±æ€§é›†åˆä½œä¸ºä¸»ç ,MySQLè¡¨å®šä¹‰ä»£ç å¦‚ä¸‹ï¼šcreate table student( id int, student_number varchar(10), name varchar(10), sex varchar(4), constraint student_primary primary key(id,student_number))å½“ç„¶ï¼Œåœ¨ç°å®å¼€å‘ä¸­ï¼Œæˆ‘æ›´å–œæ¬¢ä½¿ç”¨ä¸€ä¸ªå±æ€§æ¥ä½œä¸ºä¸»ç ã€‚æ¯”å¦‚æˆ‘ä¸ªäººç½‘ç«™ â€œæå®¢å¼€å‘è€…â€ï¼ˆhttps://jkdev.cnï¼‰ï¼Œç½‘ç«™çš„å„ç§æ•°æ®é›†åˆï¼Œå¤§å¤šæ˜¯ç”¨ä¸€ä¸ª id æ¥ä½œä¸ºä¸»ç æ¥ç”¨äºæ ‡è¯†å”¯ä¸€çš„æŸä¸€æ¡æ•°æ®ã€‚" }, { "title": "Linuxç¯å¢ƒä¸‹c++ç¼–è¯‘å·¥å…·çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•", "url": "/posts/cpp_g++.html", "categories": "C/C++", "tags": "g++", "date": "2023-01-28 15:08:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-10-29ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€æ¦‚è¿°å¼€å§‹ä¹‹å‰ï¼Œå…ˆç®€å•æ¦‚è¿°ä¸€ä¸‹åŸºæœ¬æ¦‚å¿µï¼ŒGCCï¼šGNU Compiler Collectionï¼Œä¸­æ–‡å« â€œGNUç¼–è¯‘å™¨å¥—ä»¶â€ï¼Œå®ƒå¯ä»¥ç¼–è¯‘Cã€C++ã€JAVã€Fortranã€Pascalã€Object-Cã€Adaç­‰è¯­è¨€ã€‚è€ŒGCCä¸‹é¢æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å·¥å…·å°±æ˜¯gcc(GUN C Compiler)å’Œg++(GUN C++ Comp...", "content": " æ’°å†™æ—¶é—´ï¼š2021-10-29ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€æ¦‚è¿°å¼€å§‹ä¹‹å‰ï¼Œå…ˆç®€å•æ¦‚è¿°ä¸€ä¸‹åŸºæœ¬æ¦‚å¿µï¼ŒGCCï¼šGNU Compiler Collectionï¼Œä¸­æ–‡å« â€œGNUç¼–è¯‘å™¨å¥—ä»¶â€ï¼Œå®ƒå¯ä»¥ç¼–è¯‘Cã€C++ã€JAVã€Fortranã€Pascalã€Object-Cã€Adaç­‰è¯­è¨€ã€‚è€ŒGCCä¸‹é¢æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å·¥å…·å°±æ˜¯gcc(GUN C Compiler)å’Œg++(GUN C++ Compiler)ï¼Œå³cè¯­è¨€ç¼–è¯‘å™¨å’Œc++ç¼–è¯‘å™¨ã€‚æˆ‘é€šå¸¸ç”¨gccç¼–è¯‘å­˜cä»£ç ï¼Œç”¨g++ç¼–è¯‘c++ã€‚å®é™…ä¸Šå¯ä»¥ç”¨ç›´æ¥ç”¨g++ç¼–è¯‘cæˆ–è€…c++ä»£ç ã€‚æœ¬æ¬¡æˆ‘ä»¬å­¦ä¹ æ€æ ·ä½¿ç”¨g++ã€‚äºŒã€å®‰è£…ç¼–è¯‘ç¯å¢ƒä»¥debianç³»Linuxä¸ºä¾‹ï¼Œä¸‹é¢æ˜¯ç¼–è¯‘ç¯å¢ƒçš„å®‰è£…æ­¥éª¤ç¼–è¯‘å·¥å…·ä¸è°ƒè¯•å·¥å…·sudo apt install -y gcc g++å®‰è£…éªŒè¯ï¼Œå¦‚æœæˆåŠŸæ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œåˆ™ä»£è¡¨å®‰è£…æˆåŠŸgcc --versiong++ --versionä¸‰ã€ç¼–è¯‘åŸºç¡€3.1 g++ ç¼–è¯‘å™¨çš„ä½¿ç”¨ ç¼–è¯‘è¿‡ç¨‹ç¬¬ä¸€æ­¥ï¼šé¢„å¤„ç† Pre-processingï¼Œç”Ÿæˆ.i æ–‡ä»¶# -E é€‰é¡¹æŒ‡ç¤ºç¼–è¯‘å™¨ä»…å¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„ç¼–è¯‘g++ -E test.cpp -o testr.iç¬¬äºŒæ­¥ï¼šç¼–è¯‘-Compilingï¼Œç”Ÿæˆ.s æ–‡ä»¶# -S ç¼–è¯‘é€‰é¡¹å‘Šè¯‰ g++ åœ¨ä¸º c++ ä»£ç äº§ç”Ÿäº†æ±‡ç¼–è¯­è¨€æ–‡ä»¶ååœæ­¢ç¼–è¯‘# g++ äº§ç”Ÿçš„æ±‡ç¼–è¯­è¨€æ–‡ä»¶çš„ç¼ºçœæ‰©å±•åæ˜¯ .sg++ -S test.i -o test.sç¬¬ä¸‰æ­¥ï¼šæ±‡ç¼–-Assembingï¼Œç”Ÿæˆ.o æ–‡ä»¶# -c é€‰é¡¹å‘Šè¯‰ g++ ä»…æŠŠæºä»£ç ç¼–è¯‘ä¸ºæœºå™¨è¯­è¨€çš„ç›®æ ‡ä»£ç # ç¼ºçœæ—¶ g++ å»ºç«‹çš„ç›®æ ‡ä»£ç æ–‡ä»¶æœ‰ä¸€ä¸ª .o çš„æ‰©å±•åg++ -c test.s -o test.oç¬¬å››æ­¥ï¼šé“¾æ¥-Lingkingï¼Œç”ŸæˆbinäºŒè¿›åˆ¶æ–‡ä»¶# -o ç¼–è¯‘é€‰é¡¹æ¥ä¸ºå°†äº§ç”Ÿçš„å¯æ‰§è¡Œæ–‡ä»¶æŒ‡å®šæ–‡ä»¶åg++ test.o -o test3.2 G++é‡è¦ç¼–è¯‘å‚æ•° ç¼–è¯‘å¸¦è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œæ–‡ä»¶# -g é€‰é¡¹å‘Šè¯‰GCCäº§ç”Ÿèƒ½è¢« GNU è°ƒè¯•å™¨DGBä½¿ç”¨çš„è°ƒè¯•ä¿¡æ¯ï¼Œä»¥è°ƒè¯•ç¨‹åº# äº§ç”Ÿå¸¦è°ƒè¯•ä¿¡æ¯çš„å¯æ‰§è¡Œæ–‡ä»¶terstg++ -g test.cpp -o test ä¼˜åŒ–æºä»£ç æ‰€è°“ä¼˜åŒ–ï¼Œä¾‹å¦‚çœç•¥ä»£ç ä¸­ä»æ¥æœªä½¿ç”¨è¿‡çš„å˜é‡ã€ç›´æ¥å¸¸é‡è¡¨è¾¾å¼ç”¨ç»“æœæ›¿ä»£ç­‰ï¼Œè¿™äº›æ“ä½œä¼šç¼©å‡ç›®æ ‡æ–‡ä»¶æ‰€å«çš„ä»£ç ï¼Œæé«˜æœ€ç»ˆç”Ÿæˆçš„æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œæ•ˆç‡ã€‚-O å‘Šè¯‰ g++ å¯¹æºä»£ç è¿›è¡ŒåŸºæœ¬ä¼˜åŒ–ã€‚è¿™äº›ä¼˜åŒ–åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä½¿ç¨‹åºæ‰§è¡Œå¾—æ›´å¿«ã€‚-O2 å‘Šè¯‰ g++ äº§ç”Ÿå°½å¯èƒ½å°å’Œå°½å¯èƒ½å¿«çš„ä»£ç ã€‚å¦‚ -O2ï¼Œ-O3ï¼Œ-Onï¼ˆné€šå¸¸ä¸º3ï¼‰-O åŒæ—¶å‡å°‘ä»£ç çš„é•¿åº¦å’Œæ‰§è¡Œæ—¶é—´ï¼Œå…¶æ•ˆæœç­‰ä»·äº -O1 ä¼˜åŒ–å‚æ•° è¯´æ˜ -O0 è¡¨ç¤ºä¸åšä¼˜åŒ– -O1 è¡¨ç¤ºä¸åšä¼˜åŒ– O2 é™¤äº†å®Œæˆ-O1çš„ä¼˜åŒ–ä¹‹å¤–ï¼Œè¿˜è¿›è¡Œä¸€äº›é¢å¤–çš„è°ƒæ•´å·¥ä½œï¼Œå¦‚æŒ‡ä»¤è°ƒæ•´ç­‰ -O3 åˆ™åŒ…æ‹¬å¾ªç¯å±•å¼€å’Œå…¶ä»–ä¸€äº›ä¸å¤„ç†æ€§ç›¸å…³çš„ä¼˜åŒ–å·¥ä½œï¼Œé€‰é¡¹å°†ä½¿ç¼–è¯‘çš„é€Ÿåº¦æ¯” -O æ…¢ï¼Œä½†é€šå¸¸äº§ç”Ÿçš„ä»£ç æ‰§è¡Œé€Ÿåº¦ä¼šæ›´å¿« ä»¥ä¸‹æ˜¯ç›¸å…³çš„ä¼˜åŒ–ç¤ºä¾‹# ä½¿ç”¨ -O2 ä¼˜åŒ–æºä»£ç ï¼Œå¹¶è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶ã€‚g++ -O2 test.cppåˆ›å»ºä¸€ä¸ªæ•ˆç‡ä½ä¸‹çš„ä»£ç å—inefficency.cppï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹#include &lt;iostream&gt;using namespace std;int main(int argc, char const *argv[]){ unsigned long int counter; unsigned long int result; unsigned long int temp; unsigned long int five; for (counter = 0; counter &lt; 2009 * 2009 * 100 / 4 + 2010 ; counter += (10-6)/4) { temp = counter/1979; for (int i = 0; i &lt; 20; i++) { // æ¯æ¬¡å¾ªç¯éƒ½ä¼šè¿›è¡Œä¸€æ¬¡æ— ç”¨çš„ å¤æ‚çš„è¿ç®— five = 200 * 200 / 8000; result = counter; } } cout &lt;&lt; \"result = \" &lt;&lt; result &lt;&lt; endl; return 0;}å…ˆä½¿ç”¨ç›´æ¥ç¼–è¯‘çš„æ–¹å¼ç”Ÿæˆa_without_oå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ä¸‹å‘½ä»¤g++ inefficency.cpp -o a_without_oæ¥ä¸‹æ¥æˆ‘ä»¬å†ä½¿ç”¨ä¼˜åŒ–åçš„ç¼–è¯‘æ–¹å¼ï¼Œå¦‚ä¸‹å‘½ä»¤g++ inefficency.cpp -O2 -o a_with_o2åæ‰§è¡Œä¸¤ç§æ–¹å¼ç¼–è¯‘ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¦‚ä¸‹ç»“æœpan@pan-PC:~/Work/src/cmake/src$ ./a_without_o result = 100904034pan@pan-PC:~/Work/src/cmake/src$ ./a_with_o2 result = 100904034pan@pan-PC:~/Work/src/cmake/src$å¯ä»¥çœ‹åˆ°è®¡ç®—çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯æ²¡æœ‰ç¼–è¯‘ä¼˜åŒ–çš„ a_without_o æ‰§è¡Œæ—¶é—´æ˜æ˜¾å¤§äº a_with_o2ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†æ¬¡ä½¿ç”¨ time å‘½ä»¤è®¡ç®—æ‰§è¡Œç¨‹åºæ‰€éœ€çš„æ—¶é—´ï¼Œå¯ä»¥çœ‹åˆ°æ˜æ˜¾çš„æ—¶é—´åŒºåˆ«ï¼Œå¦‚ä¸‹ç»“æœpan@pan-PC:~/Work/src/cmake/src$ time ./a_without_o result = 100904034real 0m4.212suser 0m4.212ssys 0m0.000span@pan-PC:~/Work/src/cmake/src$ time ./a_with_o2 result = 100904034real 0m0.001suser 0m0.001ssys 0m0.000span@pan-PC:~/Work/src/cmake/src$ æ€»ç»“ï¼šåŠ ä¸Š -O ä¼˜åŒ–å‚æ•°åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ -O2 ï¼Œç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬ä¼˜åŒ–ä½æ•ˆç‡çš„ä»£ç ã€‚ä»è€Œæé«˜æœ€ç»ˆç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ã€‚ -l æˆ–è€… -L æŒ‡å®šåº“æ–‡ä»¶ æŒ‡å®šåº“æ–‡ä»¶è·¯å¾„ -l å‚æ•°ï¼ˆå°å†™ï¼‰å°±æ˜¯ç”¨æ¥æŒ‡å®šç¨‹åºè¦é“¾æ¥çš„åº“ï¼Œ-l å‚æ•°ç´§æ¥ç€å°±æ˜¯åº“åï¼Œåœ¨/libå’Œ/usr/libå’Œ/usr/local/libé‡Œçš„åº“ç›´æ¥è°ƒç”¨ -l å‚æ•°å°±èƒ½é“¾æ¥# é“¾æ¥ glogåº“g++ -lglog test.cppå¦‚æœåº“æ–‡ä»¶æ²¡æœ‰æ”¾åœ¨ä¸Šé¢çš„ä¸‰ä¸ªç›®å½•é‡Œï¼Œéœ€è¦ä½¿ç”¨-Lå‚æ•°ï¼ˆå¤§å†™ï¼‰æŒ‡å®šåº“æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œ-L å‚æ•°è·Ÿç€çš„æ˜¯åº“æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•å# é“¾æ¥ myteståº“ã€‚libmytest.so åœ¨ ~/libç›®å½•ä¸‹g++ -L~/lib -lmytest test.cpp -I æŒ‡å®šå¤´æ–‡ä»¶æœç´¢ç›®å½•/usr/include ç›®å½•ä¸€èˆ¬ä¸ç”¨æŒ‡å®šï¼ŒgccçŸ¥é“å»é‚£é‡Œæ‰¾ï¼Œä½†æ˜¯å¦‚æœå¤´æ–‡ä»¶ä¸åœ¨/usr/includeé‡Œæˆ‘ä»¬å°±è¦ç”¨ -I å‚æ•°æŒ‡å®šäº†ï¼Œæ¯”å¦‚å¤´æ–‡ä»¶æ”¾åœ¨ /myincludeç›®å½•é‡Œï¼Œé‚£ç¼–è¯‘å‘½ä»¤è¡Œå°±è¦åŠ ä¸Š -I/myincludeå‚æ•°äº†ï¼Œå¦‚æœä¸åŠ ä½ ä¼šå¾—åˆ°ä¸€ä¸ªxxx.h: No such file or directoryçš„é”™è¯¯ã€‚-Iå‚æ•°å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ¯”å¦‚å¤´æ–‡ä»¶åœ¨å½“å‰ç›®å½•ï¼Œå¯ä»¥ç”¨ -I æ¥æŒ‡å®šã€‚ä¸Šé¢æˆ‘ä»¬æåˆ°çš„-cflagså‚æ•°å°±æ˜¯ç”¨æ¥ç”Ÿæˆ-Iå‚æ•°çš„ã€‚g++ -I/myinclde test.cpp -Wall æ‰“å°è­¦å‘Šä¿¡æ¯# æ‰“å°å‡ºgccæä¾›çš„è­¦å‘Šä¿¡æ¯g++ -Wall test.cpp -w å…³é—­è­¦å‘Šä¿¡æ¯# å…³é—­æ‰€æœ‰è­¦å‘Šä¿¡æ¯g++ -w test.cpp -std=c++11 è®¾ç½®ç¼–è¯‘æ ‡å‡†# ä½¿ç”¨ c++11 æ ‡å‡†ç¼–è¯‘ test.cppg++ -std=c++11 test.cpp -oï¼ˆå°å†™ï¼‰ æŒ‡å®šè¾“å‡ºæ–‡ä»¶å# æŒ‡å®šå³å°†äº§ç”Ÿçš„æ–‡ä»¶åä¸ºtestg++ test.cpp -o test -D å®šä¹‰å®åœ¨ä½¿ç”¨ gcc/g++ç¼–è¯‘çš„æ—¶å€™å®šä¹‰å®ï¼Œå¸¸ç”¨åœºæ™¯ï¼š-DDEBUG å®šä¹‰DEBUGå®ï¼Œå¯èƒ½æ–‡ä»¶ä¸­æœ‰DEBUGå®éƒ¨åˆ†çš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨DEBUGæ¥é€‰æ‹©å¼€å¯æˆ–è€…å…³é—­DEBUGæ·»åŠ æºç æ–‡ä»¶test2.cppï¼Œç¤ºä¾‹ä»£ç #include &lt;stdio.h&gt;int main(){ #ifdef DEBUG printf(\"DEBUG LOG\\n\"); #endif printf(\"in\\n\"); return 0;}åœ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä½¿ç”¨ g++ -DDEBUG test2.cpp åæ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ° â€œDEBUG LOGâ€ è¢«è¾“å‡ºã€‚" }, { "title": "åœ¨Ubuntuä¸Šå¿«é€Ÿæ­å»ºk8sé›†ç¾¤", "url": "/posts/container_install-k8s-quickly-on-ubuntu.html", "categories": "å®¹å™¨ä¸è™šæ‹ŸåŒ–", "tags": "k8s", "date": "2023-01-28 14:51:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-01-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28etcdå¯ä»¥ç”¨äºk8sé›†ç¾¤çš„æ•°æ®åº“ï¼Œä¸‹é¢æ˜¯åœ¨å†…ç½‘å®‰è£…etcdé›†ç¾¤çš„è¯¦ç»†æ­¥éª¤ä¸€ã€ä¸ºetcdé¢å‘SSLè¯ä¹¦1.1 é¢å‘æ­¥éª¤åŠ å¯†è¯ä¹¦æˆ‘ä»¬å¯ä»¥å‘è¯ä¹¦æœºæ„ï¼ˆCAï¼‰ç”³è¯·ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬éƒ¨ç½²åœ¨å†…ç½‘ï¼Œæˆ‘ä»¬è‡ªå·±è‡ªå·±åˆ›å»ºä¸€ä¸ªCAåç»™è‡ªå·±é¢å‘è¯ä¹¦ï¼Œæ­¥éª¤å¦‚ä¸‹ ï¼ˆ1ï¼‰åˆ›å»ºè¯ä¹¦é¢å‘æœºæ„ ï¼ˆ2ï¼‰å¡«å†™è¡¨å•â€“å†™æ˜etcdæ‰€åœ¨èŠ‚ç‚¹çš„IP ï¼ˆ3ï¼‰å‘è¯ä¹¦é¢å‘ç»“æ„...", "content": " æ’°å†™æ—¶é—´ï¼š2021-01-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28etcdå¯ä»¥ç”¨äºk8sé›†ç¾¤çš„æ•°æ®åº“ï¼Œä¸‹é¢æ˜¯åœ¨å†…ç½‘å®‰è£…etcdé›†ç¾¤çš„è¯¦ç»†æ­¥éª¤ä¸€ã€ä¸ºetcdé¢å‘SSLè¯ä¹¦1.1 é¢å‘æ­¥éª¤åŠ å¯†è¯ä¹¦æˆ‘ä»¬å¯ä»¥å‘è¯ä¹¦æœºæ„ï¼ˆCAï¼‰ç”³è¯·ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬éƒ¨ç½²åœ¨å†…ç½‘ï¼Œæˆ‘ä»¬è‡ªå·±è‡ªå·±åˆ›å»ºä¸€ä¸ªCAåç»™è‡ªå·±é¢å‘è¯ä¹¦ï¼Œæ­¥éª¤å¦‚ä¸‹ ï¼ˆ1ï¼‰åˆ›å»ºè¯ä¹¦é¢å‘æœºæ„ ï¼ˆ2ï¼‰å¡«å†™è¡¨å•â€“å†™æ˜etcdæ‰€åœ¨èŠ‚ç‚¹çš„IP ï¼ˆ3ï¼‰å‘è¯ä¹¦é¢å‘ç»“æ„ç”³è¯·è¯ä¹¦1.2 å®‰è£…cfsslä»cfsslå®˜ç½‘ä¸­é€‰æ‹©å¯¹åº”çš„cfsslç›¸å…³å¯æ‰§è¡Œç¨‹åºï¼Œhttps://pkg.cfssl.org/è¿™é‡Œç›´æ¥ä½¿ç”¨wgetä¸‹è½½ä¿å­˜åˆ°/usr/local/binç›®å½•ä¸­# ä¸‹è½½cfsslwget -c https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 -O /usr/local/bin/cfssl# ä¸‹è½½cfssl-certinfowget -c https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64 -O /usr/local/bin/cfssl-certinfo# ä¸‹è½½cfssljsonwget -c https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 -O /usr/local/bin/cfssljson# èµ‹äºˆcfsslç›¸å…³å¯æ‰§è¡Œæƒé™chmod a+x /usr/local/bin/cfssl*1.3 é¢å‘è¯ä¹¦1.3.1 åˆ›å»ºç­¾è¯æœºæ„ï¼ˆCAï¼‰å®šä¹‰ä¸€ä¸ªca-csr.jsonæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰ç­¾è¯æœºæ„ï¼ˆCAï¼‰çš„ç›¸å…³ä¿¡æ¯ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹{ \"CN\": \"etcd CA\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"L\": \"Guizhou\", \"ST\": \"Qiandongnan\" } ]}ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç­¾è¯æœºæ„cfssl gencert -initca ca-csr.json | cfssljson -bare ca -ä¼šç”Ÿæˆä¸€ä¸ªca.pemå…¬é’¥æ–‡ä»¶å’Œca-key.pemç§é’¥æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯CAæœåŠ¡å™¨çš„è¯ä¹¦ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»™å®¢æˆ·ç«¯é¢å‘è¯ä¹¦ã€‚1.3.2 å®šä¹‰è¯ä¹¦ä¿¡æ¯å…ˆåˆ›å»ºä¸€ä¸ªca-config.jsonæ–‡ä»¶ï¼Œå®šä¹‰å¾…é¢å‘è¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚æœ‰æ•ˆæ—¶é—´ï¼‰ï¼Œå¡«å†™ä»¥ä¸‹å†…å®¹{ \"signing\": { \"default\": { \"expiry\": \"87600h\" }, \"profiles\": { \"www\": { \"expiry\": \"87600h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\", \"client auth\" ] } } }}å†åˆ›å»ºä¸€ä¸ªserver-csr.jsonæ–‡ä»¶ï¼Œå®šä¹‰å¾…é¢å‘è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä¸‹{ \"CN\": \"etcd\", \"hosts\": [ \"192.168.56.101\", \"192.168.56.102\", \"192.168.56.103\" ], \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [{ \"C\": \"CN\", \"L\": \"Guizhou\", \"ST\": \"Qiandongnan\" }]}ç›¸å…³å‚æ•° CNï¼šè¯ä¹¦åç§° hostsï¼šé¢å‘çš„ä¸»æœº keyï¼šå®šä¹‰è¯ä¹¦ç±»å‹ï¼Œalgoä¸ºåŠ å¯†ç±»å‹ï¼Œsizeä¸ºåŠ å¯†é•¿åº¦ namesï¼šè¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯1.3.3 å‘ç­¾è¯æœºæ„ï¼ˆCAï¼‰ç”³è¯·è¯ä¹¦å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»™å®¢æˆ·ç«¯ç”³è¯·è¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www server-csr.json | cfssljson -bare serveræ­¤æ—¶ï¼Œå¤šå‡ºå®¢æˆ·ç«¯ä¸¤ä¸ªè¯ä¹¦ç›¸å…³æ–‡ä»¶server.pemå’Œserver-key.pemï¼Œä½¿ç”¨ls *pemå‘½ä»¤æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°å››ä¸ªpemæ–‡ä»¶ï¼Œå¦‚ä¸‹ca-key.pem ca.pem server-key.pem server.pemäºŒã€æ‰‹åŠ¨ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬etcdæˆ‘ä»¬ä»æºç å®‰è£…æ—¶ï¼Œå°†å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æ­¥ç¨³å®šçš„é¢„è§ˆç‰ˆæœ¬ï¼Œæ­¤å®‰è£…æ–¹å¼ä¾›å¤§å®¶å­¦ä¹ ï¼Œä¸è§å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚2.1 å®‰è£…golangetcdåœ¨æ„å»ºçš„æ—¶å€™éœ€è¦golangç¯å¢ƒï¼Œæ‰€ä»¥å…ˆå®‰è£…golangï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤# æ·»åŠ golangé•œåƒä»“åº“rpm --import https://mirror.go-repo.io/centos/RPM-GPG-KEY-GO-REPOcurl -s https://mirror.go-repo.io/centos/go-repo.repo | sudo tee /etc/yum.repos.d/go-repo.repo# å®‰è£…golangyum install golang -y# ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹goå®‰è£…ç‰ˆæœ¬go versionå¦‚æœå‡ºç°ä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯æ˜å®‰è£…æˆåŠŸgo version go1.15.6 linux/amd64æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®goproxyé˜¿é‡Œäº‘åŠ é€Ÿé•œåƒï¼Œç¼–è¾‘/etc/profileæ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹export GOPROXY=https://mirrors.aliyun.com/goproxy/å¹¶è®©/etc/profileé‡Œé¢çš„å‘½ä»¤é‡æ–°æ‰§è¡Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤source /etc/profile2.2 ç¼–è¯‘å®‰è£…etcdé¦–å…ˆä»githubä¸­ä¸‹è½½æºä»£ç åŒ…ï¼Œå¹¶æ‰§è¡Œæ„å»ºå‘½ä»¤git clone https://github.com/etcd-io/etcd.gitcd etcd./buildæœ€ç»ˆè‹¥æ˜¯è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯æ˜æ„å»ºæˆåŠŸstderr: go: downloading github.com/urfave/cli v1.22.4 stderr: go: downloading github.com/bgentry/speakeasy v0.1.0stderr: go: downloading gopkg.in/cheggaaa/pb.v1 v1.0.28stderr: go: downloading github.com/olekukonko/tablewriter v0.0.4stderr: go: downloading github.com/mattn/go-runewidth v0.0.7stderr: go: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0stderr: go: downloading github.com/russross/blackfriday/v2 v2.0.1stderr: go: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0SUCCESS: etcd_buildæœ€ç»ˆç¼–è¯‘æ„å»ºæˆåŠŸä¹‹åç”Ÿæˆçš„æ–‡ä»¶åœ¨æºç ç›®å½•ä¸‹çš„binç›®å½•ï¼Œä½¿ç”¨ls -al bin/å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿæˆäº†etcdå’Œetcdctlä¸¤ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ€»ç”¨é‡ 52112drwxr-xr-x. 2 root root 33 1æœˆ 15 10:16 .drwxr-xr-x. 19 root root 4096 1æœˆ 15 10:15 ..-rwxr-xr-x. 1 root root 29862882 1æœˆ 15 10:15 etcd-rwxr-xr-x. 1 root root 23492302 1æœˆ 15 10:16 etcdctlæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æŠŠetcdå¯æ‰§è¡Œç¨‹åºæ‹·è´åˆ°ç³»ç»Ÿä¸­cp bin/etcd* /usr/local/binä¸‰ã€ä»etcdäºŒè¿›åˆ¶æ–‡ä»¶åŒ…å®‰è£…etcdetcdå®˜æ–¹æä¾›ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œå®‰è£…çš„æ–¹å¼ã€‚å¦‚æœä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…åŒ…å®‰è£…ï¼Œå¯ä»¥ä¸å®‰è£…golangï¼Œä¸‹è½½å®˜æ–¹æä¾›çš„äºŒè¿›åˆ¶ç¨‹åºåŒ…è¿›è¡Œè§£å‹åï¼Œå¯ç›´æ¥å¾—åˆ°æ–¹å¼ä¸€ä¸­çš„etcdå’Œetcdctlã€‚ä¸‹è½½åœ°å€ä¸ºhttps://github.com/etcd-io/etcd/releases/åç»­æ­¥éª¤å’Œæ–¹å¼ä¸€ä¸€æ ·ï¼Œå³å…ˆåˆ›å»ºetcdç›®å½•ï¼Œå†æŠŠetcdå’Œetcdctlä¸¤ä¸ªæ–‡ä»¶æ‹·è´åˆ°å¯¹åº”ç›®å½•å³å¯ã€‚åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œetcdæœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ä¸º3.4.14ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‡å®š3.4.14ç‰ˆæœ¬è¿›è¡Œä¸‹è½½# ä¸‹è½½äºŒè¿›åˆ¶ç¨‹åºåŒ…wget https://github.com/etcd-io/etcd/releases/download/v3.4.14/etcd-v3.4.14-linux-amd64.tar.gz# è§£å‹ç¨‹åºtar -zxvf etcd-v3.4.14-linux-amd64.tar.gz# å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶åˆ°ç³»ç»Ÿcp etcd-v3.4.14-linux-amd64/etcd* /usr/local/bin/å››ã€é…ç½®etcdæœåŠ¡ç®¡ç†è„šæœ¬æˆ‘ä»¬å·²ç»å°†etcdå®‰è£…åˆ°ç³»ç»Ÿä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™etcdçš„systemdæœåŠ¡ç®¡ç†è„šæœ¬ï¼Œç”¨systemdæ¥ç®¡ç†etcdçš„å¯åŠ¨ã€‚systemdçŸ¥è¯†å±äºLinuxçš„ç³»ç»ŸçŸ¥è¯†ï¼Œæˆ‘ä»¬åªä»‹ç»æœ¬æ¬¡ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå…¶ä»–éƒ¨åˆ†åœ¨è¿™é‡Œä¸ä¼šèµ˜è¿°ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒsystemdæœåŠ¡ç®¡ç†è„šæœ¬åœ¨ä»¥ä¸‹ä¸¤ä¸ªç›®å½• ç³»ç»Ÿè„šæœ¬ç›®å½•ç³»ç»Ÿé»˜è®¤çš„æœåŠ¡è„šæœ¬ç›®å½•/etc/systemd/system ç”¨æˆ·è„šæœ¬ç›®å½•ç”¨æˆ·è‡ªå®šä¹‰è„šæœ¬ï¼Œé€šå¸¸ä¿å­˜åœ¨è¿™ä¸ªç›®å½•/usr/lib/systemd/systemåˆ›å»ºä¸€ä¸ªsystemdæœåŠ¡ç®¡ç†è„šæœ¬/usr/lib/systemd/system/etcd.serviceï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å®šä¹‰å†…å®¹ã€‚ä¸‹æ–‡ä»‹ç»å¯åŠ¨etcdçš„ä¸¤ç§æ–¹å¼ã€‚4.1 æŒ‡å®šç¯å¢ƒå˜é‡å¯åŠ¨etcdåœ¨æœåŠ¡è„šæœ¬æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.target[Service]Type=notifyEnvironmentFile=/etc/etcd/conf/etcd.confExecStart=/usr/local/bin/etcd \\ --cert-file=/etc/etcd/ssl/server.pem \\ --key-file=/etc/etcd/ssl/server-key.pem \\ --peer-cert-file=/etc/etcd/ssl/server.pem \\ --peer-key-file=/etc/etcd/ssl/server-key.pem \\ --trusted-ca-file=/etc/etcd/ssl/ca.pem \\ --peer-trusted-ca-file=/etc/etcd/ssl/ca.pemRestart=on-failureLimitNOFILE=65536[Install]WantedBy=multi-user.targetsyetemdå‚æ•°é…ç½®æ–‡ä»¶çš„UnitèŠ‚ç‚¹ç”¨æ¥å®šä¹‰å…ƒæ•°æ®ï¼ŒServiceèŠ‚ç‚¹ç”¨æ¥é…ç½®æœåŠ¡ï¼ŒInstallèŠ‚ç‚¹æ˜¯é…ç½®æ–‡ä»¶çš„æœ€åä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰æœåŠ¡å¯åŠ¨æ–¹å¼ [Unit] Descriptionï¼šæœåŠ¡æè¿° [Unit] Afterï¼šå½“å‰Unitéœ€è¦åœ¨å“ªäº›Unitå¯åŠ¨ä¹‹åå¯åŠ¨ [Unit] Wantsï¼šä¸å½“å‰ Unit é…åˆçš„å…¶ä»– Unitï¼Œå¦‚æœå…¶ä»–Unitæ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¹Ÿä¸ä¼šå¯åŠ¨å¤±è´¥ [Service] Typeï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹çš„è¡Œä¸ºï¼Œå€¼ä¸ºnotifyæ—¶ï¼Œä»£è¡¨å½“å‰æœåŠ¡å¯åŠ¨å®Œæ¯•ï¼Œä¼šé€šçŸ¥Systemdï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ [Service] EnvironmentFileï¼šæŒ‡å®šç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ [Service] ExecStartï¼šå¯åŠ¨å½“å‰æœåŠ¡çš„å‘½ä»¤ [Service] Restartï¼šå®šä¹‰ä½•ç§æƒ…å†µ Systemd ä¼šè‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡ï¼Œon-failureä»£è¡¨æœåŠ¡åœæ­¢åä¼šé‡å¯ [Service] LimitNOFILEï¼šè®¾ç½®èµ„æºé™åˆ¶ï¼Œå³ç”¨æˆ·æœ€å¤šå¯ä»¥ä½¿ç”¨å¤šå°‘ä¸ªè¿›ç¨‹ [Install] WantedByï¼šå½“å€¼ä¸ºmulti-user.targetæ—¶ï¼Œä»£è¡¨ç³»ç»Ÿå¤§éƒ¨åˆ†é»˜è®¤æœåŠ¡å¯åŠ¨äº†ï¼ˆä¸åŒ…å«GUIï¼‰ï¼ŒæœåŠ¡è·Ÿç€å¯åŠ¨ã€‚åœ¨systemdæœåŠ¡é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„æ˜¯[Service] ExecStartï¼Œè¿™ä¸ªå‚æ•°å®šä¹‰systemdå»å“ªé‡Œæ‰¾etcdçš„å¯åŠ¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šetcdå…·ä½“çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚æˆ‘ä»¬è¿˜æŒ‡å®šäº†etcdè¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯¹åº”çš„è·¯å¾„ï¼ˆ/etc/etcd/conf/etcd.confï¼‰åˆ›å»ºå…¶å¯¹åº”æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹#[Member]ETCD_NAME=\"etcd-1\"ETCD_DATA_DIR=\"/var/lib/etcd/default.etcd\"ETCD_LISTEN_PEER_URLS=\"https://192.168.56.101:2380\"ETCD_LISTEN_CLIENT_URLS=\"https://192.168.56.101:2379\"#[Clustering]ETCD_INITIAL_ADVERTISE_PEER_URLS=\"https://192.168.56.101:2380\"ETCD_ADVERTISE_CLIENT_URLS=\"https://192.168.56.101:2379\"ETCD_INITIAL_CLUSTER=\"etcd-1=https://192.168.56.101:2380,etcd-2=https://192.168.56.102:2380,etcd-3=https://192.168.56.103:2380\"ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"ETCD_INITIAL_CLUSTER_STATE=\"new\"åœ¨etcdçš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŒ…å«ä¸¤æ®µï¼Œ[Member]ä¹‹ä¸‹æ˜¯å•èŠ‚ç‚¹é…ç½®å‚æ•°ï¼Œ[Clustering]èŠ‚ç‚¹ä¸‹æ˜¯é›†ç¾¤é…ç½®å‚æ•° [Member] ETCD_NAMEï¼šå½“å‰etcdçš„å”¯ä¸€åç§°ï¼Œè¦ä¿è¯å’Œå…¶ä»–èŠ‚ç‚¹ä¸å†²çª [Member] ETCD_DATA_DIRï¼šæŒ‡å®šetcdå­˜å‚¨æ•°æ®çš„å­˜å‚¨ä½ç½® [Member] ETCD_LISTEN_PEER_URLSï¼šæŒ‡å®šå½“å‰etcdå’Œå…¶ä»–èŠ‚ç‚¹etcdé€šä¿¡æ—¶çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚å‡å¦‚etcdé›†ç¾¤ä¸­åŒ…å«ä¸‰ä¸ªetcdæœåŠ¡ï¼Œé‚£ä¹ˆä¸‰ä¸ªetcdèŠ‚ç‚¹æ„æˆäº†ä¸€ä¸ªé«˜å¯ç”¨é›†ç¾¤ï¼Œetcdé›†ç¾¤ä¼šè‡ªåŠ¨é€‰ä¸¾ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹ä½œä¸ºä»èŠ‚ç‚¹ã€‚æ‰€æœ‰çš„å†™å…¥æ“ä½œå°†å¾€ä¸»èŠ‚ç‚¹å†™ï¼Œæ‰€æœ‰çš„è¯»æ“ä½œåœ¨ä»èŠ‚ç‚¹ä¸Šè¯»ï¼Œè¿™æ˜¯etcdè¯»å†™çš„è¿‡ç¨‹ã€‚ä¸Šè¿°è®¾ç½®çš„2380ç«¯å£ï¼Œç”¨æ¥ç›‘å¬å…¶ä»–etcdèŠ‚ç‚¹å‘é€è¿‡æ¥çš„æ•°æ®ã€‚ [Member] ETCD_LISTEN_CLIENT_URLSï¼šæŒ‡å®šå½“å‰etcdæ¥æ”¶å®¢æˆ·ç«¯æŒ‡ä»¤çš„åœ°å€å’Œç«¯å£ï¼Œåœ¨è¿™é‡Œçš„å®¢æˆ·ç«¯æˆ‘ä»¬æŒ‡çš„æ˜¯k8sé›†ç¾¤çš„masterèŠ‚ç‚¹ã€‚ [Clustering] ETCD_INITIAL_ADVERTISE_PEER_URLSï¼šæŒ‡å®šetcdå¹¿æ’­ç«¯å£ï¼Œå½“å‰etcdä¼šå°†æ•°æ®åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œé€šè¿‡2380ç«¯å£å‘é€ã€‚ [Clustering] ETCD_ADVERTISE_CLIENT_URLSï¼šç»™å®¢æˆ·ç«¯é€šå‘Šçš„ç«¯å£ã€‚ [Clustering] ETCD_INITIAL_CLUSTERï¼šå®šä¹‰etcdé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åç§°å’ŒIPï¼Œä»¥åŠé€šä¿¡ç«¯å£ã€‚ [Clustering] ETCD_INITIAL_CLUSTER_TOKENï¼šå®šä¹‰etcdé›†ç¾¤ä¸­é€šä¿¡çš„tokenï¼Œæ‰€æœ‰èŠ‚ç‚¹å¿…é¡»ä¸€è‡´ã€‚ [Clustering] ETCD_INITIAL_CLUSTER_STATEï¼šå®šä¹‰etcdé›†ç¾¤çš„çŠ¶æ€ï¼Œnewä»£è¡¨æ–°å»ºé›†ç¾¤ï¼Œexistingä»£è¡¨åŠ å…¥ç°æœ‰é›†ç¾¤ã€‚4.2 æŒ‡å®šå‚æ•°å¯åŠ¨etcdå¦‚æœæˆ‘ä»¬æŒ‡å®šå‚æ•°å¯åŠ¨etcdï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šç¯å¢ƒé…ç½®å˜é‡æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–¹å¼äºŒé€‰ä¸€å³å¯[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.target[Service]Type=notifyExecStart=/usr/local/bin/etcd \\ --name=${ETCD_NAME} \\ --data-dir=${ETCD_DATA_DIR} \\ --listen-peer-urls=${ETCD_LISTEN_PEER_URLS} \\ --listen-client-urls=${ETCD_LISTEN_CLIENT_URLS},http://127.0.0.1:2379 \\ --advertise-client-urls=${ETCD_ADVERTISE_CLIENT_URLS} \\ --initial-advertise-peer-urls=${ETCD_INITIAL_ADVERTISE_PEER_URLS} \\ --initial-cluster=${ETCD_INITIAL_CLUSTER} \\ --initial-cluster-token=${ETCD_INITIAL_CLUSTER_TOKEN} \\ --initial-cluster-state=new \\ --cert-file=/etc/etcd/ssl/server.pem \\ --key-file=/etc/etcd/ssl/server-key.pem \\ --peer-cert-file=/etc/etcd/ssl/server.pem \\ --peer-key-file=/etc/etcd/ssl/server-key.pem \\ --trusted-ca-file=/etc/etcd/ssl/ca.pem \\ --peer-trusted-ca-file=/etc/etcd/ssl/ca.pemRestart=on-failureLimitNOFILE=65536[Install]WantedBy=multi-user.target æ³¨æ„ï¼šåœ¨systemdæœåŠ¡é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†etcdçš„SSLè¯ä¹¦è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç”³è¯·çš„etcdçš„SSLè¯ä¹¦å¤åˆ¶åˆ°å¯¹åº”çš„ç›®å½•ã€‚å¦å¤–ï¼Œæ¯ä¸ªetcdèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶é‡Œçš„etcdåç§°ä¸€å®šè¦å”¯ä¸€ï¼Œå¯¹åº”çš„æœåŠ¡IPä¸ç«¯å£ä¹Ÿä¸èƒ½å‡ºé”™ã€‚åœ¨k8s-master1èŠ‚ç‚¹å®‰è£…å¥½ä¹‹åï¼Œk8s-node1å’Œk8s-node2éœ€è¦è¿›è¡Œç›¸åŒæ“ä½œï¼ŒSSLè¯ä¹¦éœ€è¦ä»k8s-master1èŠ‚ç‚¹ä¸Šä¼ è¾“è¿‡å»è¿›è¡Œå®‰è£…ã€‚äº”ã€å¯åŠ¨etcdé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹éƒ½å®‰è£…å¥½etcdä¹‹åï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤# å¯åŠ¨etcdsystemctl start etcd# è®¾ç½®å¼€æœºè‡ªå¯systemctl enable etcdå¯åŠ¨å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨etcdctlå‘½ä»¤æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦ç¡®åˆ‡æŒ‡å®šè¯ä¹¦çš„ä½ç½®etcdctl --cacert=\"/etc/etcd/ssl/ca.pem\" --cert=\"/etc/etcd/ssl/server.pem\" --key=\"/etc/etcd/ssl/server-key.pem\" --endpoints=\"https://192.168.56.101:2379,https://192.168.56.102:2379,https://192.168.56.103:2379\" endpoint health --write-out=tableå¦‚æœæ˜¾ç¤ºä¸€ä¸‹ä¿¡æ¯ï¼Œåˆ™etcdé›†ç¾¤æœåŠ¡æ­£å¸¸ï¼›å¦‚æœä¸æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼Œåˆ™éœ€è¦é‡æ–°æ£€æŸ¥å®‰è£…çš„æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œå†æ¥ä¸€æ¬¡ç¡®ä¿æ— è¯¯+-----------------------------+--------+-------------+-------+| ENDPOINT | HEALTH | TOOK | ERROR |+-----------------------------+--------+-------------+-------+| https://192.168.56.101:2379 | true | 33.529463ms | || https://192.168.56.103:2379 | true | 38.145028ms | || https://192.168.56.102:2379 | true | 34.107771ms | |+-----------------------------+--------+-------------+-------+" }, { "title": "æ€æ ·å®‰è£…etcdé›†ç¾¤", "url": "/posts/container_install-etcd-cluster.html", "categories": "å®¹å™¨ä¸è™šæ‹ŸåŒ–", "tags": "k8s", "date": "2023-01-28 14:50:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2021-01-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28etcdå¯ä»¥ç”¨äºk8sé›†ç¾¤çš„æ•°æ®åº“ï¼Œä¸‹é¢æ˜¯åœ¨å†…ç½‘å®‰è£…etcdé›†ç¾¤çš„è¯¦ç»†æ­¥éª¤ä¸€ã€ä¸ºetcdé¢å‘SSLè¯ä¹¦1.1 é¢å‘æ­¥éª¤åŠ å¯†è¯ä¹¦æˆ‘ä»¬å¯ä»¥å‘è¯ä¹¦æœºæ„ï¼ˆCAï¼‰ç”³è¯·ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬éƒ¨ç½²åœ¨å†…ç½‘ï¼Œæˆ‘ä»¬è‡ªå·±è‡ªå·±åˆ›å»ºä¸€ä¸ªCAåç»™è‡ªå·±é¢å‘è¯ä¹¦ï¼Œæ­¥éª¤å¦‚ä¸‹ ï¼ˆ1ï¼‰åˆ›å»ºè¯ä¹¦é¢å‘æœºæ„ ï¼ˆ2ï¼‰å¡«å†™è¡¨å•â€“å†™æ˜etcdæ‰€åœ¨èŠ‚ç‚¹çš„IP ï¼ˆ3ï¼‰å‘è¯ä¹¦é¢å‘ç»“æ„...", "content": " æ’°å†™æ—¶é—´ï¼š2021-01-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28etcdå¯ä»¥ç”¨äºk8sé›†ç¾¤çš„æ•°æ®åº“ï¼Œä¸‹é¢æ˜¯åœ¨å†…ç½‘å®‰è£…etcdé›†ç¾¤çš„è¯¦ç»†æ­¥éª¤ä¸€ã€ä¸ºetcdé¢å‘SSLè¯ä¹¦1.1 é¢å‘æ­¥éª¤åŠ å¯†è¯ä¹¦æˆ‘ä»¬å¯ä»¥å‘è¯ä¹¦æœºæ„ï¼ˆCAï¼‰ç”³è¯·ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬éƒ¨ç½²åœ¨å†…ç½‘ï¼Œæˆ‘ä»¬è‡ªå·±è‡ªå·±åˆ›å»ºä¸€ä¸ªCAåç»™è‡ªå·±é¢å‘è¯ä¹¦ï¼Œæ­¥éª¤å¦‚ä¸‹ ï¼ˆ1ï¼‰åˆ›å»ºè¯ä¹¦é¢å‘æœºæ„ ï¼ˆ2ï¼‰å¡«å†™è¡¨å•â€“å†™æ˜etcdæ‰€åœ¨èŠ‚ç‚¹çš„IP ï¼ˆ3ï¼‰å‘è¯ä¹¦é¢å‘ç»“æ„ç”³è¯·è¯ä¹¦1.2 å®‰è£…cfsslä»cfsslå®˜ç½‘ä¸­é€‰æ‹©å¯¹åº”çš„cfsslç›¸å…³å¯æ‰§è¡Œç¨‹åºï¼Œhttps://pkg.cfssl.org/è¿™é‡Œç›´æ¥ä½¿ç”¨wgetä¸‹è½½ä¿å­˜åˆ°/usr/local/binç›®å½•ä¸­# ä¸‹è½½cfsslwget -c https://pkg.cfssl.org/R1.2/cfssl_linux-amd64 -O /usr/local/bin/cfssl# ä¸‹è½½cfssl-certinfowget -c https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64 -O /usr/local/bin/cfssl-certinfo# ä¸‹è½½cfssljsonwget -c https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64 -O /usr/local/bin/cfssljson# èµ‹äºˆcfsslç›¸å…³å¯æ‰§è¡Œæƒé™chmod a+x /usr/local/bin/cfssl*1.3 é¢å‘è¯ä¹¦1.3.1 åˆ›å»ºç­¾è¯æœºæ„ï¼ˆCAï¼‰å®šä¹‰ä¸€ä¸ªca-csr.jsonæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶å®šä¹‰ç­¾è¯æœºæ„ï¼ˆCAï¼‰çš„ç›¸å…³ä¿¡æ¯ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹{ \"CN\": \"etcd CA\", \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [ { \"C\": \"CN\", \"L\": \"Guizhou\", \"ST\": \"Qiandongnan\" } ]}ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç­¾è¯æœºæ„cfssl gencert -initca ca-csr.json | cfssljson -bare ca -ä¼šç”Ÿæˆä¸€ä¸ªca.pemå…¬é’¥æ–‡ä»¶å’Œca-key.pemç§é’¥æ–‡ä»¶ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶æ˜¯CAæœåŠ¡å™¨çš„è¯ä¹¦ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç»™å®¢æˆ·ç«¯é¢å‘è¯ä¹¦ã€‚1.3.2 å®šä¹‰è¯ä¹¦ä¿¡æ¯å…ˆåˆ›å»ºä¸€ä¸ªca-config.jsonæ–‡ä»¶ï¼Œå®šä¹‰å¾…é¢å‘è¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ï¼ˆå¦‚æœ‰æ•ˆæ—¶é—´ï¼‰ï¼Œå¡«å†™ä»¥ä¸‹å†…å®¹{ \"signing\": { \"default\": { \"expiry\": \"87600h\" }, \"profiles\": { \"www\": { \"expiry\": \"87600h\", \"usages\": [ \"signing\", \"key encipherment\", \"server auth\", \"client auth\" ] } } }}å†åˆ›å»ºä¸€ä¸ªserver-csr.jsonæ–‡ä»¶ï¼Œå®šä¹‰å¾…é¢å‘è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä¸‹{ \"CN\": \"etcd\", \"hosts\": [ \"192.168.56.101\", \"192.168.56.102\", \"192.168.56.103\" ], \"key\": { \"algo\": \"rsa\", \"size\": 2048 }, \"names\": [{ \"C\": \"CN\", \"L\": \"Guizhou\", \"ST\": \"Qiandongnan\" }]}ç›¸å…³å‚æ•° CNï¼šè¯ä¹¦åç§° hostsï¼šé¢å‘çš„ä¸»æœº keyï¼šå®šä¹‰è¯ä¹¦ç±»å‹ï¼Œalgoä¸ºåŠ å¯†ç±»å‹ï¼Œsizeä¸ºåŠ å¯†é•¿åº¦ namesï¼šè¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯1.3.3 å‘ç­¾è¯æœºæ„ï¼ˆCAï¼‰ç”³è¯·è¯ä¹¦å®Œæˆä»¥ä¸Šæ­¥éª¤ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç»™å®¢æˆ·ç«¯ç”³è¯·è¯ä¹¦cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www server-csr.json | cfssljson -bare serveræ­¤æ—¶ï¼Œå¤šå‡ºå®¢æˆ·ç«¯ä¸¤ä¸ªè¯ä¹¦ç›¸å…³æ–‡ä»¶server.pemå’Œserver-key.pemï¼Œä½¿ç”¨ls *pemå‘½ä»¤æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°å››ä¸ªpemæ–‡ä»¶ï¼Œå¦‚ä¸‹ca-key.pem ca.pem server-key.pem server.pemäºŒã€æ‰‹åŠ¨ç¼–è¯‘å®‰è£…æœ€æ–°ç‰ˆæœ¬etcdæˆ‘ä»¬ä»æºç å®‰è£…æ—¶ï¼Œå°†å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬æ­¥ç¨³å®šçš„é¢„è§ˆç‰ˆæœ¬ï¼Œæ­¤å®‰è£…æ–¹å¼ä¾›å¤§å®¶å­¦ä¹ ï¼Œä¸è§å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚2.1 å®‰è£…golangetcdåœ¨æ„å»ºçš„æ—¶å€™éœ€è¦golangç¯å¢ƒï¼Œæ‰€ä»¥å…ˆå®‰è£…golangï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤# æ·»åŠ golangé•œåƒä»“åº“rpm --import https://mirror.go-repo.io/centos/RPM-GPG-KEY-GO-REPOcurl -s https://mirror.go-repo.io/centos/go-repo.repo | sudo tee /etc/yum.repos.d/go-repo.repo# å®‰è£…golangyum install golang -y# ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹goå®‰è£…ç‰ˆæœ¬go versionå¦‚æœå‡ºç°ä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯æ˜å®‰è£…æˆåŠŸgo version go1.15.6 linux/amd64æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®goproxyé˜¿é‡Œäº‘åŠ é€Ÿé•œåƒï¼Œç¼–è¾‘/etc/profileæ–‡ä»¶ï¼Œåœ¨æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹export GOPROXY=https://mirrors.aliyun.com/goproxy/å¹¶è®©/etc/profileé‡Œé¢çš„å‘½ä»¤é‡æ–°æ‰§è¡Œï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤source /etc/profile2.2 ç¼–è¯‘å®‰è£…etcdé¦–å…ˆä»githubä¸­ä¸‹è½½æºä»£ç åŒ…ï¼Œå¹¶æ‰§è¡Œæ„å»ºå‘½ä»¤git clone https://github.com/etcd-io/etcd.gitcd etcd./buildæœ€ç»ˆè‹¥æ˜¯è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯æ˜æ„å»ºæˆåŠŸstderr: go: downloading github.com/urfave/cli v1.22.4 stderr: go: downloading github.com/bgentry/speakeasy v0.1.0stderr: go: downloading gopkg.in/cheggaaa/pb.v1 v1.0.28stderr: go: downloading github.com/olekukonko/tablewriter v0.0.4stderr: go: downloading github.com/mattn/go-runewidth v0.0.7stderr: go: downloading github.com/cpuguy83/go-md2man/v2 v2.0.0stderr: go: downloading github.com/russross/blackfriday/v2 v2.0.1stderr: go: downloading github.com/shurcooL/sanitized_anchor_name v1.0.0SUCCESS: etcd_buildæœ€ç»ˆç¼–è¯‘æ„å»ºæˆåŠŸä¹‹åç”Ÿæˆçš„æ–‡ä»¶åœ¨æºç ç›®å½•ä¸‹çš„binç›®å½•ï¼Œä½¿ç”¨ls -al bin/å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ°ç”Ÿæˆäº†etcdå’Œetcdctlä¸¤ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ€»ç”¨é‡ 52112drwxr-xr-x. 2 root root 33 1æœˆ 15 10:16 .drwxr-xr-x. 19 root root 4096 1æœˆ 15 10:15 ..-rwxr-xr-x. 1 root root 29862882 1æœˆ 15 10:15 etcd-rwxr-xr-x. 1 root root 23492302 1æœˆ 15 10:16 etcdctlæ­¤æ—¶æˆ‘ä»¬å¯ä»¥æŠŠetcdå¯æ‰§è¡Œç¨‹åºæ‹·è´åˆ°ç³»ç»Ÿä¸­cp bin/etcd* /usr/local/binä¸‰ã€ä»etcdäºŒè¿›åˆ¶æ–‡ä»¶åŒ…å®‰è£…etcdetcdå®˜æ–¹æä¾›ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œå®‰è£…çš„æ–¹å¼ã€‚å¦‚æœä½¿ç”¨äºŒè¿›åˆ¶å®‰è£…åŒ…å®‰è£…ï¼Œå¯ä»¥ä¸å®‰è£…golangï¼Œä¸‹è½½å®˜æ–¹æä¾›çš„äºŒè¿›åˆ¶ç¨‹åºåŒ…è¿›è¡Œè§£å‹åï¼Œå¯ç›´æ¥å¾—åˆ°æ–¹å¼ä¸€ä¸­çš„etcdå’Œetcdctlã€‚ä¸‹è½½åœ°å€ä¸ºhttps://github.com/etcd-io/etcd/releases/åç»­æ­¥éª¤å’Œæ–¹å¼ä¸€ä¸€æ ·ï¼Œå³å…ˆåˆ›å»ºetcdç›®å½•ï¼Œå†æŠŠetcdå’Œetcdctlä¸¤ä¸ªæ–‡ä»¶æ‹·è´åˆ°å¯¹åº”ç›®å½•å³å¯ã€‚åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œetcdæœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ä¸º3.4.14ï¼Œæ‰€ä»¥æˆ‘ä»¬æŒ‡å®š3.4.14ç‰ˆæœ¬è¿›è¡Œä¸‹è½½# ä¸‹è½½äºŒè¿›åˆ¶ç¨‹åºåŒ…wget https://github.com/etcd-io/etcd/releases/download/v3.4.14/etcd-v3.4.14-linux-amd64.tar.gz# è§£å‹ç¨‹åºtar -zxvf etcd-v3.4.14-linux-amd64.tar.gz# å¤åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶åˆ°ç³»ç»Ÿcp etcd-v3.4.14-linux-amd64/etcd* /usr/local/bin/å››ã€é…ç½®etcdæœåŠ¡ç®¡ç†è„šæœ¬æˆ‘ä»¬å·²ç»å°†etcdå®‰è£…åˆ°ç³»ç»Ÿä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¼–å†™etcdçš„systemdæœåŠ¡ç®¡ç†è„šæœ¬ï¼Œç”¨systemdæ¥ç®¡ç†etcdçš„å¯åŠ¨ã€‚systemdçŸ¥è¯†å±äºLinuxçš„ç³»ç»ŸçŸ¥è¯†ï¼Œæˆ‘ä»¬åªä»‹ç»æœ¬æ¬¡ç”¨åˆ°çš„çŸ¥è¯†ç‚¹ï¼Œå…¶ä»–éƒ¨åˆ†åœ¨è¿™é‡Œä¸ä¼šèµ˜è¿°ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼ŒsystemdæœåŠ¡ç®¡ç†è„šæœ¬åœ¨ä»¥ä¸‹ä¸¤ä¸ªç›®å½• ç³»ç»Ÿè„šæœ¬ç›®å½•ç³»ç»Ÿé»˜è®¤çš„æœåŠ¡è„šæœ¬ç›®å½•/etc/systemd/system ç”¨æˆ·è„šæœ¬ç›®å½•ç”¨æˆ·è‡ªå®šä¹‰è„šæœ¬ï¼Œé€šå¸¸ä¿å­˜åœ¨è¿™ä¸ªç›®å½•/usr/lib/systemd/systemåˆ›å»ºä¸€ä¸ªsystemdæœåŠ¡ç®¡ç†è„šæœ¬/usr/lib/systemd/system/etcd.serviceï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­å®šä¹‰å†…å®¹ã€‚ä¸‹æ–‡ä»‹ç»å¯åŠ¨etcdçš„ä¸¤ç§æ–¹å¼ã€‚4.1 æŒ‡å®šç¯å¢ƒå˜é‡å¯åŠ¨etcdåœ¨æœåŠ¡è„šæœ¬æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.target[Service]Type=notifyEnvironmentFile=/etc/etcd/conf/etcd.confExecStart=/usr/local/bin/etcd \\ --cert-file=/etc/etcd/ssl/server.pem \\ --key-file=/etc/etcd/ssl/server-key.pem \\ --peer-cert-file=/etc/etcd/ssl/server.pem \\ --peer-key-file=/etc/etcd/ssl/server-key.pem \\ --trusted-ca-file=/etc/etcd/ssl/ca.pem \\ --peer-trusted-ca-file=/etc/etcd/ssl/ca.pemRestart=on-failureLimitNOFILE=65536[Install]WantedBy=multi-user.targetsyetemdå‚æ•°é…ç½®æ–‡ä»¶çš„UnitèŠ‚ç‚¹ç”¨æ¥å®šä¹‰å…ƒæ•°æ®ï¼ŒServiceèŠ‚ç‚¹ç”¨æ¥é…ç½®æœåŠ¡ï¼ŒInstallèŠ‚ç‚¹æ˜¯é…ç½®æ–‡ä»¶çš„æœ€åä¸€ä¸ªåŒºå—ï¼Œç”¨æ¥å®šä¹‰æœåŠ¡å¯åŠ¨æ–¹å¼ [Unit] Descriptionï¼šæœåŠ¡æè¿° [Unit] Afterï¼šå½“å‰Unitéœ€è¦åœ¨å“ªäº›Unitå¯åŠ¨ä¹‹åå¯åŠ¨ [Unit] Wantsï¼šä¸å½“å‰ Unit é…åˆçš„å…¶ä»– Unitï¼Œå¦‚æœå…¶ä»–Unitæ²¡æœ‰è¿è¡Œï¼Œå½“å‰ Unit ä¹Ÿä¸ä¼šå¯åŠ¨å¤±è´¥ [Service] Typeï¼šå®šä¹‰å¯åŠ¨è¿›ç¨‹çš„è¡Œä¸ºï¼Œå€¼ä¸ºnotifyæ—¶ï¼Œä»£è¡¨å½“å‰æœåŠ¡å¯åŠ¨å®Œæ¯•ï¼Œä¼šé€šçŸ¥Systemdï¼Œå†ç»§ç»­å¾€ä¸‹æ‰§è¡Œ [Service] EnvironmentFileï¼šæŒ‡å®šç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ [Service] ExecStartï¼šå¯åŠ¨å½“å‰æœåŠ¡çš„å‘½ä»¤ [Service] Restartï¼šå®šä¹‰ä½•ç§æƒ…å†µ Systemd ä¼šè‡ªåŠ¨é‡å¯å½“å‰æœåŠ¡ï¼Œon-failureä»£è¡¨æœåŠ¡åœæ­¢åä¼šé‡å¯ [Service] LimitNOFILEï¼šè®¾ç½®èµ„æºé™åˆ¶ï¼Œå³ç”¨æˆ·æœ€å¤šå¯ä»¥ä½¿ç”¨å¤šå°‘ä¸ªè¿›ç¨‹ [Install] WantedByï¼šå½“å€¼ä¸ºmulti-user.targetæ—¶ï¼Œä»£è¡¨ç³»ç»Ÿå¤§éƒ¨åˆ†é»˜è®¤æœåŠ¡å¯åŠ¨äº†ï¼ˆä¸åŒ…å«GUIï¼‰ï¼ŒæœåŠ¡è·Ÿç€å¯åŠ¨ã€‚åœ¨systemdæœåŠ¡é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ€éœ€è¦å…³æ³¨çš„æ˜¯[Service] ExecStartï¼Œè¿™ä¸ªå‚æ•°å®šä¹‰systemdå»å“ªé‡Œæ‰¾etcdçš„å¯åŠ¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šetcdå…·ä½“çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚æˆ‘ä»¬è¿˜æŒ‡å®šäº†etcdè¿è¡Œæ—¶çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å¯¹åº”çš„è·¯å¾„ï¼ˆ/etc/etcd/conf/etcd.confï¼‰åˆ›å»ºå…¶å¯¹åº”æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹#[Member]ETCD_NAME=\"etcd-1\"ETCD_DATA_DIR=\"/var/lib/etcd/default.etcd\"ETCD_LISTEN_PEER_URLS=\"https://192.168.56.101:2380\"ETCD_LISTEN_CLIENT_URLS=\"https://192.168.56.101:2379\"#[Clustering]ETCD_INITIAL_ADVERTISE_PEER_URLS=\"https://192.168.56.101:2380\"ETCD_ADVERTISE_CLIENT_URLS=\"https://192.168.56.101:2379\"ETCD_INITIAL_CLUSTER=\"etcd-1=https://192.168.56.101:2380,etcd-2=https://192.168.56.102:2380,etcd-3=https://192.168.56.103:2380\"ETCD_INITIAL_CLUSTER_TOKEN=\"etcd-cluster\"ETCD_INITIAL_CLUSTER_STATE=\"new\"åœ¨etcdçš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸­ï¼ŒåŒ…å«ä¸¤æ®µï¼Œ[Member]ä¹‹ä¸‹æ˜¯å•èŠ‚ç‚¹é…ç½®å‚æ•°ï¼Œ[Clustering]èŠ‚ç‚¹ä¸‹æ˜¯é›†ç¾¤é…ç½®å‚æ•° [Member] ETCD_NAMEï¼šå½“å‰etcdçš„å”¯ä¸€åç§°ï¼Œè¦ä¿è¯å’Œå…¶ä»–èŠ‚ç‚¹ä¸å†²çª [Member] ETCD_DATA_DIRï¼šæŒ‡å®šetcdå­˜å‚¨æ•°æ®çš„å­˜å‚¨ä½ç½® [Member] ETCD_LISTEN_PEER_URLSï¼šæŒ‡å®šå½“å‰etcdå’Œå…¶ä»–èŠ‚ç‚¹etcdé€šä¿¡æ—¶çš„æœåŠ¡åœ°å€å’Œç«¯å£ã€‚å‡å¦‚etcdé›†ç¾¤ä¸­åŒ…å«ä¸‰ä¸ªetcdæœåŠ¡ï¼Œé‚£ä¹ˆä¸‰ä¸ªetcdèŠ‚ç‚¹æ„æˆäº†ä¸€ä¸ªé«˜å¯ç”¨é›†ç¾¤ï¼Œetcdé›†ç¾¤ä¼šè‡ªåŠ¨é€‰ä¸¾ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºä¸»èŠ‚ç‚¹ï¼Œå¦å¤–ä¸¤ä¸ªèŠ‚ç‚¹ä½œä¸ºä»èŠ‚ç‚¹ã€‚æ‰€æœ‰çš„å†™å…¥æ“ä½œå°†å¾€ä¸»èŠ‚ç‚¹å†™ï¼Œæ‰€æœ‰çš„è¯»æ“ä½œåœ¨ä»èŠ‚ç‚¹ä¸Šè¯»ï¼Œè¿™æ˜¯etcdè¯»å†™çš„è¿‡ç¨‹ã€‚ä¸Šè¿°è®¾ç½®çš„2380ç«¯å£ï¼Œç”¨æ¥ç›‘å¬å…¶ä»–etcdèŠ‚ç‚¹å‘é€è¿‡æ¥çš„æ•°æ®ã€‚ [Member] ETCD_LISTEN_CLIENT_URLSï¼šæŒ‡å®šå½“å‰etcdæ¥æ”¶å®¢æˆ·ç«¯æŒ‡ä»¤çš„åœ°å€å’Œç«¯å£ï¼Œåœ¨è¿™é‡Œçš„å®¢æˆ·ç«¯æˆ‘ä»¬æŒ‡çš„æ˜¯k8sé›†ç¾¤çš„masterèŠ‚ç‚¹ã€‚ [Clustering] ETCD_INITIAL_ADVERTISE_PEER_URLSï¼šæŒ‡å®šetcdå¹¿æ’­ç«¯å£ï¼Œå½“å‰etcdä¼šå°†æ•°æ®åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ï¼Œé€šè¿‡2380ç«¯å£å‘é€ã€‚ [Clustering] ETCD_ADVERTISE_CLIENT_URLSï¼šç»™å®¢æˆ·ç«¯é€šå‘Šçš„ç«¯å£ã€‚ [Clustering] ETCD_INITIAL_CLUSTERï¼šå®šä¹‰etcdé›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„åç§°å’ŒIPï¼Œä»¥åŠé€šä¿¡ç«¯å£ã€‚ [Clustering] ETCD_INITIAL_CLUSTER_TOKENï¼šå®šä¹‰etcdé›†ç¾¤ä¸­é€šä¿¡çš„tokenï¼Œæ‰€æœ‰èŠ‚ç‚¹å¿…é¡»ä¸€è‡´ã€‚ [Clustering] ETCD_INITIAL_CLUSTER_STATEï¼šå®šä¹‰etcdé›†ç¾¤çš„çŠ¶æ€ï¼Œnewä»£è¡¨æ–°å»ºé›†ç¾¤ï¼Œexistingä»£è¡¨åŠ å…¥ç°æœ‰é›†ç¾¤ã€‚4.2 æŒ‡å®šå‚æ•°å¯åŠ¨etcdå¦‚æœæˆ‘ä»¬æŒ‡å®šå‚æ•°å¯åŠ¨etcdï¼Œåˆ™ä¸éœ€è¦æŒ‡å®šç¯å¢ƒé…ç½®å˜é‡æ–‡ä»¶ï¼Œè¿™ä¸¤ç§æ–¹å¼äºŒé€‰ä¸€å³å¯[Unit]Description=Etcd ServerAfter=network.targetAfter=network-online.targetWants=network-online.target[Service]Type=notifyExecStart=/usr/local/bin/etcd \\ --name=${ETCD_NAME} \\ --data-dir=${ETCD_DATA_DIR} \\ --listen-peer-urls=${ETCD_LISTEN_PEER_URLS} \\ --listen-client-urls=${ETCD_LISTEN_CLIENT_URLS},http://127.0.0.1:2379 \\ --advertise-client-urls=${ETCD_ADVERTISE_CLIENT_URLS} \\ --initial-advertise-peer-urls=${ETCD_INITIAL_ADVERTISE_PEER_URLS} \\ --initial-cluster=${ETCD_INITIAL_CLUSTER} \\ --initial-cluster-token=${ETCD_INITIAL_CLUSTER_TOKEN} \\ --initial-cluster-state=new \\ --cert-file=/etc/etcd/ssl/server.pem \\ --key-file=/etc/etcd/ssl/server-key.pem \\ --peer-cert-file=/etc/etcd/ssl/server.pem \\ --peer-key-file=/etc/etcd/ssl/server-key.pem \\ --trusted-ca-file=/etc/etcd/ssl/ca.pem \\ --peer-trusted-ca-file=/etc/etcd/ssl/ca.pemRestart=on-failureLimitNOFILE=65536[Install]WantedBy=multi-user.target æ³¨æ„ï¼šåœ¨systemdæœåŠ¡é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº†etcdçš„SSLè¯ä¹¦è·¯å¾„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç”³è¯·çš„etcdçš„SSLè¯ä¹¦å¤åˆ¶åˆ°å¯¹åº”çš„ç›®å½•ã€‚å¦å¤–ï¼Œæ¯ä¸ªetcdèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶é‡Œçš„etcdåç§°ä¸€å®šè¦å”¯ä¸€ï¼Œå¯¹åº”çš„æœåŠ¡IPä¸ç«¯å£ä¹Ÿä¸èƒ½å‡ºé”™ã€‚åœ¨k8s-master1èŠ‚ç‚¹å®‰è£…å¥½ä¹‹åï¼Œk8s-node1å’Œk8s-node2éœ€è¦è¿›è¡Œç›¸åŒæ“ä½œï¼ŒSSLè¯ä¹¦éœ€è¦ä»k8s-master1èŠ‚ç‚¹ä¸Šä¼ è¾“è¿‡å»è¿›è¡Œå®‰è£…ã€‚äº”ã€å¯åŠ¨etcdé›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹éƒ½å®‰è£…å¥½etcdä¹‹åï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸€æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤# å¯åŠ¨etcdsystemctl start etcd# è®¾ç½®å¼€æœºè‡ªå¯systemctl enable etcdå¯åŠ¨å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨ä»»æ„èŠ‚ç‚¹ä½¿ç”¨etcdctlå‘½ä»¤æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦ç¡®åˆ‡æŒ‡å®šè¯ä¹¦çš„ä½ç½®etcdctl --cacert=\"/etc/etcd/ssl/ca.pem\" --cert=\"/etc/etcd/ssl/server.pem\" --key=\"/etc/etcd/ssl/server-key.pem\" --endpoints=\"https://192.168.56.101:2379,https://192.168.56.102:2379,https://192.168.56.103:2379\" endpoint health --write-out=tableå¦‚æœæ˜¾ç¤ºä¸€ä¸‹ä¿¡æ¯ï¼Œåˆ™etcdé›†ç¾¤æœåŠ¡æ­£å¸¸ï¼›å¦‚æœä¸æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼Œåˆ™éœ€è¦é‡æ–°æ£€æŸ¥å®‰è£…çš„æ¯ä¸€ä¸ªæ­¥éª¤ï¼Œå†æ¥ä¸€æ¬¡ç¡®ä¿æ— è¯¯+-----------------------------+--------+-------------+-------+| ENDPOINT | HEALTH | TOOK | ERROR |+-----------------------------+--------+-------------+-------+| https://192.168.56.101:2379 | true | 33.529463ms | || https://192.168.56.103:2379 | true | 38.145028ms | || https://192.168.56.102:2379 | true | 34.107771ms | |+-----------------------------+--------+-------------+-------+" }, { "title": "æ€æ ·ä½¿ç”¨Dockerè¿è¡Œphpé¡¹ç›®ï¼Ÿ", "url": "/posts/container_run-php-on-docker.html", "categories": "å®¹å™¨ä¸è™šæ‹ŸåŒ–", "tags": "docker", "date": "2023-01-28 14:47:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-12-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€.æ¦‚è¿°Dockerå°±æ˜¯ç°åœ¨æœ€çƒ­é—¨çš„å®¹å™¨å¼•æ“æŠ€æœ¯ï¼Œåœ¨æœ¬æ–‡ä¸å†èµ˜è¿°åŸºæœ¬æ¦‚å¿µï¼Œå¦‚æœä½ å¬è¯´è¿‡Dockerï¼Œé‚£ä½ è‚¯å®šä¼šå¬è¿‡ â€œé•œåƒâ€ã€â€å®¹å™¨â€ ä¹‹ç±»çš„å…³é”®è¯ã€‚ä¸è¿‡ï¼Œè¿™ç¯‡åšå®¢ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œç»™å¤§å®¶æ¼”ç¤ºDockeræ€ä¹ˆå¿«é€Ÿæ­å»ºPHPè¿è¡Œç¯å¢ƒã€‚äºŒ.åŸºç¡€ç¯å¢ƒ LinuxæœåŠ¡å™¨ (CentOS , Ubuntu , Debian ç­‰, è¿™...", "content": " æ’°å†™æ—¶é—´ï¼š2019-12-14ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€.æ¦‚è¿°Dockerå°±æ˜¯ç°åœ¨æœ€çƒ­é—¨çš„å®¹å™¨å¼•æ“æŠ€æœ¯ï¼Œåœ¨æœ¬æ–‡ä¸å†èµ˜è¿°åŸºæœ¬æ¦‚å¿µï¼Œå¦‚æœä½ å¬è¯´è¿‡Dockerï¼Œé‚£ä½ è‚¯å®šä¼šå¬è¿‡ â€œé•œåƒâ€ã€â€å®¹å™¨â€ ä¹‹ç±»çš„å…³é”®è¯ã€‚ä¸è¿‡ï¼Œè¿™ç¯‡åšå®¢ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œç»™å¤§å®¶æ¼”ç¤ºDockeræ€ä¹ˆå¿«é€Ÿæ­å»ºPHPè¿è¡Œç¯å¢ƒã€‚äºŒ.åŸºç¡€ç¯å¢ƒ LinuxæœåŠ¡å™¨ (CentOS , Ubuntu , Debian ç­‰, è¿™é‡Œä½¿ç”¨çš„æ˜¯è…¾è®¯äº‘æœåŠ¡å™¨, é¢„è£… Debian 9.0 æ“ä½œç³»ç»Ÿ) Dockerä¸‰.æ“ä½œæµç¨‹3.1 å®‰è£…Dockerdockerå…¬å¸æä¾›äº†Docker EEï¼ˆEnterprise Editionï¼‰ å’Œ Docker CE ï¼ˆCommunity Editionï¼‰ç‰ˆæœ¬ï¼ŒEE ç‰ˆæœ¬æ¶‰åŠå•†ä¸šæœåŠ¡ï¼Œè€ŒCEç‰ˆæœ¬æ˜¯Dockerçš„å…è´¹äº§å“ï¼ŒåŒ…å«äº†å®Œæ•´çš„Dockerå¹³å°ã€‚æˆ‘ä»¬å¯ä»¥ä»å„ä¸ªLinuxå‘è¡Œç‰ˆæœ¬çš„è½¯ä»¶åº“ä¸­å®‰è£…ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä»å®˜æ–¹æä¾›çš„è„šæœ¬å®‰è£…ï¼Œè¿™æ ·èƒ½å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ã€‚å› ä¸ºåœ¨å›½å†…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡é˜¿é‡Œäº‘é•œåƒå®‰è£…ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyunå®‰è£…å®Œæˆä¹‹åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹Dockerç‰ˆæœ¬ä¿¡æ¯docker -væˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨,æ·»åŠ ä»¥ä¸‹ä»£ç { \"registry-mirrors\": [\"https://registry.cn-hangzhou.aliyuncs.com\"]}é‡å¯DockeræœåŠ¡åï¼Œæˆ‘ä»¬ä¸‹è½½çš„å®˜æ–¹é•œåƒä¼šä»é˜¿é‡Œäº‘ä¸Šå»æ‹‰å–ï¼Œä¸è¿‡ç§äººé•œåƒè¿˜æ˜¯ä»Dockerå®˜æ–¹çš„Dockerhubå»æ‹‰å–ï¼ŒDebianä¸­ä½¿ç”¨ä»¥ä¸‹ä»£ç é‡å¯DockeræœåŠ¡systemctl restart docker3.2 ä¸‹è½½Dockeré•œåƒç›®å‰æ¯”è¾ƒçƒ­é—¨çš„æœåŠ¡å™¨æ˜¯ Apache å’Œ Nginxï¼Œå®é™…ä¸Šï¼Œä»–ä»¬å„è‡ªæœ‰ä¼˜ç¼ºç‚¹, ä¸èƒ½è¯´è°å¥½è°åï¼Œé€‚åˆè‡ªå·±çš„æ‰æ˜¯æœ€å¥½çš„ã€‚ä»Šå¤©æˆ‘ä»¬åŸºäºPHPçš„å®˜æ–¹Dockeré•œåƒ php-apache æ¥æ­å»ºapacheæœåŠ¡å™¨åŸºç¡€ç¯å¢ƒ. è¯¦ç»†æ–‡æ¡£å¯ä»¥å‚è€ƒ[https://hub.docker.com//php](https://hub.docker.com//php)ä¸è¿‡Dockerhubä¸Šå®˜æ–¹çš„php-apacheé•œåƒæ‰©å±•å¾ˆå°‘ï¼Œå¯èƒ½æ»¡è¶³å®é™…é¡¹ç›®ä¸­æœ€åŸºæœ¬çš„ä¾èµ–éœ€æ±‚ï¼Œå› æ­¤åœ¨ php:7.2-apacheå®˜æ–¹é•œåƒçš„åŸºç¡€ä¹‹ä¸Šæˆ‘å®‰è£…äº† gd åº“(ç”¨æ¥å¤„ç†å›¾ç‰‡),å¹¶å®‰è£…äº† mysqli å’Œ pdo_mysqlæ‰©å±•ï¼Œç”¨æ¥é©±åŠ¨ mysqlæ•°æ®åº“ã€‚è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒæˆ‘çš„ä¸ªäººdockerhubä»“åº“é“¾æ¥ https://hub.docker.com/r/jkdev/phpæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‹‰å–è‡ªå®šä¹‰çš„é•œåƒ# æ‹‰å–é•œåƒdocker pull jkdev/php:7.2-apache# æ‹‰å–å®Œæˆä¹‹å,æŸ¥çœ‹æœ¬åœ°é•œåƒdocker images3.3 åˆ›å»ºDockerå®¹å™¨è¿è¡Œé¡¹ç›®æˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾webé¡¹ç›®çš„ç›®å½•,å¦‚ä¸‹ä»£ç # åˆ›å»ºç›®å½•mkdir /www# è¿›å…¥ç›®å½•cd /wwwç°åœ¨æˆ‘ä»¬åŸºäºjkdev/php:7.2-apacheé•œåƒåˆ›å»ºDockerå®¹å™¨ï¼Œå¹¶æŠŠ/wwwç›®å½•æ˜ å°„åˆ°dockerä¸­å¯¹åº”çš„apacheçš„webé¡¹ç›®ç›®å½•ï¼Œå¦‚ä»¥ä¸‹å‘½ä»¤docker run -d -p 80:80 -p 443:443 -p 465:465 --name apache -v /etc/localtime:/etc/localtime:ro -v \"$PWD\":/var/www/html jkdev/php:7.2-apacheå‚æ•°è¯´æ˜ run: ä»£è¡¨è¿è¡Œä¸€ä¸ªå®¹å™¨ -d: åœ¨åå°è¿è¡Œå®¹å™¨ -p: å°†å®¿ä¸»æœºç«¯å£ä¸å®¹å™¨ç«¯å£è¿›è¡Œæ˜ å°„,æ ¼å¼ä¸º &lt; å®¿ä¸»æœºç«¯å£&gt;: â€“name: æŒ‡å®šå®¹å™¨çš„åç§° -v: å°†ä¸»æœºçš„ç›®å½•ä¸å®¹å™¨ç›®å½•è¿›è¡Œæ˜ å°„,æ ¼å¼ä¸º :3.4 è¿è¡Œé¡¹ç›®æˆ‘ä»¬ä½¿ç”¨çš„é•œåƒä¸­,apacheé›†æˆäº†phpç¯å¢ƒ,æ‰€ä»¥åŸºäºæ­¤é•œåƒå¯åŠ¨çš„å®¹å™¨å¯ä»¥ä½œä¸ºhtmlä»£ç å’Œphpä»£ç çš„å®¹å™¨,å¹¶ä¸”å‘å…¬ç½‘å¼€æ”¾. ä¸‹é¢æˆ‘ä»¬ä»githubä¸Šæ‹‰å–ä¸€ä¸ªhtmlç®€å•é¡¹ç›®,ä½œä¸ºéƒ¨ç½²çš„ç½‘ç«™# é¦–å…ˆç¡®å®šæˆ‘ä»¬æ‰€åœ¨çš„ç›®å½•æ˜¯å‰é¢æŒ‡å®šwebç›®å½•cd /www# æ›´æ–°è½¯ä»¶ä»“åº“apt update# å®‰è£…git apt install git# ä»githubæ‹‰å»ä¸€ä»½å¼€æºä»£ç git clone https://github.com/kotlindev/HTML-News-Page.git# å°†æºä»£ç å¤åˆ¶åˆ°webæ ¹ç›®å½•mv HTML-News-Page/* ./å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬éƒ¨ç½²çš„HTMLé™æ€ç•Œé¢äº†å››ã€æ€»ç»“å®é™…ä¸Šï¼Œè¿™ç¯‡åšå®¢å¹¶ä¸æ˜¯ç³»ç»Ÿåœ°ä»‹ç»dcokeråŸºç¡€çŸ¥è¯†ï¼Œåªæ˜¯ä½¿ç”¨ç®€å•æ¼”ç¤ºä¸€ä¸‹dockerçš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯ï¼ŒapacheæœåŠ¡å™¨ä¹Ÿä¸ä»…ä»…è¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æ„Ÿå—åˆ°dockeréƒ¨ç½²é¡¹ç›®çš„æ–¹ä¾¿ä¸å¿«æ·ã€‚åé¢æˆ‘å°†ç»§ç»­ä½¿ç”¨æ–‡ç« çš„å½¢å¼ï¼Œæ›´ç³»ç»Ÿåœ°ä»‹ç»dockerçš„åŸºç¡€çŸ¥è¯†ã€‚æ¬¢è¿æŒç»­å…³æ³¨" }, { "title": "DNSé¦–é€‰ä¸å¤‡ç”¨ä½œç”¨æœºåˆ¶æ¢ç©¶", "url": "/posts/system_dns.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "dns", "date": "2023-01-28 00:30:00 +0800", "snippet": " è½¬è½½æ—¶é—´ï¼š2022-03-29ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ï¼Œè½¬è½½è‡ª http://www.360doc6.net/wxarticlenew/806020380.htmlæˆ‘ä»¬çŸ¥é“åœ¨è®¡ç®—æœºä¸Šå¯ä»¥é…ç½®é¦–é€‰DNSå’Œå¤‡ç”¨DNSï¼Œå½“é¦–é€‰DNSä¸å“åº”çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¾ç„¶å¯ä»¥é€šè¿‡è¯·æ±‚å¤‡ç”¨DNSæ¥è¿›è¡Œè§£æã€‚é‚£ä¹ˆï¼Œç©¶ç«Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œè®¡ç®—æœºæ‰ä¼šå»æ‰¾å¤‡ç”¨DNSæœåŠ¡å™¨å‘¢ï¼Ÿä»æ‰¾é¦–é€‰åˆ°æ‰¾å¤‡ç”¨ï¼Œè¿™ä¸­é—´åˆ‡æ¢çš„æ—¶é—´æ— ç–‘ä¼š...", "content": " è½¬è½½æ—¶é—´ï¼š2022-03-29ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ï¼Œè½¬è½½è‡ª http://www.360doc6.net/wxarticlenew/806020380.htmlæˆ‘ä»¬çŸ¥é“åœ¨è®¡ç®—æœºä¸Šå¯ä»¥é…ç½®é¦–é€‰DNSå’Œå¤‡ç”¨DNSï¼Œå½“é¦–é€‰DNSä¸å“åº”çš„æ—¶å€™ï¼Œè®¡ç®—æœºä¾ç„¶å¯ä»¥é€šè¿‡è¯·æ±‚å¤‡ç”¨DNSæ¥è¿›è¡Œè§£æã€‚é‚£ä¹ˆï¼Œç©¶ç«Ÿåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œè®¡ç®—æœºæ‰ä¼šå»æ‰¾å¤‡ç”¨DNSæœåŠ¡å™¨å‘¢ï¼Ÿä»æ‰¾é¦–é€‰åˆ°æ‰¾å¤‡ç”¨ï¼Œè¿™ä¸­é—´åˆ‡æ¢çš„æ—¶é—´æ— ç–‘ä¼šå½±å“åˆ°ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒï¼Œé‚£ä¹ˆè¿™ä¸­é—´çš„åˆ‡æ¢æ—¶é—´å¤§æ¦‚æ˜¯å¤šä¹…å‘¢ï¼Ÿèƒ½å¦æ›´æ”¹è¿™æ ·ä¸€ä¸ªæ—¶é—´å‘¢ï¼Ÿä¸€ã€å•ç½‘å¡æƒ…å†µé€šè¿‡æŸ¥æ‰¾å¾®è½¯èµ„æ–™ï¼Œå¹¶ä¸”å®é™…è¿›è¡ŒæŠ“åŒ…æµ‹è¯•ï¼Œå•ç½‘å¡æƒ…å†µä¸‹ï¼Œå¦‚æœé…ç½®äº†é¦–é€‰å’Œå¤‡ç”¨DNSï¼Œæƒ…å†µå¦‚ä¸‹ï¼š1)DNSå®¢æˆ·ç«¯å‘é¦–é€‰DNSå‘é€è¯·æ±‚ï¼ˆè¯•å›¾å»ºç«‹è¿æ¥ï¼‰ï¼Œç­‰å¾…1ç§’ï¼›2)å¦‚æœå®¢æˆ·ç«¯åœ¨1ç§’å†…æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™å®ƒå‘æ­¤ç½‘å¡ä¸Šçš„æ‰€æœ‰çš„DNSæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ˆè¯•å›¾å»ºç«‹è¿æ¥ï¼‰ï¼Œç­‰å¾…1ç§’ï¼›3)å¦‚æœå®¢æˆ·ç«¯åœ¨1ç§’å†…ä»ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œåˆ™å®ƒå‘æ­¤ç½‘å¡ä¸Šçš„æ‰€æœ‰çš„DNSæœåŠ¡å™¨å†æ¬¡å‘é€è¯·æ±‚ï¼Œç­‰å¾…1ç§’ï¼›4)æ­¤å¾ªç¯ä¸€ç›´è¿›è¡Œä¸‹å»ï¼ˆè‡³å°‘åœ¨æˆ‘æŠ“åŒ…çš„è¿™30ç§’å†…ï¼Œè§„å¾‹å¦‚æ­¤ï¼‰ã€‚äºŒã€å¤šç½‘å¡æƒ…å†µå¦‚æœè®¡ç®—æœºé…ç½®æœ‰å¤šå¼ ç½‘å¡ï¼Œæƒ…å†µä¼šå˜å¾—å¤æ‚ä¸€äº›ã€‚å¤šç½‘å¡æƒ…å†µä¸‹ï¼Œè®¡ç®—æœºåˆæ˜¯é€šè¿‡æ€æ ·çš„æœºåˆ¶æ¥è¯·æ±‚é¦–é€‰å’Œå¤‡ç”¨DNSæ¥è¿›è¡Œåç§°è§£æçš„å‘¢ï¼Ÿå…·ä½“çš„è¿‡ç¨‹ä¸‹å›¾ï¼š1)å®¢æˆ·ç«¯å‘èµ·DNSæŸ¥è¯¢è¯·æ±‚ï¼ŒæŸ¥è¯¢é¦–å…ˆç½‘å¡ä¸Šçš„é¦–é€‰DNSï¼Œå¹¶ç­‰å¾…1sï¼›2)1såæ²¡æœ‰å“åº”ï¼Œå‘èµ·æŸ¥è¯¢è¯·æ±‚åˆ°æ‰€æœ‰ç½‘å¡çš„é¦–é€‰DNSä¸Šï¼Œå¹¶ç­‰å¾…2sï¼›3)2såä¾æ—§æ²¡æœ‰å“åº”ï¼Œå‘èµ·è¯·æ±‚åˆ°æ‰€æœ‰ç½‘å¡çš„æ‰€æœ‰DNSä¸Šï¼Œå¹¶å†æ¬¡ç­‰å¾…2sï¼›4)2såä¾ç„¶æ²¡æœ‰å“åº”ï¼Œå†å‘èµ·æ‰€æœ‰çš„è¯·æ±‚ï¼Œå¹¶ç­‰å¾…4sï¼›5)4sè¿˜æ²¡æœ‰ï¼Œå†å‘èµ·ï¼Œå¹¶ç­‰å¾…8sï¼›6)åœ¨ä»»ä½•ä¸€æ¬¡æŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œæœ‰ä»»ä½•ä¸€ä¸ªDNSä¼˜å…ˆå“åº”ï¼Œå°±è·Ÿå®ƒè¿›è¡ŒDNSçš„æŸ¥è¯¢ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœç¼“å­˜ä¸‹æ¥ï¼›7)8sè¿˜æ²¡æœ‰å“åº”ï¼Œå®¢æˆ·ç«¯æç¤ºè¶…æ—¶ï¼›8)å¹¶ä¸”å¯¹äºæŸä¸ªç‰¹å®šçš„ç½‘å¡ï¼Œå¦‚æœè‡³æ­¤æœªæ”¶åˆ°ä»»ä½•DNSçš„å›åº”ï¼Œé‚£ä¹ˆåœ¨æ¥ä¸‹æ¥çš„30så†…ï¼Œä»æ­¤ç½‘å¡ä¸Šæ¥æ”¶åˆ°çš„æ‰€æœ‰DNSè§£æè¯·æ±‚éƒ½ä¼šè¢«å›å¤è¶…æ—¶ï¼Œç³»ç»Ÿå°†ä¸Šè¿°DNSæ ‡è®°ä¸ºè¶…æ—¶æœåŠ¡å™¨ï¼ˆä¸å¯ç”¨ï¼‰ï¼Œä¸‹æ¬¡æŸ¥è¯¢å°†ä¸å†ç”¨å®ƒï¼›9)å¦‚æœæŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œæ”¶åˆ°ä¸€ä¸ªå¦å®šçš„ç»“æœï¼ˆDNSæœåŠ¡å™¨æœ‰å“åº”ï¼Œä½†æ˜¯å®ƒè¯´ä¸çŸ¥é“ï¼‰ï¼Œå®¢æˆ·ç«¯å°†ç»ˆæ­¢æŸ¥è¯¢ï¼Œå¹¶æ¥å—è¯¥ç»“æœï¼›10)å®¢æˆ·ç«¯å¯¹DNSæœåŠ¡å™¨çš„æŸ¥è¯¢åé¦ˆä¿æŒè·Ÿè¸ªï¼Œæ ¹æ®ä»–ä»¬å“åº”çš„æ•°æ®æ¥çµæ´»ç§»åŠ¨ä»–ä»¬çš„å…ˆåé¡ºåºï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå‡ºé—®é¢˜çš„æ—¶å€™ï¼Œé¦–é€‰å’Œå¤‡é€‰çš„å…ˆåé¡ºåºä¸æ˜¯å†™æ­»çš„ï¼‰ã€‚ä»¥ä¸Šæ˜¯å•ç½‘å¡æƒ…å†µä¸‹ä»¥åŠå¤šç½‘å¡æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯è¯·æ±‚é¦–é€‰DNSå’Œå¤‡ç”¨DNSçš„æœºåˆ¶ã€‚æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å‚è€ƒæ­¤å¤„å¾®è½¯å®˜æ–¹é“¾æ¥ï¼šhttp://technet.microsoft.com/zh-cn/library/dd197552(v=WS.10).aspx" }, { "title": "æ€æ ·å®‰è£…ArchLinuxä»¥åŠDeepinæ¡Œé¢ç¯å¢ƒ", "url": "/posts/system_linux-install-archlinux.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "archlinux", "date": "2023-01-28 00:29:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-02-11ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€æ¦‚è¿°Arch Linux æ˜¯ä¸€ä¸ªè½»é‡çº§çš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå®é™…ä¸Šï¼ŒArch Linuxæä¾›ç»™ç”¨æˆ·å¾ˆå¤šé€‰æ‹©ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„å®‰è£…å†…å®¹ï¼Œä¸åƒå…¶ä»–å¾ˆå¤šçš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå®‰è£…è¿‡ç¨‹ç”šè‡³æ˜¯ä¸€ä¸ªåªæœ‰â€œä¸‹ä¸€æ­¥â€çš„å‚»ç“œå¼æ“ä½œï¼Œå› æ­¤æˆ‘è§‰å¾—Arch Linuxæ˜¯æˆ‘è§è¿‡å®‰è£…è¿‡ç¨‹æœ€æœ‰æŠ€æœ¯å«é‡çš„Linuxå‘è¡Œç‰ˆæœ¬ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä»ä¸­å­¦åˆ°å¾ˆå¤š...", "content": " æ’°å†™æ—¶é—´ï¼š2020-02-11ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€æ¦‚è¿°Arch Linux æ˜¯ä¸€ä¸ªè½»é‡çº§çš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå®é™…ä¸Šï¼ŒArch Linuxæä¾›ç»™ç”¨æˆ·å¾ˆå¤šé€‰æ‹©ï¼Œç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„å®‰è£…å†…å®¹ï¼Œä¸åƒå…¶ä»–å¾ˆå¤šçš„Linuxå‘è¡Œç‰ˆæœ¬ï¼Œå®‰è£…è¿‡ç¨‹ç”šè‡³æ˜¯ä¸€ä¸ªåªæœ‰â€œä¸‹ä¸€æ­¥â€çš„å‚»ç“œå¼æ“ä½œï¼Œå› æ­¤æˆ‘è§‰å¾—Arch Linuxæ˜¯æˆ‘è§è¿‡å®‰è£…è¿‡ç¨‹æœ€æœ‰æŠ€æœ¯å«é‡çš„Linuxå‘è¡Œç‰ˆæœ¬ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥ä»ä¸­å­¦åˆ°å¾ˆå¤šä¸œè¥¿ï¼Œå› ä¸ºå¾ˆå¤šä¸œè¥¿æ˜¯æˆ‘ä»¬äº²æ‰‹æ„é€ å‡ºæ¥çš„ã€‚Arch Linuxçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·æ˜¯pacmanï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åŸºäºArch Linuxé•œåƒè‡ªå¸¦çš„Linuxå·¥å…·åŒ…ä»¥åŠpacmanï¼Œä»é›¶æ„å»ºå±äºè‡ªå·±çš„Arch Linuxã€‚å®‰è£…è¿‡ç¨‹åŒ…æ‹¬ä»¥ä¸‹3ä¸ªæ­¥éª¤ï¼š è¿›å…¥é•œåƒç£ç›˜ï¼Œè¿æ¥ç½‘ç»œ é…ç½®åˆ†åŒºï¼Œå®‰è£…åŸºç¡€ç¯å¢ƒ å®‰è£…å¥½ä¹‹åè¿›å…¥æœ¬åœ°ç³»ç»Ÿï¼Œé…ç½®ç³»ç»Ÿï¼Œå®‰è£…åŸºæœ¬å·¥å…· å®‰è£…å›¾å½¢ç•Œé¢ äºŒã€å‡†å¤‡å·¥ä½œ2.1 é€‰æ‹©å®‰è£…æ–¹å¼é€‰æ‹©1ï¼šåœ¨ä½ åŸæ¥çš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºè½¯ä»¶ï¼Œç”¨è™šæ‹Ÿæœºå®‰è£…é€‰æ‹©2ï¼šåœ¨ä½ çš„å®ä½“ç”µè„‘ï¼Œä½¿ç”¨å…¨æ–°çš„ç¡¬ç›˜å®‰è£…å…¨æ–°çš„Arch Linuxå•ç³»ç»Ÿé€‰æ‹©2ï¼šåœ¨ä½ çš„å®ä½“ç”µè„‘ï¼Œåœ¨åŸæœ‰windowsæ“ä½œç³»ç»Ÿçš„åŸºç¡€ä¹‹ä¸Šï¼Œå‹ç¼©å‡ºä¸€å—ç©ºé—´ï¼Œå®‰è£…åŒç³»ç»Ÿ2.2 ä¸‹è½½å®‰è£…é•œåƒå®˜æ–¹ä¸‹è½½åœ°å€https://www.archlinux.org/download/åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œå®˜æ–¹æœ€æ–°å®‰è£…åŒ…ä¸º archlinux-2020.02.01-x86_64.iso2.3 æ³¨æ„äº‹é¡¹ å®‰è£…Arch Linuxçš„æ—¶å€™ï¼Œåº”å½“è¿æ¥åˆ°äº’è”ç½‘ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»ç½‘ç»œä¸Šä¸‹è½½è‡ªå®šä¹‰å†…å®¹ï¼Œæ¯”å¦‚è¿æ¥WIFIï¼Œæˆ–è€…è¿æ¥æœ‰çº¿ç½‘ç»œ å¦‚æœæ˜¯å®‰è£…åœ¨å®ä½“æœºï¼Œéœ€è¦è¿›å…¥BIOSå°†å®‰å…¨å¯åŠ¨ï¼ˆsecure bootï¼‰å…³é—­æ‰ å¯åŠ¨æ–¹å¼ä¸ºUEFIï¼Œå¦‚æœä½ å®ä½“ç”µè„‘æ²¡å¼€å¯UEFIå¯åŠ¨æ–¹å¼ï¼Œéœ€è¦è¿›å…¥BIOSè®¾ç½®ä¸€ä¸‹ï¼›è™šæ‹Ÿæœºåˆ™éœ€è¦åœ¨è™šæ‹Ÿæœºå·¥å…·ä¸­è®¾ç½®2.4 åˆ¶ä½œå¯åŠ¨ç›˜å¦‚æœä½ å®‰è£…åœ¨ç”µè„‘ä¸Šçš„ç©ºç¡¬ç›˜æˆ–è€…åŸºäºwindowså®‰è£…åŒç³»ç»Ÿçš„è¯ï¼Œç®€å•çš„è¯´å°±æ˜¯ä¸æ˜¯è£…åœ¨è™šæ‹Ÿæœºä¸Šï¼Œè€Œæ˜¯è£…åœ¨å®ä½“æœºä¸Šï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ç³»ç»Ÿé•œåƒåˆ¶ä½œæˆUç›˜å¯åŠ¨å™¨ã€‚æœ‰å¾ˆå¤šåˆ¶ä½œå¯åŠ¨ç›˜çš„å·¥å…·ï¼Œæˆ‘è¿™é‡Œæ¨èçš„æ˜¯usbwriterè¿™ä¸ªå·¥å…·,ä»¥ä¸‹æ˜¯ä¸‹è½½åœ°å€ï¼šhttps://sourceforge.net/projects/usbwriter/å¦‚æœä½ å®‰è£…åœ¨è™šæ‹Ÿæœºä¹‹ä¸Šï¼Œç›´æ¥ä½¿ç”¨åŸé•œåƒæ–‡ä»¶å°±å¯ä»¥äº†ä¸‰ã€å®‰è£…è¯¦ç»†è¿‡ç¨‹3.1 è¿›å…¥é•œåƒç£ç›˜ï¼Œè¿æ¥ç½‘ç»œå¯åŠ¨é•œåƒç³»ç»Ÿåï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰å›è½¦è¿›å»ã€‚å¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šArch Linuxå®‰è£…é•œåƒè‡ªå¸¦ä¸€äº›å¸¸ç”¨çš„å·¥å…·é›†åˆï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå¸¦å·¥å…·è¿æ¥ç½‘ç»œã€‚å¦‚æœä½¿ç”¨è™šæ‹Ÿæœºå®‰è£…ï¼Œé‚£ä¹ˆä½ çš„ç”µè„‘ä¸»æœºè¿æ¥ç½‘ç»œä¹‹åï¼ŒArch å®‰è£…é•œåƒçš„ç³»ç»Ÿè‡ªç„¶ä¼šè‡ªåŠ¨è¿æ¥ä¸Šç½‘ç»œã€‚å¦‚æœä½ ä½¿ç”¨çœŸæœºå®‰è£…ï¼Œé‚£ä½ éœ€è¦æ‰‹åŠ¨è¿æ¥ç½‘ç»œã€‚ æŸ¥çœ‹ç½‘ç»œè®¾å¤‡ip linké€šè¿‡è¿™ä¸ªå‘½ä»¤æ˜¾ç¤ºä½ çš„ç”µè„‘ç½‘ç»œç¡¬ä»¶è®¾å¤‡å› ä¸ºæˆ‘åœ¨è™šæ‹Ÿæœºçš„ç¯å¢ƒä¸­ï¼Œå¦‚æœä½ åœ¨å®ä½“ç¬”è®°æœ¬çš„å®‰è£…ç¯å¢ƒä¸­ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªwlan0 æ‰“å¼€wifiç½‘ç»œip link set wlan0 upå¦‚æœwifiå¯åŠ¨ä¸äº†ï¼Œå‡ºç°rfkillé”™è¯¯æ—¶ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤rfkill unblock all æ‰«æé™„è¿‘WIFIåˆ—è¡¨iwlist wlan0 scanä¸è¿‡æ‰§è¡Œä»¥ä¸Šå‘½ä»¤ä¼šå‡ºç°å¾ˆå¤šæ¬¡è¦ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ‰§è¡Œæ‰«é¢WIFIå‘½ä»¤æ—¶å¯ä»¥è®¾ç½®ESSIDï¼ˆWIFIåç§°ï¼‰è¿‡æ»¤æ¡ä»¶iwlist wlan0 scan | grep ESSID ä½¿ç”¨wpa_supplicanté“¾æ¥WIFIé¦–å…ˆä½¿ç”¨wpa_passphraseå‘½ä»¤ç”Ÿæˆwifiè¿æ¥çš„é…ç½®æ–‡ä»¶wpa_passphrass B17 wk12345 &gt; internet.confä»¥ä¸Šå‘½ä»¤ä¸­ï¼ŒB17ä»£è¡¨WIFIåç§°ï¼Œwk123456ä»£è¡¨WIFIå¯†ç ï¼Œç„¶åä½¿ç”¨ä½¿ç”¨å¯¹åº”çš„é…ç½®æ–‡ä»¶åœ¨åå°è¿æ¥WIFIwpa_supplicant -c internet.conf -i wlan0 &amp;-cå‚æ•°æŒ‡å®šçš„æ˜¯wifié…ç½®æ–‡ä»¶ï¼Œ-iå‚æ•°æŒ‡å®šä½¿ç”¨çš„è®¾å¤‡ï¼Œå³ wlan0ï¼Œ&amp;ç¬¦å·è¡¨ç¤ºåå°è¿è¡Œç½‘ç»œè¿æ¥æˆåŠŸä¹‹åï¼Œä½¿ç”¨dhcpcdå‘½ä»¤è‡ªåŠ¨è·å–idåœ°å€dhcpcd &amp; æ£€æµ‹ç½‘ç»œæ˜¯å¦è¿æ¥æˆåŠŸä½¿ç”¨pingå‘½ä»¤æ£€æµ‹å³å¯ping www.baidu.com3.2 é…ç½®åˆ†åŒºï¼Œå®‰è£…åŸºç¡€ç¯å¢ƒå‡è®¾ç°åœ¨ç£ç›˜æ˜¯ç©ºçš„ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸‰ä¸ªåˆ†åŒºï¼Œåˆ†åˆ«æ˜¯EFIåˆ†åŒºï¼ˆç”¨äºå­˜æ”¾ç³»ç»Ÿå¼•å¯¼ç¨‹åºï¼‰ã€swapåˆ†åŒºï¼ˆç”¨äºç»™è®©ç³»ç»Ÿæ”¯æŒè™šæ‹Ÿå†…å­˜ï¼‰ã€ä¸»åˆ†åŒºï¼ˆç”¨äºå®‰è£…ç³»ç»Ÿï¼‰ æŸ¥çœ‹ç£ç›˜æƒ…å†µfdisk -lå¯ä»¥çœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°/dev/sdaå°±æ˜¯æˆ‘ä»¬çš„ç©ºç£ç›˜ï¼Œå¤§å°ä¸º16GiBï¼Œé€‰æ‹©ç©ºç£ç›˜ï¼Œå°†å¯¹å…¶è¿›è¡Œæ“ä½œfdisk /dev/sdaç³»ç»Ÿä¼šæç¤ºä½ æ‰§è¡Œç›¸åº”çš„å‘½ä»¤ï¼Œå¦‚æœä½ ä¸çŸ¥é“å…·ä½“çš„ç”¨æ³•ï¼Œå¯ä»¥ä½¿ç”¨è¾“å…¥â€œmâ€æŒ‡ä»¤æŸ¥çœ‹ç›¸å…³å¸®åŠ©ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º åˆ›å»ºEFIæˆ‘ä»¬ä½¿ç”¨â€œnâ€æŒ‡å®šåˆ›å»ºä¸€ä¸ªæ–°Iåˆ†åŒºï¼Œå¦‚ä¸‹å›¾æ­¤æ—¶æç¤ºè¾“å…¥é€‰æ‹©åˆ†åŒºç±»å‹ï¼Œâ€œpâ€æŒ‡ä»¤ä»£è¡¨ä¸»åˆ†åŒºï¼Œâ€œeâ€æŒ‡ä»¤ä»£è¡¨æ‰©å±•åˆ†åŒºï¼Œé»˜è®¤ä¸ºâ€œpâ€æŒ‡ä»¤ï¼Œæˆ‘ä»¬ç›´æ¥å›è½¦å³å¯ã€‚å›è½¦åç³»ç»Ÿæç¤ºé€‰æ‹©åˆ†åŒºåºå·ï¼Œæˆ‘ä»¬é€‰æ‹©é»˜è®¤åºå·å³å¯ï¼Œå†æŒ‰å›è½¦ä¹‹åç³»ç»Ÿæç¤ºé€‰æ‹©å¼€å§‹èŠ‚ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥æŒ‰å›è½¦é€‰æ‹©é»˜è®¤å³å¯ï¼Œå¦‚ä¸‹å›¾å¯ä»¥çœ‹åˆ°æ­¤æ—¶ç³»ç»Ÿæç¤ºé€‰æ‹©åˆ†åŒºçš„æœ«å°¾èŠ‚ç‚¹ï¼Œé»˜è®¤é€‰çš„çš„æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è¾“å…¥ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŠ å‡ï¼ˆ+/-ï¼‰çš„æ–¹å¼è¿›è¡Œé€‰æ‹©ï¼Œæˆ‘ä»¬é€‰æ‹©â€œ+512Mâ€ï¼Œç»“æœå¦‚å›¾æ‰€ç¤ºæ­¤æ—¶ç³»ç»Ÿå·²ç»ä¿å­˜æˆ‘ä»¬çš„åˆ›å»ºä¿¡æ¯ï¼Œä¸è¿‡æ²¡æœ‰è¾“å…¥â€œwâ€æŒ‡ä»¤ä¹‹å‰å°±é€€å‡ºæ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œæ¥ä¸‹æ¥ç»§ç»­åˆ›å»ºswapåˆ†åŒº åˆ›å»ºswapåˆ†åŒºswapåˆ†åŒºç”¨æ¥åšè™šæ‹Ÿå†…å­˜åˆ†åŒºï¼Œå¯ä»¥æ ¹æ®ä½ ç³»ç»Ÿçš„ç¡¬ä»¶æ¥è®¾ç½®ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹è®¾ç½®ä¸ºå®é™…å†…å­˜çš„ä¸€èˆ¬å°±å¯ä»¥äº†ã€‚æˆ‘ä»¬ç»§ç»­æ‰§è¡Œä»¥ä¸Šçš„æµç¨‹ï¼Œåªæ˜¯é€‰æ‹©åˆ†åŒºå¤§å°çš„æ—¶å€™é€‰æ‹©â€œ+1Gâ€å°±å¯ä»¥ åˆ›å»ºç³»ç»Ÿä¸»åˆ†åŒºåˆ›å»ºåˆ†åŒºçš„æŒ‡ä»¤å’Œä»¥ä¸Šçš„æŒ‡ä»¤ä¸€è‡´ï¼Œåªæ˜¯åœ¨é€‰æ‹©åˆ†åŒºå¤§å°çš„æ—¶å€™ä½ è¦æ³¨æ„ï¼Œå¦‚æœä½ ä»¥åè¿˜å®‰è£…å…¶ä»–ç³»ç»Ÿï¼ˆå¦‚windowsï¼‰ä½ å°±éœ€è¦é¢„ç•™ä¸€ä¸‹ä¸€ä¸ªç©ºé—´ï¼Œå¦åˆ™ç›´æ¥æŒ‰å›è½¦å³å¯ï¼Œç³»ç»Ÿä¼šé€‰æ‹©å‰©ä¸‹æ‰€æœ‰çš„ç©ºé—´ã€‚ ä¿å­˜åˆ†åŒºåˆ›å»ºå®Œåˆ†åŒºä¹‹åï¼Œè¾“å…¥â€œwâ€æŒ‡ä»¤è¿›è¡Œä¿å­˜ï¼Œå¦åˆ™æ— æ•ˆã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨fdisk -l å‘½ä»¤æŸ¥çœ‹ç£ç›˜ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»åˆ†å¥½äº†åˆ†åˆ«ä¸º /dev/sda1ã€/dev/sda2ã€/dev/sda3çš„ä¸‰ä¸ªåˆ†åŒºäº†ï¼Œå¦‚å›¾æ‰€ç¤º æ ¼å¼åŒ–åˆ†åŒºå°†/dev/sda1æ ¼å¼åŒ–ä¸ºå¯åŠ¨å¼•å¯¼åˆ†åŒºmkfs.fat -F32 /dev/sda1å°†/dev/sda2æ ¼å¼åŒ–ä¸ºswapåˆ†åŒºmkswap /dev/sda2å¼€å¯swapåˆ†åŒºswapon /dev/sda2å°†/dev/sda3æ ¼å¼åŒ–ä¸ºLinuxä¸»åˆ†åŒºmkfs.ext4 /dev/sda3 å®‰è£…ç³»ç»Ÿç¼–è¾‘è½¯ä»¶åº“é•œåƒæºï¼Œæˆ‘ä»¬å°†æ‰€æœ‰åŒ…å«ä¸­å›½é•œåƒçš„ä»£ç è¡Œå‰ªåˆ‡åˆ°æ–‡ä»¶é¡¶éƒ¨å³å¯vim /etc/pacman.d/mirrorlistå…ˆå°†æœ¬åœ°ç£ç›˜æŒ‚è½½åˆ°é•œåƒç³»ç»Ÿä¸­ï¼Œå°†ç¡¬ç›˜ä¸»åˆ†åŒºæŒ‚è½½åˆ°é•œåƒç³»ç»Ÿä¸­mount /dev/sda3 /mntå°†EFIåˆ†åŒºæŒ‚è½½åˆ°é•œåƒç³»ç»Ÿä¸­mkdir /mnt/bootmount /dev/sda1 /mnt/bootä½¿ç”¨pacstrapæ‰§è¡Œå®‰è£…æ“ä½œpacstrap /mnt base linux linux-firmwareåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œbase linux linux-firmwareæ˜¯ç³»ç»ŸåŸºç¡€ç¯å¢ƒï¼Œbase-develæ˜¯linuxçš„å·¥å…·é›†åˆï¼Œnet-toolsæ˜¯ç½‘ç»œå·¥å…·åŒ…ï¼Œå®‰è£…å®Œæˆä»¥åï¼Œæ ¹æ®æ–‡ä»¶ç›®å½•ç”Ÿæˆåˆ†åŒºè¡¨æ–‡ä»¶genfstab -U /mnt &gt;&gt; /mnt/etc/fstabåˆ°æ­¤ï¼ŒåŸºç¡€ç¯å¢ƒå·²ç»å®‰è£…åˆ°æœ¬åœ°ç£ç›˜ï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦è¿›è¡Œç›¸å…³é…ç½®3.3 è¿›å…¥æœ¬åœ°ç³»ç»Ÿï¼Œå®‰è£…åŸºæœ¬å·¥å…·è¿›å…¥æœ¬åœ°ç³»ç»Ÿarch-chroot /mntæˆ‘ä»¬é¦–å…ˆå®‰è£…vimå·¥å…·ï¼Œæˆ‘ä»¬å°†ç”¨vimå·¥å…·æ¥ç¼–è¾‘ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶pacman -S vim æ›´æ”¹æ—¶åŒºæ›´æ”¹æ—¶åŒºln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtimeåŒæ­¥æ—¶é—´hwclock --systohc é…ç½®æœ¬åœ°åŒ–é¦–å…ˆç¼–è¾‘æœ¬åœ°åŒ–å­—ç¬¦é›†é…ç½®æ–‡ä»¶vim /etc/locale.genæ‰¾åˆ°ä¸‹é¢è¿™ä¸¤è¡Œï¼Œå¹¶å»æ‰â€œ#â€æ‰§è¡Œå–æ¶ˆæ³¨é‡Šï¼Œå¦‚ä¸‹#en_US.UTF-8 UTF-8#zh_CN.UTF-8 UTF-8ç”Ÿæˆæœ¬åœ°é…ç½®locale-gen å…ˆå°†ç³»ç»Ÿè¯­è¨€è®¾ç½®ä¸ºè‹±æ–‡vim /etc/locate.confæ·»åŠ ä»¥ä¸‹å†…å®¹LANG=en_US.UTF-8 ä¿®æ”¹æœ¬åœ°ç³»ç»Ÿçš„åç§°ï¼Œä¿®æ”¹hostsæ–‡ä»¶ç¼–è¾‘æœ¬æœºåç§°vim /etc/hostnameåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œæˆ‘æŠŠæˆ‘çš„archç³»ç»Ÿå«åšpan-PCpan-PCä¿®æ”¹hostsæ–‡ä»¶vim /etc/hostsæ·»åŠ ä»¥ä¸‹å†…å®¹127.0.0.1 localhost127.0.0.1 pan-PC::1 localhost ä¿®æ”¹æœ¬åœ°ç³»ç»Ÿçš„rootå¯†ç ä½¿ç”¨passwdå‘½ä»¤ä¿®æ”¹å¯†ç passwd å®‰è£…bootloaderpacman -S grub efibootmgr amd-ucode os-proberå…¶ä¸­ï¼Œgrubæ˜¯ArchLinuxå¯åŠ¨å¼•å¯¼ç¨‹åºï¼Œå³å¼€æœºä¹‹åçœ‹åˆ°çš„é‚£ä¸ªç•Œé¢ï¼Œefitbootmgræ˜¯efiå¯åŠ¨ç®¡ç†å·¥å…·ï¼Œamd-ucodeç”¨äºå‚å®¶æä¾›å¤„ç†å™¨çº§åˆ«çš„é©±åŠ¨æ›´æ–°ï¼ˆå¦‚æœæ˜¯intelå¤„ç†å™¨è¦å®‰è£…intel-ucodeï¼‰ï¼Œos-proberç”¨æ¥å¯»æ‰¾ç”µè„‘ä¸­çš„å…¶ä»–å¼•å¯¼ç¨‹åºã€‚æ¥ä¸‹æ¥åˆ›å»ºå¼•å¯¼é…ç½®æ–‡ä»¶mkdir /boot/grubgrub-mkconfig &gt; /boot/grub/grub.cfgå®‰è£…grubï¼Œå…ˆæŸ¥çœ‹ç³»ç»Ÿç±»å‹uname -må¯ä»¥çœ‹åˆ°æ˜¾ç¤ºx86_64äºæ˜¯æˆ‘ä»¬è¦å®‰è£…å¯¹åº”çš„efigrub-install --target=x86_64-efi --efi-directory=/boot å®‰è£…äº’è”ç½‘å·¥å…·åŒ…pacman -S wireless_tools wpa_supplicant dhcpcd å®‰è£…å¸¸ç”¨çš„å¼€å‘å·¥å…·é›†åˆpacman -S base-develæ­¤æ—¶å·²ç»å®Œæˆå®‰è£…ï¼Œä½¿ç”¨exitæŒ‡ä»¤æ¨å‡ºæœ¬åœ°ç³»ç»Ÿï¼Œå®Œæˆå®‰è£…ã€‚å…³æœºï¼Œå»é™¤é•œåƒç³»ç»Ÿï¼Œå†æ¬¡å¯åŠ¨å³å¯ä»grubå¼•å¯¼è¿›å…¥ArchLinuxï¼Œå¦‚ä¸‹å›¾ åç»­æ“ä½œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸ªäººç”µè„‘åº”å½“è®¾ç½®ä¸€ä¸ªæƒé™æ¯”è¾ƒä½çš„ç”¨æˆ·è´¦å·ï¼Œæˆ‘è®¾ç½®ç”¨ç”¨æˆ·åä¸ºâ€panâ€ï¼Œå¹¶ä¸ºpanè®¾ç½®å¯†ç useradd -m -g wheel panpasswd pan3.4 å®‰è£…å›¾å½¢ç•Œé¢ å®‰è£…ä¸­æ–‡å­—ä½“ï¼ˆæ–‡æ³‰é©¿ï¼‰å®‰è£…æ¡Œé¢ç¯å¢ƒåä½ åº”è¯¥ä¼šç”¨åˆ°åˆ‡æ¢æˆä¸­æ–‡ç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬å®‰è£…ä¸€ä¸‹ä¸­æ–‡å­—ä½“pacman -S wqy-bitmapfont wqy-microhei wqy-microhei-lite wqy-zenhei å®‰è£…xorgç®€å•çš„è¯´ï¼Œæœ‰xorgæ‰æœ‰æ¡Œé¢ç¯å¢ƒpacman -S xorg å®‰è£…deepinæ¡Œé¢ä»¥åŠåŸºæœ¬ç¨‹åºpacman -S deepin deepin-extra file-roller firefoxdeepin-extraæ˜¯deepinè‡ªå¸¦çš„åº”ç”¨ç¨‹åºï¼Œå¦‚æ·±åº¦ç»ˆç«¯ï¼Œfile-rolleræ˜¯deepinè‡ªå¸¦çš„æ–‡ä»¶è§£å‹å·¥å…·ï¼Œä¸ç„¶ä½¿ç”¨å³é”®æå–æ–‡ä»¶æ—¶ä¸ç®¡ç”¨ï¼Œfirefoxæ˜¯ç«ç‹æµè§ˆå™¨ å®‰è£…ä¸­æ–‡è¾“å…¥æ³•å…ˆå®‰è£…fcitxpacman -S fcitx fcitx-im fcitx-configtoolå®‰è£…googleæ‹¼éŸ³è¾“å…¥æ³•ï¼Œgoogleæ‹¼éŸ³è¾“å…¥æ³•ä¾èµ–fictxpacman -S fcitx-googlepinyiné…ç½®è¾“å…¥æ³•ç›¸å…³çš„ç¯å¢ƒå˜é‡vim /etcc/rpofileåœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä»¥ä¸‹å†…å®¹export XIM=fcitxexport XIM_PROGRAM=fcitxexport GTK_IM_MODULE=fcitxexport QT_IM_MODULE=fcitxexport XMODIFIERS=\"@im=fcitx\" è®¾ç½®è‡ªå¯ç™»å½•ç•Œé¢vim /etc/lightdm/lightdm.confæ‰¾åˆ°greeter-sessionå–æ¶ˆæ³¨é‡Šï¼Œå¹¶è®¾ç½®å€¼greeter-session = lightdm-deepin-greeterè®¾ç½®lightdmå¼€æœºè‡ªå¯systemctl enable lightdmè‡³æ­¤ï¼Œå®‰è£…ç»“æŸï¼Œé‡å¯ä¹‹åå°±è‡ªåŠ¨æ‰“å¼€Deepinç™»å½•ç•Œé¢äº†ã€‚" }, { "title": "æ€æ ·ç»™LinuxæœåŠ¡å™¨æ·»åŠ äº¤æ¢ç©ºé—´", "url": "/posts/system_linux-add-swap.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "swap", "date": "2023-01-28 00:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-11-12ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28æ¼”ç¤ºç³»ç»Ÿï¼šDebian Server 9.9ï¼Œæ‰€æœ‰æ“ä½œåœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è®¡ç®—æœºä¸­Swapç©ºé—´ä¹Ÿå°±æ˜¯äº¤æ¢ç©ºé—´ï¼ŒSwapç©ºé—´æ˜¯ç”µè„‘ç¡¬ç›˜ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå½“è®¡ç®—æœºçš„å®é™…å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå»ä½¿ç”¨Swapç©ºé—´ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹Swapç©ºé—´æ˜¯ç”¨ä¸ç€çš„ã€‚å› ä¸ºæ˜¯ç¡¬ç›˜ä¸Šçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥Swapç©ºé—´å¾ˆæ…¢ã€‚ä¸€ã€æ£€æŸ¥æ—¶å€™æœ‰Swapç©ºé—´æˆ‘ä»¬å¯ä»¥çœ‹åˆ°S...", "content": " æ’°å†™æ—¶é—´ï¼š2019-11-12ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28æ¼”ç¤ºç³»ç»Ÿï¼šDebian Server 9.9ï¼Œæ‰€æœ‰æ“ä½œåœ¨rootç”¨æˆ·æ¨¡å¼ä¸‹è®¡ç®—æœºä¸­Swapç©ºé—´ä¹Ÿå°±æ˜¯äº¤æ¢ç©ºé—´ï¼ŒSwapç©ºé—´æ˜¯ç”µè„‘ç¡¬ç›˜ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå½“è®¡ç®—æœºçš„å®é™…å†…å­˜ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå»ä½¿ç”¨Swapç©ºé—´ï¼Œä¸è¿‡ä¸€èˆ¬æƒ…å†µä¸‹Swapç©ºé—´æ˜¯ç”¨ä¸ç€çš„ã€‚å› ä¸ºæ˜¯ç¡¬ç›˜ä¸Šçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥Swapç©ºé—´å¾ˆæ…¢ã€‚ä¸€ã€æ£€æŸ¥æ—¶å€™æœ‰Swapç©ºé—´æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Swapç©ºé—´ä¸ºç©ºäºŒã€åˆ›å»ºswapåˆ†åŒºåˆ›å»º2Gçš„swapï¼Œå¯ä»¥æ ¹æ®ä½ çš„æœåŠ¡å™¨é…ç½®æ¥è°ƒæ•´å¤§å°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒSwapç©ºé—´ä¸éœ€è¦å¾ˆå¤§dd if=/dev/zero of=/mnt/swap bs=1M count=2048 è®¾ç½®äº¤æ¢åˆ†åŒºæ–‡ä»¶mkswap /mnt/swapå¯åŠ¨swapswapon /mnt/swapè®¾ç½®å¼€æœºæ—¶è‡ªå¯ç”¨ swap åˆ†åŒºï¼Œéœ€è¦ä¿®æ”¹æ–‡ä»¶ /etc/fstab ä¸­çš„ swap è¡Œï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç /mnt/swap swap swap defaults 0 0å¦‚å›¾æ‰€ç¤ºé‡å¯æœåŠ¡å™¨ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å¤šå‡ºäº†swapç©ºé—´" }, { "title": "è§£å†³RTL8723BEç½‘å¡Linuxä¸ŠWIFIä¿¡å·ä¿¡å·å·®çš„é—®é¢˜", "url": "/posts/system_linux-RTL8723BE-wifi.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "", "date": "2023-01-28 00:26:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-08-21ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€é—®é¢˜æè¿°æˆ‘ç”µè„‘ä¸€ç›´è£…è¿™åŒç³»ç»Ÿï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šåœ¨Windows 10ä¸ŠWIFIä¿¡å·æ­£å¸¸ï¼Œä½†æ˜¯åœ¨Linuxä¸Šåªæ¥æ”¶åˆ°å‡ ä¸ªæ— çº¿ç½‘ç»œçš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¾ˆå¾®å¼±ã€‚æ›¾å°è¯•è¿‡å¤šä¸ªLinuxç³»ç»Ÿï¼Œå¦‚Ubuntuã€Linux Mintã€Deepinç­‰ç­‰ï¼Œéƒ½æ— æµäºäº‹ã€‚äºŒã€åŸå› æˆ‘åœ¨ç½‘ä¸Šå¯»æ±‚å¸®åŠ©ï¼Œå‘ç°ç½‘å‹ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨ç»ˆäºè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼é—®é¢˜åœ¨...", "content": " æ’°å†™æ—¶é—´ï¼š2018-08-21ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28ä¸€ã€é—®é¢˜æè¿°æˆ‘ç”µè„‘ä¸€ç›´è£…è¿™åŒç³»ç»Ÿï¼Œé‡åˆ°ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼šåœ¨Windows 10ä¸ŠWIFIä¿¡å·æ­£å¸¸ï¼Œä½†æ˜¯åœ¨Linuxä¸Šåªæ¥æ”¶åˆ°å‡ ä¸ªæ— çº¿ç½‘ç»œçš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¾ˆå¾®å¼±ã€‚æ›¾å°è¯•è¿‡å¤šä¸ªLinuxç³»ç»Ÿï¼Œå¦‚Ubuntuã€Linux Mintã€Deepinç­‰ç­‰ï¼Œéƒ½æ— æµäºäº‹ã€‚äºŒã€åŸå› æˆ‘åœ¨ç½‘ä¸Šå¯»æ±‚å¸®åŠ©ï¼Œå‘ç°ç½‘å‹ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨ç»ˆäºè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼é—®é¢˜åœ¨äºå½“å‰çš„æ“ä½œç³»ç»Ÿé…å¤‡çš„æ— çº¿ç½‘å¡çš„å‚æ•°ä¸ºçœç”µèŠ‚èƒ½æ¨¡å¼ï¼Œä¿¡å·å¼ºåº¦ä¸è¡Œã€‚éœ€è¦ä¿®æ”¹å‚æ•°æ¥é‡å¯ä¸‹wifiï¼Œå°±å¯ä»¥äº†ã€‚ä¸‰ã€è§£å†³åŠæ³• (1)è¾“å…¥lspci å‘½ä»¤æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰PCIæ€»çº¿è®¾å¤‡æˆ–è¿æ¥åˆ°è¯¥æ€»çº¿ä¸Šçš„æ‰€æœ‰è®¾å¤‡çš„å·¥å…·lspciå¯ä»¥çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯å½“å‰ç½‘å¡å‹å·ä¸ºå‹å·ä¸ºRTL8723BEï¼Œç½‘ä¸Šè¯´RTL8723ç³»åˆ—çš„ç½‘å¡éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹å‚æ•°å³å¯. (2)æŸ¥çœ‹ä¸€ä¸‹ç½‘å¡çš„å‚æ•°ä¿¡æ¯ï¼šmodinfo rtl8723beçœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ipså’Œfwlpsæ˜¯ç”¨æ¥æ§åˆ¶èŠ‚èƒ½çš„ï¼Œant_selæ˜¯ç”¨æ¥æ§åˆ¶ä¿¡å·å¼ºåº¦çš„ã€‚ç°åœ¨éœ€è¦ä¿®æ”¹è¿™å‡ ä¸ªå‚æ•°çš„é»˜è®¤å€¼ã€‚ (3)æ‰“å¼€ç½‘å¡é…ç½®æ–‡ä»¶sudo nano /etc/modprobe.d/rtl8723be.confå¹¶ä¸”åœ¨æ–‡ä»¶ä¸­è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼šoptions rtl8723be debug=1options rtl8723be disable_watchdog=Noptions rtl8723be fwlps=Yoptions rtl8723be ips=Yoptions rtl8723be msi=Noptions rtl8723be swenc=Noptions rtl8723be swlps=Noptions rtl8723be ant_sel=2å¦‚å›¾æ‰€ç¤ºå®Œæˆä¹‹åæŒ‰Ctrl+OåæŒ‰å›è½¦ä¿å­˜ï¼Œå†æŒ‰Ctrl+Xé€€å‡ºã€‚ (4)è¾“å…¥ä»¥ä¸‹å‘½ä»¤é‡å¯ä¹‹åä¿¡å·å°±å˜å¼ºäº†ï¼Œå¯ä»¥çœ‹åˆ°æœåˆ°æ›´å¤šæ— çº¿ç½‘ä¿¡å·äº†sudo modprobe -r rtl8723besudo modprobe rtl8723be" }, { "title": "å¦‚ä½•è§£å†³åŒç³»ç»Ÿä¸­Linuxè®¿é—®ä¸äº†windowsçš„NTFSåˆ†åŒºçš„é—®é¢˜", "url": "/posts/system_linux-access-ntfs.html", "categories": "æ“ä½œç³»ç»Ÿä¸ç½‘ç»œ", "tags": "åŒç³»ç»Ÿ", "date": "2023-01-28 00:15:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-04-03ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28åœ¨LinuxMintä¸­è®¿é—®windowsåˆ†åŒºæ—¶æŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼šè¡¨ç¤º/dev/sda5è¿™ä¸ªåˆ†åŒºæŒ‚è½½å¤±è´¥ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œä½¿ç”¨ä¸€æ¡å‘½ä»¤å°±å¯ä»¥è§£å†³äº†ï¼šsudo ntfsfix /dev/sda5æ“ä½œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º", "content": " æ’°å†™æ—¶é—´ï¼š2018-04-03ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-28åœ¨LinuxMintä¸­è®¿é—®windowsåˆ†åŒºæ—¶æŠ¥é”™ï¼Œå¦‚ä¸‹å›¾ï¼šè¡¨ç¤º/dev/sda5è¿™ä¸ªåˆ†åŒºæŒ‚è½½å¤±è´¥ï¼Œé‡åˆ°è¿™ç§æƒ…å†µï¼Œä½¿ç”¨ä¸€æ¡å‘½ä»¤å°±å¯ä»¥è§£å†³äº†ï¼šsudo ntfsfix /dev/sda5æ“ä½œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º" }, { "title": "Androidæ€æ ·æ‰“å°æŒ‡å®šåŒ…çš„æ—¥å¿—", "url": "/posts/android_adb-grep-specific-app.html", "categories": "Android", "tags": "adb", "date": "2023-01-27 23:22:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2022-03-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27å…ˆä½¿ç”¨pså‘½ä»¤æŸ¥çœ‹æŠ¥åçš„è¿›ç¨‹idadb shell ps | grep com.demo.appå†æ ¹æ®è¿›ç¨‹IDè¿‡æ»¤æ—¥å¿—ï¼ŒåŠ å…¥è¿›ç¨‹idæ˜¯ 32182 ï¼Œå‘½ä»¤å¦‚ä¸‹adb logcat | grep 32182", "content": " æ’°å†™æ—¶é—´ï¼š2022-03-17ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27å…ˆä½¿ç”¨pså‘½ä»¤æŸ¥çœ‹æŠ¥åçš„è¿›ç¨‹idadb shell ps | grep com.demo.appå†æ ¹æ®è¿›ç¨‹IDè¿‡æ»¤æ—¥å¿—ï¼ŒåŠ å…¥è¿›ç¨‹idæ˜¯ 32182 ï¼Œå‘½ä»¤å¦‚ä¸‹adb logcat | grep 32182" }, { "title": "æ€æ ·è§£å†³åœ¨Linuxä¸ŠAndroidStudioè¿æ¥ä¸ä¸ŠAndroidè®¾å¤‡çš„é—®é¢˜", "url": "/posts/android_adb-cant-connect-device.html", "categories": "Android", "tags": "adb", "date": "2023-01-27 23:19:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2020-02-05ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€æ¦‚è¿°Arch Linuxæ˜¯ä¸€ä¸ªååˆ†ç®€æ´çš„Linuxç³»ç»Ÿï¼Œå¾ˆå¤šå†…å®¹æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œä¸åƒUbuntuæˆ–è€…Deepiné‚£æ ·å¼€ç®±å³ç”¨ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨Arch Linuxæ—¶å‡ºç°é—®é¢˜ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚æˆ‘å®‰è£…å¥½AndroidStudioä¹‹åï¼Œç”¨æ‰‹æœºé“¾æ¥ä¸ŠUSBï¼Œå¼€å¯å¼€å‘è€…æ¨¡å¼ï¼Œä¸è¿‡AndroidStudioå¼€å‘å·¥å…·é‡Œæ²¡æœ‰æ˜¾ç¤ºè®¾å¤‡åç§°ï¼Œè€Œæ˜¯æ˜¾ç¤ºä¸€ä¸ª...", "content": " æ’°å†™æ—¶é—´ï¼š2020-02-05ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€æ¦‚è¿°Arch Linuxæ˜¯ä¸€ä¸ªååˆ†ç®€æ´çš„Linuxç³»ç»Ÿï¼Œå¾ˆå¤šå†…å®¹æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œä¸åƒUbuntuæˆ–è€…Deepiné‚£æ ·å¼€ç®±å³ç”¨ã€‚æ‰€ä»¥åœ¨ä½¿ç”¨Arch Linuxæ—¶å‡ºç°é—®é¢˜ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚æˆ‘å®‰è£…å¥½AndroidStudioä¹‹åï¼Œç”¨æ‰‹æœºé“¾æ¥ä¸ŠUSBï¼Œå¼€å¯å¼€å‘è€…æ¨¡å¼ï¼Œä¸è¿‡AndroidStudioå¼€å‘å·¥å…·é‡Œæ²¡æœ‰æ˜¾ç¤ºè®¾å¤‡åç§°ï¼Œè€Œæ˜¯æ˜¾ç¤ºä¸€ä¸ªunkonw deviceï¼Œæ­¤æ—¶æˆ‘åˆæŠŠadbå‘½ä»¤æ‰€åœ¨ç›®å½•æ·»åŠ åˆ°PATHç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œadb deviceså‘½ä»¤ä¹‹åå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼šerror: insufficient permissions for deviceSee [http://developer.android.com/tools/device.html] for more informationäºŒã€åˆ†æä¸è§£å†³æ–¹æ¡ˆé€šè¿‡æŸ¥é˜…èµ„æ–™å¾—çŸ¥ï¼Œè¿™æ˜¯æ²¡æœ‰æ­£å¸¸é©±åŠ¨Androidçš„åŸå› ã€‚ä»¥ä¸‹æ˜¯è§£å†³æ–¹æ¡ˆ2.1 æŸ¥çœ‹ç”µè„‘é“¾æ¥çš„è®¾å¤‡æ‰§è¡Œlsusbå‘½ä»¤ï¼Œç»“æœå¦‚ä¸‹Bus 004 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 003 Device 002: ID 13d3:56b2 IMC Networks Integrated CameraBus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hubBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hubBus 001 Device 004: ID 0cf3:e500 Qualcomm Atheros Communications Bus 001 Device 006: ID 0000:3825 USB OPTICAL MOUSEBus 001 Device 008: ID 19d2:ffcf ZTE WCDMA Technologies MSM AndroidBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hubå¯ä»¥çœ‹åˆ°ä»¥ä¸‹è¿™ä¸€è¡Œï¼Œæ˜¯æˆ‘æ‰‹æœºçš„å…³é”®ä¿¡æ¯Bus 001 Device 008: ID 19d2:ffcf ZTE WCDMA Technologies MSM Androidåœ¨ç¬¬6åˆ—ä¸­â€:â€å‰æ˜¯å‚å•†IDï¼š19d2ï¼Œåæ˜¯è®¾å¤‡IDï¼šffcfï¼Œæ¥ä¸‹æ¥ä¼šç”¨åˆ°2.2 æ·»åŠ é…ç½®æ–‡ä»¶å¹¶ä¿®æ”¹æƒé™sudo vim /etc/udev/rules.d/51-android.rulesæ·»åŠ ä»¥ä¸‹å†…å®¹SUBSYSTEM==\"usb\",ATTRS{idVendor}==\"19d2\",ATTRS{idProduct}==\"ffcf\",MODE=\"0666\"ä¿®æ”¹æƒé™sudo chmod a+rx 51-android.rules2.3 é‡å¯adbæœåŠ¡sudo adb kill-serversudo adb start-serveræ­¤æ—¶æ‰‹æœºå‡ºç°ä»¥ä¸‹ç•Œé¢å‹¾é€‰ç¡®å®šå³å¯ï¼ŒAndroidStudioå°±å¯ä»¥æ­£å¸¸ä½¿ç”¨çœŸæœºè°ƒè¯•äº†ï¼Œå¹¶ä¸”adbå‘½ä»¤æ­£å¸¸ä½¿ç”¨" }, { "title": "ä½¿ç”¨Googleå®˜æ–¹çš„fastbootå·¥å…·åˆ·å…¥ç¬¬ä¸‰æ–¹recovery", "url": "/posts/android_fastboot-flash-recovery.html", "categories": "Android", "tags": "fastboot", "date": "2023-01-27 23:16:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-06-01ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€fastbootç®€ä»‹å¦‚æœä½ æ­£åœ¨é˜…è¯»è¿™ç¯‡åšå®¢ï¼Œç›¸ä¿¡ä½ æ˜¯ä¸€ä½Androidå‘çƒ§å‹ã€‚å¦‚æœä½ å¯¹Androidåˆ·æœºè¿˜ä¸å¤ªäº†è§£çš„è¯ï¼Œä»¥ä¸‹æ–‡ç« ä½ å¯èƒ½çœ‹ä¸æ‡‚ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€è¯„è®ºã€‚fastbootæ˜¯Android SDKä¸­çš„ä¸€ä¸ªå°å·¥å…·ï¼Œå½“ç„¶å®ƒå¾ˆå°ï¼Œä½ ä¹Ÿå¯ä»¥ä»å¾ˆå¤šç½‘ä¸Šè®ºå›æ‰¾åˆ°ã€‚æˆ‘ä»¬æ€æ ·åˆ©ç”¨fastbootå·¥å…·åˆ·å…¥ç¬¬ä¸‰æ–¹recoveryç¨‹åºå‘¢ã€‚ä»¥ä¸‹...", "content": " æ’°å†™æ—¶é—´ï¼š2018-06-01ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€fastbootç®€ä»‹å¦‚æœä½ æ­£åœ¨é˜…è¯»è¿™ç¯‡åšå®¢ï¼Œç›¸ä¿¡ä½ æ˜¯ä¸€ä½Androidå‘çƒ§å‹ã€‚å¦‚æœä½ å¯¹Androidåˆ·æœºè¿˜ä¸å¤ªäº†è§£çš„è¯ï¼Œä»¥ä¸‹æ–‡ç« ä½ å¯èƒ½çœ‹ä¸æ‡‚ï¼Œä¹Ÿæ¬¢è¿ç•™è¨€è¯„è®ºã€‚fastbootæ˜¯Android SDKä¸­çš„ä¸€ä¸ªå°å·¥å…·ï¼Œå½“ç„¶å®ƒå¾ˆå°ï¼Œä½ ä¹Ÿå¯ä»¥ä»å¾ˆå¤šç½‘ä¸Šè®ºå›æ‰¾åˆ°ã€‚æˆ‘ä»¬æ€æ ·åˆ©ç”¨fastbootå·¥å…·åˆ·å…¥ç¬¬ä¸‰æ–¹recoveryç¨‹åºå‘¢ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ã€‚äºŒã€æµ‹è¯•å·¥å…·(1) Nubia z9 miniã€€æ‰‹æœº(2) fastboot å·¥å…·(3) twrp recovery (ä»å®˜ç½‘ä¸‹è½½)æˆ‘ç›´æ¥ä½¿ç”¨Android SDKé‡Œé¢çš„ï¼Œå¦‚æœä½ ç”µè„‘æ²¡æœ‰Android SDKï¼Œä½ å¯ä»¥è‡ªå·±å»ç½‘ä¸Šæ‰¾ä¸€ä¸ªå¯¹åº”ä½ ç³»ç»Ÿçš„fastbootï¼Œä¸‹è½½åˆ°æœ¬åœ°åï¼Œè®°å¾—æŠŠfastbootæ‰€åœ¨è·¯å¾„åŠ å…¥pathç¯å¢ƒå˜é‡ä¸‰ã€åˆ·å…¥è¿‡ç¨‹(1) æ‰‹æœºè¿æ¥ç”µè„‘ï¼Œå®‰è£…å¯¹åº”çš„Androidé©±åŠ¨ç¨‹åº(2) æ‰‹æœºåœ¨å…³æœºçŠ¶æ€ä¸‹åŒæ—¶é•¿æŒ‰ éŸ³é‡-ã€ç”µæº å…ˆè¿›å…¥åˆ°fastbootæ¨¡å¼(3) æ‰§è¡Œåˆ·å†™å‘½ä»¤fastboot flash recovery å¯¹åº”çš„imgåŒ…å¦å¤–ä¸€ç§æ˜¯ï¼Œå…ˆæ‰§è¡Œäº†å‘½ä»¤ï¼Œå‘½ä»¤è¡Œç»ˆç«¯ä¼šè¿›å…¥ä¸€ä¸ªç­‰å¾…çŠ¶æ€ï¼Œæ‰‹æœºé‡å¯åˆ°fastbootæ¨¡å¼åç«‹å³åˆ·å…¥ï¼Œå¦‚ä¸‹å›¾ï¼šå†æ¬¡è¿›å…¥recoveryæ¨¡å¼ï¼Œå·²ç»åˆ·å…¥æ–°çš„recoveryäº†!" }, { "title": "Android 6.0ä»¥ä¸ŠåŠ¨æ€ç”³è¯·æ–‡ä»¶è¯»å†™æƒé™", "url": "/posts/android_android6-permition.html", "categories": "Android", "tags": "androidæƒé™", "date": "2023-01-27 23:11:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€æ¦‚è¿°è‡ªAndroid 6.0å¼€å§‹ï¼ŒGoogleå¼€å§‹å¯¹ç³»ç»Ÿæƒé™åšå‡ºä¸¥æ ¼çš„è¦æ±‚ï¼Œæœ‰äº›æƒé™å¿…é¡»ç”¨æˆ·åŒæ„æ‰èƒ½è°ƒç”¨ç›¸åº”åŠŸèƒ½ï¼Œæ‰€ä»¥å¼€å‘è€…éœ€è¦è°ƒç”¨æƒé™ç”³è¯·çš„ä»£ç ï¼Œå¼¹å‡ºä¸€ä¸ªå°çª—å£ï¼Œå‘ç”¨æˆ·åŠ¨æ€ç”³è¯·æƒé™ã€‚å¦‚å›¾æ‰€ç¤ºï¼šæ–‡æœ¬ä»‹ç»åŠ¨æ€ç”³è¯·æ–‡ä»¶è¯»å†™æƒé™çš„è¿‡ç¨‹ã€‚äºŒã€ç”³è¯·æƒé™ Android ä¸­çš„æ‰€æœ‰æƒé™å¯ä»¥å‚è€ƒï¼šhttps://developer.an...", "content": " æ’°å†™æ—¶é—´ï¼š2018-03-22ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-27ä¸€ã€æ¦‚è¿°è‡ªAndroid 6.0å¼€å§‹ï¼ŒGoogleå¼€å§‹å¯¹ç³»ç»Ÿæƒé™åšå‡ºä¸¥æ ¼çš„è¦æ±‚ï¼Œæœ‰äº›æƒé™å¿…é¡»ç”¨æˆ·åŒæ„æ‰èƒ½è°ƒç”¨ç›¸åº”åŠŸèƒ½ï¼Œæ‰€ä»¥å¼€å‘è€…éœ€è¦è°ƒç”¨æƒé™ç”³è¯·çš„ä»£ç ï¼Œå¼¹å‡ºä¸€ä¸ªå°çª—å£ï¼Œå‘ç”¨æˆ·åŠ¨æ€ç”³è¯·æƒé™ã€‚å¦‚å›¾æ‰€ç¤ºï¼šæ–‡æœ¬ä»‹ç»åŠ¨æ€ç”³è¯·æ–‡ä»¶è¯»å†™æƒé™çš„è¿‡ç¨‹ã€‚äºŒã€ç”³è¯·æƒé™ Android ä¸­çš„æ‰€æœ‰æƒé™å¯ä»¥å‚è€ƒï¼šhttps://developer.android.google.cn/reference/android/Manifest.permissionæˆ‘ä»¬ä»¥è¯»å†™é—ªå­˜çš„æƒé™ä¸ºä¾‹ï¼Œå‘ç”³è¯·æƒé™ï¼Œè¯»ä¸å†™çš„æƒé™å…ˆå®šä¹‰åˆ°é™æ€å­—ç¬¦æ•°ç»„ä¸­ï¼Œå¦‚ä¸‹ä»£ç private static String[] PERMISSIONS_STORAGE = { Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE};é¦–å…ˆåˆ¤æ–­å½“å‰ç³»ç»Ÿæ˜¯å¦æ˜¯Android6.0(å¯¹åº”API 23)ä»¥åŠä»¥ä¸Šï¼Œå†åˆ¤æ–­æ˜¯å¦å«æœ‰äº†å†™æ–‡ä»¶çš„æƒé™ï¼Œå¦‚æœæ²¡æœ‰åˆ™è°ƒç”¨åŠ¨æ€ç”³è¯·æƒé™çš„ä»£ç ã€‚ä½¿ç”¨ActivityCompat.requestPermissionè¿›è¡ŒåŠ¨æ€ç”³è¯·æƒé™ï¼Œä¸‹é¢æ˜¯å‚æ•°è¯´æ˜ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç›®æ ‡Activity,å¡«å†™thiså³å¯ ç¬¬äºŒä¸ªå‚æ•°æ˜¯String[]å­—ç¬¦æ•°ç»„ç±»å‹çš„æƒé™é›† ç¬¬ä¸‰ä¸ªå³è¯·æ±‚ç ï¼Œéœ€ä¼ å…¥ä¸€ä¸ªæ•´å‹æ•°å€¼ ä»£ç å¦‚ä¸‹if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP) { if (ActivityCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) { ActivityCompat.requestPermissions(this, PERMISSIONS_STORAGE, REQUEST_PERMISSION_CODE); }}å›è°ƒå¤„ç†ï¼Œç”³è¯·æƒé™åå›è°ƒåˆ°onRequestPermissionResultæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¯·æ±‚ç ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åˆšåˆšè¯·æ±‚çš„æƒé™é›†ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯è¯·æ±‚ç»“æœé›†ã€‚è¯·æ±‚ç»“æœä¸­ï¼Œ0è¡¨ç¤ºæˆæƒæˆåŠŸï¼Œ-1è¡¨ç¤ºæˆæƒå¤±è´¥ï¼š@Overridepublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) { super.onRequestPermissionsResult(requestCode, permissions, grantResults); if (requestCode == REQUEST_PERMISSION_CODE) { for (int i = 0; i &lt; permissions.length; i++) { Log.i(\"MainActivity\", \"ç”³è¯·çš„æƒé™ä¸ºï¼š\" + permissions[i] + \",ç”³è¯·ç»“æœï¼š\" + grantResults[i]); } }}å››ã€å®Œæ•´ä»£ç public class MainActivity extends AppCompatActivity { //è¯»å†™æƒé™ private static String[] PERMISSIONS_STORAGE = { Manifest.permission.READ_EXTERNAL_STORAGE, Manifest.permission.WRITE_EXTERNAL_STORAGE}; //è¯·æ±‚çŠ¶æ€ç  private static int REQUEST_PERMISSION_CODE = 1; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); if (Build.VERSION.SDK_INT &gt; Build.VERSION_CODES.LOLLIPOP) { if (ActivityCompat.checkSelfPermission(this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) { ActivityCompat.requestPermissions(this, PERMISSIONS_STORAGE, REQUEST_PERMISSION_CODE); } } } @Override public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) { super.onRequestPermissionsResult(requestCode, permissions, grantResults); if (requestCode == REQUEST_PERMISSION_CODE) { for (int i = 0; i &lt; permissions.length; i++) { Log.i(\"MainActivity\", \"ç”³è¯·çš„æƒé™ä¸ºï¼š\" + permissions[i] + \",ç”³è¯·ç»“æœï¼š\" + grantResults[i]); } } }}" }, { "title": "æ•°æ®ç»“æ„ä¸­çš„çº¿æ€§ç¦»æ•£å­˜å‚¨-é“¾è¡¨", "url": "/posts/algorithm_linked-list.html", "categories": "æ•°æ®ç»“æ„ä¸ç®—æ³•", "tags": "", "date": "2023-01-26 21:35:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-06-28ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ä¸€ã€æ¦‚è¿°åœ¨ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°äº†çº¿æ€§å­˜å‚¨ä¸­çš„è¿ç»­å­˜å‚¨ï¼Œæˆ‘ä»¬è¿˜æŠŠè¿™ç§å­˜å‚¨ç»“æ„å«åšé¡ºåºè¡¨ï¼Œæˆ–è€…æ•°ç»„ã€‚å¹¶ä¸”çŸ¥é“çº¿æ€§è¿ç»­å­˜å‚¨å­˜åœ¨ä»¥ä¸‹ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šèƒ½å®ç°å¿«é€Ÿè¿½åŠ å’Œå­˜å–å…ƒç´  ç¼ºç‚¹ï¼šæ’å…¥å…ƒç´ æˆ–åˆ é™¤å…ƒç´ éƒ½è¦ç§»åŠ¨å¤§é‡çš„åŸæœ‰å…ƒç´ åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¥äº†è§£ã€Šæ•°æ®ç»“æ„ã€‹ä¸­ç ”ç©¶çš„å¦ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„-ç¦»æ•£å­˜å‚¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠçº¿æ€§çš„ç¦»æ•£å­˜å‚¨å«åšé“¾è¡¨ã€‚é“¾è¡¨...", "content": " æ’°å†™æ—¶é—´ï¼š2019-06-28ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ä¸€ã€æ¦‚è¿°åœ¨ä¸ŠèŠ‚ï¼Œæˆ‘ä»¬å·²ç»äº†è§£åˆ°äº†çº¿æ€§å­˜å‚¨ä¸­çš„è¿ç»­å­˜å‚¨ï¼Œæˆ‘ä»¬è¿˜æŠŠè¿™ç§å­˜å‚¨ç»“æ„å«åšé¡ºåºè¡¨ï¼Œæˆ–è€…æ•°ç»„ã€‚å¹¶ä¸”çŸ¥é“çº¿æ€§è¿ç»­å­˜å‚¨å­˜åœ¨ä»¥ä¸‹ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šèƒ½å®ç°å¿«é€Ÿè¿½åŠ å’Œå­˜å–å…ƒç´  ç¼ºç‚¹ï¼šæ’å…¥å…ƒç´ æˆ–åˆ é™¤å…ƒç´ éƒ½è¦ç§»åŠ¨å¤§é‡çš„åŸæœ‰å…ƒç´ åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å°†ä¸€èµ·æ¥äº†è§£ã€Šæ•°æ®ç»“æ„ã€‹ä¸­ç ”ç©¶çš„å¦ä¸€ç§çº¿æ€§æ•°æ®ç»“æ„-ç¦»æ•£å­˜å‚¨ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠçº¿æ€§çš„ç¦»æ•£å­˜å‚¨å«åšé“¾è¡¨ã€‚é“¾è¡¨çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹å›¾ï¼šå¦‚æœä½ æ²¡æœ‰é˜…è¯»è¿‡æœ¬ç³»åˆ—çš„å‰é¢éƒ¨é—¨æ–‡ç« ï¼Œå»ºè®®æ‚¨é€šè¿‡ä»¥ä¸‹é“¾æ¥å…ˆé˜…è¯»ä¹‹å‰çš„å†…å®¹ï¼Œä»çº¿æ€§è¿ç»­å­˜å‚¨å¼€å§‹ï¼Œé‡æ–°è®¤è¯†ã€Šæ•°æ®ç»“æ„ã€‹ https://blog.jiker.dev/posts/algorithm-linear-list/**äºŒã€é“¾è¡¨çš„å®ç°è¿‡ç¨‹2.1 å®šä¹‰é“¾è¡¨èŠ‚ç‚¹å’Œé¡ºåºè¡¨ç›¸æ¯”ï¼Œé“¾è¡¨çš„å­˜å‚¨ç»“æ„åœ¨å®ç°æ’å…¥ã€åˆ é™¤æ—¶ï¼Œä¸éœ€è¦ç§»åŠ¨å¤§é‡çš„å…ƒç´ ã€‚ä½†ä¸å®¹æ˜“å®ç°éšæœºå­˜å–å…ƒç´ çº¿æ€§è¡¨ä¸­ç¬¬iä¸ªå…ƒç´ çš„æ“ä½œã€‚æ‰€ä»¥é“¾è¡¨é€‚ç”¨äºéœ€è¦ç»å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„æ“ä½œçš„çº¿æ€§è¡¨ï¼Œå¦‚é£æœºèˆªç­ä¹˜å®¢è¡¨ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª02-LinkList.cppæ–‡ä»¶ï¼Œéœ€è¦å¼•å…¥åŸºæœ¬çš„cè¯­è¨€å¤´æ–‡ä»¶ï¼Œå¹¶ä¸”å®šä¹‰é“¾è¡¨èŠ‚ç‚¹çš„ç»“æ„ä½“# include &lt;stdio.h&gt; // æ ‡å‡†ioå¤´éƒ¨ï¼ŒåŒ…å«printfå‡½æ•°# include &lt;malloc.h&gt; // åŒ…å«mallocå‡½æ•°ï¼Œåœ¨macç”µè„‘ä¸Šï¼Œæ”¹ä¸ºsys/malloc.h# include &lt;stdlib.h&gt; // åŒ…å«exitå‡½æ•°typedef struct Node{ int data; // æ•°æ®åŸŸ struct Node *pNext; // æŒ‡é’ˆåŸŸ} NODE, *PNODE; // NODE ç­‰ä»·äº struct Node, *PNODE ç­‰ä»·äº* Node2.2 åˆ›å»ºé“¾è¡¨æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰åˆ›å»ºé“¾è¡¨çš„å‡½æ•°PNODE create_list(void){ int len; // å­˜æ”¾èŠ‚ç‚¹çš„æœ‰æ•ˆä¸ªæ•° int val; //å­˜æ”¾ç”¨æˆ·è¾“å…¥çš„ä¸´æ—¶å­˜å…¥çš„èŠ‚ç‚¹çš„å€¼ // åˆ†é…ä¸€ä¸ªä¸å­˜åœ¨ä»»ä½•æ•°æ®çš„å¤´èŠ‚ç‚¹ PNODE pHead = (PNODE)malloc(sizeof(NODE)); if (NULL == pHead) { printf(\"å†…å­˜åˆ†é…å¤±è´¥!\\n\"); exit(-1); } // åˆå§‹çŠ¶æ€ä¸‹ï¼Œé“¾è¡¨å°¾èŠ‚ç‚¹å’Œå¤´èŠ‚ç‚¹æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ï¼ˆå³å¤´èŠ‚ç‚¹å°±æ˜¯å°¾èŠ‚ç‚¹ï¼‰ï¼Œè€ŒæŒ‡é’ˆåŸŸä¸ºNULL PNODE pTail = pHead; pTail-&gt;pNext = NULL; printf(\"è¯·è¾“å…¥æ‚¨éœ€è¦ç”Ÿæˆçš„é“¾è¡¨èŠ‚ç‚¹çš„ä¸ªæ•°ï¼šlen=\"); scanf(\"%d\", &amp;len); for (int i = 0; i &lt; len; i++) { printf(\"è¯·è¾“å…¥ç¬¬%dä¸ªèŠ‚ç‚¹çš„å€¼\", i + 1); scanf(\"%d\", &amp;val); PNODE pNew = (PNODE)malloc(sizeof(NODE)); if (NULL == pNew) { printf(\"åˆ†é…å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢ï¼\\n\"); exit(-1); } // åˆ†é…æˆåŠŸï¼Œç»™æ–°èŠ‚ç‚¹èµ‹å€¼ pNew-&gt;data = val; // è®©é“¾è¡¨å°¾èŠ‚æŒ‡é’ˆåŸŸç‚¹æŒ‡å‘æœ€æ–°çš„èŠ‚ç‚¹ï¼Œå®ç°å¢åŠ æ–°èŠ‚ç‚¹ pTail-&gt;pNext = pNew; // æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸä¸ºNULL pNew-&gt;pNext = NULL; // æœ€åï¼Œå†è®©å°¾èŠ‚ç‚¹æŒ‡å‘æ–°èŠ‚ç‚¹ã€‚ pTail = pNew; } // é“¾è¡¨åˆ›å»ºå®Œæˆåï¼Œè¿”å›å¤´èŠ‚ç‚¹ return pHead;}2.3 éå†é“¾è¡¨å…ƒç´ ä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå¦‚æœé“¾è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸä¸ä¸ºNULLï¼Œå³è¾“å‡ºæ•°æ®void traverse_list(PNODE pHead){ // æŠŠç¬¬ä¸€ä¸ªèŠ‚ç‚¹èµ‹ç»™å˜é‡p PNODE p = pHead-&gt;pNext; while (NULL != p) { // p ä¸ä¸ºNULL,ä»£è¡¨æœ‰æ•°æ®ï¼Œåˆ™è¾“å‡ºpçš„æ•°æ®äº printf(\"%d \", p-&gt;data); // è¾“å‡ºpçš„æ•°æ®åŸŸä¹‹åï¼Œè®©pæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ p = p-&gt;pNext; } printf(\"\\n\"); return;}2.4 åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºå’Œè®¡ç®—é“¾è¡¨é•¿åº¦å¦‚æœé“¾è¡¨å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸä¸ºç©ºï¼Œåˆ™é“¾è¡¨æ˜¯ç©ºé“¾è¡¨ã€‚é•¿åº¦çš„è®¡ç®—åˆ™é€šè¿‡éå†é“¾è¡¨æ¥è®¡ç®—ï¼Œå¦‚ä¸‹ä»£ç // åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºbool is_empty(PNODE pHead){ if (NULL == pHead-&gt;pNext) { return true; } else { return false; }}// è®¡ç®—é“¾è¡¨çš„é•¿åº¦int length_list(PNODE pHead){ PNODE p = pHead-&gt;pNext; int len = 0; while (NULL != 0) { ++len; p = p-&gt;pNext; } return len;}2.5 é“¾è¡¨æ’åºæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ ¹æ®ä»å°åˆ°å¤§çš„æ•°æ®åŸŸå€¼å¯¹é“¾è¡¨èŠ‚ç‚¹è¿›è¡Œæ’åºã€‚é“¾è¡¨çš„æ’åºå’Œé¡ºåºè¡¨ç±»ä¼¼ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªèŠ‚ç‚¹å˜é‡ç”¨äºä¸´æ—¶å­˜å‚¨å¯¹æ¯”ä¸­çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå¦‚ä¸‹ä»£ç // é“¾è¡¨æ’åºvoid sort_list(PNODE pHead){ int i, j, t; int len = length_list(pHead); // å®šä¹‰på’Œqä¸¤ä¸ªèŠ‚ç‚¹å˜é‡ï¼Œç”¨äºä¸´æ—¶å­˜æ”¾äº¤æ¢èŠ‚ç‚¹ PNODE p, q; // è®©pæŒ‡å‘å½“å‰èŠ‚ç‚¹ for (i = 0, p = pHead-&gt;pNext; i &lt; len; i++, p = p-&gt;pNext) { // è®©qæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ for (j = i + 1, q = p-&gt;pNext; i &lt; len; j++, q = q-&gt;pNext) { // ç”¨å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„æ•°æ®åŸŸå¤§äºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å°†æ•°æ®è¿›è¡Œäº¤æ¢ if (p-&gt;data &gt; q-&gt;data) { t = p-&gt;data; p-&gt;data = q-&gt;data; q-&gt;data = t; } } }}2.6 æ’å…¥æ–°èŠ‚ç‚¹åœ¨æ¥ä¸‹æ¥çš„æ’å…¥å’Œåˆ é™¤æ“ä½œä¸­ï¼Œæˆ‘ä»¬è®°é“¾è¡¨çš„ç´¢å¼•ä¸ºpositionï¼Œpositionä»0å¼€å§‹ã€‚é¦–å…ˆï¼Œåœ¨é“¾è¡¨çš„positionä½ç½®æ’å…¥èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„å€¼æ˜¯valï¼Œä»£ç å¦‚ä¸‹// æ’å…¥èŠ‚ç‚¹bool insert_list(PNODE pHead, int position, int val){ int len = length_list(pHead); if (len &lt; 0 || position &gt; len) { return false; } int i = 0; PNODE p = pHead; // ä½¿ç”¨whileå¾ªç¯ï¼Œä½¿på˜é‡æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ while (NULL != p-&gt;pNext &amp;&amp; i &lt; position) { p = p-&gt;pNext; ++i; } // ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œï¼Œpå·²ç»æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒpositionèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºæ— æ‰€è°“ // æ’å…¥è¿‡ç¨‹1ï¼šåˆ†é…æ–°èŠ‚ç‚¹ PNODE pNew = (PNODE)malloc(sizeof(NODE)); if (NULL == pNew) { printf(\"åŠ¨æ€åˆ†é…å†…å­˜å¤±è´¥å¤±è´¥\"); exit(-1); } // æ’å…¥è¿‡ç¨‹2ï¼šå°†ä¼ å…¥çš„å€¼èµ‹ç»™æ–°èŠ‚ç‚¹çš„æ•°æ®åŸŸ pNew-&gt;data = val; // æ’å…¥è¿‡ç¨‹3ï¼šç”¨å˜é‡qä¸´æ—¶å­˜å‚¨positionèŠ‚ç‚¹ PNODE q = p-&gt;pNext; // æ’å…¥è¿‡ç¨‹4ï¼šå°†positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æ–°èŠ‚ç‚¹ p-&gt;pNext = pNew; // æ’å…¥è¿‡ç¨‹5ï¼šå†å°†æ–°èŠ‚ç‚¹æŒ‡å‘posionèŠ‚ç‚¹ pNew-&gt;pNext = q; return true;}2.7 åˆ é™¤èŠ‚ç‚¹åˆ é™¤èŠ‚ç‚¹å’Œæ’å…¥èŠ‚ç‚¹æ“ä½œç±»ä¼¼ã€‚åŒºåˆ«åœ¨äºï¼Œæ’å…¥èŠ‚æ“ä½œåœ¨æ‰¾åˆ°positionèŠ‚ç‚¹åï¼ŒåŠ¨æ€åˆ†é…æ–°ç©ºé—´å¹¶æ’å…¥åˆ°åŸé“¾è¡¨çš„positionä½ç½®ï¼Œåˆ é™¤èŠ‚ç‚¹æ“ä½œåˆ™åœ¨æ‰¾åˆ°positionèŠ‚ç‚¹ä¹‹åï¼Œé‡Šæ”¾positionèŠ‚ç‚¹çš„ç©ºé—´ï¼Œå†æŠŠåŸpositionæ—è¾¹ä¸¤ä¸ªä¸ç›¸è¿çš„èŠ‚ç‚¹è¿æ¥èµ·æ¥ã€‚// åˆ é™¤èŠ‚ç‚¹bool delete_list(PNODE pHead, int position, int *pVal){ int len = length_list(pHead); if (len &lt; 0 || position &gt; len) { return false; } int i = 0; PNODE p = pHead; // ä½¿ç”¨whileå¾ªç¯ï¼Œä½¿på˜é‡æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ while (NULL != p-&gt;pNext &amp;&amp; i &lt; position) { p = p-&gt;pNext; ++i; } // å¦‚æœpositionèŠ‚ç‚¹ä¸ºNULLï¼Œè¿”å›false if (NULL == p-&gt;pNext) { return false; } // ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œï¼Œpå·²ç»æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”positionèŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ // åˆ é™¤è¿‡ç¨‹1ï¼Œè®©qå˜é‡æŒ‡å‘positionèŠ‚ç‚¹ PNODE q = p-&gt;pNext; // åˆ é™¤è¿‡ç¨‹2ï¼Œå°†positionèŠ‚ç‚¹çš„æ•°æ®èµ‹ç»™pVal *pVal = q-&gt;data; // åˆ é™¤è¿‡ç¨‹3ï¼Œè®©positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘positionèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ª p-&gt;pNext = p-&gt;pNext-&gt;pNext; // åˆ é™¤è¿‡ç¨‹4ï¼Œé‡Šæ”¾positionèŠ‚ç‚¹æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶è®©qå˜é‡æŒ‡å‘NULL free(q); q = NULL; return true;}ä¸‰ã€æµ‹è¯•ä¸éªŒè¯3.1 æµ‹è¯•æ‰€æœ‰æµ‹è¯•ä»£ç å¦‚ä¸‹#include &lt;stdio.h&gt;#include &lt;sys/malloc.h&gt;#include &lt;stdlib.h&gt;// å®šä¹‰é“¾è¡¨èŠ‚ç‚¹typedef struct Node{ int data; // æ•°æ®åŸŸ struct Node *pNext; // æŒ‡é’ˆåŸŸ} NODE, *PNODE; // NODE ç­‰ä»·äº struct Node, *PNODE ç­‰ä»·äº* Node// åˆ›å»ºä¸€ä¸ªéå¾ªç¯çš„å•é“¾è¡¨PNODE create_list(void){ int len; // å­˜æ”¾èŠ‚ç‚¹çš„æœ‰æ•ˆä¸ªæ•° int val; //å­˜æ”¾ç”¨æˆ·è¾“å…¥çš„ä¸´æ—¶å­˜å…¥çš„èŠ‚ç‚¹çš„å€¼ // åˆ†é…ä¸€ä¸ªä¸å­˜åœ¨ä»»ä½•æ•°æ®çš„å¤´èŠ‚ç‚¹ PNODE pHead = (PNODE)malloc(sizeof(NODE)); if (NULL == pHead) { printf(\"å†…å­˜åˆ†é…å¤±è´¥!\\n\"); exit(-1); } // åˆå§‹çŠ¶æ€ä¸‹ï¼Œé“¾è¡¨å°¾èŠ‚ç‚¹å’Œå¤´èŠ‚ç‚¹æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ï¼ˆå³å¤´èŠ‚ç‚¹å°±æ˜¯å°¾èŠ‚ç‚¹ï¼‰ï¼Œè€ŒæŒ‡é’ˆåŸŸä¸ºNULL PNODE pTail = pHead; pTail-&gt;pNext = NULL; printf(\"è¯·è¾“å…¥æ‚¨éœ€è¦ç”Ÿæˆçš„é“¾è¡¨èŠ‚ç‚¹çš„ä¸ªæ•°ï¼šlen=\"); scanf(\"%d\", &amp;len); for (int i = 0; i &lt; len; i++) { printf(\"è¯·è¾“å…¥ç¬¬%dä¸ªèŠ‚ç‚¹çš„å€¼:\", i + 1); scanf(\"%d\", &amp;val); PNODE pNew = (PNODE)malloc(sizeof(NODE)); if (NULL == pNew) { printf(\"åˆ†é…å¤±è´¥ï¼Œç¨‹åºç»ˆæ­¢ï¼\\n\"); exit(-1); } // åˆ†é…æˆåŠŸï¼Œç»™æ–°èŠ‚ç‚¹èµ‹å€¼ pNew-&gt;data = val; // è®©é“¾è¡¨å°¾èŠ‚æŒ‡é’ˆåŸŸç‚¹æŒ‡å‘æœ€æ–°çš„èŠ‚ç‚¹ï¼Œå®ç°å¢åŠ æ–°èŠ‚ç‚¹ pTail-&gt;pNext = pNew; // æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸä¸ºNULL pNew-&gt;pNext = NULL; // æœ€åï¼Œå†è®©å°¾èŠ‚ç‚¹æŒ‡å‘æ–°èŠ‚ç‚¹ã€‚ pTail = pNew; } // é“¾è¡¨åˆ›å»ºå®Œæˆåï¼Œè¿”å›å¤´èŠ‚ç‚¹ return pHead;}// éå†é“¾è¡¨void traverse_list(PNODE pHead){ // æŠŠç¬¬ä¸€ä¸ªèŠ‚ç‚¹èµ‹ç»™å˜é‡p PNODE p = pHead-&gt;pNext; while (NULL != p) { // p ä¸ä¸ºNULL,ä»£è¡¨æœ‰æ•°æ®ï¼Œåˆ™è¾“å‡ºpçš„æ•°æ®äº printf(\"%d \", p-&gt;data); // è¾“å‡ºpçš„æ•°æ®åŸŸä¹‹åï¼Œè®©pæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ p = p-&gt;pNext; } printf(\"\\n\"); return;}// åˆ¤æ–­é“¾è¡¨æ˜¯å¦ä¸ºç©ºbool is_empty(PNODE pHead){ if (NULL == pHead-&gt;pNext) { return true; } else { return false; }}// è®¡ç®—é“¾è¡¨çš„é•¿åº¦int length_list(PNODE pHead){ PNODE p = pHead-&gt;pNext; int len = 0; while (NULL != p) { ++len; p = p-&gt;pNext; } return len;}// é“¾è¡¨æ’åºvoid sort_list(PNODE pHead){ int i, j, t; int len = length_list(pHead); // å®šä¹‰på’Œqä¸¤ä¸ªèŠ‚ç‚¹å˜é‡ï¼Œç”¨äºä¸´æ—¶å­˜æ”¾äº¤æ¢èŠ‚ç‚¹ PNODE p, q; // è®©pæŒ‡å‘å½“å‰èŠ‚ç‚¹ for (i = 0, p = pHead-&gt;pNext; i &lt; len - 1; i++, p = p-&gt;pNext) { // è®©qæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ for (j = i + 1, q = p-&gt;pNext; j &lt; len; j++, q = q-&gt;pNext) { // ç”¨å½“å‰èŠ‚ç‚¹å’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœå½“å‰èŠ‚ç‚¹çš„æ•°æ®åŸŸå¤§äºä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±å°†æ•°æ®è¿›è¡Œäº¤æ¢ if (p-&gt;data &gt; q-&gt;data) { t = p-&gt;data; p-&gt;data = q-&gt;data; q-&gt;data = t; } } }}// æ’å…¥èŠ‚ç‚¹bool insert_list(PNODE pHead, int position, int val){ int len = length_list(pHead); if (len &lt; 0 || position &gt; len) { return false; } int i = 0; PNODE p = pHead; // ä½¿ç”¨whileå¾ªç¯ï¼Œä½¿på˜é‡æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ while (NULL != p-&gt;pNext &amp;&amp; i &lt; position) { p = p-&gt;pNext; ++i; } // ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œï¼Œpå·²ç»æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒpositionèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºæ— æ‰€è°“ // æ’å…¥è¿‡ç¨‹1ï¼šåˆ†é…æ–°èŠ‚ç‚¹ PNODE pNew = (PNODE)malloc(sizeof(NODE)); if (NULL == pNew) { printf(\"åŠ¨æ€åˆ†é…å†…å­˜å¤±è´¥å¤±è´¥\"); exit(-1); } // æ’å…¥è¿‡ç¨‹2ï¼šå°†ä¼ å…¥çš„å€¼èµ‹ç»™æ–°èŠ‚ç‚¹çš„æ•°æ®åŸŸ pNew-&gt;data = val; // æ’å…¥è¿‡ç¨‹3ï¼šç”¨å˜é‡qä¸´æ—¶å­˜å‚¨positionèŠ‚ç‚¹ PNODE q = p-&gt;pNext; // æ’å…¥è¿‡ç¨‹4ï¼šå°†positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘æ–°èŠ‚ç‚¹ p-&gt;pNext = pNew; // æ’å…¥è¿‡ç¨‹5ï¼šå†å°†æ–°èŠ‚ç‚¹æŒ‡å‘posionèŠ‚ç‚¹ pNew-&gt;pNext = q; return true;}// åˆ é™¤èŠ‚ç‚¹bool delete_list(PNODE pHead, int position, int *pVal){ int len = length_list(pHead); if (len &lt; 0 || position &gt; len) { return false; } int i = 0; PNODE p = pHead; // ä½¿ç”¨whileå¾ªç¯ï¼Œä½¿på˜é‡æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ while (NULL != p-&gt;pNext &amp;&amp; i &lt; position) { p = p-&gt;pNext; ++i; } // å¦‚æœpositionèŠ‚ç‚¹ä¸ºNULLï¼Œè¿”å›false if (NULL == p-&gt;pNext) { return false; } // ç¨‹åºæ‰§è¡Œåˆ°è¿™é‡Œï¼Œpå·²ç»æŒ‡å‘positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä¸”positionèŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ // åˆ é™¤è¿‡ç¨‹1ï¼Œè®©qå˜é‡æŒ‡å‘positionèŠ‚ç‚¹ PNODE q = p-&gt;pNext; // åˆ é™¤è¿‡ç¨‹2ï¼Œå°†positionèŠ‚ç‚¹çš„æ•°æ®èµ‹ç»™pVal *pVal = q-&gt;data; // åˆ é™¤è¿‡ç¨‹3ï¼Œè®©positionèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘positionèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ª p-&gt;pNext = p-&gt;pNext-&gt;pNext; // åˆ é™¤è¿‡ç¨‹4ï¼Œé‡Šæ”¾positionèŠ‚ç‚¹æŒ‡å‘çš„å†…å­˜ï¼Œå¹¶è®©qå˜é‡æŒ‡å‘NULL free(q); q = NULL; return true;}int main(){ // åˆ›å»ºé“¾è¡¨ï¼Œå®šä¹‰é•¿åº¦ä¸º6ï¼Œè¾“å…¥1ã€5ã€6ã€4ã€3ã€2 PNODE pHead = create_list(); // éå†å…ƒç´ ï¼šè¾“å‡º 1 5 6 4 3 2 traverse_list(pHead); // é“¾è¡¨æ’åº sort_list(pHead); // éå†å…ƒç´ ï¼šè¾“å‡º 1 2 3 4 5 6 traverse_list(pHead); // åœ¨ç´¢å¼•ä¸º0çš„ä½ç½®æ·»åŠ å…ƒç´ 7 insert_list(pHead, 0, 7); // éå†å…ƒç´ ï¼šè¾“å‡º 7 1 2 3 4 5 6 traverse_list(pHead); // åœ¨ç´¢å¼•ä¸º5çš„ä½ç½®åˆ é™¤å…ƒç´ ï¼Œå¹¶è¾“å‡ºåˆ é™¤çš„å…ƒç´  int val; delete_list(pHead, 5, &amp;val); // éå†å…ƒç´ ï¼Œè¾“å‡ºï¼š traverse_list(pHead); // æ‰“å°åˆ é™¤çš„å…ƒç´  printf(\"è¢«åˆ é™¤çš„å…ƒç´ æ•°æ®åŸŸæ˜¯%d\\n\", val); return 0;}3.2 ç»“æœç¨‹åºç¼–è¯‘ä¸æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹pan@pandeMBP ds % g++ 02-LinkList.cpppan@pandeMBP ds % ./a.out è¯·è¾“å…¥æ‚¨éœ€è¦ç”Ÿæˆçš„é“¾è¡¨èŠ‚ç‚¹çš„ä¸ªæ•°ï¼šlen=6è¯·è¾“å…¥ç¬¬1ä¸ªèŠ‚ç‚¹çš„å€¼:1è¯·è¾“å…¥ç¬¬2ä¸ªèŠ‚ç‚¹çš„å€¼:5è¯·è¾“å…¥ç¬¬3ä¸ªèŠ‚ç‚¹çš„å€¼:6è¯·è¾“å…¥ç¬¬4ä¸ªèŠ‚ç‚¹çš„å€¼:4è¯·è¾“å…¥ç¬¬5ä¸ªèŠ‚ç‚¹çš„å€¼:3è¯·è¾“å…¥ç¬¬6ä¸ªèŠ‚ç‚¹çš„å€¼:21 5 6 4 3 2 1 2 3 4 5 6 7 1 2 3 4 5 6 7 1 2 3 4 6 è¢«åˆ é™¤çš„å…ƒç´ æ•°æ®åŸŸæ˜¯5 æœ¬æ–‡åŸåˆ›é¦–å‘è‡ªwxè®¢é˜…å·ï¼šæå®¢å¼€å‘ä¸­ï¼Œç¦æ­¢è½¬è½½" }, { "title": "ä»çº¿æ€§è¿ç»­å­˜å‚¨å¼€å§‹ï¼Œé‡æ–°è®¤è¯†ã€Šæ•°æ®ç»“æ„ã€‹", "url": "/posts/algorithm_linear-list.html", "categories": "æ•°æ®ç»“æ„ä¸ç®—æ³•", "tags": "", "date": "2023-01-26 21:28:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-06-13ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ä¸€ã€æ•°æ®ç»“æ„æ¦‚è¿°1.1 ç®€ä»‹ã€Šæ•°æ®ç»“æ„ã€‹è¿™é—¨è¯¾ç¨‹å¤§å¤šæ—¶å€™ç­‰åŒäºã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¯´æ•°æ®ç»“æ„ï¼Œéƒ½ä¼šæ¶‰åŠåˆ°ç®—æ³•ã€‚ã€Šæ•°æ®ç»“æ„ã€‹è¿™é—¨è¯¾ç¨‹è¦æ±‚å­¦ç”Ÿæ ¹æ®æ‰€å­¦çš„æ•°æ®ç»“æ„ç†è®ºï¼Œèƒ½å®Œæˆå¤æ‚çš„ç¨‹åºè®¾è®¡ã€‚è€Œç¨‹åºè®¾è®¡èƒ½åŠ›çš„æé«˜ï¼Œå¿…é¡»è¦æœ‰å­¦ä¹ ã€è§‚æ‘©ã€å€Ÿé‰´å’Œå®è·µçš„è¿‡ç¨‹ã€‚åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« æ—¶ï¼Œä½ åº”å½“å…·å¤‡ä¸€å®šçš„C/C++ç¼–ç¨‹åŸºç¡€ï¼Œå¹¶èƒ½å¤Ÿç†è§£æŒ‡é’ˆå’Œç»“...", "content": " æ’°å†™æ—¶é—´ï¼š2019-06-13ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ä¸€ã€æ•°æ®ç»“æ„æ¦‚è¿°1.1 ç®€ä»‹ã€Šæ•°æ®ç»“æ„ã€‹è¿™é—¨è¯¾ç¨‹å¤§å¤šæ—¶å€™ç­‰åŒäºã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¯´æ•°æ®ç»“æ„ï¼Œéƒ½ä¼šæ¶‰åŠåˆ°ç®—æ³•ã€‚ã€Šæ•°æ®ç»“æ„ã€‹è¿™é—¨è¯¾ç¨‹è¦æ±‚å­¦ç”Ÿæ ¹æ®æ‰€å­¦çš„æ•°æ®ç»“æ„ç†è®ºï¼Œèƒ½å®Œæˆå¤æ‚çš„ç¨‹åºè®¾è®¡ã€‚è€Œç¨‹åºè®¾è®¡èƒ½åŠ›çš„æé«˜ï¼Œå¿…é¡»è¦æœ‰å­¦ä¹ ã€è§‚æ‘©ã€å€Ÿé‰´å’Œå®è·µçš„è¿‡ç¨‹ã€‚åœ¨é˜…è¯»è¿™ç¯‡æ–‡ç« æ—¶ï¼Œä½ åº”å½“å…·å¤‡ä¸€å®šçš„C/C++ç¼–ç¨‹åŸºç¡€ï¼Œå¹¶èƒ½å¤Ÿç†è§£æŒ‡é’ˆå’Œç»“æ„ä½“ã€‚1.2 æ•°æ®ç»“æ„ä¸ç®—æ³•çš„æ¦‚å¿µæˆ‘ä»¬æŠŠç°å®ä¸­å¤æ‚çš„é—®é¢˜ä»¥ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼ˆç°å®ä¸­çš„ä¸ªä½“ï¼‰å’Œç‰¹å®šçš„å­˜å‚¨ç»“æ„ï¼ˆç°å®ä¸­ä¸ªä½“ä¹‹é—´çš„å…³ç³»ï¼‰ä¿å­˜åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œæˆ‘ä»¬æŠŠè¿™ç§â€œç‰¹å®šçš„å­˜å‚¨ç»“æ„â€å«åšæ•°æ®ç»“æ„ã€‚åœ¨æ­¤æ•°æ®ç»“æ„çš„åŸºç¡€ä¹‹ä¸Šä¸ºå®ç°çš„æŸä¸ªåŠŸèƒ½ï¼ˆæ¯”å¦‚æŸ¥æ‰¾ã€åˆ é™¤ã€æ’åºï¼‰è€Œæ‰§è¡Œçš„ç›¸åº”æ“ä½œå«åšç®—æ³•ã€‚ æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šæ•°æ®ç»“æ„ = ä¸ªä½“ + ä¸ªä½“çš„å…³ç³»ï¼Œç®—æ³• = å¯¹å­˜å‚¨æ•°æ®çš„æ“ä½œã€‚1.3 è¡¡é‡ç®—æ³•çš„æ ‡å‡†é€šè¿‡1ï¼Œæˆ‘ä»¬æŠŠå¤„ç†æ•°æ®çš„æ–¹æ³•å’Œæ­¥éª¤å«åšç®—æ³•ã€‚è€Œè¡¡é‡ç®—æ³•çš„æ ‡å‡†åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š æ—¶é—´å¤æ‚åº¦ï¼šç¨‹åºå¤§æ¦‚è¦æ‰§è¡Œçš„æ¬¡æ•°ï¼Œè€Œéæ‰§è¡Œçš„æ—¶é—´ ç©ºé—´å¤æ‚åº¦ï¼šç®—æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¤§æ¦‚å ç”¨çš„æœ€å¤§çš„å†…å­˜ éš¾æ˜“ç¨‹åº¦ å¥å£®æ€§ ç®—æ³•æœ€æ ¸å¿ƒçš„å†…å®¹æ˜¯ç ”ç©¶ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚1.4 æ•°æ®ç»“æ„åœ¨ç¨‹åºå¼€å‘ä¸­çš„åœ°ä½æ•°æ®ç»“æ„æ˜¯è½¯ä»¶å·¥ç¨‹ä¸­æœ€æ ¸å¿ƒçš„è¯¾ç¨‹ã€‚åœ¨å®é™…ç¨‹åºå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å„ç§ç¼–ç¨‹è¯­è¨€ï¼Œå¯¹å„ç§æ•°æ®è¿›è¡Œç›¸åº”çš„åŠŸèƒ½æ“ä½œï¼Œå¦‚å­˜å‚¨ã€æŸ¥è¯¢ã€åˆ é™¤ï¼Œæˆ–æ˜¯æ›´å¤æ‚çš„è¿ç®—ã€‚æ‰€ä»¥æ•°æ®ç»“æ„åŠŸåº•åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œå†³å®šäº†ä¸ªäººåœ¨ç¨‹åºå¼€å‘ä¸Šçš„ç»¼åˆèƒ½åŠ›ã€‚ æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºï¼šç¨‹åº = æ•°æ®çš„å­˜å‚¨ + æ•°æ®çš„æ“ä½œï¼ˆä¹Ÿå°±æ˜¯ç®—æ³•ï¼‰ + å¯ä»¥è¢«è®¡ç®—æœºæ‰§è¡Œçš„è¯­è¨€ã€‚1.5 æ•°æ®ç»“æ„çš„åŸºæœ¬æ¨¡å—ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ä»Šåçš„å­¦ä¹ ï¼Œæœ¬æ–‡åˆ—å‡ºæ•°æ®ç»“æ„çš„åŸºç¡€çŸ¥è¯†æ¨¡å—å¦‚ä¸‹çº¿æ€§ç»“æ„ï¼ˆæˆ‘ä»¬å¯ä»¥æŠŠå®ƒå«åšçº¿æ€§è¡¨ï¼‰ è¿ç»­å­˜å‚¨[æ•°ç»„] ç¦»æ•£å­˜å‚¨[é“¾è¡¨] çº¿æ€§ç»“æ„çš„ä¸¤ç§å¸¸è§åº”ç”¨ä¹‹ä¸€â€”â€”æ ˆ çº¿æ€§ç»“æ„çš„ä¸¤ç§å¸¸è§åº”ç”¨ä¹‹äºŒâ€”â€”é˜Ÿåˆ—éçº¿æ€§ç»“æ„ æ ‘ å›¾äºŒã€è¿ç»­å­˜å‚¨çš„æ•°æ®ç»“æ„ä¸åŸºæœ¬ç®—æ³• åœ¨æ•°æ®ç»“æ„ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶çš„å¯¹è±¡å°±æ˜¯æ•°æ®ï¼Œå…¶æ¬¡æ˜¯ç ”ç©¶æ“ä½œæ•°æ®çš„æ–¹æ³•ä¸æ­¥éª¤ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ä»çº¿æ€§ç»“æ„ä¸­çš„è¿ç»­å­˜å‚¨å¼€å§‹ï¼Œä»ä»£ç çš„è§’åº¦ï¼Œé‡æ–°è®¤è¯†æ•°æ®ç»“æ„ã€‚è¿ç»­å­˜å‚¨å®é™…ä¸Šå°±æ˜¯è¿ç»­çš„å­˜å‚¨ç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£æ•°ç»„å°±æ˜¯è¿ç»­å­˜å‚¨çš„å®ç°ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡Cè¯­è¨€çš„structå…³é”®å­—ï¼Œå®šä¹‰è¿ç»­å­˜å‚¨è¿™ç§æ•°æ®ç»“æ„ä½“ï¼Œè¿™é‡Œæˆ‘ä»¬æŠŠå®ƒå«åšæ•°ç»„ï¼Œå¹¶ç ”ç©¶å…¶åŸºæœ¬çš„ç®—æ³•ã€‚è¿ç»­å­˜å‚¨ç»“æ„å®¹æ˜“å®ç°å…ƒç´ çš„è¿½å’Œè¯»å–çº¿æ€§è¡¨ä¸­çš„ç¬¬ i ä¸ªå…ƒç´ çš„æ“ä½œï¼›ä½†åœ¨å®ç°æ’å…¥ã€åˆ é™¤æ“ä½œæ—¶ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ã€‚æ‰€ä»¥ï¼Œå®ƒé€‚åˆå­˜å‚¨ç›¸å¯¹ç¨³å®šçš„çº¿æ€§è¡¨ï¼Œå¦‚èŒå·¥å·¥èµ„è¡¨ã€å­¦ç”Ÿå­¦ç±è¡¨ã€‚2.1 å®šä¹‰æ•°ç»„é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª01-Arr.cppæ–‡ä»¶ï¼Œéœ€è¦å¼•å…¥åŸºæœ¬çš„cè¯­è¨€å¤´æ–‡ä»¶ï¼Œå¦‚ä¸‹ä»£ç # include &lt;stdio.h&gt; // æ ‡å‡†ioå¤´éƒ¨ï¼ŒåŒ…å«printfå‡½æ•°# include &lt;malloc.h&gt; // åŒ…å«mallocå‡½æ•°ï¼Œåœ¨macç”µè„‘ä¸Šï¼Œæ”¹ä¸ºsys/malloc.h# include &lt;stdlib.h&gt; // åŒ…å«exitå‡½æ•°æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰æ•°ç»„çš„ç»“æ„ä½“ï¼Œè¯¥æ•°æ®ç±»å‹åŒ…å«ä¸‰ä¸ªæˆå‘˜ï¼ŒpBaseã€lenã€cntï¼Œå¦‚ä¸‹ä»£ç struct Arr{ int *pBase; // å­˜å‚¨çš„æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ int len; // æ•°ç»„æ‰€èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ ä¸ªæ•° int cnt; // å½“å‰æ•°ç»„æœ‰æ•ˆå…ƒç´ ä¸ªæ•°};2.2 åˆå§‹åŒ–æ•°ç»„æ¥ä¸‹æ¥æˆ‘ä»¬å®šä¹‰åˆå§‹åŒ–æ•°ç»„çš„å‡½æ•°ï¼Œæ ¹æ®æ•°ç»„é•¿åº¦åŠ¨æ€åˆ†é…å†…å­˜ï¼Œç”¨äºå­˜å‚¨å¯¹åº”çš„æ•°ç»„å…ƒç´ ï¼Œå¦‚ä¸‹ä»£ç void init_arr(struct Arr *pArr, int length){ // æ ¹æ®æ•°ç»„çš„é•¿åº¦ï¼Œåˆ†é…çš„å†…å­˜pBase pArr-&gt;pBase = (int *)malloc(sizeof(int) * length); if (NULL == pArr-&gt;pBase) { printf(\"åŠ¨æ€åˆ†é…å†…å­˜å¤±è´¥\"); exit(-1); } // å†…å­˜åˆ†é…æˆåŠŸ pArr-&gt;len = length; pArr-&gt;cnt = 0; return;}2.3 åˆ¤å®šæ•°ç»„æ˜¯å¦ä¸ºç©ºæˆ–æ˜¯å¦å·²æ»¡æˆ‘ä»¬å¯ä»¥æ ¹æ®å½“å‰æ•°ç»„çš„æœ‰æ•ˆå…ƒç´ å’Œæ•°ç»„æ€»å…ƒç´ åˆ¤å®šæ•°ç»„æ˜¯å¦ä¸ºç©ºæˆ–è€…æ˜¯å¦å·²æ»¡ï¼Œå®šä¹‰ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°// åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºbool is_empty(struct Arr *pArr){ // æ•°ç»„çš„æœ‰æ•ˆä¸ªæ•°ä¸º0ï¼Œå³æ•°ç»„ä¸ºç©º if (0 == pArr-&gt;cnt) { return true; } // å¦åˆ™ï¼Œæ•°ç»„ä¸ä¸ºç©º else { return false; }}// åˆ¤æ–­æ•°ç»„æ˜¯å¦å·²æ»¡bool is_full(struct Arr *pArr){ // æ•°ç»„çš„æœ‰æ•ˆä¸ªæ•°ä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œå³æ•°ç»„å·²æ»¡ if (pArr-&gt;cnt == pArr-&gt;len) { return true; } // å¦åˆ™ï¼Œæ•°ç»„æœªæ»¡ else { return false; }}2.4 éå†æ•°ç»„å…ƒç´ éå†æ•°ç»„çš„ç›®çš„æ˜¯æŠŠæ¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç»„å…ƒç´ æ‰“å°åˆ°ç»ˆç«¯ã€‚æ ¹æ®æ•°ç»„çš„å½“å‰æœ‰æ•ˆä¸ªæ•°ï¼Œéå†å¹¶æ‰“å°æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬å®šä¹‰å¦‚ä¸‹ä»£ç void traverse_arr(struct Arr *pArr){ for (int i = 0; i &lt; pArr-&gt;cnt; i++) { printf(\"%d\\t\", pArr-&gt;pBase[i]); } printf(\"\\n\");}2.5 è¿½åŠ æ•°ç»„å…ƒç´ è¿½åŠ å³åœ¨æœªæ»¡çš„æ•°ç»„ä¸­ï¼Œåœ¨æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œå¦‚ä¸‹ä»£ç bool append_arr(struct Arr *pArr, int val){ // æ•°ç»„å·²æ»¡åˆ™è¿”å›false if (is_full(pArr)) { return false; } // æ•°ç»„ä¸æ»¡æ—¶è¿›è¡Œè¿½åŠ  pArr-&gt;pBase[pArr-&gt;cnt] = val; (pArr-&gt;cnt)++; return true;}2.6 æ’å…¥å…ƒç´ æ•°ç»„é™¤äº†è¿½åŠ ï¼Œè¿˜æœ‰æ•°ç»„æ’å…¥æ“ä½œï¼Œæ’å…¥å³åœ¨ç‰¹å®šçš„ä½ç½®æ·»åŠ æ•°æ®ï¼Œå¦‚ä¸‹ä»£ç bool insert_arr(struct Arr *pArr, int pos, int val){ // å¦‚æœæ•°ç»„å…ƒç´ å·²æ»¡ï¼Œè¿”å›false if (is_full(pArr)) { return false; } // å¦‚æœè¦æ’å…¥çš„ä½ç½®ä¸å¯¹ï¼Œè¿”å›false if (pos &lt; 0 || pos &gt; pArr-&gt;cnt) { return false; } // ä»æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®å¼€å§‹ï¼Œåˆ°è¦æ’å…¥çš„ä½ç½®ï¼ŒæŒ¨ä¸ªå°†æ•°ç»„å…ƒç´ å¾€åç§»ä¸€ä½ for (int i = pArr-&gt;cnt - 1; i &gt;= pos; --i) { pArr-&gt;pBase[i + 1] = pArr-&gt;pBase[i]; } // å°†æ’å…¥çš„å€¼ï¼Œèµ‹åœ¨æŒ‡å®šçš„ä½ç½® pArr-&gt;pBase[pos] = val; // æ ‡è®°æ•°ç»„æœ‰æ•ˆå…ƒç´ çš„å­—æ®µåŠ 1 (pArr-&gt;cnt)++; return true;}2.7 åˆ é™¤å…ƒç´ åˆ é™¤æ“ä½œå’Œæ’å…¥æ“ä½œç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ï¼šæ’å…¥æ•°æ®æ—¶ï¼Œä»æ’å…¥ä½ç½®å¼€å§‹ï¼Œåé¢çš„æ•°æ®å¾€åç§»ï¼Œå¹¶åœ¨æ’å…¥çš„ä½ç½®åŠ å…¥å…ƒç´ ï¼›åˆ é™¤æ•°æ®æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨åˆ é™¤ä½ç½®çš„åä¸€ä½å¼€å§‹ï¼Œåé¢çš„æ•°æ®éƒ½å¾€å‰ç§»ï¼Œåˆ é™¤ä½ç½®çš„æ•°æ®ä¼šè¢«è¦†ç›–ï¼Œå¦‚ä¸‹ä»£ç bool delete_arr(struct Arr *pArr, int pos, int *pVal){ // å¦‚æœæ•°ç»„å…ƒç´ å·²æ»¡ï¼Œè¿”å›false if (is_full(pArr)) { return false; } // å¦‚æœè¦æ’å…¥çš„ä½ç½®ä¸å¯¹ï¼Œè¿”å›false if (pos &lt; 0 || pos &gt; pArr-&gt;cnt) { return false; } // å°†åˆ é™¤çš„å…ƒç´ çš„å€¼èµ‹ç»™ä¼ è¿›æ¥çš„æŒ‡é’ˆå˜é‡ *pVal = pArr-&gt;pBase[pos]; // ä»åˆ°è¦åˆ é™¤çš„ä½ç½®å¼€å§‹ï¼Œä¸€ç›´åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œå°†æ•°ç»„å…ƒç´ æŒ¨ä¸ªå¾€å‰ç§»åŠ¨ for (int i = pos; i &lt; pArr-&gt;cnt; ++i) { pArr-&gt;pBase[i] = pArr-&gt;pBase[i + 1]; } pArr-&gt;cnt--; return true;}2.8 æ•°ç»„å€’ç½®æ•°ç»„å€’ç½®çš„æ“ä½œæ˜¯å°†æ•°ç»„çš„ç¬¬1ä½å’Œæœ€å1ä½å…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œç¬¬2ä½å’Œå€’æ•°ç¬¬2ä½å…ƒç´ è¿›è¡Œæ›¿æ¢ï¼Œä¾æ­¤ç±»æ¨ã€‚æœ€ç»ˆå®Œæˆå€’ç½®ï¼Œå¦‚ä¸‹ä»£ç void inverse_arr(struct Arr *pArr){ int i = 0; int j = pArr-&gt;cnt - 1; int t; while (i &lt; j) { t = pArr-&gt;pBase[i]; pArr-&gt;pBase[i] = pArr-&gt;pBase[j]; pArr-&gt;pBase[j] = t; ++i; --j; } return;}2.9 æ•°ç»„æ’åºæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªç®€å•çš„æ’åºè¿‡ç¨‹ï¼Œå‡½æ•°ä¸­æœ‰ä¸¤å±‚å¾ªç¯ã€‚ç¬¬ä¸€å±‚å¾ªç¯ï¼Œé€‰æ‹©å½“å‰ä½ç½®çš„å…ƒç´ ï¼ˆä»ç´¢å¼•ä¸º0çš„ä½ç½®å¼€å§‹ï¼Œå³æœªå¾ªç¯å‰ï¼Œå½“å‰ä½ç½®æ˜¯ç¬¬1ä¸ªå…ƒç´ ï¼‰ï¼Œåœ¨ç¬¬äºŒå±‚å¾ªç¯ä¸­ï¼Œä»å½“å‰ä½ç½®çš„å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œç›´åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼ŒæŒ¨ä¸ªä¸å½“å‰ä½ç½®çš„å…ƒç´ è¿›è¡Œå¤§å°å¯¹æ¯”ï¼Œæ¯æ¬¡å¯¹æ¯”éƒ½æŠŠå°çš„å…ƒç´ æ›¿æ¢åˆ°å½“å‰ä½ç½®ã€‚ç¬¬1è½®å¾ªç¯ç»“æŸåï¼Œç´¢å¼•ä¸º0çš„ä½ç½®å°†æ˜¯æœ€å°çš„å…ƒç´ ï¼Œç¬¬2è½®å¾ªç¯ç»“æŸåï¼Œç´¢å¼•ä¸º1çš„ä½ç½®å°†æ˜¯æ¬¡å°çš„å…ƒç´ ï¼Œä¾æ­¤ç±»æ¨ã€‚æœ€ç»ˆï¼Œæ•°ç»„å…ƒç´ å°†æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œå¦‚ä¸‹ä»£ç void sort_arr(struct Arr *pArr){ int i, j, t; for (i = 0; i &lt; pArr-&gt;cnt; i++) { for (j = i + 1; j &lt; pArr-&gt;cnt; j++) { if (pArr-&gt;pBase[i] &gt; pArr-&gt;pBase[j]) { t = pArr-&gt;pBase[i]; pArr-&gt;pBase[i] = pArr-&gt;pBase[j]; pArr-&gt;pBase[j] = t; } } }}ä¸‰ã€æµ‹è¯•ä¸éªŒè¯æœ€ç»ˆæ‰€æœ‰æµ‹è¯•ä»£ç å¦‚ä¸‹#include &lt;stdio.h&gt;#include &lt;sys/malloc.h&gt; // windowsä¸­ç”¨ #include &lt;malloc.h&gt;#include &lt;stdlib.h&gt;// å®šä¹‰æ•°ç»„ç»“æ„ä½“struct Arr{ int *pBase; // å­˜å‚¨çš„æ˜¯æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€ int len; // æ•°ç»„æ‰€èƒ½å®¹çº³çš„æœ€å¤§å…ƒç´ ä¸ªæ•° int cnt; // å½“å‰æ•°ç»„æœ‰æ•ˆå…ƒç´ ä¸ªæ•°};// åˆå§‹åŒ–æ•°ç»„void init_arr(struct Arr *pArr, int length){ // å°†åˆ†é…çš„å†…å­˜èµ‹ç»™pBase pArr-&gt;pBase = (int *)malloc(sizeof(int) * length); if (NULL == pArr-&gt;pBase) { printf(\"åŠ¨æ€åˆ†é…å†…å­˜å¤±è´¥\"); exit(-1); } // å†…å­˜åˆ†é…æˆåŠŸ pArr-&gt;len = length; pArr-&gt;cnt = 0; return;}// åˆ¤æ–­æ•°ç»„æ˜¯å¦ä¸ºç©ºbool is_empty(struct Arr *pArr){ // æ•°ç»„çš„æœ‰æ•ˆä¸ªæ•°ä¸º0ï¼Œå³æ•°ç»„ä¸ºç©º if (0 == pArr-&gt;cnt) { return true; } // å¦åˆ™ï¼Œæ•°ç»„ä¸ä¸ºç©º else { return false; }}// åˆ¤æ–­æ•°ç»„å…ƒç´ æ˜¯å¦å·²æ»¡bool is_full(struct Arr *pArr){ // æ•°ç»„çš„æœ‰æ•ˆä¸ªæ•°ä¸ºæ•°ç»„çš„é•¿åº¦ï¼Œå³æ•°ç»„å·²æ»¡ if (pArr-&gt;cnt == pArr-&gt;len) { return true; } // å¦åˆ™ï¼Œæ•°ç»„æœªæ»¡ else { return false; }}// éå†æ•°ç»„void traverse_arr(struct Arr *pArr){ for (int i = 0; i &lt; pArr-&gt;cnt; i++) { printf(\"%d\\t\", pArr-&gt;pBase[i]); } printf(\"\\n\");}// è¿½åŠ æ•°ç»„ï¼ˆå…ƒç´ ï¼‰bool append_arr(struct Arr *pArr, int val){ // æ•°ç»„æ»¡æ˜¯è¿”å›false if (is_full(pArr)) { return false; } // æ•°ç»„ä¸æ»¡æ—¶è¿½åŠ  pArr-&gt;pBase[pArr-&gt;cnt] = val; (pArr-&gt;cnt)++; return true;}// æ’å…¥æ•°ç»„ï¼ˆå…ƒç´ ï¼‰bool insert_arr(struct Arr *pArr, int pos, int val){ // å¦‚æœæ•°ç»„å…ƒç´ å·²æ»¡ï¼Œè¿”å›false if (is_full(pArr)) { return false; } // å¦‚æœè¦æ’å…¥çš„ä½ç½®ä¸å¯¹ï¼Œè¿”å›false if (pos &lt; 0 || pos &gt; pArr-&gt;cnt) { return false; } // ä»æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®å¼€å§‹ï¼Œåˆ°è¦æ’å…¥çš„ä½ç½®ï¼ŒæŒ¨ä¸ªå°†æ•°ç»„å…ƒç´ å¾€åç§»ä¸€ä½ for (int i = pArr-&gt;cnt - 1; i &gt;= pos; --i) { pArr-&gt;pBase[i + 1] = pArr-&gt;pBase[i]; } // å°†æ’å…¥çš„å€¼ï¼Œèµ‹åœ¨æŒ‡å®šçš„ä½ç½® pArr-&gt;pBase[pos] = val; // æ ‡è®°æ•°ç»„æœ‰æ•ˆå…ƒç´ çš„å­—æ®µåŠ 1 (pArr-&gt;cnt)++; return true;}// åˆ é™¤æ•°ç»„ï¼ˆå…ƒç´ ï¼‰bool delete_arr(struct Arr *pArr, int pos, int *pVal){ // å¦‚æœæ•°ç»„å…ƒç´ å·²æ»¡ï¼Œè¿”å›false if (is_full(pArr)) { return false; } // å¦‚æœè¦æ’å…¥çš„ä½ç½®ä¸å¯¹ï¼Œè¿”å›false if (pos &lt; 0 || pos &gt; pArr-&gt;cnt) { return false; } // å°†åˆ é™¤çš„å…ƒç´ çš„å€¼èµ‹ç»™ä¼ è¿›æ¥çš„æŒ‡é’ˆå˜é‡ *pVal = pArr-&gt;pBase[pos]; // ä»åˆ°è¦åˆ é™¤çš„ä½ç½®å¼€å§‹ï¼Œä¸€ç›´åˆ°æœ€åä¸€ä¸ªä½ç½®ï¼Œå°†æ•°ç»„å…ƒç´ æŒ¨ä¸ªå¾€å‰ç§»åŠ¨ for (int i = pos; i &lt; pArr-&gt;cnt; ++i) { pArr-&gt;pBase[i] = pArr-&gt;pBase[i + 1]; } pArr-&gt;cnt--; return true;}// å€’ç½®æ•°ç»„ï¼ˆå…ƒç´ ï¼‰void inverse_arr(struct Arr *pArr){ int i = 0; int j = pArr-&gt;cnt - 1; int t; while (i &lt; j) { t = pArr-&gt;pBase[i]; pArr-&gt;pBase[i] = pArr-&gt;pBase[j]; pArr-&gt;pBase[j] = t; ++i; --j; } return;}// æ•°ç»„æ’åºvoid sort_arr(struct Arr *pArr){ int i, j, t; for (i = 0; i &lt; pArr-&gt;cnt; i++) { for (j = i + 1; j &lt; pArr-&gt;cnt; j++) { if (pArr-&gt;pBase[i] &gt; pArr-&gt;pBase[j]) { t = pArr-&gt;pBase[i]; pArr-&gt;pBase[i] = pArr-&gt;pBase[j]; pArr-&gt;pBase[j] = t; } } }}// ä¸»å‡½æ•°æµ‹è¯•int main(){ struct Arr arr; // åˆå§‹åŒ–é•¿åº¦ä¸º6çš„æ•°ç»„ init_arr(&amp;arr, 6); // è¿½åŠ å…ƒç´  append_arr(&amp;arr, 1); append_arr(&amp;arr, 2); append_arr(&amp;arr, 3); append_arr(&amp;arr, 4); traverse_arr(&amp;arr); // è¾“å‡ºç»“æœä¸º 1 2 3 4 // åœ¨ç´¢å¼•ä¸º0çš„ä½ç½®æ’å…¥6 insert_arr(&amp;arr, 0, 5); traverse_arr(&amp;arr); // è¾“å‡ºç»“æœä¸º 5 1 2 3 4 // åœ¨ç´¢å¼•ä¸º0çš„ä½ç½®åˆ é™¤å…ƒç´  int delval; // ç”¨äºæ¥æ”¶åˆ é™¤çš„å…ƒç´  delete_arr(&amp;arr, 0, &amp;delval); traverse_arr(&amp;arr); // è¾“å‡ºç»“æœä¸º 1 2 3 4 // æ•°ç»„å€’ç½® inverse_arr(&amp;arr); traverse_arr(&amp;arr); // è¾“å‡ºç»“æœä¸º 4 3 2 1 // æ•°ç»„æ’åº sort_arr(&amp;arr); traverse_arr(&amp;arr); // è¾“å‡ºç»“æœä¸º 1 2 3 4 return 0;} æœ¬æ–‡åŸåˆ›é¦–å‘è‡ªwxè®¢é˜…å·ï¼šæå®¢å¼€å‘ä¸­ï¼Œç¦æ­¢è½¬è½½" }, { "title": "ç®—æ³•å­¦ä¹ åŸºç¡€-æ’åºé—®é¢˜", "url": "/posts/algorithm_sort.html", "categories": "æ•°æ®ç»“æ„ä¸ç®—æ³•", "tags": "", "date": "2023-01-26 21:27:00 +0800", "snippet": " æ’°å†™æ—¶é—´ï¼š2019-06-09ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ï¼Œæ­¤åšå®¢å‚è€ƒä»¥ä¸‹å†…å®¹ https://www.bilibili.com/video/av46648286ä¸€ã€ä»€ä¹ˆæ˜¯æ’åºé—®é¢˜ï¼Ÿä¸€ç³»åˆ—æ²¡æœ‰é¡ºåºçš„æ•°ï¼Œä»å¤§åˆ°å°æˆ–è€…ä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œè¿™å°±æ˜¯æ’åºé—®é¢˜ã€‚æ’åºé—®é¢˜æ˜¯æœ€ç®€å•ï¼Œæœ€å®¹æ˜“è€ƒåˆ°çš„é—®é¢˜ã€‚å¸¸è§çš„æ’åºå¦‚ä¸‹å›¾æˆ‘ä»¬åº”è¯¥è‡³å°‘è®°ä½å››ç§æ’åºï¼Œå¦‚ä¸‹å›¾äºŒã€æ’åºç®—æ³•å®‹è¯è®°å¿†æ³•ã€Šè®°æ’åºï¼Œé¢è¯•æˆ‘æœ€å¼ºã€‹é€‰æ³¡æ’ï¼Œå¿«...", "content": " æ’°å†™æ—¶é—´ï¼š2019-06-09ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-26ï¼Œæ­¤åšå®¢å‚è€ƒä»¥ä¸‹å†…å®¹ https://www.bilibili.com/video/av46648286ä¸€ã€ä»€ä¹ˆæ˜¯æ’åºé—®é¢˜ï¼Ÿä¸€ç³»åˆ—æ²¡æœ‰é¡ºåºçš„æ•°ï¼Œä»å¤§åˆ°å°æˆ–è€…ä»å°åˆ°å¤§è¿›è¡Œæ’åºï¼Œè¿™å°±æ˜¯æ’åºé—®é¢˜ã€‚æ’åºé—®é¢˜æ˜¯æœ€ç®€å•ï¼Œæœ€å®¹æ˜“è€ƒåˆ°çš„é—®é¢˜ã€‚å¸¸è§çš„æ’åºå¦‚ä¸‹å›¾æˆ‘ä»¬åº”è¯¥è‡³å°‘è®°ä½å››ç§æ’åºï¼Œå¦‚ä¸‹å›¾äºŒã€æ’åºç®—æ³•å®‹è¯è®°å¿†æ³•ã€Šè®°æ’åºï¼Œé¢è¯•æˆ‘æœ€å¼ºã€‹é€‰æ³¡æ’ï¼Œå¿«å½’å †å¸Œç»Ÿè®¡åŸºï¼Œæ©æ–¹æ©è€æ©ä¸€ä¸‰ï¼Œå¯¹æ©åŠ Kæ©ä¹˜ï¼Œä¸ç¨³ç¨³ç¨³ä¸ç¨³ç¨³ï¼Œä¸ç¨³ä¸ç¨³ç¨³ç¨³ç¨³ï¼" }, { "title": "Androidå¼€å‘ä¸­åŒ…çš„å®šä¹‰", "url": "/posts/android_package-statement.html", "categories": "Android", "tags": "è§„èŒƒ", "date": "2023-01-26 09:45:00 +0800", "snippet": "1ã€æ¦‚è¿°Javaæ˜¯ä¸€é—¨è·¨å¹³å°çš„å…¨èƒ½é¢ç›¸å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨æœåŠ¡ç«¯ã€Androidä»¥åŠæ¡Œé¢è½¯ä»¶ä¸­éƒ½å å¾ˆå¤§æ¯”ä¾‹ï¼Œç›®å‰ï¼ŒJavaä¹Ÿæ˜¯ä¸–ç•Œä¸Šä½¿ç”¨äººæ•°æœ€å¤šçš„ç¼–ç¨‹è¯­è¨€ã€‚ä»Šå¤©ç»™å¤§å®¶åˆ†äº«Androidå¼€å‘ä¸­JavaåŒ…å®šä¹‰çš„ç†è§£ã€‚2ã€ä¸ºä»€ä¹ˆè¦å®šä¹‰ JavaåŒ…ï¼ŸJavaå…·æœ‰çš„å¼€å‘ç‰¹ç‚¹æ˜¯é¢ç›¸å¯¹è±¡ï¼Œç®€å•çš„è¯´ï¼ŒJavaå¼€å‘è€…ä»¬åœ¨å¼€å‘ç¨‹åºçš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆå¥½çš„æŠŠæ¨¡å‹(Modle)ã€ç”¨æˆ·è§†å›¾(View)ã€æ§åˆ¶å™¨(Controll...", "content": "1ã€æ¦‚è¿°Javaæ˜¯ä¸€é—¨è·¨å¹³å°çš„å…¨èƒ½é¢ç›¸å¯¹è±¡ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨æœåŠ¡ç«¯ã€Androidä»¥åŠæ¡Œé¢è½¯ä»¶ä¸­éƒ½å å¾ˆå¤§æ¯”ä¾‹ï¼Œç›®å‰ï¼ŒJavaä¹Ÿæ˜¯ä¸–ç•Œä¸Šä½¿ç”¨äººæ•°æœ€å¤šçš„ç¼–ç¨‹è¯­è¨€ã€‚ä»Šå¤©ç»™å¤§å®¶åˆ†äº«Androidå¼€å‘ä¸­JavaåŒ…å®šä¹‰çš„ç†è§£ã€‚2ã€ä¸ºä»€ä¹ˆè¦å®šä¹‰ JavaåŒ…ï¼ŸJavaå…·æœ‰çš„å¼€å‘ç‰¹ç‚¹æ˜¯é¢ç›¸å¯¹è±¡ï¼Œç®€å•çš„è¯´ï¼ŒJavaå¼€å‘è€…ä»¬åœ¨å¼€å‘ç¨‹åºçš„æ—¶å€™ï¼Œå¯ä»¥å¾ˆå¥½çš„æŠŠæ¨¡å‹(Modle)ã€ç”¨æˆ·è§†å›¾(View)ã€æ§åˆ¶å™¨(Controller)ç­‰ä¸åŒåŠŸèƒ½çš„ä»£ç åˆ†å¼€æ¥å†™ï¼Œè¿™æ ·ä¸ä»…ä¾¿äºç†è§£æ›´ä¾¿äºä»£ç çš„ç»´æŠ¤ã€‚æˆ‘è®¤ä¸ºé¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œä½¿ç”¨äººç±»å¤„ç†é—®é¢˜çš„æ–¹å¼å»å¼€å‘ç¨‹åºâ€ã€‚æˆ‘ä»¬ä¼šæ ¹æ®ä¸åŒç±»çš„åŠŸèƒ½ï¼ŒåŒºåˆ†åœ¨ä¸åŒçš„åŒ…ä¸­ã€‚3ã€åœ¨Androidå¼€å‘ä¸­JavaåŒ…åœ¨Androidåº”ç”¨ç¨‹åºçš„å¼€å‘ä¸­ï¼Œæ ¹æ®Androidè‡ªèº«çš„ç‰¹æ€§ä»¥åŠJavaæœ¬èº«çš„ç‰¹ç‚¹ï¼Œæˆ‘ç»™å¤§å®¶åˆ†äº«æˆ‘åœ¨Androidå¼€å‘ä¸­å¸¸å®šä¹‰çš„åŒ…ï¼š activity: ç”¨äºä¿å­˜Activityç±» service: ä¿å­˜æœåŠ¡ç›¸å…³çš„ç±» util: å…¨ç§°utilitiesï¼ˆå·¥å…·ï¼‰ï¼ŒæŠŠå„ç§å·¥å…·ç±»ä¿å­˜åœ¨utilåŒ…å†… engine: å¼•æ“åŒ…ï¼Œä¿å­˜å„ç§é©±åŠ¨ç±»ï¼Œæ¯”å¦‚æ•°æ®åº“é©±åŠ¨ receiver: å¹¿æ’­æ¥æ”¶è€…åŒ…ï¼Œç”¨äºå­˜æ”¾å¹¿æ’­æ¥æ”¶è€…ç±» view: è‡ªå®šä¹‰æ§ä»¶åŒ…ï¼ŒæŠŠè‡ªå®šä¹‰çš„æ§ä»¶éƒ½æ”¾åœ¨è¿™é‡Œ dao: ï¼ˆå…¨ç§°ï¼šData Access Objects) æŠŠæœ‰å…³æ•°æ®åº“æ“ä½œçš„ç±»æ”¾åœ¨è¿™é‡Œ bean: ç±»ä¼¼äºJavaWebå¼€å‘ä¸­çš„JavaBeanä¸€æ ·ï¼ŒbeanåŒ…æ˜¯ä¸“é—¨æ”¾ç½®å±æ€§ç±»çš„ã€‚æ¯”å¦‚åœ¨æ•°æ®åº“ä¸­åˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œé‚£ä¹ˆä»æ•°æ®ä¸­è¯»å–è¡¨æ•°æ®æ—¶ï¼Œå°±å¯ä»¥å…ˆå°è£…ä¸€ä¸ªç±»ï¼Œä¸åŒçš„å±æ€§å¯¹åº”æ•°æ®åº“ä¸­çš„ä¸åŒå­—æ®µï¼Œå¹¶è®¾ç½®getå’Œsetå‡½æ•°å¯¹å±æ€§è¿›è¡Œè·å–å’Œä¿®æ”¹ã€‚" }, { "title": "ç®—æ³•å­¦ä¹ åŸºç¡€-åŸºæœ¬æ¦‚å¿µ", "url": "/posts/algorithm_statement.html", "categories": "æ•°æ®ç»“æ„ä¸ç®—æ³•", "tags": "", "date": "2023-01-18 21:21:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿° æ’°å†™æ—¶é—´ï¼š2019-06-07 13:35ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-18ä½œä¸ºä¸€åæ™®é€šçš„äºŒæœ¬å­¦æ ¡ï¼Œæˆ‘åœ¨å¾ˆæ—©ä¹‹å‰å°±æœ‰ä¸€ä¸ªç›®æ ‡ï¼Œé‚£å°±æ˜¯å¤§å­¦ä¹‹åå¥½å¥½æ‰¾ä¸€ä¸ªè½¯ä»¶å¼€å‘å·¥ä½œã€‚å› æ­¤å­¦ä¹ äº†å¾ˆå¤šçš„ç¼–ç¨‹åŸºç¡€ï¼Œä¸è¿‡è¿‘å‡ å¤©é¢è¯•å‘ç°ï¼ŒæŠ€æœ¯å®˜æ€»æ˜¯å–œæ¬¢é—®ä½ ç®—æ³•çŸ¥è¯†ã€‚ç¼–ç¨‹è¯­è¨€ä¸æ–­å˜åŒ–ï¼Œä½†æ˜¯å¾ˆåº•å±‚çš„çŸ¥è¯†ä¸ç®—æ³•å¯†åˆ‡ç›¸å…³ï¼Œç®—æ³•ä¹Ÿå°±æ˜¯ä½“ç°ç¨‹åºå‘˜å†…åŠŸæ‰€åœ¨ã€‚å› æ­¤ï¼Œä»æ­¤è¯¥å¥½å¥½å­¦ç®—æ³•ã€‚ æœ¬ç¬”è®°å‚è€ƒé©¬å£«å…µè€å¸ˆçš„è§†é¢‘æ•™ç¨‹ï¼šhtt...", "content": "ä¸€ã€æ¦‚è¿° æ’°å†™æ—¶é—´ï¼š2019-06-07 13:35ï¼Œæ•´ç†æ—¶é—´ï¼š2023-01-18ä½œä¸ºä¸€åæ™®é€šçš„äºŒæœ¬å­¦æ ¡ï¼Œæˆ‘åœ¨å¾ˆæ—©ä¹‹å‰å°±æœ‰ä¸€ä¸ªç›®æ ‡ï¼Œé‚£å°±æ˜¯å¤§å­¦ä¹‹åå¥½å¥½æ‰¾ä¸€ä¸ªè½¯ä»¶å¼€å‘å·¥ä½œã€‚å› æ­¤å­¦ä¹ äº†å¾ˆå¤šçš„ç¼–ç¨‹åŸºç¡€ï¼Œä¸è¿‡è¿‘å‡ å¤©é¢è¯•å‘ç°ï¼ŒæŠ€æœ¯å®˜æ€»æ˜¯å–œæ¬¢é—®ä½ ç®—æ³•çŸ¥è¯†ã€‚ç¼–ç¨‹è¯­è¨€ä¸æ–­å˜åŒ–ï¼Œä½†æ˜¯å¾ˆåº•å±‚çš„çŸ¥è¯†ä¸ç®—æ³•å¯†åˆ‡ç›¸å…³ï¼Œç®—æ³•ä¹Ÿå°±æ˜¯ä½“ç°ç¨‹åºå‘˜å†…åŠŸæ‰€åœ¨ã€‚å› æ­¤ï¼Œä»æ­¤è¯¥å¥½å¥½å­¦ç®—æ³•ã€‚ æœ¬ç¬”è®°å‚è€ƒé©¬å£«å…µè€å¸ˆçš„è§†é¢‘æ•™ç¨‹ï¼šhttps://www.bilibili.com/video/av46562560äºŒã€åŸºæœ¬æ¦‚å¿µç®—æ³•æ˜¯æ•°æ®ç»“æ„ä¸ç®—æ³•çš„ç®€ç§°2.1 ä»€ä¹ˆæ˜¯æ•°æ®ç»“æ„ï¼ŸData Structureç®€å•çš„ç†è§£ï¼Œæ•°æ®ç»“æ„å°±æ˜¯ï¼šå­˜å‚¨æ•°æ®çš„ä¸åŒæ–¹å¼å‡å¦‚æˆ‘ä»¬æŠŠ5ä¸ªæ•°æ®æ¯”ä½œ5ä¸ªé¸¡è›‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªç®¡å­é‡Œï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ¡†å­é‡Œï¼Œè¿™å°±æ˜¯ä¸åŒçš„å­˜å‚¨æ–¹å¼ã€‚å­˜å‚¨æ•°æ®çš„ä¸åŒæ–¹å¼å°±æ˜¯ä¸åŒçš„æ•°æ®ç»“æ„ã€‚å¼•ç”³ï¼šåŠ å…¥æˆ‘ä»¬æœ‰2,4ï¼Œ7ï¼Œ1,6,3,5ä¸ªæ•°ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥å­˜å‚¨ï¼Ÿ æ–¹å¼ä¸€ï¼šæˆ‘ä»¬æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹å¼å°±æ˜¯æŠŠå…¶ä¸ªæ•°æŒ¨ä¸ªç´§ç´§æ’åœ¨ä¸€èµ·ï¼Œä¸­é—´æ²¡æœ‰ä»»ä½•ç©ºéš™ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œåœ¨è®¡ç®—æœºä¸­æˆ‘ä»¬å«åšæ•°ç»„ï¼ˆå®é™…ä¸Šï¼Œï¼‰ã€‚æ•°ç»„çš„æ¯ä¸€ä¸ªå­˜å‚¨å•å…ƒå¤§å°éƒ½ä¸€æ ·ï¼Œæ¯ä¸€ä¸ªæ•´æ•°æ”¾åˆ°ä¸€ä¸ªå•å…ƒæ ¼é‡Œé¢ã€‚ æ–¹å¼äºŒï¼šæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ç§æ–¹å¼ï¼Œæ¯ä¸€ä¸ªå°æ ¼é™¤äº†å­˜å‚¨è‡ªå·±çš„æ•°æ®ä»¥å¤–ï¼Œè¿˜å­˜ç€æŒ‡å‘ä¸‹ä¸€ä¸ªå°æ ¼çš„æŒ‡é’ˆï¼ˆé“¾æ¡ï¼‰ï¼Œè¿™æ ·çš„å­˜å‚¨æ–¹å¼å«åšé“¾è¡¨ã€‚ æ€»ç»“ï¼šæ•°æ®çš„å­˜å‚¨æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå¯¹äºä¸åŒçš„é—®é¢˜æˆ‘ä»¬ä¼šé‡‡å–ä¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦å­¦çš„æ•°æ®ç»“æ„ã€‚2.2 ä»€ä¹ˆæ˜¯ç®—æ³•ï¼ˆAlgorithmï¼‰ï¼Ÿç®—æ³•æ˜¯åŒä¸€ä¸ªé—®é¢˜çš„ä¸åŒè§£å†³æ–¹æ³•ã€‚å¦‚ä¸‹é¢çš„è®¡ç®—é¢˜ï¼š1+2+3+â€¦â€¦+99=?æ–¹å¼ä¸€ï¼šæˆ‘ä»¬ä½¿ç”¨æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯1å…ˆåŠ 2ï¼Œå†åŠ 3ï¼Œå†åŠ 4ï¼Œä»¥æ­¤ç±»æ¨ã€‚æ–¹å¼äºŒï¼šæˆ‘ä»¬è¿˜å¯ä»¥åˆ†åˆ«è®¡ç®—1åŠ 99ï¼Œ2+98ï¼Œ3+97ï¼Œä»¥æ­¤ç±»æ¨ã€‚åŒä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æœ‰ä¸åŒçš„è§£å†³åŠæ³•ï¼Œè¿™å°±æ˜¯ç®—æ³•ã€‚è€Œç®—æ³•å¾€å¾€æ˜¯é’ˆå¯¹ç‰¹å®šçš„æ•°æ®ç»“æ„çš„ã€‚ å‡è®¾1ï¼šå¯¹äº1ä¸­çš„é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬å¦‚ä½•å¾€é“¾è¡¨é‡Œé¢çš„7å’Œ1æ’å…¥ä¸€ä¸ª0ï¼Ÿè¿™æ—¶å€™æˆ‘ä»¬åªéœ€è¦å°†7å’Œ1ä¸­çš„é“¾æ¡æ‰“æ–­ï¼Œè®©7ä¸­çš„é“¾æ¡æŒ‡å‘0ï¼Œ0ä¸­çš„é“¾æ¡æŒ‡å‘1ï¼Œè¿™æ—¶å€™å°±æ„æˆäº†ä¸€ä¸ªæ–°çš„é“¾æ¡ï¼Œè¿™å°±å®Œæˆäº†ã€‚ å‡è®¾2ï¼šå¯¹äº1ä¸­çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¦‚æ­Œåœ¨7å’Œ1ä¹‹é—´æ’å…¥0ï¼Ÿé‚£ä¹ˆè¿™ä¸ªç®—æ³•å°±ç¨å¾®éº»çƒ¦ä¸€äº›äº†ã€‚æ•°ç»„ä¹‹é—´æ²¡æœ‰ç©ºéš™ï¼Œæˆ‘ä»¬æ’å…¥ä¸äº†ï¼Œå› æ­¤å¯ä»¥é‡‡å–ä»¥ä¸‹åŠæ³•ï¼šæˆ‘ä»¬é‡æ–°åˆ†é…ä¸€å—æ–°çš„ç©ºé—´ï¼Œè¿™æ˜¯çš„æ–°ç©ºé—´è¦æ¯”åŸæ¥çš„ç©ºé—´è¦å¤§ä¸€ä¸ªå•å…ƒæ ¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå•ä½çš„æ•°æ®å¤§å°ã€‚è¿™æ—¶å€™å…ˆæŠŠ2ã€4ã€7å¤åˆ¶ä¸‹æ¥ï¼Œå†æŠŠ0æ’è¿›å»ï¼Œæœ€åæŠŠ1ã€6ã€5ã€3å¤åˆ¶ä¸‹å»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºç”±ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºæ’å…¥ç®—æ³•æ¥è¯´ï¼Œé“¾è¡¨è¦æ¯”æ•°ç»„ç®€å•çš„å¤šã€‚å½“ç„¶ï¼Œä¸èƒ½è¯´æ•°ç»„å°±ä¸å¦‚é“¾è¡¨ï¼Œæœ‰å¾ˆå¤šçš„æ“ä½œæ•°ç»„è¦æ¯”é“¾è¡¨å¿«å¾—å¤šï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬æƒ³è®¿é—®ç¬¬6ä¸ªæ•°ã€‚å¯¹äºé“¾è¡¨æ¥è¯´æˆ‘ä»¬å¿…é¡»ä»ç¬¬ä¸€ä¸ªæ•°å¼€å§‹ï¼Œå…ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ•°ï¼Œå†æ ¹æ®ç¬¬ä¸€ä¸ªæ•°é¡ºç€é“¾æ¡å¾€åæ‰¾ï¼Œæœ€ç»ˆæ‰èƒ½æ‰¾åˆ°ã€‚äºŒå¯¹äºæ•°ç»„æ¥è¯´ï¼Œæ‰¾ç¬¬6ä¸ªæ•°å°±å¾ˆç®€å•ï¼Œåªè¦çŸ¥é“å•å…ƒæ ¼çš„å¤§å°ï¼Œç›´æ¥å¾€åè·¨è¶Š6ä¸ªå•å…ƒæ ¼ï¼Œå°±å¯ä»¥æ‰¾åˆ°ç¬¬6ä¸ªæ•°ï¼Œæ‰€ä»¥æŸ¥æ‰¾å¯¹äºæ•°ç»„æ¥è¯´ï¼Œè¦æ¯”é“¾è¡¨å¿«ã€‚æ‰€ä»¥ï¼Œå¯¹ä¸åŒçš„æ•°æ®ç»“æ„ï¼Œåœ¨ä¸åŒçš„åº”ç”¨åœºæ™¯ä¸­æœ‰ä¸åŒä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œæ‰€ä»¥ï¼Œé€‰æ‹©ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ï¼Œè¦æ ¹æ®ç‰¹å®šçš„é—®é¢˜æ¥å†³å®šã€‚æ€»ç»“æ¥è¯´ï¼Œæ•°æ®ç»“æ„å°±æ˜¯å­˜å‚¨æ•°æ®çš„ä¸åŒæ–¹å¼ï¼Œç®—æ³•å°±æ˜¯è§£å†³é—®é¢˜çš„ä¸åŒæ–¹æ³•ï¼Œè€Œç®—æ³•å¾€å¾€æ˜¯é’ˆå¯¹ä¸åŒçš„æ•°æ®ç»“æ„çš„ã€‚ä¸‰ã€å¦‚ä½•æµ‹ç®—ç®—æ³•çš„ä¼˜åŠ£ï¼Ÿ æ—¶é—´æµ‹ç®—è®¡ç®—ç®—æ³•æ—¶é—´å·®ï¼Œå¹…åº¦ä¸å¤Ÿå¾ªç¯æ¥å‡‘ã€‚å¯¹äºä¸€ä¸ªé—®é¢˜ï¼Œå®ŒæˆåŒæ ·ç»“æœï¼Œæˆ‘ä»¬è®¤ä¸ºæ‰€ç”¨æ—¶é—´è¶Šå°‘ï¼Œç®—æ³•è¶Šå¥½; ç©ºé—´æµ‹ç®—å¯¹äºä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœå®ŒæˆåŒæ ·çš„ç»“æœï¼Œæˆ‘ä»¬è®¤ä¸ºï¼Œå ç”¨ç³»ç»Ÿçš„ç©ºé—´è¶Šå°‘ï¼Œç®—æ³•è¶Šå¥½ï¼Œå ç”¨ç³»ç»Ÿç©ºé—´è¶Šå¤§ï¼Œç®—æ³•è¶Šä¸å¥½ã€‚3.1 æˆ‘ä»¬å¦‚ä½•ç§’é€Ÿç®—æ³•çš„ä¼˜åŠ£ï¼ŸBig Oï¼ˆæ¬§ï¼‰O(Big O):Big Oï¼ˆä¹Ÿå¯ä»¥è¯»ä½œâ€œå¤§Oâ€ï¼‰ç”¨æ¥æ ‡è¯†å¤æ‚åº¦ã€‚ ä»€ä¹ˆæ˜¯æ—¶é—´å¤æ‚åº¦ï¼Ÿè®¡ç®—æœºè§£å†³ä¸€ä¸ªé—®é¢˜æ‰§è¡Œçš„æ—¶é—´ï¼Œéšç€é—®é¢˜è§„æ¨¡çš„æ‰©å¤§ï¼Œæ—¶é—´çš„å˜åŒ–çš„è§„å¾‹ã€‚ ä»€ä¹ˆæ˜¯ç©ºé—´å¤æ‚åº¦ï¼Ÿè®¡ç®—æœºè§£å†³ä¸€ä¸ªé—®é¢˜åšå ç”¨çš„ç©ºé—´ï¼Œéšç€é—®é¢˜è§„æ¨¡çš„æ‰©å¤§ï¼Œç©ºé—´çš„å˜åŒ–è§„å¾‹ã€‚ å‡è®¾ä¸€å¦‚æœæ•°ç»„è§„æ¨¡ä¸º10ï¼Œéœ€è¦æ‰¾æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ•°ï¼Œç°åœ¨æ•°ç»„è§„æ¨¡å˜æˆ10ä¸‡ï¼Œéœ€è¦æ‰¾æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ•°ã€‚æ—¶é—´å…¶å®æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ—¶å€™æŠŠæ—¶é—´å¤æ‚åº¦ç§°ä¸ºO(1),O(1)è¡¨ç¤ºæ—¶é—´å¤æ‚åº¦æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œä¸ç®¡æ•°ç»„è§„æ¨¡æ‰©å¤§å¤šå°‘ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾ç¬¬å‡ ä¸ªæ•°ï¼Œæ‰€ç”¨æ—¶é—´æ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ï¼Œæ­¤æ—¶è®°ä¸ºO(1)ã€‚ å‡è®¾äºŒå¦‚æœè¦è®¿é—®é“¾è¡¨ä¸­æŸä¸ªä½ç½®çš„å€¼ï¼Œè¿™æ—¶å€™æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚ä¸€èˆ¬æ—¶é—´å¤æ‚åº¦æˆ‘ä»¬éƒ½è®²çš„æ˜¯æœ€å·®çš„æƒ…å†µï¼Œåœ¨é“¾è¡¨ä¸­ï¼Œæ‰¾ç¬¬ä¸€ä¸ªæ•°çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ä¸ºO(1),è€Œæˆ‘ä»¬ä¸€èˆ¬è€ƒè™‘çš„æ˜¯æ‰¾æœ€åä¸€ä¸ªæ•°çš„æƒ…å†µã€‚æ‰€ä»¥æ­¤æ—¶å¤æ‚åº¦ä¸ºO(n)ã€‚ æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬éƒ½æœ‰ä»€ä¹ˆï¼Ÿn2ã€n3ã€log n å‡è®¾ä¸‰ æ±‚ä¸€ä¸ªæ•°ç»„çš„å¹³å‡æ•°ï¼Ÿæ±‚ä¸€ä¸ªæ•°ç»„çš„å¹³å‡æ•°ï¼Œæˆ‘ä»¬å…ˆæŠŠæ‰€æœ‰æ•°åŠ èµ·æ¥ï¼Œæ‰€ä»¥ä¸€ä¸ªæ•°ç»„è§„æ¨¡è¦æ‰©å¤§ï¼Œæˆ‘ä»¬è¦åŠ çš„æ•°éšä¹‹æ‰©å¤§ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚3.2 æ€è€ƒï¼šç”¨Oè¡¨ç¤ºæ—¶é—´å¤æ‚åº¦ï¼Ÿ a.æŸ¥æ‰¾æ•°ç»„æœ€åä¸€ä¸ªä½ç½®ä¸Šçš„æ•° b.æŸ¥æ‰¾é“¾è¡¨æœ€åä¸€ä¸ªä½ç½®ä¸Šçš„æ•° c.å¯¹æ•°ç»„æ±‚å’Œ d.æŸ¥æ‰¾æ•°ç»„çš„æœ€å¤§å€¼" }, { "title": "blog.algs.tech-è€ƒå¤å­¦", "url": "/posts/start.html", "categories": "", "tags": "", "date": "2023-01-18 01:45:00 +0800", "snippet": "ä¸€ã€æ¦‚è¿°2017å¹´ï¼Œæˆ‘ä½¿ç”¨typechoæ­å»ºäº†ä¸€ä¸ªåšå®¢ https://blog.jkdev.cnï¼Œæ–­æ–­ç»­ç»­æ›´æ–°ï¼Œä¹Ÿæ¢äº†å¥½å‡ æ¬¡æœåŠ¡å™¨ã€‚2023å¹´1æœˆ18æ—¥ï¼Œæˆ‘ä½¿ç”¨jekyllå…¨æ–°åˆ›å»ºæ­¤åšå®¢ï¼Œå¹¶å°†æ—§åšå®¢çš„æ–‡ç« è¿ç§»è¿‡æ¥ï¼Œæ‰˜ç®¡åœ¨githubä¸Šã€‚ç°åœ¨å·²ç»ä½¿ç”¨äº†å…¨æ–°çš„åŸŸå blog.algs.techã€‚æˆ‘ä¸€ç›´è®¤ä¸ºï¼Œè‡ªå·±æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯ï¼Œèµ°åœ¨æŠ€æœ¯æˆé•¿ä¹‹è·¯ä¸Šçš„äººã€‚åœ¨è¿™æ¡è·¯ä¸Šï¼Œæˆ‘é‡åˆ°è¿‡å¾ˆå¤šå¯å‘å’Œè§è§£ï¼Œå®ƒä»¬å°±åƒ...", "content": "ä¸€ã€æ¦‚è¿°2017å¹´ï¼Œæˆ‘ä½¿ç”¨typechoæ­å»ºäº†ä¸€ä¸ªåšå®¢ https://blog.jkdev.cnï¼Œæ–­æ–­ç»­ç»­æ›´æ–°ï¼Œä¹Ÿæ¢äº†å¥½å‡ æ¬¡æœåŠ¡å™¨ã€‚2023å¹´1æœˆ18æ—¥ï¼Œæˆ‘ä½¿ç”¨jekyllå…¨æ–°åˆ›å»ºæ­¤åšå®¢ï¼Œå¹¶å°†æ—§åšå®¢çš„æ–‡ç« è¿ç§»è¿‡æ¥ï¼Œæ‰˜ç®¡åœ¨githubä¸Šã€‚ç°åœ¨å·²ç»ä½¿ç”¨äº†å…¨æ–°çš„åŸŸå blog.algs.techã€‚æˆ‘ä¸€ç›´è®¤ä¸ºï¼Œè‡ªå·±æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯ï¼Œèµ°åœ¨æŠ€æœ¯æˆé•¿ä¹‹è·¯ä¸Šçš„äººã€‚åœ¨è¿™æ¡è·¯ä¸Šï¼Œæˆ‘é‡åˆ°è¿‡å¾ˆå¤šå¯å‘å’Œè§è§£ï¼Œå®ƒä»¬å°±åƒæ¥è‡ªå››é¢å…«æ–¹çš„å…‰ï¼Œç»™äººä»¥å¯è¿ªã€‚è€Œæˆ‘ï¼Œå€Ÿç”±æˆé•¿é˜…å†ä¹Ÿæ²‰æ·€å‡ºè‡ªå·±å¯¹æŠ€æœ¯çš„è§‚ç‚¹ï¼Œå¹¶æ„¿æ„ç»™å¤§å®¶åˆ†äº«ã€‚æˆ‘æƒ³å¾ˆåŠ¡å®ã€å¾ˆè´Ÿè´£ã€ä¹Ÿå¾ˆæœ‰å…´è¶£åœ°åˆ†äº«æŠ€æœ¯çŸ¥è¯†å’ŒèŒä¸šå¿ƒå¾—ã€‚æˆ‘ç›¸ä¿¡ï¼ŒåŠ©äººè€…è‡ªåŠ©ï¼äºŒã€ç›¸å…³é“¾æ¥ å“”å“©å“”å“©: https://space.bilibili.com/172353353 Github: https://github.com/geekdexè¿˜å¯ä»¥å…³æ³¨æˆ‘çš„ä¸ªäººå¾®ä¿¡å…¬ä¼—å·ï¼šæå®¢å¼€å‘è€…" } ]
